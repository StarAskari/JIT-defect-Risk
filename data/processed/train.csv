repo,bug_commit_sha,message,date,author,label,fix_commit_sha,fix_message,files_changed,additions,deletions,clean_message
dotnet/runtime,30dabfd706693d231dbdf9b13a1ab93b510513e7,enable EVEX embedded broadcast in more places (#109258),2024-11-05 00:19:32+00:00,Clinton Ingram,0,,,2,45,129,enable evex embedded broadcast in more places (issue_ref)
dotnet/runtime,da78cf7f8b28fed90067d25f7875f9a81cbc00d5,"Disable GS cookie checks for LightUnwind (#109524)

LightUnwind does not track sufficient context to compute GS cookie address

Fixes #109242",2024-11-05 00:58:25+00:00,Jan Kotas,1,552782f3baa11da491a9fd233dd566c992794d47,"Cleanup after GC info version update. (#108117)

* ReadyToRunVersionToGcInfoVersion

* removed AreSafePointsInterruptible, IsInterruptibleSafePoint, etc..

* dead code

* cleaned non-x86 path

* some dead code

* require disasm for fully interruptible x64

* x86-specific cleanup

* not supporting multireg returns on x86

* some comments

* fix for ARM32

* asserts

* another unreachable condition.

* remove unused findNextFunclet

* fix for UseRedirectForGcStress case.

* update comments and revert mitigation for active ICF + g_TrapReturningThreads

* fix after rebasing",6,46,0,disable gs cookie checks for lightunwind (issue_ref)lightunwind does not track sufficient context to compute gs cookie addressfixes issue_ref
dotnet/runtime,302e0d4cf9d603fbc76e508b0b41e778c69f2186,"Remove all kernel32.dll references and debug breakpoints (#108647)

* remove all kernel32.dll and debugbreak references

* log exception if run into oom

* remove some comments

* change debugBreakOnTestHang back to true

* throw timeout exception when DebugBreakOnTestHang is false

* throw exception if fail to write message to log file

* set debugBreakOnTestHang to false by default

* write message to log in timeout scenario

* print out debug break when debugBreakOnTestHang is true

* interrupt if debugbreak is presented, otherwise log and throw exception

* add _debugBreakOnTestHang field and MissingTestException class

* implement DebugBreakOrThrowException method

* implement GenerateExceptionMessageAndHandler method",2024-11-05 02:05:14+00:00,VincentBu,1,b22872f2756c81fe95c3e387ca2a4f872bad241a,fix throwing MissingTestException (#109577),6,92,96,"remove all kernel32.dll references and debug breakpoints (issue_ref)* remove all kernel32.dll and debugbreak references* log exception if run into oom* remove some comments* change debugbreakontesthang back to true* throw timeout exception when debugbreakontesthang is false* throw exception if fail to write message to log file* set debugbreakontesthang to false by default* write message to log in timeout scenario* print out debug break when debugbreakontesthang is true* interrupt if debugbreak is presented, otherwise log and throw exception* add _debugbreakontesthang field and missingtestexception class* implement debugbreakorthrowexception method* implement generateexceptionmessageandhandler method"
dotnet/runtime,73e1976f9510674d99bf4edbbe7392eac2843d41,"JIT: Add missing `lvTracked` check in `optLocalHasNonLoopUses` (#109505)

`optLocalHasNonLoopUses` checks if a local might be used after a loop by
making use of its liveness information, but it does not check
`lvTracked` before doing so. This is generally not a problem as there
are other checks that the local is in SSA, and normally SSA implies
lvTracked, but that's not the case for locals put into SSA by CSE.

Since it is possible to have CSE defs in a loop with uses outside the
loop, this check is necessary for correctness. It is expected to regress
a bunch of IV opts cases, but in the future we can get those back by
computing the necessary liveness when we insert into SSA.",2024-11-05 10:12:46+00:00,Jakob Botsch Nielsen,0,,,1,5,0,"jit: add missing check in (issue_ref) checks if a local might be used after a loop bymaking use of its liveness information, but it does not check before doing so. this is generally not a problem as thereare other checks that the local is in ssa, and normally ssa implieslvtracked, but that's not the case for locals put into ssa by cse.since it is possible to have cse defs in a loop with uses outside theloop, this check is necessary for correctness. it is expected to regressa bunch of iv opts cases, but in the future we can get those back bycomputing the necessary liveness when we insert into ssa."
dotnet/runtime,7c2f0041be9068fb641f53dc830606c95aab2488,Do not override `DefineConstants` in WBT(#109539),2024-11-05 11:06:34+00:00,Ilona Tomkowicz,0,,,2,3,3,do not override in wbt(issue_ref)
dotnet/runtime,9ef212c3354c85d92b60c23caa5b1c6cb10ddbb4,"Update area owners (#109509)

Removes @lambdageek",2024-11-05 14:23:34+00:00,Steve Pfister,0,,,3,50,50,update area owners (issue_ref)removes @lambdageek
dotnet/runtime,33af1a2c2ab9000dd57e8d1847b9d9e4931e7e1a,JIT: Don't convert unreachable BBJ_CALLFINALLYRET blocks to BBJ_THROW during morph (#109519),2024-11-05 15:43:55+00:00,Aman Khalid,1,714c5a0c99386e7a1c69cbd8ccd2dbbeb942a786,"JIT: fix inliner profile consistency computation (#109714)

It's possible for the JIT to inline a profiled inlinee into an unprofiled context, and then have a subsequent inline fold a profiled branch. If so we may see a case where the folded edges don't have profile information.

Tolerate this.

Fixes #109657

Re-morphing of a statement during early-prop may mistakenly believe it has altered the flow graph and so invalidates DFS. Value numbering is not set up to handle this and crashes. Since this seems like a rare occurrence, have morph detect if it has really changed the flowgraph and avoid invalidating the DFS when it hasn't.

Fixes #109730",1,2,3,jit: don't convert unreachable bbj_callfinallyret blocks to bbj_throw during morph (issue_ref)
dotnet/runtime,ecd5ee7277b1eb33bed4cc91ce7abee609bbbd71,"Upgrade our macOS build machines to the macOS-13 image (#109454)

* Upgrade our macOS build machines to the macOS-13 image.",2024-11-05 15:59:24+00:00,Jeremy Koritzinsky,1,d78536394d8ea8d58782d72a70ac830398ec3c99,"Add params for manual perf runs (#111427)

* Add parameters for testing perf pipeline

* Cleanup other param

* Fix indent

* Add full param list",2,2,2,upgrade our macos build machines to the macos-13 image (issue_ref)* upgrade our macos build machines to the macos-13 image.
dotnet/runtime,b8816bcae29bd1aae8ed421075142f1ab178f604,Unify DefineConstants (#109541),2024-11-05 16:52:46+00:00,Adeel Mujahid,0,,,8,6,9,unify defineconstants (issue_ref)
dotnet/runtime,cd63781074eb6c7598f93fcc4a144c8ab24f710e,"Eliminate redundant SafePasswordHandle values

`new SafePasswordHandle(null, false)` is the value represented by
SafePasswordHandle.InvalidValue.  Instead of making a using scope
and a new object, just use the singleton.",2024-11-05 17:17:25+00:00,Jeremy Barton,0,,,3,5,16,"eliminate redundant safepasswordhandle values is the value represented bysafepasswordhandle.invalidvalue. instead of making a using scopeand a new object, just use the singleton."
dotnet/runtime,837e0042c1e5b7a1f6be0bca23ce4f17e8e5ea48,Conditionally check the compiler flags in libs.native (#109228),2024-11-05 18:11:35+00:00,Adeel Mujahid,0,,,1,7,3,conditionally check the compiler flags in libs.native (issue_ref)
dotnet/runtime,a7575376018e3d961255b0e40edbe7a87e47832e,Add support for UTF-8 in PemEncoding,2024-11-05 18:39:48+00:00,Kevin Jones,0,,,4,469,77,add support for utf-8 in pemencoding
dotnet/runtime,552782f3baa11da491a9fd233dd566c992794d47,"Cleanup after GC info version update. (#108117)

* ReadyToRunVersionToGcInfoVersion

* removed AreSafePointsInterruptible, IsInterruptibleSafePoint, etc..

* dead code

* cleaned non-x86 path

* some dead code

* require disasm for fully interruptible x64

* x86-specific cleanup

* not supporting multireg returns on x86

* some comments

* fix for ARM32

* asserts

* another unreachable condition.

* remove unused findNextFunclet

* fix for UseRedirectForGcStress case.

* update comments and revert mitigation for active ICF + g_TrapReturningThreads

* fix after rebasing",2024-11-05 19:06:52+00:00,Vladimir Sadov,1,1b8518435bde23806d850ab399828f8f594e95a0,"Enlarge stack overflow handling helper stack (#110068)

The stack overflow coreclr tests started to fail recently. It turns out that
was caused by the size of the helper stack allocated for stack overflow
handling case is no longer sufficient. Moreover, there is a bug in
`Thread::CreateUtilityThread` that calls the `SetThreadName` even when the
thread creation fails.

Close #109499",15,851,1541,"cleanup after gc info version update. (issue_ref)* readytorunversiontogcinfoversion* removed aresafepointsinterruptible, isinterruptiblesafepoint, etc..* dead code* cleaned non-x86 path* some dead code* require disasm for fully interruptible x64* x86-specific cleanup* not supporting multireg returns on x86* some comments* fix for arm32* asserts* another unreachable condition.* remove unused findnextfunclet* fix for useredirectforgcstress case.* update comments and revert mitigation for active icf + g_trapreturningthreads* fix after rebasing"
dotnet/runtime,e94d94ce6d819f3e36fbe1125a88367c947e8d08,"Update dependencies from https://github.com/dotnet/source-build-reference-packages build 20241105.1 (#109561)

Microsoft.SourceBuild.Intermediate.source-build-reference-packages
 From Version 10.0.0-alpha.1.24530.1 -> To Version 10.0.0-alpha.1.24555.1

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2024-11-05 20:38:08+00:00,dotnet-maestro[bot],0,,,1,2,2,update dependencies from build 20241105.1 (issue_ref)microsoft.sourcebuild.intermediate.source-build-reference-packages from version 10.0.0-alpha.1.24530.1 -> to version 10.0.0-alpha.1.24555.1
dotnet/runtime,9f54e5162a177b8d6ad97ba53c6974fb02d0a47d,Remove unused TypeHandle::GetDefiningModuleForOpenType (#109527),2024-11-05 22:10:11+00:00,Elinor Fung,1,43d1838e6a05028e9d2880527c9c2b7e35e81ce8,"Fix C++/CLI applications which use __declspec(appdomain) (#110367)

* Do not eagerly allocate static variable space while loading the assembly in use. This avoids possible recursive loading issues found in C++/CLI codebases. Repurpose the NativeCallingManaged test to subsume this particular regression test case.

Fix #110365

* Fix testcase",6,0,109,remove unused typehandle::getdefiningmoduleforopentype (issue_ref)
dotnet/runtime,f6345d24b90ed79d919dc0066db913bdc060914a,"Add 1.1 runtime packages to PackageOverrides.txt (#109553)

I was reviewing correctness of framework package exclusion in component-governance and noticed these 1.x era packages were not being treated correctly.",2024-11-05 22:46:09+00:00,Eric StJohn,0,,,1,78,1,add 1.1 runtime packages to packageoverrides.txt (issue_ref)i was reviewing correctness of framework package exclusion in component-governance and noticed these 1.x era packages were not being treated correctly.
dotnet/runtime,3116db9c19512d89b2091a9e5fcbec08581d0f9d,Fix file name buffer size for PAL's CreateProcess (#109436),2024-11-06 00:21:16+00:00,Gregg Miskelly,1,ffcef3dec5f16289a8f71f332091266529288d5c,"Haiku: Add Haiku support for CoreCLR/PAL (#93907)

* Haiku: Add Haiku support for CoreCLR/PAL

This contains a part of the code required to build CoreCLR and get
`paltests` to pass on Haiku.

This commit covers `src/coreclr/pal/**`.

Co-authored-by: Jessica Hamilton <jessica.l.hamilton@gmail.com>

* ilasm: Haiku build fixes

Some OSes like Haiku define the `_EXPORT` and `_IMPORT` marcos.

Symbols beginning with an underscore followed immediately by an
uppercase letter are reserved anyway.

Add the guards to get them out of the way.

* pal: Remove usage of MAP_FILE

This flag is a compatibility flag and not required on most OSes.
Some, including Haiku, does not even define it.

---------

Co-authored-by: Jessica Hamilton <jessica.l.hamilton@gmail.com>",1,9,3,fix file name buffer size for pal's createprocess (issue_ref)
dotnet/runtime,ffcef3dec5f16289a8f71f332091266529288d5c,"Haiku: Add Haiku support for CoreCLR/PAL (#93907)

* Haiku: Add Haiku support for CoreCLR/PAL

This contains a part of the code required to build CoreCLR and get
`paltests` to pass on Haiku.

This commit covers `src/coreclr/pal/**`.

Co-authored-by: Jessica Hamilton <jessica.l.hamilton@gmail.com>

* ilasm: Haiku build fixes

Some OSes like Haiku define the `_EXPORT` and `_IMPORT` marcos.

Symbols beginning with an underscore followed immediately by an
uppercase letter are reserved anyway.

Add the guards to get them out of the way.

* pal: Remove usage of MAP_FILE

This flag is a compatibility flag and not required on most OSes.
Some, including Haiku, does not even define it.

---------

Co-authored-by: Jessica Hamilton <jessica.l.hamilton@gmail.com>",2024-11-06 10:48:28+00:00,Trung Nguyen,1,2cdfd0a350bd119ddc822e1bd0d4bc42f9040616,Fix recursion issue found in 109779 (#110379),25,152,35,haiku: add haiku support for coreclr/pal (issue_ref)* haiku: add haiku support for coreclr/palthis contains a part of the code required to build coreclr and get to pass on haiku.this commit covers .
dotnet/runtime,3f0a23d76d6133f2d507f69d2158afcf54ae7e76,"Dedup remaining MemoryExtensions Span overloads (#109501)

* Dedup remaining MemoryExtensions Span overloads

Most of the non-mutating Span-based methods on MemoryExtensions just delegate to the ReadOnlySpan counterparts. And moving forward, we're not going to be adding such Span-based overloads, as the only reason we were doing so was to enable them them to show up via extension syntax, but now that this will ""just work"" with C# 14, there's no need. Thus, this PR removes the remaining duplication so that all of the existing span-based methods are on the same plan.

* Address feedback",2024-11-06 21:17:47+00:00,Stephen Toub,0,,,1,49,366,"dedup remaining memoryextensions span overloads (issue_ref)* dedup remaining memoryextensions span overloadsmost of the non-mutating span-based methods on memoryextensions just delegate to the readonlyspan counterparts. and moving forward, we're not going to be adding such span-based overloads, as the only reason we were doing so was to enable them them to show up via extension syntax, but now that this will ""just work"" with c# 14, there's no need. thus, this pr removes the remaining duplication so that all of the existing span-based methods are on the same plan.* address feedback"
dotnet/runtime,b45b9e8397e8b371f0ff353ecf3d9cbf6befac8a,"Use type-level annotations for trimming/AOT analysis (#109571)

Gets rid of a few warning suppressions on instance members where we
annotated constructors, by moving the constructor annotations to the
type level. In a few cases this required moving some static methods to
a separate class so that they don't produce warnings when called.

---------

Co-authored-by: Eric Erhardt <eric.erhardt@microsoft.com>",2024-11-06 22:26:33+00:00,Sven Boemer,1,377c43b05a9e3221bb48160d78634897b5083964,Fix case-insensitive JSON deserialization of enum member names (#112028),37,112,368,"use type-level annotations for trimming/aot analysis (issue_ref)gets rid of a few warning suppressions on instance members where weannotated constructors, by moving the constructor annotations to thetype level. in a few cases this required moving some static methods toa separate class so that they don't produce warnings when called.---------"
dotnet/runtime,b85f21f3751957a8202ee80cfb66ab5cb4df4794,Report more details when dictionary layout missing (#109576),2024-11-06 22:34:29+00:00,Michal Strehovský,0,,,1,1,1,report more details when dictionary layout missing (issue_ref)
dotnet/runtime,1478ff6913c48af8566ea8bb8f1239b7a2b78a6b,"[main] Update dependencies from dotnet/arcade (#109544)

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Jeremy Koritzinsky <jekoritz@microsoft.com>
Co-authored-by: Jeremy Koritzinsky <jkoritzinsky@gmail.com>",2024-11-06 22:39:54+00:00,dotnet-maestro[bot],0,,,9,82,91,[main] update dependencies from dotnet/arcade (issue_ref)
dotnet/runtime,36bcc2c96045c6793dcfe3151c51a0597537917a,[ILASM] Add wrappers for platform-specific SHA-256 implementations (#109559),2024-11-07 05:47:01+00:00,Aman Khalid,0,,,2,124,0,[ilasm] add wrappers for platform-specific sha-256 implementations (issue_ref)
dotnet/runtime,9c1f53e39f48b09be71097f1b7a47e45331e4906,"JIT: Put all CSEs into SSA (#106637)

This adds an SSA updater that can incrementally put locals that were added to
the IR into SSA form and starts using this infrastructure from CSE. Previously
only single-def CSEs were put into SSA, which can cause e.g. IV opts to miss out
on them.

The SSA updater requires all uses and definitions to be supplied. Based on the
definitions it is then possible to compute the candidate blocks for phi nodes in
the usual way as the iterated dominance frontier. Since we do not have liveness
for the local we do not insert the phi definitions eagerly; instead, we
recursively compute the reaching def for each use by walking its dominators.
Walking the dominators we either expect to find a real definition, or to hit a
block that is part of the iterated dominance frontier of the definitions, in
which case we know we have a live phi definition that we can insert.

Inserting phi definitions needs to recursively do the same thing for the phi
arguments. To make this faster we could memoize the reaching SSA numbers for
each block, though this is not currently done.

This also requires computing the DFS tree, dominators, and dominance frontiers
after RBO (which invalidates those). Since the DFS tree and dominator tree is
usually computed anyway by IV opts, this is not that costly. The cost is further
reduced by avoiding any of these computations in the single-def case (which CSE
already handled). This special case is also moved into the SSA updater.

Finally, since IV opts need liveness to work, the SSA inserter also computes
liveness for the inserted locals. This is done by marking all paths from each
use back to its reaching definition as having that local live-in.",2024-11-07 10:17:50+00:00,Jakob Botsch Nielsen,1,ad75a4aa26f1474890024c4d2af6429097745321,"Fix warnings in coreclr/jit/compiler.cpp for non-Windows targets (#109830)

This change was extracted from https://github.com/dotnet/runtimelab/pull/2614,
which includes various fixes to enable building on non-Windows systems.  We're
in the process of upstreaming the parts of that PR which are not specific to
NativeAOT-LLVM, and this is the latest such change.",13,997,292,"jit: put all cses into ssa (issue_ref)this adds an ssa updater that can incrementally put locals that were added tothe ir into ssa form and starts using this infrastructure from cse. previouslyonly single-def cses were put into ssa, which can cause e.g. iv opts to miss outon them.the ssa updater requires all uses and definitions to be supplied. based on thedefinitions it is then possible to compute the candidate blocks for phi nodes inthe usual way as the iterated dominance frontier. since we do not have livenessfor the local we do not insert the phi definitions eagerly; instead, werecursively compute the reaching def for each use by walking its dominators.walking the dominators we either expect to find a real definition, or to hit ablock that is part of the iterated dominance frontier of the definitions, inwhich case we know we have a live phi definition that we can insert.inserting phi definitions needs to recursively do the same thing for the phiarguments. to make this faster we could memoize the reaching ssa numbers foreach block, though this is not currently done.this also requires computing the dfs tree, dominators, and dominance frontiersafter rbo (which invalidates those). since the dfs tree and dominator tree isusually computed anyway by iv opts, this is not that costly. the cost is furtherreduced by avoiding any of these computations in the single-def case (which csealready handled). this special case is also moved into the ssa updater.finally, since iv opts need liveness to work, the ssa inserter also computesliveness for the inserted locals. this is done by marking all paths from eachuse back to its reaching definition as having that local live-in."
dotnet/runtime,70c574d7fb8b97d1e0e8c0781b7ac4e45c696e80,Clean up code with `NET8_0_OR_GREATER` (#109507),2024-11-07 13:50:18+00:00,karakasa,1,9a5f012f39139a31e5ae24abc35dd19480fa6465,"Fix typos in ArgumentOutOfRangeException.cs (#111100)

* Fix typos in ArgumentOutOfRangeException.cs

Fixed some minor typos in docs comments for throw helpers.

* Update ThrowHelper.cs

---------

Co-authored-by: Stephen Toub <stoub@microsoft.com>",6,5,9,clean up code with (issue_ref)
dotnet/runtime,c735e821cace5dc07d9f8be9721cb6f397191f62,"Update dependencies from https://github.com/dotnet/arcade build 20241106.2 (#109601)

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.24555.3 -> To Version 10.0.0-beta.24556.2

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2024-11-07 15:20:18+00:00,dotnet-maestro[bot],0,,,3,61,61,"update dependencies from build 20241106.2 (issue_ref)microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.versiontools.tasks , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.24555.3 -> to version 10.0.0-beta.24556.2"
dotnet/runtime,e133fe4f5311c0397f8cc153bada693c48eb7a9f,JIT: Don't split up partially-hot call-finally pairs during 3-opt layout (#109592),2024-11-07 15:35:50+00:00,Aman Khalid,0,,,1,8,0,jit: don't split up partially-hot call-finally pairs during 3-opt layout (issue_ref)
dotnet/runtime,ce6d8359d2a46c8b67add06a7010895ecce63380,"Unify corerun's implementation of the native debugger check with the minipal for all platforms (#109599)

Co-authored-by: Adeel Mujahid <3840695+am11@users.noreply.github.com>",2024-11-07 19:52:05+00:00,Jeremy Koritzinsky,0,,,4,32,99,unify corerun's implementation of the native debugger check with the minipal for all platforms (issue_ref)
dotnet/runtime,4490f6978d769e856999f897857819005e69aa58,"Clarifying instructions for GenerateReferenceAssemblySource target (#109468)

* clarifying instructions for genapi target

* Update docs/coding-guidelines/updating-ref-source.md

Co-authored-by: Jeff Handley <jeffhandley@users.noreply.github.com>

---------

Co-authored-by: Jeff Handley <jeffhandley@users.noreply.github.com>",2024-11-07 20:07:45+00:00,Pranav Senthilnathan,0,,,1,1,1,clarifying instructions for generatereferenceassemblysource target (issue_ref)* clarifying instructions for genapi target* update docs/coding-guidelines/updating-ref-source.md
dotnet/runtime,f697b537030934bae2e1d98306e2439168f01365,Change iOS PEM searcher to use PemEncoding.TryFindUtf8,2024-11-07 23:10:15+00:00,Kevin Jones,0,,,7,57,60,change ios pem searcher to use pemencoding.tryfindutf8
dotnet/runtime,ed9de195098414413fe6b6b4565b0e6129ae0b3d,"[cdac] Handle non-default active version and explicit IL code version cases for `CodeVersions.GetActiveNativeCodeVersion` (#109560)

- Update `CodeVersions.GetActiveNativeCodeVersion` to handle non-default active version and explicit IL code version
- Update `RuntimeTypeSystem.GetAddressOfSlot` to handle non-virtual slots
- Add null check for `MethodDescCodeData` in `RuntimeTypeSystem.GetMethodDescVersioningState`",2024-11-08 00:09:29+00:00,Elinor Fung,0,,,13,345,76,[cdac] handle non-default active version and explicit il code version cases for (issue_ref)- update to handle non-default active version and explicit il code version- update to handle non-virtual slots- add null check for in
dotnet/runtime,e03b9a4692a15eb3ffbb637439241e8f8e5ca95f,"Respect `ClassInterfaceAttribute` during COM server activation (#109616)

* Respect ClassInterface during COM server activation

Managed COM servers can define the ClassInterfaceAttribute
to indicate if IDispatch is supported.
Add tests for these activation scenarios.",2024-11-08 00:27:50+00:00,Aaron Robinson,0,,,7,172,14,respect during com server activation (issue_ref)* respect classinterface during com server activationmanaged com servers can define the classinterfaceattributeto indicate if idispatch is supported.add tests for these activation scenarios.
dotnet/runtime,ddd750c64fb2a50694566f4b7df0d193d35960de,"Add regression testing for source generated with .NET 9 (#109448)

* Add regression testing for source generated with .NET 9

* Update src/libraries/System.Text.Json/tests/System.Text.Json.Tests/SourceGenRegressionTests/Net90/Net90GeneratedContext.cs

Co-authored-by: Pranav Senthilnathan <pranav.senthilnathan@live.com>

---------

Co-authored-by: Pranav Senthilnathan <pranav.senthilnathan@live.com>",2024-11-08 04:35:33+00:00,Eirik Tsarpalis,0,,,16,1221,42,add regression testing for source generated with .net 9 (issue_ref)* add regression testing for source generated with .net 9* update src/libraries/system.text.json/tests/system.text.json.tests/sourcegenregressiontests/net90/net90generatedcontext.cs
dotnet/runtime,cb7846154f44424d7323dc60be5d7513070e552f,Remove uncompiled `net7.0` files (#109342),2024-11-08 04:37:10+00:00,xtqqczze,0,,,2,1,72,remove uncompiled files (issue_ref)
dotnet/runtime,2f24ac9bff2a38034b52f4508dd365a95d9b5ae3,"Add Span<byte> overloads for ProtectedData

ProtectedData only has allocating byte[] overloads,
but in .NET 5+, Span<byte> overloads can avoid allocations.

Co-authored-by: Jeremy Barton <jbarton@microsoft.com>",2024-11-08 05:08:38+00:00,Chad Nedzlek,0,,,9,584,60,"add span<byte> overloads for protecteddataprotecteddata only has allocating byte[] overloads,but in .net 5+, span<byte> overloads can avoid allocations."
dotnet/runtime,ef685ada8a2515dbce02e46b1741b9d1c36cca0b,"[mono] Check in offsets files used for AOT cross compilers (#109612)

This allows us to remove a join point in the VMR build.
Instead of generating the offsets during the AOT cross compiler build we use the checked in files and change the existing CI job to validate that the generated file matches the checked in ones.

Fixes https://github.com/dotnet/source-build/issues/3701",2024-11-08 09:05:34+00:00,Alexander Köplinger,1,f23d779533aefb4537ffa4632116f277b14da179,"Fix rebuilding mono aot cross compiler when building locally (#118445)

* Fix rebuilding mono aot cross compiler when building locally

This is a side-effect of the changes made in https://github.com/dotnet/runtime/pull/109612.
When we do rerun the offsets generation script locally it causes the file to be touched even if it's identical, which in turn causes the whole aot cross compiler binary to be rebuilt.

To fix this only write to the output offsets file when it actually changed.

* Apply suggestion from @Copilot

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",24,3274,154,[mono] check in offsets files used for aot cross compilers (issue_ref)this allows us to remove a join point in the vmr build.instead of generating the offsets during the aot cross compiler build we use the checked in files and change the existing ci job to validate that the generated file matches the checked in ones.fixes
dotnet/runtime,809d3d2037b83294a49004b0d43e27b6d5bd5953,Expand an optimization for short values to IgnoreCase in single-value SearchValues<string> (#108368),2024-11-08 09:06:16+00:00,Miha Zupan,0,,,1,10,10,expand an optimization for short values to ignorecase in single-value searchvalues<string> (issue_ref)
dotnet/runtime,8cad4ebb1dc9b5cc4452c852893544d4cf0d637b,"Remove and readd .deb, .rpm, and .pkg as FileExtensionSignInfos (#109628)",2024-11-08 12:10:37+00:00,Ella Hathaway,0,,,1,8,0,"remove and readd .deb, .rpm, and .pkg as fileextensionsigninfos (issue_ref)"
dotnet/runtime,1d86001220b04cd9d074c28ab62610c6acb7698e,"Convert dotnet/runtime to use the new Arcade tooling for RPMs (#109526)

* Convert dotnet/runtime to use the new Arcade tooling for RPMs.

Fixes #109518

* Build rpms and debs as part of the regular (default) build command on linux non-musl, including in the VMR.

Fixes dotnet/source-build#4138

* Now that we produce all of our packages by default, remove the YAML for producing them in separate steps in special containers and remove our references to those containers

* Limit the architectures we build packages on

* Now that we aren't making the symlink ourselves, leave LinuxInstallRoot as its default value.",2024-11-08 12:16:45+00:00,Jeremy Koritzinsky,1,60b84bb13e499e0866731dbe21973b92b7abed15,"Use 1ES templateContext for workloads upload (#109647)

Fixes https://github.com/dotnet/runtime/issues/60687",27,71,123,"convert dotnet/runtime to use the new arcade tooling for rpms (issue_ref)* convert dotnet/runtime to use the new arcade tooling for rpms.fixes issue_ref* build rpms and debs as part of the regular (default) build command on linux non-musl, including in the vmr.fixes dotnet/source-buildissue_ref* now that we produce all of our packages by default, remove the yaml for producing them in separate steps in special containers and remove our references to those containers* limit the architectures we build packages on* now that we aren't making the symlink ourselves, leave linuxinstallroot as its default value."
dotnet/runtime,443f63dfaf82306f178badf43763f208e859ff20,Exclude shared libs from ilcframework in pkg (#109253),2024-11-08 13:49:17+00:00,Adeel Mujahid,1,5db0ce0fa2e206da664498044af233a044f9aeb7,"Fix the condition to exclude only native shared libs (#109676)

* Fix the condition to exclude only native shared libs

* Update Microsoft.DotNet.ILCompiler.pkgproj",1,3,0,exclude shared libs from ilcframework in pkg (issue_ref)
dotnet/runtime,ee68c2c2dc34bff53c666feee05bcde16c2c8b47,"Handle IOV_MAX limit in RandomAccess, add missing test (#109340)

* add test for Int32 overflow for WriteGather in RandomAccess

* add failing test fore more than IOV_MAX buffers

* fix both the native and managed parts

---------

Co-authored-by: Adeel Mujahid <3840695+am11@users.noreply.github.com>
Co-authored-by: Stephen Toub <stoub@microsoft.com>",2024-11-08 15:48:13+00:00,Adam Sitnik,1,4951e38fc5882ddf7df68c956acb6f5586ef47dd,"More WriteGather fixes (#109826)

* don't run these tests in parallel, as each test cases uses more than 4 GB ram and disk!

* fix the test: handle incomplete reads that should happen when we hit the max buffer limit

* incomplete write fix:

- pin the buffers only once
- when re-trying, do that only for the actual reminder

* Use native memory to get OOM a soon as we run out of memory (hoping to avoid the process getting killed on Linux when OOM happens)

* For macOS preadv and pwritev can fail with EINVAL when the total length of all vectors overflows a 32-bit integer.

* add an assert that is going to warn us if vector.Count is ever more than Int32.MaxValue

---------

Co-authored-by: Michał Petryka <35800402+MichalPetryka@users.noreply.github.com>",3,153,4,"handle iov_max limit in randomaccess, add missing test (issue_ref)* add test for int32 overflow for writegather in randomaccess* add failing test fore more than iov_max buffers* fix both the native and managed parts---------"
dotnet/runtime,7976f780cf7136c05da82b8c84940b10c4f5cb42,"Avoid hardcoded illink.tasks TFM (#109634)

Replaces https://github.com/dotnet/runtime/pull/109619

We made a similar change recently in arcade to not use the TFM but a normalized value of the TargetFrameworkIdentifier property for tools packages.",2024-11-08 17:27:33+00:00,Viktor Hofer,1,4389f9c54d070ca5e0cf7c4931aff56fe36d667f,"Don't log from property accessors in the ILLink task. (#109948)

When executing a remote iOS build from Windows on macOS, the ILLink task is instantiated on the remote macOS machine using a json deserializer.

This means that the properties will be read and written to before the task has been fully initialized, and this happens:

```
Newtonsoft.Json.JsonSerializationException: Error getting value from 'ILLinkPath' on 'Xamarin.MacDev.Tasks.ILLink'.
 ---> System.InvalidOperationException: Task attempted to log before it was initialized. Message was: ILLink.Tasks path: ~/Library/Caches/Xamarin/XMA/Agents/Build/net/illink.dll
   at Microsoft.Build.Shared.ErrorUtilities.ThrowInvalidOperation(String resourceName, Object[] args)
   at Microsoft.Build.Utilities.TaskLoggingHelper.LogMessage(MessageImportance importance, String message, Object[] messageArgs)
   at ILLink.Tasks.ILLink.get_ILLinkPath()
   at Newtonsoft.Json.Serialization.ExpressionValueProvider.GetValue(Object target)
   --- End of inner exception stack trace ---
   at Newtonsoft.Json.Serialization.ExpressionValueProvider.GetValue(Object target)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.SetPropertyValue(JsonProperty property, JsonConverter propertyConverter, JsonContainerContract containerContract, JsonProperty containerProperty, JsonReader reader, Object target)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.PopulateObject(Object newObject, JsonReader reader, JsonObjectContract contract, JsonProperty member, String id)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateObject(JsonReader reader, Type objectType, JsonContract contract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerMember, Object existingValue)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.CreateValueInternal(JsonReader reader, Type objectType, JsonContract contract, JsonProperty member, JsonContainerContract containerContract, JsonProperty containerMember, Object existingValue)
   at Newtonsoft.Json.Serialization.JsonSerializerInternalReader.Deserialize(JsonReader reader, Type objectType, Boolean checkAdditionalContent)
   at Newtonsoft.Json.JsonSerializer.DeserializeInternal(JsonReader reader, Type objectType)
   at Newtonsoft.Json.JsonSerializer.Deserialize(JsonReader reader, Type objectType)
   at Xamarin.Messaging.Build.Serialization.TaskSerializer.Deserialize(String content, Type taskType) in D:\a\_work\1\s\src\MSBuild\Xamarin.Messaging.Build.Common\Serialization\TaskSerializer.cs:line 25
   at Xamarin.Messaging.Build.TaskRunner.Execute(String taskName, String inputs) in [...]xamarin-macios/msbuild/Messaging/Xamarin.Messaging.Build/TaskRunner.cs:line 42
   at Xamarin.Messaging.Build.ExecuteTaskMessageHandler.<>c__DisplayClass5_0.<ExecuteAsync>b__0() in [...]xamarin-macios/msbuild/Messaging/Xamarin.Messaging.Build/Handlers/ExecuteTaskMessageHandler.cs:line 40
   at System.Threading.Tasks.Task`1.InnerInvoke()
   at System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Xamarin.Messaging.Build.ExecuteTaskMessageHandler.ExecuteAsync(ExecuteTaskMessage message) in [...]xamarin-macios/msbuild/Messaging/Xamarin.Messaging.Build/Handlers/ExecuteTaskMessageHandler.cs:line 28
   at Xamarin.Messaging.Client.RequestHandler`2.HandleAsync(TMessage message) in D:\a\_work\1\s\src\Xamarin.Messaging.Client\Handlers\RequestHandler.cs:line 68
   at Xamarin.Messaging.Client.MessageHandlerManager.<>c__DisplayClass12_1`2.<<RegisterHandlerAsync>b__2>d.MoveNext() in D:\a\_work\1\s\src\Xamarin.Messaging.Client\MessageHandlerManager.cs:line 96
--- End of stack trace from previous location ---
   at Xamarin.Messaging.Client.MessagingClient.ReplyAsync[TRequest,TResponse](IRequest`1 request, MessagePriority priority, Func`1 replyFunctionAsync) in D:\a\_work\1\s\src\Xamarin.Messaging.Client\MessagingClient.cs:line 351: 11/18/2024 10:23:11Z
```

So move the logging statement to when it the property in question is used.",7,28,46,avoid hardcoded illink.tasks tfm (issue_ref)replaces we made a similar change recently in arcade to not use the tfm but a normalized value of the targetframeworkidentifier property for tools packages.
dotnet/runtime,a36cd09390f4d02135c4adf3b68d68f3ef2eb86e,"Simplify temporary keychain password-gen

Rather than a bespoke solution that's functionally equivalent to
`RNG.GetItems(""ABCDEFGHIJKLMNOP""u8, dest512)`, just use
RNG.GetItems, but with a bigger choice-set and a smaller output size.",2024-11-08 17:56:12+00:00,Jeremy Barton,0,,,1,9,19,"simplify temporary keychain password-genrather than a bespoke solution that's functionally equivalent to, just userng.getitems, but with a bigger choice-set and a smaller output size."
dotnet/runtime,5d9d6f5cf67ffc74b7224ca4473e6f2992bd75e2,"Move GenTreeVecCon and GenTreeMskCon under the respective FEATURE_* defines (#104932)

* Move GenTreeVecCon and GenTreeMskCon under the respective FEATURE_* defines

* Apply formatting patch",2024-11-08 18:03:10+00:00,Tanner Gooding,1,2c7c6bf5d18a7d42f4b9f48fe4bced22f1d292ae,"Detect mask usage for Across functions (#109218)

* Detect mask usage for Across functions

Fixes: #101973

* Fix build errors on x86

* Refactor containable check for csel

* Remove optimisation of AddSequentialAcross and assembly checks

* Add more tests with different mask values

* Avoid containing csel that's already containing an embedded op

* Add test for the Fuzzlyn reported failure

* Fix test build failures",18,195,82,move gentreeveccon and gentreemskcon under the respective feature_* defines (issue_ref)* move gentreeveccon and gentreemskcon under the respective feature_* defines* apply formatting patch
dotnet/runtime,60b84bb13e499e0866731dbe21973b92b7abed15,"Use 1ES templateContext for workloads upload (#109647)

Fixes https://github.com/dotnet/runtime/issues/60687",2024-11-08 18:49:29+00:00,Alexander Köplinger,1,f1ed351f6dc451e4c3877eaf3231391724c0c2a7,"Fix upload conflict Microsoft.NETCore.App.Ref in official build (#109650)

We're occasionally seeing errors on the official build during artifacts upload (https://github.com/dotnet/dnceng/issues/1916)
This is because multiple jobs are trying to push the Microsoft.NETCore.App.Ref nuget package to the same AzDO build artifacts container, causing conflicts.

Since we'll be using the VMR in the near future and it is using a different asset selection the quick fix is to just delete the package on the jobs where it's not supposed to be uploaded rather than trying to introduce a complicated condition in msbuild.",2,29,29,use 1es templatecontext for workloads upload (issue_ref)fixes
dotnet/runtime,19cd4244a409b36a8fa038319b12081d8a986047,Update trimmer attributes for `ComActivator` (#109655),2024-11-09 09:00:44+00:00,Aaron Robinson,0,,,4,8,63,update trimmer attributes for (issue_ref)
dotnet/runtime,d8208737f8b1ede2c6673a89769dc29fb7a7f6af,"Remove unnecessary StreamReader.EndOfStream call from NetworkInformation (#109631)

* Remove unnecessary StreamReader.EndOfStream call from NetworkInformation

* Update src/libraries/System.Net.NetworkInformation/src/System/Net/NetworkInformation/StringParsingHelpers.Statistics.cs

Co-authored-by: Theodore Tsirpanis <teo@tsirpanis.gr>

---------

Co-authored-by: Theodore Tsirpanis <teo@tsirpanis.gr>",2024-11-09 16:40:03+00:00,Stephen Toub,0,,,1,1,2,remove unnecessary streamreader.endofstream call from networkinformation (issue_ref)* remove unnecessary streamreader.endofstream call from networkinformation* update src/libraries/system.net.networkinformation/src/system/net/networkinformation/stringparsinghelpers.statistics.cs
dotnet/runtime,80cb4583c9079cf052e6148b51b43590771b4353,"Add FromFile to BinaryData (#107231)

* Add FromFile to BinaryData

* Cleanup temporary files

* Use FileStream async mode

* Avoid code duplication

* Use test helpers

* Use ReadAllBytes{Async} where possible

* Async wrapper

* Tests cleaning",2024-11-10 12:36:17+00:00,Emmanuel André,0,,,5,160,56,add fromfile to binarydata (issue_ref)* add fromfile to binarydata* cleanup temporary files* use filestream async mode* avoid code duplication* use test helpers* use readallbytes{async} where possible* async wrapper* tests cleaning
dotnet/runtime,1a238633e37113868ae2fe208d4ae17e16bf72b8,"Mention cpio and pigz in linux-requirements doc (#109681)

* Mention cpio and pigz in linux-requirements doc

* More duplicates

* Alphabatize and align style",2024-11-10 17:15:58+00:00,Adeel Mujahid,1,2b679cf0507574da8331b0667d7ea4c39c9054be,"Fix Workflow Broken Markdown Links (#110332)

* Fix Markdown links that broke after the workflow documentation reconsolidation.

* Fixed two other links that broke outside the workflow documents.

* Changed 'Debian/Ubuntu' to 'Debian and Ubuntu' in the Linux requirements doc because otherwise, I couldn't get the table of contents link to work correctly.",1,32,24,mention cpio and pigz in linux-requirements doc (issue_ref)* mention cpio and pigz in linux-requirements doc* more duplicates* alphabatize and align style
dotnet/runtime,35d27803b83bbd46d3cfe42aa58f46f585c0c6ae,"Add draft of runtime async ECMA-335 changes (#104063)

* Initial commit

* Apply suggestions from code review

Co-authored-by: Jan Kotas <jkotas@microsoft.com>
Co-authored-by: Hamish Arblaster <hamarb123@gmail.com>
Co-authored-by: Aleksey Kliger (λgeek) <akliger@gmail.com>
Co-authored-by: Fred Silberberg <fred@silberberg.xyz>

* Respond to PR comments

* Respond to PR comments

* Typo

* Update runtime-async.md

* Update runtime-async.md

* Add note about using MethodRef for implicit methods

* Update docs/design/specs/runtime-async.md

Co-authored-by: Jakob Botsch Nielsen <Jakob.botsch.nielsen@gmail.com>

* Update runtime-async.md

* Update runtime-async.md

Try to include changes around signature language

* Update runtime-async.md

* Update docs/design/specs/runtime-async.md

Co-authored-by: Fred Silberberg <fred@silberberg.xyz>

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>
Co-authored-by: Hamish Arblaster <hamarb123@gmail.com>
Co-authored-by: Aleksey Kliger (λgeek) <akliger@gmail.com>
Co-authored-by: Fred Silberberg <fred@silberberg.xyz>
Co-authored-by: Jakob Botsch Nielsen <Jakob.botsch.nielsen@gmail.com>",2024-11-10 21:25:24+00:00,Andy Gocke,1,48e3f132189750cf036486dd13d901e3ce32f474,"[RuntimeAsync] Make Async marker a bit in MethodImpl flags (#110274)

* Make Async marker a bit in MethodImpl flags

* Linter error

* PR feedback

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Update runtime-async.md

* style tweaks

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",1,74,0,add draft of runtime async ecma-335 changes (issue_ref)* initial commit* apply suggestions from code review
dotnet/runtime,7ee5b7d24039c5696da5d1a5c90a32f7e1bb38c9,"Update IHttpClientLogger.cs and IHttpClientAsyncLogger.cs remarks (#109618)

* Update IHttpClientLogger.cs remarks

Updated IHttpClientLogger remarks to provide clearer documentation to a developer implementing this interface

* Update IHttpClientAsyncLogger.cs

Updated remarks to provide the developer implementing this interface clearer documentation

---------

Co-authored-by: Natalia Kondratyeva <knatalia@microsoft.com>",2024-11-11 12:33:32+00:00,Dan Espinosa,0,,,2,2,2,update ihttpclientlogger.cs and ihttpclientasynclogger.cs remarks (issue_ref)* update ihttpclientlogger.cs remarksupdated ihttpclientlogger remarks to provide clearer documentation to a developer implementing this interface* update ihttpclientasynclogger.csupdated remarks to provide the developer implementing this interface clearer documentation---------
dotnet/runtime,646e31901641d6dbb7a731fca61067288fba9c65,"Fix repro project (#109700)

We have a new static library.",2024-11-11 14:48:21+00:00,Michal Strehovský,1,b312158dc6a79c91109f176cba7a05cc6ed6655c,"Fix repro project (#119087)

We need additional include path.",1,10,10,fix repro project (issue_ref)we have a new static library.
dotnet/runtime,2c29c1db1abbdf8636092bfe349e1f4a4b88d6c4,"Add support for (experimental) profile-based trimming (#108049)

* Add support for (experimental) profile-based trimming

This was my hackathon project of this year. Since it’s in a pretty leaf-y location within the product, I think it would be fine to check it in under unsupported switches for experimentation.

The question I was trying to answer is ""How can we identify code that is statically reachable but is not needed at runtime (and we might be able to get rid of it by reorganizing the code a bit)?"". The answer to that is profiling and profile-based code generation.

The idea is simple:

* We build a special version of the program that keeps track of what methods executed.
* At process termination, this data is written out to a file.
* We then recompile the program, passing in the method list as one of the inputs.
* When compiling a method that was in the list, compile as usual.
* When compiling a method that wasn’t in the list, replace it with a failfast.
* We still run the usual dependency analysis so the failfast methods are going to stop graph expansion at method boundaries. One could do better than this (cut off at basic block boundaries) but that’s a lot more work with a small benefit.

The profiling file format is simple: list of assembly MVIDs, followed by an array of bools. Index within the array corresponds to a MethodDef token within the assembly. So if bool at index N of assembly A is true, method in assembly with MVID A at RID N is reachable. Using MVIDs (GUID) instead of assembly name helps identify mismatches between profile data and input assemblies. Best to build with `-p:Deterministic=true`.

# Usage

Build the app with `-p:_InstrumentReachability=true`. Run the app and exercise all the necessary codepaths. This produces a reach.mprof file in the current directory. You can run the app multiple times, the profile data will get merged automatically.

Then build the app again with `-p:_ReachabilityInstrumentationFile=reach.mprof`. Output of this build will be a profile-based version.

Just to give an idea of how small things will be:

* dotnet new webapiaot: 4.1 MB (down from 8.7 MB)
* Hello World with OptimizationPreference=Size, StackTraceSupport=false, UseSystemResourceKeys=true: 425 kB

The app may or may not actually work. Hello world works fine. Webapiaot hits an issue where our ability to optimize things better in the profile-based version leads to new codepaths being executed. It can be worked around by forcing something that triggers the optimization into profile data. For example, for webapiaot this helps:

```csharp
typeof(Holder).GetCustomAttribute<MyAttribute>().TheType.IsConstructedGenericType.ToString();
class MyAttribute : Attribute { public MyAttribute(Type t) => TheType = t; public Type TheType; }
class Gen<T> { }
[My(typeof(Gen<>))]
class Holder { }
```

(We need to call `IsConstructedGenericType` on a type that got its MethodTable optimized away.)

It is not strictly necessary for the outputs to be runnable for this to be useful. The idea is to generate DGML/MSTAT of the unprofiled version, then DGML/MSTAT of the profiled version, and diff them. The diff might highlight parts of the app that could maybe be removed by reorganizing the code.

Not everything will be removable. For example, in the Hello World, most of exception handling is gone, but one can still run into exceptions at runtime (I just didn’t when I profiled it).

# Implementation

There are 3 parts: compiler component to generate instrumented outputs, CoreLib change to save profile data on app exist, and compiler component to consume profile data.

## Generating profile data

ReachabilityInstrumentationProvider is the main workhorse. It’s an ILProvider that wraps whatever IL we got from the input assembly and prefixes each method body with two instructions: ldc.i4.1 followed by stsfld. The stsfld targets a compiler-generated RVA static field. The compiler lays out all these fields in a way that their in-memory positions correspond to profile data positions (so saving profile data just means copying a memory range to a file).

ReachabilityDataBlobNode is responsible for creating the data blob an laying out all the RVA static fields that the code refers to.

Last but not least, InitializeMethod generates a small stub that informs corelib where to find the data blob at runtime. We hook up InitializeMethod into StartupCodeMain.

## Saving profile data

Within CoreLib, we define two methods - one is called at startup and informs us where profile data blob lives. The other is the very last managed method executed. It saves the data blob to a file.

## Consuming profile data

This is another ILProvider that either returns the underlying IL unmodified, or replaces it with a failfast call.",2024-11-11 14:50:55+00:00,Michal Strehovský,1,14078925eccb57738df37c6bc09ae494ee22af14,"Add support for emitting Source Link data (#110270)

Fixes #81415.

We read the source link data from the portable PDB, map file names to URLs, and emit into a JSON file. Then pass the JSON file to link.exe. We make no effort to make the source link data more compact. We could attempt to find common prefixes and emit as `*` but I left that as a future potential extension. The extra data in the expanded form is nothing compared to the size of native PDBs.",10,482,4,"add support for (experimental) profile-based trimming (issue_ref)* add support for (experimental) profile-based trimmingthis was my hackathon project of this year. since it’s in a pretty leaf-y location within the product, i think it would be fine to check it in under unsupported switches for experimentation.the question i was trying to answer is ""how can we identify code that is statically reachable but is not needed at runtime (and we might be able to get rid of it by reorganizing the code a bit)?"". the answer to that is profiling and profile-based code generation.the idea is simple:* we build a special version of the program that keeps track of what methods executed.* at process termination, this data is written out to a file.* we then recompile the program, passing in the method list as one of the inputs.* when compiling a method that was in the list, compile as usual.* when compiling a method that wasn’t in the list, replace it with a failfast.* we still run the usual dependency analysis so the failfast methods are going to stop graph expansion at method boundaries. one could do better than this (cut off at basic block boundaries) but that’s a lot more work with a small benefit.the profiling file format is simple: list of assembly mvids, followed by an array of bools. index within the array corresponds to a methoddef token within the assembly. so if bool at index n of assembly a is true, method in assembly with mvid a at rid n is reachable. using mvids (guid) instead of assembly name helps identify mismatches between profile data and input assemblies. best to build with .# usagebuild the app with . run the app and exercise all the necessary codepaths. this produces a reach.mprof file in the current directory. you can run the app multiple times, the profile data will get merged automatically.then build the app again with . output of this build will be a profile-based version.just to give an idea of how small things will be:* dotnet new webapiaot: 4.1 mb (down from 8.7 mb)* hello world with optimizationpreference=size, stacktracesupport=false, usesystemresourcekeys=true: 425 kbthe app may or may not actually work. hello world works fine. webapiaot hits an issue where our ability to optimize things better in the profile-based version leads to new codepaths being executed. it can be worked around by forcing something that triggers the optimization into profile data. for example, for webapiaot this helps:(we need to call on a type that got its methodtable optimized away.)it is not strictly necessary for the outputs to be runnable for this to be useful. the idea is to generate dgml/mstat of the unprofiled version, then dgml/mstat of the profiled version, and diff them. the diff might highlight parts of the app that could maybe be removed by reorganizing the code.not everything will be removable. for example, in the hello world, most of exception handling is gone, but one can still run into exceptions at runtime (i just didn’t when i profiled it).# implementationthere are 3 parts: compiler component to generate instrumented outputs, corelib change to save profile data on app exist, and compiler component to consume profile data.## generating profile datareachabilityinstrumentationprovider is the main workhorse. it’s an ilprovider that wraps whatever il we got from the input assembly and prefixes each method body with two instructions: ldc.i4.1 followed by stsfld. the stsfld targets a compiler-generated rva static field. the compiler lays out all these fields in a way that their in-memory positions correspond to profile data positions (so saving profile data just means copying a memory range to a file).reachabilitydatablobnode is responsible for creating the data blob an laying out all the rva static fields that the code refers to.last but not least, initializemethod generates a small stub that informs corelib where to find the data blob at runtime. we hook up initializemethod into startupcodemain.## saving profile datawithin corelib, we define two methods - one is called at startup and informs us where profile data blob lives. the other is the very last managed method executed. it saves the data blob to a file.## consuming profile datathis is another ilprovider that either returns the underlying il unmodified, or replaces it with a failfast call."
dotnet/runtime,06205b54c2092672f5f8423e5f9ba631013e3cd3,"JIT: enable tail merge for try exits (#109661)

A try may have multiple blocks. Enable tail merging when these blocks
have common suffixes, via cross-jumping.

Note there can only be one try entry point so this doesn't generalize
to head merge.",2024-11-11 15:41:34+00:00,Andy Ayers,0,,,1,31,14,"jit: enable tail merge for try exits (issue_ref)a try may have multiple blocks. enable tail merging when these blockshave common suffixes, via cross-jumping.note there can only be one try entry point so this doesn't generalizeto head merge."
dotnet/runtime,a7c6ff706bd198184da7bfe57f35175daba7ceb1,"use SpecialFolder.UserProfile instead of USERPROFILE (#108559)

* use SpecialFolder.UserProfile instead of USERPROFILE

* Update PackageResolverTest.cs

* Update PackageResolverTest.cs

* Update src/libraries/Microsoft.Extensions.DependencyModel/tests/PackageResolverTest.cs

* Update PackageResolverTest.cs

---------

Co-authored-by: Viktor Hofer <viktor.hofer@microsoft.com>",2024-11-11 15:48:50+00:00,kasperk81,0,,,2,12,34,use specialfolder.userprofile instead of userprofile (issue_ref)* use specialfolder.userprofile instead of userprofile* update packageresolvertest.cs* update packageresolvertest.cs* update src/libraries/microsoft.extensions.dependencymodel/tests/packageresolvertest.cs* update packageresolvertest.cs---------
dotnet/runtime,1ddfa144d93c2bc336c8440fe6bfec7fc4af0d44,"JIT: tail merge returns with multiple statements (#109670)

Remove the restriction that a mergeable return have one statement.

But don't split tail calls away from a same-block return.",2024-11-11 15:53:41+00:00,Andy Ayers,0,,,1,14,3,jit: tail merge returns with multiple statements (issue_ref)remove the restriction that a mergeable return have one statement.but don't split tail calls away from a same-block return.
dotnet/runtime,075b42d9b251ad2d38684c85b7305fbf349630ce,"JIT: Mark some intrinsics as must-expand for NAOT due to ILScanner dependencies (#109609)

These two intrinsics are treated specially by ILScanner, and thus must always be expanded for NAOT, even in MinOpts.",2024-11-11 16:11:40+00:00,Jakob Botsch Nielsen,0,,,1,14,4,"jit: mark some intrinsics as must-expand for naot due to ilscanner dependencies (issue_ref)these two intrinsics are treated specially by ilscanner, and thus must always be expanded for naot, even in minopts."
dotnet/runtime,643ffd83faf035ed7a8398773f64a18d06777356,Use IsNative metadata to exclude native shared libs (#109683),2024-11-11 17:39:23+00:00,Adeel Mujahid,0,,,1,2,3,use isnative metadata to exclude native shared libs (issue_ref)
dotnet/runtime,e6e3bb621468c1b96c446aff1c173bc95009543a,"Ignore modopts/modreqs for `UnsafeAccessor` field targets (#109694)

* Ignore modopts/modreqs for `UnsafeAccessor` field targets

The generated IL remains correct and doesn't require a
.volatile prefix for the accessor. This is based off of what Roslyn
currently emits if an accessor was manually written.",2024-11-11 21:08:02+00:00,Aaron Robinson,0,,,6,48,24,ignore modopts/modreqs for field targets (issue_ref)* ignore modopts/modreqs for field targetsthe generated il remains correct and doesn't require a.volatile prefix for the accessor. this is based off of what roslyncurrently emits if an accessor was manually written.
dotnet/runtime,ed0d56e79a927a05332b119813f65f8e47f98364,"[cdac] Slight clean-up of mock descriptors test helpers (#109651)

- Make mock descriptors helpers consistent in how tests create them and get their types and globals
- Split `MockDescriptors` inner classes into separate files
- Move helper from `CodeVersionsTests` to `MockDescriptors`",2024-11-11 21:25:37+00:00,Elinor Fung,0,,,14,1178,1030,[cdac] slight clean-up of mock descriptors test helpers (issue_ref)- make mock descriptors helpers consistent in how tests create them and get their types and globals- split inner classes into separate files- move helper from to
dotnet/runtime,470afc6c7cb882edddec7bacca0fa8db4f1fb7d5,"[cdac] add v2 ExecutionManager contract for NibbleMap change (#109654)

- Implements `IExecutionManager` contract version 2
- Refactors ExecutionManager implementation to share code between versions with composability
- Refactors ExecutionManager and NibbleMap tests to support multiple algorithm implementations",2024-11-11 22:28:25+00:00,Max Charlamb,0,,,18,1031,558,[cdac] add v2 executionmanager contract for nibblemap change (issue_ref)- implements contract version 2- refactors executionmanager implementation to share code between versions with composability- refactors executionmanager and nibblemap tests to support multiple algorithm implementations
dotnet/runtime,4087cc8f40892dfccd13eb65948a95223f109ce8,"Constant Time Lookup NibbleMap (#108939)

- Changes NibbleMap implementation to have O(1) lookup and O(n) write/delete
- Increments ExecutionManager contract to version 2 which supports the new implementation",2024-11-11 22:32:11+00:00,Max Charlamb,0,,,8,281,85,constant time lookup nibblemap (issue_ref)- changes nibblemap implementation to have o(1) lookup and o(n) write/delete- increments executionmanager contract to version 2 which supports the new implementation
dotnet/runtime,f7334fab4babc2cef606fafc053b4e5abe4edf80,Implement `DAMT.*WithInherited` (#109608),2024-11-11 23:04:29+00:00,Michal Strehovský,1,1f01bee2a41e0df97089fe083c09c59401437b49,"Warn if RequiresXXXCode is placed on an entrypoint (#110185)

Fixes #109811.

Motivated by real-world first party code that did this :(.",15,1037,80,implement (issue_ref)
dotnet/runtime,81cf4f5b6c7a531b939e51feffca9c2d1c208e84,Build the cdac as part of clr.tools instead of as a prereq to the runtime native build (#109598),2024-11-12 05:40:27+00:00,Jeremy Koritzinsky,1,8d21e13719cff737ac9562c98756687cfe616554,"Fix name of MonoAOTOffsets artifact in runtime.yml (#109797)

To match the message in the build log, see https://github.com/dotnet/runtime/pull/109363#issuecomment-2474689843",3,7,3,build the cdac as part of clr.tools instead of as a prereq to the runtime native build (issue_ref)
dotnet/runtime,26fda086fa2cc26cbd18a5189c88b0196ed6e0b8,"Define a DllMain for native AOT shared libraries (#109699)

In theory a breaking change since any other `DllMain` would cause a symbol conflict during linking.",2024-11-12 07:03:32+00:00,Michal Strehovský,1,3e44f568cb24aa68f863d925b67fa5408b734d54,"Fix CMake 4.2.0+ build failure for nativeaot bootstrapper (#122152)

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: agocke <515774+agocke@users.noreply.github.com>",4,34,0,define a dllmain for native aot shared libraries (issue_ref)in theory a breaking change since any other would cause a symbol conflict during linking.
dotnet/runtime,37188fc6d9de64e0b4a6e40c7a22be65234b524f,"Pass BaseOS property down to the inner build as well (#109705)

This will be used by dotnet/arcade#15237",2024-11-12 07:22:03+00:00,Jeremy Koritzinsky,0,,,1,1,1,pass baseos property down to the inner build as well (issue_ref)this will be used by dotnet/arcadeissue_ref
dotnet/runtime,524d217d52780cf9b0bce33a91e8d7266447d5bb,Remove CoreCLR PAL's InternalNew/Delete and just use new/delete with std::nothrow (#109659),2024-11-12 07:32:02+00:00,Jeremy Koritzinsky,1,371c9f6b99feea0fca14dc3f7d2af210f6cd929f,Fix alloc-dealloc mismatch (#109753),31,36,150,remove coreclr pal's internalnew/delete and just use new/delete with std::nothrow (issue_ref)
dotnet/runtime,678554989fbead7d8dd5454682c9786de65e30d3,"Automated bump of chrome version (#109678)

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>",2024-11-12 09:06:19+00:00,github-actions[bot],0,,,1,4,4,automated bump of chrome version (issue_ref)
dotnet/runtime,ab7e12334f07b72e67b897e9ae7a09d04fd1efb5,extend xml docs with OverflowException information (#109645),2024-11-12 12:52:25+00:00,Adam Sitnik,0,,,1,2,0,extend xml docs with overflowexception information (issue_ref)
dotnet/runtime,49c46f3a4c7a1dc02046b7d537f1cf6ba3752578,"Add a missing = in BigInteger.cs (#105456)

* Add a missing =

* Add some tests for bigint AND.

* Add some tests for bigint AND.

* Update src/libraries/System.Runtime.Numerics/tests/BigInteger/SampleGeneration.cs

Co-authored-by: Dan Moseley <danmose@microsoft.com>

---------

Co-authored-by: Dan Moseley <danmose@microsoft.com>",2024-11-12 17:17:00+00:00,LEI Hongfaan,1,d3d0fced1d125483d668bef176618e6a805cb2bd,"Fix BigInteger bitwise operators on certain negative numbers (#109684)

Co-authored-by: Tanner Gooding <tagoo@outlook.com>",6,255,1,add a missing = in biginteger.cs (issue_ref)* add a missing =* add some tests for bigint and.* add some tests for bigint and.* update src/libraries/system.runtime.numerics/tests/biginteger/samplegeneration.cs
dotnet/runtime,46ff4a3a17ad281cea1a64f5b59ac59d1624b862,Check input length for empty when decrypting with padding,2024-11-12 17:48:17+00:00,Kevin Jones,0,,,2,124,2,check input length for empty when decrypting with padding
dotnet/runtime,63d93b75beb97b5c7d3372ba87f95ae428ab1256,"Add dllmain to PlatformManifestEntry (#109733)

dllmain.obj and dllmain.GuardCF.obj were missing and causing the official build to fail",2024-11-12 19:07:36+00:00,Steve Pfister,0,,,1,2,0,add dllmain to platformmanifestentry (issue_ref)dllmain.obj and dllmain.guardcf.obj were missing and causing the official build to fail
dotnet/runtime,5d69e2dca30524a93b00cd613be218144b5f95d1,"Add managed MachO signing (#108992)

Creates a managed implementation of Mach-O object file signing for the apphost.

This signer is byte-for-byte identical to the output of codesign except for padding at the end of the file and the corresponding size fields in the headers.

The MachObjectFile and CodeSignature store all the relevant headers and signature information to add/remove a signature from a Mach Object. Most other files are details regarding header format and reading files with different endianness.

The new signer uses a MemoryMappedViewAccessor instead of a Stream. Since memory mapped files can't be resized, MachObjectFile.CreateAdHocSignature() will write out the headers and load commands to the memory mapped file, but not the signature blob. The signature blob will instead be written to the destination file stream after the rest of the file is copied from the memory mapped file.

The signature is composed of an EmbeddedSignature superblob with an ID and offset of 3 following blobs, followed by a CodeDirectory blob, an empty Requirements blob, and an empty CMS blob. The empty Requirements blob and an empty CMS blob are not strictly required but are added for compatibility with codesign. The CodeDirectory includes the identifier string, hashes of each page of the file and information required to verify the hashes.

The signing process for an unsigned executable extends the __LINKEDIT segment (which is always at the end of the file) to make room for the signature blob, writes the signature blob to that location, and adds a CodeSignature load command that points the the signature. If the executable was already signed, it simply clears the old signature and replaces it, extends or shrinks the existing __LINKEDIT size and updates the existing CodeSignature load command.

Co-authored-by: Adeel Mujahid <3840695+am11@users.noreply.github.com>",2024-11-12 20:15:41+00:00,Jackson Schuster,0,,,41,1753,390,"add managed macho signing (issue_ref)creates a managed implementation of mach-o object file signing for the apphost.this signer is byte-for-byte identical to the output of codesign except for padding at the end of the file and the corresponding size fields in the headers.the machobjectfile and codesignature store all the relevant headers and signature information to add/remove a signature from a mach object. most other files are details regarding header format and reading files with different endianness.the new signer uses a memorymappedviewaccessor instead of a stream. since memory mapped files can't be resized, machobjectfile.createadhocsignature() will write out the headers and load commands to the memory mapped file, but not the signature blob. the signature blob will instead be written to the destination file stream after the rest of the file is copied from the memory mapped file.the signature is composed of an embeddedsignature superblob with an id and offset of 3 following blobs, followed by a codedirectory blob, an empty requirements blob, and an empty cms blob. the empty requirements blob and an empty cms blob are not strictly required but are added for compatibility with codesign. the codedirectory includes the identifier string, hashes of each page of the file and information required to verify the hashes.the signing process for an unsigned executable extends the __linkedit segment (which is always at the end of the file) to make room for the signature blob, writes the signature blob to that location, and adds a codesignature load command that points the the signature. if the executable was already signed, it simply clears the old signature and replaces it, extends or shrinks the existing __linkedit size and updates the existing codesignature load command."
dotnet/runtime,13f093eced091b14f4723448392de4c3d517da48,Add AggressiveInlining to type checks in SearchValues<string> (#109737),2024-11-12 21:08:37+00:00,Miha Zupan,0,,,1,7,3,add aggressiveinlining to type checks in searchvalues<string> (issue_ref)
dotnet/runtime,eee9fd32dbf29d4df263c940b394a8af47bd5cf5,"Reference ILVerification projects from ILLink solutions (#109718)

I wasn't able to run ILLink unit tests in VS without doing this. My steps:",2024-11-12 21:47:05+00:00,Michal Strehovský,0,,,2,36,0,reference ilverification projects from illink solutions (issue_ref)i wasn't able to run illink unit tests in vs without doing this. my steps:
dotnet/runtime,756f7ebbbdcc0b8cb8b383ef3b6e6b50430f1922,"Add AOT annotations to System.Private.Xml and System.Data.Common (#109528)

* Add AOT annotations to System.Private.Xml

* Remove DAM from TypeDesc, add more annotations

DAM on TypeDesc would require bubbling up RDC to parts of
TypeScope (AddPrimitive of byte[]) that was unnecessarily viral.

* Annotate System.Data.Common

* Annotate a few serialization-related types at the type level",2024-11-13 00:52:05+00:00,Sven Boemer,1,cc2019bc0b25e724275dba81ab9c295879ad8cb3,"Reflection-based XmlSerializer - Deserialize empty collections and allow for sub-types in collection items. (#111723)

* Add tests to verify issue and fix.

* Check for type-assignability instead of equivallence. Also fix Choice logic.

* Add tests to verify issue and fix.

* Ensure collections are initialized to empty - even if they should be null according to the xml.

* More tests for bringing reflection-based serializer to quirky parity with ILGen.

* Fix Xml/Type mapping to use proper member info with hidden/inherited type members; Fix List-handling in reflection serializer.

* Cleanup tests and comments based on PR feedback.

* While considering initializing empty lists at object creation instead of post-deserialization - noticed a missed empty-list case.",78,594,207,"add aot annotations to system.private.xml and system.data.common (issue_ref)* add aot annotations to system.private.xml* remove dam from typedesc, add more annotationsdam on typedesc would require bubbling up rdc to parts oftypescope (addprimitive of byte[]) that was unnecessarily viral.* annotate system.data.common* annotate a few serialization-related types at the type level"
dotnet/runtime,80367bffe56526ef04602ef93cf567b41460aa19,Support building the repo with clang 20 (#109756),2024-11-13 03:26:21+00:00,Jeremy Koritzinsky,0,,,3,8,0,support building the repo with clang 20 (issue_ref)
dotnet/runtime,30e08e69aeecac39d5c0ecde199bdf921d53be5e,"Update SseItem's ctor eventType argument to be nullable (#109765)

Co-authored-by: Eirik Tsarpalis <eirik.tsarpalis@gmail.com>",2024-11-13 13:33:41+00:00,Stephen Toub,1,b5750e65aea5d9e6246cdeb16a52608c454a4e40,"Add SseFormatter (#109832)

* Add SseFormatter.

* Update src/libraries/System.Net.ServerSentEvents/src/Resources/Strings.resx

Co-authored-by: Stephen Toub <stoub@microsoft.com>

* Document SseItem exceptions.

* Misc improvements and fixes.

* Reinstate ordering of parameters in serialization callback.

* Add SseItem<T>.ReconnectionInterval.

* Address feedback.

* Add parser validation for too small or too large retry intervals.

* Update src/libraries/System.Net.ServerSentEvents/src/System/Net/ServerSentEvents/SseFormatter.cs

Co-authored-by: Stephen Toub <stoub@microsoft.com>

* Handle CR line breaks.

* Simplify PooledByteBufferWriter.

---------

Co-authored-by: Stephen Toub <stoub@microsoft.com>",5,37,19,update sseitem's ctor eventtype argument to be nullable (issue_ref)
dotnet/runtime,22b3c90e6ba995b2509503bf1f0aa09a2a05f1a9,Re-try loading ENGINE keys with a non-NULL UI_METHOD,2024-11-13 15:50:01+00:00,Kevin Jones,1,771539182c280c9933ad57422583f1380541eda1,"Add optional hooks for debugging OpenSSL memory allocations (#111539)

* add hooks to debug OpenSSL memory

* opensslshim

* 1.x

* 1.0.1

* android

* Collections

* unsafe

* build

* feedback

* update

* feedback

* feedback

* feedback

* fix build

* gcc

* gcc

* Update src/native/libs/System.Security.Cryptography.Native/openssl.c

Co-authored-by: Adeel Mujahid <3840695+am11@users.noreply.github.com>

* Move init to Interop.Crypto

* Fix data race on GetIncrementalAllocations

* Use modern tuple type

* Fix typo

* Move functionality to separate file

* Revert unnecessary changes

* WIP tracking in native code

* Improvements

* Reintroduce rw lock

* Add readme

* Fix build

* Code review feedback

* code review changes - cont.

* More code review feedback

* Expose the ""API"" via system.security.cryptography

* Fix infinite link list traversal

* Fix memory accounting for realloc

* Refactoring

* Improve comments

* Improve Readme

* Simplify implementation

* Don't use CRYPTO_atomic_add

* Readme fixes

* Fix build

* Fix compilation, attempt 2

* Fix build - attemt no 3

* Apply suggestions from code review

Co-authored-by: Jeremy Barton <jbarton@microsoft.com>

* Feedback

---------

Co-authored-by: wfurt <tweinfurt@yahoo.com>
Co-authored-by: Adeel Mujahid <3840695+am11@users.noreply.github.com>
Co-authored-by: Jeremy Barton <jbarton@microsoft.com>",2,24,0,re-try loading engine keys with a non-null ui_method
dotnet/runtime,abaa1f7188df389b952d7d25cd3a86079d0792bc,Explicitly set UnsupportedTargetFrameworkVersion for VS support (#109769),2024-11-13 15:56:51+00:00,Viktor Hofer,0,,,1,1,0,explicitly set unsupportedtargetframeworkversion for vs support (issue_ref)
dotnet/runtime,f9b2a6d4b3f0ea910e8f3b881cd88603eedfe8a3,"JIT: Optimize for cost instead of score in 3-opt layout (#109741)

Part of #107749. Follow-up to #103450. This refactors 3-opt to minimize layout cost instead of maximizing layout score. This is arguably more intuitive, and it should facilitate implementing a more sophisticated cost model. This PR also adds a mechanism for evaluating the total cost of a given layout, which means we can assert at each move that we actually improved the global layout cost.",2024-11-13 16:58:22+00:00,Aman Khalid,1,f87428bdd39418a758d916bd950b82e3ee69835f,"JIT: Relax cost improvement assert in 3-opt layout (#109835)

Follow-up to #109741. Fixes #109831. Fixes #109905. Fixes #109903.

Tolerate some floating-point imprecision when comparing the cost of a new layout produced by 3-opt to the previous layout's cost. The JitStress failures I looked all stressed JitOptRepeat, which can produce absurdly large loop block weights by rerunning optSetBlockWeights. Manually inspecting the layout decisions made for these methods shows 3-opt making reasonable transformations, but the assertion newLayoutCost < currLayoutCost fails due to imprecision from summing large block weights. Having a backup check that the layout costs are within some epsilon seems like a reasonable fix.",2,92,25,"jit: optimize for cost instead of score in 3-opt layout (issue_ref)part of issue_ref. follow-up to issue_ref. this refactors 3-opt to minimize layout cost instead of maximizing layout score. this is arguably more intuitive, and it should facilitate implementing a more sophisticated cost model. this pr also adds a mechanism for evaluating the total cost of a given layout, which means we can assert at each move that we actually improved the global layout cost."
dotnet/runtime,40956349347099df6413eb8c03bc214642b666ff,"[HTTP] WinHttpHandler - Increase the default drain size (#109610)

* Increase the default drain size

* Fix unit test",2024-11-13 17:01:14+00:00,Marie Píchová,1,ad382caba7c0279af5f2b233847371eadfb42f5c,"System.Net.Http.WinHttpHandler.StartRequestAsync assertion failed (#109799)

* System.Net.Http.WinHttpHandler.StartRequestAsync assertion failed

* fix remarks",2,2,2,[http] winhttphandler - increase the default drain size (issue_ref)* increase the default drain size* fix unit test
dotnet/runtime,f40ef930d9515d3b808e54f9bfec15ec2da7c8c3,Apply OverloadResolutionPriority to Span-based delegating to ROS counterparts (#109602),2024-11-13 18:29:51+00:00,Stephen Toub,0,,,11,135,3,apply overloadresolutionpriority to span-based delegating to ros counterparts (issue_ref)
dotnet/runtime,15b3ca6d2884d23254b66b740f61d8de80f3d073,"Allow building Mono Cross AOT compilers in the VMR (#109776)

Introduce DotNetBuildMonoCrossAOT property to simplify the logic.
Also cleanup the similar logic for DotNetBuildRuntimeNativeAOTRuntimePack.

Contributes to https://github.com/dotnet/source-build/issues/3902",2024-11-13 19:05:52+00:00,Alexander Köplinger,1,6accd39f5852f4a687903a3b19a2d4ac10c2f9e0,"[mono] Fix output directory for cross compilers if OutputRID is overridden (#109932)

This happens e.g. in the VMR where OutputRID is set globally. We assumed in monoaotcross.proj that the inner mono cross compiler runtime build would put files into a path that matches the target RID but we were using OutputRID in the inner build.

Instead use the preexisting MonoAotCrossDir property.

Also fix marking DotNetBuildMonoCrossAOT=true as a ShortStack build.",5,19,80,allow building mono cross aot compilers in the vmr (issue_ref)introduce dotnetbuildmonocrossaot property to simplify the logic.also cleanup the similar logic for dotnetbuildruntimenativeaotruntimepack.contributes to
dotnet/runtime,6d3f9b564edddbca4bd079187a67ce817f17f8fd,"Avoid Blocking Finalizer Thread During Shutdown in SystemEvents (#108489)

* Add switch to enable legacy Thread.Join in SystemEvents.Shutdown and obsolete EventsThreadShutdown

* code cleanup

* Add regression test

* Call PostQuitMessage instead of PostMessage(WM_QUIT)

* Remove compat switch and address PR feedback

* rebuild with /p:ApiCompatGenerateSuppressionFile=true

* Call PostQuitMessage on SystemEvents thread

* Try removing left/right on compatbilitysuppression.xml

* Obsolete EventsThreadShutdown

* Remove shutdown handling to make behavior deterministic

* Adjust obsolete message

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Add obsoletion to refs

* Set IncludeInternalObsoleteAttribute in ref project

* re-include Obsoletions.cs in ref project

* revert 134aca8 and hardcode obsoletion

* Add IncludeInternalObsoleteAttribute to System.Events project

* remove Obsoletions.cs from compile include

* Revert ""remove Obsoletions.cs from compile include""

This reverts commit 452146d76bce8cdf69223cc541104c3504fdc7da.

* Update suppression file

* Update obsolete message

Co-authored-by: Stephen Toub <stoub@microsoft.com>

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>
Co-authored-by: Viktor Hofer <viktor.hofer@microsoft.com>
Co-authored-by: Stephen Toub <stoub@microsoft.com>",2024-11-13 20:16:26+00:00,Loni Tra,1,5aee7c2379d1e99f7df13b13a88e908b27890b91,"Fix native aot outerloop (#109849)

Broken again.",8,81,115,avoid blocking finalizer thread during shutdown in systemevents (issue_ref)* add switch to enable legacy thread.join in systemevents.shutdown and obsolete eventsthreadshutdown* code cleanup* add regression test* call postquitmessage instead of postmessage(wm_quit)* remove compat switch and address pr feedback* rebuild with /p:apicompatgeneratesuppressionfile=true* call postquitmessage on systemevents thread* try removing left/right on compatbilitysuppression.xml* obsolete eventsthreadshutdown* remove shutdown handling to make behavior deterministic* adjust obsolete message
dotnet/runtime,14cd365a64c00724d8029e32f5fe35e733a81c30,"JIT: Don't try to create fallthrough from try region into cloned finally (#109788)

Part of #107749. I noticed while working on profile consistency that we make a nontrivial effort to place cloned finally regions right after their corresponding try regions to prematurely create fallthrough. Removing this had small diffs locally.",2024-11-13 20:48:19+00:00,Aman Khalid,0,,,1,5,71,jit: don't try to create fallthrough from try region into cloned finally (issue_ref)part of issue_ref. i noticed while working on profile consistency that we make a nontrivial effort to place cloned finally regions right after their corresponding try regions to prematurely create fallthrough. removing this had small diffs locally.
dotnet/runtime,166e33675bf46042ac00e06af2a4a8be1c8f9e7d,Don't build installers in source-build (#109794),2024-11-13 21:14:55+00:00,Jeremy Koritzinsky,0,,,5,6,5,don't build installers in source-build (issue_ref)
dotnet/runtime,38e4ba60408fbe924b3edfbf4cbf8b1465fdc16a,Replace DAMT.All with DAMT.AllMethods in delegate creation (#109772),2024-11-13 21:42:41+00:00,Michal Strehovský,1,eb456e6121195405bfb676e3628be2f5db767409,"Move unboxing helpers to managed code (#109135)

Move the unboxing helpers to managed code.

Behavior is basically identical except for the Unbox_Nullable paths, which required some investigation to find the fastest implementation. Notably, there interruptibility of managed code makes the copying/zeroing of values more difficult, but with the opportunity/requirement to specialize the codebase came a few micro-optimizations that are somewhat nice. Overall I don't expect anyone to notice the performance changes here, but since my earlier code was about 2X slower than the native implementation, I did feel the need to optimize until everything looked good.

Performance results:

| TestName | With PR | Without PR | % Speedup |
| --- | --- | --- | --- |
|                     TestJustAPrimitive| 1217.0047| 1221.203| 0.34%   |
|                         TestJustObject| 1212.6415| 1211.6437|-0.08%  |
|                     TestJust5Primitive| 1496.5304| 1522.4968|1.74%   |
|                        TestJust5Object| 1461.0507| 1488.3328|1.87%   |
|                    TestJust10Primitive| 1473.2814| 1493.5238|1.37%   |
|                       TestJust10Object| 3215.6339| 2854.6186|-11.23% |
|    TestJustAPrimitiveNullableWithValue| 2727.9085| 5182.2611|89.97%  |
|        TestJustObjectNullableWithValue| 3148.9484| 5672.2985|80.13%  |
|    TestJust5PrimitiveNullableWithValue| 5443.9232| 7795.6109|43.20%  |
|       TestJust5ObjectNullableWithValue| 6492.9071| 8095.1508|24.68%  |
|   TestJust10PrimitiveNullableWithValue| 6022.6274| 8723.572| 44.85%  |
|      TestJust10ObjectNullableWithValue| 7728.3239| 9671.1382|25.14%  |
|         TestJustAPrimitiveNullNullable| 1786.1337| 2230.0932|24.86%  |
|             TestJustObjectNullNullable| 1675.0683| 2326.0395|38.86%  |
|         TestJust5PrimitiveNullNullable| 2921.9497| 3298.4642|12.89%  |
|            TestJust5ObjectNullNullable| 3389.4043| 3615.3131|6.67%   |
|        TestJust10PrimitiveNullNullable| 3050.809|	 4054.9683|32.91%  |
|           TestJust10ObjectNullNullable| 4658.8316| 5335.0686|14.52%  |

Results are very positive, or within the margin of error in this test suite. These results were generated using a small benchmark which mostly targeted measuring the performance of the Unbox_Nullable helper, as it has the most complex and potentially slow code. Generally the impact on that helper is that the performance of the type system portion of the helper is faster, and the performance of code which actually copies the contents of a valuetype is a little better. This isn't quite a fair test of managed vs native performance though, as I took the opportunity to restructure some of the memory on `MethodTable` so that it could more easily be read in managed code, and that happened to make a fair bit of complex code become simpler and thus faster.",10,109,23,replace damt.all with damt.allmethods in delegate creation (issue_ref)
dotnet/runtime,1c4c0093a6f2008bafc034e35e08d019bef44cef,"Randomized allocation sampling (#104955)

* Add Randomized Allocation Sampling

This feature allows profilers to do allocation profiling based off randomized samples. It has better theoretical and empirically observed accuracy than our current allocation profiling approaches while also maintaining low performance overhead. It is designed for use in production profiling scenarios. For more information about usage and implementation, see the included doc docs/design/features/RandomizedAllocationSampling.md

Much of this code was originally written in https://github.com/dotnet/runtime/pull/100356 by @chrisnas, but for logistical reasons we superceded it with this new PR.",2024-11-14 00:52:44+00:00,Noah Falk,1,e33be4d53ab951272c9161c50b549e5e7db60262,"Fix failing test on NativeAOT (#109853)

Fixes https://github.com/dotnet/runtime/issues/109828
This test hadn't been updated to account for NativeAOT's lack of type names in the new randomized sampling allocation events.",35,2358,23,"randomized allocation sampling (issue_ref)* add randomized allocation samplingthis feature allows profilers to do allocation profiling based off randomized samples. it has better theoretical and empirically observed accuracy than our current allocation profiling approaches while also maintaining low performance overhead. it is designed for use in production profiling scenarios. for more information about usage and implementation, see the included doc docs/design/features/randomizedallocationsampling.mdmuch of this code was originally written in by @chrisnas, but for logistical reasons we superceded it with this new pr."
dotnet/runtime,c65320833210f3df7412e2fcd11d6751fa374adc,"JIT: Switch config values to UTF8 (#109418)

- Switch JitConfig strings from UTF16 to UTF8
- Switch relevant JIT-EE and host methods to UTF8
- Remove `getJitTimeLogFilename` JIT-EE call, which seemingly existed to avoid
  having a config parser in the JIT in release builds, but that ship has sailed",2024-11-14 13:00:16+00:00,Jakob Botsch Nielsen,1,1303e421436ffcccf8498be6771573e9913fd833,"Fix reporting GC fields from base types (#111011)

Fixes #110836.

When we extended managed CorInfoImpl to support object stack allocation in #104411, there was one more spot that assumed valuetypes only in `GatherClassGCLayout` that we missed. This resulted in not reporting any GC pointers in base types.",53,995,1003,"jit: switch config values to utf8 (issue_ref)- switch jitconfig strings from utf16 to utf8- switch relevant jit-ee and host methods to utf8- remove jit-ee call, which seemingly existed to avoid having a config parser in the jit in release builds, but that ship has sailed"
dotnet/runtime,099bf1e3ba4bb2248cb7f3163e9c212717420e49,"Bump TraceEvent package version (#109192)

* Bump TraceEvent package version

* Prioritize in-tree Microsoft.Diagnostics.NETCore.Client",2024-11-14 16:23:37+00:00,Mitchell Hwang,0,,,2,3,1,bump traceevent package version (issue_ref)* bump traceevent package version* prioritize in-tree microsoft.diagnostics.netcore.client
dotnet/runtime,31e28adfc107ddc5484391251a34e46317c7be99,"Downgrade STJ to 8.0.4 (#109818)

* Downgrade STJ to 8.0.4

We can't yet rely on a STJ/8.0.5 package as desktop msbuild doesn't have binding redirects for it yet.

- Suppress the src/tasks vulnerability warning as STJ isn't used at runtime for msbuild tasks.
- Suppress the ones about HostModel's usage. We want to use a live STJ instead but that needs a separate PR (more work).

* Update STJ and add temporary suppressions",2024-11-14 18:22:44+00:00,Viktor Hofer,0,,,11,52,5,downgrade stj to 8.0.4 (issue_ref)* downgrade stj to 8.0.4we can't yet rely on a stj/8.0.5 package as desktop msbuild doesn't have binding redirects for it yet.- suppress the src/tasks vulnerability warning as stj isn't used at runtime for msbuild tasks.- suppress the ones about hostmodel's usage. we want to use a live stj instead but that needs a separate pr (more work).* update stj and add temporary suppressions
dotnet/runtime,1e98c05201e3c8df70b0334ce1d4a28cfe2b3c26,JIT: Don't run `fgRenumberBlocks` after switch recognition (#108402),2024-11-14 21:21:33+00:00,Aman Khalid,0,,,1,0,1,jit: don't run after switch recognition (issue_ref)
dotnet/runtime,0cecd7d4d1f8a22c186a6145c6e60b393bf9518d,"[main] Update dependencies from dotnet/xharness (#109503)

* Update dependencies from https://github.com/dotnet/xharness build 20241029.1

Microsoft.DotNet.XHarness.CLI , Microsoft.DotNet.XHarness.TestRunners.Common , Microsoft.DotNet.XHarness.TestRunners.Xunit
 From Version 10.0.0-prerelease.24524.9 -> To Version 10.0.0-prerelease.24529.1

* Update dependencies from https://github.com/dotnet/xharness build 20241105.2

Microsoft.DotNet.XHarness.CLI , Microsoft.DotNet.XHarness.TestRunners.Common , Microsoft.DotNet.XHarness.TestRunners.Xunit
 From Version 10.0.0-prerelease.24524.9 -> To Version 10.0.0-prerelease.24555.2

* Update dependencies from https://github.com/dotnet/xharness build 20241114.1

Microsoft.DotNet.XHarness.CLI , Microsoft.DotNet.XHarness.TestRunners.Common , Microsoft.DotNet.XHarness.TestRunners.Xunit
 From Version 10.0.0-prerelease.24524.9 -> To Version 10.0.0-prerelease.24564.1

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2024-11-15 00:12:39+00:00,dotnet-maestro[bot],0,,,3,10,10,"[main] update dependencies from dotnet/xharness (issue_ref)* update dependencies from build 20241029.1microsoft.dotnet.xharness.cli , microsoft.dotnet.xharness.testrunners.common , microsoft.dotnet.xharness.testrunners.xunit from version 10.0.0-prerelease.24524.9 -> to version 10.0.0-prerelease.24529.1* update dependencies from build 20241105.2microsoft.dotnet.xharness.cli , microsoft.dotnet.xharness.testrunners.common , microsoft.dotnet.xharness.testrunners.xunit from version 10.0.0-prerelease.24524.9 -> to version 10.0.0-prerelease.24555.2* update dependencies from build 20241114.1microsoft.dotnet.xharness.cli , microsoft.dotnet.xharness.testrunners.common , microsoft.dotnet.xharness.testrunners.xunit from version 10.0.0-prerelease.24524.9 -> to version 10.0.0-prerelease.24564.1---------"
dotnet/runtime,22dc50d0450125d44cf715ca33ec55557c36dff9,"[cdac] Implement `ExecutionManager.ReadyToRunJitManager.GetMethodInfo` (minus handling of hot/cold lookup) (#109766)

Implement `ExecutionManager.ReadyToRunJitManager.GetMethodInfo` without handling of hot/cold lookup. This maps to `ReadyToRunJitManager::JitCodeToMethodInfo` in the runtime. Basic logic is:
- Check if the address is in a thunk for `READYTORUN_HELPER_DelayLoad_MethodCall`
- Find the runtime function entry corresponding to the address
- Look up the `MethodDesc` for the entry point using the `ReadyToRunInfo`'s hash map

Add tests for `ExecutionManager` for getting code blocks and method desc in R2R and for `HashMap` lookup functionality
- Start using `Moq` - this change only uses it to mock `IPlatformMetadata`, but I think we should be able to use this instead some of the explicit subclasses we have for testing.
- Simplify usage of `TestPlaceholderTarget` such that setting the reader delegate and data cache are not explicit operations - make its constructor take a reader delegate and always create a default data cache
- Slight clean up of `ExecutionManagerTestBuilder` - make it more consistent with `MockDescriptors.*`
  - I think this should probably also be moved under `MockDescriptors`, but I didn't want to do that in this change (same with some helpers in other test classes, like PrecodeStubsTests)

Manually validated with `!clrstack` and `!ip2md` in windbg that R2R functions now show up correctly (were `<unknown>` before this change).",2024-11-15 04:15:19+00:00,Elinor Fung,1,e1aa9cf705a64cf17c3041c9dbd461f7f87e5a20,"Update the CPUID and XSAVE logics for APX (#104637)

* Add APX doc.

* script-gen changes.

* XSTATE changes

* hand-written CPUID check part

* fix

* Fix merge error.

* bug fixes

* Bug fix

* bug fix

* resolve commnets.

* re-generate the ISA changes to propagate the changes in ThunkGenerator.

* resolve comments

* use byte code for EGPR XSAVE logics.

* resolve comments.

---------

Co-authored-by: Tanner Gooding <tagoo@outlook.com>",38,1405,395,"[cdac] implement (minus handling of hot/cold lookup) (issue_ref)implement without handling of hot/cold lookup. this maps to in the runtime. basic logic is:- check if the address is in a thunk for - find the runtime function entry corresponding to the address- look up the for the entry point using the 's hash mapadd tests for for getting code blocks and method desc in r2r and for lookup functionality- start using - this change only uses it to mock , but i think we should be able to use this instead some of the explicit subclasses we have for testing.- simplify usage of such that setting the reader delegate and data cache are not explicit operations - make its constructor take a reader delegate and always create a default data cache- slight clean up of - make it more consistent with - i think this should probably also be moved under , but i didn't want to do that in this change (same with some helpers in other test classes, like precodestubstests)manually validated with and in windbg that r2r functions now show up correctly (were before this change)."
dotnet/runtime,e5129e5323155feec25cd75e8d67986b601921d1,"[main] Update dependencies from dotnet/emsdk (#109447)

* Update dependencies from https://github.com/dotnet/emsdk build 20241031.3

Microsoft.SourceBuild.Intermediate.emsdk , Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport
 From Version 10.0.0-alpha.1.24524.3 -> To Version 10.0.0-alpha.1.24531.3

Dependency coherency updates

runtime.linux-arm64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.linux-x64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.win-arm64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.win-x64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.osx-arm64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.osx-x64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.linux-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.linux-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.linux-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.linux-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.win-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.win-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.osx-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.osx-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.osx-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.osx-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools
 From Version 19.1.0-alpha.1.24517.1 -> To Version 19.1.0-alpha.1.24523.1 (parent: Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport

* Update dependencies from https://github.com/dotnet/emsdk build 20241102.1

Microsoft.SourceBuild.Intermediate.emsdk , Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport
 From Version 10.0.0-alpha.1.24524.3 -> To Version 10.0.0-alpha.1.24552.1

Dependency coherency updates

runtime.linux-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.linux-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.osx-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.osx-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.win-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.win-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport
 From Version 10.0.0-alpha.1.24523.1 -> To Version 10.0.0-alpha.1.24531.1 (parent: Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport

* Update dependencies from https://github.com/dotnet/emsdk build 20241106.2

Microsoft.SourceBuild.Intermediate.emsdk , Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport
 From Version 10.0.0-alpha.1.24524.3 -> To Version 10.0.0-alpha.1.24556.2

Dependency coherency updates

runtime.linux-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.linux-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.osx-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.osx-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.win-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.win-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport
 From Version 10.0.0-alpha.1.24523.1 -> To Version 10.0.0-alpha.1.24554.4 (parent: Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport

* Update dependencies from https://github.com/dotnet/emsdk build 20241111.2

Microsoft.SourceBuild.Intermediate.emsdk , Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport
 From Version 10.0.0-alpha.1.24524.3 -> To Version 10.0.0-alpha.1.24561.2

* Update dependencies from https://github.com/dotnet/emsdk build 20241113.1

Microsoft.SourceBuild.Intermediate.emsdk , Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport
 From Version 10.0.0-alpha.1.24524.3 -> To Version 10.0.0-alpha.1.24563.1

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2024-11-15 10:07:49+00:00,dotnet-maestro[bot],1,1c54b485e4049799ba8b284487d4ba178e5a5bdd,"[wasm] Re-enable skiasharp WBT tests (#109232)

* [wasm] Re-enable skiasharp WBT tests

* Disable Debug/AOT combination

That would trigger build error, because we don't support that combination
anymore

* Change order of native libs

Put NativeFileReference files after the runtime libs. This server as
a workaround of #109289

* Update llvm, emsdk and icu deps

* Revert ""Change order of native libs""

This reverts commit e320fd67aabede113e274d0d569ca6d7be70bd3e.",2,88,88,"[main] update dependencies from dotnet/emsdk (issue_ref)* update dependencies from build 20241031.3microsoft.sourcebuild.intermediate.emsdk , microsoft.net.workload.emscripten.current.manifest-10.0.100.transport from version 10.0.0-alpha.1.24524.3 -> to version 10.0.0-alpha.1.24531.3dependency coherency updatesruntime.linux-arm64.microsoft.netcore.runtime.jit.tools,runtime.linux-x64.microsoft.netcore.runtime.jit.tools,runtime.linux-musl-arm64.microsoft.netcore.runtime.jit.tools,runtime.linux-musl-x64.microsoft.netcore.runtime.jit.tools,runtime.win-arm64.microsoft.netcore.runtime.jit.tools,runtime.win-x64.microsoft.netcore.runtime.jit.tools,runtime.osx-arm64.microsoft.netcore.runtime.jit.tools,runtime.osx-x64.microsoft.netcore.runtime.jit.tools,runtime.linux-arm64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.linux-arm64.microsoft.netcore.runtime.mono.llvm.tools,runtime.linux-musl-arm64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.linux-musl-arm64.microsoft.netcore.runtime.mono.llvm.tools,runtime.linux-x64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.linux-x64.microsoft.netcore.runtime.mono.llvm.tools,runtime.linux-musl-x64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.linux-musl-x64.microsoft.netcore.runtime.mono.llvm.tools,runtime.win-x64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.win-x64.microsoft.netcore.runtime.mono.llvm.tools,runtime.osx-arm64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.osx-arm64.microsoft.netcore.runtime.mono.llvm.tools,runtime.osx-x64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.osx-x64.microsoft.netcore.runtime.mono.llvm.tools from version 19.1.0-alpha.1.24517.1 -> to version 19.1.0-alpha.1.24523.1 (parent: microsoft.net.workload.emscripten.current.manifest-10.0.100.transport* update dependencies from build 20241102.1microsoft.sourcebuild.intermediate.emsdk , microsoft.net.workload.emscripten.current.manifest-10.0.100.transport from version 10.0.0-alpha.1.24524.3 -> to version 10.0.0-alpha.1.24552.1dependency coherency updatesruntime.linux-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.linux-musl-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.linux-x64.microsoft.netcore.runtime.wasm.node.transport,runtime.linux-musl-x64.microsoft.netcore.runtime.wasm.node.transport,runtime.osx-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.osx-x64.microsoft.netcore.runtime.wasm.node.transport,runtime.win-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.win-x64.microsoft.netcore.runtime.wasm.node.transport from version 10.0.0-alpha.1.24523.1 -> to version 10.0.0-alpha.1.24531.1 (parent: microsoft.net.workload.emscripten.current.manifest-10.0.100.transport* update dependencies from build 20241106.2microsoft.sourcebuild.intermediate.emsdk , microsoft.net.workload.emscripten.current.manifest-10.0.100.transport from version 10.0.0-alpha.1.24524.3 -> to version 10.0.0-alpha.1.24556.2dependency coherency updatesruntime.linux-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.linux-musl-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.linux-x64.microsoft.netcore.runtime.wasm.node.transport,runtime.linux-musl-x64.microsoft.netcore.runtime.wasm.node.transport,runtime.osx-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.osx-x64.microsoft.netcore.runtime.wasm.node.transport,runtime.win-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.win-x64.microsoft.netcore.runtime.wasm.node.transport from version 10.0.0-alpha.1.24523.1 -> to version 10.0.0-alpha.1.24554.4 (parent: microsoft.net.workload.emscripten.current.manifest-10.0.100.transport* update dependencies from build 20241111.2microsoft.sourcebuild.intermediate.emsdk , microsoft.net.workload.emscripten.current.manifest-10.0.100.transport from version 10.0.0-alpha.1.24524.3 -> to version 10.0.0-alpha.1.24561.2* update dependencies from build 20241113.1microsoft.sourcebuild.intermediate.emsdk , microsoft.net.workload.emscripten.current.manifest-10.0.100.transport from version 10.0.0-alpha.1.24524.3 -> to version 10.0.0-alpha.1.24563.1---------"
dotnet/runtime,c20fe5f1fd34750fff0359e27c6ecdf765fb3bc6,"[RISC-V][LoongArch64] Encode missing tailcall in GC info (#109512)

* Encode missing tailcall in GC info

* Documentation typos",2024-11-15 12:07:25+00:00,Tomasz Sowiński,0,,,3,5,5,[risc-v][loongarch64] encode missing tailcall in gc info (issue_ref)* encode missing tailcall in gc info* documentation typos
dotnet/runtime,fe0803f0ff8d6167eccfe6ebf28ac475a7474688,Delete reflection-free mode (#109857),2024-11-15 12:53:43+00:00,Michal Strehovský,1,e43fa441587b06904536f7cc4b79dded98d610f2,"Change metadata handle split to 7-bit handle type (#111222)

Fixes dotnet/runtimelab#1581

This allows addressing up to 32 MB of metadata. This should cover all known cases where people hit this in the past.

Granted, none of the user hits are for scenarios where it would be advisable to use native AOT. If one needs to reflection-root 60+ MB of IL, it's inadvisable to use native AOT or trim in general since the possible (small) savings will never outweigh (huge) reliability/predictabillity loss caused by the 60 MB of trim unsafe code.)",19,6,550,delete reflection-free mode (issue_ref)
dotnet/runtime,55eee324653e01cf28809d02b25a5b0894b58d22,[wasm] Use correct current runtime pack version for Wasm.Build.Tests (#109836),2024-11-15 13:08:15+00:00,Marek Fišera,0,,,2,16,5,[wasm] use correct current runtime pack version for wasm.build.tests (issue_ref)
dotnet/runtime,245897ab25e6aee973082a6c00f85f8956414360,"Add cpio to Codespaces Dockerfiles (#109817)

Right now it fails when building installers (we don't do that during prebuild so we didn't notice)",2024-11-16 08:16:12+00:00,Alexander Köplinger,0,,,4,8,2,add cpio to codespaces dockerfiles (issue_ref)right now it fails when building installers (we don't do that during prebuild so we didn't notice)
dotnet/runtime,d9855f27f7d5d5138452009e9f0dd7a81c5c8b74,"Fix obtaining type handles of IDynamicInterfaceCastableImplementation (#109875)

Fixes #109496.

We try to optimize away type handles (MethodTables) of types that are only needed due to metadata. Trying to grab type handle of such type throws. This fixes it by unconditionally generating type handles of IDynamicInterfaceCastableImplementation.",2024-11-16 08:25:43+00:00,Michal Strehovský,1,91d7d53685f646cc0e494e7e560d508fb95af9bb,"Fix GetName on TypeMetadataNode (#117307)

`MethodMetadataNode` says ""Method metadata"", `FieldMetadataNode` says ""Field metadata"". `TypeMetadataNode` should say ""Type metadata"".

""Reflectable type"" is same string as the one used on `ReflectedTypeNode`, causing extra confusion.",2,67,0,fix obtaining type handles of idynamicinterfacecastableimplementation (issue_ref)fixes issue_ref.we try to optimize away type handles (methodtables) of types that are only needed due to metadata. trying to grab type handle of such type throws. this fixes it by unconditionally generating type handles of idynamicinterfacecastableimplementation.
dotnet/runtime,360615cc1732d2569ab6b09781ab291cf93f31a2,typo (#109897),2024-11-17 16:20:50+00:00,Bruno Martinez,0,,,1,1,1,typo (issue_ref)
dotnet/runtime,aaafed265a5231ccc2eba2ab48bce92f1bf269b2,Ensure that MultiplyAddEstimate exits for cases where GT_MUL is unsupported (#109842),2024-11-18 01:48:19+00:00,Tanner Gooding,0,,,1,32,0,ensure that multiplyaddestimate exits for cases where gt_mul is unsupported (issue_ref)
dotnet/runtime,d90ec849cde342b510476ce86eb819978bf3e471,Avoid SerialPort IOLoop when there's no event handlers (#102829),2024-11-18 09:10:14+00:00,Julien Lebosquain,0,,,1,41,4,avoid serialport ioloop when there's no event handlers (issue_ref)
dotnet/runtime,234e2f7ec5dd315014f31574719900c0715f9477,"[WASI] Skip signal handler registration on WASI (#109838)

Signed-off-by: Joel Dice <joel.dice@fermyon.com>",2024-11-18 09:24:50+00:00,Joel Dice,0,,,1,7,4,[wasi] skip signal handler registration on wasi (issue_ref)
dotnet/runtime,2c7c6bf5d18a7d42f4b9f48fe4bced22f1d292ae,"Detect mask usage for Across functions (#109218)

* Detect mask usage for Across functions

Fixes: #101973

* Fix build errors on x86

* Refactor containable check for csel

* Remove optimisation of AddSequentialAcross and assembly checks

* Add more tests with different mask values

* Avoid containing csel that's already containing an embedded op

* Add test for the Fuzzlyn reported failure

* Fix test build failures",2024-11-18 13:50:08+00:00,SwapnilGaikwad,1,e597dc26f7bb8adec335d5dd432e00495074524b,"ARM64-SVE: Allow LCLs to be of type MASK (#109286)

* ARM64-SVE: Allow LCLs to be of type MASK

* Trigger based on OptimizationDisabled

* Add compConvertMaskToVectorUsed check

* Initial version with hashtable

* Use double weighting method

* Move to lclmorph

* Better commenting

* Add TARGET_ARM64 check

* tidy

* Add DEBUG ifdefs

* Add mask check in lsrabuild

Change-Id: Ic18f575e266d63db38f95601d374441cdbf28b44

* Add conversion for local var uses

* Add conversion for local stores

* Comment for simd types

* Use weight_t for weighting values

Change-Id: I0d39d59a121682e8e583cccd710d13f2dd33bdc5

* Account for block weights and number of instructions in weighting.

* Fix asserts

* Split weighting into current and switch

* Add tests

* Allow tests to tier

* update comments

* additional comments

* abort walking once found

* add comment to LCLMasksCheckLCLVarVisitor

* LCLMasks -> LclMasks

* LCLStore -> LclStore

* LCLVar -> LclVar

* UpdateVarWeight -> UpdateUseWeight

* combine checks

* Catch conversions of both types

* better float printing

* dump the updated tree with conversion

* fix formatting

* Update explanation

* extra tests and remove asserts

* move pass to lclmasks.cpp

* Use vistors to iterate all nodes

* Rename visitors

* fix formatting

* Add checks for LCL_ADDR

* Add config option

* Single Fact for all the tests

* Only check statements where there is a local of type TYP_SIMD16/TYP_MASK

* Call fgSequenceLocals() once per statement

* Use JitSmallPrimitiveKeyFuncs

* allow for nullptr user

* Remove uses of gtBashToNOP()

* Use DISPTREE

* update asserts

* Remove searching of convertOp

* remove ""method"" in tests

* Use LookupPointerOrAdd()

* Remove Set() to table

* fix formatting

* Rename all functions

* Use TypeIs()

* invalidate if cached simdtype differs

* use constructor for weightsTable

Change-Id: I884307955274dac90bf1b30c5dd44be1e2917d49

* check for address exposed variables

* Add allocator CMK_MaskConversionOpt

* Simplify ChangeMatchUse.csproj

* Hoist Sve check in testing

* Check for parameters and OSR locals

* rename tests

* Don't convert uses of masks as vectors

* fix formatting",10,268,10,detect mask usage for across functions (issue_ref)* detect mask usage for across functions
dotnet/runtime,2d9f80b0a5f8b4f2c8d4a6fa02f8f8dfcbc26ff5,"Remove more HelperMethodFrames (HMF) from Reflection (#109882)

Convert RuntimeTypeHandle.GetTypeFromHandle() to fast/slow paths.
Convert RuntimeTypeHandle.GetBaseType() to RuntimeType.GetParentType() QCall.
Consolidate Object.GetType() with RuntimeTypeHandle APIs.
Remove HMF from RuntimeFieldHandle.GetAttributes() and RuntimeFieldHandle.GetApproxDeclaringType().",2024-11-18 16:08:36+00:00,Aaron Robinson,1,0f0f8ce751134cccf11e47c90f781597039146ef,"Fix init race in mono_class_try_get_[shortname]_class. (#112282)

We observed several crash reports in dotnet Android coming from
google play store, like this one:

https://github.com/dotnet/runtime/issues/109921#issuecomment-2640412870

and it happens at the following callstack:

mono_class_setup_vtable_full at /__w/1/s/src/mono/mono/metadata/class-setup-vtable.c:900
init_io_stream_slots at /__w/1/s/src/mono/mono/metadata/icall.c:3378
ves_icall_System_IO_Stream_HasOverriddenBeginEndRead at /__w/1/s/src/mono/mono/metadata/icall.c:3437
 (inlined by) ves_icall_System_IO_Stream_HasOverriddenBeginEndRead_raw at /__w/1/s/src/mono/mono/metadata/../metadata/icall-def.h:228

Looking a little deeper at that that code path expects call to
mono_class_try_get_stream_class to succeed since it calls
mono_class_setup_vtable on returned class pointer. There are other
places where code expectes mono_class_try_get_[shortname]_class to
always succeed or it will assert. Other locations handles the case
where it returns NULL meaning that the class has been linked out.

After looking into the macro implementation generating the
mono_class_try_get_[shortname]_class functions it appears that it has
a race where one thread could return NULL even if the class successfully
gets loaded by another racing thread. Initially that might have
been intentionally and callers would need to redo the call, but then
there is no way for callers to distinct between hitting the race and
class not available. Adding to the fact that code would also expect that
some critical classes never fail loading, like what
init_io_stream_slots does, this race ended up in race conditions.

In the past, this particular race in init_io_stream_slots was hidden
due to multiple calls to mono_class_try_get_stream_class minimzing the
risk of a race to cause a crash. That implementation was however
changed by https://github.com/dotnet/runtime/commit/e74da7c72c81787f8339df93cb6f13ac40b1e39d
ending up in just one call to mono_class_try_get_stream_class in the
critical paths.

Since code relies on mono_class_try_get_[shortname]_class to succeed
for some critical classes, code asserts if it returns NULL or crashes.
The fix will use acquire/release semantics on the static variable
guarding the cached type and make sure memory order is preserved
on both read and write. Previous implementation adopted a similar approach
but it took a copy of the static tmp_class into a local variable meaning
that memory order would not be guaranteed, even if it applied memory
barriers and volatile keywords on the static variables.

Fix also adds an assert into init_io_stream_slots since it expects
failures in calls to mono_class_try_get_stream_class as fatal.",17,157,143,remove more helpermethodframes (hmf) from reflection (issue_ref)convert runtimetypehandle.gettypefromhandle() to fast/slow paths.convert runtimetypehandle.getbasetype() to runtimetype.getparenttype() qcall.consolidate object.gettype() with runtimetypehandle apis.remove hmf from runtimefieldhandle.getattributes() and runtimefieldhandle.getapproxdeclaringtype().
dotnet/runtime,11b877eb21bbe572ac6b7305f7ac6cb92179ad9f,Delete dead link in RD.XML docs (#109910),2024-11-18 18:39:41+00:00,Michal Strehovský,0,,,1,1,1,delete dead link in rd.xml docs (issue_ref)
dotnet/runtime,e597dc26f7bb8adec335d5dd432e00495074524b,"ARM64-SVE: Allow LCLs to be of type MASK (#109286)

* ARM64-SVE: Allow LCLs to be of type MASK

* Trigger based on OptimizationDisabled

* Add compConvertMaskToVectorUsed check

* Initial version with hashtable

* Use double weighting method

* Move to lclmorph

* Better commenting

* Add TARGET_ARM64 check

* tidy

* Add DEBUG ifdefs

* Add mask check in lsrabuild

Change-Id: Ic18f575e266d63db38f95601d374441cdbf28b44

* Add conversion for local var uses

* Add conversion for local stores

* Comment for simd types

* Use weight_t for weighting values

Change-Id: I0d39d59a121682e8e583cccd710d13f2dd33bdc5

* Account for block weights and number of instructions in weighting.

* Fix asserts

* Split weighting into current and switch

* Add tests

* Allow tests to tier

* update comments

* additional comments

* abort walking once found

* add comment to LCLMasksCheckLCLVarVisitor

* LCLMasks -> LclMasks

* LCLStore -> LclStore

* LCLVar -> LclVar

* UpdateVarWeight -> UpdateUseWeight

* combine checks

* Catch conversions of both types

* better float printing

* dump the updated tree with conversion

* fix formatting

* Update explanation

* extra tests and remove asserts

* move pass to lclmasks.cpp

* Use vistors to iterate all nodes

* Rename visitors

* fix formatting

* Add checks for LCL_ADDR

* Add config option

* Single Fact for all the tests

* Only check statements where there is a local of type TYP_SIMD16/TYP_MASK

* Call fgSequenceLocals() once per statement

* Use JitSmallPrimitiveKeyFuncs

* allow for nullptr user

* Remove uses of gtBashToNOP()

* Use DISPTREE

* update asserts

* Remove searching of convertOp

* remove ""method"" in tests

* Use LookupPointerOrAdd()

* Remove Set() to table

* fix formatting

* Rename all functions

* Use TypeIs()

* invalidate if cached simdtype differs

* use constructor for weightsTable

Change-Id: I884307955274dac90bf1b30c5dd44be1e2917d49

* check for address exposed variables

* Add allocator CMK_MaskConversionOpt

* Simplify ChangeMatchUse.csproj

* Hoist Sve check in testing

* Check for parameters and OSR locals

* rename tests

* Don't convert uses of masks as vectors

* fix formatting",2024-11-18 22:58:22+00:00,Alan Hayward,1,c31bb93ea3ca685b6336cd0cbde4893dff30f80c,"Arm64-SVE: Fix up comments in optimizemaskconversions (#109955)

Co-authored-by: Kunal Pathak <Kunal.Pathak@microsoft.com>",15,811,5,"arm64-sve: allow lcls to be of type mask (issue_ref)* arm64-sve: allow lcls to be of type mask* trigger based on optimizationdisabled* add compconvertmasktovectorused check* initial version with hashtable* use double weighting method* move to lclmorph* better commenting* add target_arm64 check* tidy* add debug ifdefs* add mask check in lsrabuildchange-id: ic18f575e266d63db38f95601d374441cdbf28b44* add conversion for local var uses* add conversion for local stores* comment for simd types* use weight_t for weighting valueschange-id: i0d39d59a121682e8e583cccd710d13f2dd33bdc5* account for block weights and number of instructions in weighting.* fix asserts* split weighting into current and switch* add tests* allow tests to tier* update comments* additional comments* abort walking once found* add comment to lclmaskschecklclvarvisitor* lclmasks -> lclmasks* lclstore -> lclstore* lclvar -> lclvar* updatevarweight -> updateuseweight* combine checks* catch conversions of both types* better float printing* dump the updated tree with conversion* fix formatting* update explanation* extra tests and remove asserts* move pass to lclmasks.cpp* use vistors to iterate all nodes* rename visitors* fix formatting* add checks for lcl_addr* add config option* single fact for all the tests* only check statements where there is a local of type typ_simd16/typ_mask* call fgsequencelocals() once per statement* use jitsmallprimitivekeyfuncs* allow for nullptr user* remove uses of gtbashtonop()* use disptree* update asserts* remove searching of convertop* remove ""method"" in tests* use lookuppointeroradd()* remove set() to table* fix formatting* rename all functions* use typeis()* invalidate if cached simdtype differs* use constructor for weightstablechange-id: i884307955274dac90bf1b30c5dd44be1e2917d49* check for address exposed variables* add allocator cmk_maskconversionopt* simplify changematchuse.csproj* hoist sve check in testing* check for parameters and osr locals* rename tests* don't convert uses of masks as vectors* fix formatting"
dotnet/runtime,bf8ddd3fa98c3e8082c63007985981d9655c7c0e,"Add Linux build methodology doc (#109938)

Adds a doc that describes the design of our Linux build images.",2024-11-18 23:47:02+00:00,Sven Boemer,1,9a6aeadad481dbe0729763affad79cad9909ff4e,Fix small typos in linux-build-methodology.md (#109947),1,151,0,add linux build methodology doc (issue_ref)adds a doc that describes the design of our linux build images.
dotnet/runtime,cae0e0f1deee8f7cea236bd6369f79584e7b35df,Add tests for [UnsafeAccessor] on fields with readonly (#109944),2024-11-19 05:45:55+00:00,Sergio Pedri,0,,,1,24,0,add tests for [unsafeaccessor] on fields with readonly (issue_ref)
dotnet/runtime,2ac0743b18cf70cc6047f0ec35d3a7a6a4428354,"Move ReflectionCoreCallbacks into ReflectionAugments (#109912)

Leftover work identified in #109857.",2024-11-19 07:21:58+00:00,Michal Strehovský,1,78ede327fe8c4322cf14e75e30c2f06b2ccca32b,"Fix `DiagnosticMethodInfo.Create(Delegate)` for valuetype methods (#110782)

Fixes #108688.

We actually have test coverage for this here:

https://github.com/dotnet/runtime/blob/ce9dd2ad46a4842f5cf0f03c4a30b4d29bd0b4cc/src/libraries/System.Diagnostics.StackTrace/tests/DiagnosticMethodInfoTests.cs#L137-L147

But hitting the bug requires not considering the method to be target of reflection. We root libraries tests due to xUnit. Reflection can deal with both boxed and unboxed entrypoints, stack trace metadata can't.",21,441,563,move reflectioncorecallbacks into reflectionaugments (issue_ref)leftover work identified in issue_ref.
dotnet/runtime,20f5c7e3a9bb43abf5edfcedfad8d7b77b8c5c36,Remove unsafe perf quirks from System.Text.Encodings.Web (#109896),2024-11-19 12:20:52+00:00,Egor Bogatov,1,112fa519f2bfdb0f7a2274970dffea2bca4b9d36,"Unicode 16.0 Support (#111469)

* Unicode 16.0 Support

* Update encoding web files

* Fix failing test",9,38,491,remove unsafe perf quirks from system.text.encodings.web (issue_ref)
dotnet/runtime,5b9bba7ccdd806af316dd88791d9d270998a9016,[browser] disable debugger tests on CI (#108178),2024-11-19 12:58:36+00:00,Pavel Savara,0,,,12,5,215,[browser] disable debugger tests on ci (issue_ref)
dotnet/runtime,340629a5c0a53746ff37a5cf8edf898fdbb275dc,"[WASI] throw PNSE in `ManualResetEventSlim.Wait` (#109839)

Signed-off-by: Joel Dice <joel.dice@fermyon.com>
Co-authored-by: pavelsavara <pavel.savara@gmail.com>",2024-11-19 13:02:53+00:00,Joel Dice,0,,,1,3,0,[wasi] throw pnse in (issue_ref)
dotnet/runtime,6218e39b5bf2ffef33e1cdbcec4d622d1f41663b,"Remove `netcoreapp >= 7.0` condition (#109701)

Since https://github.com/dotnet/runtime/pull/90880, we only compile for `netcoreapp >= 8.0`",2024-11-19 13:53:44+00:00,xtqqczze,0,,,1,8,11,remove condition (issue_ref)since we only compile for
dotnet/runtime,e3b3aaaf21b88b7992cd8a42321e01cf1aa704a2,"[EventTrace] Update check for provider triggered GC (#109587)

* [EventTrace] Update check for provider triggered GC

Re-add ControlCode check for ETW provider triggered GC
Prevent disabling an EventPipe provider from triggering GC

* Use SessionChange to track EventPipe vs ETW

* Cleanup macros

* Update NativeAOT counterpart

* Fixup NativeAOT condition

* Extend ControlCode keyword definition to Unix

* Update NativeAOT counterpart

* Update NativeAOT hardcoded ControlCode check",2024-11-19 16:24:31+00:00,Mitchell Hwang,0,,,4,96,31,[eventtrace] update check for provider triggered gc (issue_ref)* [eventtrace] update check for provider triggered gcre-add controlcode check for etw provider triggered gcprevent disabling an eventpipe provider from triggering gc* use sessionchange to track eventpipe vs etw* cleanup macros* update nativeaot counterpart* fixup nativeaot condition* extend controlcode keyword definition to unix* update nativeaot counterpart* update nativeaot hardcoded controlcode check
dotnet/runtime,932da77192ece1a820c0ff3a1884af859ab8a3fb,"Remove `unsafe` modifier from `Memory<T>.Span` (#106085)

* Remove `unsafe` modifier from `Memory<T>.Span`

* Make `desiredStartIndex` an `int`

* Use `nuint` and add comment

* fixup!b6b93d972b5b16b345e53c8c07c074cdc85cad9a

---------

Co-authored-by: Stephen Toub <stoub@microsoft.com>",2024-11-19 19:02:56+00:00,xtqqczze,0,,,2,8,4,remove modifier from (issue_ref)* remove modifier from * make an * use and add comment* fixup!b6b93d972b5b16b345e53c8c07c074cdc85cad9a---------
dotnet/runtime,161f34645c5a7e18880f601b5bee569694d67f79,"[cDAC] Set RejitFlags to use a known underlying type (#109935)

set RejitFlags enum to use uint32_t as backing type for use in cDAC",2024-11-19 20:17:18+00:00,Max Charlamb,0,,,9,70,71,[cdac] set rejitflags to use a known underlying type (issue_ref)set rejitflags enum to use uint32_t as backing type for use in cdac
dotnet/runtime,5a0c8c57a4771c0d85e5eaed97431d10d63d1867,"Transfer ThreadPool local queue to high-pri queue on Task blocking (#109841)

Added for now under the same config flag as is being used for other work prioritization experimentation.",2024-11-19 21:46:00+00:00,Stephen Toub,0,,,3,65,1,transfer threadpool local queue to high-pri queue on task blocking (issue_ref)added for now under the same config flag as is being used for other work prioritization experimentation.
dotnet/runtime,7eecb045f7ad800ff1495f46c61002d29700cdec,"JIT: Remove switch recognition fallthrough quirk (#109796)

Part of #107749. Removes the last ""TODO-NoFallThrough"" in the JIT source. During switch recognition, we should only need to modify flow edges -- changing the lexical order of blocks to create fallthrough into one of the switch's successors is unnecessary, now that we're running block layout in the backend.",2024-11-19 21:55:31+00:00,Aman Khalid,1,150d3141df4e5beddb846cfbc4585f115d0a6d36,"JIT: Remove lexical dependencies in switch recognition (#110253)

Fixes #107076. Part of #107749. Instead of relying on the ""not equal"" target of each test block being the next block, explicitly follow the chain of ""not equal"" targets.",1,1,34,"jit: remove switch recognition fallthrough quirk (issue_ref)part of issue_ref. removes the last ""todo-nofallthrough"" in the jit source. during switch recognition, we should only need to modify flow edges -- changing the lexical order of blocks to create fallthrough into one of the switch's successors is unnecessary, now that we're running block layout in the backend."
dotnet/runtime,1e3544ec04e27538f3d38d274f7a65277f0d681f,"JIT: Continue profile consistency checks until after finally cloning (#109792)

Part of #107749. The next few opt phases alter flow substantially, such that we need to propagate new weight throughout the flowgraph. That will probably justify running profile synthesis after, in a later PR.",2024-11-19 22:01:44+00:00,Aman Khalid,0,,,4,29,14,"jit: continue profile consistency checks until after finally cloning (issue_ref)part of issue_ref. the next few opt phases alter flow substantially, such that we need to propagate new weight throughout the flowgraph. that will probably justify running profile synthesis after, in a later pr."
dotnet/runtime,2eb6a2a0d4310aa0faf717789d80e85dfa5e08a1,"[cdac] Simplify usage of TestPlaceholderTarget in tests (#109873)

- Make `TestPlaceholderTarget` (mock target) constructor take type infos and global values
- Handle reading of global values in mock target implementation
- Use Moq for creating a `ContractRegistry` instead of our own explicit implementation
- Remove subclasses of `TestPlaceholderTarget`",2024-11-20 02:44:57+00:00,Elinor Fung,0,,,12,168,318,[cdac] simplify usage of testplaceholdertarget in tests (issue_ref)- make (mock target) constructor take type infos and global values- handle reading of global values in mock target implementation- use moq for creating a instead of our own explicit implementation- remove subclasses of
dotnet/runtime,db6cef1b4f23620e4d43b89c8e593b47d117705a,JIT: Unroll more Equals/StartsWith/EndsWith on arm64 (#109036),2024-11-20 04:16:07+00:00,Egor Bogatov,1,d0b4ca6ee4b6f6c99e7aed2fe0e042e5e4974ad9,JIT: Fix BCE regression (#109466),2,13,6,jit: unroll more equals/startswith/endswith on arm64 (issue_ref)
dotnet/runtime,d0b4ca6ee4b6f6c99e7aed2fe0e042e5e4974ad9,JIT: Fix BCE regression (#109466),2024-11-20 04:16:32+00:00,Egor Bogatov,1,08a36ca95e0e2620d15d79bd83c5419c63002851,"Add VPCLMULQDQ intrinsics (#109137)

* add vpclmulqdq intrinsics

* add missing break

* add alternate instruction def for evex encoding

* rename instruction

* whitespace

* re-run thunk generator

* fix AOT instruction sets

* address feedback

* apply formatting patch

* address feedback round 2

* add missing brace

* fix smoketest expected results

* fix suffix order

* handle implied V512 support in AOT

* remove more unnecessary X64 ISA variants

---------

Co-authored-by: Tanner Gooding <tagoo@outlook.com>",7,99,11,jit: fix bce regression (issue_ref)
dotnet/runtime,0d62887a30553b8177dc90f9e39559be0e6c7707,"Fix dataflow analysis for GetNestedType (#109814)

https://github.com/dotnet/linker/pull/2133 adjusted rooting logic to keep `.All` on all nested types preserved with PublicNestedTypes/NonPublicNestedTypes. The PR resolved the bug and the analysis work that was identified in the review as necessary never happened. So we just uselessly preserve members.

This adds dataflow analysis to propagate this. Since we never had the dataflow analysis, I'm exposing this not as .All, but a subset of .All that doesn't do the worst part - doesn't require reflectability of interface methods.",2024-11-20 06:20:10+00:00,Michal Strehovský,1,c5213dec4dc9668a9ca12340e00f538f6730ae60,"Enable more ILLink test cases with native AOT (#110166)

When I was working on the `DAMT.All*`, I noticed we don't run many Reflection tests, this is progress towards that.

Also fixes rare `CreateInstance` overloads - these were never worth the effort to implement honestly, but more code sharing made implementing them a breeze.

Contributes to #82447.",3,57,4,"fix dataflow analysis for getnestedtype (issue_ref) adjusted rooting logic to keep on all nested types preserved with publicnestedtypes/nonpublicnestedtypes. the pr resolved the bug and the analysis work that was identified in the review as necessary never happened. so we just uselessly preserve members.this adds dataflow analysis to propagate this. since we never had the dataflow analysis, i'm exposing this not as .all, but a subset of .all that doesn't do the worst part - doesn't require reflectability of interface methods."
dotnet/runtime,b5750e65aea5d9e6246cdeb16a52608c454a4e40,"Add SseFormatter (#109832)

* Add SseFormatter.

* Update src/libraries/System.Net.ServerSentEvents/src/Resources/Strings.resx

Co-authored-by: Stephen Toub <stoub@microsoft.com>

* Document SseItem exceptions.

* Misc improvements and fixes.

* Reinstate ordering of parameters in serialization callback.

* Add SseItem<T>.ReconnectionInterval.

* Address feedback.

* Add parser validation for too small or too large retry intervals.

* Update src/libraries/System.Net.ServerSentEvents/src/System/Net/ServerSentEvents/SseFormatter.cs

Co-authored-by: Stephen Toub <stoub@microsoft.com>

* Handle CR line breaks.

* Simplify PooledByteBufferWriter.

---------

Co-authored-by: Stephen Toub <stoub@microsoft.com>",2024-11-20 09:57:42+00:00,Eirik Tsarpalis,1,09d196184b036680d6933c8577632090ad8e34a4,"Fix PooledByteBufferWriter handling of sizeHint <= 0 (#110031)

* Fix PooledByteBufferWriter handling of sizeHint <= 0

* Add MinimumBufferSize constant and update usage",15,704,47,add sseformatter (issue_ref)* add sseformatter.* update src/libraries/system.net.serversentevents/src/resources/strings.resx
dotnet/runtime,50cbcb3777f4f7214b7036f89b61b587ef60e62e,JIT: (x u>> cns) -> [0..(x's max value >> cns)] (#109900),2024-11-20 13:20:40+00:00,Egor Bogatov,0,,,2,27,11,jit: (x u>> cns) -> [0..(x's max value >> cns)] (issue_ref)
dotnet/runtime,871f679da2c0835b8eac254fc1cbf015d0b506bc,"[main] Update dependencies from dotnet/source-build-reference-packages (#109702)

* Update dependencies from https://github.com/dotnet/source-build-reference-packages build 20241108.1

Microsoft.SourceBuild.Intermediate.source-build-reference-packages
 From Version 10.0.0-alpha.1.24555.1 -> To Version 10.0.0-alpha.1.24558.1

* Update dependencies from https://github.com/dotnet/source-build-reference-packages build 20241111.2

Microsoft.SourceBuild.Intermediate.source-build-reference-packages
 From Version 10.0.0-alpha.1.24555.1 -> To Version 10.0.0-alpha.1.24561.2

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2024-11-20 14:19:56+00:00,dotnet-maestro[bot],0,,,1,2,2,[main] update dependencies from dotnet/source-build-reference-packages (issue_ref)* update dependencies from build 20241108.1microsoft.sourcebuild.intermediate.source-build-reference-packages from version 10.0.0-alpha.1.24555.1 -> to version 10.0.0-alpha.1.24558.1* update dependencies from build 20241111.2microsoft.sourcebuild.intermediate.source-build-reference-packages from version 10.0.0-alpha.1.24555.1 -> to version 10.0.0-alpha.1.24561.2---------
dotnet/runtime,0b8addb00984698f458742cf958f2fb7d0994812,"Allow nibblemap deletes to be no-op (#109976)

* allow no-op deletes

* improve comment",2024-11-20 15:33:52+00:00,Max Charlamb,1,5345dc51d3de3f0bd5c71adc19c50ee08877ca4b,"Adding CPUID for AVX10.2 (#109302)

* Add CPUID for AVX10.2

* Handle AVX10.2 ISAs in missing places

* Remove APX_X64 since it is unused

* remove log file and change handling for AVX10v2_V512

* resolve merge errors",1,4,2,allow nibblemap deletes to be no-op (issue_ref)* allow no-op deletes* improve comment
dotnet/runtime,5c218aba3feaafb030bcd09eb4efee511907164d,"Switch to non-incremental servicing and update ApiCompatNetCoreAppBaselineVersion to 9.0.0 (#109790)

* Update ApiCompatNetCoreAppBaselineVersion to 9.0.0

* Switch to non-incremental servicing by manually backporting 824bdd214e55727a03b942476ce02e8f5fdf7de8 from release/9.0
---------
Co-authored-by: Eric StJohn <ericstj@microsoft.com>

* Result of running: dotnet build src/libraries/apicompat/ApiCompat.proj /p:ApiCompatGenerateSuppresionFile=true

* Update suppression files

* Update NetCoreAppLatestStabel suppression file

---------

Co-authored-by: Viktor Hofer <viktor.hofer@microsoft.com>",2024-11-20 16:45:49+00:00,Carlos Sánchez López,0,,,10,18,337,switch to non-incremental servicing and update apicompatnetcoreappbaselineversion to 9.0.0 (issue_ref)* update apicompatnetcoreappbaselineversion to 9.0.0* switch to non-incremental servicing by manually backporting 824bdd214e55727a03b942476ce02e8f5fdf7de8 from release/9.0---------
dotnet/runtime,00ba6d58fa24586252b6ab3b45bc239a4c27afd6,"JIT: Refactor 3-opt utilities to facilitate expansion (#109982)

Part of #107749. Follow-up to #103450. To facilitate implementing a global variant of 3-opt alongside the greedy variant, this moves some shared components to helper methods. I want to do this as a separate PR to ensure this change is truly no-diff, and has minimal (if any) TP impact.",2024-11-20 18:11:19+00:00,Aman Khalid,1,fe7062386e7c2f96b1dee17f91e71e0276fb6d41,"JIT: Use reaching definitions in CSE to update conservative VNs (#109959)

Now that CSE always inserts into SSA we can update it to make use of the
reaching definition information that it has access to. CSE already spent
effort to track some extra information to try to do this, which we can
remove.

- Remove `optCSECheckedBoundMap`: this was used by CSE to try to update
  conservative VNs of ancestor bounds checks. This is unnecessary since
  all descendants of the CSE definitions should get the same
  conservative VNs automatically now.
- Remove `CSEdsc::defConservNormVN`; this was used to update
  conservative VNs in the single-def case, which again is unnecessary
  now.

Making this change requires a bit of refactoring to the incremental SSA
builder. Before this PR the builder takes all defs and all uses and then
inserts everything into SSA. After this change the builder is used in a
multi-step process as follows:
1. All definitions are added with `IncrementalSsaBuilder::InsertDef`
2. The definitions are finalized with
   `IncrementalSsaBuilder::FinalizeDefs`
3. Uses are inserted (one by one) with
   `IncrementalSsaBuilder::InsertUse`. No finalization are necessary;
   each use is directly put into SSA as a result of calling this
   method.

The refactoring allows CSE to use the incremental SSA builder such that
it can access reaching definition information for each of the uses as
part of making replacements. However, this still requires some
refactoring such that CSE performs replacements of all defs before
performing the replacements of all uses.

Additionally, this PR fixes various incorrect VN updating made by CSE.

VN and CSE still track VNs that are interesting bounds check. However,
VN was sometimes inserting VNs with exception sets into the set, which
is not useful (the consumers always use normal VNs when querying the
set). This PR fixes VN to insert the normal VN instead.

Fix #109745",2,171,89,"jit: refactor 3-opt utilities to facilitate expansion (issue_ref)part of issue_ref. follow-up to issue_ref. to facilitate implementing a global variant of 3-opt alongside the greedy variant, this moves some shared components to helper methods. i want to do this as a separate pr to ensure this change is truly no-diff, and has minimal (if any) tp impact."
dotnet/runtime,2d108f9c3c59485d9fa66720c0aebc9610a6303a,"Update dependencies from https://github.com/dotnet/emsdk build 20241119.4 (#110010)

Microsoft.SourceBuild.Intermediate.emsdk , Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport
 From Version 10.0.0-alpha.1.24568.1 -> To Version 10.0.0-alpha.1.24569.4

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2024-11-20 20:10:34+00:00,dotnet-maestro[bot],0,,,2,5,5,"update dependencies from build 20241119.4 (issue_ref)microsoft.sourcebuild.intermediate.emsdk , microsoft.net.workload.emscripten.current.manifest-10.0.100.transport from version 10.0.0-alpha.1.24568.1 -> to version 10.0.0-alpha.1.24569.4"
dotnet/runtime,b85f9f621bf19ad12eb91a7b6bf35a1503c58845,[wasm] Run downlevel tests only on main (#109919),2024-11-20 20:11:26+00:00,Marek Fišera,1,f30cfc0616bd9a50bdeb96049afff04cd5e2a8d9,"All `WasmBuildTests` use static project from assets or `dotnet new`, unification of browser tests (#109069)

* Fix build errors in WASI - refactor of WASI in a future PR.

* Fix binlog location.

* Update README.

* Feedback: non-nullable _projectDir.

* Fix `SatelliteAssembliesTests` and other test that require 3 states of `WasmBuildNative`

* `RebuildTests` fix after introducing figerprinting.

* Fix no-worklod tests: 1) do not double-assert `AssertRuntimePackPath` in blazor 2) `AssertRuntimePackPath` is correct  only when workload is there 3) NativeBuild should allow undefined in blazor tests as well.

* Fix `NativeBuildTests` - AppBundle was not asserted here originally.

* `WasmGenerateAppBundle=false` when workloads used (set in workload manifest). The check is incorrect in the current process of testing.

* Fix `MainWithArgsTests`. Url query can have arg key duplicates -> is better represented by `NameValueCollection` than `Dictionary`

* AppBundle was never asserted for size in `OptimizationFlagChangeTests` + use statistics that are fingerprinting insensitive.

* Reading from config is a known issue.

* Fix `ReferenceNewAssemblyRebuildTest`: Json lib was already referenced before the change in the test. Use Cryptography lib instead.

* Keep blazor workload tests together.

* Fix: `PInvokeTableGeneratorTests` on Windows.

* Move all no-workload blazor tests to one class.

* Use more meaningful name for `MiscTests3`.

* `PInvokeTableGeneratorTests` takes 2-3 times more time than average WBT class, divide it.

* Block the timeouting test with exisiting issue.

* Try avoiding port collisions in blazor tests run on kestrel.

* Removal of files and comments that were supposed to be deleted after approval.",1,7,3,[wasm] run downlevel tests only on main (issue_ref)
dotnet/runtime,08a36ca95e0e2620d15d79bd83c5419c63002851,"Add VPCLMULQDQ intrinsics (#109137)

* add vpclmulqdq intrinsics

* add missing break

* add alternate instruction def for evex encoding

* rename instruction

* whitespace

* re-run thunk generator

* fix AOT instruction sets

* address feedback

* apply formatting patch

* address feedback round 2

* add missing brace

* fix smoketest expected results

* fix suffix order

* handle implied V512 support in AOT

* remove more unnecessary X64 ISA variants

---------

Co-authored-by: Tanner Gooding <tagoo@outlook.com>",2024-11-20 20:33:43+00:00,Clinton Ingram,1,975f4ea5fc9bd39141d07eb78333a0e04ac688a6,"JIT: Improve containment for widening intrinsics (#109474)

* improve containment for widening intrinsics

* apply formatting patch

* tidying

* use tuple type for load size factor

* apply formatting patch

* fix build

* whitespace

* revert emitter changes",47,775,359,add vpclmulqdq intrinsics (issue_ref)* add vpclmulqdq intrinsics* add missing break* add alternate instruction def for evex encoding* rename instruction* whitespace* re-run thunk generator* fix aot instruction sets* address feedback* apply formatting patch* address feedback round 2* add missing brace* fix smoketest expected results* fix suffix order* handle implied v512 support in aot* remove more unnecessary x64 isa variants---------
dotnet/runtime,1474fc3fafca26b4b051be7dacdba8ac2804c56e,"Update resourceManagement.yml (#110014)

Tag dotnet/illink on linker area",2024-11-20 20:55:08+00:00,Jackson Schuster,0,,,1,1,3,update resourcemanagement.yml (issue_ref)tag dotnet/illink on linker area
dotnet/runtime,3b91ac601980f3cc35e1d8687e7235e874ffc8ea,"Remove unsupported _AggressiveAttributeTrimming switch (#109994)

This switch was never documented and is not supported, because it can
cause behavior differences when trimming without any warnings.",2024-11-20 23:45:51+00:00,Sven Boemer,0,,,7,0,380,"remove unsupported _aggressiveattributetrimming switch (issue_ref)this switch was never documented and is not supported, because it cancause behavior differences when trimming without any warnings."
dotnet/runtime,b66200e5448be50673b0387ca4632d3bfa25887b,"Update DynamicallyAccessedMembers annotation on EventSource (#110001)

This takes advantage of #109814. This is in theory a breaking change in case someone took advantage
of our annotation and is doing their own reflection on `EventSource` descendants.

Someone else reflecting on EventSource is problematic however. We placed around various suppressions
due to our own annotations like this:

https://github.com/dotnet/runtime/blob/0d62887a30553b8177dc90f9e39559be0e6c7707/src/libraries/System.Private.CoreLib/src/System/Diagnostics/Tracing/EventSource.cs#L414-L424

It means that if someone else is reflection-accessing these, they would not get a trimming warning.
Hopefully, nobody does that. This PR also assumes that nobody does that (and the PR should therefore
not be breaking in practice).

We annotate the class for our purposes, but someone else could be taking advantage of that in their own code.",2024-11-21 07:41:04+00:00,Michal Strehovský,1,25f96730f6e027062e5729eeaba2d23485d8d71c,"threads.h: Fix up grammar/spelling in vm/threads.h (#109972)

* threads.h: Fix up grammar/spelling in vm/threads.h

* Fix up other code comment instances of insur* -> ensur*",3,61,7,"update dynamicallyaccessedmembers annotation on eventsource (issue_ref)this takes advantage of issue_ref. this is in theory a breaking change in case someone took advantageof our annotation and is doing their own reflection on descendants.someone else reflecting on eventsource is problematic however. we placed around various suppressionsdue to our own annotations like this:#l414-l424it means that if someone else is reflection-accessing these, they would not get a trimming warning.hopefully, nobody does that. this pr also assumes that nobody does that (and the pr should thereforenot be breaking in practice).we annotate the class for our purposes, but someone else could be taking advantage of that in their own code."
dotnet/runtime,ffb0bfff316ae5acf16b579fa9304c92173f0151,"Replace DAMT.All with more restricted annotation on InvokeMember/FindMembers/DeclaredMembers (#109801)

I'm looking at places we use .All to see if the new annotations could help. Here we don't need the new annotations, this was always expressible. I can only assume the reason for .All was laziness. This was at a time when we believed .All ""just keeps a bit more"" and we didn't consider the impact of marking interface methods implemented by the class, or the impact of warnings due to .All capturing things that are not safe to reflection-call.

This is a breaking change in theory, should someone implement `IReflect` or derive from `System.TypeInfo` - they need to update the annotations.",2024-11-21 11:49:48+00:00,Michal Strehovský,1,ad1f8dbd6200f726dab7385980c87e8a3dcabc06,"Added AsReadOnly() extension to ISet<T> (#106037)

* Add AsReadOnly extension for ISet<T>

* Fix type forwarding

---------

Co-authored-by: Stephen Toub <stoub@microsoft.com>",25,264,38,"replace damt.all with more restricted annotation on invokemember/findmembers/declaredmembers (issue_ref)i'm looking at places we use .all to see if the new annotations could help. here we don't need the new annotations, this was always expressible. i can only assume the reason for .all was laziness. this was at a time when we believed .all ""just keeps a bit more"" and we didn't consider the impact of marking interface methods implemented by the class, or the impact of warnings due to .all capturing things that are not safe to reflection-call.this is a breaking change in theory, should someone implement or derive from - they need to update the annotations."
dotnet/runtime,98049e56a415d9bcf2d002fba71f399ba08cf39c,"Delete pragma suppression for warning disabled with UnconditionalSuppressMessage (#110030)

https://github.com/dotnet/runtime/pull/109963#discussion_r1850060556",2024-11-21 11:50:10+00:00,Michal Strehovský,0,,,1,0,2,delete pragma suppression for warning disabled with unconditionalsuppressmessage (issue_ref)#discussion_r1850060556
dotnet/runtime,c929990f717ed9c29b02d9c098d6b756b55e982b,Small clean up in assertionprop for relops (#109987),2024-11-21 15:45:34+00:00,Egor Bogatov,0,,,1,27,72,small clean up in assertionprop for relops (issue_ref)
dotnet/runtime,0d55c5bb4f5342e2a880fe62a0202195fecdbe5c,"MailAddress accepts invalid email address with consecutive dots (#109690)

* MailAddress accepts invalid email address with consecutive dots

* update DotAtomReader class comment",2024-11-21 16:17:42+00:00,Badre BSAILA,0,,,5,26,36,mailaddress accepts invalid email address with consecutive dots (issue_ref)* mailaddress accepts invalid email address with consecutive dots* update dotatomreader class comment
dotnet/runtime,cdb7a207df329173aec62e98d1156218f008a6a3,"[main] Update dependencies from dotnet/arcade (#109638)

* Update dependencies from https://github.com/dotnet/arcade build 20241107.1

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.24556.2 -> To Version 10.0.0-beta.24557.1

* Update dependencies from https://github.com/dotnet/arcade build 20241108.2

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.24556.2 -> To Version 10.0.0-beta.24558.2

* Update dependencies from https://github.com/dotnet/arcade build 20241110.1

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.24556.2 -> To Version 10.0.0-beta.24560.1

* Update dependencies from https://github.com/dotnet/arcade build 20241111.1

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.24556.2 -> To Version 10.0.0-beta.24561.1

* Update dependencies from https://github.com/dotnet/arcade build 20241112.5

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.24556.2 -> To Version 10.0.0-beta.24562.5

* Update dependencies from https://github.com/dotnet/arcade build 20241112.10

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.24556.2 -> To Version 10.0.0-beta.24562.10

* Update dependencies from https://github.com/dotnet/arcade build 20241112.15

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.24556.2 -> To Version 10.0.0-beta.24562.15

* Update dependencies from https://github.com/dotnet/arcade build 20241113.7

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.24556.2 -> To Version 10.0.0-beta.24563.7

* Update nonportable to portableBuild switch

* Update dependencies from https://github.com/dotnet/arcade build 20241114.1

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.24556.2 -> To Version 10.0.0-beta.24564.1

* Don't build bundleproj in source-build

* Update dependencies from https://github.com/dotnet/arcade build 20241120.1

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.24556.2 -> To Version 10.0.0-beta.24570.1

* Set UseMonoRuntime=false to workaround WABT restore issue

* Update dependencies from https://github.com/dotnet/arcade build 20241120.4

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.24556.2 -> To Version 10.0.0-beta.24570.4

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Viktor Hofer <viktor.hofer@microsoft.com>
Co-authored-by: Alexander Köplinger <alex.koeplinger@outlook.com>",2024-11-21 17:46:16+00:00,dotnet-maestro[bot],0,,,12,85,75,"[main] update dependencies from dotnet/arcade (issue_ref)* update dependencies from build 20241107.1microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.versiontools.tasks , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.24556.2 -> to version 10.0.0-beta.24557.1* update dependencies from build 20241108.2microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.versiontools.tasks , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.24556.2 -> to version 10.0.0-beta.24558.2* update dependencies from build 20241110.1microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.versiontools.tasks , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.24556.2 -> to version 10.0.0-beta.24560.1* update dependencies from build 20241111.1microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.versiontools.tasks , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.24556.2 -> to version 10.0.0-beta.24561.1* update dependencies from build 20241112.5microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.versiontools.tasks , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.24556.2 -> to version 10.0.0-beta.24562.5* update dependencies from build 20241112.10microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.versiontools.tasks , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.24556.2 -> to version 10.0.0-beta.24562.10* update dependencies from build 20241112.15microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.versiontools.tasks , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.24556.2 -> to version 10.0.0-beta.24562.15* update dependencies from build 20241113.7microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.versiontools.tasks , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.24556.2 -> to version 10.0.0-beta.24563.7* update nonportable to portablebuild switch* update dependencies from build 20241114.1microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.versiontools.tasks , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.24556.2 -> to version 10.0.0-beta.24564.1* don't build bundleproj in source-build* update dependencies from build 20241120.1microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.versiontools.tasks , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.24556.2 -> to version 10.0.0-beta.24570.1* set usemonoruntime=false to workaround wabt restore issue* update dependencies from build 20241120.4microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.versiontools.tasks , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.24556.2 -> to version 10.0.0-beta.24570.4---------"
dotnet/runtime,373525f0b7c35619b0e503b90b4e70377b6dacde,"[main] Update dependencies from dotnet/roslyn (#109540)

* Update dependencies from https://github.com/dotnet/roslyn build 20241104.8

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-2.24531.4 -> To Version 4.13.0-2.24554.8

* Update dependencies from https://github.com/dotnet/roslyn build 20241105.1

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-2.24531.4 -> To Version 4.13.0-2.24555.1

* Update dependencies from https://github.com/dotnet/roslyn build 20241106.10

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-2.24531.4 -> To Version 4.13.0-2.24556.10

* Update dependencies from https://github.com/dotnet/roslyn build 20241107.8

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-2.24531.4 -> To Version 4.13.0-2.24557.8

* Update dependencies from https://github.com/dotnet/roslyn build 20241108.12

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-2.24531.4 -> To Version 4.13.0-2.24558.12

* Update dependencies from https://github.com/dotnet/roslyn build 20241111.1

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-2.24531.4 -> To Version 4.13.0-2.24561.1

* Update dependencies from https://github.com/dotnet/roslyn build 20241113.22

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-2.24531.4 -> To Version 4.13.0-2.24563.22

* Update dependencies from https://github.com/dotnet/roslyn build 20241115.1

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-2.24531.4 -> To Version 4.13.0-2.24565.1

* Update dependencies from https://github.com/dotnet/roslyn build 20241115.9

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-2.24531.4 -> To Version 4.13.0-2.24565.9

* Update dependencies from https://github.com/dotnet/roslyn build 20241117.1

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-2.24531.4 -> To Version 4.13.0-2.24567.1

* Update dependencies from https://github.com/dotnet/roslyn build 20241118.2

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-2.24531.4 -> To Version 4.13.0-2.24568.2

* Update dependencies from https://github.com/dotnet/roslyn build 20241120.1

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-2.24531.4 -> To Version 4.13.0-2.24570.1

* Update dependencies from https://github.com/dotnet/roslyn build 20241120.4

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-2.24531.4 -> To Version 4.13.0-2.24570.4

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2024-11-21 17:48:54+00:00,dotnet-maestro[bot],0,,,2,11,11,"[main] update dependencies from dotnet/roslyn (issue_ref)* update dependencies from build 20241104.8microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-2.24531.4 -> to version 4.13.0-2.24554.8* update dependencies from build 20241105.1microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-2.24531.4 -> to version 4.13.0-2.24555.1* update dependencies from build 20241106.10microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-2.24531.4 -> to version 4.13.0-2.24556.10* update dependencies from build 20241107.8microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-2.24531.4 -> to version 4.13.0-2.24557.8* update dependencies from build 20241108.12microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-2.24531.4 -> to version 4.13.0-2.24558.12* update dependencies from build 20241111.1microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-2.24531.4 -> to version 4.13.0-2.24561.1* update dependencies from build 20241113.22microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-2.24531.4 -> to version 4.13.0-2.24563.22* update dependencies from build 20241115.1microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-2.24531.4 -> to version 4.13.0-2.24565.1* update dependencies from build 20241115.9microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-2.24531.4 -> to version 4.13.0-2.24565.9* update dependencies from build 20241117.1microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-2.24531.4 -> to version 4.13.0-2.24567.1* update dependencies from build 20241118.2microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-2.24531.4 -> to version 4.13.0-2.24568.2* update dependencies from build 20241120.1microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-2.24531.4 -> to version 4.13.0-2.24570.1* update dependencies from build 20241120.4microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-2.24531.4 -> to version 4.13.0-2.24570.4---------"
dotnet/runtime,25f96730f6e027062e5729eeaba2d23485d8d71c,"threads.h: Fix up grammar/spelling in vm/threads.h (#109972)

* threads.h: Fix up grammar/spelling in vm/threads.h

* Fix up other code comment instances of insur* -> ensur*",2024-11-21 17:49:49+00:00,Brian Chavez,1,b4bd13d3d81d8d91ad62946a8f1d24bf8e753d8d,"Fix build break for paltests (#115877)

* Use minipal_lowres_ticks for paltests

* Delete unused GetHighPrecisionTimeStamp",40,77,77,threads.h: fix up grammar/spelling in vm/threads.h (issue_ref)* threads.h: fix up grammar/spelling in vm/threads.h* fix up other code comment instances of insur* -> ensur*
dotnet/runtime,7c1f78fb071ec28a7ba2f9e64efa041e5350215d,"JIT: Replace `BlockSet` with `BitVec`, and remove BB epoch (#110034)

Part of #107749. Prerequisite for #110026.

Use postorder number-based BitVecs in RBO and block layout.
Use bbID-based BitVecs in fgIncorporateProfileData. This runs early enough in the JIT frontend such that I would expect bbIDs and bbNums to be 1:1, so I don't expect any TP impact from this change.
Switch descriptor creation still uses bbNums as a key into a BitVec as a workaround for BB epoch invariants -- I'll try switching this over to bbID in a follow-up to evaluate the TP cost of a sparser bitset.",2024-11-21 18:24:33+00:00,Aman Khalid,1,4045d1b9e63f2abae778548e981f14d5d439eea0,"JIT: Skip cost improvement check in 3-opt for exceptionally costly layouts (#110069)

Fixes #109984.",14,73,280,"jit: replace with , and remove bb epoch (issue_ref)part of issue_ref. prerequisite for issue_ref.use postorder number-based bitvecs in rbo and block layout.use bbid-based bitvecs in fgincorporateprofiledata. this runs early enough in the jit frontend such that i would expect bbids and bbnums to be 1:1, so i don't expect any tp impact from this change.switch descriptor creation still uses bbnums as a key into a bitvec as a workaround for bb epoch invariants -- i'll try switching this over to bbid in a follow-up to evaluate the tp cost of a sparser bitset."
dotnet/runtime,09b30a4c0618ff378abd523fd02e113b2474e958,"[cdac] Make contracts tests use mock/placeholder target instead of actual target (#110027)

- Separate helpers for testing an actual contract descriptor from helpers for mock memory
  - Tests/helpers for the contract descriptor are now under the `ContractDescriptor` folder
- Make all contracts tests use the mock target instead of creating a contract descriptor and using the `ContractDescriptorTarget`
- Update root namespaces from `Microsoft.Diagnostics.DataContractReader.UnitTests` -> `Microsoft.Diagnostics.DataContractReader.Tests` to match assembly name",2024-11-21 21:11:38+00:00,Elinor Fung,1,9cdd6532042339a40e5f8f63314e0df6595b54c4,"[cdac] Handle type descs in `RuntimeTypeSystem_1.GetLoaderModule` (#110325)

- Update `RuntimeTypeSystem_1.GetLoaderModule` to handle type descs
- Fix incorrect reading of `TypeArg` on `ParamTypeDesc` (found while adding unit tests)",32,989,952,[cdac] make contracts tests use mock/placeholder target instead of actual target (issue_ref)- separate helpers for testing an actual contract descriptor from helpers for mock memory - tests/helpers for the contract descriptor are now under the folder- make all contracts tests use the mock target instead of creating a contract descriptor and using the - update root namespaces from -> to match assembly name
dotnet/runtime,975f4ea5fc9bd39141d07eb78333a0e04ac688a6,"JIT: Improve containment for widening intrinsics (#109474)

* improve containment for widening intrinsics

* apply formatting patch

* tidying

* use tuple type for load size factor

* apply formatting patch

* fix build

* whitespace

* revert emitter changes",2024-11-21 23:23:34+00:00,Clinton Ingram,1,35f2b1309a6380f1c8e3edfe1589307fd2a3e1d1,"Add GFNI Intrinsics (#109537)

* add GFNI intrinsics

* add tests

* rename file

* add missing tests and AOT handling

* fix build

* fix test result",1,91,119,jit: improve containment for widening intrinsics (issue_ref)* improve containment for widening intrinsics* apply formatting patch* tidying* use tuple type for load size factor* apply formatting patch* fix build* whitespace* revert emitter changes
dotnet/runtime,7fe4e4fc17d98e501725550007810152df8cef1b,JIT: Fix JITDUMP null dereference during value numbering (#110066),2024-11-21 23:45:35+00:00,Aman Khalid,1,4d7a5a09dc62ecb6a91331468c79084499624ccd,JIT: Fix loop index printing (#110080),1,1,1,jit: fix jitdump null dereference during value numbering (issue_ref)
dotnet/runtime,35f2b1309a6380f1c8e3edfe1589307fd2a3e1d1,"Add GFNI Intrinsics (#109537)

* add GFNI intrinsics

* add tests

* rename file

* add missing tests and AOT handling

* fix build

* fix test result",2024-11-22 04:01:20+00:00,Clinton Ingram,1,12afdedd8050847aa90473e254fa782f54360990,"Fix `GetHardwareIntrinsicId` on 32bit platforms (#110238)

AFAIK methods on the nested X64/Arm64 classes shouldn't be considered intrinsics on 32bit platforms since they are as relevant as e.g. WASM intrinsics. This should fix widespread runtime-nativeaot-outerloop failure on x86. I think this regressed in #109137.",43,1338,128,add gfni intrinsics (issue_ref)* add gfni intrinsics* add tests* rename file* add missing tests and aot handling* fix build* fix test result
dotnet/runtime,3208c2705480c8c0e4232f7d1c5169114cf198ef,"[main] Update dependencies from dotnet/roslyn-analyzers (#109221)

* Update dependencies from https://github.com/dotnet/roslyn-analyzers build 20241024.1

Microsoft.CodeAnalysis.Analyzers , Microsoft.CodeAnalysis.NetAnalyzers
 From Version 3.12.0-beta1.24516.1 -> To Version 3.12.0-beta1.24524.1

* Update dependencies from https://github.com/dotnet/roslyn-analyzers build 20241027.1

Microsoft.CodeAnalysis.Analyzers , Microsoft.CodeAnalysis.NetAnalyzers
 From Version 3.12.0-beta1.24516.1 -> To Version 3.12.0-beta1.24527.1

* Update dependencies from https://github.com/dotnet/roslyn-analyzers build 20241109.1

Microsoft.CodeAnalysis.Analyzers , Microsoft.CodeAnalysis.NetAnalyzers
 From Version 3.12.0-beta1.24516.1 -> To Version 3.12.0-beta1.24559.1

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Stephen Toub <stoub@microsoft.com>
Co-authored-by: Alexander Köplinger <alex.koeplinger@outlook.com>",2024-11-22 08:40:46+00:00,dotnet-maestro[bot],0,,,2,6,6,"[main] update dependencies from dotnet/roslyn-analyzers (issue_ref)* update dependencies from build 20241024.1microsoft.codeanalysis.analyzers , microsoft.codeanalysis.netanalyzers from version 3.12.0-beta1.24516.1 -> to version 3.12.0-beta1.24524.1* update dependencies from build 20241027.1microsoft.codeanalysis.analyzers , microsoft.codeanalysis.netanalyzers from version 3.12.0-beta1.24516.1 -> to version 3.12.0-beta1.24527.1* update dependencies from build 20241109.1microsoft.codeanalysis.analyzers , microsoft.codeanalysis.netanalyzers from version 3.12.0-beta1.24516.1 -> to version 3.12.0-beta1.24559.1---------"
dotnet/runtime,8a360e7588a714c441248852a772e70c446f1f7b,"[main] Update dependencies from 6 repositories (#109477)

* Update dependencies from https://github.com/dotnet/icu build 20241101.1

Microsoft.NETCore.Runtime.ICU.Transport
 From Version 10.0.0-alpha.1.24531.1 -> To Version 10.0.0-alpha.1.24551.1

* Update dependencies from https://github.com/dotnet/runtime build 20241103.1

Microsoft.SourceBuild.Intermediate.runtime.linux-x64 , Microsoft.NET.Sdk.IL , Microsoft.NETCore.App.Runtime.win-x64 , Microsoft.NETCore.ILAsm , runtime.native.System.IO.Ports , System.Reflection.Metadata , System.Reflection.MetadataLoadContext , System.Text.Json
 From Version 10.0.0-alpha.1.24527.3 -> To Version 10.0.0-alpha.1.24553.1

* Update dependencies from https://github.com/dotnet/icu build 20241104.2

Microsoft.NETCore.Runtime.ICU.Transport
 From Version 10.0.0-alpha.1.24531.1 -> To Version 10.0.0-alpha.1.24554.2

* Update dependencies from https://github.com/dotnet/runtime-assets build 20241104.1

Microsoft.DotNet.CilStrip.Sources , System.ComponentModel.TypeConverter.TestData , System.Data.Common.TestData , System.Drawing.Common.TestData , System.Formats.Tar.TestData , System.IO.Compression.TestData , System.IO.Packaging.TestData , System.Net.TestData , System.Private.Runtime.UnicodeData , System.Runtime.Numerics.TestData , System.Runtime.TimeZoneData , System.Security.Cryptography.X509Certificates.TestData , System.Text.RegularExpressions.TestData , System.Windows.Extensions.TestData
 From Version 10.0.0-beta.24530.1 -> To Version 10.0.0-beta.24554.1

* Update dependencies from https://github.com/dotnet/hotreload-utils build 20241104.1

Microsoft.DotNet.HotReload.Utils.Generator.BuildTool
 From Version 10.0.0-alpha.0.24529.1 -> To Version 10.0.0-alpha.0.24554.1

* Update dependencies from https://github.com/dotnet/cecil build 20241104.3

Microsoft.SourceBuild.Intermediate.cecil , Microsoft.DotNet.Cecil
 From Version 0.11.5-alpha.24521.1 -> To Version 0.11.5-alpha.24554.3

* Update dependencies from https://github.com/dotnet/source-build-externals build 20241104.1

Microsoft.SourceBuild.Intermediate.source-build-externals
 From Version 10.0.0-alpha.1.24528.1 -> To Version 10.0.0-alpha.1.24554.1

* Update dependencies from https://github.com/dotnet/runtime build 20241110.2

Microsoft.SourceBuild.Intermediate.runtime.linux-x64 , Microsoft.NET.Sdk.IL , Microsoft.NETCore.App.Runtime.win-x64 , Microsoft.NETCore.ILAsm , runtime.native.System.IO.Ports , System.Reflection.Metadata , System.Reflection.MetadataLoadContext , System.Text.Json
 From Version 10.0.0-alpha.1.24527.3 -> To Version 10.0.0-alpha.1.24560.2

* Update dependencies from https://github.com/dotnet/icu build 20241111.2

Microsoft.NETCore.Runtime.ICU.Transport
 From Version 10.0.0-alpha.1.24531.1 -> To Version 10.0.0-alpha.1.24561.2

* Update dependencies from https://github.com/dotnet/runtime-assets build 20241111.1

Microsoft.DotNet.CilStrip.Sources , System.ComponentModel.TypeConverter.TestData , System.Data.Common.TestData , System.Drawing.Common.TestData , System.Formats.Tar.TestData , System.IO.Compression.TestData , System.IO.Packaging.TestData , System.Net.TestData , System.Private.Runtime.UnicodeData , System.Runtime.Numerics.TestData , System.Runtime.TimeZoneData , System.Security.Cryptography.X509Certificates.TestData , System.Text.RegularExpressions.TestData , System.Windows.Extensions.TestData
 From Version 10.0.0-beta.24530.1 -> To Version 10.0.0-beta.24561.1

* Update dependencies from https://github.com/dotnet/hotreload-utils build 20241111.1

Microsoft.DotNet.HotReload.Utils.Generator.BuildTool
 From Version 10.0.0-alpha.0.24529.1 -> To Version 10.0.0-alpha.0.24561.1

* Update dependencies from https://github.com/dotnet/cecil build 20241111.1

Microsoft.SourceBuild.Intermediate.cecil , Microsoft.DotNet.Cecil
 From Version 0.11.5-alpha.24521.1 -> To Version 0.11.5-alpha.24561.1

* Update dependencies from https://github.com/dotnet/source-build-externals build 20241111.2

Microsoft.SourceBuild.Intermediate.source-build-externals
 From Version 10.0.0-alpha.1.24528.1 -> To Version 10.0.0-alpha.1.24561.2

* Update dependencies from https://github.com/dotnet/runtime build 20241114.7

Microsoft.SourceBuild.Intermediate.runtime.linux-x64 , Microsoft.NET.Sdk.IL , Microsoft.NETCore.App.Runtime.win-x64 , Microsoft.NETCore.ILAsm , runtime.native.System.IO.Ports , System.Reflection.Metadata , System.Reflection.MetadataLoadContext , System.Text.Json
 From Version 10.0.0-alpha.1.24527.3 -> To Version 10.0.0-alpha.1.24564.7

* Update dependencies from https://github.com/dotnet/runtime build 20241115.3

Microsoft.SourceBuild.Intermediate.runtime.linux-x64 , Microsoft.NET.Sdk.IL , Microsoft.NETCore.App.Runtime.win-x64 , Microsoft.NETCore.ILAsm , runtime.native.System.IO.Ports , System.Reflection.Metadata , System.Reflection.MetadataLoadContext , System.Text.Json
 From Version 10.0.0-alpha.1.24527.3 -> To Version 10.0.0-alpha.1.24565.3

* Update dependencies from https://github.com/dotnet/icu build 20241118.3

Microsoft.NETCore.Runtime.ICU.Transport
 From Version 10.0.0-alpha.1.24531.1 -> To Version 10.0.0-alpha.1.24568.3

* Update dependencies from https://github.com/dotnet/runtime-assets build 20241118.1

Microsoft.DotNet.CilStrip.Sources , System.ComponentModel.TypeConverter.TestData , System.Data.Common.TestData , System.Drawing.Common.TestData , System.Formats.Tar.TestData , System.IO.Compression.TestData , System.IO.Packaging.TestData , System.Net.TestData , System.Private.Runtime.UnicodeData , System.Runtime.Numerics.TestData , System.Runtime.TimeZoneData , System.Security.Cryptography.X509Certificates.TestData , System.Text.RegularExpressions.TestData , System.Windows.Extensions.TestData
 From Version 10.0.0-beta.24530.1 -> To Version 10.0.0-beta.24568.1

* Update dependencies from https://github.com/dotnet/hotreload-utils build 20241118.1

Microsoft.DotNet.HotReload.Utils.Generator.BuildTool
 From Version 10.0.0-alpha.0.24529.1 -> To Version 10.0.0-alpha.0.24568.1

* Update dependencies from https://github.com/dotnet/cecil build 20241118.1

Microsoft.SourceBuild.Intermediate.cecil , Microsoft.DotNet.Cecil
 From Version 0.11.5-alpha.24521.1 -> To Version 0.11.5-alpha.24568.1

* Update dependencies from https://github.com/dotnet/source-build-externals build 20241118.1

Microsoft.SourceBuild.Intermediate.source-build-externals
 From Version 10.0.0-alpha.1.24528.1 -> To Version 10.0.0-alpha.1.24568.1

* Update dependencies from https://github.com/dotnet/cecil build 20241119.4

Microsoft.SourceBuild.Intermediate.cecil , Microsoft.DotNet.Cecil
 From Version 0.11.5-alpha.24521.1 -> To Version 0.11.5-alpha.24569.4

* Update Versions.props

* Update dependencies from https://github.com/dotnet/runtime-assets build 20241118.1

Microsoft.NET.HostModel.TestData
 From Version 10.0.0-beta.24522.1 -> To Version 10.0.0-beta.24568.1

* Update dependencies from https://github.com/dotnet/runtime-assets build 20241121.1

Microsoft.DotNet.CilStrip.Sources , Microsoft.NET.HostModel.TestData , System.ComponentModel.TypeConverter.TestData , System.Data.Common.TestData , System.Drawing.Common.TestData , System.Formats.Tar.TestData , System.IO.Compression.TestData , System.IO.Packaging.TestData , System.Net.TestData , System.Private.Runtime.UnicodeData , System.Runtime.Numerics.TestData , System.Runtime.TimeZoneData , System.Security.Cryptography.X509Certificates.TestData , System.Text.RegularExpressions.TestData , System.Windows.Extensions.TestData
 From Version 10.0.0-beta.24530.1 -> To Version 10.0.0-beta.24571.1

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Alexander Köplinger <alex.koeplinger@outlook.com>",2024-11-22 08:42:39+00:00,dotnet-maestro[bot],1,45b75201f3703414ad4fbbc883adf6e378d8f2f9,"Bump versions of maintenance-packages dependencies consumed in runtime (#108806)

* Bump dependency versions of packages that now ship out of maintenance-packages (preview)

- Microsoft.Bcl.HashCode
- System.Buffers
- System.Memory
- System.Threading.Tasks.Extensions
- System.Runtime.CompilerServices.Unsafe

* Workaround name conflict for MathF: See https://github.com/dotnet/roslyn/issues/71442 We refer to MathF from
a comment which hits this bug problem in Roslyn where it thinks it's
ambiguous because visibility is not considered when resolving cref's in
doc comments.
* Permit maintenance-packages prebuilts
* Suppress CS0618 on site in System.Data.Common.Tests - 'Sql*' is obsolete: 'Use the Microsoft.Data.SqlClient package instead.
---------
Co-authored-by: Eric StJohn <ericstj@microsoft.com>
Co-authored-by: Viktor Hofer <viktor.hofer@microsoft.com>
Co-authored-by: Alexander Köplinger <alex.koeplinger@outlook.com>",3,83,81,"[main] update dependencies from 6 repositories (issue_ref)* update dependencies from build 20241101.1microsoft.netcore.runtime.icu.transport from version 10.0.0-alpha.1.24531.1 -> to version 10.0.0-alpha.1.24551.1* update dependencies from build 20241103.1microsoft.sourcebuild.intermediate.runtime.linux-x64 , microsoft.net.sdk.il , microsoft.netcore.app.runtime.win-x64 , microsoft.netcore.ilasm , runtime.native.system.io.ports , system.reflection.metadata , system.reflection.metadataloadcontext , system.text.json from version 10.0.0-alpha.1.24527.3 -> to version 10.0.0-alpha.1.24553.1* update dependencies from build 20241104.2microsoft.netcore.runtime.icu.transport from version 10.0.0-alpha.1.24531.1 -> to version 10.0.0-alpha.1.24554.2* update dependencies from build 20241104.1microsoft.dotnet.cilstrip.sources , system.componentmodel.typeconverter.testdata , system.data.common.testdata , system.drawing.common.testdata , system.formats.tar.testdata , system.io.compression.testdata , system.io.packaging.testdata , system.net.testdata , system.private.runtime.unicodedata , system.runtime.numerics.testdata , system.runtime.timezonedata , system.security.cryptography.x509certificates.testdata , system.text.regularexpressions.testdata , system.windows.extensions.testdata from version 10.0.0-beta.24530.1 -> to version 10.0.0-beta.24554.1* update dependencies from build 20241104.1microsoft.dotnet.hotreload.utils.generator.buildtool from version 10.0.0-alpha.0.24529.1 -> to version 10.0.0-alpha.0.24554.1* update dependencies from build 20241104.3microsoft.sourcebuild.intermediate.cecil , microsoft.dotnet.cecil from version 0.11.5-alpha.24521.1 -> to version 0.11.5-alpha.24554.3* update dependencies from build 20241104.1microsoft.sourcebuild.intermediate.source-build-externals from version 10.0.0-alpha.1.24528.1 -> to version 10.0.0-alpha.1.24554.1* update dependencies from build 20241110.2microsoft.sourcebuild.intermediate.runtime.linux-x64 , microsoft.net.sdk.il , microsoft.netcore.app.runtime.win-x64 , microsoft.netcore.ilasm , runtime.native.system.io.ports , system.reflection.metadata , system.reflection.metadataloadcontext , system.text.json from version 10.0.0-alpha.1.24527.3 -> to version 10.0.0-alpha.1.24560.2* update dependencies from build 20241111.2microsoft.netcore.runtime.icu.transport from version 10.0.0-alpha.1.24531.1 -> to version 10.0.0-alpha.1.24561.2* update dependencies from build 20241111.1microsoft.dotnet.cilstrip.sources , system.componentmodel.typeconverter.testdata , system.data.common.testdata , system.drawing.common.testdata , system.formats.tar.testdata , system.io.compression.testdata , system.io.packaging.testdata , system.net.testdata , system.private.runtime.unicodedata , system.runtime.numerics.testdata , system.runtime.timezonedata , system.security.cryptography.x509certificates.testdata , system.text.regularexpressions.testdata , system.windows.extensions.testdata from version 10.0.0-beta.24530.1 -> to version 10.0.0-beta.24561.1* update dependencies from build 20241111.1microsoft.dotnet.hotreload.utils.generator.buildtool from version 10.0.0-alpha.0.24529.1 -> to version 10.0.0-alpha.0.24561.1* update dependencies from build 20241111.1microsoft.sourcebuild.intermediate.cecil , microsoft.dotnet.cecil from version 0.11.5-alpha.24521.1 -> to version 0.11.5-alpha.24561.1* update dependencies from build 20241111.2microsoft.sourcebuild.intermediate.source-build-externals from version 10.0.0-alpha.1.24528.1 -> to version 10.0.0-alpha.1.24561.2* update dependencies from build 20241114.7microsoft.sourcebuild.intermediate.runtime.linux-x64 , microsoft.net.sdk.il , microsoft.netcore.app.runtime.win-x64 , microsoft.netcore.ilasm , runtime.native.system.io.ports , system.reflection.metadata , system.reflection.metadataloadcontext , system.text.json from version 10.0.0-alpha.1.24527.3 -> to version 10.0.0-alpha.1.24564.7* update dependencies from build 20241115.3microsoft.sourcebuild.intermediate.runtime.linux-x64 , microsoft.net.sdk.il , microsoft.netcore.app.runtime.win-x64 , microsoft.netcore.ilasm , runtime.native.system.io.ports , system.reflection.metadata , system.reflection.metadataloadcontext , system.text.json from version 10.0.0-alpha.1.24527.3 -> to version 10.0.0-alpha.1.24565.3* update dependencies from build 20241118.3microsoft.netcore.runtime.icu.transport from version 10.0.0-alpha.1.24531.1 -> to version 10.0.0-alpha.1.24568.3* update dependencies from build 20241118.1microsoft.dotnet.cilstrip.sources , system.componentmodel.typeconverter.testdata , system.data.common.testdata , system.drawing.common.testdata , system.formats.tar.testdata , system.io.compression.testdata , system.io.packaging.testdata , system.net.testdata , system.private.runtime.unicodedata , system.runtime.numerics.testdata , system.runtime.timezonedata , system.security.cryptography.x509certificates.testdata , system.text.regularexpressions.testdata , system.windows.extensions.testdata from version 10.0.0-beta.24530.1 -> to version 10.0.0-beta.24568.1* update dependencies from build 20241118.1microsoft.dotnet.hotreload.utils.generator.buildtool from version 10.0.0-alpha.0.24529.1 -> to version 10.0.0-alpha.0.24568.1* update dependencies from build 20241118.1microsoft.sourcebuild.intermediate.cecil , microsoft.dotnet.cecil from version 0.11.5-alpha.24521.1 -> to version 0.11.5-alpha.24568.1* update dependencies from build 20241118.1microsoft.sourcebuild.intermediate.source-build-externals from version 10.0.0-alpha.1.24528.1 -> to version 10.0.0-alpha.1.24568.1* update dependencies from build 20241119.4microsoft.sourcebuild.intermediate.cecil , microsoft.dotnet.cecil from version 0.11.5-alpha.24521.1 -> to version 0.11.5-alpha.24569.4* update versions.props* update dependencies from build 20241118.1microsoft.net.hostmodel.testdata from version 10.0.0-beta.24522.1 -> to version 10.0.0-beta.24568.1* update dependencies from build 20241121.1microsoft.dotnet.cilstrip.sources , microsoft.net.hostmodel.testdata , system.componentmodel.typeconverter.testdata , system.data.common.testdata , system.drawing.common.testdata , system.formats.tar.testdata , system.io.compression.testdata , system.io.packaging.testdata , system.net.testdata , system.private.runtime.unicodedata , system.runtime.numerics.testdata , system.runtime.timezonedata , system.security.cryptography.x509certificates.testdata , system.text.regularexpressions.testdata , system.windows.extensions.testdata from version 10.0.0-beta.24530.1 -> to version 10.0.0-beta.24571.1---------"
dotnet/runtime,6717d71fca1fac5f70fd2f8cda107d8c4320ab6a,"Update dependencies from https://github.com/dotnet/source-build-reference-packages build 20241121.2 (#110071)

Microsoft.SourceBuild.Intermediate.source-build-reference-packages
 From Version 10.0.0-alpha.1.24561.2 -> To Version 10.0.0-alpha.1.24571.2

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2024-11-22 08:44:20+00:00,dotnet-maestro[bot],1,d86f770312d0d0e5c0eeab6e20b8a5d6f5d38d7d,"Remove dotnet9 nuget feeds (#109149)

All the dependencies are on the dotnet10 feeds now.

Fixes https://github.com/dotnet/runtime/issues/106593",1,2,2,update dependencies from build 20241121.2 (issue_ref)microsoft.sourcebuild.intermediate.source-build-reference-packages from version 10.0.0-alpha.1.24561.2 -> to version 10.0.0-alpha.1.24571.2
dotnet/runtime,fe7062386e7c2f96b1dee17f91e71e0276fb6d41,"JIT: Use reaching definitions in CSE to update conservative VNs (#109959)

Now that CSE always inserts into SSA we can update it to make use of the
reaching definition information that it has access to. CSE already spent
effort to track some extra information to try to do this, which we can
remove.

- Remove `optCSECheckedBoundMap`: this was used by CSE to try to update
  conservative VNs of ancestor bounds checks. This is unnecessary since
  all descendants of the CSE definitions should get the same
  conservative VNs automatically now.
- Remove `CSEdsc::defConservNormVN`; this was used to update
  conservative VNs in the single-def case, which again is unnecessary
  now.

Making this change requires a bit of refactoring to the incremental SSA
builder. Before this PR the builder takes all defs and all uses and then
inserts everything into SSA. After this change the builder is used in a
multi-step process as follows:
1. All definitions are added with `IncrementalSsaBuilder::InsertDef`
2. The definitions are finalized with
   `IncrementalSsaBuilder::FinalizeDefs`
3. Uses are inserted (one by one) with
   `IncrementalSsaBuilder::InsertUse`. No finalization are necessary;
   each use is directly put into SSA as a result of calling this
   method.

The refactoring allows CSE to use the incremental SSA builder such that
it can access reaching definition information for each of the uses as
part of making replacements. However, this still requires some
refactoring such that CSE performs replacements of all defs before
performing the replacements of all uses.

Additionally, this PR fixes various incorrect VN updating made by CSE.

VN and CSE still track VNs that are interesting bounds check. However,
VN was sometimes inserting VNs with exception sets into the set, which
is not useful (the consumers always use normal VNs when querying the
set). This PR fixes VN to insert the normal VN instead.

Fix #109745",2024-11-22 09:14:35+00:00,Jakob Botsch Nielsen,1,0170d78578a04206542f32e4db3eaa88a5384973,"JIT: Use any reaching def for unreachable uses in incremental SSA builder (#110077)

There really is no correct reaching definition in this case, so any reaching
definition will do here. This matches what happens normally in the JIT when
various phases optimize control flow after SSA has been built without removing
the now-unreachable blocks.

Also give unreachable stores an SSA number.

Fix #109971",6,391,553,"jit: use reaching definitions in cse to update conservative vns (issue_ref)now that cse always inserts into ssa we can update it to make use of thereaching definition information that it has access to. cse already spenteffort to track some extra information to try to do this, which we canremove.- remove : this was used by cse to try to update conservative vns of ancestor bounds checks. this is unnecessary since all descendants of the cse definitions should get the same conservative vns automatically now.- remove ; this was used to update conservative vns in the single-def case, which again is unnecessary now.making this change requires a bit of refactoring to the incremental ssabuilder. before this pr the builder takes all defs and all uses and theninserts everything into ssa. after this change the builder is used in amulti-step process as follows:1. all definitions are added with 2. the definitions are finalized with 3. uses are inserted (one by one) with . no finalization are necessary; each use is directly put into ssa as a result of calling this method.the refactoring allows cse to use the incremental ssa builder such thatit can access reaching definition information for each of the uses aspart of making replacements. however, this still requires somerefactoring such that cse performs replacements of all defs beforeperforming the replacements of all uses.additionally, this pr fixes various incorrect vn updating made by cse.vn and cse still track vns that are interesting bounds check. however,vn was sometimes inserting vns with exception sets into the set, whichis not useful (the consumers always use normal vns when querying theset). this pr fixes vn to insert the normal vn instead.fix issue_ref"
dotnet/runtime,1b8518435bde23806d850ab399828f8f594e95a0,"Enlarge stack overflow handling helper stack (#110068)

The stack overflow coreclr tests started to fail recently. It turns out that
was caused by the size of the helper stack allocated for stack overflow
handling case is no longer sufficient. Moreover, there is a bug in
`Thread::CreateUtilityThread` that calls the `SetThreadName` even when the
thread creation fails.

Close #109499",2024-11-22 09:27:23+00:00,Jan Vorlicek,1,ea4a404ef8890f265780f798e7668d4710259e03,"Fix alternate stack overflow with superpmi (#111709)

* Fix alternate stack overflow with superpmi

The superpmi-shim-collector shared library registers sigsegv handler
so that it can flush out the logged data in case the JIT crashes
due to some null reference. The sigsegv handler of the superpmi then
calls the previous handler, which is the one of coreclr. Both of these
handlers run on the alternate stack. Each sigsegv handler has stack
frame of about 0xd70 bytes mostly due to the `SignalHandlerWorkerReturnPoint`
structure that contains `CONTEXT` structure.
The alternate stack size that we allocate is then on the tipping point
of not being sufficient and some variation on how much of the alternate
stack is used by the unix kernel causes it to tip over in some cases.
This started to happen on x64 Linux after we've added the APX registers
to the context.

The problem actually happens due to the `SwitchStackAndExecuteHandler`
being inlined into the `sigsegv_handler`. That moves the large
`SignalHandlerWorkerReturnPoint` structure to the frame of the
`sigsegv_handler`.

This change fixes the problem by marking the
`SwitchStackAndExecuteHandler` as noinline. That makes the
`sigsegv_handler` frame significantly smaller.

Close #111707

* Add comment based on PR feedback",2,7,4,"enlarge stack overflow handling helper stack (issue_ref)the stack overflow coreclr tests started to fail recently. it turns out thatwas caused by the size of the helper stack allocated for stack overflowhandling case is no longer sufficient. moreover, there is a bug in that calls the even when thethread creation fails.close issue_ref"
dotnet/runtime,b5bdce27f23539e38b917e37476b5ce685813435,"Fold ""X relop 0"" in assertprop (#110076)",2024-11-22 13:56:08+00:00,Egor Bogatov,0,,,1,38,1,"fold ""x relop 0"" in assertprop (issue_ref)"
dotnet/runtime,0b87acc72578628c5f4cff5808ebdf2aaf9de2b2,Avoid exception when parsing AD path for port number (#109977),2024-11-22 15:30:31+00:00,Steve Harter,0,,,1,16,3,avoid exception when parsing ad path for port number (issue_ref)
dotnet/runtime,eed57c3ede7832d80b34bdf70ac2b66b44e9e437,"Skip ENOSYS filter in numa init (#110082)

* Check for EPERM in numa init

* Apply suggestions from code review",2024-11-22 16:29:06+00:00,Adeel Mujahid,0,,,1,1,1,skip enosys filter in numa init (issue_ref)* check for eperm in numa init* apply suggestions from code review
dotnet/runtime,35e23f7216bb7d0c3adfa2217bce35fbc447941e,Disable ALCTest due to GC Hole (#109985),2024-11-22 20:32:55+00:00,Mitchell Hwang,0,,,1,2,0,disable alctest due to gc hole (issue_ref)
dotnet/runtime,f1332ab0d82ee0e21ca387cbd1c8a87c5dfa4906,"JIT: filter local assertion set (#110091)

During `optAssertionProp_Lcl{Fld,Var}`, only consider assertions involving the local var.",2024-11-23 00:36:06+00:00,Andy Ayers,0,,,1,16,3,"jit: filter local assertion set (issue_ref)during , only consider assertions involving the local var."
dotnet/runtime,03498891fcfde3aca87741c0dc6eb27d48ea9310,"JIT: implied Boolean range assertions for local prop (#109481)

If morph sees an assignment of 0/1 to a local, have it generate a [0..1] range
assertion in addition to the constant assertion.

This helps morph propagate more Boolean ranges at merges, which allows morph to
elide more casts.

Also, bump up the local assertion table size since morph is now generating more
assertions.",2024-11-25 00:12:36+00:00,Andy Ayers,1,b4923b30e94e3320b58005d40bd878090e923c53,"SPMI: Switch back to unpinned 9.0 SDK for micro benchmarks (#109992)

Also set PERFLAB_TARGET_FRAMEWORKS and fix superpmi.py when it replays during a collection.",4,69,6,"jit: implied boolean range assertions for local prop (issue_ref)if morph sees an assignment of 0/1 to a local, have it generate a [0..1] rangeassertion in addition to the constant assertion.this helps morph propagate more boolean ranges at merges, which allows morph toelide more casts.also, bump up the local assertion table size since morph is now generating moreassertions."
dotnet/runtime,834de07060d09cac5350ffffedc6ddc09bf161dc," Move MonoClass:inlinearray_value out of MonoClass (#109363)

* Moved inlinearray_value to infrequent_data structure in MonoClass
* Move MonoClass:inlinearray_value out of MonoClass, setting explicit value for PROP_INLINEARRAY_VALUE
* Mark mono_class_get_inlinearray_value with MONO_COMPONENT_API for proper export
* Remove obsolete offset for inlinearray_value in MonoClass
* Update Mono offset files with latest versions from build artifacts",2024-11-25 07:05:22+00:00,SAMBIANI Yendoube Ferdinand,1,255baa04f193f1170031d3ca8eeac550752b5db8,"Fixes #108964 [Mono] ves_icall_RuntimeType_GetInterfaces generates add extra Implemented Interface (#113721)

* #108964 [Mono] ves_icall_RuntimeType_GetInterfaces generates an extra Implemented Interface

* Added the regression test

---------

Signed-off-by: Medha Tiwari <medhavns1@gmail.com>",18,90,79,"move monoclass:inlinearray_value out of monoclass (issue_ref)* moved inlinearray_value to infrequent_data structure in monoclass* move monoclass:inlinearray_value out of monoclass, setting explicit value for prop_inlinearray_value* mark mono_class_get_inlinearray_value with mono_component_api for proper export* remove obsolete offset for inlinearray_value in monoclass* update mono offset files with latest versions from build artifacts"
dotnet/runtime,da9381e707c8196dd853388cdde1d2596feb49ef,"Revert ""Fold ""X relop 0"" in assertprop"" (#110129)

* Revert ""Fold ""X relop 0"" in assertprop (#110076)""

This reverts commit b5bdce27f23539e38b917e37476b5ce685813435.

* Dummy edit",2024-11-25 08:09:51+00:00,Jan Kotas,0,,,2,2,39,"revert ""fold ""x relop 0"" in assertprop"" (issue_ref)* revert ""fold ""x relop 0"" in assertprop (issue_ref)""this reverts commit b5bdce27f23539e38b917e37476b5ce685813435.* dummy edit"
dotnet/runtime,53cc1ddeec661d03d65d0e2949f3486e2162d80f,Remove redundant sign/zero extension for SIMD broadcasts (#108824),2024-11-25 08:31:38+00:00,Egor Bogatov,0,,,1,16,0,remove redundant sign/zero extension for simd broadcasts (issue_ref)
dotnet/runtime,d5b6aec3355357190682ef0daa9582bc5a0bb0f4,Use ABI names for floating registers (#109728),2024-11-25 10:09:05+00:00,Tomasz Sowiński,0,,,7,67,88,use abi names for floating registers (issue_ref)
dotnet/runtime,f120ed60cf1694a0fc0cdd9206dce4b5a221769b,"Automated bump of chrome version (#109895)

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>",2024-11-25 12:49:40+00:00,github-actions[bot],0,,,1,4,4,automated bump of chrome version (issue_ref)
dotnet/runtime,15bfb23cb64edd8c368e9ed5572a160ed9590461,"Re-enable trimming of library tests on Apple mobile (#104097)

* Re-enable trimming of library tests on Apple mobile",2024-11-25 14:26:17+00:00,Milos Kotlar,0,,,6,29,4,re-enable trimming of library tests on apple mobile (issue_ref)* re-enable trimming of library tests on apple mobile
dotnet/runtime,f3e28c0dd0d9bcb3ac8c67cd22c098a88bc3fd9d,"Reapply ""Fold ""X relop 0"" in assertprop"" (#110129) (#110142)",2024-11-25 14:34:01+00:00,Egor Bogatov,0,,,2,41,3,"reapply ""fold ""x relop 0"" in assertprop"" (issue_ref) (issue_ref)"
dotnet/runtime,9ec573e967db43a5b0c406ac2cde33d13b752af9,Add LoongArch64 and RISC-V to list of ports (#110144),2024-11-25 14:34:43+00:00,Jakob Botsch Nielsen,0,,,1,2,0,add loongarch64 and risc-v to list of ports (issue_ref)
dotnet/runtime,2a77961ed11bad24827cae767eb3e8860587d629,JIT: call IsVNNeverNegative in IsNeverNegative (#110118),2024-11-25 14:35:47+00:00,Egor Bogatov,1,e7d837da5b1aacd9325a8b8f2214cfaf4d3f0ff6,"Allow optimizing mask conversions on x64 as well (#110195)

* Allow optimizing mask conversions on x64 as well

* Ensure the right operand is accessed on xarch

* Minimally handle CndSel as part of optimizing mask conversions

* Add some additional comments and clean up the logic a bit

* Apply formatting patch",1,11,2,jit: call isvnnevernegative in isnevernegative (issue_ref)
dotnet/runtime,4caf064140aa70e4b917da23546a5cd501d4c2bb,"[Tests] Add more logging for runtime test timeouts (#109998)

* Add more logs

* Flush writers and format active process listing

* Temporarily force timeout

* Revert ""Temporarily force timeout""

This reverts commit 9a775c23b4ba6013d46799709a517b31ef52a7e6.",2024-11-25 15:21:21+00:00,Mitchell Hwang,0,,,2,16,2,"[tests] add more logging for runtime test timeouts (issue_ref)* add more logs* flush writers and format active process listing* temporarily force timeout* revert ""temporarily force timeout""this reverts commit 9a775c23b4ba6013d46799709a517b31ef52a7e6."
dotnet/runtime,1e6311a9795556149b5a051c5f5b2159d5a9765c,JIT: Remove some `fgRenumberBlocks` calls (#110026),2024-11-25 16:57:49+00:00,Aman Khalid,1,7ccf49137b4ffdc15ce67a4267ffd5ba66fa7ea8,"JIT: enable removal of try/catch if the try can't throw. (#110273)

If no tree in the try region of a try/catch can throw, then
we can remove the try and delete the catch.

If no tree in the try region of a try/finally can throw, we can
remove the try and inline the finally. This slightly generalizes
the empty-try/finally opt we have been doing for a long time.
(We should do something similar for try/fault, but don't, yet).

Since these optimization passes are cheap, and opportunities
for them arise after other optimizations and unblock subsequent
optimizations, run them early, middle, and late.

Resolves #107191.

I expect we'll see more of these cases in the future, say if
we unblock cloning of loops with EH.",8,7,57,jit: remove some calls (issue_ref)
dotnet/runtime,8f68b59723bfabe168dad34d4db29d31c85b195f,"DATAS BGC thread synchronization fix (#109804)

this problem with BGC thread synchronization is similar to the SVR GC one I fixed but has its own complications due to the fact BGC threads are only created on demands. 

it can cause the following symptoms -

+ deadlock because a BGC thread is erroneously terminated so then the next BGC join cannot finish
+ AV because a BGC thread could be seeing settings.concurrent as true and actually running blocking GC code!

I moved setting the idle event code to be inside a GC instead of outside because we don't necessarily trigger a BGC in-between HC changes. and if we don't, we'd need to compensate for the idle count that we deducted and this is difficult to track. moving this to the place where we already decided to do a BGC makes it much simpler. 

I am setting all the required idle events sequentially instead of per heap (there isn't a convenient way to set it per heap without introducing yet more sync cost) which does incur some perf cost - however this cost is small and we only need to pay for it when all the following conditions are true - 1) we actually changed HC; 2) we did do a BGC that observed this HC change; 3) we need to wake up threads that participated in the last BGC.

also added some stress code to help with reproing the problem and stressing the new code; otherwise it's very difficult to repro this kind of problems.",2024-11-25 22:09:10+00:00,Maoni Stephens,1,2d6ea8de12a9f1aad9724a911d201137e5339c4b,"Added a fix for the build failure when STRESS_DYNAMIC_HEAP_COUNT is defined. (#110506)

* Fix build break for DATAS Stress Mode

* Removed stress heap dynamic",3,177,14,"datas bgc thread synchronization fix (issue_ref)this problem with bgc thread synchronization is similar to the svr gc one i fixed but has its own complications due to the fact bgc threads are only created on demands. it can cause the following symptoms -+ deadlock because a bgc thread is erroneously terminated so then the next bgc join cannot finish+ av because a bgc thread could be seeing settings.concurrent as true and actually running blocking gc code!i moved setting the idle event code to be inside a gc instead of outside because we don't necessarily trigger a bgc in-between hc changes. and if we don't, we'd need to compensate for the idle count that we deducted and this is difficult to track. moving this to the place where we already decided to do a bgc makes it much simpler. i am setting all the required idle events sequentially instead of per heap (there isn't a convenient way to set it per heap without introducing yet more sync cost) which does incur some perf cost - however this cost is small and we only need to pay for it when all the following conditions are true - 1) we actually changed hc; 2) we did do a bgc that observed this hc change; 3) we need to wake up threads that participated in the last bgc.also added some stress code to help with reproing the problem and stressing the new code; otherwise it's very difficult to repro this kind of problems."
dotnet/runtime,45bd1185767a9850a6135a1467e79c99c740955d,"Add numerical ordering option for string comparison operations (#109861)

Add numerical ordering option for string comparison operations",2024-11-25 23:51:07+00:00,Pranav Senthilnathan,0,,,20,381,47,add numerical ordering option for string comparison operations (issue_ref)add numerical ordering option for string comparison operations
dotnet/runtime,aaa7ba8e937e9de51d8011a65a0a308e9d88210f,"Remove Helper Method Frames (HMF) from Reflection (#109996)

Convert RuntimeMethodHandle.GetDeclaringType() to managed and QCall.
Convert RuntimeTypeHandle.GetElementType() to managed.
Correct nullability in signature and usage.
Convert RuntimeTypeHandle.GetDeclaringType() to managed and QCalls.
Remove GetRuntimeTypeHelper().
Root RuntimeAssembly and RuntimeType constructors.",2024-11-25 23:52:05+00:00,Aaron Robinson,0,,,12,169,191,remove helper method frames (hmf) from reflection (issue_ref)convert runtimemethodhandle.getdeclaringtype() to managed and qcall.convert runtimetypehandle.getelementtype() to managed.correct nullability in signature and usage.convert runtimetypehandle.getdeclaringtype() to managed and qcalls.remove getruntimetypehelper().root runtimeassembly and runtimetype constructors.
dotnet/runtime,17cb8268acc0c2ea7ae0245cb7e2961e4a06e702,"Unhandled exception handler. (#109806)

* unhandled exceptions in Finalizers (Core and AOT)

* catch in threadpool

* handle in threads

* trivial tests

* HandlerThrows

* HandlerRefuses

* NoEffectInMainThread

* Rev PInvoke tests

* make all pri-0 and disable on mono

* use ?.

* whitespaces

* rename unhandledHandler-->UnhandledExceptionHandler

* PR feedback

* define error_t as int

* ref/System.Runtime formatting

* Update src/tests/baseservices/exceptions/UnhandledExceptionHandler/UnhandledTrivial.cs

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2024-11-26 00:02:55+00:00,Vladimir Sadov,0,,,30,1036,125,unhandled exception handler. (issue_ref)* unhandled exceptions in finalizers (core and aot)* catch in threadpool* handle in threads* trivial tests* handlerthrows* handlerrefuses* noeffectinmainthread* rev pinvoke tests* make all pri-0 and disable on mono* use ?.* whitespaces* rename unhandledhandler-->unhandledexceptionhandler* pr feedback* define error_t as int* ref/system.runtime formatting* update src/tests/baseservices/exceptions/unhandledexceptionhandler/unhandledtrivial.cs---------
dotnet/runtime,89adcf9209ef13c9ea598eb0b70ef1a42f02d284,"Add configuration variables. (#109907)

* Add GC configuration to log

* Add GC configuration to log

* Code modification after review

* Code modification after review

* Update src/tests/GC/Stress/Framework/ReliabilityFramework.cs

Co-authored-by: kasperk81 <83082615+kasperk81@users.noreply.github.com>

---------

Co-authored-by: Mukund Raghav Sharma (Moko) <68247673+mrsharm@users.noreply.github.com>
Co-authored-by: kasperk81 <83082615+kasperk81@users.noreply.github.com>",2024-11-26 02:11:33+00:00,Daisy Zhou,0,,,1,8,0,add configuration variables. (issue_ref)* add gc configuration to log* add gc configuration to log* code modification after review* code modification after review* update src/tests/gc/stress/framework/reliabilityframework.cs
dotnet/runtime,354ec46a63440608bda18e2203bb5538e2f8eae6,"Allow hiding `UnmanagedCallersOnly` exports (#110152)

Should fix #109341. We currently rely on the linkerscript not exporting these, now it's a per-assembly compiler switch.",2024-11-26 06:35:12+00:00,Michal Strehovský,1,917d290077f297f8c3f3066776938a67c62e1d80,"Fix native aot outerloop (#110768)

This time I broke it. Do not attempt to generate source link data if we're not generating debug information. Debug information is not in a usable state within the compiler.",11,35,24,"allow hiding exports (issue_ref)should fix issue_ref. we currently rely on the linkerscript not exporting these, now it's a per-assembly compiler switch."
dotnet/runtime,abee17762558f6b4435163fe192c92b9caefde40,"feat: Add Message property to ExperimentalAttribute (#108216)

Co-authored-by: Sergey Papikyan <s.papikyan@tinkoff.ru>
Co-authored-by: Tanner Gooding <tagoo@outlook.com>",2024-11-26 17:38:21+00:00,Sergei Papikian,0,,,3,25,0,feat: add message property to experimentalattribute (issue_ref)
dotnet/runtime,52ae0e9fa4704f02ba9253161d8b092e4919debf,"Stop using LINQ in Tensors (#109415)

Using `IEnumerable<T>` and associated LINQ extensions for numerical processing is not appropriate at this level of the stack. The only remaining use is where the input provided by the user is already an `IEnumerable<T>` and `ToArray` is used to get the required `T[]`, which is fine.",2024-11-26 19:06:37+00:00,Stephen Toub,1,9bededd7314d19c796c4dac40c9ac9e624d88aec,"Fix TensorExtensions.StdDev (#110392)

* Fix TensorExtensions.StdDev

* Add constraint to ref

* Revert ""Add constraint to ref""

This reverts commit f740f503a9ef0b763f71442fd8b4e578142f9c83.

* Revert ""Fix TensorExtensions.StdDev""

This reverts commit c21298471fe1ea272930c3e5427bf986dba275b6.

* Use pow method

* Use existing variable",6,161,61,"stop using linq in tensors (issue_ref)using and associated linq extensions for numerical processing is not appropriate at this level of the stack. the only remaining use is where the input provided by the user is already an and is used to get the required , which is fine."
dotnet/runtime,a538054ec46ecf3587fc6fc08603324fdfdb77b2,"Use the managed signer to remove the code signature from singlefile bundles (#110063)

Since the bundler uses `codesign` to remove the signature, we end up with an invalid signature for single file osx executables on non-Mac hosts rather than no signature at all. This PR updates the bundler to use the managed signer to remove the signature.

Signing bundles requires a little more thought and effort since the headers/load commands need to be updated to include the bundle data in the file. This will be done in a separate PR.",2024-11-26 20:38:22+00:00,Jackson Schuster,0,,,6,67,34,"use the managed signer to remove the code signature from singlefile bundles (issue_ref)since the bundler uses to remove the signature, we end up with an invalid signature for single file osx executables on non-mac hosts rather than no signature at all. this pr updates the bundler to use the managed signer to remove the signature.signing bundles requires a little more thought and effort since the headers/load commands need to be updated to include the bundle data in the file. this will be done in a separate pr."
dotnet/runtime,d58ffd13c2efcd6fb599bb4bf48386f0f22cbb8f,"[cdac] Handle hot/cold map lookup in `ExecutionManager.ReadyToRunJitManager.GetMethodInfo` (#110087)

Implement the hot/cold lookup logic for `ExecutionManager.ReadyToRunJitManager.GetMethodInfo`. Basic logic is now:
1. Check if the address is in a thunk for READYTORUN_HELPER_DelayLoad_MethodCall
2. Find the runtime function entry corresponding to the address
    - If the runtime function entry is cold code, find the runtime function entry for the corresponding hot part
3. Look up the MethodDesc for the entry point using the ReadyToRunInfo's hash map
4. Compute the relative offset based the function's start address
    - If the runtime function has a cold part and the address is in the cold part, compute the relative offset based on the size of the hot part and the offset from the start of the cold part 

Sub-bullets of 2 and 4 are the parts added by this change.

Add tests for `ExecutionManager` for getting code blocks and method desc in R2R with hot/cold splitting, runtime functions lookup functionality, and hot/cold map lookup logic.
- Pull out helper for RuntimeFunctions mock memory
- `ExecutionManagerTests` just uses one specific runtime function / unwind info layout
  - The `RuntimeFunctionsTests` handle testing the matrix of different layouts

The `RuntimeFunction` and `UnwindInfo` structures are different depending on the platform. This matters for calculating the function length. To facilitate testing, I pulled out the runtime functions lookup into a helper class. This change puts reading the hot/cold map in a helper class `HotColdLookup`. Having separate helpers (similarly, HashMapLookup and NibbleMap) should let us mock them out for testing if we want - there'd still be some work for how they are created (for example, tests need to be able to provide some instance instead of the contract directly creating the class), but it puts us in a reasonable position.

Manually validated with `!ip2md` (temporarily commented out throwing not implemented for rejit ID requests) for an app published with R2R `--hot-cold-splitting` that we correctly map addresses in cold/hot blocks to hot/cold parts, determine their start addresses and sizes, and return the correct method desc.",2024-11-26 21:52:27+00:00,Elinor Fung,0,,,17,905,147,"[cdac] handle hot/cold map lookup in (issue_ref)implement the hot/cold lookup logic for . basic logic is now:1. check if the address is in a thunk for readytorun_helper_delayload_methodcall2. find the runtime function entry corresponding to the address - if the runtime function entry is cold code, find the runtime function entry for the corresponding hot part3. look up the methoddesc for the entry point using the readytoruninfo's hash map4. compute the relative offset based the function's start address - if the runtime function has a cold part and the address is in the cold part, compute the relative offset based on the size of the hot part and the offset from the start of the cold part sub-bullets of 2 and 4 are the parts added by this change.add tests for for getting code blocks and method desc in r2r with hot/cold splitting, runtime functions lookup functionality, and hot/cold map lookup logic.- pull out helper for runtimefunctions mock memory- just uses one specific runtime function / unwind info layout - the handle testing the matrix of different layoutsthe and structures are different depending on the platform. this matters for calculating the function length. to facilitate testing, i pulled out the runtime functions lookup into a helper class. this change puts reading the hot/cold map in a helper class . having separate helpers (similarly, hashmaplookup and nibblemap) should let us mock them out for testing if we want - there'd still be some work for how they are created (for example, tests need to be able to provide some instance instead of the contract directly creating the class), but it puts us in a reasonable position.manually validated with (temporarily commented out throwing not implemented for rejit id requests) for an app published with r2r that we correctly map addresses in cold/hot blocks to hot/cold parts, determine their start addresses and sizes, and return the correct method desc."
dotnet/runtime,201b1b1ec2b9a7747ddc2f211e5abdda45915918,Add a test to validate hostfxr C API (#110169),2024-11-26 22:02:24+00:00,Adeel Mujahid,0,,,4,32,10,add a test to validate hostfxr c api (issue_ref)
dotnet/runtime,9f1494ae495170645fef186bd92717d8189c8357,"Arm64-PAC: Add encoding for pointer authentication (PAC) instructions (#110160)

* Add encoding for pointer authentication (PAC) instructions

* Update latency and throughput values

* Remove todo",2024-11-26 23:43:41+00:00,SwapnilGaikwad,1,d7347b5bbb5f174d6261952205661eda752c84b7,"Some SVE fixes for code generation (#113860)

* standalone fix to generate sve mov instead of NEON mov

* standalone fix to generate ldr/str when emit_RR is called

* Remove unwanted change

* Do not do sve_mov for scalar variant

* jit format fix",7,173,3,arm64-pac: add encoding for pointer authentication (pac) instructions (issue_ref)* add encoding for pointer authentication (pac) instructions* update latency and throughput values* remove todo
dotnet/runtime,cf7a7444c255e0400f1ab078f85d8e3ad746bfb1,"Replace use of target dependent `TestZ` intrinsic (#104488)

* Replace uses of `TestZ` intrinsic

* remove pragma warning disable IntrinsicsInSystemPrivateCoreLibConditionParsing

* refactor control flow

---------

Co-authored-by: Tanner Gooding <tagoo@outlook.com>",2024-11-27 01:41:48+00:00,xtqqczze,0,,,4,33,46,replace use of target dependent intrinsic (issue_ref)* replace uses of intrinsic* remove pragma warning disable intrinsicsinsystemprivatecorelibconditionparsing* refactor control flow---------
dotnet/runtime,fe3d5b5f7039e9f38f022dac77aeb6f01025b19d,"Automated bump of chrome version (#110114)

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>
Co-authored-by: Ilona Tomkowicz <32700855+ilonatommy@users.noreply.github.com>",2024-11-27 08:29:31+00:00,github-actions[bot],0,,,1,1,1,automated bump of chrome version (issue_ref)
dotnet/runtime,592183aced5dcb6993399a87bd89c7632a664721,[WASIp2] soft debugger via sockets (#109584),2024-11-27 09:18:21+00:00,Pavel Savara,1,e2ca190bd6ac5445df46481b96ce8310978eb491,Fixing assertion when calling get_object_id (#117185),20,125,264,[wasip2] soft debugger via sockets (issue_ref)
dotnet/runtime,e7e8d0d7eb01aa492acad9b777fcd6aa339698d5,"[NRBF] Fixes and fuzzing improvements (#110194)

* Simplify array handling to fix issues with jagged and abstract array types

Jagged arrays in the payload can contain cycles. In that scenario, no value is correct for `ArrayRecord.FlattenedLength`, and `ArrayRecord.GetArray` does not have enough context to know how to handle the cycles. To address these issues, jagged array handling is simplified so that calling code can handle the cycles in the most appropriate way for the application.

Single-dimension arrays can be represented in the payload using abstract types such as `IComparable[]` where the concrete element type is not known. When the concrete element type is known, `ArrayRecord.GetArray` could return either `SZArrayRecord<ClassRecord>` or `SZArrayRecord<object>`; without a concrete type, we need to return something that represents the element abstractly.

1. `ArrayRecord.FlattenedLength` is removed from the API
2. `ArrayRecord.GetArray` now returns `ArrayRecord[]` for jagged arrays instead of trying to populate them
3. `ArrayRecord.GetArray` now returns `SZArrayRecord<SerializationRecord>` for single-dimension arrays instead of either `SZArrayRecord<ClassRecord>` or `SZArrayRecord<object>`

* extend the Fuzzer to consume all possible data exposed by the NrbfDecoder",2024-11-27 10:54:33+00:00,Adam Sitnik,1,84b26c47057859ab4ece6ef2172fcd797a129df6,"[NRBF] Allow the users to decode System.Nullable<UserStruct> (#118276)

* add a failing test that was super hard to extract from the repro

* fix: allow any SystemClass to be represented as ClassWithMembersAndTypes in the payload",35,1855,878,"[nrbf] fixes and fuzzing improvements (issue_ref)* simplify array handling to fix issues with jagged and abstract array typesjagged arrays in the payload can contain cycles. in that scenario, no value is correct for , and does not have enough context to know how to handle the cycles. to address these issues, jagged array handling is simplified so that calling code can handle the cycles in the most appropriate way for the application.single-dimension arrays can be represented in the payload using abstract types such as where the concrete element type is not known. when the concrete element type is known, could return either or ; without a concrete type, we need to return something that represents the element abstractly.1. is removed from the api2. now returns for jagged arrays instead of trying to populate them3. now returns for single-dimension arrays instead of either or * extend the fuzzer to consume all possible data exposed by the nrbfdecoder"
dotnet/runtime,e99dcd7867cbb6b090c76479dc8922839c08c63e,"[mono][interp] Defer compilation in bblocks with unitialized stack (#108731)

* [mono][interp] Add bblock start verbose logging

* [mono][interp] Minor fixes around IL offsets with inlining

* [mono][interp] Defer compilation in bblocks with unitialized stack

Each basic block will have an emit state, not emitted, emitting or emitted. When we reach a new basic block, we will emit code into it only if the stack state is initialized (the stack state of a bblock can be initialized either from the state of the previous bblocks, if it is fallthrough, or from branching from another bblock with initialized state). If we encounter a bblock that doesn't have the state initialized we set a flag so we will retry codegen in an attempt to emit new bblocks.

Once we finish emitting code, we remove all bblocks in not emitted state.

* [mono][interp] Fix obtaining of native offsets when computing protected ranges

Following the change to only emit code in bblocks once we reach them with an initialized stack state, we have the side effect of not processing IL code in dead bblocks. This means that offset_to_bb might actually be null for some IL offsets, so we need to iterate over following il offsets until we find a mapped bblock.

---------

Co-authored-by: Larry Ewing <lewing@microsoft.com>",2024-11-27 18:51:05+00:00,Vlad Brezae,1,ddf67a78018fefc4bee1ca663aad0eea462e02f3,"[mono][interp] Fix broken code attempting to reapply superinstruction optimization (#116069)

For each instruction in a basic block we check for patterns. In a certain case, once we replaced the instruction with a new one, we were attempting to do a loop reiteration by setting `ins = ins->prev` so after the loop reincrements with `ins = ins->next` we check super instruction patterns again for the current instruction. This is broken if `ins` was the first instruction in a basic block, aka `ins->prev` is NULL. This used to be impossible before SSA optimizations, since super instruction pass was applying optimizations in a single basic block only.",3,185,49,"[mono][interp] defer compilation in bblocks with unitialized stack (issue_ref)* [mono][interp] add bblock start verbose logging* [mono][interp] minor fixes around il offsets with inlining* [mono][interp] defer compilation in bblocks with unitialized stackeach basic block will have an emit state, not emitted, emitting or emitted. when we reach a new basic block, we will emit code into it only if the stack state is initialized (the stack state of a bblock can be initialized either from the state of the previous bblocks, if it is fallthrough, or from branching from another bblock with initialized state). if we encounter a bblock that doesn't have the state initialized we set a flag so we will retry codegen in an attempt to emit new bblocks.once we finish emitting code, we remove all bblocks in not emitted state.* [mono][interp] fix obtaining of native offsets when computing protected rangesfollowing the change to only emit code in bblocks once we reach them with an initialized stack state, we have the side effect of not processing il code in dead bblocks. this means that offset_to_bb might actually be null for some il offsets, so we need to iterate over following il offsets until we find a mapped bblock.---------"
dotnet/runtime,96502048a051261b43932db5438541c4a8424ab1,"Added the new distribution list @dotnet/area-type-system-and-startup to the area-owners.md file, and reformatted the table accordingly. (#110200)",2024-11-27 19:01:15+00:00,Ivan Diaz Sanchez,0,,,1,141,141,"added the new distribution list @dotnet/area-type-system-and-startup to the area-owners.md file, and reformatted the table accordingly. (issue_ref)"
dotnet/runtime,ffd1da13b2976c8bd409a7a12f010c061a1e9b16,Test all three custom host headers (#110208),2024-11-27 22:03:48+00:00,Adeel Mujahid,0,,,3,27,14,test all three custom host headers (issue_ref)
dotnet/runtime,50bb0762417d192cf88e81d24eea08118c814b14,"Update dependencies from https://github.com/dotnet/xharness build 20241118.1 (#110153)

Microsoft.DotNet.XHarness.CLI , Microsoft.DotNet.XHarness.TestRunners.Common , Microsoft.DotNet.XHarness.TestRunners.Xunit
 From Version 10.0.0-prerelease.24564.1 -> To Version 10.0.0-prerelease.24568.1

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2024-11-27 22:27:05+00:00,dotnet-maestro[bot],0,,,3,10,10,"update dependencies from build 20241118.1 (issue_ref)microsoft.dotnet.xharness.cli , microsoft.dotnet.xharness.testrunners.common , microsoft.dotnet.xharness.testrunners.xunit from version 10.0.0-prerelease.24564.1 -> to version 10.0.0-prerelease.24568.1"
dotnet/runtime,1b304e4861fc555fd3f0638961e9524202006ed1,"Update dependencies from https://github.com/dotnet/emsdk build 20241125.2 (#110186)

Microsoft.SourceBuild.Intermediate.emsdk , Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport
 From Version 10.0.0-alpha.1.24569.4 -> To Version 10.0.0-alpha.1.24575.2

Dependency coherency updates

runtime.linux-arm64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.linux-x64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.win-arm64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.win-x64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.osx-arm64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.osx-x64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.linux-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.linux-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.linux-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.linux-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.linux-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.linux-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.win-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.win-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.win-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.osx-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.osx-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.osx-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.osx-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.osx-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.osx-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools
 From Version 19.1.0-alpha.1.24565.1 -> To Version 19.1.0-alpha.1.24569.1 (parent: Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Larry Ewing <lewing@microsoft.com>",2024-11-27 22:31:00+00:00,dotnet-maestro[bot],0,,,2,92,92,"update dependencies from build 20241125.2 (issue_ref)microsoft.sourcebuild.intermediate.emsdk , microsoft.net.workload.emscripten.current.manifest-10.0.100.transport from version 10.0.0-alpha.1.24569.4 -> to version 10.0.0-alpha.1.24575.2dependency coherency updatesruntime.linux-arm64.microsoft.netcore.runtime.jit.tools,runtime.linux-x64.microsoft.netcore.runtime.jit.tools,runtime.linux-musl-arm64.microsoft.netcore.runtime.jit.tools,runtime.linux-musl-x64.microsoft.netcore.runtime.jit.tools,runtime.win-arm64.microsoft.netcore.runtime.jit.tools,runtime.win-x64.microsoft.netcore.runtime.jit.tools,runtime.osx-arm64.microsoft.netcore.runtime.jit.tools,runtime.osx-x64.microsoft.netcore.runtime.jit.tools,runtime.linux-arm64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.linux-arm64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.linux-arm64.microsoft.netcore.runtime.mono.llvm.tools,runtime.linux-musl-arm64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.linux-musl-arm64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.linux-musl-arm64.microsoft.netcore.runtime.mono.llvm.tools,runtime.linux-x64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.linux-x64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.linux-x64.microsoft.netcore.runtime.mono.llvm.tools,runtime.linux-musl-x64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.linux-musl-x64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.linux-musl-x64.microsoft.netcore.runtime.mono.llvm.tools,runtime.win-x64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.win-x64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.win-x64.microsoft.netcore.runtime.mono.llvm.tools,runtime.osx-arm64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.osx-arm64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.osx-arm64.microsoft.netcore.runtime.mono.llvm.tools,runtime.osx-x64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.osx-x64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.osx-x64.microsoft.netcore.runtime.mono.llvm.tools from version 19.1.0-alpha.1.24565.1 -> to version 19.1.0-alpha.1.24569.1 (parent: microsoft.net.workload.emscripten.current.manifest-10.0.100.transport"
dotnet/runtime,af3393d3991b7aab608e514e4a4be3ae2bbafbf8,Add TimeSpan.FromMilliseconds(long) overload (#110234),2024-11-28 00:34:08+00:00,Tarek Mahmoud Sayed,1,3c6dfd70f4acabdd9e36f4ef413369ebd66adc7a,"Fixed typos in header comment of TimeSpan.cs  (#117621)

* Fixed typo ""leap-years"" instead of ""leap years"".

* Delete obsolete WinRT comment

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",3,32,4,add timespan.frommilliseconds(long) overload (issue_ref)
dotnet/runtime,a25130bdd494ca5b009c4738abd1744501869178,"[MT][Firefox] Disable multithreading tests on Firefox (#110155)

* Disable MT on FF.",2024-11-28 10:32:43+00:00,Ilona Tomkowicz,0,,,1,0,1,[mt][firefox] disable multithreading tests on firefox (issue_ref)* disable mt on ff.
dotnet/runtime,3bf24595d97b041d90a3753332d87a35dcf35283,"JIT: Remove reference to ""CSE candidate"" in morph (#110218)

CSE no longer reinvokes morph, and the checks for CSE were removed in
07f15ef. However, a few comments were left over, so clean those up.",2024-11-28 13:38:25+00:00,Jakob Botsch Nielsen,1,949c3ec60bc6914aa2763c24deb7adad9d90841c,"JIT: Allow strength reducing to GCD of IVs (#110222)

This adds support for strength reduction to create a new primary IV that
is the GCD of several IVs found in the loop. When the same index is used
to access arrays of different sizes we will often see the IV being
multiplied by different values; however, it is usually still profitable
to strength reduce to the GCD of the step values and then ""recover"" the
final IV by scaling.

Example:
```csharp
public static void Foo()
{
    string puzzle = ""003020600900305001001806400008102900700000008006708200002609500800203009005010300"";
    int[] board = new int[81];

    for (int i = 0; i < puzzle.Length; i++)
    {
        board[i] = puzzle[i] - '0';
    }
}
```

Codegen diff for loop:
```diff
        xor      ecx, ecx
+       mov      edx, 81

 G_M24659_IG03:
-       mov      edx, ecx
-       movzx    r8, word  ptr [rbx+2*rdx+0x10]
+       movzx    r8, word  ptr [rbx+rcx+0x10]
        add      r8d, -48
-       mov      dword ptr [rax+4*rdx+0x10], r8d
-       inc      ecx
-       cmp      ecx, 81
-       jl       SHORT G_M24659_IG03
-						;; size=24 bbWeight=3.96 PerfScore 19.80
+       mov      dword ptr [rax+2*rcx+0x10], r8d
+       add      rcx, 2
+       dec      edx
+       jne      SHORT G_M24659_IG03
+						;; size=23 bbWeight=3.96 PerfScore 18.81
```

A similar diff in ``System.Linq.Enumerable+EnumerableSorter`2[System.__Canon,System.Decimal]:ComputeKeys(System.__Canon[],int)``:
```diff
+       xor      edx, edx
 G_M57524_IG05:
-       mov      edx, r15d
-       mov      r8, gword ptr [rbx+8*rdx+0x10]
+       mov      r8, gword ptr [rbx+rdx+0x10]
        vmovups  xmm0, xmmword ptr [r8+0x20]
        vmovups  xmmword ptr [rsp+0x28], xmm0
-       shl      rdx, 4
        vmovups  xmm0, xmmword ptr [rsp+0x28]
-       vmovups  xmmword ptr [r14+rdx+0x10], xmm0
-       inc      r15d
-       cmp      r13d, r15d
-       jg       SHORT G_M57524_IG05
-						;; size=45 bbWeight=75.73 PerfScore 1079.10
+       vmovups  xmmword ptr [r14+2*rdx+0x10], xmm0
+       add      rdx, 8
+       dec      r13d
+       jne      SHORT G_M57524_IG05
+						;; size=39 bbWeight=75.73 PerfScore 1022.31
```

Fix #102068
Fix #105241",1,3,16,"jit: remove reference to ""cse candidate"" in morph (issue_ref)cse no longer reinvokes morph, and the checks for cse were removed in07f15ef. however, a few comments were left over, so clean those up."
dotnet/runtime,3dd006a2af445a24e34275adebb0389259d6e83f,"[mono][sgen] Add separate card mark function to be used with debug (#109698)

When marking cards for a non-array object or a an element vt in an object, it is enough to mark a card for any address within that object/vt because they are always fully scanned. Cardtable consistency checks are not accounting for this detail and it is difficult to have it implemented. Instead, when having such debug flags enabled, we use an explicit approach where every single card is being marked.",2024-11-28 14:20:52+00:00,Vlad Brezae,0,,,3,32,4,"[mono][sgen] add separate card mark function to be used with debug (issue_ref)when marking cards for a non-array object or a an element vt in an object, it is enough to mark a card for any address within that object/vt because they are always fully scanned. cardtable consistency checks are not accounting for this detail and it is difficult to have it implemented. instead, when having such debug flags enabled, we use an explicit approach where every single card is being marked."
dotnet/runtime,1309b71b324bdae9e7c7c4d56bd22e9e5aed128a,Add winget to windows-requirements.md (#110233),2024-11-28 16:21:26+00:00,Egor Bogatov,0,,,1,11,0,add winget to windows-requirements.md (issue_ref)
dotnet/runtime,c6bebf08c6e94a88a6bf76e80bfc361daa295be4,"JIT: Remove `fgRenumberBlocks` calls in loop opt phases (#110227)

Follow-up to #110026. This required a small refactor of FlowGraphNaturalLoop::VisitLoopBlocksLexical to remove its bbNum checks.",2024-11-28 16:26:35+00:00,Aman Khalid,0,,,3,7,29,jit: remove calls in loop opt phases (issue_ref)follow-up to issue_ref. this required a small refactor of flowgraphnaturalloop::visitloopblockslexical to remove its bbnum checks.
dotnet/runtime,d6eb35426ebdb09ee5c754aa9afb9ad6e96a3dec,Sync list of short stacks for VMR build (#110246),2024-11-28 16:45:56+00:00,Alexander Köplinger,0,,,1,6,0,sync list of short stacks for vmr build (issue_ref)
dotnet/runtime,979d7119020ab28d567cf0c6b890aec08f6c5334,"Only define _XOPEN_SOURCE in configurecompiler.cmake (for consistency) (#110092)

* Only define _XOPEN_SOURCE in configurecompiler.cmake (for consistency)

* Apply _DARWIN_C_SOURCE universally for all Apple platforms",2024-11-30 16:40:23+00:00,Filip Navara,0,,,3,12,12,only define _xopen_source in configurecompiler.cmake (for consistency) (issue_ref)* only define _xopen_source in configurecompiler.cmake (for consistency)* apply _darwin_c_source universally for all apple platforms
dotnet/runtime,1db85e870ff87166d7b8fbe547cb42fdaadd71fd,"Update unhandled exception handler API to match approved shape. (#110254)

* Update unhandled exception handler API to match approved shape.

* Update the correct API in the reference assembly.

* IsHandledByGlobalHandler  helper

---------

Co-authored-by: vsadov <8218165+VSadov@users.noreply.github.com>
Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2024-11-30 17:03:50+00:00,Theodore Tsirpanis,1,a5af0ab77caa5ed7a6844fc5f4f459e5edfe23d3,"Normalization APIs using the spans (#110465)

* Normalization APIs using the spans

* Address the feedback

* Update src/libraries/System.Private.CoreLib/src/System/Globalization/Normalization.Icu.cs

Co-authored-by: Günther Foidl <gue@korporal.at>

* Fix comment indent

---------

Co-authored-by: Günther Foidl <gue@korporal.at>
Co-authored-by: Eric StJohn <ericstj@microsoft.com>",8,17,16,update unhandled exception handler api to match approved shape. (issue_ref)* update unhandled exception handler api to match approved shape.* update the correct api in the reference assembly.* ishandledbyglobalhandler helper---------
dotnet/runtime,e7d837da5b1aacd9325a8b8f2214cfaf4d3f0ff6,"Allow optimizing mask conversions on x64 as well (#110195)

* Allow optimizing mask conversions on x64 as well

* Ensure the right operand is accessed on xarch

* Minimally handle CndSel as part of optimizing mask conversions

* Add some additional comments and clean up the logic a bit

* Apply formatting patch",2024-11-30 17:49:42+00:00,Tanner Gooding,1,f377332dfd3ebe0b36631d37c1e555eece1bc9bb,"JIT: Avoid comparing regnums in `GenTreeHWIntrinsic::Equals` (#110535)

Register numbers are not part of the syntax of JIT IR, so it does not
need to be compared for the purpose of this function. At the same time
we can hit asserts for nodes that aren't multi-reg nodes.

Fix #110316",4,149,46,allow optimizing mask conversions on x64 as well (issue_ref)* allow optimizing mask conversions on x64 as well* ensure the right operand is accessed on xarch* minimally handle cndsel as part of optimizing mask conversions* add some additional comments and clean up the logic a bit* apply formatting patch
dotnet/runtime,7ccf49137b4ffdc15ce67a4267ffd5ba66fa7ea8,"JIT: enable removal of try/catch if the try can't throw. (#110273)

If no tree in the try region of a try/catch can throw, then
we can remove the try and delete the catch.

If no tree in the try region of a try/finally can throw, we can
remove the try and inline the finally. This slightly generalizes
the empty-try/finally opt we have been doing for a long time.
(We should do something similar for try/fault, but don't, yet).

Since these optimization passes are cheap, and opportunities
for them arise after other optimizations and unblock subsequent
optimizations, run them early, middle, and late.

Resolves #107191.

I expect we'll see more of these cases in the future, say if
we unblock cloning of loops with EH.",2024-12-02 15:41:04+00:00,Andy Ayers,1,758bbc6d6912b2f7782964607c8680b742742b7e,"JIT: Update profile data for continuation block of removed call-finally (#110327)

Fixes #110317. Follow-up to #109792. When removing a call-finally pair associated with an empty try region, decrement any flow from the pair into the continuation block, and add any flow from the now-inlined finally region's exit(s) into the continuation block.",7,501,94,"jit: enable removal of try/catch if the try can't throw. (issue_ref)if no tree in the try region of a try/catch can throw, thenwe can remove the try and delete the catch.if no tree in the try region of a try/finally can throw, we canremove the try and inline the finally. this slightly generalizesthe empty-try/finally opt we have been doing for a long time.(we should do something similar for try/fault, but don't, yet).since these optimization passes are cheap, and opportunitiesfor them arise after other optimizations and unblock subsequentoptimizations, run them early, middle, and late.resolves issue_ref.i expect we'll see more of these cases in the future, say ifwe unblock cloning of loops with eh."
dotnet/runtime,342936c5a88653f0f622e9d6cb727a0e59279b31,"Disable GFNI tests for NAOT (#110250)

* disable GFNI tests for NAOT

* Apply suggestions from code review

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>
Co-authored-by: Michal Strehovský <MichalStrehovsky@users.noreply.github.com>",2024-12-02 17:07:29+00:00,Clinton Ingram,0,,,2,8,0,disable gfni tests for naot (issue_ref)* disable gfni tests for naot* apply suggestions from code review---------
dotnet/runtime,80d8c46f071d9e3d8ede2d98cb2c918d9b0d7d31,"Rename {CLR,DOTNET}_ICU/OPENSSL_VERSION_OVERRIDE (#110259)

* Rename {CLR,DOTNET}_ICU_VERSION_OVERRIDE

* Rename DOTNET_OPENSSL_VERSION_OVERRIDE",2024-12-02 21:42:15+00:00,Adeel Mujahid,0,,,2,4,4,"rename {clr,dotnet}_icu/openssl_version_override (issue_ref)* rename {clr,dotnet}_icu_version_override* rename dotnet_openssl_version_override"
dotnet/runtime,8106febcc640083f43b22b1a831f98a0ab86175e,Delete shared ThrowHelper used only a single test (#110313),2024-12-02 22:21:38+00:00,Stephen Toub,0,,,2,14,47,delete shared throwhelper used only a single test (issue_ref)
dotnet/runtime,05fa8813a7774890b46e60109d8cd6d4c853a014,"JIT: Avoid mask<->vector optimization for masks used in unhandled ways (#110307)

When a local is used as a return buffer it is not address exposed, so
the address-exposure check was not sufficient. Add checks for
`LCL_ADDR`, `LCL_FLD` and `STORE_LCL_FLD` to make sure any use of a mask
local that is not converted disqualifies it from participating in the
optimization.

Also avoid doing some work for locals that are not SIMD/mask typed
(common case). Previously we would do some unnecessary hash table
lookups and other things in these cases.",2024-12-03 08:42:06+00:00,Jakob Botsch Nielsen,1,aa9cd3b3234ef5bfe7d6037016bd7e6b8f991a5e,"Ensure that we don't try and optimize masks for promoted fields (#110485)

* Ensure that we don't try and optimize masks for promoted fields

* Add using for Xunit

* Fix test name

* Make the xunit analyzer happy",3,130,35,"jit: avoid mask<->vector optimization for masks used in unhandled ways (issue_ref)when a local is used as a return buffer it is not address exposed, sothe address-exposure check was not sufficient. add checks for, and to make sure any use of a masklocal that is not converted disqualifies it from participating in theoptimization.also avoid doing some work for locals that are not simd/mask typed(common case). previously we would do some unnecessary hash tablelookups and other things in these cases."
dotnet/runtime,b3ec8ee97fb42853b9f725e578becd2fbfc1d709,"The mask of shift amount in `IShiftOperators<byte, int, byte>` should be 7 (#103900)

* The mask of shift amount in IShiftOperators<byte, int, byte> should be 7

* Fix mask of shift amount

---------

Co-authored-by: Tanner Gooding <tagoo@outlook.com>",2024-12-03 18:20:56+00:00,skyoxZ,1,4695f3f0e2fcfdd94602a21d6ef0670fc85f6d2a,Fix comments in `Latin1CharInfo` (#110829),10,90,15,"the mask of shift amount in should be 7 (issue_ref)* the mask of shift amount in ishiftoperators<byte, int, byte> should be 7* fix mask of shift amount---------"
dotnet/runtime,226ee0323375946d91cbac300bf83433539ae36c,Disable transitions test GC Stress (#109986),2024-12-03 19:15:29+00:00,Mitchell Hwang,0,,,1,2,0,disable transitions test gc stress (issue_ref)
dotnet/runtime,6d12a304b3068f8a9308a1aec4f3b95dd636a693,"JIT: Do greedy 4-opt for backward jumps in 3-opt layout (#110277)

Part of #107749. Follow-up to #103450. Greedy 3-opt (i.e. an implementation that requires each move to be profitable on its own) is not well-suited for discovering profitable moves for backward jumps, as such movement requires an unrelated move to first place the source block lexically behind the destination block. Thus, the 3-opt implementation added in #103450 incorporates a 4-opt move for backward jumps, where we partition 1) before the destination block, 2) before the source block, and 3) directly after the source block. This 4-opt implementation can be expanded to search for the best cut point between the destination and source blocks to maximize its efficacy.",2024-12-03 21:25:35+00:00,Aman Khalid,0,,,2,102,43,"jit: do greedy 4-opt for backward jumps in 3-opt layout (issue_ref)part of issue_ref. follow-up to issue_ref. greedy 3-opt (i.e. an implementation that requires each move to be profitable on its own) is not well-suited for discovering profitable moves for backward jumps, as such movement requires an unrelated move to first place the source block lexically behind the destination block. thus, the 3-opt implementation added in issue_ref incorporates a 4-opt move for backward jumps, where we partition 1) before the destination block, 2) before the source block, and 3) directly after the source block. this 4-opt implementation can be expanded to search for the best cut point between the destination and source blocks to maximize its efficacy."
dotnet/runtime,d592d11eb882b887ea386f73f925eeb772def2da,"Remove Helper Method Frames (HMF) from Reflection (#110211)

Create general purpose RuntimeTypeHandle.InternalAlloc() and RuntimeTypeHandle.InternalAllocNoChecks().
Convert RuntimeMethodHandle::ReboxToNullable() to managed.
Convert RuntimeMethodHandle::ReboxFromNullable() to managed.
Convert RuntimeMethodHandle::InvokeMethod() to QCall.",2024-12-03 21:45:19+00:00,Aaron Robinson,1,7f9dab93f84b23c20fe9dae40d1fdc751869ffec,Fix test under JIT stress (#110538),14,188,200,remove helper method frames (hmf) from reflection (issue_ref)create general purpose runtimetypehandle.internalalloc() and runtimetypehandle.internalallocnochecks().convert runtimemethodhandle::reboxtonullable() to managed.convert runtimemethodhandle::reboxfromnullable() to managed.convert runtimemethodhandle::invokemethod() to qcall.
dotnet/runtime,60a29248bbb501dd037d2984daea3635cf20b412,"Delete System.Array special case in TryResolveTypeNameForCreateInstanceAndMark (#110345)

https://github.com/dotnet/runtime/pull/110166/files/3b95e0b3c6a403567c6baf3d42f301db170735c5#r1867075215",2024-12-03 22:12:58+00:00,Michal Strehovský,0,,,1,1,2,delete system.array special case in tryresolvetypenameforcreateinstanceandmark (issue_ref)#r1867075215
dotnet/runtime,9084fe5c2238142213377209344d88e99ff3e02a,"Update dependencies from https://github.com/dotnet/source-build-reference-packages build 20241126.2 (#110312)

Microsoft.SourceBuild.Intermediate.source-build-reference-packages
 From Version 10.0.0-alpha.1.24571.2 -> To Version 10.0.557602

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2024-12-04 04:15:04+00:00,dotnet-maestro[bot],0,,,1,2,2,update dependencies from build 20241126.2 (issue_ref)microsoft.sourcebuild.intermediate.source-build-reference-packages from version 10.0.0-alpha.1.24571.2 -> to version 10.0.557602
dotnet/runtime,7dbe407ee8f709e7d37e81e185605d328208bc72,"Update dependencies from https://github.com/dotnet/xharness build 20241125.1 (#110309)

Microsoft.DotNet.XHarness.CLI , Microsoft.DotNet.XHarness.TestRunners.Common , Microsoft.DotNet.XHarness.TestRunners.Xunit
 From Version 10.0.0-prerelease.24568.1 -> To Version 10.0.0-prerelease.24575.1

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2024-12-04 04:17:33+00:00,dotnet-maestro[bot],0,,,3,10,10,"update dependencies from build 20241125.1 (issue_ref)microsoft.dotnet.xharness.cli , microsoft.dotnet.xharness.testrunners.common , microsoft.dotnet.xharness.testrunners.xunit from version 10.0.0-prerelease.24568.1 -> to version 10.0.0-prerelease.24575.1"
dotnet/runtime,bc23f6336c5ac73ab8b8777cec0a582667181f7b,Update ilc-architecture DependencyGraphViewer (#110314),2024-12-04 05:31:31+00:00,Weihan Li,0,,,1,1,1,update ilc-architecture dependencygraphviewer (issue_ref)
dotnet/runtime,e165eb495bbf851f9a69af774f0c6f48c4638d2b,"Move GetRefAny (with FCThrow) to managed (#110344)

* Move GetRefAny (with FCThrow) to managed

* Move impl. to TypeReference",2024-12-04 15:04:48+00:00,Adeel Mujahid,0,,,4,23,21,move getrefany (with fcthrow) to managed (issue_ref)* move getrefany (with fcthrow) to managed* move impl. to typereference
dotnet/runtime,65aa602328f8aeab8d7776e4099f033a997c4ce2,"[Profiler][Docs] Cleanup Profiler Pinning documentation (#110375)

* [Profiler][Docs] Update remaining instances of BEGIN/END_PIN_PROFILER

* [Profiler][Docs] Update profiler pinning comments",2024-12-04 15:09:49+00:00,Mitchell Hwang,0,,,4,30,27,[profiler][docs] cleanup profiler pinning documentation (issue_ref)* [profiler][docs] update remaining instances of begin/end_pin_profiler* [profiler][docs] update profiler pinning comments
dotnet/runtime,1fc82225bc3ca4b1ce5dfe852ba3ab1b22d483a6,"[cDAC] Implement ReJIT portion of SOSDacImpl::GetMethodDescData (#109936)

* Modifies CodeVersions contract
* Adds to ReJIT contract
* Adds contract extension methods as helpers for when functionality can be implemented in terms of versioned APIs.",2024-12-04 15:46:34+00:00,Max Charlamb,0,,,18,1057,229,[cdac] implement rejit portion of sosdacimpl::getmethoddescdata (issue_ref)* modifies codeversions contract* adds to rejit contract* adds contract extension methods as helpers for when functionality can be implemented in terms of versioned apis.
dotnet/runtime,f7974ea6fa005dc2e9c19e7e04cb22f50656347e,"JIT_CountProfile: Avoid BSR instruction for low counts (#110258)

The JIT_CountProfile32 and JIT_CountProfile64 functions used BitScanReverse functions to compute the log2 of counters, and then compare that to a threshold. This changes it so that the counter is directly compared to `1<<threshold` instead.",2024-12-04 17:06:35+00:00,Simon Felix,0,,,1,14,20,"jit_countprofile: avoid bsr instruction for low counts (issue_ref)the jit_countprofile32 and jit_countprofile64 functions used bitscanreverse functions to compute the log2 of counters, and then compare that to a threshold. this changes it so that the counter is directly compared to instead."
dotnet/runtime,6144376b0aee182c07a9183b7ebef04276ecadb8,"JIT: enable cloning of try regions (#110020)

Add a utility to clone a try region and all associated regions.

Test this by enabling duplication of loops with try regions.",2024-12-04 17:08:43+00:00,Andy Ayers,1,f2e5072a4a5114fcf360a299e236039d7032d753,"JIT: Fix ACD updates when a non-enclosing EH region is removed (#110374)

When an EH region is removed, the JIT must make suitable updates to
any existing AddCodeDescs (ACDs). We were missing logic for the case
where the removed region was not the enclosing region of the ACD.

Fixes #110346.",10,2205,55,jit: enable cloning of try regions (issue_ref)add a utility to clone a try region and all associated regions.test this by enabling duplication of loops with try regions.
dotnet/runtime,73877b4c28134aaa70e8cd8c7f54fac53bb1eeaf,"Fix Configuration to throw with ErrorOnUnknownConfiguration option (#110209)

* Fix Configuration to throw with ErrorOnUnknownConfiguration option

* Fix the fired Debug.Assert

* address the feedback",2024-12-04 17:32:55+00:00,Tarek Mahmoud Sayed,1,d94bcbde28dc4aa79dd6f2451ba71bbe752f5066,"Fix config source gen with Dictionary with nullable Enum value (#115350)

* Fix config source gen with Dictionary with nullable Enum value

* Update src/libraries/Microsoft.Extensions.Configuration.Binder/gen/Emitter/CoreBindingHelpers.cs

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>

* Update the fix to match the collection binding

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2,33,4,fix configuration to throw with erroronunknownconfiguration option (issue_ref)* fix configuration to throw with erroronunknownconfiguration option* fix the fired debug.assert* address the feedback
dotnet/runtime,1361d1eaae52d64d3aef8a06ccdf9cea41848be7,"JIT: Allow flow edges to be considered more than once by 3-opt (#109534)

Part of #107749. Follow-up to #103450. If 3-opt fails to create fallthrough on an edge because it isn't initially profitable, allow the edge to be considered again, in case future moves make it profitable.",2024-12-04 18:25:55+00:00,Aman Khalid,0,,,1,3,3,"jit: allow flow edges to be considered more than once by 3-opt (issue_ref)part of issue_ref. follow-up to issue_ref. if 3-opt fails to create fallthrough on an edge because it isn't initially profitable, allow the edge to be considered again, in case future moves make it profitable."
dotnet/runtime,8672eddc4f6399c8d376f1440a3982d7e3e910d1,Allow AltJit for matched VM to also use otherwise unsupported ISAs (#110320),2024-12-04 18:38:06+00:00,Tanner Gooding,0,,,1,6,1,allow altjit for matched vm to also use otherwise unsupported isas (issue_ref)
dotnet/runtime,11031c4171b5a46eedcae777fe805e7d29a94411,"Avoid an allocation in BigInteger.Parse(""-2147483648"") (#104666)

Co-authored-by: Dan Moseley <danmose@microsoft.com>",2024-12-04 19:03:05+00:00,kzrnm,1,2959612eb37b02d968316e3f1492989d92eb62af,"Fix `BigInteger.Rotate{Left,Right}` for backport (#112878)

* Add BigInteger.Rotate* tests

* Fix BigInteger.Rotate*

* avoid stackalloc

* Add comment",2,29,9,"avoid an allocation in biginteger.parse(""-2147483648"") (issue_ref)"
dotnet/runtime,99814311b0af050b5a90d53c563d1baaf674745a,Add doc on asset licensing model (#110418),2024-12-04 21:43:39+00:00,Rich Lander,0,,,1,29,0,add doc on asset licensing model (issue_ref)
dotnet/runtime,e81c18601a3924c59fad3c887429ceba4e9b066a,"Adds Linux CMake presets for coreclr (#110029)

* Adds Linux CMake presets for coreclr

* Adds arm64 Linux presets",2024-12-04 21:56:43+00:00,Matt Bolitho,0,,,1,69,0,adds linux cmake presets for coreclr (issue_ref)* adds linux cmake presets for coreclr* adds arm64 linux presets
dotnet/runtime,2cdfd0a350bd119ddc822e1bd0d4bc42f9040616,Fix recursion issue found in 109779 (#110379),2024-12-04 21:57:50+00:00,Mike McLaughlin,1,76a17c63287f32a188bb228540eb131a08e43a1f,"Remove .NET Framework-era remoteable wait subsystem (#109754)

* Remove code relating to the old (Framework-only) remotable wait subsystem. This is unrelated to the named mutex implementation we have today (which uses an entirely different shared memory mechanism)

* Now that these object aren't shared, rename the types

* Fix double comma

* Fix build failures and remove more dead code around PID tracking and delegated signaling (which I already removed)

* Remove shared data tracking

* Remove ""initialize from remote object"" routines

* PR feedback",1,5,2,fix recursion issue found in 109779 (issue_ref)
dotnet/runtime,b7713a4718241a7a78c0967d697e5722adaf4321,"Help finding Brotli headers when doing VMR build under FreeBSD (#110079)

* Find to help Brotli headers when doing VMR build under FreeBSD

* Use existing approach

* Use CLR_CMAKE_HOST_FREEBSD",2024-12-04 22:05:45+00:00,Szczepan Ćwikliński,1,2f8151352a759e682de49dab04cb5081185f2454,"Install zlib in the IlcFrameworkNative folder instead of alongside the runtime (#110378)

* Install zlib in the IlcFrameworkNative folder instead of alongside the runtime

As the runtime doesn't use zlib, it makes more sense for NativeAOT for zlib to be shipped alongside the Compression.Native library. We don't have any shipping scenarios with Mono where we use the non-system zlib, so we should be able to figure something out for dev-innerloop-only scenarios if needed.

* Fix check for UseSystemZlib

* wasm and android fixes

* Add support for pthreads when building zlib-ng in libraries partition for wasm.",1,3,0,help finding brotli headers when doing vmr build under freebsd (issue_ref)* find to help brotli headers when doing vmr build under freebsd* use existing approach* use clr_cmake_host_freebsd
dotnet/runtime,4780c09169ef4ac8187ab4037414f0a554b32bf4,"Increase smoke testing around HW intrinsics (#110385)

These often fail in outerloop. We should catch this before the code is checked in.",2024-12-04 22:51:30+00:00,Michal Strehovský,0,,,2,2,1,increase smoke testing around hw intrinsics (issue_ref)these often fail in outerloop. we should catch this before the code is checked in.
dotnet/runtime,14078925eccb57738df37c6bc09ae494ee22af14,"Add support for emitting Source Link data (#110270)

Fixes #81415.

We read the source link data from the portable PDB, map file names to URLs, and emit into a JSON file. Then pass the JSON file to link.exe. We make no effort to make the source link data more compact. We could attempt to find common prefixes and emit as `*` but I left that as a future potential extension. The extra data in the expanded form is nothing compared to the size of native PDBs.",2024-12-04 23:05:41+00:00,Michal Strehovský,1,3bbd4037e17e2fc4701a286f3eee18bbbadc8c67,"Treat `--sourcelink` as output option (#111144)

Fixes `--make-repro-path`-generated ZIP files.",10,316,0,"add support for emitting source link data (issue_ref)fixes issue_ref.we read the source link data from the portable pdb, map file names to urls, and emit into a json file. then pass the json file to link.exe. we make no effort to make the source link data more compact. we could attempt to find common prefixes and emit as but i left that as a future potential extension. the extra data in the expanded form is nothing compared to the size of native pdbs."
dotnet/runtime,76a17c63287f32a188bb228540eb131a08e43a1f,"Remove .NET Framework-era remoteable wait subsystem (#109754)

* Remove code relating to the old (Framework-only) remotable wait subsystem. This is unrelated to the named mutex implementation we have today (which uses an entirely different shared memory mechanism)

* Now that these object aren't shared, rename the types

* Fix double comma

* Fix build failures and remove more dead code around PID tracking and delegated signaling (which I already removed)

* Remove shared data tracking

* Remove ""initialize from remote object"" routines

* PR feedback",2024-12-04 23:18:30+00:00,Jeremy Koritzinsky,1,3e5b44a569e056fc2752d0f82e5827427b74bffb,"Remove FindFirstFile, FindNextFile and FindClose from PAL (#110797)

* Remove FindFirstFile, FindNextFile and FindClose from PAL

Also remove the related tests

* Modify superpmi mcs tool to not to use Find*File on Unix

* Fix access after free for string in error path",29,961,4488,"remove .net framework-era remoteable wait subsystem (issue_ref)* remove code relating to the old (framework-only) remotable wait subsystem. this is unrelated to the named mutex implementation we have today (which uses an entirely different shared memory mechanism)* now that these object aren't shared, rename the types* fix double comma* fix build failures and remove more dead code around pid tracking and delegated signaling (which i already removed)* remove shared data tracking* remove ""initialize from remote object"" routines* pr feedback"
dotnet/runtime,df1eaf934a8437f400a1965488bdbbb0a57bf571,"Only build cdac-build-tool when we need to build runtime (#109719)

Related to #109718.",2024-12-05 05:38:29+00:00,Michal Strehovský,1,6c1447ec22efa4d04540bc4922b2bdca5e2e4b9c,"Remove unused OutputPgoPathForCI target from nativepgo.targets (#114025)

* Remove unused OutputPgoPathForCI target from nativepgo.targets

This was refactored in https://github.com/dotnet/runtime/pull/99179 and we no longer use the AzDO variable to pass around the path to the PGO data file.

* Remove call to target

* Fix typo in nativepgo.targets comments",2,3,5,only build cdac-build-tool when we need to build runtime (issue_ref)related to issue_ref.
dotnet/runtime,e99557baffbe864d624cc1c95c9cbf2eefae684f,"Fix zlib-ng build with cmake 3.31.0 (#110359)

* Fix zlib-ng build with cmake 3.31.0

* Dummy change in JIT

* Use POST_BUILD in add_custom_command

* Normalize paths before install

* Revert dummy change; CI is green

* Update functions.cmake

* Update functions.cmake

* Update src/native/external/zlib-ng/CMakeLists.txt",2024-12-05 09:55:33+00:00,Adeel Mujahid,1,4c7991c9e4548ce9e7b9cd3c0dec47d8e9b46f2b,"Workaround error G6E97C40B (#111459)

* Workaround error G6E97C40B

* Update zlib-ng-version.txt",5,10,19,fix zlib-ng build with cmake 3.31.0 (issue_ref)* fix zlib-ng build with cmake 3.31.0* dummy change in jit* use post_build in add_custom_command* normalize paths before install* revert dummy change; ci is green* update functions.cmake* update functions.cmake* update src/native/external/zlib-ng/cmakelists.txt
dotnet/runtime,223dea5d66a1fd0257b6f4c65ba0fc3caffd4f0e,"Remove Helper Method Frames (HMF) from Reflection (#110377)

Remove HMF from RuntimeFieldHandle.GetLoaderAllocator() and RuntimeMethodHandle.GetLoaderAllocator().
Convert RuntimeTypeHandle.IsEquivalentTo() to QCall.
Convert RuntimeTypeHandle.GetMethodAt() to QCall.
Remove HMF from Signature.GetParameterOffset().
Clean up TypeEquivalence feature defines.
Convert RuntimeTypeHandle.GetArgumentTypesFromFunctionPointer() to QCall.
---------
Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2024-12-05 17:16:19+00:00,Aaron Robinson,0,,,11,170,148,remove helper method frames (hmf) from reflection (issue_ref)remove hmf from runtimefieldhandle.getloaderallocator() and runtimemethodhandle.getloaderallocator().convert runtimetypehandle.isequivalentto() to qcall.convert runtimetypehandle.getmethodat() to qcall.remove hmf from signature.getparameteroffset().clean up typeequivalence feature defines.convert runtimetypehandle.getargumenttypesfromfunctionpointer() to qcall.---------
dotnet/runtime,052ad42c4e651f203da34f59eeca6432599aa8e9,JIT: Always aggressively compact blocks (#109521),2024-12-05 17:19:26+00:00,Aman Khalid,0,,,4,8,14,jit: always aggressively compact blocks (issue_ref)
dotnet/runtime,49ba409d0be30850c8f75f9869b4eb24fc8e3283,"Handle not truncating root folder in CorUnix::InternalCanonicalizeRealPath for all architectures instead of only amd64 (#110425)

We had this handling (of not truncating if the path is right in the root folder `/`) ifdef-ed under `HOST_AMD64` for some reason. As a result, on other architectures we determine that the path doesn't exist and fail to load any assemblies from the root. This change simply removes the ifdef such that we have this handling on all architectures.",2024-12-05 18:19:41+00:00,Elinor Fung,0,,,1,2,6,"handle not truncating root folder in corunix::internalcanonicalizerealpath for all architectures instead of only amd64 (issue_ref)we had this handling (of not truncating if the path is right in the root folder ) ifdef-ed under for some reason. as a result, on other architectures we determine that the path doesn't exist and fail to load any assemblies from the root. this change simply removes the ifdef such that we have this handling on all architectures."
dotnet/runtime,9970e70bb49f4e089a17dcea92882c21834ff4b1,System.DirectoryServices.Protocols: Force using LDAP V3 for SASL binding (#109450),2024-12-05 19:04:21+00:00,Cédric Luthi,0,,,1,2,0,system.directoryservices.protocols: force using ldap v3 for sasl binding (issue_ref)
dotnet/runtime,c3e1bc3a4cf0d828a2f77320dcf850537d5d67c2,PersistedAssemblyBuilder missing methods on generated types (#109320),2024-12-05 19:24:15+00:00,snakex64,1,e417d2bbce348b5f06b2bfe9ed3ab0b190379f24,"Simplify TypeBuilderImpl.MatchesTheFilter (#112464)

Fixes number of corner cases

Contributes to #112344",5,673,19,persistedassemblybuilder missing methods on generated types (issue_ref)
dotnet/runtime,5a5ea3ea91138f6d36691f1a0f6064481823583f,Support step into a tail call (#110334),2024-12-05 20:44:31+00:00,Thays Grazia,1,09eea2a3889189c3242e8135193ff9a095272743,"[debugger] Fix a step that becomes a go (#110484)

* Fixing step becomes a go

* Trying to avoid step that becomes a go

* Adding comments and more protections.

* fixing comment

* Checking if removing this comments, CI failures are gone.

* Adding part of the changes to understand the failures on CI

* Update src/coreclr/debug/ee/controller.cpp

Co-authored-by: mikelle-rogers <45022607+mikelle-rogers@users.noreply.github.com>

* Fixing wrong fix.

---------

Co-authored-by: mikelle-rogers <45022607+mikelle-rogers@users.noreply.github.com>",1,21,4,support step into a tail call (issue_ref)
dotnet/runtime,2f8151352a759e682de49dab04cb5081185f2454,"Install zlib in the IlcFrameworkNative folder instead of alongside the runtime (#110378)

* Install zlib in the IlcFrameworkNative folder instead of alongside the runtime

As the runtime doesn't use zlib, it makes more sense for NativeAOT for zlib to be shipped alongside the Compression.Native library. We don't have any shipping scenarios with Mono where we use the non-system zlib, so we should be able to figure something out for dev-innerloop-only scenarios if needed.

* Fix check for UseSystemZlib

* wasm and android fixes

* Add support for pthreads when building zlib-ng in libraries partition for wasm.",2024-12-05 21:43:38+00:00,Jeremy Koritzinsky,1,5fe72c12cd557197824c2485748c9e9a4af36b46,"Put brotli on the FetchContent plan (Try 2) (#109707)

* Reapply ""Put brotli on the FetchContent plan (#107166)"" (#109108)

This reverts commit b780069abf78978112cb860f9c636f767d0b4437.

* Don't double-install the brotli libs

* Don't try looking up locations for system brotli. Rely on the distro maintainer to set the paths correctly.

Fixes https://github.com/dotnet/runtime/issues/109105

* Install brotli where we install the compression native lib so they're always side-by-side (and we don't need to add it to the Mono build)

* Brotli should get pulled from the same place as Compression.Native

* Fix looking for libbrotlicommon.a on disk to determine if we should use system brotli",6,25,19,"install zlib in the ilcframeworknative folder instead of alongside the runtime (issue_ref)* install zlib in the ilcframeworknative folder instead of alongside the runtimeas the runtime doesn't use zlib, it makes more sense for nativeaot for zlib to be shipped alongside the compression.native library. we don't have any shipping scenarios with mono where we use the non-system zlib, so we should be able to figure something out for dev-innerloop-only scenarios if needed.* fix check for usesystemzlib* wasm and android fixes* add support for pthreads when building zlib-ng in libraries partition for wasm."
dotnet/runtime,2300123cdf9038f24b80b63272f9dafaa39ed5aa,Make `ObjectFactory<T>` covariant (#102553),2024-12-05 22:00:01+00:00,Alireza Habibi,0,,,2,2,2,make covariant (issue_ref)
dotnet/runtime,b5ea4560049fadd4c1f231fef77e3d9e3cd9b3eb,"Switch DirectoryControl to use AsnWriter, AsnDecoder (#101512)",2024-12-05 22:31:16+00:00,Edward Neal,1,5bc50c91bdbea8962708f5ad5d02ec05ffb7b50b,Fix LdapConnection with AuthType.External (#113238),26,990,532,"switch directorycontrol to use asnwriter, asndecoder (issue_ref)"
dotnet/runtime,2c9aaafe07d273a565f577e443fdb0e02543d7d5,Update helix images (#110384),2024-12-05 23:21:02+00:00,Rich Lander,0,,,2,25,26,update helix images (issue_ref)
dotnet/runtime,5fe72c12cd557197824c2485748c9e9a4af36b46,"Put brotli on the FetchContent plan (Try 2) (#109707)

* Reapply ""Put brotli on the FetchContent plan (#107166)"" (#109108)

This reverts commit b780069abf78978112cb860f9c636f767d0b4437.

* Don't double-install the brotli libs

* Don't try looking up locations for system brotli. Rely on the distro maintainer to set the paths correctly.

Fixes https://github.com/dotnet/runtime/issues/109105

* Install brotli where we install the compression native lib so they're always side-by-side (and we don't need to add it to the Mono build)

* Brotli should get pulled from the same place as Compression.Native

* Fix looking for libbrotlicommon.a on disk to determine if we should use system brotli",2024-12-06 00:31:13+00:00,Jeremy Koritzinsky,1,b382a451a967eb16968b65238547e6ee795d9d91,Fix build with -DCLR_CMAKE_USE_SYSTEM_BROTLI=true (#110816),124,2927,80,"put brotli on the fetchcontent plan (try 2) (issue_ref)* reapply ""put brotli on the fetchcontent plan (issue_ref)"" (issue_ref)this reverts commit b780069abf78978112cb860f9c636f767d0b4437.* don't double-install the brotli libs* don't try looking up locations for system brotli. rely on the distro maintainer to set the paths correctly.fixes * install brotli where we install the compression native lib so they're always side-by-side (and we don't need to add it to the mono build)* brotli should get pulled from the same place as compression.native* fix looking for libbrotlicommon.a on disk to determine if we should use system brotli"
dotnet/runtime,bf44aaab18b8f8281264b0ccdd47f8a621514aa2,"Haiku: Initial CoreCLR support (#109580)

* Haiku: Initial CoreCLR support

This contains a part of the code required to build CoreCLR and get
`paltests` to pass on Haiku.

This commit covers `src/coreclr/**`, except the PAL files included
in the previous commit.

Co-authored-by: Jessica Hamilton <jessica.l.hamilton@gmail.com>

* pal: Add back checks for HAVE_CLOCK_THREAD_CPUTIME

This was removed in #103441 but required for Haiku builds.

---------

Co-authored-by: Jessica Hamilton <jessica.l.hamilton@gmail.com>",2024-12-06 00:52:57+00:00,Trung Nguyen,1,47b35bc47e2cf8f43b2cc7f09463b1ec5c0ca7e9,"Fix elfreader for android (#119190)

* Fix elfreader for android.

* Update src/coreclr/debug/dbgutil/elfreader.cpp

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Update src/coreclr/debug/dbgutil/elfreader.cpp

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",16,120,35,"haiku: initial coreclr support (issue_ref)* haiku: initial coreclr supportthis contains a part of the code required to build coreclr and get to pass on haiku.this commit covers , except the pal files includedin the previous commit."
dotnet/runtime,457114c7a4346bce3ef13d6f48c9bd708083efb7,Update area-owners with up-to-date information about community triagers. (#110460),2024-12-06 03:07:32+00:00,Kevin Jones,1,6ab049f6742c43bb07e329fbcb63dacdc84e3916,"Remove FabricBot from area-owners.md (#110525)

We're not using it anymore.
Fixes https://github.com/dotnet/runtime/issues/109961",1,8,1,update area-owners with up-to-date information about community triagers. (issue_ref)
dotnet/runtime,8fca0a156dcbb1eba5c79e387a6d8f924bfdd3a6,"Don't do opportunistic ISA lightup if there are plans to run the AltJit code (#110419)

* Don't do opportunistic ISA lightup if there are plans to run the AltJit code

* Ensure that we can compile in Release builds",2024-12-06 05:44:30+00:00,Tanner Gooding,0,,,1,10,1,don't do opportunistic isa lightup if there are plans to run the altjit code (issue_ref)* don't do opportunistic isa lightup if there are plans to run the altjit code* ensure that we can compile in release builds
dotnet/runtime,19b93ba49659da1f75735b08976bb1d42f991ad2,"[main] Update dependencies from dotnet/arcade (#110117)

* Update dependencies from https://github.com/dotnet/arcade build 20241122.3

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.24570.4 -> To Version 10.0.0-beta.24572.3

* Update dependencies from https://github.com/dotnet/arcade build 20241125.1

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.24570.4 -> To Version 10.0.0-beta.24575.1

* Update dependencies from https://github.com/dotnet/arcade build 20241126.1

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.24570.4 -> To Version 10.0.0-beta.24576.1

* Update dependencies from https://github.com/dotnet/arcade build 20241127.1

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.24570.4 -> To Version 10.0.0-beta.24577.1

* Update dependencies from https://github.com/dotnet/arcade build 20241128.2

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.24570.4 -> To Version 10.0.0-beta.24578.2

* Update dependencies from https://github.com/dotnet/arcade build 20241204.4

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.24570.4 -> To Version 10.0.0-beta.24604.4

* Update dependencies from https://github.com/dotnet/arcade build 20241205.1

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.24570.4 -> To Version 10.0.0-beta.24605.1

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2024-12-06 15:35:53+00:00,dotnet-maestro[bot],1,dfb2b8a861fc97ce90c8f31c886d4d27c5b36f46,"Update dependencies from dotnet/roslyn (#110105)

* Update dependencies from https://github.com/dotnet/roslyn build 20241122.2

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-2.24570.4 -> To Version 4.13.0-2.24572.2

* Update dependencies from https://github.com/dotnet/roslyn build 20241122.15

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-2.24570.4 -> To Version 4.13.0-2.24572.15

* Update dependencies from https://github.com/dotnet/roslyn build 20241124.5

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-2.24570.4 -> To Version 4.13.0-2.24574.5

* Update dependencies from https://github.com/dotnet/roslyn build 20241125.18

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-2.24570.4 -> To Version 4.13.0-3.24575.18

* Update dependencies from https://github.com/dotnet/roslyn build 20241127.2

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-2.24570.4 -> To Version 4.13.0-3.24577.2

* Update dependencies from https://github.com/dotnet/roslyn build 20241128.2

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-2.24570.4 -> To Version 4.13.0-3.24578.2

* Update dependencies from https://github.com/dotnet/roslyn build 20241128.3

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-2.24570.4 -> To Version 4.13.0-3.24578.3

* Update dependencies from https://github.com/dotnet/roslyn build 20241130.1

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-2.24570.4 -> To Version 4.13.0-3.24580.1

* Update dependencies from https://github.com/dotnet/roslyn build 20241130.2

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-2.24570.4 -> To Version 4.13.0-3.24580.2

* Update dependencies from https://github.com/dotnet/roslyn build 20241201.2

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-2.24570.4 -> To Version 4.13.0-3.24601.2

* Update dependencies from https://github.com/dotnet/roslyn build 20241202.26

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-2.24570.4 -> To Version 4.13.0-3.24602.26

* Use explicit AsSpan

* Fix LibraryImportGenerator.UnitTests

* Fix regex tests

* Adjust trimming test for new codegen

With this roslyn update, the generated iterator state machine
for this test includes a Dispose method which assigns null to the
array, inhibiting dataflow analysis.

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Sven Boemer <sbomer@gmail.com>",4,62,66,"[main] update dependencies from dotnet/arcade (issue_ref)* update dependencies from build 20241122.3microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.versiontools.tasks , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.24570.4 -> to version 10.0.0-beta.24572.3* update dependencies from build 20241125.1microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.versiontools.tasks , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.24570.4 -> to version 10.0.0-beta.24575.1* update dependencies from build 20241126.1microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.versiontools.tasks , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.24570.4 -> to version 10.0.0-beta.24576.1* update dependencies from build 20241127.1microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.versiontools.tasks , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.24570.4 -> to version 10.0.0-beta.24577.1* update dependencies from build 20241128.2microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.versiontools.tasks , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.24570.4 -> to version 10.0.0-beta.24578.2* update dependencies from build 20241204.4microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.versiontools.tasks , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.24570.4 -> to version 10.0.0-beta.24604.4* update dependencies from build 20241205.1microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.versiontools.tasks , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.24570.4 -> to version 10.0.0-beta.24605.1---------"
dotnet/runtime,e7e568be723d1ec37b374eeb59ca9e1d2fb11892,"JIT: generalize empty try/catch to also handle empty try/fault (#110464)

Basically the same transformation we just started doing for try/catch
also works for try/fault, so just broaden the set of cases, and rename
a few things.",2024-12-06 15:50:03+00:00,Andy Ayers,1,f456716a906d309a98e4bb668bad475262b06b6b,"JIT: extract BBJ_COND to BBJ_ALWAYS profile repair as utility (#110494)

JIT: extract BBJ_COND to BBJ_ALWAYS profile repair as utility

and call it from a few places.

Co-authored-by: Aman Khalid <amankhalid@microsoft.com>",5,23,23,"jit: generalize empty try/catch to also handle empty try/fault (issue_ref)basically the same transformation we just started doing for try/catchalso works for try/fault, so just broaden the set of cases, and renamea few things."
dotnet/runtime,e2e4642f95b3fbbc81d0593030aae4859d844e94,"JIT: Don't run `fgComputeBlockWeights` in MinOpts (#110451)

Block weights don't seem particularly useful in MinOpts. Skipping fgComputeBlockWeights when we aren't optimizing had few diffs locally, so this looks like an opportunity to save some TP.",2024-12-06 16:55:04+00:00,Aman Khalid,1,7f2f2b9d597c636e78f0592017c17839e2ad5969,"JIT: Fix reporting of tier name metadata (#110610)

The tier name was reported for both the root and the inlinees. On the
SPMI side this would result in using the last tier name reported, which
usually would be from an inlinee. The inlinee tier does not always match
the root tier, for example when OSR is enabled.",1,4,4,"jit: don't run in minopts (issue_ref)block weights don't seem particularly useful in minopts. skipping fgcomputeblockweights when we aren't optimizing had few diffs locally, so this looks like an opportunity to save some tp."
dotnet/runtime,c7f41499a5b96e05f9fc172e53f2fea1fef2b428,"Lazily-initialize RegexCompiler's cached reflection members (#109283)

* Lazily-initialize RegexCompiler's cached reflection members

There are currently ~70 members that we populate to cache for later use. We rarely need all of them. This uses `field` to make them lazily initialized.

* Remove field attributes and suppress warnings",2024-12-06 18:16:01+00:00,Stephen Toub,1,8eab62c365de53e0a341fb1000249d338c203354,"Fix matched check for balancing groups in regex compiler / source generator (#111769)

The emitted IsMatched check should come after processing the child, not before.",1,324,321,lazily-initialize regexcompiler's cached reflection members (issue_ref)* lazily-initialize regexcompiler's cached reflection membersthere are currently ~70 members that we populate to cache for later use. we rarely need all of them. this uses to make them lazily initialized.* remove field attributes and suppress warnings
dotnet/runtime,637e8229f68a7455f18d8da4ae147b57eb582839,"JIT: Remove `fgFirstColdBlock` checks in frontend phases (#110452)

Part of #107749. Now that hot/cold splitting runs after layout in the backend, where the flowgraph is expected to never change, we shouldn't need to check for the presence of a cold code section in the frontend.",2024-12-06 19:20:47+00:00,Aman Khalid,0,,,3,20,57,"jit: remove checks in frontend phases (issue_ref)part of issue_ref. now that hot/cold splitting runs after layout in the backend, where the flowgraph is expected to never change, we shouldn't need to check for the presence of a cold code section in the frontend."
dotnet/runtime,fa451cf3e460baa1440f70b641853cc0d97bdd06,"ConditionalWeakTable - don't link Containers when no entries are transferred (#108941)

ConditionalWeakTable uses internal Container objects for the underlying table.  Container entries are write-once because the read path is lock-free.  When a Container is full, a new Container is allocated, entries are copied, and compaction can occur (if there aren't any currently live enumerators relying on specific indices).

A two-pass finalization scheme is used to free the entries (dependent handles) and then the Containers themselves.  Finalization provides a guarantee that the Container is no longer in use, and the second pass accounts for finalization resurrection.  Because entries can be duplicated across Containers, each Container contains a link to the one that replaces it. 
 This can _greatly_ extend the lifetime of Containers.  (See https://github.com/dotnet/runtime/issues/50683 and https://github.com/dotnet/runtime/issues/108447.)

However, if the Container is empty and not being enumerated, there is no need to link it to the next Container.  This PR handles that case, which includes microbenchmarks where single entries are added and removed from ConditionalWeakTable and equivalent tests where TransactionScope is functioning as a wrapper around a ConditionalWeakTable entry.  Of course, this is only a partial solution because a single live entry or enumerator leaves the old behavior.  Another caveat is that the finalization queue can be filled faster than it can be emptied, though this is more likely in microbenchmarks where other work isn't being done.",2024-12-06 19:26:40+00:00,Mark Plesko,0,,,1,14,1,"conditionalweaktable - don't link containers when no entries are transferred (issue_ref)conditionalweaktable uses internal container objects for the underlying table. container entries are write-once because the read path is lock-free. when a container is full, a new container is allocated, entries are copied, and compaction can occur (if there aren't any currently live enumerators relying on specific indices).a two-pass finalization scheme is used to free the entries (dependent handles) and then the containers themselves. finalization provides a guarantee that the container is no longer in use, and the second pass accounts for finalization resurrection. because entries can be duplicated across containers, each container contains a link to the one that replaces it. this can _greatly_ extend the lifetime of containers. (see and however, if the container is empty and not being enumerated, there is no need to link it to the next container. this pr handles that case, which includes microbenchmarks where single entries are added and removed from conditionalweaktable and equivalent tests where transactionscope is functioning as a wrapper around a conditionalweaktable entry. of course, this is only a partial solution because a single live entry or enumerator leaves the old behavior. another caveat is that the finalization queue can be filled faster than it can be emptied, though this is more likely in microbenchmarks where other work isn't being done."
dotnet/runtime,fdb68ddfc8e2d74d980d95c419558256a0b011c4,"JIT: remove is rare check from finally cloning (#110483)

There are currently few rarely run finallys, so stop checking for them.
Future changes may introduce some, and cloning them can be beneficial
to nearby hot code.",2024-12-06 21:42:55+00:00,Andy Ayers,1,c5df73f30cb55ab9b0281cb915d6f51d8580a67f,"JIT: handle nested try case in empty try removal (#111129)

When we remove a try region, the try entry block may still be a try entry
for enclosing try regions, so we can't unconditionally drop the DONT_REMOVE flag.

Fixes #110958",1,0,9,"jit: remove is rare check from finally cloning (issue_ref)there are currently few rarely run finallys, so stop checking for them.future changes may introduce some, and cloning them can be beneficialto nearby hot code."
dotnet/runtime,2d81cbb28a8feb1af5b790664b511b264d032877,"Remove 2 more casting helper method frames (#110064)

* Remove 2 more casting helper method frames

* Update src/coreclr/System.Private.CoreLib/src/System/Runtime/CompilerServices/CastHelpers.cs

Co-authored-by: Adeel Mujahid <3840695+am11@users.noreply.github.com>

* Update src/coreclr/System.Private.CoreLib/src/System/Runtime/CompilerServices/CastHelpers.cs

Co-authored-by: Adeel Mujahid <3840695+am11@users.noreply.github.com>

* Update src/coreclr/vm/jitinterface.h

Co-authored-by: Theodore Tsirpanis <teo@tsirpanis.gr>

* More code updates as suggested by am11

---------

Co-authored-by: Adeel Mujahid <3840695+am11@users.noreply.github.com>
Co-authored-by: Theodore Tsirpanis <teo@tsirpanis.gr>",2024-12-06 23:37:36+00:00,David Wrighton,0,,,6,34,52,remove 2 more casting helper method frames (issue_ref)* remove 2 more casting helper method frames* update src/coreclr/system.private.corelib/src/system/runtime/compilerservices/casthelpers.cs
dotnet/runtime,5ae9467d6ab7b31bf1cda35ca15ca5a2d21d3046,"JIT: add more ""simple"" complexity helpers (#110486)

In early phases we haven't set tree costs or size estimates, so we fall back
to counting statements or nodes.

Capture some of this in some helper methods, both pure counting and ""exceeds""
variants (which are potentially cheaper when comparing against a budget).

Update the loop cloning size check to use this.

Co-authored-by: Aman Khalid <amankhalid@microsoft.com>",2024-12-07 16:44:27+00:00,Andy Ayers,1,72a243b43fae9b11933113a454533e68678e5bad,"JIT: fix loop cloning when loop's last block is within a hander (#111432)

In some unusual cases the last block of a loop might be in the middle of a
handler region (say the loop backedge is in a catch, and the catch has
alternate flow that exits the loop).

Make sure that we properly place the slow loop preheader into the same EH regions
as the fast loop preheader.

Fixes #111344",6,176,70,"jit: add more ""simple"" complexity helpers (issue_ref)in early phases we haven't set tree costs or size estimates, so we fall backto counting statements or nodes.capture some of this in some helper methods, both pure counting and ""exceeds""variants (which are potentially cheaper when comparing against a budget).update the loop cloning size check to use this."
dotnet/runtime,4b3902a13b094e1c090b38861ecc3bd793ec46d0,Delete unused static field from List (#110515),2024-12-09 06:24:21+00:00,Stephen Toub,0,,,1,0,2,delete unused static field from list (issue_ref)
dotnet/runtime,b085dadd160066d945ea638f0391091b1c96524d,"Remove some RuntimeExport/RuntimeImport indirections (#110437)

We had indirections set up where we'd `RuntimeExport` a method under a symbolic name and then `RuntimeImport` it elsewhere (or call the export from JIT-generated code).

Most of this was motivated by the old Redhawk layering where things like casting and interface dispatch were part of Runtime.Base and not part of CoreLib. Since we decided if we ever reintroduce a Runtime.Base, we wouldn't have casting in it, this indirection will no longer be needed.

Motivated by #110267 (and also the reason why I'm only doing it for `RuntimeExport`s used from the JIT right now). Once that PR gets in, calling methods through `RuntimeExport`s would actually become a bigger deoptimization than it is now.",2024-12-09 07:46:46+00:00,Michal Strehovský,0,,,20,130,72,"remove some runtimeexport/runtimeimport indirections (issue_ref)we had indirections set up where we'd a method under a symbolic name and then it elsewhere (or call the export from jit-generated code).most of this was motivated by the old redhawk layering where things like casting and interface dispatch were part of runtime.base and not part of corelib. since we decided if we ever reintroduce a runtime.base, we wouldn't have casting in it, this indirection will no longer be needed.motivated by issue_ref (and also the reason why i'm only doing it for s used from the jit right now). once that pr gets in, calling methods through s would actually become a bigger deoptimization than it is now."
dotnet/runtime,54e5b710bf48c54e2a3faadb174fcf7eaa48d0dc,[wasi] bump wasmtime to 27 (#110524),2024-12-09 14:43:18+00:00,Pavel Savara,0,,,1,1,1,[wasi] bump wasmtime to 27 (issue_ref)
dotnet/runtime,09eea2a3889189c3242e8135193ff9a095272743,"[debugger] Fix a step that becomes a go (#110484)

* Fixing step becomes a go

* Trying to avoid step that becomes a go

* Adding comments and more protections.

* fixing comment

* Checking if removing this comments, CI failures are gone.

* Adding part of the changes to understand the failures on CI

* Update src/coreclr/debug/ee/controller.cpp

Co-authored-by: mikelle-rogers <45022607+mikelle-rogers@users.noreply.github.com>

* Fixing wrong fix.

---------

Co-authored-by: mikelle-rogers <45022607+mikelle-rogers@users.noreply.github.com>",2024-12-09 14:48:56+00:00,Thays Grazia,1,36b2bddf53cfe3581f16cc7735f3d779f8781847,Fix crash when pTargetMD is null (#110650),2,18,4,"[debugger] fix a step that becomes a go (issue_ref)* fixing step becomes a go* trying to avoid step that becomes a go* adding comments and more protections.* fixing comment* checking if removing this comments, ci failures are gone.* adding part of the changes to understand the failures on ci* update src/coreclr/debug/ee/controller.cpp"
dotnet/runtime,d6be63071b06354d581060e633cdb64da307d37c,"Change assertion in IPGlobalProperties_DomainName_ReturnsEmptyStringWhenNotSet (#110070)

Accept ""localdomain"" as a valid DomainName on Android.",2024-12-09 17:03:01+00:00,Anton Firszov,0,,,1,4,1,"change assertion in ipglobalproperties_domainname_returnsemptystringwhennotset (issue_ref)accept ""localdomain"" as a valid domainname on android."
dotnet/runtime,2d6ea8de12a9f1aad9724a911d201137e5339c4b,"Added a fix for the build failure when STRESS_DYNAMIC_HEAP_COUNT is defined. (#110506)

* Fix build break for DATAS Stress Mode

* Removed stress heap dynamic",2024-12-09 18:00:43+00:00,Mukund Raghav Sharma (Moko),1,c9cc904bc3d907333a9675168d9868d688aaca68,"New GC decommit strategy for large/huge regions (#109431)

* new-dfr in one commit

* fixes for decommitting large+huge and comments

* only age regions during BGC

* fix age_all_region_kinds condition.

---------

Co-authored-by: Manish Godse <61718172+mangod9@users.noreply.github.com>",1,1,1,added a fix for the build failure when stress_dynamic_heap_count is defined. (issue_ref)* fix build break for datas stress mode* removed stress heap dynamic
dotnet/runtime,016d356e43659b7789d23defe570628c8864ee73,"[cdac] Handle no method def token when trying to get the IL version state (#110449)

Some methods have a nil token - for example, special runtime methods like array functions. When we tried to look up their IL version state, we were throwing an exception. Methods like this will have no versioning state, so check for a nil token and skip the lookup.",2024-12-09 18:56:41+00:00,Elinor Fung,1,9e52085c011637b0affd16d6febc1cd80d0adbbf,"[cdac] Fix calculation of `MethodDesc` optional slot addresses (#110491)

The cDAC was assuming that the additional data after a MethodDesc were each just pointers. That is only true for the non-vtable slot and native code slot, not method impl. This change includes the size of those additional slots in the data descriptor and uses them when computing the addresses those optional slots.

As part of this, I pulled out shared helpers around dealing with optional slots for use by `MethodValidation` and `RuntimeTypeSystem_1`.",5,58,28,"[cdac] handle no method def token when trying to get the il version state (issue_ref)some methods have a nil token - for example, special runtime methods like array functions. when we tried to look up their il version state, we were throwing an exception. methods like this will have no versioning state, so check for a nil token and skip the lookup."
dotnet/runtime,537d4f29145ebd7a42e5f42a021bf18f7cebf249,"Speed up surrogate validation in HttpUtility (#110478)

* Speed up surrogate validation in HttpUtility",2024-12-10 01:58:05+00:00,Miha Zupan,0,,,3,34,82,speed up surrogate validation in httputility (issue_ref)* speed up surrogate validation in httputility
dotnet/runtime,68da1a406c1c39182505e892838ba1d0b3b62d54,"Don't wait for finalizers in 'IReferenceTrackerHost::ReleaseDisconnectedReferenceSources' (#110551)

This PR updates the IReferenceTrackerHost::ReleaseDisconnectedReferenceSources implementation for CoreCLR and NativeAOT to match what .NET Native was doing, and not wait for finalizers, to avoid deadlocks in ASTA scenarios (UWP). Finalizers will just continue running normally, and if the process is suspended (which can only happen on UWP anyway), they'll resume when the process is resumed later on. Worst case scenario this would only cause a non-optimal memory use cleanup before suspension (which is better than a deadlock anyway). Can be revisited and improved for .NET 10 if needed.

Contributes to #109538",2024-12-10 02:00:40+00:00,Sergio Pedri,1,d7e85d93c12aaa43937f8ef5f920c36b5afc756d,"Move ComWrappers AddRef to C/C++ (#110762)

* Move ComWrappers AddRef to C/C++

Xaml invokes AddRef while holding a lock that it *also* holds while a GC is in progress. Managed AddRef had to synchronize with the GC that caused intermittent deadlocks with the other thread holding Xaml's lock.

This change reverts the managed AddRef implementation to match .NET Native and CoreCLR.

Fixes #110747

Co-authored-by: Aaron Robinson <arobins@microsoft.com>",2,8,10,"don't wait for finalizers in 'ireferencetrackerhost::releasedisconnectedreferencesources' (issue_ref)this pr updates the ireferencetrackerhost::releasedisconnectedreferencesources implementation for coreclr and nativeaot to match what .net native was doing, and not wait for finalizers, to avoid deadlocks in asta scenarios (uwp). finalizers will just continue running normally, and if the process is suspended (which can only happen on uwp anyway), they'll resume when the process is resumed later on. worst case scenario this would only cause a non-optimal memory use cleanup before suspension (which is better than a deadlock anyway). can be revisited and improved for .net 10 if needed.contributes to issue_ref"
dotnet/runtime,77caed494f2439ad7fbf7e1adf0bbe0ebd7c8679,"[dac] Make `GetObjectStringData` return the needed buffer element count instead of byte count (#110540)

`GetObjectStringData` is returning the byte count instead of the buffer element count. This is inconsistent with all the other APIs that (optionally) return a needed count which return the buffer element count, not the byte count - for example, for strings specifically: `GetAssemblyName`, `GetMethodDescName`, `GetObjectClassName`, `GetMethodTableName`, `GetFrameName`, `GetPEFileName`.",2024-12-10 04:54:53+00:00,Elinor Fung,1,f0e1d7ba91f601064b90475541d5e7e91507f63e,Fix AV error in DAC on Linux/MacOS - issue #109877 (#110557),1,8,2,"[dac] make return the needed buffer element count instead of byte count (issue_ref) is returning the byte count instead of the buffer element count. this is inconsistent with all the other apis that (optionally) return a needed count which return the buffer element count, not the byte count - for example, for strings specifically: , , , , , ."
dotnet/runtime,c9148c8783ee953da8da033ae3222b9f24963e0c,"Remove ld_classic in 16+ (#110542)

* Remove ld_class in 16+

* Update src/coreclr/nativeaot/BuildIntegration/Microsoft.NETCore.Native.Unix.targets

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2024-12-10 06:04:17+00:00,Andy Gocke,0,,,1,1,1,remove ld_classic in 16+ (issue_ref)* remove ld_class in 16+* update src/coreclr/nativeaot/buildintegration/microsoft.netcore.native.unix.targets
dotnet/runtime,1fa2361dced0acec1a204e559bbb5677f863eeb7,[browser] fix code gen overflow (#110539),2024-12-10 09:42:09+00:00,Pavel Savara,1,878e5d7f07a0d06617c7728d850cc9248ea02cf0,"Revert ""[browser] fix code gen overflow (#110539)"" (#110599)

This reverts commit 1fa2361dced0acec1a204e559bbb5677f863eeb7.",1,2,1,[browser] fix code gen overflow (issue_ref)
dotnet/runtime,920a17ac91440abb5b34109104e72da77ec58b59,Disable `HybridGlobalization` tests for WASM on CI (#110526),2024-12-10 09:51:35+00:00,Ilona Tomkowicz,0,,,3,9,68,disable tests for wasm on ci (issue_ref)
dotnet/runtime,5f41aab3409dd8da6bca7bc8b9ba811e8d44b15d,"JIT: Include more edges in `BlockDominancePreds` (#110531)

Because of spurious flow it is possible that the preds of the try-begin
block are not the only blocks that can dominate a handler. We handled
this possibility, but only for finally/fault blocks that can directly
have these edges. However, even other handler blocks can be reachable
through spurious paths that involves finally/fault blocks, and in these
cases returning the preds of the try-begin block is not enough to
compute the right dominator statically.",2024-12-10 10:38:15+00:00,Jakob Botsch Nielsen,0,,,3,86,35,"jit: include more edges in (issue_ref)because of spurious flow it is possible that the preds of the try-beginblock are not the only blocks that can dominate a handler. we handledthis possibility, but only for finally/fault blocks that can directlyhave these edges. however, even other handler blocks can be reachablethrough spurious paths that involves finally/fault blocks, and in thesecases returning the preds of the try-begin block is not enough tocompute the right dominator statically."
dotnet/runtime,ad304792cfd5af4155120f054b48850bf91acf62,"[mono][interp] Remove no_inlining functionality for dead bblocks (#110468)

Many methods in the BCL, especially hwintrins related, contain a lot of code that is detected as dead during compilation. On mono, inlining happens during IL import and a lot of optimizations are run as later passes. This exposed the issue where we have a lot of dead code bloat from inlining, with optimizations later running on it.

A simple solution for this problem was tracking jump counts for each bblock (https://github.com/dotnet/runtime/pull/97514), which are initialized when bblocks are first created, before IL import stage. Then a small set of IL import level optimizations were added, in order to reduce the jump targets of each bblock. As we were further importing IL, if we reached a bblock with 0 jump targets, we would disable inlining into it, in order to reduce code bloat. Disabling code emit altogether was too challenging. Another limitation of this approach was that we would fail to detect dead code if it was part of a loop. The results were good however, by reducing mem usage in `System.Numerics.Tensor.Tests` from 6GB to 600MB.

For an unrelated issue, the order in which we generate bblocks was redesigned in order to account for bblock stack state initialization in weird control flow scenarios (https://github.com/dotnet/runtime/pull/108731). This was achieved by deferring IL import into bblocks that were not yet reached from other live bblocks. A side effect of this is that we no longer generate code at all in unreachable bblocks, completely superseding the previous approach while addressing both the problems of inlining into loops or generating IR for dead IL. In the previously mentioned test suite, this further reduced the memory usage to 300MB.

Remnants of the unnecessary `no_inlining` approach still lingered in the code, leading to disabling of inline optimization in some reachable code. This triggered a significant performance regression which this PR addresses.",2024-12-10 12:04:42+00:00,Vlad Brezae,1,5a395ed2fd64cf1c65ad43d667327958f6f3d1b0,"[mono][interp] Fix execution of delegate invoke wrapper with interpreter (#111310)

The wrapper was relatively recently changed to icall into mono_get_addr_compiled_method in order to obtain a native function pointer to call using calli. This is incorrect on interpreter where we expect an `InterpMethod*`. This commit adds a new opcode instead, that on jit it goes through the same icall path, while on interpeter in similarly computes the appropiate method to call.

On a separate track, it might be useful to investigate whether the necessary delegate invoke wrapper should have been present in the aot image and not be executed with the interpreter in the first place.",2,7,44,"[mono][interp] remove no_inlining functionality for dead bblocks (issue_ref)many methods in the bcl, especially hwintrins related, contain a lot of code that is detected as dead during compilation. on mono, inlining happens during il import and a lot of optimizations are run as later passes. this exposed the issue where we have a lot of dead code bloat from inlining, with optimizations later running on it.a simple solution for this problem was tracking jump counts for each bblock ( which are initialized when bblocks are first created, before il import stage. then a small set of il import level optimizations were added, in order to reduce the jump targets of each bblock. as we were further importing il, if we reached a bblock with 0 jump targets, we would disable inlining into it, in order to reduce code bloat. disabling code emit altogether was too challenging. another limitation of this approach was that we would fail to detect dead code if it was part of a loop. the results were good however, by reducing mem usage in from 6gb to 600mb.for an unrelated issue, the order in which we generate bblocks was redesigned in order to account for bblock stack state initialization in weird control flow scenarios ( this was achieved by deferring il import into bblocks that were not yet reached from other live bblocks. a side effect of this is that we no longer generate code at all in unreachable bblocks, completely superseding the previous approach while addressing both the problems of inlining into loops or generating ir for dead il. in the previously mentioned test suite, this further reduced the memory usage to 300mb.remnants of the unnecessary approach still lingered in the code, leading to disabling of inline optimization in some reachable code. this triggered a significant performance regression which this pr addresses."
dotnet/runtime,731a96b0018cda0c67bb3fab7a4d06538fe2ead5,"Enable more ILLinker skipped tests on native AOT (#110353)

Progress towards #82447.",2024-12-10 13:21:18+00:00,Michal Strehovský,1,6d6f2bd36c7d5e134177383958b02522b770bd04,"Fix base type marking for DAM annotated classes (#110655)

Fixes #104740, also implements #110563 for ILC.

The annotation on DAM annotated classes gets triggered by calling GetType on a location typed as something DAM annotated (or deriving/implementing from it).

The marking is done in layers so that warning suppressions can be properly applied. The bug was that we didn't walk down the hierarchy and assumed someone else will do it. Nobody did. I'm adding a new node type to do the marking.

Previously, we only used one node for tracking. The node got dropped into the dependency graph when we saw GetType being called and it ensured the proper marking for that one type (not the bases). We also added conditional dependencies into MethodTables so that `Derived` can depend on this node of the `Base`. This ensured that if GetType was called on Base, we'd treat it same as GetType on Derived. This was resulting in marking too much and too little (we'd mark right away when we saw GetType call, irrespective of the MethodTable existence, and we wouldn't walk down to Base if the GetType was called on Derived.

The fix is to use two node types. One simply tracks ""GetType was called on something"". It doesn't bring any other dependencies with it. We only use it to condition other nodes. The other node represents ""the dependencies from the annotations"".

The way this works is:
* We see GetType called on Base, so we add ObjectGetTypeCalledNode for Base.
* We generate MethodTable for Derived, which adds a conditional dependency on ObjectGetTypeCalledNode of Derived if ObjectGetTypeCalledNode of Base is in the graph. (This ensures ""walking up the hierarchy"".)
* MethodTable of Derived also adds a conditional dependency on ObjectGetTypeFlowDependenciesNode of Derived if ObjectGetTypeCalledNode of Derived is part of the graph. This will do the actual marking but only if the MethodTable and GetType call was seen.
* ObjectGetTypeFlowDependenciesNode also ""walks down the hierarchy"" and makes sure ObjectGetTypeFlowDependenciesNode of all the bases and interfaces are present in the graph.

This happens to also address #110563. Because of that, I had to update tests since ILC started trimming more stuff without seeing the type as constructed.",2,44,47,enable more illinker skipped tests on native aot (issue_ref)progress towards issue_ref.
dotnet/runtime,cc66c7769902766ccdf26af708f4484d04e3e604,Remove duplicate IsAscii check in string.IsNormalized (#110576),2024-12-10 18:26:48+00:00,Miha Zupan,0,,,3,15,41,remove duplicate isascii check in string.isnormalized (issue_ref)
dotnet/runtime,f9c86dc7b449bbdfd2fcafa58e513357372509a5,"Remove Helper Method Frames (HMF) from Reflection (#110481)

Convert RuntimeTypeHandle.GetFields() to QCall.
Convert RuntimeTypeHandle.GetInterfaces() to QCall.
Convert Signature.CompareSig() to QCall.
Rename to Signature.CompareSig() to Signature.AreEqual().

---------

Co-authored-by: Adeel Mujahid <3840695+am11@users.noreply.github.com>",2024-12-10 19:07:12+00:00,Aaron Robinson,0,,,9,164,175,remove helper method frames (hmf) from reflection (issue_ref)convert runtimetypehandle.getfields() to qcall.convert runtimetypehandle.getinterfaces() to qcall.convert signature.comparesig() to qcall.rename to signature.comparesig() to signature.areequal().---------
dotnet/runtime,ca5cf417e37028812aa40111951b31f8808b3396,"Speed up surrogate validation in string.Normalize (#110574)

* Speed up surrogate validation in string.Normalize

* Remove the else block",2024-12-10 22:45:17+00:00,Miha Zupan,0,,,1,10,9,speed up surrogate validation in string.normalize (issue_ref)* speed up surrogate validation in string.normalize* remove the else block
dotnet/runtime,938f0575be0087d45e25121dd06e28e4c086526f,Use holding thread id in AwareLock to avoid orphaned lock crash (#107168),2024-12-10 23:41:58+00:00,Eduardo Velarde,0,,,3,33,6,use holding thread id in awarelock to avoid orphaned lock crash (issue_ref)
dotnet/runtime,eab352d9b4339a912456f3577b7dd6f21c0c3ef6,"Cleanup some dead code (#110579)

* pal/misc.h

* COMCharacter

* MAX_CACHE_LINE_SIZE

* clr/fs",2024-12-11 01:48:52+00:00,Huo Yaoyuan,0,,,10,0,176,cleanup some dead code (issue_ref)* pal/misc.h* comcharacter* max_cache_line_size* clr/fs
dotnet/runtime,878e5d7f07a0d06617c7728d850cc9248ea02cf0,"Revert ""[browser] fix code gen overflow (#110539)"" (#110599)

This reverts commit 1fa2361dced0acec1a204e559bbb5677f863eeb7.",2024-12-11 05:56:58+00:00,Jan Kotas,1,bf40019418629c210212e053d2380206e02fcf4d,[browser] fix code gen overflow - reapply (#110606),1,1,2,"revert ""[browser] fix code gen overflow (issue_ref)"" (issue_ref)this reverts commit 1fa2361dced0acec1a204e559bbb5677f863eeb7."
dotnet/runtime,6362f242fc6e3065948b3bf922406509cb721a73,"Share threadpool configuration (#110469)

Threadpool can be configured using AppContext switches or environment variables. The environment variable configuration uses a roundabout mechanism that makes it CoreCLR specific. Move the configuration to managed code that is shared with all runtimes.

This should have equivalent behavior in less than half the lines of code unless I'm missing something.",2024-12-11 06:14:01+00:00,Michal Strehovský,0,,,17,85,235,share threadpool configuration (issue_ref)threadpool can be configured using appcontext switches or environment variables. the environment variable configuration uses a roundabout mechanism that makes it coreclr specific. move the configuration to managed code that is shared with all runtimes.this should have equivalent behavior in less than half the lines of code unless i'm missing something.
dotnet/runtime,cf03276a344f72f6a55243e3181534a7bc815256,"[cDAC] SOSDacImpl::GetMethodDescData DynamicMethodObject (#110545)

* allow SOSDacImpl::GetMethodDescData to handle dynamic functions
* zero-out managedDynamicMethodObject as it is not being used and cDAC does not yet support fetching managed fields",2024-12-11 12:30:49+00:00,Max Charlamb,0,,,1,7,5,[cdac] sosdacimpl::getmethoddescdata dynamicmethodobject (issue_ref)* allow sosdacimpl::getmethoddescdata to handle dynamic functions* zero-out manageddynamicmethodobject as it is not being used and cdac does not yet support fetching managed fields
dotnet/runtime,39111b0942ce8cd3a941c347afcf980158369c00,"[browser] Remove WASM `HybridGlobalization` from library tests, WBT and docs (#110534)

* Remove `HybridGlobalization` from library tests.

* Remove `HybridGlobalization` from WBT.

* Remove docs about HG on WASM.",2024-12-11 15:02:35+00:00,Ilona Tomkowicz,1,4eb1693749632712d53085655a628130d624c584,Fix culture creation with undetermined lang tag (#115166),64,212,4832,"[browser] remove wasm from library tests, wbt and docs (issue_ref)* remove from library tests.* remove from wbt.* remove docs about hg on wasm."
dotnet/runtime,69d80765741a92af937f91c9c944a6b7ec56297b,"Use FLS detach as thread termination notification on windows. (#110589)

* Use FLS detach as thread termination notification on windows.

* use _ASSERTE_ALL_BUILDS

* one more case

* InitFlsSlot throws per convention used in threading initialization

* OsDetachThread could be void

* Update src/coreclr/vm/ceemain.cpp

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2024-12-11 20:45:25+00:00,Vladimir Sadov,0,,,4,140,31,use fls detach as thread termination notification on windows. (issue_ref)* use fls detach as thread termination notification on windows.* use _asserte_all_builds* one more case* initflsslot throws per convention used in threading initialization* osdetachthread could be void* update src/coreclr/vm/ceemain.cpp---------
dotnet/runtime,a39002402edbc1610c5961a4bc7e79a1e3532eda,"[Profiler] Avoid Recursive ThreadStoreLock in Profiling Thread Enumerator (#110548)

* [Profiler] Avoid Recursive ThreadStoreLock

Profiling Enumerators look to acquire the ThreadStoreLock.
In release config, re-acquiring the ThreadStoreLock and
releasing it in ProfilerThreadEnum::Init will cause
problems if the callback invoking EnumThread has logic
that depends on the ThreadStoreLock being held.
To avoid recursively acquiring the ThreadStoreLock,
expand the condition when the profiling thread enumerator
shouldn't acquire the ThreadStoreLock.

* [Profiler] Change order to set fProfilerRequestedRuntimeSuspend

There was a potential race condition when setting the flag
before suspending and resetting the flag after restarting.
For example, if the thread restarting runtime is preempted
right after resuming runtime, the flag could remain unset
by the time another thread looks to suspend runtime, which
would see that the flag as set.

* [Profiler][Tests] Add unit test for EnumThreads during suspension

* [Profiler][Tests] Fixup EnumThreads test",2024-12-11 21:35:42+00:00,Mitchell Hwang,0,,,8,229,6,"[profiler] avoid recursive threadstorelock in profiling thread enumerator (issue_ref)* [profiler] avoid recursive threadstorelockprofiling enumerators look to acquire the threadstorelock.in release config, re-acquiring the threadstorelock andreleasing it in profilerthreadenum::init will causeproblems if the callback invoking enumthread has logicthat depends on the threadstorelock being held.to avoid recursively acquiring the threadstorelock,expand the condition when the profiling thread enumeratorshouldn't acquire the threadstorelock.* [profiler] change order to set fprofilerrequestedruntimesuspendthere was a potential race condition when setting the flagbefore suspending and resetting the flag after restarting.for example, if the thread restarting runtime is preemptedright after resuming runtime, the flag could remain unsetby the time another thread looks to suspend runtime, whichwould see that the flag as set.* [profiler][tests] add unit test for enumthreads during suspension* [profiler][tests] fixup enumthreads test"
dotnet/runtime,20358985bcb49c438fb055e18c4385cc7ccb88e5,Remove HttpMetricsEnrichmentContext caching (#110580),2024-12-11 23:12:33+00:00,Miha Zupan,0,,,3,169,73,remove httpmetricsenrichmentcontext caching (issue_ref)
dotnet/runtime,c6464250c27ee67af31d6df3141db1722f006e48,[NRBF] Reduce the most time-consuming test case to avoid timeouts for checked builds (#110550),2024-12-12 01:36:34+00:00,Adam Sitnik,0,,,1,1,1,[nrbf] reduce the most time-consuming test case to avoid timeouts for checked builds (issue_ref)
dotnet/runtime,f30cfc0616bd9a50bdeb96049afff04cd5e2a8d9,"All `WasmBuildTests` use static project from assets or `dotnet new`, unification of browser tests (#109069)

* Fix build errors in WASI - refactor of WASI in a future PR.

* Fix binlog location.

* Update README.

* Feedback: non-nullable _projectDir.

* Fix `SatelliteAssembliesTests` and other test that require 3 states of `WasmBuildNative`

* `RebuildTests` fix after introducing figerprinting.

* Fix no-worklod tests: 1) do not double-assert `AssertRuntimePackPath` in blazor 2) `AssertRuntimePackPath` is correct  only when workload is there 3) NativeBuild should allow undefined in blazor tests as well.

* Fix `NativeBuildTests` - AppBundle was not asserted here originally.

* `WasmGenerateAppBundle=false` when workloads used (set in workload manifest). The check is incorrect in the current process of testing.

* Fix `MainWithArgsTests`. Url query can have arg key duplicates -> is better represented by `NameValueCollection` than `Dictionary`

* AppBundle was never asserted for size in `OptimizationFlagChangeTests` + use statistics that are fingerprinting insensitive.

* Reading from config is a known issue.

* Fix `ReferenceNewAssemblyRebuildTest`: Json lib was already referenced before the change in the test. Use Cryptography lib instead.

* Keep blazor workload tests together.

* Fix: `PInvokeTableGeneratorTests` on Windows.

* Move all no-workload blazor tests to one class.

* Use more meaningful name for `MiscTests3`.

* `PInvokeTableGeneratorTests` takes 2-3 times more time than average WBT class, divide it.

* Block the timeouting test with exisiting issue.

* Try avoiding port collisions in blazor tests run on kestrel.

* Removal of files and comments that were supposed to be deleted after approval.",2024-12-12 10:41:06+00:00,Ilona Tomkowicz,1,d44116e0dc18ffd94b910bd03cdcf2c8219a59bd,"Use current STJ in HostModel and remove unnecessary audit suppressions (#109852)

* Use current STJ in HostModel and remove unnecessary audit suppressions

Fixes https://github.com/dotnet/runtime/issues/108262

* Remove unnecessary nuget audit suppressions

* Remove SetConfiguration from ProjectReference",159,3912,5103,"all use static project from assets or , unification of browser tests (issue_ref)* fix build errors in wasi - refactor of wasi in a future pr.* fix binlog location.* update readme.* feedback: non-nullable _projectdir.* fix and other test that require 3 states of * fix after introducing figerprinting.* fix no-worklod tests: 1) do not double-assert in blazor 2) is correct only when workload is there 3) nativebuild should allow undefined in blazor tests as well.* fix - appbundle was not asserted here originally.* when workloads used (set in workload manifest). the check is incorrect in the current process of testing.* fix . url query can have arg key duplicates -> is better represented by than * appbundle was never asserted for size in + use statistics that are fingerprinting insensitive.* reading from config is a known issue.* fix : json lib was already referenced before the change in the test. use cryptography lib instead.* keep blazor workload tests together.* fix: on windows.* move all no-workload blazor tests to one class.* use more meaningful name for .* takes 2-3 times more time than average wbt class, divide it.* block the timeouting test with exisiting issue.* try avoiding port collisions in blazor tests run on kestrel.* removal of files and comments that were supposed to be deleted after approval."
dotnet/runtime,751945592bf0da6a6e0cb6838cba8e7adbbed147,"[Mono]: Update Mono diagnostic docs. (#110621)

* [Mono]: Update Mono diagnostic docs.

* Review feedback.",2024-12-12 10:52:42+00:00,Johan Lorensson,0,,,1,268,117,[mono]: update mono diagnostic docs. (issue_ref)* [mono]: update mono diagnostic docs.* review feedback.
dotnet/runtime,dfb2b8a861fc97ce90c8f31c886d4d27c5b36f46,"Update dependencies from dotnet/roslyn (#110105)

* Update dependencies from https://github.com/dotnet/roslyn build 20241122.2

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-2.24570.4 -> To Version 4.13.0-2.24572.2

* Update dependencies from https://github.com/dotnet/roslyn build 20241122.15

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-2.24570.4 -> To Version 4.13.0-2.24572.15

* Update dependencies from https://github.com/dotnet/roslyn build 20241124.5

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-2.24570.4 -> To Version 4.13.0-2.24574.5

* Update dependencies from https://github.com/dotnet/roslyn build 20241125.18

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-2.24570.4 -> To Version 4.13.0-3.24575.18

* Update dependencies from https://github.com/dotnet/roslyn build 20241127.2

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-2.24570.4 -> To Version 4.13.0-3.24577.2

* Update dependencies from https://github.com/dotnet/roslyn build 20241128.2

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-2.24570.4 -> To Version 4.13.0-3.24578.2

* Update dependencies from https://github.com/dotnet/roslyn build 20241128.3

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-2.24570.4 -> To Version 4.13.0-3.24578.3

* Update dependencies from https://github.com/dotnet/roslyn build 20241130.1

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-2.24570.4 -> To Version 4.13.0-3.24580.1

* Update dependencies from https://github.com/dotnet/roslyn build 20241130.2

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-2.24570.4 -> To Version 4.13.0-3.24580.2

* Update dependencies from https://github.com/dotnet/roslyn build 20241201.2

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-2.24570.4 -> To Version 4.13.0-3.24601.2

* Update dependencies from https://github.com/dotnet/roslyn build 20241202.26

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-2.24570.4 -> To Version 4.13.0-3.24602.26

* Use explicit AsSpan

* Fix LibraryImportGenerator.UnitTests

* Fix regex tests

* Adjust trimming test for new codegen

With this roslyn update, the generated iterator state machine
for this test includes a Dispose method which assigns null to the
array, inhibiting dataflow analysis.

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Sven Boemer <sbomer@gmail.com>",2024-12-12 11:25:30+00:00,Adeel Mujahid,1,8b80947425177e7b500e13ec66d1b9936a67e5a5,Fix verbatim escaping in regex code generator (#115447),31,72,79,"update dependencies from dotnet/roslyn (issue_ref)* update dependencies from build 20241122.2microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-2.24570.4 -> to version 4.13.0-2.24572.2* update dependencies from build 20241122.15microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-2.24570.4 -> to version 4.13.0-2.24572.15* update dependencies from build 20241124.5microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-2.24570.4 -> to version 4.13.0-2.24574.5* update dependencies from build 20241125.18microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-2.24570.4 -> to version 4.13.0-3.24575.18* update dependencies from build 20241127.2microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-2.24570.4 -> to version 4.13.0-3.24577.2* update dependencies from build 20241128.2microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-2.24570.4 -> to version 4.13.0-3.24578.2* update dependencies from build 20241128.3microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-2.24570.4 -> to version 4.13.0-3.24578.3* update dependencies from build 20241130.1microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-2.24570.4 -> to version 4.13.0-3.24580.1* update dependencies from build 20241130.2microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-2.24570.4 -> to version 4.13.0-3.24580.2* update dependencies from build 20241201.2microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-2.24570.4 -> to version 4.13.0-3.24601.2* update dependencies from build 20241202.26microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-2.24570.4 -> to version 4.13.0-3.24602.26* use explicit asspan* fix libraryimportgenerator.unittests* fix regex tests* adjust trimming test for new codegenwith this roslyn update, the generated iterator state machinefor this test includes a dispose method which assigns null to thearray, inhibiting dataflow analysis.---------"
dotnet/runtime,3eeea540bf825d8a46e2ad1fcf1b499bf3073276,"SPMI: Avoid duplicate example diffs in diffs summary (#110619)

This deduplicates the examples that can be picked by their method name;
this means that the examples no longer should show multiple example
diffs with the same name.",2024-12-12 12:14:41+00:00,Jakob Botsch Nielsen,0,,,1,34,6,spmi: avoid duplicate example diffs in diffs summary (issue_ref)this deduplicates the examples that can be picked by their method name;this means that the examples no longer should show multiple examplediffs with the same name.
dotnet/runtime,4a30be3a2d2907b73ff3fe6be49912fe2030e2fc,"JIT: Remove `VisitLoopBlocksLexical` utility (#110490)

Follow-up to #110227. In the few places where we still visit loop blocks in lexical order, just visit them in RPO instead.",2024-12-12 15:23:18+00:00,Aman Khalid,0,,,3,2,42,"jit: remove utility (issue_ref)follow-up to issue_ref. in the few places where we still visit loop blocks in lexical order, just visit them in rpo instead."
dotnet/runtime,2182002f50270c50b9a38cbb4a8f52d84c41fbce,"[main] Update dependencies from dotnet/roslyn (#110084)

* Update dependencies from https://github.com/dotnet/roslyn build 20241122.2

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-2.24570.4 -> To Version 4.13.0-2.24572.2

* Update dependencies from https://github.com/dotnet/roslyn build 20241122.15

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-2.24570.4 -> To Version 4.13.0-2.24572.15

* Update dependencies from https://github.com/dotnet/roslyn build 20241124.5

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-2.24570.4 -> To Version 4.13.0-2.24574.5

* Update dependencies from https://github.com/dotnet/roslyn build 20241125.18

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-2.24570.4 -> To Version 4.13.0-3.24575.18

* Update dependencies from https://github.com/dotnet/roslyn build 20241127.2

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-2.24570.4 -> To Version 4.13.0-3.24577.2

* Update dependencies from https://github.com/dotnet/roslyn build 20241128.2

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-2.24570.4 -> To Version 4.13.0-3.24578.2

* Update dependencies from https://github.com/dotnet/roslyn build 20241128.3

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-2.24570.4 -> To Version 4.13.0-3.24578.3

* Update dependencies from https://github.com/dotnet/roslyn build 20241130.1

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-2.24570.4 -> To Version 4.13.0-3.24580.1

* Update dependencies from https://github.com/dotnet/roslyn build 20241130.2

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-2.24570.4 -> To Version 4.13.0-3.24580.2

* Update dependencies from https://github.com/dotnet/roslyn build 20241201.2

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-2.24570.4 -> To Version 4.13.0-3.24601.2

* Update dependencies from https://github.com/dotnet/roslyn build 20241202.26

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-2.24570.4 -> To Version 4.13.0-3.24602.26

* Update dependencies from https://github.com/dotnet/roslyn build 20241204.1

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-2.24570.4 -> To Version 4.13.0-3.24604.1

* Update dependencies from https://github.com/dotnet/roslyn build 20241205.1

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-2.24570.4 -> To Version 4.13.0-3.24605.1

* Update dependencies from https://github.com/dotnet/roslyn build 20241205.12

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-2.24570.4 -> To Version 4.13.0-3.24605.12

* Update dependencies from https://github.com/dotnet/roslyn build 20241206.9

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-2.24570.4 -> To Version 4.13.0-3.24606.9

* Update dependencies from https://github.com/dotnet/roslyn build 20241207.3

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-2.24570.4 -> To Version 4.13.0-3.24607.3

* Update dependencies from https://github.com/dotnet/roslyn build 20241210.2

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-2.24570.4 -> To Version 4.13.0-3.24610.2

* Update dependencies from https://github.com/dotnet/roslyn build 20241211.1

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-2.24570.4 -> To Version 4.13.0-3.24611.1

* Update dependencies from https://github.com/dotnet/roslyn build 20241211.10

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-3.24602.26 -> To Version 4.13.0-3.24611.10

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Viktor Hofer <viktor.hofer@microsoft.com>",2024-12-12 16:16:26+00:00,dotnet-maestro[bot],0,,,2,11,11,"[main] update dependencies from dotnet/roslyn (issue_ref)* update dependencies from build 20241122.2microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-2.24570.4 -> to version 4.13.0-2.24572.2* update dependencies from build 20241122.15microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-2.24570.4 -> to version 4.13.0-2.24572.15* update dependencies from build 20241124.5microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-2.24570.4 -> to version 4.13.0-2.24574.5* update dependencies from build 20241125.18microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-2.24570.4 -> to version 4.13.0-3.24575.18* update dependencies from build 20241127.2microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-2.24570.4 -> to version 4.13.0-3.24577.2* update dependencies from build 20241128.2microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-2.24570.4 -> to version 4.13.0-3.24578.2* update dependencies from build 20241128.3microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-2.24570.4 -> to version 4.13.0-3.24578.3* update dependencies from build 20241130.1microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-2.24570.4 -> to version 4.13.0-3.24580.1* update dependencies from build 20241130.2microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-2.24570.4 -> to version 4.13.0-3.24580.2* update dependencies from build 20241201.2microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-2.24570.4 -> to version 4.13.0-3.24601.2* update dependencies from build 20241202.26microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-2.24570.4 -> to version 4.13.0-3.24602.26* update dependencies from build 20241204.1microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-2.24570.4 -> to version 4.13.0-3.24604.1* update dependencies from build 20241205.1microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-2.24570.4 -> to version 4.13.0-3.24605.1* update dependencies from build 20241205.12microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-2.24570.4 -> to version 4.13.0-3.24605.12* update dependencies from build 20241206.9microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-2.24570.4 -> to version 4.13.0-3.24606.9* update dependencies from build 20241207.3microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-2.24570.4 -> to version 4.13.0-3.24607.3* update dependencies from build 20241210.2microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-2.24570.4 -> to version 4.13.0-3.24610.2* update dependencies from build 20241211.1microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-2.24570.4 -> to version 4.13.0-3.24611.1* update dependencies from build 20241211.10microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-3.24602.26 -> to version 4.13.0-3.24611.10---------"
dotnet/runtime,7f2f2b9d597c636e78f0592017c17839e2ad5969,"JIT: Fix reporting of tier name metadata (#110610)

The tier name was reported for both the root and the inlinees. On the
SPMI side this would result in using the last tier name reported, which
usually would be from an inlinee. The inlinee tier does not always match
the root tier, for example when OSR is enabled.",2024-12-12 17:53:00+00:00,Jakob Botsch Nielsen,1,3410c763587fe2dca4d1dc5888f91708a6fff816,"[JIT] Enable EGPRs in JIT by adding REX2 encoding to the backend. (#106557)

* Ruihan: POC with REX2

Update comments.

Merge the REX2 changes into the original legacy emit path

bug fix: Set REX2.W with correct mask code.

register encoding and prefix emitting logics.

Add REX2 prefix emit logic

bug fixes

Add Stress mode for REX2 encoding and some bug fixes

resolve comments:
1. add assertion check for UD opcodes.
2. add checks for EGPRs.

Add REX2 to emitOutputAM, and let LEA to be REX2 compatible.

Add REX2.X encoding for SIB byte

But fixes: add REX2 prefix on the path in RI where MOV is specially handled.

Enable REX2 encoding for `movups`

fixed bugs in REX2 prefix emitting logic when working with map 1 instructions, and enabled REX2 for POPCNT

legacy map index-er

bug fixes

some clean-up

Adding initial APX unit testing path.

Adding a coredistools dll that has LLVM APX disasm capability.

It must be coppied into a CORE_ROOT manually.

clean up work for REX2

narrow the REX2 scope to `sub` only

some clean up based on the comments.

bug fix

resolve comment

* resolve comments

* refactor register encoding for REX2

* merge REX2 path to legacy path

* Enable REX2 in more instructions.

* Avoid repeatedly estimate the size of REX2 prefix

* Enable REX2 encoding on RI and SV path
 - SV path is mostly for debugging purposes

Added encoding unit tests for instructions with immediates

* Add rex2 support to rotate and shift.

* CR session.

* Testing infra updates: assert REX2 is enabled.
Code refactoring: AddX86PrefixIfNeeded.

* revert rcl_N and rcr_N, tp and latency data for these instructions is missing in JIT, may indicate these instructions are not being used in JIT, drop them for now.

* partially enable REX2 on emitOutputAM, case covered: R_AR and AR_R.

* Adding unit tests.

* push, pop, inc, dec, neg, not, xadd, shld, shrd, cmpxchg, setcc, bswap.

* bug fix for bswap

* bt

* xchg, idiv

* Make sure add REX2 prefix if register encoding for EGPRs are being called before adding any prefix.

* Ensure code size is correctly computed in R_R_I path.

* clean up

* Change all AddSimdPrefix to AddX86Prefix
Refactor REX2 encoding stress logics.

* div, mulEAX

* filter out test from REX2 encoding when using ACC form.
(this will have side effect that the estimated code will go up and mismatch with actual code size.)

* Make sure REX prefix will not be added when emitting with REX2.

* resolve comments.

* make sure the APX debug knob is only available under debug build.

* clean up some out-dated code.

* enable movsxd

* Enable ""Call""

* Enable ""JMP""

* resolve merge errors

* formatting

* remote coredistools.dll for internal tests only

* bug fix

* resolve comments

* add more emitter tests.

* resolve comments.

* clean up some comments and tweak the REX2 stress logic

* clean up

* formatting.

* resolve comments.",2,8,10,"jit: fix reporting of tier name metadata (issue_ref)the tier name was reported for both the root and the inlinees. on thespmi side this would result in using the last tier name reported, whichusually would be from an inlinee. the inlinee tier does not always matchthe root tier, for example when osr is enabled."
dotnet/runtime,f0e64f5f0166da5a66c931ad0b2210b3e3cf51a3,"[cdac] Always re-read global pointers in GetUsefulGlobals (#110633)

`GetUsefulGlobals` can be called before the runtime is actually initialized, so we need to re-read the global pointers instead of storing any of them.",2024-12-12 21:58:03+00:00,Elinor Fung,1,c05dbb6ca34eda13240b97b1d0a6b9d4b33bf203,[cdac] Fix ISOSDacInterface13.TraverseLoaderHeap parameter type (#110678),1,6,3,"[cdac] always re-read global pointers in getusefulglobals (issue_ref) can be called before the runtime is actually initialized, so we need to re-read the global pointers instead of storing any of them."
dotnet/runtime,43b89b4a40f7642891e48801d56bd706ab717d6b,"Correct arm64 SignExtension (#110635)

* correct arm64 SignExtension

* check for the 28th bit",2024-12-12 23:23:12+00:00,mikelle-rogers,0,,,1,2,2,correct arm64 signextension (issue_ref)* correct arm64 signextension* check for the 28th bit
dotnet/runtime,7927a192be28c8562a54becdbe0a665837022eaa,"Delete .GuardCF library build (#110671)

Based on measurements on the ASP.NET perf infra (BasicWebApi and TodosApi), using the GuardCF libraries in non-guard context doesn't have measurable impact on throughput. The impact on size is negligible. We can just have it enabled unconditionally on the native runtime bits.",2024-12-13 05:39:45+00:00,Michal Strehovský,1,0dcffe79a1302d4a94a985aa1e62c8387ebbbd37,"Fix CMP0173 policy warning with cmake 3.31 (#110522)

In some places, where we use `find_library(FOUNDATION`, we don't `include(CMakeFindFrameworks)` while in other places we do.  These look like added ""just in case"". CMake 3.31 has deprecated `include(CMakeFindFrameworks)`:",12,3,127,"delete .guardcf library build (issue_ref)based on measurements on the asp.net perf infra (basicwebapi and todosapi), using the guardcf libraries in non-guard context doesn't have measurable impact on throughput. the impact on size is negligible. we can just have it enabled unconditionally on the native runtime bits."
dotnet/runtime,1622f514684d94a521bfb41c88a27079ad943ee7,[browser] NativeAOT-LLVM support in browser-bench (#110611),2024-12-13 08:39:21+00:00,Marek Fišera,1,8a25506957ae24effa9f57c7e4d5571f9e6bc9be,"[browser] Remove WASM `HybridGlobalization` from runtime code (#110567)

* Removal of `HybridGlobalization` code from the runtime and libs.

* Remove `HybridGlobalization` flag and clean the tests from it.

* Fix build.

* Fix build, remove unused leftovers.

* Fix linker tests.

* Fix the CI error, revert ""icudt_hybrid.dat"" removal.

* Fix WBT that expected `icudt_hybrid.dat` to be missing.",7,44,13,[browser] nativeaot-llvm support in browser-bench (issue_ref)
dotnet/runtime,8fa662c3ba88c301ddb8aecf9ec1061ddef629c4,JIT: Remove always-true `fgCanRelocateEHRegions` (#110612),2024-12-13 10:00:24+00:00,Jakob Botsch Nielsen,1,4822cc017a578c7b1d08ce6cb11d3c91690215b5,"JIT: revise how we track if nodes have been morphed (#110787)

Allow remorphing. Require that all nodes be morphed. Ensure that no node
is morphed more than a handful of times.

Fixes #6218, #56962, #107542",3,54,60,jit: remove always-true (issue_ref)
dotnet/runtime,c95667cf760334a68e117e0ba45b60417aa1ebd4,"[wasm] Add bench output log, to the file and to the console (#110669)

This improves diagnostic in our measurement infra",2024-12-13 11:31:34+00:00,Radek Doulik,0,,,2,30,5,"[wasm] add bench output log, to the file and to the console (issue_ref)this improves diagnostic in our measurement infra"
dotnet/runtime,5a9362f509629304c91ae07662f649282f956552,"JIT: Add an ""init BB"" invariant (#110404)

This adds an invariant that there always exists an ""init BB"" throughout
the JIT's phases. The init BB has the following properties:
- It is only executed once, so it does not have any predecessors
- It is not inside a try region, hence it dominates all other blocks in
  the function

There are no further requirements on the BB. The init BB does not have
to be `BBJ_ALWAYS` (unlike the old ""scratch BB"" concept). This is mainly
because it philosophically does not make sense to insert IR at the end
of the init BB, since earlier phases can have inserted arbitrary IR in
them.",2024-12-13 13:28:01+00:00,Jakob Botsch Nielsen,1,f3d43efa514a87f04aa994749409297e8f3e94e2,"JIT: Don't move EH region entries when aligning backward jumps (#110918)

Follow-up to #110277. Fixes #110756. Don't consider 4-opt cut points that would move the entry block of a try/handler region below other blocks in the region. Previously, either future moves would put the entry block back at the top of the region, or we would get unlucky in the rare case and hit asserts.",16,283,363,"jit: add an ""init bb"" invariant (issue_ref)this adds an invariant that there always exists an ""init bb"" throughoutthe jit's phases. the init bb has the following properties:- it is only executed once, so it does not have any predecessors- it is not inside a try region, hence it dominates all other blocks in the functionthere are no further requirements on the bb. the init bb does not haveto be (unlike the old ""scratch bb"" concept). this is mainlybecause it philosophically does not make sense to insert ir at the endof the init bb, since earlier phases can have inserted arbitrary ir inthem."
dotnet/runtime,f6af0b8b2208afafb2ec3f0bab2b344afbf1d187,JIT: Spill newarr into temp (#110518),2024-12-13 16:15:43+00:00,Steve,0,,,5,59,9,jit: spill newarr into temp (issue_ref)
dotnet/runtime,90dfc04d8f863e053e42edf0992c1b63398b12fb,"[cdac] Handle non-IL method descs in `RuntimeTypeSystem_1.GetMethodClassificationDataType` (#110602)

- Add the different method desc types to the data descriptor
  - We only need their size right now
- Add tests for different method desc classifications
  - Mostly fill-in for things I found we didn't cover - `GetNativeCode_StableEntryPoint_NonVtableSlot` is the one that actually hits the updated code in this change",2024-12-13 20:26:16+00:00,Elinor Fung,0,,,7,355,18,[cdac] handle non-il method descs in (issue_ref)- add the different method desc types to the data descriptor - we only need their size right now- add tests for different method desc classifications - mostly fill-in for things i found we didn't cover - is the one that actually hits the updated code in this change
dotnet/runtime,87f0e70e40ad6f6e88e4de4ae9f18353182be401,"[cDAC] Implement GCCover portion of SOSDacImpl::GetMethodDescData (#110322)

* Add GetGCStressCodeCopy to ICodeVersions and IRuntimeTypeSystem",2024-12-13 23:28:10+00:00,Max Charlamb,0,,,20,198,11,[cdac] implement gccover portion of sosdacimpl::getmethoddescdata (issue_ref)* add getgcstresscodecopy to icodeversions and iruntimetypesystem
dotnet/runtime,14503a7e68a59ae73b0eaea041d34b0c42c90835,Remove unused Precode::IsCorrectMethodDesc (#110703),2024-12-13 23:57:44+00:00,Elinor Fung,0,,,2,0,18,remove unused precode::iscorrectmethoddesc (issue_ref)
dotnet/runtime,ed46aa21a6cab467339ce42d31a6f03a74f4de97,"JIT: capture class types when spilling a GDV arg (#110675)

If we need to spill ref type args for a GDV, try to annotate the spilled
locals with type information.",2024-12-14 01:00:51+00:00,Andy Ayers,1,85b24557dfaf0965641a683bafceb85d91486ba7,"JIT: Keep small-typedness information for return temps introduced by GDV (#112733)

Fix #112635",1,15,2,"jit: capture class types when spilling a gdv arg (issue_ref)if we need to spill ref type args for a gdv, try to annotate the spilledlocals with type information."
dotnet/runtime,d6c034d4e1668a3524adfb15a6b20e21ae8ce809,"[cdac] Clear cached data as part of IXCLRDataProcess::Flush (#110700)

Found this while running the diagnostics repo SOS tests with the cDAC enabled. General sequence for the repro was:
```
!sethostruntime -none
!bpmd <firstLocation>
!bpmd <secondLocation>
g
g
!clrstack
```
Printed stack shows `<unknown>` for some method(s).

Between the first and second breakpoints, more methods were jitted and the corresponding code heap list updated. When a new method in the stack for `<secondLocation>` had the same code heap list as any method from `<firstLocation>`, we'd end up with a stale end address for the heap list and determine that the method was invalid (outside the address range).

The cdac was assuming that the target would be created every time the state changes, but that is not the case (for the repro above, `!sethostruntime -none` resulted in not re-creating the target). We need to handle `IXCLRDataProcess::Flush` calls to clear out any cached data.

With this change, the SOS tests with the cDAC enabled run successfully with both a Release and Debug cdacreader (on a Release runtime).",2024-12-14 02:23:22+00:00,Elinor Fung,0,,,4,28,10,"[cdac] clear cached data as part of ixclrdataprocess::flush (issue_ref)found this while running the diagnostics repo sos tests with the cdac enabled. general sequence for the repro was:printed stack shows for some method(s).between the first and second breakpoints, more methods were jitted and the corresponding code heap list updated. when a new method in the stack for had the same code heap list as any method from , we'd end up with a stale end address for the heap list and determine that the method was invalid (outside the address range).the cdac was assuming that the target would be created every time the state changes, but that is not the case (for the repro above, resulted in not re-creating the target). we need to handle calls to clear out any cached data.with this change, the sos tests with the cdac enabled run successfully with both a release and debug cdacreader (on a release runtime)."
dotnet/runtime,3aa1ec5bb1f50f0a1bed9cfcac8734f742bcf24b,Improve codegen for Vector512.ExtractMostSignificatBits (#110662),2024-12-14 02:49:19+00:00,Tanner Gooding,0,,,3,111,12,improve codegen for vector512.extractmostsignificatbits (issue_ref)
dotnet/runtime,c130ec464b32cc0e31c8af73cf1ed05a55b3c166,"Clarify native AOT build instructions (#110681)

Contributes to #109356.",2024-12-16 08:57:43+00:00,Michal Strehovský,0,,,1,10,2,clarify native aot build instructions (issue_ref)contributes to issue_ref.
dotnet/runtime,c969265440b74e95429fb513e6d940d6c9bc2fd3,[WASI] bump WASI SDK to v25.0 (#110654),2024-12-16 10:26:20+00:00,Pavel Savara,0,,,15,35,40,[wasi] bump wasi sdk to v25.0 (issue_ref)
dotnet/runtime,d1d6325c96b12951f8da45399bf1098564c3c30b,Disable failing tests (#110725),2024-12-16 15:30:33+00:00,Vlad Brezae,1,74bddbaa26a5d4de55b96af2924721af5f3abdf2,"[iOS] Fix GetNormalizedLength on iOS and similar platforms (#110723)

* Fix Apple ICU normalize to return length
of normalized string instead of 0 for insufficiently sized buffers

* Reenable tests with TryNormalize
---------

Co-authored-by: Matous Kozak <matouskozak@seznam.cz>",1,1,0,disable failing tests (issue_ref)
dotnet/runtime,efb8a8fe6263cb66c154576c859523e885dc5a24,"[browser] Speed up `WasmBuildTests` by using the compression switch (#110645)

* Disable compression in all browser tests.

* Remove warnaserror in non-blazor tests.

* The last argument takes precedence. Allow overwriting `ExtraMSBuildArgs`.

* Publish is triggered by `DeployBuild` in `BuildOptions`.",2024-12-16 15:44:21+00:00,Ilona Tomkowicz,1,373f048bae3c46810bc030ed7c1ee0568ee5ecc0,"[main] Update dependencies from dotnet/arcade (#110477)

* Update dependencies from https://github.com/dotnet/arcade build 20241205.6

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.24605.1 -> To Version 10.0.0-beta.24605.6

* Set roll forward for cdac-build-tool

* Bump NetCoreAppToolCurrent to net10.0

* Fix CustomEventSource test

https://github.com/dotnet/runtime/pull/110001 updated annotations on
EventSource. This adjusts the expected preserved members to match.

* Fix tests with Type checks

With https://github.com/dotnet/runtime/pull/106497/files,
object.GetType is no longer an internalcall. This means we no longer
mark the ctor of the return type, System.Type, so the type check
removal optimization is kicking in where it didn't before.

* Update dependencies from https://github.com/dotnet/arcade build 20241206.6

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.24605.1 -> To Version 10.0.0-beta.24606.6

* Disable nativeAOT components for win-x86 temporarily

* Update baseline entries

* Bump AspNetCoreAppCurrent

* Update pinned package versions

* Update sdk dependencies

* Fix path to WebAssembly build task

* Update dependencies from https://github.com/dotnet/arcade build 20241210.1

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.24605.1 -> To Version 10.0.0-beta.24610.1

* Build XUnitLogChecker as SingleFile when we can't AOT it. Our infra expects us to publish this with a host. Publishing as single file makes this a little easier (and keeps it as one file).

* Update SDK and remove obsolete condition

* Revert ""Fix tests with Type checks""

This reverts commit 15a30efc19e9827c5e4812c9d7c4b72efed47324.

* Fix illink tests

* Reapply ""Fix tests with Type checks""

This reverts commit 7a8c1fb5363ded7cbd47fb2528a5752a6a595573.

* Attempt 2

* Update dependencies from https://github.com/dotnet/arcade build 20241210.2

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.24605.1 -> To Version 10.0.0-beta.24610.2

* Update sdk dependencies that are used for workloads tests

* Based on https://github.com/dotnet/runtime/pull/93693, Update Wasm.Build.Tests and Wasi.Build.Tests for net10.0

* Change disable condition as hybrid globalization in the browser has been disabled and the test fails due to this condition being false now.

* Update dependencies from https://github.com/dotnet/arcade build 20241211.4

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.24605.1 -> To Version 10.0.0-beta.24611.4

* Use feature switch to disable DataSet xml serialization related tests

* Update dependencies from https://github.com/dotnet/arcade build 20241212.4

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.24605.1 -> To Version 10.0.0-beta.24612.4

* Workload fixes and improvements

* Remove runtimes-windows from workload manifest, it is unused

* Add net10 entries in workloads.csproj

* Fix mistakes in net8 workload manifest

* Update emsdk

* Fix msbuild conditions

* Update dependencies from https://github.com/dotnet/arcade build 20241213.2

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.24605.1 -> To Version 10.0.0-beta.24613.2

* Fix regex for runtime pack path to allow space

* Fix condition in WorkloadManifest.targets.in to actually match net10.0

* Fix net version in wasm templates

* Fix one more hardcoded net9.0

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Alexander Köplinger <alex.koeplinger@outlook.com>
Co-authored-by: Sven Boemer <sbomer@gmail.com>
Co-authored-by: Viktor Hofer <viktor.hofer@microsoft.com>
Co-authored-by: Jeremy Koritzinsky <jekoritz@microsoft.com>
Co-authored-by: Michal Strehovský <MichalStrehovsky@users.noreply.github.com>",7,37,22,[browser] speed up by using the compression switch (issue_ref)* disable compression in all browser tests.* remove warnaserror in non-blazor tests.* the last argument takes precedence. allow overwriting .* publish is triggered by in .
dotnet/runtime,b33f75519ea498df81b38fab75c4813b03c9a3e3,"[wasm] Fix blazor and browser template startup measurements (#110729)

* [wasm] Fix blazor and browser template startup measurements

* Feedback",2024-12-16 17:30:22+00:00,Radek Doulik,1,6e894a87a7cc69ac90817860534c7fe223eae4cb,"[wasm] Fix rebuild of browser-bench with startup apps (#110776)

This fixes 2 issues

 * clean build of browser-bench with startup apps failed, because
   WBT's dotnet-latest wasn't available when setting the sdk spath
 * problem with rebuilding WBT, where WBT fails with

```
runtime/src/mono/nuget/Microsoft.NET.Runtime.WorkloadTesting.Internal/Sdk/WorkloadTesting.Core.targets(201,5): error MSB4018: The ""InstallWorkloadFromArtifacts"" task failed unexpectedly. [runtime/src/mono/wasm/Wasm.Build.Tests/Wasm.Build.Tests.csproj] [runtime/src/mono/sample/wasm/browser-bench/Wasm.Browser.Bench.Sample.csproj]
runtime/src/mono/nuget/Microsoft.NET.Runtime.WorkloadTesting.Internal/Sdk/WorkloadTesting.Core.targets(201,5): error MSB4018: System.IO.IOException: Directory not empty : 'runtime/artifacts/bin/dotnet-latest/host/fxr/10.0.0-alpha.1.24610.2' [runtime/src/mono/wasm/Wasm.Build.Tests/Wasm.Build.Tests.csproj] [runtime/src/mono/sample/wasm/browser-bench/Wasm.Browser.Bench.Sample.csproj]
runtime/src/mono/nuget/Microsoft.NET.Runtime.WorkloadTesting.Internal/Sdk/WorkloadTesting.Core.targets(201,5): error MSB4018: at System.IO.FileSystem.RemoveDirectoryRecursive(String fullPath) [runtime/src/mono/wasm/Wasm.Build.Tests/Wasm.Build.Tests.csproj] [runtime/src/mono/sample/wasm/browser-bench/Wasm.Browser.Bench.Sample.csproj]
runtime/src/mono/nuget/Microsoft.NET.Runtime.WorkloadTesting.Internal/Sdk/WorkloadTesting.Core.targets(201,5): error MSB4018: at Microsoft.Workload.Build.Tasks.InstallWorkloadFromArtifacts.Execute() [runtime/src/mono/wasm/Wasm.Build.Tests/Wasm.Build.Tests.csproj] [runtime/src/mono/sample/wasm/browser-bench/Wasm.Browser.Bench.Sample.csproj]
runtime/src/mono/nuget/Microsoft.NET.Runtime.WorkloadTesting.Internal/Sdk/WorkloadTesting.Core.targets(201,5): error MSB4018: at Microsoft.Build.BackEnd.TaskExecutionHost.Execute() [runtime/src/mono/wasm/Wasm.Build.Tests/Wasm.Build.Tests.csproj] [runtime/src/mono/sample/wasm/browser-bench/Wasm.Browser.Bench.Sample.csproj]
runtime/src/mono/nuget/Microsoft.NET.Runtime.WorkloadTesting.Internal/Sdk/WorkloadTesting.Core.targets(201,5): error MSB4018: at Microsoft.Build.BackEnd.TaskBuilder.ExecuteInstantiatedTask(TaskExecutionHost taskExecutionHost, TaskLoggingContext taskLoggingContext, TaskHost taskHost, ItemBucket bucket, TaskExecutionMode howToExecuteTask) [runtime/src/mono/wasm/Wasm.Build.Tests/Wasm.Build.Tests.csproj] [runtime/src/mono/sample/wasm/browser-bench/Wasm.Browser.Bench.Sample.csproj]
      0 Warning(s)
      1 Error(s)

```",1,17,10,[wasm] fix blazor and browser template startup measurements (issue_ref)* [wasm] fix blazor and browser template startup measurements* feedback
dotnet/runtime,373f048bae3c46810bc030ed7c1ee0568ee5ecc0,"[main] Update dependencies from dotnet/arcade (#110477)

* Update dependencies from https://github.com/dotnet/arcade build 20241205.6

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.24605.1 -> To Version 10.0.0-beta.24605.6

* Set roll forward for cdac-build-tool

* Bump NetCoreAppToolCurrent to net10.0

* Fix CustomEventSource test

https://github.com/dotnet/runtime/pull/110001 updated annotations on
EventSource. This adjusts the expected preserved members to match.

* Fix tests with Type checks

With https://github.com/dotnet/runtime/pull/106497/files,
object.GetType is no longer an internalcall. This means we no longer
mark the ctor of the return type, System.Type, so the type check
removal optimization is kicking in where it didn't before.

* Update dependencies from https://github.com/dotnet/arcade build 20241206.6

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.24605.1 -> To Version 10.0.0-beta.24606.6

* Disable nativeAOT components for win-x86 temporarily

* Update baseline entries

* Bump AspNetCoreAppCurrent

* Update pinned package versions

* Update sdk dependencies

* Fix path to WebAssembly build task

* Update dependencies from https://github.com/dotnet/arcade build 20241210.1

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.24605.1 -> To Version 10.0.0-beta.24610.1

* Build XUnitLogChecker as SingleFile when we can't AOT it. Our infra expects us to publish this with a host. Publishing as single file makes this a little easier (and keeps it as one file).

* Update SDK and remove obsolete condition

* Revert ""Fix tests with Type checks""

This reverts commit 15a30efc19e9827c5e4812c9d7c4b72efed47324.

* Fix illink tests

* Reapply ""Fix tests with Type checks""

This reverts commit 7a8c1fb5363ded7cbd47fb2528a5752a6a595573.

* Attempt 2

* Update dependencies from https://github.com/dotnet/arcade build 20241210.2

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.24605.1 -> To Version 10.0.0-beta.24610.2

* Update sdk dependencies that are used for workloads tests

* Based on https://github.com/dotnet/runtime/pull/93693, Update Wasm.Build.Tests and Wasi.Build.Tests for net10.0

* Change disable condition as hybrid globalization in the browser has been disabled and the test fails due to this condition being false now.

* Update dependencies from https://github.com/dotnet/arcade build 20241211.4

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.24605.1 -> To Version 10.0.0-beta.24611.4

* Use feature switch to disable DataSet xml serialization related tests

* Update dependencies from https://github.com/dotnet/arcade build 20241212.4

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.24605.1 -> To Version 10.0.0-beta.24612.4

* Workload fixes and improvements

* Remove runtimes-windows from workload manifest, it is unused

* Add net10 entries in workloads.csproj

* Fix mistakes in net8 workload manifest

* Update emsdk

* Fix msbuild conditions

* Update dependencies from https://github.com/dotnet/arcade build 20241213.2

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.24605.1 -> To Version 10.0.0-beta.24613.2

* Fix regex for runtime pack path to allow space

* Fix condition in WorkloadManifest.targets.in to actually match net10.0

* Fix net version in wasm templates

* Fix one more hardcoded net9.0

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Alexander Köplinger <alex.koeplinger@outlook.com>
Co-authored-by: Sven Boemer <sbomer@gmail.com>
Co-authored-by: Viktor Hofer <viktor.hofer@microsoft.com>
Co-authored-by: Jeremy Koritzinsky <jekoritz@microsoft.com>
Co-authored-by: Michal Strehovský <MichalStrehovsky@users.noreply.github.com>",2024-12-16 18:49:10+00:00,dotnet-maestro[bot],1,4f5659ddf827cb2ca3f05d268625de58fc515c71,"Fix interface trimming order (#110098)

ProcessMarkedTypesWithInterfaces can lead to additional interface
methods being required, so those need to be marked (done by
ProcessInterfaceMethods) even if nothing else happens to put new items
in the queue.",95,1127,443,"[main] update dependencies from dotnet/arcade (issue_ref)* update dependencies from build 20241205.6microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.versiontools.tasks , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.24605.1 -> to version 10.0.0-beta.24605.6* set roll forward for cdac-build-tool* bump netcoreapptoolcurrent to net10.0* fix customeventsource test updated annotations oneventsource. this adjusts the expected preserved members to match.* fix tests with type checkswith object.gettype is no longer an internalcall. this means we no longermark the ctor of the return type, system.type, so the type checkremoval optimization is kicking in where it didn't before.* update dependencies from build 20241206.6microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.versiontools.tasks , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.24605.1 -> to version 10.0.0-beta.24606.6* disable nativeaot components for win-x86 temporarily* update baseline entries* bump aspnetcoreappcurrent* update pinned package versions* update sdk dependencies* fix path to webassembly build task* update dependencies from build 20241210.1microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.versiontools.tasks , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.24605.1 -> to version 10.0.0-beta.24610.1* build xunitlogchecker as singlefile when we can't aot it. our infra expects us to publish this with a host. publishing as single file makes this a little easier (and keeps it as one file).* update sdk and remove obsolete condition* revert ""fix tests with type checks""this reverts commit 15a30efc19e9827c5e4812c9d7c4b72efed47324.* fix illink tests* reapply ""fix tests with type checks""this reverts commit 7a8c1fb5363ded7cbd47fb2528a5752a6a595573.* attempt 2* update dependencies from build 20241210.2microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.versiontools.tasks , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.24605.1 -> to version 10.0.0-beta.24610.2* update sdk dependencies that are used for workloads tests* based on update wasm.build.tests and wasi.build.tests for net10.0* change disable condition as hybrid globalization in the browser has been disabled and the test fails due to this condition being false now.* update dependencies from build 20241211.4microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.versiontools.tasks , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.24605.1 -> to version 10.0.0-beta.24611.4* use feature switch to disable dataset xml serialization related tests* update dependencies from build 20241212.4microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.versiontools.tasks , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.24605.1 -> to version 10.0.0-beta.24612.4* workload fixes and improvements* remove runtimes-windows from workload manifest, it is unused* add net10 entries in workloads.csproj* fix mistakes in net8 workload manifest* update emsdk* fix msbuild conditions* update dependencies from build 20241213.2microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.versiontools.tasks , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.24605.1 -> to version 10.0.0-beta.24613.2* fix regex for runtime pack path to allow space* fix condition in workloadmanifest.targets.in to actually match net10.0* fix net version in wasm templates* fix one more hardcoded net9.0---------"
dotnet/runtime,e34ec6cf555b46998a500764d0aef9eed37cf0ef,Check loaded in dac values to avoid SIGSEGV on null pointers (#110303),2024-12-16 19:46:34+00:00,eterekhin,0,,,2,26,4,check loaded in dac values to avoid sigsegv on null pointers (issue_ref)
dotnet/runtime,1d69684de8801d500e12de8efd86e7ecfa5ed168,"Update Alpine and Azure Linux versions (#110476)

* Add Alpine and Ubuntu versions

* Revert Ubuntu 24.10 entries

* Add coverage for latest Debian and Ubuntu

* Revert breaks",2024-12-16 20:01:57+00:00,Rich Lander,0,,,2,9,12,update alpine and azure linux versions (issue_ref)* add alpine and ubuntu versions* revert ubuntu 24.10 entries* add coverage for latest debian and ubuntu* revert breaks
dotnet/runtime,da7e06cbb8bd256b786c309ed4b0bbca4d146711,Delete dead code (#110749),2024-12-16 22:24:04+00:00,Jan Kotas,1,45155059d0b070e8ac0f6ad8f4909448e7eadd42,"Fix reloc type produced by ilasm in PE64 images (#111212)

Fixes #111189",3,0,24,delete dead code (issue_ref)
dotnet/runtime,d108be1917222891d3a41ac798441a248a046989,"[cdac] Remove GetMethodDescData fallback to legacy DAC (#110702)

- Make cDAC `GetMethodDescData` implementation stop delegating to the legacy DAC as a fallback.
- Debug.Assert cDAC/DAC hresults on failure",2024-12-16 22:32:22+00:00,Elinor Fung,0,,,3,196,153,[cdac] remove getmethoddescdata fallback to legacy dac (issue_ref)- make cdac implementation stop delegating to the legacy dac as a fallback.- debug.assert cdac/dac hresults on failure
dotnet/runtime,3410c763587fe2dca4d1dc5888f91708a6fff816,"[JIT] Enable EGPRs in JIT by adding REX2 encoding to the backend. (#106557)

* Ruihan: POC with REX2

Update comments.

Merge the REX2 changes into the original legacy emit path

bug fix: Set REX2.W with correct mask code.

register encoding and prefix emitting logics.

Add REX2 prefix emit logic

bug fixes

Add Stress mode for REX2 encoding and some bug fixes

resolve comments:
1. add assertion check for UD opcodes.
2. add checks for EGPRs.

Add REX2 to emitOutputAM, and let LEA to be REX2 compatible.

Add REX2.X encoding for SIB byte

But fixes: add REX2 prefix on the path in RI where MOV is specially handled.

Enable REX2 encoding for `movups`

fixed bugs in REX2 prefix emitting logic when working with map 1 instructions, and enabled REX2 for POPCNT

legacy map index-er

bug fixes

some clean-up

Adding initial APX unit testing path.

Adding a coredistools dll that has LLVM APX disasm capability.

It must be coppied into a CORE_ROOT manually.

clean up work for REX2

narrow the REX2 scope to `sub` only

some clean up based on the comments.

bug fix

resolve comment

* resolve comments

* refactor register encoding for REX2

* merge REX2 path to legacy path

* Enable REX2 in more instructions.

* Avoid repeatedly estimate the size of REX2 prefix

* Enable REX2 encoding on RI and SV path
 - SV path is mostly for debugging purposes

Added encoding unit tests for instructions with immediates

* Add rex2 support to rotate and shift.

* CR session.

* Testing infra updates: assert REX2 is enabled.
Code refactoring: AddX86PrefixIfNeeded.

* revert rcl_N and rcr_N, tp and latency data for these instructions is missing in JIT, may indicate these instructions are not being used in JIT, drop them for now.

* partially enable REX2 on emitOutputAM, case covered: R_AR and AR_R.

* Adding unit tests.

* push, pop, inc, dec, neg, not, xadd, shld, shrd, cmpxchg, setcc, bswap.

* bug fix for bswap

* bt

* xchg, idiv

* Make sure add REX2 prefix if register encoding for EGPRs are being called before adding any prefix.

* Ensure code size is correctly computed in R_R_I path.

* clean up

* Change all AddSimdPrefix to AddX86Prefix
Refactor REX2 encoding stress logics.

* div, mulEAX

* filter out test from REX2 encoding when using ACC form.
(this will have side effect that the estimated code will go up and mismatch with actual code size.)

* Make sure REX prefix will not be added when emitting with REX2.

* resolve comments.

* make sure the APX debug knob is only available under debug build.

* clean up some out-dated code.

* enable movsxd

* Enable ""Call""

* Enable ""JMP""

* resolve merge errors

* formatting

* remote coredistools.dll for internal tests only

* bug fix

* resolve comments

* add more emitter tests.

* resolve comments.

* clean up some comments and tweak the REX2 stress logic

* clean up

* formatting.

* resolve comments.",2024-12-17 00:27:39+00:00,Ruihan-Yin,1,43f7d321228c7e03f537d95b7193845b89b50709,"JIT: remove phis right after optimizing (#110821)

They serve no useful purpose once SSA is gone, and they potentially confuse
other parts of the JIT.

Was also going to make the PHIs zero cost, but this apparently was already
done (not sure when/how).

Closes #88841",11,974,161,"[jit] enable egprs in jit by adding rex2 encoding to the backend. (issue_ref)* ruihan: poc with rex2update comments.merge the rex2 changes into the original legacy emit pathbug fix: set rex2.w with correct mask code.register encoding and prefix emitting logics.add rex2 prefix emit logicbug fixesadd stress mode for rex2 encoding and some bug fixesresolve comments:1. add assertion check for ud opcodes.2. add checks for egprs.add rex2 to emitoutputam, and let lea to be rex2 compatible.add rex2.x encoding for sib bytebut"
dotnet/runtime,144dcae3497f73366ec7d076e6e7ea4ff856ce7d,"Avoid a list/array allocation in Task.WhenAll(enumerable) (#110536)

When the incoming enumerable isn't a `Task[]` or `List<Task>`, we end up allocating either a `Task[]` or a `List<T>` (which then may incur one or more array allocations under the covers). We can avoid that by using a builder, either seeded with stack memory for",2024-12-17 00:31:58+00:00,Stephen Toub,0,,,3,23,15,"avoid a list/array allocation in task.whenall(enumerable) (issue_ref)when the incoming enumerable isn't a or , we end up allocating either a or a (which then may incur one or more array allocations under the covers). we can avoid that by using a builder, either seeded with stack memory for"
dotnet/runtime,e78ee77456c94b83c83e485bb1a16a1d3d3a2573,"Remove Helper Method Frames (HMF) from Reflection (#110627)

Convert Signature.GetSignature() to QCall.
Rename Signature.GetSignature() to Signature.Init().
Remove HMF from Signature.GetTypeParameterOffset().
Remove HMF from Signature.GetCallingConventionFromFunctionPointerAtOffset().
Convert Signature.GetCustomModifiersAtOffset() to QCall.
Convert RuntimeTypeHandle.GetDeclaringMethodForGenericParameter() to QCall.
Rename RuntimeTypeHandle.GetDeclaringMethod() to RuntimeTypeHandle.GetDeclaringMethodForGenericParameter().
Convert RuntimeTypeHandle.CanCastTo() to slow/fast paths using FCall/QCall.
Remove HMF from RuntimeMethodHandle::GetMethodDef().
Convert RuntimeMethodHandle.GetStubIfNeeded() to fast/slow paths using FCall/QCall.
Convert RuntimeTypeHandle.SatisfiesConstraints() to QCall.
Convert RuntimeMethodHandle.GetMethodBody() to QCall.",2024-12-17 03:09:35+00:00,Aaron Robinson,0,,,21,723,742,remove helper method frames (hmf) from reflection (issue_ref)convert signature.getsignature() to qcall.rename signature.getsignature() to signature.init().remove hmf from signature.gettypeparameteroffset().remove hmf from signature.getcallingconventionfromfunctionpointeratoffset().convert signature.getcustommodifiersatoffset() to qcall.convert runtimetypehandle.getdeclaringmethodforgenericparameter() to qcall.rename runtimetypehandle.getdeclaringmethod() to runtimetypehandle.getdeclaringmethodforgenericparameter().convert runtimetypehandle.cancastto() to slow/fast paths using fcall/qcall.remove hmf from runtimemethodhandle::getmethoddef().convert runtimemethodhandle.getstubifneeded() to fast/slow paths using fcall/qcall.convert runtimetypehandle.satisfiesconstraints() to qcall.convert runtimemethodhandle.getmethodbody() to qcall.
dotnet/runtime,9482c1ed378dfde2f540b99cb99685396b3bd4c2,Fix ambiguous call build break in Fuzzing project (#110761),2024-12-17 10:47:10+00:00,Miha Zupan,1,75b550d7d3b5b27a74b5bff9c1cb09c42f4fb3ab,"Implement WriteStringValueSegment defined in Issue 67337 (#101356)

* Implement WriteStringValueSegment defined in Issue 67337

* Fix some review comments

* Handle split surrogate pair

* Commit old changes responding to comments

* utf8 and utf16

* fix build error

* Update src/libraries/System.Text.Json/src/System/Text/Json/Writer/Utf8JsonWriter.WriteValues.StringSegment.cs

Co-authored-by: Eirik Tsarpalis <eirik.tsarpalis@gmail.com>

* Update src/libraries/System.Text.Json/src/System/Text/Json/Writer/Utf8JsonWriter.WriteValues.StringSegment.cs

Co-authored-by: Eirik Tsarpalis <eirik.tsarpalis@gmail.com>

* PR comments

* add encoding flags

* add test for switching encoding

* use CoreLib Rune for polyfill instead of having a separate copy

* move warning disabling to top and fix  up tests

* add fuzzer

* Fix some tests I missed

* clean  up and add another test to fuzzer

* comment typo

Co-authored-by: Eirik Tsarpalis <eirik.tsarpalis@gmail.com>

* pr comments

* throw when encodings are mixed

* update fuzzer to assert that mixing encodings always throws

* pr comments

---------

Co-authored-by: Pranav Senthilnathan <pranas@microsoft.com>
Co-authored-by: Pranav Senthilnathan <pranav.senthilnathan@live.com>
Co-authored-by: Eirik Tsarpalis <eirik.tsarpalis@gmail.com>",1,0,3,fix ambiguous call build break in fuzzing project (issue_ref)
dotnet/runtime,6e894a87a7cc69ac90817860534c7fe223eae4cb,"[wasm] Fix rebuild of browser-bench with startup apps (#110776)

This fixes 2 issues

 * clean build of browser-bench with startup apps failed, because
   WBT's dotnet-latest wasn't available when setting the sdk spath
 * problem with rebuilding WBT, where WBT fails with

```
runtime/src/mono/nuget/Microsoft.NET.Runtime.WorkloadTesting.Internal/Sdk/WorkloadTesting.Core.targets(201,5): error MSB4018: The ""InstallWorkloadFromArtifacts"" task failed unexpectedly. [runtime/src/mono/wasm/Wasm.Build.Tests/Wasm.Build.Tests.csproj] [runtime/src/mono/sample/wasm/browser-bench/Wasm.Browser.Bench.Sample.csproj]
runtime/src/mono/nuget/Microsoft.NET.Runtime.WorkloadTesting.Internal/Sdk/WorkloadTesting.Core.targets(201,5): error MSB4018: System.IO.IOException: Directory not empty : 'runtime/artifacts/bin/dotnet-latest/host/fxr/10.0.0-alpha.1.24610.2' [runtime/src/mono/wasm/Wasm.Build.Tests/Wasm.Build.Tests.csproj] [runtime/src/mono/sample/wasm/browser-bench/Wasm.Browser.Bench.Sample.csproj]
runtime/src/mono/nuget/Microsoft.NET.Runtime.WorkloadTesting.Internal/Sdk/WorkloadTesting.Core.targets(201,5): error MSB4018: at System.IO.FileSystem.RemoveDirectoryRecursive(String fullPath) [runtime/src/mono/wasm/Wasm.Build.Tests/Wasm.Build.Tests.csproj] [runtime/src/mono/sample/wasm/browser-bench/Wasm.Browser.Bench.Sample.csproj]
runtime/src/mono/nuget/Microsoft.NET.Runtime.WorkloadTesting.Internal/Sdk/WorkloadTesting.Core.targets(201,5): error MSB4018: at Microsoft.Workload.Build.Tasks.InstallWorkloadFromArtifacts.Execute() [runtime/src/mono/wasm/Wasm.Build.Tests/Wasm.Build.Tests.csproj] [runtime/src/mono/sample/wasm/browser-bench/Wasm.Browser.Bench.Sample.csproj]
runtime/src/mono/nuget/Microsoft.NET.Runtime.WorkloadTesting.Internal/Sdk/WorkloadTesting.Core.targets(201,5): error MSB4018: at Microsoft.Build.BackEnd.TaskExecutionHost.Execute() [runtime/src/mono/wasm/Wasm.Build.Tests/Wasm.Build.Tests.csproj] [runtime/src/mono/sample/wasm/browser-bench/Wasm.Browser.Bench.Sample.csproj]
runtime/src/mono/nuget/Microsoft.NET.Runtime.WorkloadTesting.Internal/Sdk/WorkloadTesting.Core.targets(201,5): error MSB4018: at Microsoft.Build.BackEnd.TaskBuilder.ExecuteInstantiatedTask(TaskExecutionHost taskExecutionHost, TaskLoggingContext taskLoggingContext, TaskHost taskHost, ItemBucket bucket, TaskExecutionMode howToExecuteTask) [runtime/src/mono/wasm/Wasm.Build.Tests/Wasm.Build.Tests.csproj] [runtime/src/mono/sample/wasm/browser-bench/Wasm.Browser.Bench.Sample.csproj]
      0 Warning(s)
      1 Error(s)

```",2024-12-17 11:58:24+00:00,Radek Doulik,1,040cbe276907174316e2cc07b35814b3069874a6,"[wasm] Fix templates patch in the bench (#110779)

The templates were updated recently. It also updates the copying of the files again as the tfm's are in sync now.",1,5,3,"[wasm] fix rebuild of browser-bench with startup apps (issue_ref)this fixes 2 issues * clean build of browser-bench with startup apps failed, because wbt's dotnet-latest wasn't available when setting the sdk spath * problem with rebuilding wbt, where wbt fails with"
dotnet/runtime,ce9dd2ad46a4842f5cf0f03c4a30b4d29bd0b4cc,"Re-enable bundle archive building in source build (#110448)

Co-authored-by: Viktor Hofer <viktor.hofer@microsoft.com>",2024-12-17 12:35:03+00:00,Jeremy Koritzinsky,0,,,1,1,1,re-enable bundle archive building in source build (issue_ref)
dotnet/runtime,8a25506957ae24effa9f57c7e4d5571f9e6bc9be,"[browser] Remove WASM `HybridGlobalization` from runtime code (#110567)

* Removal of `HybridGlobalization` code from the runtime and libs.

* Remove `HybridGlobalization` flag and clean the tests from it.

* Fix build.

* Fix build, remove unused leftovers.

* Fix linker tests.

* Fix the CI error, revert ""icudt_hybrid.dat"" removal.

* Fix WBT that expected `icudt_hybrid.dat` to be missing.",2024-12-17 13:50:32+00:00,Ilona Tomkowicz,1,5c86aadc5dce3991ff5cf707c02062c5c4316232,"[mono][tasks] reduce large allocations in build tasks (#112295)

* Simplify comparisons

* Preserve the original useHash behavior

* Fix typo

* add some useless abstraction

* sequence equal will be handled by the compiler

* Go back to simple bytewise comparison

* Dispose the streams and add a comment",69,79,2218,"[browser] remove wasm from runtime code (issue_ref)* removal of code from the runtime and libs.* remove flag and clean the tests from it.* fix build.* fix build, remove unused leftovers.* fix linker tests.* fix the ci error, revert ""icudt_hybrid.dat"" removal.* fix wbt that expected to be missing."
dotnet/runtime,6d6f2bd36c7d5e134177383958b02522b770bd04,"Fix base type marking for DAM annotated classes (#110655)

Fixes #104740, also implements #110563 for ILC.

The annotation on DAM annotated classes gets triggered by calling GetType on a location typed as something DAM annotated (or deriving/implementing from it).

The marking is done in layers so that warning suppressions can be properly applied. The bug was that we didn't walk down the hierarchy and assumed someone else will do it. Nobody did. I'm adding a new node type to do the marking.

Previously, we only used one node for tracking. The node got dropped into the dependency graph when we saw GetType being called and it ensured the proper marking for that one type (not the bases). We also added conditional dependencies into MethodTables so that `Derived` can depend on this node of the `Base`. This ensured that if GetType was called on Base, we'd treat it same as GetType on Derived. This was resulting in marking too much and too little (we'd mark right away when we saw GetType call, irrespective of the MethodTable existence, and we wouldn't walk down to Base if the GetType was called on Derived.

The fix is to use two node types. One simply tracks ""GetType was called on something"". It doesn't bring any other dependencies with it. We only use it to condition other nodes. The other node represents ""the dependencies from the annotations"".

The way this works is:
* We see GetType called on Base, so we add ObjectGetTypeCalledNode for Base.
* We generate MethodTable for Derived, which adds a conditional dependency on ObjectGetTypeCalledNode of Derived if ObjectGetTypeCalledNode of Base is in the graph. (This ensures ""walking up the hierarchy"".)
* MethodTable of Derived also adds a conditional dependency on ObjectGetTypeFlowDependenciesNode of Derived if ObjectGetTypeCalledNode of Derived is part of the graph. This will do the actual marking but only if the MethodTable and GetType call was seen.
* ObjectGetTypeFlowDependenciesNode also ""walks down the hierarchy"" and makes sure ObjectGetTypeFlowDependenciesNode of all the bases and interfaces are present in the graph.

This happens to also address #110563. Because of that, I had to update tests since ILC started trimming more stuff without seeing the type as constructed.",2024-12-17 14:34:09+00:00,Michal Strehovský,1,d75c745ad9f0336ff54e240f1c78f1c93344f3a1,"Warn on message formatting failure instead of crash, and fix Native AOT MakeGenericType failure (#110330)

ILC doesn't make sure that an instantiation from MakeGenericType/Method fulfills the constraints of the generic type/method, which can create to nonsense types that fail asserts in other places. The fix is to ensure that the constraints are valid before determining the dependencies of the instantiated generic.",14,313,40,"fix base type marking for dam annotated classes (issue_ref)fixes issue_ref, also implements issue_ref for ilc.the annotation on dam annotated classes gets triggered by calling gettype on a location typed as something dam annotated (or deriving/implementing from it).the marking is done in layers so that warning suppressions can be properly applied. the bug was that we didn't walk down the hierarchy and assumed someone else will do it. nobody did. i'm adding a new node type to do the marking.previously, we only used one node for tracking. the node got dropped into the dependency graph when we saw gettype being called and it ensured the proper marking for that one type (not the bases). we also added conditional dependencies into methodtables so that can depend on this node of the . this ensured that if gettype was called on base, we'd treat it same as gettype on derived. this was resulting in marking too much and too little (we'd mark right away when we saw gettype call, irrespective of the methodtable existence, and we wouldn't walk down to base if the gettype was called on derived.the fix is to use two node types. one simply tracks ""gettype was called on something"". it doesn't bring any other dependencies with it. we only use it to condition other nodes. the other node represents ""the dependencies from the annotations"".the way this works is:* we see gettype called on base, so we add objectgettypecallednode for base.* we generate methodtable for derived, which adds a conditional dependency on objectgettypecallednode of derived if objectgettypecallednode of base is in the graph. (this ensures ""walking up the hierarchy"".)* methodtable of derived also adds a conditional dependency on objectgettypeflowdependenciesnode of derived if objectgettypecallednode of derived is part of the graph. this will do the actual marking but only if the methodtable and gettype call was seen.* objectgettypeflowdependenciesnode also ""walks down the hierarchy"" and makes sure objectgettypeflowdependenciesnode of all the bases and interfaces are present in the graph.this happens to also address issue_ref. because of that, i had to update tests since ilc started trimming more stuff without seeing the type as constructed."
dotnet/runtime,040cbe276907174316e2cc07b35814b3069874a6,"[wasm] Fix templates patch in the bench (#110779)

The templates were updated recently. It also updates the copying of the files again as the tfm's are in sync now.",2024-12-17 15:07:01+00:00,Radek Doulik,1,484c2b9d6c50251ad8a8710c3b4dcd65e159451b,"[wasm][bench] Fix startup templates build (#118272)

* [wasm][bench] Fix startup templates build

Update our patches and add not how to check that the patches are up to
date

* Fix a grammatical error

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2,4,4,[wasm] fix templates patch in the bench (issue_ref)the templates were updated recently. it also updates the copying of the files again as the tfm's are in sync now.
dotnet/runtime,c13a7b87987ffd903413ae52ed117026ff7bd3c4,"[main] Update dependencies from dotnet/source-build-reference-packages (#110529)

* Update dependencies from https://github.com/dotnet/source-build-reference-packages build 20241202.1

Microsoft.SourceBuild.Intermediate.source-build-reference-packages
 From Version 10.0.557602 -> To Version 10.0.560201

* Update dependencies from https://github.com/dotnet/source-build-reference-packages build 20241210.1

Microsoft.SourceBuild.Intermediate.source-build-reference-packages
 From Version 10.0.557602 -> To Version 10.0.561001

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2024-12-17 16:38:11+00:00,dotnet-maestro[bot],0,,,1,2,2,[main] update dependencies from dotnet/source-build-reference-packages (issue_ref)* update dependencies from build 20241202.1microsoft.sourcebuild.intermediate.source-build-reference-packages from version 10.0.557602 -> to version 10.0.560201* update dependencies from build 20241210.1microsoft.sourcebuild.intermediate.source-build-reference-packages from version 10.0.557602 -> to version 10.0.561001---------
dotnet/runtime,9a02107e78699dbd4b4f2f12277bcc6dbd889e89,"exclude obj/cmake from codeql.  (#110630)

* exclude obj/cmake

* PR feedback

* update comment.

* Update .CodeQL.yml

Co-authored-by: Jeremy Koritzinsky <jkoritzinsky@gmail.com>

---------

Co-authored-by: Jeremy Koritzinsky <jkoritzinsky@gmail.com>",2024-12-17 16:43:28+00:00,Manish Godse,0,,,1,6,0,exclude obj/cmake from codeql. (issue_ref)* exclude obj/cmake* pr feedback* update comment.* update .codeql.yml
dotnet/runtime,e65457031da52f57d03da721f381a82a5be64c03,"Update TagName docs to include behavior if tag is not found (#109934)

* Clarify documentation for TagList.IndexOf

Adds documentation to TagList.IndexOf that states the behavior when the key was not found.

* Clarify documentation for TagList.IndexOf

Adds documentation to TagList.IndexOf that states the behavior when the key was not found.",2024-12-17 20:01:35+00:00,Matthew P. Del Buono,0,,,2,2,0,update tagname docs to include behavior if tag is not found (issue_ref)* clarify documentation for taglist.indexofadds documentation to taglist.indexof that states the behavior when the key was not found.* clarify documentation for taglist.indexofadds documentation to taglist.indexof that states the behavior when the key was not found.
dotnet/runtime,8edcc3123615dfe02fbd830505b2acdd5f428bfa,"Remove `FCThrow`s from Reflection APIs. (#110766)

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2024-12-18 04:42:31+00:00,Aaron Robinson,1,8dcee504cb91ebd8890097ca8ca421ea547a29e2,"Set TypeLoadException.TypeName to the fully qualified name of the type that caused the exception (#111374)

* Set TypeLoadException.TypeName to the fully qualified name of the type that caused the exception

This is regression introduce by rewrite of type name parser in managed code.

Fixes #111059

* Workaround for Mono",7,65,195,remove s from reflection apis. (issue_ref)
dotnet/runtime,f6e46ff86b784db1106e2148d84e43432f96116c,"[main] Update dependencies from dotnet/roslyn-analyzers (#110119)

* Update dependencies from https://github.com/dotnet/roslyn-analyzers build 20241124.1

Microsoft.CodeAnalysis.Analyzers , Microsoft.CodeAnalysis.NetAnalyzers
 From Version 3.12.0-beta1.24559.1 -> To Version 3.12.0-beta1.24574.1

* Update dependencies from https://github.com/dotnet/roslyn-analyzers build 20241202.1

Microsoft.CodeAnalysis.Analyzers , Microsoft.CodeAnalysis.NetAnalyzers
 From Version 3.12.0-beta1.24559.1 -> To Version 3.12.0-beta1.24602.1

* Update dependencies from https://github.com/dotnet/roslyn-analyzers build 20241203.2

Microsoft.CodeAnalysis.Analyzers , Microsoft.CodeAnalysis.NetAnalyzers
 From Version 3.12.0-beta1.24559.1 -> To Version 3.12.0-beta1.24603.2

* Update dependencies from https://github.com/dotnet/roslyn-analyzers build 20241205.1

Microsoft.CodeAnalysis.Analyzers , Microsoft.CodeAnalysis.NetAnalyzers
 From Version 3.12.0-beta1.24559.1 -> To Version 3.12.0-beta1.24605.1

* Update dependencies from https://github.com/dotnet/roslyn-analyzers build 20241216.1

Microsoft.CodeAnalysis.Analyzers , Microsoft.CodeAnalysis.NetAnalyzers
 From Version 3.12.0-beta1.24559.1 -> To Version 3.12.0-beta1.24616.1

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Alexander Köplinger <alex.koeplinger@outlook.com>",2024-12-18 10:22:04+00:00,dotnet-maestro[bot],0,,,2,6,6,"[main] update dependencies from dotnet/roslyn-analyzers (issue_ref)* update dependencies from build 20241124.1microsoft.codeanalysis.analyzers , microsoft.codeanalysis.netanalyzers from version 3.12.0-beta1.24559.1 -> to version 3.12.0-beta1.24574.1* update dependencies from build 20241202.1microsoft.codeanalysis.analyzers , microsoft.codeanalysis.netanalyzers from version 3.12.0-beta1.24559.1 -> to version 3.12.0-beta1.24602.1* update dependencies from build 20241203.2microsoft.codeanalysis.analyzers , microsoft.codeanalysis.netanalyzers from version 3.12.0-beta1.24559.1 -> to version 3.12.0-beta1.24603.2* update dependencies from build 20241205.1microsoft.codeanalysis.analyzers , microsoft.codeanalysis.netanalyzers from version 3.12.0-beta1.24559.1 -> to version 3.12.0-beta1.24605.1* update dependencies from build 20241216.1microsoft.codeanalysis.analyzers , microsoft.codeanalysis.netanalyzers from version 3.12.0-beta1.24559.1 -> to version 3.12.0-beta1.24616.1---------"
dotnet/runtime,cdfafde684f4cf62db38dd0168362f43a15c89c1,"[main] Update dependencies from dnceng/internal/dotnet-optimization (#110308)

* Update dependencies from https://dev.azure.com/dnceng/internal/_git/dotnet-optimization build 20241128.4

optimization.linux-arm64.MIBC.Runtime , optimization.linux-x64.MIBC.Runtime , optimization.windows_nt-arm64.MIBC.Runtime , optimization.windows_nt-x64.MIBC.Runtime , optimization.windows_nt-x86.MIBC.Runtime , optimization.PGO.CoreCLR
 From Version 1.0.0-prerelease.24462.2 -> To Version 1.0.0-prerelease.24578.4

* Update dependencies from https://dev.azure.com/dnceng/internal/_git/dotnet-optimization build 20241207.2

optimization.linux-arm64.MIBC.Runtime , optimization.linux-x64.MIBC.Runtime , optimization.windows_nt-arm64.MIBC.Runtime , optimization.windows_nt-x64.MIBC.Runtime , optimization.windows_nt-x86.MIBC.Runtime , optimization.PGO.CoreCLR
 From Version 1.0.0-prerelease.24462.2 -> To Version 1.0.0-prerelease.24607.2

* Update dependencies from https://dev.azure.com/dnceng/internal/_git/dotnet-optimization build 20241212.6

optimization.linux-arm64.MIBC.Runtime , optimization.linux-x64.MIBC.Runtime , optimization.windows_nt-arm64.MIBC.Runtime , optimization.windows_nt-x64.MIBC.Runtime , optimization.windows_nt-x86.MIBC.Runtime , optimization.PGO.CoreCLR
 From Version 1.0.0-prerelease.24462.2 -> To Version 1.0.0-prerelease.24612.6

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2024-12-18 13:24:44+00:00,dotnet-maestro[bot],0,,,2,18,18,"[main] update dependencies from dnceng/internal/dotnet-optimization (issue_ref)* update dependencies from build 20241128.4optimization.linux-arm64.mibc.runtime , optimization.linux-x64.mibc.runtime , optimization.windows_nt-arm64.mibc.runtime , optimization.windows_nt-x64.mibc.runtime , optimization.windows_nt-x86.mibc.runtime , optimization.pgo.coreclr from version 1.0.0-prerelease.24462.2 -> to version 1.0.0-prerelease.24578.4* update dependencies from build 20241207.2optimization.linux-arm64.mibc.runtime , optimization.linux-x64.mibc.runtime , optimization.windows_nt-arm64.mibc.runtime , optimization.windows_nt-x64.mibc.runtime , optimization.windows_nt-x86.mibc.runtime , optimization.pgo.coreclr from version 1.0.0-prerelease.24462.2 -> to version 1.0.0-prerelease.24607.2* update dependencies from build 20241212.6optimization.linux-arm64.mibc.runtime , optimization.linux-x64.mibc.runtime , optimization.windows_nt-arm64.mibc.runtime , optimization.windows_nt-x64.mibc.runtime , optimization.windows_nt-x86.mibc.runtime , optimization.pgo.coreclr from version 1.0.0-prerelease.24462.2 -> to version 1.0.0-prerelease.24612.6---------"
dotnet/runtime,49f414592dddb1bb51f94270c46df276c535868c,"[main] Update dependencies from dotnet/xharness (#110528)

* Update dependencies from https://github.com/dotnet/xharness build 20241204.1

Microsoft.DotNet.XHarness.CLI , Microsoft.DotNet.XHarness.TestRunners.Common , Microsoft.DotNet.XHarness.TestRunners.Xunit
 From Version 10.0.0-prerelease.24575.1 -> To Version 10.0.0-prerelease.24604.1

* Update dependencies from https://github.com/dotnet/xharness build 20241210.1

Microsoft.DotNet.XHarness.CLI , Microsoft.DotNet.XHarness.TestRunners.Common , Microsoft.DotNet.XHarness.TestRunners.Xunit
 From Version 10.0.0-prerelease.24575.1 -> To Version 10.0.0-prerelease.24610.1

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2024-12-18 13:49:31+00:00,dotnet-maestro[bot],0,,,3,10,10,"[main] update dependencies from dotnet/xharness (issue_ref)* update dependencies from build 20241204.1microsoft.dotnet.xharness.cli , microsoft.dotnet.xharness.testrunners.common , microsoft.dotnet.xharness.testrunners.xunit from version 10.0.0-prerelease.24575.1 -> to version 10.0.0-prerelease.24604.1* update dependencies from build 20241210.1microsoft.dotnet.xharness.cli , microsoft.dotnet.xharness.testrunners.common , microsoft.dotnet.xharness.testrunners.xunit from version 10.0.0-prerelease.24575.1 -> to version 10.0.0-prerelease.24610.1---------"
dotnet/runtime,bee5ab754942b0d4d2029ae4186043a1dc1211fd,"[main] Update dependencies from dotnet/roslyn (#110690)

* Update dependencies from https://github.com/dotnet/roslyn build 20241213.1

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-3.24611.10 -> To Version 4.13.0-3.24613.1

* Update dependencies from https://github.com/dotnet/roslyn build 20241213.14

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-3.24611.10 -> To Version 4.13.0-3.24613.14

* Update dependencies from https://github.com/dotnet/roslyn build 20241214.4

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-3.24611.10 -> To Version 4.13.0-3.24614.4

* Update dependencies from https://github.com/dotnet/roslyn build 20241217.3

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-3.24611.10 -> To Version 4.13.0-3.24617.3

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2024-12-18 13:50:13+00:00,dotnet-maestro[bot],0,,,2,11,11,"[main] update dependencies from dotnet/roslyn (issue_ref)* update dependencies from build 20241213.1microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-3.24611.10 -> to version 4.13.0-3.24613.1* update dependencies from build 20241213.14microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-3.24611.10 -> to version 4.13.0-3.24613.14* update dependencies from build 20241214.4microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-3.24611.10 -> to version 4.13.0-3.24614.4* update dependencies from build 20241217.3microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-3.24611.10 -> to version 4.13.0-3.24617.3---------"
dotnet/runtime,237c7594967573e809db40b09dded0d4a6d98cec,"Revert ""Use FLS detach as thread termination notification on windows. (#110589)"" (#110801)

This reverts commit 69d80765741a92af937f91c9c944a6b7ec56297b.",2024-12-18 14:09:12+00:00,Jan Kotas,1,ddc786706341544a2e0fb209862b31b4d1d34b6f,"Remove uses of DECODE_RETURN_KIND part of GCInfo (#110799)

* make hijack frames leaf frames

* not using DECODE_RETURN_KIND in NativeAOT

* delete DECODE_RETURN_KIND

* Fix for unix (x64)

* fixes for AOT

* arm64 fixes

* fix for RISC platforms

* fix arm32 build

* remove unnecessary now PTFF_RAX_IS_GCREF and similar.

* fix fir arm32

* revert to the former value of DECODE_HAS_TAILCALLS - in case there are dependencies in diagnostics.",4,31,140,"revert ""use fls detach as thread termination notification on windows. (issue_ref)"" (issue_ref)this reverts commit 69d80765741a92af937f91c9c944a6b7ec56297b."
dotnet/runtime,5e52384e6350992c9c4cf4a23f7acf144e69528d,"Change assembler to clang in android MonoAOT (#110393)

* Change assembler to clang in android MonoAOT

* Disabled NdkToolFinder task

* Port changes to sample app

* Allowed overwriting AsOptions",2024-12-18 15:06:03+00:00,Jeremi Kurdek,0,,,4,71,38,change assembler to clang in android monoaot (issue_ref)* change assembler to clang in android monoaot* disabled ndktoolfinder task* port changes to sample app* allowed overwriting asoptions
dotnet/runtime,4152f6272aac59377df6d282da51a432c754b707,"Update dependencies from https://github.com/dotnet/hotreload-utils build 20241217.1 (#110813)

Microsoft.DotNet.HotReload.Utils.Generator.BuildTool
 From Version 10.0.0-alpha.0.24568.1 -> To Version 10.0.0-alpha.0.24617.1

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2024-12-18 18:34:19+00:00,dotnet-maestro[bot],0,,,2,3,3,update dependencies from build 20241217.1 (issue_ref)microsoft.dotnet.hotreload.utils.generator.buildtool from version 10.0.0-alpha.0.24568.1 -> to version 10.0.0-alpha.0.24617.1
dotnet/runtime,3e5b44a569e056fc2752d0f82e5827427b74bffb,"Remove FindFirstFile, FindNextFile and FindClose from PAL (#110797)

* Remove FindFirstFile, FindNextFile and FindClose from PAL

Also remove the related tests

* Modify superpmi mcs tool to not to use Find*File on Unix

* Fix access after free for string in error path",2024-12-18 20:37:58+00:00,Jan Vorlicek,1,fde7c8fa6b982a287e7b23fc6c9d84b12b6edd57,"Fix illumos compile errors in coreclr/tools/superpmi/mcs/verbmerge.cpp (#117464)

/runtime/src/coreclr/tools/superpmi/mcs/verbmerge.cpp: In static member function 'static bool verbMerge::DirectoryFilterDirectories(FilterArgType*)':
  /runtime/src/coreclr/tools/superpmi/mcs/verbmerge.cpp:188:19: error: 'verbMerge::FilterArgType' {aka 'struct dirent'} has no member named 'd_type'
    188 |     if (findData->d_type == DT_DIR)
        |                   ^~~~~~

For the fix, do similarly as: src/native/corehost/hostmisc/pal.unix.cpp

Let FilterArgType use struct FindData to simplify filters.
Handle the possibility of finding d_type == DT_UNKOWN

Add HAVE_DIRENT_D_TYPE introspection",27,197,5197,"remove findfirstfile, findnextfile and findclose from pal (issue_ref)* remove findfirstfile, findnextfile and findclose from palalso remove the related tests* modify superpmi mcs tool to not to use find*file on unix* fix access after free for string in error path"
dotnet/runtime,4822cc017a578c7b1d08ce6cb11d3c91690215b5,"JIT: revise how we track if nodes have been morphed (#110787)

Allow remorphing. Require that all nodes be morphed. Ensure that no node
is morphed more than a handful of times.

Fixes #6218, #56962, #107542",2024-12-18 21:01:26+00:00,Andy Ayers,1,5c6d1b3f7b63a3150ce6c737aeb4af03b3cce621,"JIT: add missing SetMorphed call (#111176)

to the comma created by `gtWrapWithSideEffects`.

Fixes #110960",7,293,222,"jit: revise how we track if nodes have been morphed (issue_ref)allow remorphing. require that all nodes be morphed. ensure that no nodeis morphed more than a handful of times.fixes issue_ref, issue_ref, issue_ref"
dotnet/runtime,43f7d321228c7e03f537d95b7193845b89b50709,"JIT: remove phis right after optimizing (#110821)

They serve no useful purpose once SSA is gone, and they potentially confuse
other parts of the JIT.

Was also going to make the PHIs zero cost, but this apparently was already
done (not sure when/how).

Closes #88841",2024-12-18 23:23:09+00:00,Andy Ayers,1,f97b9a0e5ba57cfc693b70803b2310c0e387a7f2,"JIT: Relax assertion for handlers of unreachable try clauses (#111652)

For unreachable try clauses it is possible to still see spurious flow
into their handlers because of second pass EH. We can then end up with a
case where a handler is dominated by one of its enclosed blocks. For
definitions in that enclosed block we thus won't find any phi in the
enclosing handler; tolerate this case.

Fix #111341",3,40,19,"jit: remove phis right after optimizing (issue_ref)they serve no useful purpose once ssa is gone, and they potentially confuseother parts of the jit.was also going to make the phis zero cost, but this apparently was alreadydone (not sure when/how).closes issue_ref"
dotnet/runtime,ddc786706341544a2e0fb209862b31b4d1d34b6f,"Remove uses of DECODE_RETURN_KIND part of GCInfo (#110799)

* make hijack frames leaf frames

* not using DECODE_RETURN_KIND in NativeAOT

* delete DECODE_RETURN_KIND

* Fix for unix (x64)

* fixes for AOT

* arm64 fixes

* fix for RISC platforms

* fix arm32 build

* remove unnecessary now PTFF_RAX_IS_GCREF and similar.

* fix fir arm32

* revert to the former value of DECODE_HAS_TAILCALLS - in case there are dependencies in diagnostics.",2024-12-19 06:37:04+00:00,Vladimir Sadov,1,d08dff5b310c6d643a896704f99d99127779a206,"Update to .NET 10 build images (#110198)

* Update to .NET 10 build images

This updates the libc requirement to:
- glibc 2.27
- musl libc 1.2.3

These images have LLVM 19.

* Use musl tags, update docs

* Fix arm32 build

The NEON_AVAILABLE and NEON_HAS_LD4 checks in zlib-ng attempt to pass
-mfpu=neon via CMAKE_REQUIRED_FLAGS, but our toolchain.cmake sets
-mfpu=vfpv4 via add_compile_options, which overrides the former.

Work around this by disabling neon on arm32 linux, matching .NET 9.

* Use FreeBSD 14 images

Co-authored-by: Adeel Mujahid <3840695+am11@users.noreply.github.com>

* Fix alpine arm32 build

---------

Co-authored-by: Adeel Mujahid <3840695+am11@users.noreply.github.com>",42,224,376,remove uses of decode_return_kind part of gcinfo (issue_ref)* make hijack frames leaf frames* not using decode_return_kind in nativeaot* delete decode_return_kind* fix for unix (x64)* fixes for aot* arm64 fixes* fix for risc platforms* fix arm32 build* remove unnecessary now ptff_rax_is_gcref and similar.* fix fir arm32* revert to the former value of decode_has_tailcalls - in case there are dependencies in diagnostics.
dotnet/runtime,2d1175bb24a234c48d0a52e608ac8142ca102da6,"[main] Update dependencies from dotnet/arcade (#110781)

* Update dependencies from https://github.com/dotnet/arcade build 20241216.1

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.24613.2 -> To Version 10.0.0-beta.24616.1

* Update dependencies from https://github.com/dotnet/arcade build 20241217.2

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.24613.2 -> To Version 10.0.0-beta.24617.2

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2024-12-19 11:49:51+00:00,dotnet-maestro[bot],0,,,4,62,62,"[main] update dependencies from dotnet/arcade (issue_ref)* update dependencies from build 20241216.1microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.versiontools.tasks , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.24613.2 -> to version 10.0.0-beta.24616.1* update dependencies from build 20241217.2microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.versiontools.tasks , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.24613.2 -> to version 10.0.0-beta.24617.2---------"
dotnet/runtime,36fef72a01727b0c58b8d5aa613f1711e934619e,Support generic fields in PersistedAssemblyBuilder (#110372),2024-12-19 14:59:52+00:00,Steve Harter,0,,,2,95,9,support generic fields in persistedassemblybuilder (issue_ref)
dotnet/runtime,b91087f9234bdc529d23dd2905f9813248615c3c,"Fix NativeAOT ThunksPool thunk data block size handling. (#110732)

* Fix NativeAOT ThunksPool thunk data block size handling.

dotnet/runtime#88710 made a change in TunkPool.cs
moving away from using a page size define to calling ThunkBlockSize
to get to end of thunk data block where a common stub address get stored.

This change is not equivalent on platforms where the thunk blocks are laid out
in pair where a stub thunk blocks are followed by a data thunk block and all
gets mapped from file. This is the schema used on Windows platforms.

In that layout schema the ThunkBlockSize is 2 * page size meaning that the
calculation getting to the end of the thunk data block will move to the end
of next thunk stub that is RX memory and storing the common stub address
at that location will trigger an AV.

This works on iOS since it reports its ThunkBlockSize as one page
but that is not totally correct since it uses 2 pages, just that
they are allocated in the same way as FEATURE_RX_THUNKS, all thunk stubs
blocks followed by all thunk data blocks. The reason why this works
is because it only maps the thunk stubs from file, reporting a
ThunkBlockSize that is inline with what gets map:ed from file,
but then there is a special handling in PalAllocateThunksFromTemplate on
iOS that virutal alloc template size * 2, mapping the first
template size bytes from the file and the rest are kept as its
thunk data blocks.

This commit adds a new function returning the size of the thunk data
block and use that when calculating the end of the data block instead
of using the ThunkBlockSize since its reflects the size of each block getting
mapped from file, on Windows platforms that is stub+data, 2 * page size.

* Switch to ThunkDataBlockSizeMask in one place.

* Include pointer size slot in data block size calculation.

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2024-12-19 16:28:50+00:00,Johan Lorensson,1,a29d5f97d0913c83bb8092ab9eebfd7ef5bdd3d9,"Revert ""Fix NativeAOT ThunksPool thunk data block size handling. (#110732)"" (#110983)

This reverts commit b91087f9234bdc529d23dd2905f9813248615c3c.",1,13,10,"fix nativeaot thunkspool thunk data block size handling. (issue_ref)* fix nativeaot thunkspool thunk data block size handling.dotnet/runtimeissue_ref made a change in tunkpool.csmoving away from using a page size define to calling thunkblocksizeto get to end of thunk data block where a common stub address get stored.this change is not equivalent on platforms where the thunk blocks are laid outin pair where a stub thunk blocks are followed by a data thunk block and allgets mapped from file. this is the schema used on windows platforms.in that layout schema the thunkblocksize is 2 * page size meaning that thecalculation getting to the end of the thunk data block will move to the endof next thunk stub that is rx memory and storing the common stub addressat that location will trigger an av.this works on ios since it reports its thunkblocksize as one pagebut that is not totally correct since it uses 2 pages, just thatthey are allocated in the same way as feature_rx_thunks, all thunk stubsblocks followed by all thunk data blocks. the reason why this worksis because it only maps the thunk stubs from file, reporting athunkblocksize that is inline with what gets map:ed from file,but then there is a special handling in palallocatethunksfromtemplate onios that virutal alloc template size * 2, mapping the firsttemplate size bytes from the file and the rest are kept as itsthunk data blocks.this commit adds a new function returning the size of the thunk datablock and use that when calculating the end of the data block insteadof using the thunkblocksize since its reflects the size of each block gettingmapped from file, on windows platforms that is stub+data, 2 * page size.* switch to thunkdatablocksizemask in one place.* include pointer size slot in data block size calculation."
dotnet/runtime,1019d315632c78b6bfc870e5893fa7ceb90b0e3c,Remove unsafe code from IPAddress (#110824),2024-12-19 17:05:30+00:00,Egor Bogatov,0,,,1,23,33,remove unsafe code from ipaddress (issue_ref)
dotnet/runtime,208b974f93c0ee35a171eba374ca36aa9a78e930,"Add vector support to System.Numerics.Tensors.TensorPrimitives.LeadingZeroCount for Byte and Int16 (#110333)

* Working for byte

* Working for ushort

* Cleanup

* Formatting

* Update src/libraries/System.Numerics.Tensors/src/System/Numerics/Tensors/netcore/TensorPrimitives.LeadingZeroCount.cs

Co-authored-by: Tanner Gooding <tagoo@outlook.com>

* Add comment for usage of PermuteVar64x8x2

---------

Co-authored-by: Alex Covington (Advanced Micro Devices <b-alexco@microsoft.com>
Co-authored-by: Tanner Gooding <tagoo@outlook.com>",2024-12-19 21:15:10+00:00,Alex Covington,0,,,1,112,7,add vector support to system.numerics.tensors.tensorprimitives.leadingzerocount for byte and int16 (issue_ref)* working for byte* working for ushort* cleanup* formatting* update src/libraries/system.numerics.tensors/src/system/numerics/tensors/netcore/tensorprimitives.leadingzerocount.cs
dotnet/runtime,64f5b0a2643bf63b8b13cd2ed01b58d5629aa812,"Don't let System.CommandLine swallow exceptions (#110851)

Apparently System.CommandLine will hijack unhandled exceptions by default so that it can print the stack trace in red. The price to pay for red stack traces is no crash dumps. It's not a very good tradeoff.",2024-12-20 08:37:43+00:00,Michal Strehovský,0,,,4,8,4,don't let system.commandline swallow exceptions (issue_ref)apparently system.commandline will hijack unhandled exceptions by default so that it can print the stack trace in red. the price to pay for red stack traces is no crash dumps. it's not a very good tradeoff.
dotnet/runtime,ec1e5618301432756374f9f38e2d2cf50bc30f1b,Simplify usage of the installer and shared framework SDKs based on improvements in the tooling (#109710),2024-12-20 10:49:39+00:00,Jeremy Koritzinsky,0,,,7,21,72,simplify usage of the installer and shared framework sdks based on improvements in the tooling (issue_ref)
dotnet/runtime,ec50bf1198c94ff17ac2f6015c546e11a2658aa6,"[main] Update dependencies from 7 repositories (#110083)

* Update dependencies from https://github.com/dotnet/cecil build 20241121.1

Microsoft.SourceBuild.Intermediate.cecil , Microsoft.DotNet.Cecil
 From Version 0.11.5-alpha.24569.4 -> To Version 0.11.5-alpha.24571.1

* Update dependencies from https://github.com/dotnet/source-build-externals build 20241121.1

Microsoft.SourceBuild.Intermediate.source-build-externals
 From Version 10.0.0-alpha.1.24568.1 -> To Version 10.0.0-alpha.1.24571.1

* Update dependencies from https://github.com/dotnet/cecil build 20241122.1

Microsoft.SourceBuild.Intermediate.cecil , Microsoft.DotNet.Cecil
 From Version 0.11.5-alpha.24569.4 -> To Version 0.11.5-alpha.24572.1

* Update dependencies from https://github.com/dotnet/runtime build 20241125.1

Microsoft.SourceBuild.Intermediate.runtime.linux-x64 , Microsoft.NET.Sdk.IL , Microsoft.NETCore.App.Runtime.win-x64 , Microsoft.NETCore.ILAsm , runtime.native.System.IO.Ports , System.Reflection.Metadata , System.Reflection.MetadataLoadContext , System.Text.Json
 From Version 10.0.0-alpha.1.24565.3 -> To Version 10.0.0-alpha.1.24575.1

* Update dependencies from https://github.com/dotnet/icu build 20241125.2

Microsoft.NETCore.Runtime.ICU.Transport
 From Version 10.0.0-alpha.1.24568.3 -> To Version 10.0.0-alpha.1.24575.2

* Update dependencies from https://github.com/dotnet/cecil build 20241125.1

Microsoft.SourceBuild.Intermediate.cecil , Microsoft.DotNet.Cecil
 From Version 0.11.5-alpha.24569.4 -> To Version 0.11.5-alpha.24575.1

* Update dependencies from https://github.com/dotnet/source-build-externals build 20241125.3

Microsoft.SourceBuild.Intermediate.source-build-externals
 From Version 10.0.0-alpha.1.24568.1 -> To Version 10.0.0-alpha.1.24575.3

* Update dependencies from https://github.com/dotnet/runtime build 20241201.1

Microsoft.SourceBuild.Intermediate.runtime.linux-x64 , Microsoft.NET.Sdk.IL , Microsoft.NETCore.App.Runtime.win-x64 , Microsoft.NETCore.ILAsm , runtime.native.System.IO.Ports , System.Reflection.Metadata , System.Reflection.MetadataLoadContext , System.Text.Json
 From Version 10.0.0-alpha.1.24565.3 -> To Version 10.0.0-alpha.1.24601.1

* Update dependencies from https://github.com/dotnet/icu build 20241202.2

Microsoft.NETCore.Runtime.ICU.Transport
 From Version 10.0.0-alpha.1.24568.3 -> To Version 10.0.0-alpha.1.24602.2

* Update dependencies from https://github.com/dotnet/cecil build 20241202.1

Microsoft.SourceBuild.Intermediate.cecil , Microsoft.DotNet.Cecil
 From Version 0.11.5-alpha.24569.4 -> To Version 0.11.5-alpha.24602.1

* Update dependencies from https://github.com/dotnet/runtime-assets build 20241202.1

Microsoft.DotNet.CilStrip.Sources , Microsoft.NET.HostModel.TestData , System.ComponentModel.TypeConverter.TestData , System.Data.Common.TestData , System.Drawing.Common.TestData , System.Formats.Tar.TestData , System.IO.Compression.TestData , System.IO.Packaging.TestData , System.Net.TestData , System.Private.Runtime.UnicodeData , System.Runtime.Numerics.TestData , System.Runtime.TimeZoneData , System.Security.Cryptography.X509Certificates.TestData , System.Text.RegularExpressions.TestData , System.Windows.Extensions.TestData
 From Version 10.0.0-beta.24571.1 -> To Version 10.0.0-beta.24602.1

* Update dependencies from https://github.com/dotnet/source-build-externals build 20241203.1

Microsoft.SourceBuild.Intermediate.source-build-externals
 From Version 10.0.0-alpha.1.24568.1 -> To Version 10.0.560301

* Update dependencies from https://github.com/dotnet/hotreload-utils build 20241204.1

Microsoft.DotNet.HotReload.Utils.Generator.BuildTool
 From Version 10.0.0-alpha.0.24568.1 -> To Version 10.0.0-alpha.0.24604.1

* Update dependencies from https://github.com/dotnet/sdk build 20241209.2

Microsoft.SourceBuild.Intermediate.sdk , Microsoft.DotNet.ApiCompat.Task
 From Version 10.0.100-alpha.1.24480.5 -> To Version 10.0.100-alpha.1.24609.2

* Update dependencies from https://github.com/dotnet/runtime build 20241209.1

Microsoft.SourceBuild.Intermediate.runtime.linux-x64 , Microsoft.NET.Sdk.IL , Microsoft.NETCore.App.Runtime.win-x64 , Microsoft.NETCore.ILAsm , runtime.native.System.IO.Ports , System.Reflection.Metadata , System.Reflection.MetadataLoadContext , System.Text.Json
 From Version 10.0.0-alpha.1.24565.3 -> To Version 10.0.0-alpha.1.24609.1

* Update dependencies from https://github.com/dotnet/icu build 20241209.1

Microsoft.NETCore.Runtime.ICU.Transport
 From Version 10.0.0-alpha.1.24568.3 -> To Version 10.0.0-alpha.1.24609.1

* Update dependencies from https://github.com/dotnet/runtime-assets build 20241209.1

Microsoft.DotNet.CilStrip.Sources , Microsoft.NET.HostModel.TestData , System.ComponentModel.TypeConverter.TestData , System.Data.Common.TestData , System.Drawing.Common.TestData , System.Formats.Tar.TestData , System.IO.Compression.TestData , System.IO.Packaging.TestData , System.Net.TestData , System.Private.Runtime.UnicodeData , System.Runtime.Numerics.TestData , System.Runtime.TimeZoneData , System.Security.Cryptography.X509Certificates.TestData , System.Text.RegularExpressions.TestData , System.Windows.Extensions.TestData
 From Version 10.0.0-beta.24571.1 -> To Version 10.0.0-beta.24609.1

* Update dependencies from https://github.com/dotnet/hotreload-utils build 20241209.2

Microsoft.DotNet.HotReload.Utils.Generator.BuildTool
 From Version 10.0.0-alpha.0.24568.1 -> To Version 10.0.0-alpha.0.24609.2

* Update dependencies from https://github.com/dotnet/cecil build 20241209.1

Microsoft.SourceBuild.Intermediate.cecil , Microsoft.DotNet.Cecil
 From Version 0.11.5-alpha.24569.4 -> To Version 0.11.5-alpha.24609.1

* Update dependencies from https://github.com/dotnet/source-build-externals build 20241209.2

Microsoft.SourceBuild.Intermediate.source-build-externals
 From Version 10.0.0-alpha.1.24568.1 -> To Version 10.0.560902

* Update dependencies from https://github.com/dotnet/runtime build 20241216.1

Microsoft.SourceBuild.Intermediate.runtime.linux-x64 , Microsoft.NET.Sdk.IL , Microsoft.NETCore.App.Runtime.win-x64 , Microsoft.NETCore.ILAsm , runtime.native.System.IO.Ports , System.Reflection.Metadata , System.Reflection.MetadataLoadContext , System.Text.Json
 From Version 10.0.0-alpha.1.24565.3 -> To Version 10.0.0-alpha.1.24616.1

* Update dependencies from https://github.com/dotnet/sdk build 20241216.1

Microsoft.SourceBuild.Intermediate.sdk , Microsoft.DotNet.ApiCompat.Task
 From Version 10.0.100-alpha.1.24480.5 -> To Version 10.0.100-alpha.1.24616.1

* Update dependencies from https://github.com/dotnet/icu build 20241216.2

Microsoft.NETCore.Runtime.ICU.Transport
 From Version 10.0.0-alpha.1.24568.3 -> To Version 10.0.0-alpha.1.24616.2

* Update dependencies from https://github.com/dotnet/cecil build 20241216.1

Microsoft.SourceBuild.Intermediate.cecil , Microsoft.DotNet.Cecil
 From Version 0.11.5-alpha.24569.4 -> To Version 0.11.5-alpha.24616.1

* Update dependencies from https://github.com/dotnet/source-build-externals build 20241216.1

Microsoft.SourceBuild.Intermediate.source-build-externals
 From Version 10.0.0-alpha.1.24568.1 -> To Version 10.0.561601

* Update dependencies from https://github.com/dotnet/hotreload-utils build 20241217.1

Microsoft.DotNet.HotReload.Utils.Generator.BuildTool
 From Version 10.0.0-alpha.0.24568.1 -> To Version 10.0.0-alpha.0.24617.1

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Alexander Köplinger <alex.koeplinger@outlook.com>",2024-12-20 13:23:25+00:00,dotnet-maestro[bot],0,,,3,83,83,"[main] update dependencies from 7 repositories (issue_ref)* update dependencies from build 20241121.1microsoft.sourcebuild.intermediate.cecil , microsoft.dotnet.cecil from version 0.11.5-alpha.24569.4 -> to version 0.11.5-alpha.24571.1* update dependencies from build 20241121.1microsoft.sourcebuild.intermediate.source-build-externals from version 10.0.0-alpha.1.24568.1 -> to version 10.0.0-alpha.1.24571.1* update dependencies from build 20241122.1microsoft.sourcebuild.intermediate.cecil , microsoft.dotnet.cecil from version 0.11.5-alpha.24569.4 -> to version 0.11.5-alpha.24572.1* update dependencies from build 20241125.1microsoft.sourcebuild.intermediate.runtime.linux-x64 , microsoft.net.sdk.il , microsoft.netcore.app.runtime.win-x64 , microsoft.netcore.ilasm , runtime.native.system.io.ports , system.reflection.metadata , system.reflection.metadataloadcontext , system.text.json from version 10.0.0-alpha.1.24565.3 -> to version 10.0.0-alpha.1.24575.1* update dependencies from build 20241125.2microsoft.netcore.runtime.icu.transport from version 10.0.0-alpha.1.24568.3 -> to version 10.0.0-alpha.1.24575.2* update dependencies from build 20241125.1microsoft.sourcebuild.intermediate.cecil , microsoft.dotnet.cecil from version 0.11.5-alpha.24569.4 -> to version 0.11.5-alpha.24575.1* update dependencies from build 20241125.3microsoft.sourcebuild.intermediate.source-build-externals from version 10.0.0-alpha.1.24568.1 -> to version 10.0.0-alpha.1.24575.3* update dependencies from build 20241201.1microsoft.sourcebuild.intermediate.runtime.linux-x64 , microsoft.net.sdk.il , microsoft.netcore.app.runtime.win-x64 , microsoft.netcore.ilasm , runtime.native.system.io.ports , system.reflection.metadata , system.reflection.metadataloadcontext , system.text.json from version 10.0.0-alpha.1.24565.3 -> to version 10.0.0-alpha.1.24601.1* update dependencies from build 20241202.2microsoft.netcore.runtime.icu.transport from version 10.0.0-alpha.1.24568.3 -> to version 10.0.0-alpha.1.24602.2* update dependencies from build 20241202.1microsoft.sourcebuild.intermediate.cecil , microsoft.dotnet.cecil from version 0.11.5-alpha.24569.4 -> to version 0.11.5-alpha.24602.1* update dependencies from build 20241202.1microsoft.dotnet.cilstrip.sources , microsoft.net.hostmodel.testdata , system.componentmodel.typeconverter.testdata , system.data.common.testdata , system.drawing.common.testdata , system.formats.tar.testdata , system.io.compression.testdata , system.io.packaging.testdata , system.net.testdata , system.private.runtime.unicodedata , system.runtime.numerics.testdata , system.runtime.timezonedata , system.security.cryptography.x509certificates.testdata , system.text.regularexpressions.testdata , system.windows.extensions.testdata from version 10.0.0-beta.24571.1 -> to version 10.0.0-beta.24602.1* update dependencies from build 20241203.1microsoft.sourcebuild.intermediate.source-build-externals from version 10.0.0-alpha.1.24568.1 -> to version 10.0.560301* update dependencies from build 20241204.1microsoft.dotnet.hotreload.utils.generator.buildtool from version 10.0.0-alpha.0.24568.1 -> to version 10.0.0-alpha.0.24604.1* update dependencies from build 20241209.2microsoft.sourcebuild.intermediate.sdk , microsoft.dotnet.apicompat.task from version 10.0.100-alpha.1.24480.5 -> to version 10.0.100-alpha.1.24609.2* update dependencies from build 20241209.1microsoft.sourcebuild.intermediate.runtime.linux-x64 , microsoft.net.sdk.il , microsoft.netcore.app.runtime.win-x64 , microsoft.netcore.ilasm , runtime.native.system.io.ports , system.reflection.metadata , system.reflection.metadataloadcontext , system.text.json from version 10.0.0-alpha.1.24565.3 -> to version 10.0.0-alpha.1.24609.1* update dependencies from build 20241209.1microsoft.netcore.runtime.icu.transport from version 10.0.0-alpha.1.24568.3 -> to version 10.0.0-alpha.1.24609.1* update dependencies from build 20241209.1microsoft.dotnet.cilstrip.sources , microsoft.net.hostmodel.testdata , system.componentmodel.typeconverter.testdata , system.data.common.testdata , system.drawing.common.testdata , system.formats.tar.testdata , system.io.compression.testdata , system.io.packaging.testdata , system.net.testdata , system.private.runtime.unicodedata , system.runtime.numerics.testdata , system.runtime.timezonedata , system.security.cryptography.x509certificates.testdata , system.text.regularexpressions.testdata , system.windows.extensions.testdata from version 10.0.0-beta.24571.1 -> to version 10.0.0-beta.24609.1* update dependencies from build 20241209.2microsoft.dotnet.hotreload.utils.generator.buildtool from version 10.0.0-alpha.0.24568.1 -> to version 10.0.0-alpha.0.24609.2* update dependencies from build 20241209.1microsoft.sourcebuild.intermediate.cecil , microsoft.dotnet.cecil from version 0.11.5-alpha.24569.4 -> to version 0.11.5-alpha.24609.1* update dependencies from build 20241209.2microsoft.sourcebuild.intermediate.source-build-externals from version 10.0.0-alpha.1.24568.1 -> to version 10.0.560902* update dependencies from build 20241216.1microsoft.sourcebuild.intermediate.runtime.linux-x64 , microsoft.net.sdk.il , microsoft.netcore.app.runtime.win-x64 , microsoft.netcore.ilasm , runtime.native.system.io.ports , system.reflection.metadata , system.reflection.metadataloadcontext , system.text.json from version 10.0.0-alpha.1.24565.3 -> to version 10.0.0-alpha.1.24616.1* update dependencies from build 20241216.1microsoft.sourcebuild.intermediate.sdk , microsoft.dotnet.apicompat.task from version 10.0.100-alpha.1.24480.5 -> to version 10.0.100-alpha.1.24616.1* update dependencies from build 20241216.2microsoft.netcore.runtime.icu.transport from version 10.0.0-alpha.1.24568.3 -> to version 10.0.0-alpha.1.24616.2* update dependencies from build 20241216.1microsoft.sourcebuild.intermediate.cecil , microsoft.dotnet.cecil from version 0.11.5-alpha.24569.4 -> to version 0.11.5-alpha.24616.1* update dependencies from build 20241216.1microsoft.sourcebuild.intermediate.source-build-externals from version 10.0.0-alpha.1.24568.1 -> to version 10.0.561601* update dependencies from build 20241217.1microsoft.dotnet.hotreload.utils.generator.buildtool from version 10.0.0-alpha.0.24568.1 -> to version 10.0.0-alpha.0.24617.1---------"
dotnet/runtime,5e38bb11cc8b039de8b704cc97217eb4cc76fa5c,"Update dependencies from https://github.com/dotnet/roslyn build 20241219.11 (#110850)

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-3.24617.3 -> To Version 4.13.0-3.24619.11

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2024-12-20 13:48:32+00:00,dotnet-maestro[bot],0,,,2,11,11,"update dependencies from build 20241219.11 (issue_ref)microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-3.24617.3 -> to version 4.13.0-3.24619.11"
dotnet/runtime,aa190d60fdb6e6f2469657e9c5eb73c398f7993d,"[mono] Chain `SIGSEGV` native crashes to the default `SIGSEGV` handler (#110741)

* Consider SIG_DFL handlers for chaining SIGSEGV signals",2024-12-20 14:50:56+00:00,Ivan Povazan,0,,,5,48,5,[mono] chain native crashes to the default handler (issue_ref)* consider sig_dfl handlers for chaining sigsegv signals
dotnet/runtime,b6038a4d837523cdab681f29e963ed249332a41c,"JIT: Generalize parameter register to local mapping in the backend (#110795)

This PR generalizes the backend's treatment of which parameter registers are
mapped to which locals. Before this PR, parameter locals implicitly are defined
from the incoming parameter registers/stack. For old promotion, the backend then
knows that some registers can be mapped cleanly into the fields of those
promoted locals, allowing for efficient handling of structs passed in registers.

This PR adds an explicit data structure that indicates if the backend needs to
make any special mappings for parameter registers. The data structure maps
incoming register segments to locals. The PR changes the backend to use this
data structure as follows:
- Lowering is changed to create these mapping for old promoted local struct
  fields
- LSRA is changed to consult the mappings when building definitions for
  parameters
- Codegen is changed to consult the mappings when physically generating the code
  that moves incoming parameter registers to their corresponding local

In the future, the lowering part can be changed to recognize and optimize IR in
the initial block when it looks like creating more mappings will be beneficial.
The IR physical promotion creates will allow this optimization to kick in.",2024-12-20 15:48:42+00:00,Jakob Botsch Nielsen,0,,,12,334,348,"jit: generalize parameter register to local mapping in the backend (issue_ref)this pr generalizes the backend's treatment of which parameter registers aremapped to which locals. before this pr, parameter locals implicitly are definedfrom the incoming parameter registers/stack. for old promotion, the backend thenknows that some registers can be mapped cleanly into the fields of thosepromoted locals, allowing for efficient handling of structs passed in registers.this pr adds an explicit data structure that indicates if the backend needs tomake any special mappings for parameter registers. the data structure mapsincoming register segments to locals. the pr changes the backend to use thisdata structure as follows:- lowering is changed to create these mapping for old promoted local struct fields- lsra is changed to consult the mappings when building definitions for parameters- codegen is changed to consult the mappings when physically generating the code that moves incoming parameter registers to their corresponding localin the future, the lowering part can be changed to recognize and optimize ir inthe initial block when it looks like creating more mappings will be beneficial.the ir physical promotion creates will allow this optimization to kick in."
dotnet/runtime,241cc703ba5590ca94911e14e09c5c9d6f6532de,[main] Update icu dependencies and clean the manifest (#110802),2024-12-20 17:05:48+00:00,Ilona Tomkowicz,0,,,3,3,4,[main] update icu dependencies and clean the manifest (issue_ref)
dotnet/runtime,9e7d746638dd5facb456d50427e293f25c79a12d,"Update dependencies from https://github.com/dotnet/arcade build 20241217.3 (#110862)

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.24617.2 -> To Version 10.0.0-beta.24617.3

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2024-12-20 17:08:21+00:00,dotnet-maestro[bot],0,,,4,62,62,"update dependencies from build 20241217.3 (issue_ref)microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.versiontools.tasks , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.24617.2 -> to version 10.0.0-beta.24617.3"
dotnet/runtime,57ab984bd0dbbacd02315d41e09144d2823e9475,"Fix workload id for mobile-library-builder in 9.0 WorkloadManifest.json.in (#110868)

It shouldn't have the .0 suffix to match the other workloads.",2024-12-20 20:28:53+00:00,Alexander Köplinger,1,29d286b2c063abb8a426439a5fab517bf02fa582,"Fix mistakes in net9 WorkloadManifest.json (#111950)

* Fix mistakes in net9 and current WorkloadManifest.json

I noticed these while working on the workload manifest move to the sdk repo.
We were missing the alias-to for the templates and missed the net9 in the package id for microsoft-net-runtime-macos-net9.

* Revert the template changes",1,1,1,fix workload id for mobile-library-builder in 9.0 workloadmanifest.json.in (issue_ref)it shouldn't have the .0 suffix to match the other workloads.
dotnet/runtime,0cba4a126edefdc0584e21fb7e180e44aa2e7b88,"Do not encode safe points with -1 offset. (#110845)

* Do not record safe points with -1 adjustmnt

* NORMALIZE_CODE_OFFSET  on RISC

* denormalize code offsets in ILCompiler.Reflection.ReadyToRun.Amd64

* bump the min R2R version and GCInfo version

* Do not record Return Kind

* m_ReturnKind is not needed in non-legacy GC encoder, regardless X86 or not.",2024-12-22 16:34:33+00:00,Vladimir Sadov,1,6c73c19a954098d73395d310fbde54e08f86c557,Fix reversed code offsets in GcInfo (#111792),14,105,271,"do not encode safe points with -1 offset. (issue_ref)* do not record safe points with -1 adjustmnt* normalize_code_offset on risc* denormalize code offsets in ilcompiler.reflection.readytorun.amd64* bump the min r2r version and gcinfo version* do not record return kind* m_returnkind is not needed in non-legacy gc encoder, regardless x86 or not."
dotnet/runtime,31af68bcfe08911c4bff57b24dc12774d19c2dc9,"Update dependencies from https://github.com/dotnet/source-build-reference-packages build 20241220.1 (#110906)

Microsoft.SourceBuild.Intermediate.source-build-reference-packages
 From Version 10.0.561001 -> To Version 10.0.562001

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2024-12-23 07:48:07+00:00,dotnet-maestro[bot],0,,,1,2,2,update dependencies from build 20241220.1 (issue_ref)microsoft.sourcebuild.intermediate.source-build-reference-packages from version 10.0.561001 -> to version 10.0.562001
dotnet/runtime,2b60d82ef3e87876128b7f71922a1b72908b6fcf,"Update dependencies from https://github.com/dotnet/arcade build 20241222.1 (#110907)

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.24617.3 -> To Version 10.0.0-beta.24622.1

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2024-12-25 18:51:39+00:00,dotnet-maestro[bot],0,,,7,136,87,"update dependencies from build 20241222.1 (issue_ref)microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.versiontools.tasks , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.24617.3 -> to version 10.0.0-beta.24622.1"
dotnet/runtime,e5878e95931f2207472afb423c1236dae0aece07,"Update dependencies from https://github.com/dotnet/arcade build 20241222.1 (#110894)

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.24617.3 -> To Version 10.0.0-beta.24622.1

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2024-12-26 14:20:12+00:00,dotnet-maestro[bot],0,,,0,0,0,"update dependencies from build 20241222.1 (issue_ref)microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.versiontools.tasks , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.24617.3 -> to version 10.0.0-beta.24622.1"
dotnet/runtime,75b550d7d3b5b27a74b5bff9c1cb09c42f4fb3ab,"Implement WriteStringValueSegment defined in Issue 67337 (#101356)

* Implement WriteStringValueSegment defined in Issue 67337

* Fix some review comments

* Handle split surrogate pair

* Commit old changes responding to comments

* utf8 and utf16

* fix build error

* Update src/libraries/System.Text.Json/src/System/Text/Json/Writer/Utf8JsonWriter.WriteValues.StringSegment.cs

Co-authored-by: Eirik Tsarpalis <eirik.tsarpalis@gmail.com>

* Update src/libraries/System.Text.Json/src/System/Text/Json/Writer/Utf8JsonWriter.WriteValues.StringSegment.cs

Co-authored-by: Eirik Tsarpalis <eirik.tsarpalis@gmail.com>

* PR comments

* add encoding flags

* add test for switching encoding

* use CoreLib Rune for polyfill instead of having a separate copy

* move warning disabling to top and fix  up tests

* add fuzzer

* Fix some tests I missed

* clean  up and add another test to fuzzer

* comment typo

Co-authored-by: Eirik Tsarpalis <eirik.tsarpalis@gmail.com>

* pr comments

* throw when encodings are mixed

* update fuzzer to assert that mixing encodings always throws

* pr comments

---------

Co-authored-by: Pranav Senthilnathan <pranas@microsoft.com>
Co-authored-by: Pranav Senthilnathan <pranav.senthilnathan@live.com>
Co-authored-by: Eirik Tsarpalis <eirik.tsarpalis@gmail.com>",2024-12-26 21:20:31+00:00,Brad,1,e3c6605a1e67df1b69bd9ea18a9de995b138ef2b,Fix a couple error cases in Json parsing (#116446),29,2800,844,implement writestringvaluesegment defined in issue 67337 (issue_ref)* implement writestringvaluesegment defined in issue 67337* fix some review comments* handle split surrogate pair* commit old changes responding to comments* utf8 and utf16* fix build error* update src/libraries/system.text.json/src/system/text/json/writer/utf8jsonwriter.writevalues.stringsegment.cs
dotnet/runtime,194ad1667552ed2538bbbb83e336979b02ae6482,Code clean up around TryWriteBigEndian/TryWriteLittleEndian (#110897),2024-12-26 21:47:52+00:00,Egor Bogatov,0,,,18,154,458,code clean up around trywritebigendian/trywritelittleendian (issue_ref)
dotnet/runtime,ebcc886a4a97decef3d4e6ba04b2a080859d9687,Delete unnecessary #pragma warning disable (#110948),2024-12-27 15:49:54+00:00,Jan Kotas,0,,,1,0,3,delete unnecessary #pragma warning disable (issue_ref)
dotnet/runtime,9f03591f354445893a191f5331d4af85b8737b91,Remove MonoAOT aarch64 linux-gnu-5 build condition (#110965),2024-12-27 16:33:51+00:00,Matous Kozak,0,,,1,0,1,remove monoaot aarch64 linux-gnu-5 build condition (issue_ref)
dotnet/runtime,2eb59bf786b7d29feb84fc270530ff2aed65d9e7,[Safe code] Clean up Guid.TryFormatX (#110923),2024-12-27 20:30:23+00:00,Egor Bogatov,0,,,1,61,75,[safe code] clean up guid.tryformatx (issue_ref)
dotnet/runtime,670db5c71851946b9ec3f669f4a67d4339836a0e,Remove redundant 'unsafe' context (#110953),2024-12-28 20:33:19+00:00,Egor Bogatov,1,0b9f7349bfcaf96ff66127a0f7a0b6a6711761d0,"Improve error message when seeking to negative position in FileStream (#120626)

Fixes #112112

Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>",105,209,221,remove redundant 'unsafe' context (issue_ref)
dotnet/runtime,3f918c377110a8b50aa97aa5b7594922d77b3e50,"Use correct product version in SPC in servicing (#110980)

I noticed we missed to port the version changes from https://github.com/dotnet/runtime/pull/108899#pullrequestreview-2371679935 to main. This does that so we embed the correct version number for `FrameworkDescription` into System.Private.CoreLib even during servicing when using the stabilized version.

I simplified the source generator to pass the InformationalVersion msbuild property into the compilation instead of using reflection on the generator assembly.",2024-12-30 08:27:41+00:00,Alexander Köplinger,1,289aa17cac46fc4c2fb3e5889030f5379ca8e92a,"Add linux-riscv64 nativeaot runtime build (#110688)

* Fix registers/offsets in riscv-nativeaot.

* Fix *.S files in riscv-nativeaot.

* Fix riscv64 nativeaot native build

* Managed build fixes

* Apply suggestions from code review

Co-authored-by: Tymoteusz Wenerski <tymoteusz.wenerski@gmail.com>

* Apply suggestions from code review

Co-authored-by: Tomasz Sowiński <tomeksowi@gmail.com>

* Update other macros in AsmOffsetsVerify

* Update src/coreclr/tools/aot/ILCompiler.Compiler/Compiler/ObjectWriter/ElfObjectWriter.cs

Co-authored-by: Adeel Mujahid <3840695+am11@users.noreply.github.com>

---------

Co-authored-by: sunlijun <sunlijun@loongson.cn>
Co-authored-by: Tomek Sowiński <tomeksowi@gmail.com>
Co-authored-by: Tymoteusz Wenerski <tymoteusz.wenerski@gmail.com>
Co-authored-by: Jan Kotas <jkotas@microsoft.com>",6,19,15,use correct product version in spc in servicing (issue_ref)i noticed we missed to port the version changes from #pullrequestreview-2371679935 to main. this does that so we embed the correct version number for into system.private.corelib even during servicing when using the stabilized version.i simplified the source generator to pass the informationalversion msbuild property into the compilation instead of using reflection on the generator assembly.
dotnet/runtime,5cc07a1251926d8c1dfba0d58faabab11e049587,"Update dependencies from https://github.com/dotnet/roslyn build 20241229.5 (#110991)

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-3.24619.11 -> To Version 4.13.0-3.24629.5

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2024-12-30 12:32:21+00:00,dotnet-maestro[bot],0,,,2,11,11,"update dependencies from build 20241229.5 (issue_ref)microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-3.24619.11 -> to version 4.13.0-3.24629.5"
dotnet/runtime,669077a9d5226f7ba3b4cca9048981fd1b37e821,"Update dependencies from https://github.com/dotnet/roslyn-analyzers build 20241229.1 (#110990)

Microsoft.CodeAnalysis.Analyzers , Microsoft.CodeAnalysis.NetAnalyzers
 From Version 3.12.0-beta1.24616.1 -> To Version 3.12.0-beta1.24629.1

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2024-12-30 12:33:18+00:00,dotnet-maestro[bot],0,,,2,4,4,"update dependencies from build 20241229.1 (issue_ref)microsoft.codeanalysis.analyzers , microsoft.codeanalysis.netanalyzers from version 3.12.0-beta1.24616.1 -> to version 3.12.0-beta1.24629.1"
dotnet/runtime,4a9d4bfa37229c3180e28640f142b99d70bcc294,"Update dependencies from https://github.com/dotnet/arcade build 20241226.1 (#110989)

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.24622.1 -> To Version 10.0.0-beta.24626.1

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2024-12-30 12:34:44+00:00,dotnet-maestro[bot],0,,,5,65,69,"update dependencies from build 20241226.1 (issue_ref)microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.versiontools.tasks , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.24622.1 -> to version 10.0.0-beta.24626.1"
dotnet/runtime,9e28706dbc252e27174dce1a3b8f69c8ecc912b7,"[main] Update dependencies from dotnet/cecil, dotnet/hotreload-utils, dotnet/icu, dotnet/runtime-assets, dotnet/sdk, dotnet/source-build-externals (#110883)

* Update dependencies from https://github.com/dotnet/runtime-assets build 20241220.2

Microsoft.DotNet.CilStrip.Sources , Microsoft.NET.HostModel.TestData , System.ComponentModel.TypeConverter.TestData , System.Data.Common.TestData , System.Drawing.Common.TestData , System.Formats.Tar.TestData , System.IO.Compression.TestData , System.IO.Packaging.TestData , System.Net.TestData , System.Private.Runtime.UnicodeData , System.Runtime.Numerics.TestData , System.Runtime.TimeZoneData , System.Security.Cryptography.X509Certificates.TestData , System.Text.RegularExpressions.TestData , System.Windows.Extensions.TestData
 From Version 10.0.0-beta.24609.1 -> To Version 10.0.0-beta.24620.2

* Update dependencies from https://github.com/dotnet/hotreload-utils build 20241219.1

Microsoft.DotNet.HotReload.Utils.Generator.BuildTool
 From Version 10.0.0-alpha.0.24617.1 -> To Version 10.0.0-alpha.0.24619.1

* Update dependencies from https://github.com/dotnet/source-build-externals build 20241219.2

Microsoft.SourceBuild.Intermediate.source-build-externals
 From Version 10.0.561601 -> To Version 10.0.561902

* Update dependencies from https://github.com/dotnet/icu build 20241222.1

Microsoft.NETCore.Runtime.ICU.Transport
 From Version 10.0.0-alpha.1.24619.1 -> To Version 10.0.0-alpha.1.24622.1

* Update dependencies from https://github.com/dotnet/sdk build 20241222.2

Microsoft.SourceBuild.Intermediate.sdk , Microsoft.DotNet.ApiCompat.Task
 From Version 10.0.100-alpha.1.24616.1 -> To Version 10.0.100-alpha.1.24622.2

* Update dependencies from https://github.com/dotnet/icu build 20241222.2

Microsoft.NETCore.Runtime.ICU.Transport
 From Version 10.0.0-alpha.1.24619.1 -> To Version 10.0.0-alpha.1.24622.2

* Update dependencies from https://github.com/dotnet/runtime-assets build 20241223.1

Microsoft.DotNet.CilStrip.Sources , Microsoft.NET.HostModel.TestData , System.ComponentModel.TypeConverter.TestData , System.Data.Common.TestData , System.Drawing.Common.TestData , System.Formats.Tar.TestData , System.IO.Compression.TestData , System.IO.Packaging.TestData , System.Net.TestData , System.Private.Runtime.UnicodeData , System.Runtime.Numerics.TestData , System.Runtime.TimeZoneData , System.Security.Cryptography.X509Certificates.TestData , System.Text.RegularExpressions.TestData , System.Windows.Extensions.TestData
 From Version 10.0.0-beta.24609.1 -> To Version 10.0.0-beta.24623.1

* Update dependencies from https://github.com/dotnet/icu build 20241227.1

Microsoft.NETCore.Runtime.ICU.Transport
 From Version 10.0.0-alpha.1.24619.1 -> To Version 10.0.0-alpha.1.24627.1

* Update dependencies from https://github.com/dotnet/runtime-assets build 20241227.1

Microsoft.DotNet.CilStrip.Sources , Microsoft.NET.HostModel.TestData , System.ComponentModel.TypeConverter.TestData , System.Data.Common.TestData , System.Drawing.Common.TestData , System.Formats.Tar.TestData , System.IO.Compression.TestData , System.IO.Packaging.TestData , System.Net.TestData , System.Private.Runtime.UnicodeData , System.Runtime.Numerics.TestData , System.Runtime.TimeZoneData , System.Security.Cryptography.X509Certificates.TestData , System.Text.RegularExpressions.TestData , System.Windows.Extensions.TestData
 From Version 10.0.0-beta.24609.1 -> To Version 10.0.0-beta.24627.1

* Update dependencies from https://github.com/dotnet/hotreload-utils build 20241227.1

Microsoft.DotNet.HotReload.Utils.Generator.BuildTool
 From Version 10.0.0-alpha.0.24617.1 -> To Version 10.0.0-alpha.0.24627.1

* Update dependencies from https://github.com/dotnet/cecil build 20241227.1

Microsoft.SourceBuild.Intermediate.cecil , Microsoft.DotNet.Cecil
 From Version 0.11.5-alpha.24616.1 -> To Version 0.11.5-alpha.24627.1

* Update dependencies from https://github.com/dotnet/source-build-externals build 20241223.1

Microsoft.SourceBuild.Intermediate.source-build-externals
 From Version 10.0.561601 -> To Version 10.0.562301

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2024-12-30 12:40:40+00:00,dotnet-maestro[bot],0,,,2,63,63,"[main] update dependencies from dotnet/cecil, dotnet/hotreload-utils, dotnet/icu, dotnet/runtime-assets, dotnet/sdk, dotnet/source-build-externals (issue_ref)* update dependencies from build 20241220.2microsoft.dotnet.cilstrip.sources , microsoft.net.hostmodel.testdata , system.componentmodel.typeconverter.testdata , system.data.common.testdata , system.drawing.common.testdata , system.formats.tar.testdata , system.io.compression.testdata , system.io.packaging.testdata , system.net.testdata , system.private.runtime.unicodedata , system.runtime.numerics.testdata , system.runtime.timezonedata , system.security.cryptography.x509certificates.testdata , system.text.regularexpressions.testdata , system.windows.extensions.testdata from version 10.0.0-beta.24609.1 -> to version 10.0.0-beta.24620.2* update dependencies from build 20241219.1microsoft.dotnet.hotreload.utils.generator.buildtool from version 10.0.0-alpha.0.24617.1 -> to version 10.0.0-alpha.0.24619.1* update dependencies from build 20241219.2microsoft.sourcebuild.intermediate.source-build-externals from version 10.0.561601 -> to version 10.0.561902* update dependencies from build 20241222.1microsoft.netcore.runtime.icu.transport from version 10.0.0-alpha.1.24619.1 -> to version 10.0.0-alpha.1.24622.1* update dependencies from build 20241222.2microsoft.sourcebuild.intermediate.sdk , microsoft.dotnet.apicompat.task from version 10.0.100-alpha.1.24616.1 -> to version 10.0.100-alpha.1.24622.2* update dependencies from build 20241222.2microsoft.netcore.runtime.icu.transport from version 10.0.0-alpha.1.24619.1 -> to version 10.0.0-alpha.1.24622.2* update dependencies from build 20241223.1microsoft.dotnet.cilstrip.sources , microsoft.net.hostmodel.testdata , system.componentmodel.typeconverter.testdata , system.data.common.testdata , system.drawing.common.testdata , system.formats.tar.testdata , system.io.compression.testdata , system.io.packaging.testdata , system.net.testdata , system.private.runtime.unicodedata , system.runtime.numerics.testdata , system.runtime.timezonedata , system.security.cryptography.x509certificates.testdata , system.text.regularexpressions.testdata , system.windows.extensions.testdata from version 10.0.0-beta.24609.1 -> to version 10.0.0-beta.24623.1* update dependencies from build 20241227.1microsoft.netcore.runtime.icu.transport from version 10.0.0-alpha.1.24619.1 -> to version 10.0.0-alpha.1.24627.1* update dependencies from build 20241227.1microsoft.dotnet.cilstrip.sources , microsoft.net.hostmodel.testdata , system.componentmodel.typeconverter.testdata , system.data.common.testdata , system.drawing.common.testdata , system.formats.tar.testdata , system.io.compression.testdata , system.io.packaging.testdata , system.net.testdata , system.private.runtime.unicodedata , system.runtime.numerics.testdata , system.runtime.timezonedata , system.security.cryptography.x509certificates.testdata , system.text.regularexpressions.testdata , system.windows.extensions.testdata from version 10.0.0-beta.24609.1 -> to version 10.0.0-beta.24627.1* update dependencies from build 20241227.1microsoft.dotnet.hotreload.utils.generator.buildtool from version 10.0.0-alpha.0.24617.1 -> to version 10.0.0-alpha.0.24627.1* update dependencies from build 20241227.1microsoft.sourcebuild.intermediate.cecil , microsoft.dotnet.cecil from version 0.11.5-alpha.24616.1 -> to version 0.11.5-alpha.24627.1* update dependencies from build 20241223.1microsoft.sourcebuild.intermediate.source-build-externals from version 10.0.561601 -> to version 10.0.562301---------"
dotnet/runtime,1613dd360914841b0dc1976a8499fce54a47f6a6,add minipalconfig.h (#110985),2024-12-30 17:09:39+00:00,Sanjam Panda,0,,,1,1,0,add minipalconfig.h (issue_ref)
dotnet/runtime,6045e29bbefa63b58ccd5502f057ae452f3c83af,"[main] Update dependencies from dotnet/emsdk (#110884)

* Update dependencies from https://github.com/dotnet/emsdk build 20241220.2

Microsoft.SourceBuild.Intermediate.emsdk , Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport
 From Version 10.0.0-alpha.1.24613.1 -> To Version 10.0.0-alpha.1.24620.2

Dependency coherency updates

runtime.linux-arm64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.linux-x64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.win-arm64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.win-x64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.osx-arm64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.osx-x64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.linux-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.linux-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.linux-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.linux-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.linux-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.linux-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.win-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.win-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.win-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.osx-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.osx-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.osx-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.osx-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.osx-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.osx-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools
 From Version 19.1.0-alpha.1.24569.1 -> To Version 19.1.0-alpha.1.24609.1 (parent: Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport

* Update dependencies from https://github.com/dotnet/emsdk build 20241221.1

Microsoft.SourceBuild.Intermediate.emsdk , Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport
 From Version 10.0.0-alpha.1.24613.1 -> To Version 10.0.0-alpha.1.24621.1

Dependency coherency updates

runtime.linux-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.linux-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.osx-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.osx-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.win-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.win-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport
 From Version 10.0.0-alpha.1.24554.4 -> To Version 10.0.0-alpha.1.24620.2 (parent: Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport

* Update dependencies from https://github.com/dotnet/emsdk build 20241224.2

Microsoft.SourceBuild.Intermediate.emsdk , Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport
 From Version 10.0.0-alpha.1.24613.1 -> To Version 10.0.0-alpha.1.24624.2

Dependency coherency updates

runtime.linux-arm64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.linux-x64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.win-arm64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.win-x64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.osx-arm64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.osx-x64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.linux-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.linux-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.linux-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.linux-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.linux-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.linux-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.win-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.win-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.win-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.osx-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.osx-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.osx-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.osx-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.osx-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.osx-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.linux-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.linux-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.osx-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.osx-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.win-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.win-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport
 From Version 19.1.0-alpha.1.24569.1 -> To Version 19.1.0-alpha.1.24619.1 (parent: Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport

* Update dependencies from https://github.com/dotnet/emsdk build 20241227.4

Microsoft.SourceBuild.Intermediate.emsdk , Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport
 From Version 10.0.0-alpha.1.24613.1 -> To Version 10.0.0-alpha.1.24627.4

Dependency coherency updates

runtime.linux-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.linux-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.osx-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.osx-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.win-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.win-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport
 From Version 10.0.0-alpha.1.24554.4 -> To Version 10.0.0-alpha.1.24623.1 (parent: Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport

* Update dependencies from https://github.com/dotnet/emsdk build 20241228.1

Microsoft.SourceBuild.Intermediate.emsdk , Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport
 From Version 10.0.0-alpha.1.24613.1 -> To Version 10.0.0-alpha.1.24628.1

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2024-12-30 21:01:12+00:00,dotnet-maestro[bot],0,,,2,109,109,"[main] update dependencies from dotnet/emsdk (issue_ref)* update dependencies from build 20241220.2microsoft.sourcebuild.intermediate.emsdk , microsoft.net.workload.emscripten.current.manifest-10.0.100.transport from version 10.0.0-alpha.1.24613.1 -> to version 10.0.0-alpha.1.24620.2dependency coherency updatesruntime.linux-arm64.microsoft.netcore.runtime.jit.tools,runtime.linux-x64.microsoft.netcore.runtime.jit.tools,runtime.linux-musl-arm64.microsoft.netcore.runtime.jit.tools,runtime.linux-musl-x64.microsoft.netcore.runtime.jit.tools,runtime.win-arm64.microsoft.netcore.runtime.jit.tools,runtime.win-x64.microsoft.netcore.runtime.jit.tools,runtime.osx-arm64.microsoft.netcore.runtime.jit.tools,runtime.osx-x64.microsoft.netcore.runtime.jit.tools,runtime.linux-arm64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.linux-arm64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.linux-arm64.microsoft.netcore.runtime.mono.llvm.tools,runtime.linux-musl-arm64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.linux-musl-arm64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.linux-musl-arm64.microsoft.netcore.runtime.mono.llvm.tools,runtime.linux-x64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.linux-x64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.linux-x64.microsoft.netcore.runtime.mono.llvm.tools,runtime.linux-musl-x64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.linux-musl-x64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.linux-musl-x64.microsoft.netcore.runtime.mono.llvm.tools,runtime.win-x64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.win-x64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.win-x64.microsoft.netcore.runtime.mono.llvm.tools,runtime.osx-arm64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.osx-arm64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.osx-arm64.microsoft.netcore.runtime.mono.llvm.tools,runtime.osx-x64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.osx-x64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.osx-x64.microsoft.netcore.runtime.mono.llvm.tools from version 19.1.0-alpha.1.24569.1 -> to version 19.1.0-alpha.1.24609.1 (parent: microsoft.net.workload.emscripten.current.manifest-10.0.100.transport* update dependencies from build 20241221.1microsoft.sourcebuild.intermediate.emsdk , microsoft.net.workload.emscripten.current.manifest-10.0.100.transport from version 10.0.0-alpha.1.24613.1 -> to version 10.0.0-alpha.1.24621.1dependency coherency updatesruntime.linux-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.linux-musl-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.linux-x64.microsoft.netcore.runtime.wasm.node.transport,runtime.linux-musl-x64.microsoft.netcore.runtime.wasm.node.transport,runtime.osx-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.osx-x64.microsoft.netcore.runtime.wasm.node.transport,runtime.win-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.win-x64.microsoft.netcore.runtime.wasm.node.transport from version 10.0.0-alpha.1.24554.4 -> to version 10.0.0-alpha.1.24620.2 (parent: microsoft.net.workload.emscripten.current.manifest-10.0.100.transport* update dependencies from build 20241224.2microsoft.sourcebuild.intermediate.emsdk , microsoft.net.workload.emscripten.current.manifest-10.0.100.transport from version 10.0.0-alpha.1.24613.1 -> to version 10.0.0-alpha.1.24624.2dependency coherency updatesruntime.linux-arm64.microsoft.netcore.runtime.jit.tools,runtime.linux-x64.microsoft.netcore.runtime.jit.tools,runtime.linux-musl-arm64.microsoft.netcore.runtime.jit.tools,runtime.linux-musl-x64.microsoft.netcore.runtime.jit.tools,runtime.win-arm64.microsoft.netcore.runtime.jit.tools,runtime.win-x64.microsoft.netcore.runtime.jit.tools,runtime.osx-arm64.microsoft.netcore.runtime.jit.tools,runtime.osx-x64.microsoft.netcore.runtime.jit.tools,runtime.linux-arm64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.linux-arm64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.linux-arm64.microsoft.netcore.runtime.mono.llvm.tools,runtime.linux-musl-arm64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.linux-musl-arm64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.linux-musl-arm64.microsoft.netcore.runtime.mono.llvm.tools,runtime.linux-x64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.linux-x64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.linux-x64.microsoft.netcore.runtime.mono.llvm.tools,runtime.linux-musl-x64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.linux-musl-x64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.linux-musl-x64.microsoft.netcore.runtime.mono.llvm.tools,runtime.win-x64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.win-x64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.win-x64.microsoft.netcore.runtime.mono.llvm.tools,runtime.osx-arm64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.osx-arm64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.osx-arm64.microsoft.netcore.runtime.mono.llvm.tools,runtime.osx-x64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.osx-x64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.osx-x64.microsoft.netcore.runtime.mono.llvm.tools,runtime.linux-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.linux-musl-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.linux-x64.microsoft.netcore.runtime.wasm.node.transport,runtime.linux-musl-x64.microsoft.netcore.runtime.wasm.node.transport,runtime.osx-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.osx-x64.microsoft.netcore.runtime.wasm.node.transport,runtime.win-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.win-x64.microsoft.netcore.runtime.wasm.node.transport from version 19.1.0-alpha.1.24569.1 -> to version 19.1.0-alpha.1.24619.1 (parent: microsoft.net.workload.emscripten.current.manifest-10.0.100.transport* update dependencies from build 20241227.4microsoft.sourcebuild.intermediate.emsdk , microsoft.net.workload.emscripten.current.manifest-10.0.100.transport from version 10.0.0-alpha.1.24613.1 -> to version 10.0.0-alpha.1.24627.4dependency coherency updatesruntime.linux-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.linux-musl-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.linux-x64.microsoft.netcore.runtime.wasm.node.transport,runtime.linux-musl-x64.microsoft.netcore.runtime.wasm.node.transport,runtime.osx-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.osx-x64.microsoft.netcore.runtime.wasm.node.transport,runtime.win-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.win-x64.microsoft.netcore.runtime.wasm.node.transport from version 10.0.0-alpha.1.24554.4 -> to version 10.0.0-alpha.1.24623.1 (parent: microsoft.net.workload.emscripten.current.manifest-10.0.100.transport* update dependencies from build 20241228.1microsoft.sourcebuild.intermediate.emsdk , microsoft.net.workload.emscripten.current.manifest-10.0.100.transport from version 10.0.0-alpha.1.24613.1 -> to version 10.0.0-alpha.1.24628.1---------"
dotnet/runtime,511d26611c051c56e546404ea616c220cc78817c,"Warn on method access in Requires analyzers (#110086)

The issue with calling Methods with requires is the the method itself,
not the parameters. Warning on the entire invocation including the
parameters can be confusing. Instead, we should warn just on the method
access for Requires. DynamicallyAccessedMembers should still warn on the
invocation.

Also updates the Microsoft.Extensions.Configuration diagnostic suppressor to work suppress warnings on the method access, not only on method invocation warnings.",2024-12-31 22:05:37+00:00,Jackson Schuster,1,cb3f507bacf3d941c44458613dc4129ef5508265,"Fix config source gen with value tuple (#115233)

* Fix config source gen with ValueTuple

* Fix comment

* Remove un-needed comment",6,67,57,"warn on method access in requires analyzers (issue_ref)the issue with calling methods with requires is the the method itself,not the parameters. warning on the entire invocation including theparameters can be confusing. instead, we should warn just on the methodaccess for requires. dynamicallyaccessedmembers should still warn on theinvocation.also updates the microsoft.extensions.configuration diagnostic suppressor to work suppress warnings on the method access, not only on method invocation warnings."
dotnet/runtime,95814d0f99fd876fdc2f6b5b4cf5d5fc94adaea9,"[main] Update dependencies from dnceng/internal/dotnet-optimization (#110904)

* Update dependencies from https://dev.azure.com/dnceng/internal/_git/dotnet-optimization build 20241222.6

optimization.linux-arm64.MIBC.Runtime , optimization.linux-x64.MIBC.Runtime , optimization.windows_nt-arm64.MIBC.Runtime , optimization.windows_nt-x64.MIBC.Runtime , optimization.windows_nt-x86.MIBC.Runtime , optimization.PGO.CoreCLR
 From Version 1.0.0-prerelease.24612.6 -> To Version 1.0.0-prerelease.24622.6

* Update dependencies from https://dev.azure.com/dnceng/internal/_git/dotnet-optimization build 20241227.6

optimization.linux-arm64.MIBC.Runtime , optimization.linux-x64.MIBC.Runtime , optimization.windows_nt-arm64.MIBC.Runtime , optimization.windows_nt-x64.MIBC.Runtime , optimization.windows_nt-x86.MIBC.Runtime , optimization.PGO.CoreCLR
 From Version 1.0.0-prerelease.24612.6 -> To Version 1.0.0-prerelease.24627.6

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-01-02 10:31:10+00:00,dotnet-maestro[bot],0,,,2,18,18,"[main] update dependencies from dnceng/internal/dotnet-optimization (issue_ref)* update dependencies from build 20241222.6optimization.linux-arm64.mibc.runtime , optimization.linux-x64.mibc.runtime , optimization.windows_nt-arm64.mibc.runtime , optimization.windows_nt-x64.mibc.runtime , optimization.windows_nt-x86.mibc.runtime , optimization.pgo.coreclr from version 1.0.0-prerelease.24612.6 -> to version 1.0.0-prerelease.24622.6* update dependencies from build 20241227.6optimization.linux-arm64.mibc.runtime , optimization.linux-x64.mibc.runtime , optimization.windows_nt-arm64.mibc.runtime , optimization.windows_nt-x64.mibc.runtime , optimization.windows_nt-x86.mibc.runtime , optimization.pgo.coreclr from version 1.0.0-prerelease.24612.6 -> to version 1.0.0-prerelease.24627.6---------"
dotnet/runtime,3d39be4fb0ea65746959ed2298414d0ee63a8e7b,"Code modernization in System.Linq (#110910)

* Use collection initializers in System.Linq

* Use using declarations in System.Linq",2025-01-02 17:09:44+00:00,Shay Rojansky,1,7f076024a9cdb3cbebfa9061d84344a064a5ff51,"XML docs for LINQ Join, LeftJoin, RightJoin (#111177)

* XML docs for LINQ Join, LeftJoin, RightJoin

See https://github.com/dotnet/runtime/pull/110872#discussion_r1904235291

* Remove nullability annotations in the docs

* Fix some incorrect xml code references

* Correct sample method names

* Correct summaries

---------

Co-authored-by: Jeff Handley <jeffhandley@users.noreply.github.com>
Co-authored-by: Eirik Tsarpalis <eirik.tsarpalis@gmail.com>",88,3617,3684,code modernization in system.linq (issue_ref)* use collection initializers in system.linq* use using declarations in system.linq
dotnet/runtime,ddf2e5730c8d8ac96317e3d91559e3d061ad21ef,Add X509CertificateLoader documentation,2025-01-02 20:03:39+00:00,Kevin Jones,0,,,1,3,2,add x509certificateloader documentation
dotnet/runtime,a1c864f304ce128aa48705f91256c590cb5ec5d9,"Baseline some more pri1 tests with NAOT (#111042)

I thought we're almost fully clean but apparently not yet.",2025-01-03 11:51:48+00:00,Michal Strehovský,0,,,8,17,2,baseline some more pri1 tests with naot (issue_ref)i thought we're almost fully clean but apparently not yet.
dotnet/runtime,3d88f276b13ae4d2ffa6a66b02f32171fdc825b5,"Update dependencies from https://github.com/dotnet/roslyn build 20250102.5 (#111053)

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-3.24629.5 -> To Version 4.13.0-3.25052.5

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-01-03 13:07:19+00:00,dotnet-maestro[bot],0,,,2,11,11,"update dependencies from build 20250102.5 (issue_ref)microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-3.24629.5 -> to version 4.13.0-3.25052.5"
dotnet/runtime,1a5d477f6c70d2474e05e7a8ed6a1f1bc6264bd4,"[LoongArch64] Disabled 'largeframe secondary' case within stackoverflowtester.sh test for LA64. (#111063)

Change-Id: If7ae1f5c5d803452c0a98a9fcda4d7eda1eaa47a",2025-01-03 14:35:22+00:00,Xu Liangyu,0,,,1,8,4,[loongarch64] disabled 'largeframe secondary' case within stackoverflowtester.sh test for la64. (issue_ref)change-id: if7ae1f5c5d803452c0a98a9fcda4d7eda1eaa47a
dotnet/runtime,e016a8022ac13bd7ca3d78d64108a799ae2dad0c,"Update dependencies from https://github.com/dotnet/arcade build 20250102.2 (#111067)

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.24626.1 -> To Version 10.0.0-beta.25052.2

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-01-03 16:42:23+00:00,dotnet-maestro[bot],0,,,3,61,61,"update dependencies from build 20250102.2 (issue_ref)microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.versiontools.tasks , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.24626.1 -> to version 10.0.0-beta.25052.2"
dotnet/runtime,a4674c37d6bc5f9eb5c7f390a29b8a1f3d890a2c,"Remove HMFs from JIT helpers (#111034)

* Convert JIT_GetFieldAddr and JIT_GetStaticFieldAddr to C#.
These JIT helpers are only used in EnC scenarios so their
performance is secondary.
* Convert JIT_NewMDArr to C#.",2025-01-03 18:44:49+00:00,Aaron Robinson,0,,,14,106,120,remove hmfs from jit helpers (issue_ref)* convert jit_getfieldaddr and jit_getstaticfieldaddr to c#.these jit helpers are only used in enc scenarios so theirperformance is secondary.* convert jit_newmdarr to c#.
dotnet/runtime,86a7ff90bf64b777e459c64178ee7360a8a69ede,"Fix LoaderAllocator of DynamicMethodTable (#111038)

* Fix LoaderAllocator of DynamicMethodTable

There is one `DynamicMethodTable` allocated per `Module` if needed. When its
instance is being created, an incorrect `LoaderAllocator` is passed to the
`CreateMinimalMethodTable` function. Instead of the `Module`'s
`LoaderAllocator`, it passes in the default one.
That fires an assert in non-release builds of the runtime and it results in
incorrect marking of the `MethodTable` as not collectible in case the `Module`'s
LoaderAllocator is collectible.

This change fixes it by passing in the `LoaderAllocator` of the module
instead.

Close #110987

* Add regression test

* Change the test to use MemoryStream",2025-01-03 18:47:45+00:00,Jan Vorlicek,1,1a97d637b9628174389aa04bcf3a5dbc7faafe07,Fix test build (#111119),3,67,1,"fix loaderallocator of dynamicmethodtable (issue_ref)* fix loaderallocator of dynamicmethodtablethere is one allocated per if needed. when itsinstance is being created, an incorrect is passed to the function. instead of the 's, it passes in the default one.that fires an assert in non-release builds of the runtime and it results inincorrect marking of the as not collectible in case the 'sloaderallocator is collectible.this change fixes it by passing in the of the moduleinstead.close issue_ref* add regression test* change the test to use memorystream"
dotnet/runtime,192f43b98609e8b2d5e9aa962a0cb474aef2034f,Change RSA.LegalKeySizes for Apple platforms to return 8192,2025-01-03 21:53:55+00:00,Kevin Jones,0,,,1,7,13,change rsa.legalkeysizes for apple platforms to return 8192
dotnet/runtime,27fd292671ba8208b881e9f1fd79eb0d8b94f471,Remove unused packageindex infra (#111002),2025-01-03 22:19:01+00:00,Viktor Hofer,1,bb5f473337719c4c406d63ffc9e845196b69caf9,"Ship CoreCLR packages in servicing releases (#113020)

Unblock shippable CoreCLR packages from being published in servicing releases. Fixes #112710.",6,1,30,remove unused packageindex infra (issue_ref)
dotnet/runtime,19c25fd93aa1c4b392de9981573e3fc5a88fb003,Use -pack switch instead of -allconfigurations to create packages (#110778),2025-01-03 22:38:14+00:00,Viktor Hofer,1,696c8b07e3dd5a37096d0c7e8104352f85f0cc0e,"Use the regular build scripts for -vs coreclr.sln (#114511)

This fixes an issue with passing the RID in for cDAC and also removes one more direct usage of build-runtime.cmd",19,223,218,use -pack switch instead of -allconfigurations to create packages (issue_ref)
dotnet/runtime,fb7fe3e361b88b55808e7a5c25b7f1dcf2c4840e,"Remove HMFs from JIT helpers (#111075)

* Convert JIT helpers that throw specific
exceptions to QCalls.

JIT_ThrowMethodAccessException
JIT_ThrowFieldAccessException
JIT_ThrowClassAccessException",2025-01-03 23:23:54+00:00,Aaron Robinson,0,,,8,100,66,remove hmfs from jit helpers (issue_ref)* convert jit helpers that throw specificexceptions to qcalls.jit_throwmethodaccessexceptionjit_throwfieldaccessexceptionjit_throwclassaccessexception
dotnet/runtime,dae890906431049d32e24d498a1d707a441a64a8,"Remove HMFs from JIT helpers (#111088)

Remove unused JIT_StressGC.
Convert JIT_GetRuntimeFieldStub and JIT_GetRuntimeMethodStub to C#.",2025-01-04 19:25:57+00:00,Aaron Robinson,1,b4a3f4864e25e30b7f77ae192a15f808d89c82fa,"Fix typos (#110632)

Co-authored-by: Manish Godse <61718172+mangod9@users.noreply.github.com>",13,41,105,remove hmfs from jit helpers (issue_ref)remove unused jit_stressgc.convert jit_getruntimefieldstub and jit_getruntimemethodstub to c#.
dotnet/runtime,4b02c51f7158ca9abc68b331ac5ad64d716a0e2a,"Update dependencies from https://github.com/dotnet/source-build-reference-packages build 20241230.1 (#111111)

Microsoft.SourceBuild.Intermediate.source-build-reference-packages
 From Version 10.0.562001 -> To Version 10.0.563001

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-01-06 10:17:46+00:00,dotnet-maestro[bot],0,,,1,2,2,update dependencies from build 20241230.1 (issue_ref)microsoft.sourcebuild.intermediate.source-build-reference-packages from version 10.0.562001 -> to version 10.0.563001
dotnet/runtime,a1ceab33d2e769903dbdeb8db2f2909ff53a83fa,JIT: Clean up `fgReplaceJumpTarget` call sites (#111006),2025-01-06 15:15:53+00:00,Aman Khalid,1,cedf4e29bae9f0fe7d0c7200b797b626b7e9cbf8,"JIT: revise `optRelopImpliesRelop` to always set `reverseSense` (#111803)

Update clients to rely on `reverseSense` rather than parsing `vnRelation`.

Also revised the and/or inference slightly as I found it hard to follow;
hopefully it's clearer now.

Fixes an issue that came up in testing #111766.",3,9,58,jit: clean up call sites (issue_ref)
dotnet/runtime,f3763295c91146b2fab5622ff44e405499ee813e,"JIT: Reuse LSRA's block sequence for initial layout during block reordering (#110921)

Follow-up to #108903. If LSRA did not introduce new basic blocks, we can reuse its block sequence as the initial layout during block reordering, avoiding the overhead of recomputing a loop-aware RPO. Also, delete some unused flowgraph-related `Compiler` members.",2025-01-06 15:40:41+00:00,Aman Khalid,0,,,4,37,22,"jit: reuse lsra's block sequence for initial layout during block reordering (issue_ref)follow-up to issue_ref. if lsra did not introduce new basic blocks, we can reuse its block sequence as the initial layout during block reordering, avoiding the overhead of recomputing a loop-aware rpo. also, delete some unused flowgraph-related members."
dotnet/runtime,c3445c7f11ef24ef621d1d7aaff552389ca538f5,"JIT: Consolidate block pred iterator logic (#111009)

Move most of the nested iterator class logic in `PredEdgeList`/`PredBlockList` to a base class, and implement subclasses that specify the yield type (flow edge or basic block) and whether edits are allowed. This allows us to add a pred edge iterator that tolerates edits with minimal code duplication.",2025-01-06 15:41:37+00:00,Aman Khalid,0,,,1,69,82,"jit: consolidate block pred iterator logic (issue_ref)move most of the nested iterator class logic in / to a base class, and implement subclasses that specify the yield type (flow edge or basic block) and whether edits are allowed. this allows us to add a pred edge iterator that tolerates edits with minimal code duplication."
dotnet/runtime,5824c47d7704b49eaf009396ac81892fdb16c854,JIT: Add a metric for inverted loops (#111120),2025-01-06 16:16:43+00:00,Jakob Botsch Nielsen,1,da27f27850a29d824f165e139a338524dc0c8ff3,"JIT: Check DFS tree containment before checking ancestry (#111128)

Fix #110957",2,2,0,jit: add a metric for inverted loops (issue_ref)
dotnet/runtime,2979d1b8e2958b8e96302560faf6ad82ca859509,JIT: Use postorder numbers as keys into ordinals in 3-opt layout (#110922),2025-01-06 19:21:19+00:00,Aman Khalid,0,,,3,50,30,jit: use postorder numbers as keys into ordinals in 3-opt layout (issue_ref)
dotnet/runtime,38366f093a26bc84c01704e107df467ef807666d,Update System.Speech to also recognize Speech_OneCore (#110123),2025-01-06 21:56:04+00:00,Stephen Toub,0,,,3,19,7,update system.speech to also recognize speech_onecore (issue_ref)
dotnet/runtime,0d1432eb0e09c2a4f385ae08d548ed2ce8485cde,Exit the lock before we call into user code and handle losing the race for the RCW table (#110828),2025-01-07 03:48:31+00:00,Jeremy Koritzinsky,0,,,3,409,154,exit the lock before we call into user code and handle losing the race for the rcw table (issue_ref)
dotnet/runtime,a29d5f97d0913c83bb8092ab9eebfd7ef5bdd3d9,"Revert ""Fix NativeAOT ThunksPool thunk data block size handling. (#110732)"" (#110983)

This reverts commit b91087f9234bdc529d23dd2905f9813248615c3c.",2025-01-07 06:44:23+00:00,Jan Kotas,1,812d50438787a392c11904589c15658ba3d38700,"Fix NativeAOT ThunksPool thunk data block size handling. (#111149)

Updated version of https://github.com/dotnet/runtime/pull/110732 fixing
issues on ARM32 and other platforms where size diffrence between code
and data thunk caused thunk data block size calculations to be to small.

dotnet/runtime#88710 made a change in TunkPool.cs
moving away from using a page size define to calling ThunkBlockSize
to get to end of thunk data block where a common stub address get stored.

This change is not equivalent on platforms where the thunk blocks are laid out
in pair where a stub thunk blocks are followed by a data thunk block and all
gets mapped from file. This is the schema used on Windows platforms.

In that layout schema the ThunkBlockSize is 2 * page size meaning that the
calculation getting to the end of the thunk data block will move to the end
of next thunk stub that is RX memory and storing the common stub address
at that location will trigger an AV.

This works on iOS since it reports its ThunkBlockSize as one page
but that is not totally correct since it uses 2 pages, just that
they are allocated in the same way as FEATURE_RX_THUNKS, all thunk stubs
blocks followed by all thunk data blocks. The reason why this works
is because it only maps the thunk stubs from file, reporting a
ThunkBlockSize that is inline with what gets map:ed from file,
but then there is a special handling in PalAllocateThunksFromTemplate on
iOS that virutal alloc template size * 2, mapping the first
template size bytes from the file and the rest are kept as its
thunk data blocks.

This commit calculates the page size of code/data block based on
max of code/data thunk size * number of thunks per block and since
this is guaranteed to fit into one block and that the block size
needs to be a power of 2, the correct full block size used in
arch specific implementation when laying out the stub and data blocks
can be calculated directly in managed code.

Review feedback.

Switch to ThunkDataBlockSizeMask in one place.

Fix build error.

Include pointer size slot in data block size calculation.

Calculate page size using NumThunksPerBlock.",1,10,13,"revert ""fix nativeaot thunkspool thunk data block size handling. (issue_ref)"" (issue_ref)this reverts commit b91087f9234bdc529d23dd2905f9813248615c3c."
dotnet/runtime,717bc30a0ed2a32f05f90e288eaaf7c02712c916,[mono] Disable failing BinaryFormatter.ValidateAgainstBlobs test on Mono Windows (#111118),2025-01-07 09:07:10+00:00,Matous Kozak,0,,,1,1,0,[mono] disable failing binaryformatter.validateagainstblobs test on mono windows (issue_ref)
dotnet/runtime,6d250c7412a1243b8b4ff4e4915a91aa9d844650,"[main] Update dependencies from dotnet/arcade (#111110)

* Update dependencies from https://github.com/dotnet/arcade build 20250103.3

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.25052.2 -> To Version 10.0.0-beta.25053.3

* Update dependencies from https://github.com/dotnet/arcade build 20250106.1

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.25052.2 -> To Version 10.0.0-beta.25056.1

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-01-07 12:13:40+00:00,dotnet-maestro[bot],1,cce6bdfc9a897faa5cd64900cfcb73d8d7a62d5f,"[main] Update dependencies from dotnet/roslyn (#111081)

* Update dependencies from https://github.com/dotnet/roslyn build 20250103.2

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-3.25052.5 -> To Version 4.13.0-3.25053.2

* Update dependencies from https://github.com/dotnet/roslyn build 20250104.1

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-3.25052.5 -> To Version 4.13.0-3.25054.1

* Update dependencies from https://github.com/dotnet/roslyn build 20250105.1

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-3.25052.5 -> To Version 4.13.0-3.25055.1

* Update dependencies from https://github.com/dotnet/roslyn build 20250106.2

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-3.25052.5 -> To Version 4.13.0-3.25056.2

* Update dependencies from https://github.com/dotnet/roslyn build 20250106.21

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-3.25052.5 -> To Version 4.13.0-3.25056.21

* Fix scoped variance breaks

* Use params instead of scoped in TextWriter to match the base method

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Jan Jones <janjones@microsoft.com>
Co-authored-by: Alexander Köplinger <alex.koeplinger@outlook.com>",7,503,78,"[main] update dependencies from dotnet/arcade (issue_ref)* update dependencies from build 20250103.3microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.versiontools.tasks , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.25052.2 -> to version 10.0.0-beta.25053.3* update dependencies from build 20250106.1microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.versiontools.tasks , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.25052.2 -> to version 10.0.0-beta.25056.1---------"
dotnet/runtime,2d7f45b9650caa5045ebf5d6381e10bc88df159c,JIT: Add helpers for increasing/decreasing block weights (#111135),2025-01-07 13:30:29+00:00,Aman Khalid,1,5f3aa0c4e52b708d2cf39e62c308c23a3218ebe6,"JIT: split loop headers that are also try entries (#110880)

when there are backedges that have exited the try. This allows
the preheader and header to be in the same EH region and may
unblock other optimizations.

This is done by splitting the header block and making the trailing
portion be the try entry. Perform a mid (or end) block split if the
initial (or all) statements in the header cannot throw.

Fixes #96887.

Enable cloning of loops with EH.",5,28,33,jit: add helpers for increasing/decreasing block weights (issue_ref)
dotnet/runtime,aecae2c3853ea793ede98906320312ca6c199ec1,"JIT: Enable profile consistency checking up to morph (#111047)

Part of #107749.",2025-01-07 17:00:14+00:00,Aman Khalid,1,4ae1cf20ecf70b33a2ac6afb9e362b3359b430b7,"JIT: Mark profile inconsistent during flow opts if OSR entry is involved (#111362)

OSR entry weights are frequently imbalanced, so we skip profile consistency checks for them. However, fgUpdateFlowGraph can propagate these weights to normal blocks, which are checked for profile consistency. If we think this happened, liberally mark the profile as inconsistent. Fixes #111343.",5,68,89,jit: enable profile consistency checking up to morph (issue_ref)part of issue_ref.
dotnet/runtime,7ddd2f6dea8a1aa2eb3e97750831cbedb3e25e6a,"Pass the -pack switch to repo source-build leg (#111153)

* Pass the -pack switch to repo source-build leg

The -pack switch is necessary to create the rid agnostic libraries packages which are then wrapped into the source-build intermediate package.

Regressed with 19c25fd93aa1c4b392de9981573e3fc5a88fb003
Unblocks https://github.com/dotnet/runtime/pull/111010

* Add missing Pack target to BuildIntegration.proj",2025-01-07 17:24:42+00:00,Viktor Hofer,0,,,2,3,1,pass the -pack switch to repo source-build leg (issue_ref)* pass the -pack switch to repo source-build legthe -pack switch is necessary to create the rid agnostic libraries packages which are then wrapped into the source-build intermediate package.regressed with 19c25fd93aa1c4b392de9981573e3fc5a88fb003unblocks * add missing pack target to buildintegration.proj
dotnet/runtime,36b161f432626de948831e4386cb4af7f64ee6ed,"Delete FEATURE_INTERPRETER (#111137)

FEATURE_INTERPRETER is a poorly architected implementation of an interpreter. Proper interpreter implementation should start with a clean slate.

* Delete MAKEFINALCODE",2025-01-07 21:58:44+00:00,Jan Kotas,1,128321e88e2c93d69766e15ad4f06bab70b753b7,"Fix race condition in cleanup of collectible thread static variables (#111257)

* Fix issue 110837

There was a race condition where we could have collected all of the managed state of a LoaderAllocator, but not yet started cleaning up the actual LoaderAllocator object in native code. If a thread which had a TLS variable defined in a code associated with a collectible loader allocator was terminated at that point, then the runtime would crash.

The fix is to detect if the LoaderAllocator managed state is still alive, and if so, do not attempt to clean it up.

* Disable test on NativeAOT

* Update src/tests/Loader/CollectibleAssemblies/Statics/CollectibleTLSStaticCollection.cs

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>

* Update src/tests/Loader/CollectibleAssemblies/Statics/CollectibleTLSStaticCollection.cs

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>

* Fix missing adjustment missed by copilot

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",41,29,16104,delete feature_interpreter (issue_ref)feature_interpreter is a poorly architected implementation of an interpreter. proper interpreter implementation should start with a clean slate.* delete makefinalcode
dotnet/runtime,cce6bdfc9a897faa5cd64900cfcb73d8d7a62d5f,"[main] Update dependencies from dotnet/roslyn (#111081)

* Update dependencies from https://github.com/dotnet/roslyn build 20250103.2

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-3.25052.5 -> To Version 4.13.0-3.25053.2

* Update dependencies from https://github.com/dotnet/roslyn build 20250104.1

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-3.25052.5 -> To Version 4.13.0-3.25054.1

* Update dependencies from https://github.com/dotnet/roslyn build 20250105.1

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-3.25052.5 -> To Version 4.13.0-3.25055.1

* Update dependencies from https://github.com/dotnet/roslyn build 20250106.2

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-3.25052.5 -> To Version 4.13.0-3.25056.2

* Update dependencies from https://github.com/dotnet/roslyn build 20250106.21

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-3.25052.5 -> To Version 4.13.0-3.25056.21

* Fix scoped variance breaks

* Use params instead of scoped in TextWriter to match the base method

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Jan Jones <janjones@microsoft.com>
Co-authored-by: Alexander Köplinger <alex.koeplinger@outlook.com>",2025-01-07 22:02:29+00:00,dotnet-maestro[bot],1,e7788c155ae5e2c95a69946697a6179e565d2759,fixed last stack errors (#111390),7,33,33,"[main] update dependencies from dotnet/roslyn (issue_ref)* update dependencies from build 20250103.2microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-3.25052.5 -> to version 4.13.0-3.25053.2* update dependencies from build 20250104.1microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-3.25052.5 -> to version 4.13.0-3.25054.1* update dependencies from build 20250105.1microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-3.25052.5 -> to version 4.13.0-3.25055.1* update dependencies from build 20250106.2microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-3.25052.5 -> to version 4.13.0-3.25056.2* update dependencies from build 20250106.21microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-3.25052.5 -> to version 4.13.0-3.25056.21* fix scoped variance breaks* use params instead of scoped in textwriter to match the base method---------"
dotnet/runtime,31b5ae20fc558b0c8bfb18223c4c653de9b79567,SPMI: Target .NET 10.0 (#111163),2025-01-07 22:20:45+00:00,Jakob Botsch Nielsen,0,,,2,2,2,spmi: target .net 10.0 (issue_ref)
dotnet/runtime,5c6d1b3f7b63a3150ce6c737aeb4af03b3cce621,"JIT: add missing SetMorphed call (#111176)

to the comma created by `gtWrapWithSideEffects`.

Fixes #110960",2025-01-08 01:44:51+00:00,Andy Ayers,1,574b967aa2ce95d8213f1610a24c93e888cbc7f1,"JIT: Emulate missing x86 shift instructions for xplat intrinsics (#111108)

* emulate missing x86 shift instructions

* disable vpsraq emulation on 32-bit

* use logical shift for mask

* fix disasm for shift instructions

* allow vpsraq emulation on 32-bit for const shift amount

* review feedback

---------

Co-authored-by: Tanner Gooding <tagoo@outlook.com>",1,1,0,jit: add missing setmorphed call (issue_ref)to the comma created by .fixes issue_ref
dotnet/runtime,951ec77587aab75b38e54bfd2f16d2ec81a692ef,"JIT: Unify Swift parameter register homing with normal homing (#110859)

The normal homing is general enough now to handle the Swift parameter
registers.",2025-01-08 10:22:00+00:00,Jakob Botsch Nielsen,0,,,3,26,57,jit: unify swift parameter register homing with normal homing (issue_ref)the normal homing is general enough now to handle the swift parameterregisters.
dotnet/runtime,8933da81f4e551c3d655c725de3105a166a97ab3,"[main] Update dependencies from dotnet/runtime, dotnet/runtime-assets (#111190)

* Update dependencies from https://github.com/dotnet/runtime-assets build 20250107.1

Microsoft.DotNet.CilStrip.Sources , Microsoft.NET.HostModel.TestData , System.ComponentModel.TypeConverter.TestData , System.Data.Common.TestData , System.Drawing.Common.TestData , System.Formats.Tar.TestData , System.IO.Compression.TestData , System.IO.Packaging.TestData , System.Net.TestData , System.Private.Runtime.UnicodeData , System.Runtime.Numerics.TestData , System.Runtime.TimeZoneData , System.Security.Cryptography.X509Certificates.TestData , System.Text.RegularExpressions.TestData , System.Windows.Extensions.TestData
 From Version 10.0.0-beta.24627.1 -> To Version 10.0.0-beta.25057.1

* Update dependencies from https://github.com/dotnet/runtime build 20250107.24

Microsoft.SourceBuild.Intermediate.runtime.linux-x64 , Microsoft.NET.Sdk.IL , Microsoft.NETCore.App.Runtime.win-x64 , Microsoft.NETCore.ILAsm , runtime.native.System.IO.Ports , System.Reflection.Metadata , System.Reflection.MetadataLoadContext , System.Text.Json
 From Version 10.0.0-alpha.1.24616.1 -> To Version 10.0.0-alpha.1.25057.24

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-01-08 10:55:21+00:00,dotnet-maestro[bot],0,,,3,68,68,"[main] update dependencies from dotnet/runtime, dotnet/runtime-assets (issue_ref)* update dependencies from build 20250107.1microsoft.dotnet.cilstrip.sources , microsoft.net.hostmodel.testdata , system.componentmodel.typeconverter.testdata , system.data.common.testdata , system.drawing.common.testdata , system.formats.tar.testdata , system.io.compression.testdata , system.io.packaging.testdata , system.net.testdata , system.private.runtime.unicodedata , system.runtime.numerics.testdata , system.runtime.timezonedata , system.security.cryptography.x509certificates.testdata , system.text.regularexpressions.testdata , system.windows.extensions.testdata from version 10.0.0-beta.24627.1 -> to version 10.0.0-beta.25057.1* update dependencies from build 20250107.24microsoft.sourcebuild.intermediate.runtime.linux-x64 , microsoft.net.sdk.il , microsoft.netcore.app.runtime.win-x64 , microsoft.netcore.ilasm , runtime.native.system.io.ports , system.reflection.metadata , system.reflection.metadataloadcontext , system.text.json from version 10.0.0-alpha.1.24616.1 -> to version 10.0.0-alpha.1.25057.24---------"
dotnet/runtime,0741a32a738f303693947afa63e52d28fb79a576,"Define Pack target in dotnet-pgo-pack.proj (#111193)

* Define Pack target in dotnet-pgo-pack.proj

* Remove unnecessary dotnet-pgo-pack.proj

* Remove unnecessary Pack=true attributes in Subsets.props",2025-01-08 12:38:00+00:00,Viktor Hofer,0,,,2,10,16,define pack target in dotnet-pgo-pack.proj (issue_ref)* define pack target in dotnet-pgo-pack.proj* remove unnecessary dotnet-pgo-pack.proj* remove unnecessary pack=true attributes in subsets.props
dotnet/runtime,35da6f1c17070e9fd5f47862e682876240bf4862,"Update dependencies from https://github.com/dotnet/roslyn build 20250107.3 (#111184)

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-3.25056.21 -> To Version 4.13.0-3.25057.3

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-01-08 13:41:05+00:00,dotnet-maestro[bot],0,,,2,11,11,"update dependencies from build 20250107.3 (issue_ref)microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-3.25056.21 -> to version 4.13.0-3.25057.3"
dotnet/runtime,ba1a65ec56bb0bd5d290d55c6e01a06f32c9118b,"Update dependencies from https://dev.azure.com/dnceng/internal/_git/dotnet-optimization build 20250103.1 (#111109)

optimization.linux-arm64.MIBC.Runtime , optimization.linux-x64.MIBC.Runtime , optimization.windows_nt-arm64.MIBC.Runtime , optimization.windows_nt-x64.MIBC.Runtime , optimization.windows_nt-x86.MIBC.Runtime , optimization.PGO.CoreCLR
 From Version 1.0.0-prerelease.24627.6 -> To Version 1.0.0-prerelease.25053.1

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-01-08 13:43:59+00:00,dotnet-maestro[bot],0,,,2,18,18,"update dependencies from build 20250103.1 (issue_ref)optimization.linux-arm64.mibc.runtime , optimization.linux-x64.mibc.runtime , optimization.windows_nt-arm64.mibc.runtime , optimization.windows_nt-x64.mibc.runtime , optimization.windows_nt-x86.mibc.runtime , optimization.pgo.coreclr from version 1.0.0-prerelease.24627.6 -> to version 1.0.0-prerelease.25053.1"
dotnet/runtime,fba5430123226253e0c68276e2fdbe1c6f2a5e95,"Update dependencies from https://github.com/dotnet/source-build-reference-packages build 20250106.1 (#111125)

Microsoft.SourceBuild.Intermediate.source-build-reference-packages
 From Version 10.0.563001 -> To Version 10.0.605601

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-01-08 13:44:23+00:00,dotnet-maestro[bot],0,,,1,2,2,update dependencies from build 20250106.1 (issue_ref)microsoft.sourcebuild.intermediate.source-build-reference-packages from version 10.0.563001 -> to version 10.0.605601
dotnet/runtime,ec281ad9cbf26c6974b45efafc40dbbef25309e6,"Update dependencies from https://github.com/dotnet/emsdk build 20250108.3 (#111199)

Microsoft.SourceBuild.Intermediate.emsdk , Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport
 From Version 10.0.0-alpha.1.24628.1 -> To Version 10.0.0-alpha.1.25058.3

Dependency coherency updates

runtime.linux-arm64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.linux-x64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.win-arm64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.win-x64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.osx-arm64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.osx-x64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.linux-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.linux-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.linux-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.linux-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.linux-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.linux-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.win-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.win-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.win-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.osx-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.osx-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.osx-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.osx-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.osx-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.osx-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.linux-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.linux-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.osx-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.osx-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.win-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.win-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport
 From Version 19.1.0-alpha.1.24619.1 -> To Version 19.1.0-alpha.1.25055.2 (parent: Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-01-08 16:18:07+00:00,dotnet-maestro[bot],0,,,2,109,109,"update dependencies from build 20250108.3 (issue_ref)microsoft.sourcebuild.intermediate.emsdk , microsoft.net.workload.emscripten.current.manifest-10.0.100.transport from version 10.0.0-alpha.1.24628.1 -> to version 10.0.0-alpha.1.25058.3dependency coherency updatesruntime.linux-arm64.microsoft.netcore.runtime.jit.tools,runtime.linux-x64.microsoft.netcore.runtime.jit.tools,runtime.linux-musl-arm64.microsoft.netcore.runtime.jit.tools,runtime.linux-musl-x64.microsoft.netcore.runtime.jit.tools,runtime.win-arm64.microsoft.netcore.runtime.jit.tools,runtime.win-x64.microsoft.netcore.runtime.jit.tools,runtime.osx-arm64.microsoft.netcore.runtime.jit.tools,runtime.osx-x64.microsoft.netcore.runtime.jit.tools,runtime.linux-arm64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.linux-arm64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.linux-arm64.microsoft.netcore.runtime.mono.llvm.tools,runtime.linux-musl-arm64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.linux-musl-arm64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.linux-musl-arm64.microsoft.netcore.runtime.mono.llvm.tools,runtime.linux-x64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.linux-x64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.linux-x64.microsoft.netcore.runtime.mono.llvm.tools,runtime.linux-musl-x64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.linux-musl-x64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.linux-musl-x64.microsoft.netcore.runtime.mono.llvm.tools,runtime.win-x64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.win-x64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.win-x64.microsoft.netcore.runtime.mono.llvm.tools,runtime.osx-arm64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.osx-arm64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.osx-arm64.microsoft.netcore.runtime.mono.llvm.tools,runtime.osx-x64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.osx-x64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.osx-x64.microsoft.netcore.runtime.mono.llvm.tools,runtime.linux-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.linux-musl-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.linux-x64.microsoft.netcore.runtime.wasm.node.transport,runtime.linux-musl-x64.microsoft.netcore.runtime.wasm.node.transport,runtime.osx-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.osx-x64.microsoft.netcore.runtime.wasm.node.transport,runtime.win-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.win-x64.microsoft.netcore.runtime.wasm.node.transport from version 19.1.0-alpha.1.24619.1 -> to version 19.1.0-alpha.1.25055.2 (parent: microsoft.net.workload.emscripten.current.manifest-10.0.100.transport"
dotnet/runtime,55763b8d126c310b874b33ef49504644b9c00486,"update CodeVersions unit tests (#110750)

update all tests in CodeVersionsTest to use Moq",2025-01-08 19:30:13+00:00,Max Charlamb,0,,,1,151,186,update codeversions unit tests (issue_ref)update all tests in codeversionstest to use moq
dotnet/runtime,8170344656c8c5acfe537ca7c4baa92d3f946b58,"Remove HMFs from JIT helpers (#111134)

* Convert JIT_UserBreakpoint to C#.

* Convert JIT_GetRuntimeType and JIT_GetRuntimeType_MaybeNull to C#.

* Move the fast path entirely into C#.",2025-01-08 19:52:30+00:00,Aaron Robinson,0,,,16,83,176,remove hmfs from jit helpers (issue_ref)* convert jit_userbreakpoint to c#.* convert jit_getruntimetype and jit_getruntimetype_maybenull to c#.* move the fast path entirely into c#.
dotnet/runtime,243ca017a35e5cd6db83adf01da937dc669d06c0,"Rename COM+ in code comments (#111097)

* Rename obvious cases to CLR

* Code/path impact

* Variant

* Mentions of CLR 1.0

* IL impact

* Unused ntimage definition

* Avoid 'CLR signature'

* Apply suggestions from code review

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-01-08 19:53:18+00:00,Huo Yaoyuan,1,ad90a0bb6db5870bc68b2275788bb73ccc99d87e,Fix AV in DBI under Watson when no metadata locator is supplied by debugger (#112537),107,253,265,rename com+ in code comments (issue_ref)* rename obvious cases to clr* code/path impact* variant* mentions of clr 1.0* il impact* unused ntimage definition* avoid 'clr signature'* apply suggestions from code review
dotnet/runtime,64874e4970142da8ea0ca36defde3f75594270ca,Simplify arm32 JIT_LMul (#110467),2025-01-08 21:28:52+00:00,Adeel Mujahid,0,,,1,0,11,simplify arm32 jit_lmul (issue_ref)
dotnet/runtime,043e60ba72e358a2f96fd2ff8a65b1af78ceab03,"Add linux-loongarch64 CI leg (#111086)

* Add linux-loongarch64 CI leg

* Switch community legs to template used by freebsd

* Exclude packs subset with coreclr

* Use neutral name

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-01-08 22:13:56+00:00,Adeel Mujahid,1,71db8b269931fbc0fec2ecfb5947e283b8547fd9,"Build the ""in build"" crossgen2 into a pack that we can use within the VMR (#110676)

* Add a new crossgen2 build variant for a published crossgen2 targetting the host OS

* Remove the .NET-hosted in-build crossgen2 and just use the published in-build host-targeting crossgen2.

* Extract crossgen2 sfxproj changes from #109710

* Extract the properties and targets that will be shared into a separate props file.

* Add a ""host crossgen2"" project

* Add the crossgen2 host package to Subsets.props for the correct scenarios.

* Fix crossgen-corelib to work with the new in-build crossgen2

* Publish the in-build crossgen2 as single file to avoid having to adjust the AOT-in-build logic to handle AOT-ing for the host.

* AOT on Windows only

* Don't set Platform for the shared framework projects. It's not necessary and it breaks the new crossgen2 host package

* Forward ShortStack down so we don't build the host crossgen2 when runtime is the last repo.

* Add os-only RID to portable RID graph in source-build to enable crossgen2 tasks in the SDK to discover the target OS from the source-build target RID

* Publish the host crossgen2 as a ""Vertical"" visibility asset.

* Cleanup crossgen2 infra, add comment about workaround, and adjust publishing to publish packages as packages.

* Deduplicate artifacts

* Add back the Update, somehow this got lost.

* Don't forward down ShortStack

* Use new ""update"" functionality to specify which artifacts are vertical visibility

* Revert changes to Signing.props

* Remove workaround now that the VMR has a bootstrap SDK with a new enough version.

---------

Co-authored-by: Viktor Hofer <viktor.hofer@microsoft.com>",10,56,56,add linux-loongarch64 ci leg (issue_ref)* add linux-loongarch64 ci leg* switch community legs to template used by freebsd* exclude packs subset with coreclr* use neutral name
dotnet/runtime,45155059d0b070e8ac0f6ad8f4909448e7eadd42,"Fix reloc type produced by ilasm in PE64 images (#111212)

Fixes #111189",2025-01-08 22:31:51+00:00,Jan Kotas,1,eb0490e68045f277f976f713f18cb70ecfe12905,"[ILASM] Add support for deterministic builds and PDB checksums (#109091)

Follow-up to #85344. Fixes #8293. Fixes #62484.",2,4,4,fix reloc type produced by ilasm in pe64 images (issue_ref)fixes issue_ref
dotnet/runtime,f5329cd00c08a3a7db477b7d9e13bb1e4253bd65,Adjust hashing in logging source gen (#111219),2025-01-09 02:58:34+00:00,Tarek Mahmoud Sayed,0,,,1,2,1,adjust hashing in logging source gen (issue_ref)
dotnet/runtime,11f3549e8392f2220aeadfa34aa578ccb47b80c0,"Optimize DateTimeOffset (#111112)

* Optimize DateTimeOffset

* Fix build. Address PR feedback.

* Branchless DateTime.Kind

* Address PR feedback

* Address PR feedback",2025-01-09 02:59:16+00:00,Pent Ploompuu,1,5bf277c57d862edc89b57058894e85917e795f9e,Fix typo in TicksToOADate (#111236),13,326,376,optimize datetimeoffset (issue_ref)* optimize datetimeoffset* fix build. address pr feedback.* branchless datetime.kind* address pr feedback* address pr feedback
dotnet/runtime,058fe35cd83bc87aceab639e0a60e1f12f0ecb32,"JIT: Avoid reporting call-sites in MinOpts on all targets (#103950)

When the call-sites have no interesting GC information we avoid
reporting them, but this behavior was enabled only for x86/x64. Enable
this on other platforms too.",2025-01-09 09:05:50+00:00,Jakob Botsch Nielsen,0,,,1,1,8,"jit: avoid reporting call-sites in minopts on all targets (issue_ref)when the call-sites have no interesting gc information we avoidreporting them, but this behavior was enabled only for x86/x64. enablethis on other platforms too."
dotnet/runtime,0e03405bd250104e6c6e84704424c9f6c174555d,"don't run drawing tests on Mono (#111208)

* don't run Drawing-related tests that do things like creating Bitmaps on Mono, as it's not supported (it does not support ComWrappers)

* re-enable the tests",2025-01-09 10:00:19+00:00,Adam Sitnik,0,,,2,2,3,"don't run drawing tests on mono (issue_ref)* don't run drawing-related tests that do things like creating bitmaps on mono, as it's not supported (it does not support comwrappers)* re-enable the tests"
dotnet/runtime,61b7e830c691e5dcc4bd758b677e9f14b2310879,"[browser] remove MT event pipe (#111152)

Co-authored-by: Marek Fišera <mara@neptuo.com>",2025-01-09 12:17:39+00:00,Pavel Savara,1,3f3897174d0a535b00325b8b460782fc3aa7bb0e,"Moved a static field initialization from Thread to ProcessorIdCache (#114227)

Presence of `.cctor` in `Thread` can cause circular dependency if Lock needs to block while Thread .cctor has not run yet.

1. Lock needs to wait on a WaitHandle
2. WaitHandle needs Thread.CurrentThread
3. if Thread's .cctor has not run yet, it needs to run.     
(it is unusual for this to be the first use of Thread, but the activation pattern in #113949 made it possible)
4. .cctor needs to take a Lock, so we go to `#1`

Fixes: #113949",74,30,3730,[browser] remove mt event pipe (issue_ref)
dotnet/runtime,442e882dd72f6e257acca84560bfd78f505eb8d2, [browser] mono_wasm_enable_gc and pump_count cleanup (#111198),2025-01-09 12:46:40+00:00,Pavel Savara,0,,,5,9,48,[browser] mono_wasm_enable_gc and pump_count cleanup (issue_ref)
dotnet/runtime,9b0b075a55ea5e63ee970a73e2dcc66bedeaf6c7,"Update dependencies from https://github.com/dotnet/arcade build 20250108.4 (#111220)

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.25056.1 -> To Version 10.0.0-beta.25058.4

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Viktor Hofer <viktor.hofer@microsoft.com>",2025-01-09 15:40:25+00:00,dotnet-maestro[bot],0,,,4,67,70,"update dependencies from build 20250108.4 (issue_ref)microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.versiontools.tasks , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.25056.1 -> to version 10.0.0-beta.25058.4"
dotnet/runtime,de8e1350ff32875098389bea212fcebc8d598b85,"Disable tests using http://corefx-net-http11.azurewebsites.net (#111235)

Disabling until HTTPS redirection can be turned off at the server.",2025-01-09 17:09:59+00:00,Radek Zikmund,0,,,2,42,10,disable tests using (issue_ref)disabling until https redirection can be turned off at the server.
dotnet/runtime,9cf8a80db3354173cfd25dea4660632861dee0eb,Add loongarch to the docker images table (#111248),2025-01-09 18:26:33+00:00,Adeel Mujahid,1,aee620d871a84f72acbff190d608a9ce464010a7,"fix docker build steps (#112254)

* fix docker build steps

With new crossbuilding images need to specify --cross option

* OS version updates

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",1,1,0,add loongarch to the docker images table (issue_ref)
dotnet/runtime,289aa17cac46fc4c2fb3e5889030f5379ca8e92a,"Add linux-riscv64 nativeaot runtime build (#110688)

* Fix registers/offsets in riscv-nativeaot.

* Fix *.S files in riscv-nativeaot.

* Fix riscv64 nativeaot native build

* Managed build fixes

* Apply suggestions from code review

Co-authored-by: Tymoteusz Wenerski <tymoteusz.wenerski@gmail.com>

* Apply suggestions from code review

Co-authored-by: Tomasz Sowiński <tomeksowi@gmail.com>

* Update other macros in AsmOffsetsVerify

* Update src/coreclr/tools/aot/ILCompiler.Compiler/Compiler/ObjectWriter/ElfObjectWriter.cs

Co-authored-by: Adeel Mujahid <3840695+am11@users.noreply.github.com>

---------

Co-authored-by: sunlijun <sunlijun@loongson.cn>
Co-authored-by: Tomek Sowiński <tomeksowi@gmail.com>
Co-authored-by: Tymoteusz Wenerski <tymoteusz.wenerski@gmail.com>
Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-01-09 22:59:57+00:00,Adeel Mujahid,1,92e1cdd4b786ce237f9f378f979e871df3ff076a,"Simplify NativeAOT PAL (#111730)

* Simplify NativeAOT PAL

- Delete xplat Windows CONTEXT definition since it is not actually used for anything
- Delete hijacking callback abstraction. We have introduced cycles between PAL layer and runtime layer of the thread suspension a while ago, so we can take full advantage of the tight coupling and avoid going through extra indirections.
- Delete HANDLE abstraction for Thread object (enabled by deleting hijacking callback abstraction)

* More cleanup

* Fix Arm64 build break

* Delete RhpPInvokeExceptionGuard

* Fix win x86 build break

* More win x86 build breaks",47,3882,39,add linux-riscv64 nativeaot runtime build (issue_ref)* fix registers/offsets in riscv-nativeaot.* fix *.s files in riscv-nativeaot.* fix riscv64 nativeaot native build* managed build fixes* apply suggestions from code review
dotnet/runtime,574b967aa2ce95d8213f1610a24c93e888cbc7f1,"JIT: Emulate missing x86 shift instructions for xplat intrinsics (#111108)

* emulate missing x86 shift instructions

* disable vpsraq emulation on 32-bit

* use logical shift for mask

* fix disasm for shift instructions

* allow vpsraq emulation on 32-bit for const shift amount

* review feedback

---------

Co-authored-by: Tanner Gooding <tagoo@outlook.com>",2025-01-10 01:18:19+00:00,Clinton Ingram,1,08ea199fab05eff48693901cbf1f8eca9f21db7a,"JIT: Improve x86 HWIntrinsic containment (#110736)

* improve x86 HWIntrinsic containment

* fix emitter asserts

* fix Avx.Compare simd size, tidying

* remove incorrect instruction mapping

* comment typo

---------

Co-authored-by: Tanner Gooding <tagoo@outlook.com>",4,78,27,jit: emulate missing x86 shift instructions for xplat intrinsics (issue_ref)* emulate missing x86 shift instructions* disable vpsraq emulation on 32-bit* use logical shift for mask* fix disasm for shift instructions* allow vpsraq emulation on 32-bit for const shift amount* review feedback---------
dotnet/runtime,de353dbd227d0ed9db1c2b6401e0251d3abdfdc1,"Synchronize metadata schema generator (#111223)

The generated file was manually updated without updating the generator.",2025-01-10 06:22:04+00:00,Michal Strehovský,0,,,2,1,5,synchronize metadata schema generator (issue_ref)the generated file was manually updated without updating the generator.
dotnet/runtime,0df31bcc243c67bcc575bf48f4e8dfe931ae583f,Include correct `HResult` in `IOException` during preallocation when the disk is full (#110281),2025-01-10 11:22:14+00:00,karakasa,0,,,2,44,3,include correct in during preallocation when the disk is full (issue_ref)
dotnet/runtime,71db8b269931fbc0fec2ecfb5947e283b8547fd9,"Build the ""in build"" crossgen2 into a pack that we can use within the VMR (#110676)

* Add a new crossgen2 build variant for a published crossgen2 targetting the host OS

* Remove the .NET-hosted in-build crossgen2 and just use the published in-build host-targeting crossgen2.

* Extract crossgen2 sfxproj changes from #109710

* Extract the properties and targets that will be shared into a separate props file.

* Add a ""host crossgen2"" project

* Add the crossgen2 host package to Subsets.props for the correct scenarios.

* Fix crossgen-corelib to work with the new in-build crossgen2

* Publish the in-build crossgen2 as single file to avoid having to adjust the AOT-in-build logic to handle AOT-ing for the host.

* AOT on Windows only

* Don't set Platform for the shared framework projects. It's not necessary and it breaks the new crossgen2 host package

* Forward ShortStack down so we don't build the host crossgen2 when runtime is the last repo.

* Add os-only RID to portable RID graph in source-build to enable crossgen2 tasks in the SDK to discover the target OS from the source-build target RID

* Publish the host crossgen2 as a ""Vertical"" visibility asset.

* Cleanup crossgen2 infra, add comment about workaround, and adjust publishing to publish packages as packages.

* Deduplicate artifacts

* Add back the Update, somehow this got lost.

* Don't forward down ShortStack

* Use new ""update"" functionality to specify which artifacts are vertical visibility

* Revert changes to Signing.props

* Remove workaround now that the VMR has a bootstrap SDK with a new enough version.

---------

Co-authored-by: Viktor Hofer <viktor.hofer@microsoft.com>",2025-01-10 13:54:35+00:00,Jeremy Koritzinsky,1,6454b4c4b99c39fa896367a85a1367adc789a7c0,"Conditionally set SYSTEM PATH in host install (#118092)

* Conditionally set SYSTEM PATH in host install

* Address ICE18 error",12,106,108,"build the ""in build"" crossgen2 into a pack that we can use within the vmr (issue_ref)* add a new crossgen2 build variant for a published crossgen2 targetting the host os* remove the .net-hosted in-build crossgen2 and just use the published in-build host-targeting crossgen2.* extract crossgen2 sfxproj changes from issue_ref* extract the properties and targets that will be shared into a separate props file.* add a ""host crossgen2"" project* add the crossgen2 host package to subsets.props for the correct scenarios.* fix crossgen-corelib to work with the new in-build crossgen2* publish the in-build crossgen2 as single file to avoid having to adjust the aot-in-build logic to handle aot-ing for the host.* aot on windows only* don't set platform for the shared framework projects. it's not necessary and it breaks the new crossgen2 host package* forward shortstack down so we don't build the host crossgen2 when runtime is the last repo.* add os-only rid to portable rid graph in source-build to enable crossgen2 tasks in the sdk to discover the target os from the source-build target rid* publish the host crossgen2 as a ""vertical"" visibility asset.* cleanup crossgen2 infra, add comment about workaround, and adjust publishing to publish packages as packages.* deduplicate artifacts* add back the update, somehow this got lost.* don't forward down shortstack* use new ""update"" functionality to specify which artifacts are vertical visibility* revert changes to signing.props* remove workaround now that the vmr has a bootstrap sdk with a new enough version.---------"
dotnet/runtime,22e39f9b747a75dd387c61b32f837b9aa0005f98,"Allow collection expressions for 'System.Collections.ObjectModel' collection types (#111093)

* #110161 Allow collection expressions for 'System.Collections.ObjectModel' collection types
https://github.com/dotnet/runtime/issues/110161

* Code review

Enhance ReadOnlyCollection with documentation and updates

The `EditorBrowsable` attribute is replaced with a `SuppressMessage` attribute to clarify the intended usage of these methods.

Additionally, the condition for checking if input values are empty is updated from `values.Length <= 0` to `values.IsEmpty` for improved readability and performance.

* Remove unused namespace from ReadOnlyCollection.cs

Eliminated the `using System.ComponentModel;` directive, reducing dependencies and potentially simplifying the code structure.

* Remove suppression attributes from collection methods

The `CreateCollection<T>` method in the `ReadOnlyCollection` class had its suppression attribute removed, addressing a style warning related to collection initialization while maintaining its functionality.

Similarly, the `CreateSet<T>` method in the `ReadOnlySet` class also had its suppression attribute removed, preserving its original functionality.

* Refactor `(HashSet<T>)[.. values]` to manual loop

* Marked CreateCollection and CreateSet methods in ReadOnlyCollection with the `[EditorBrowsable(EditorBrowsableState.Never)]` attribute to hide them from IntelliSense.

* Apply suggestions from code review

* Refactor ReadOnlyCollection and ReadOnlySet APIs

Updated method names in ReadOnlyCollection and ReadOnlySet from CreateCollection and CreateSet to Create for clarity and consistency.

Removed the CreateSet method from ReadOnlyCollection to streamline functionality.
Adjusted documentation comments for improved clarity.

Updated CollectionBuilder attributes to reflect the new method names, ensuring proper linkage for collection creation.

* Updated the `CollectionBuilder` attribute to reference `ReadOnlySet` instead of `ReadOnlyCollection`, reflecting a change in the collection type used in the `ReadOnlySet` class.

* Code Style

* Rename methods in ReadOnlyCollection and ReadOnlySet

Updated `ReadOnlyCollection` to rename `Create` to `CreateCollection` and introduced `CreateSet` for creating `ReadOnlySet` instances from spans. Adjusted `CollectionBuilder` attributes accordingly and removed the static `ReadOnlySet` class, integrating its functionality into the main class. Updated the `ReadOnlyCollection` partial class in `System.Runtime.cs` to maintain API consistency.

---------

Co-authored-by: Eirik Tsarpalis <eirik.tsarpalis@gmail.com>",2025-01-10 14:24:59+00:00,Alexander Radchenko,0,,,5,87,0,"allow collection expressions for 'system.collections.objectmodel' collection types (issue_ref)* issue_ref allow collection expressions for 'system.collections.objectmodel' collection types* code reviewenhance readonlycollection with documentation and updatesthe attribute is replaced with a attribute to clarify the intended usage of these methods.additionally, the condition for checking if input values are empty is updated from to for improved readability and performance.* remove unused namespace from readonlycollection.cseliminated the directive, reducing dependencies and potentially simplifying the code structure.* remove suppression attributes from collection methodsthe method in the class had its suppression attribute removed, addressing a style warning related to collection initialization while maintaining its functionality.similarly, the method in the class also had its suppression attribute removed, preserving its original functionality.* refactor to manual loop* marked createcollection and createset methods in readonlycollection with the attribute to hide them from intellisense.* apply suggestions from code review* refactor readonlycollection and readonlyset apisupdated method names in readonlycollection and readonlyset from createcollection and createset to create for clarity and consistency.removed the createset method from readonlycollection to streamline functionality.adjusted documentation comments for improved clarity.updated collectionbuilder attributes to reflect the new method names, ensuring proper linkage for collection creation.* updated the attribute to reference instead of , reflecting a change in the collection type used in the class.* code style* rename methods in readonlycollection and readonlysetupdated to rename to and introduced for creating instances from spans. adjusted attributes accordingly and removed the static class, integrating its functionality into the main class. updated the partial class in to maintain api consistency.---------"
dotnet/runtime,96613ae650113f6d33e3b92433ddd43e3720b5d9,"Enable Arm64 RDM on Windows (#109493)

* enable Arm64 RDM on Windows

* use windows version check instead

* use IsWindowsVersionOrGreater

* Revert ""use IsWindowsVersionOrGreater""

* Revert ""use windows version check instead""

* add comment explaining the implication

* update comment

---------

Co-authored-by: Tanner Gooding <tagoo@outlook.com>",2025-01-10 16:19:14+00:00,Clinton Ingram,0,,,1,11,0,"enable arm64 rdm on windows (issue_ref)* enable arm64 rdm on windows* use windows version check instead* use iswindowsversionorgreater* revert ""use iswindowsversionorgreater""* revert ""use windows version check instead""* add comment explaining the implication* update comment---------"
dotnet/runtime,5abf58221b725acc12df0b0c4e225e4d3c3c3b45,Mark encoding param in StreamReader ctors to be nullable (#108542),2025-01-10 16:23:37+00:00,Eriawan Kusumawardhono,0,,,3,29,24,mark encoding param in streamreader ctors to be nullable (issue_ref)
dotnet/runtime,94add2ee90a303122f76bde7ea3b34444e015393,Implement EmitJMP case in RiscV64Emitter (#111273),2025-01-10 17:32:52+00:00,Adeel Mujahid,0,,,2,8,6,implement emitjmp case in riscv64emitter (issue_ref)
dotnet/runtime,4020e05efdfcc6b10eab90aeb8a8b5d80f75786f,Clean up in Number.Formatting.cs (#110955),2025-01-10 19:29:57+00:00,Egor Bogatov,0,,,1,10,113,clean up in number.formatting.cs (issue_ref)
dotnet/runtime,f1c94c45d66ef415272df6cb61821e632697b6ff,"Update dependencies from https://github.com/dotnet/emsdk build 20250109.1 (#111263)

Microsoft.SourceBuild.Intermediate.emsdk , Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport
 From Version 10.0.0-alpha.1.25058.3 -> To Version 10.0.0-alpha.1.25059.1

Dependency coherency updates

runtime.linux-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.linux-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.osx-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.osx-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.win-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.win-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport
 From Version 10.0.0-alpha.1.25056.2 -> To Version 10.0.0-alpha.1.25057.1 (parent: Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-01-10 19:34:10+00:00,dotnet-maestro[bot],0,,,2,22,22,"update dependencies from build 20250109.1 (issue_ref)microsoft.sourcebuild.intermediate.emsdk , microsoft.net.workload.emscripten.current.manifest-10.0.100.transport from version 10.0.0-alpha.1.25058.3 -> to version 10.0.0-alpha.1.25059.1dependency coherency updatesruntime.linux-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.linux-musl-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.linux-x64.microsoft.netcore.runtime.wasm.node.transport,runtime.linux-musl-x64.microsoft.netcore.runtime.wasm.node.transport,runtime.osx-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.osx-x64.microsoft.netcore.runtime.wasm.node.transport,runtime.win-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.win-x64.microsoft.netcore.runtime.wasm.node.transport from version 10.0.0-alpha.1.25056.2 -> to version 10.0.0-alpha.1.25057.1 (parent: microsoft.net.workload.emscripten.current.manifest-10.0.100.transport"
dotnet/runtime,bc2ac2f3d51ee9ee58a01ee17ac254ac09e5f3cd,Do not ignore `MemoryMarshal.TryWrite` result (#108661),2025-01-10 20:45:38+00:00,xtqqczze,0,,,1,8,8,do not ignore result (issue_ref)
dotnet/runtime,e68313e1612010c9515ea5a97bc5c913c7a0a8d6,Split the Runtime Shared Framework project and combine legs in the official build (#111136),2025-01-11 02:49:30+00:00,Jeremy Koritzinsky,1,61feac11f2ffc9a8aae3a685c7006c8084d5cc4f,"Fix accidentally duplicated global-build-step.yml in runtime-official.yml (#111302)

Regressed with https://github.com/dotnet/runtime/pull/111136

I noticed because a second ""Build product"" step got injected that was building Debug in runtime-official",27,441,441,split the runtime shared framework project and combine legs in the official build (issue_ref)
dotnet/runtime,b35e96be62c0164a70eb3e8295b6241116be3976,"JIT: run extra SPMI queries for arrays (#111293)

Work in anticipation of stack allocation of arrays, so that we can get decent
diffs via SPMI.",2025-01-11 03:07:37+00:00,Andy Ayers,0,,,1,16,0,"jit: run extra spmi queries for arrays (issue_ref)work in anticipation of stack allocation of arrays, so that we can get decentdiffs via spmi."
dotnet/runtime,82ab89241b90ca3d64b22971f3a1e248da72828a,Ensure that Shuffle is marked as HW_Flag_CanBenefitFromConstantProp (#111303),2025-01-11 16:37:46+00:00,Tanner Gooding,1,1af7c2370bce80cba73d442d69f4a2f1b02dcbef,"Add a number of additional APIs to the various SIMD accelerated vector types (#111179)

* Add a number of additional APIs to the various SIMD accelerated vector types

* Add tests for the new vector APIs

* Fix the boolean logic for the vectorized IsEvenInteger

* Try to fix the Mono build

* Fixing some RyuJIT handling

* Add some additional Mono handling and document what's hindering other support

* Update src/libraries/System.Private.CoreLib/src/System/Half.cs

* Fix mono interp

* Ensure the handling of the Vector2/3 All/Any/None and Count/IndexOf/LastIndexOf methods is correct

* Try and fix the mono build

* Don't accelerate the new methods for Vector2/3 on Mono

* Fix mono build warning

* Ensure the right class name is resolved for Vector4",2,5,5,ensure that shuffle is marked as hw_flag_canbenefitfromconstantprop (issue_ref)
dotnet/runtime,9bef28b00c0c050af56d3b6df1dbc31d825b59e1,"Cleanup unused JIT stubs in vm (#111237)

* Undef JIT_TailCall on non-Windows x86

* JIT_TailCallReturnFromVSD

* JIT_TailCallVSDLeave and JIT_TailCallLeave

* Move JIT_ProfilerEnterLeaveTailcallStub to asm

* GetCONTEXTFromRedirectedStubStackFrame

* RedirectForThrowControl and empty unixstubs

* Update comment mentioning RedirectForThrowControl

* Link to issue for stack probing

* Remove GetCONTEXTFromRedirectedStubStackFrame(T_DISPATCHER_CONTEXT) on all unix

* Remove defines for other archs in Windows specific handler",2025-01-12 02:49:35+00:00,Huo Yaoyuan,1,abf8e94296b7842e4d8ba7c9791eaffaf63d2a09,"Make longjmp over managed frames work (#111259)

* Make longjmp over managed frames work

The new exception handling has broken hosting Lua on Windows when
a Lua code throws an exception that ends up crossing managed frames.
Lua uses longjmp for its exception handling mechanism and the new
exception handling reported the longjmp as an unhandled `SEHException`.

This change makes the new EH behave like the legacy one w.r.t. the longjmp propagation over managed frames on Windows. It is a best effort fix though just to get rid of the regression related to the legacy exception handling. New code should not rely on this. And it doesn't work on non-windows targets (neither did it work with the legacy exception handling).

Close #111242

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",27,41,229,cleanup unused jit stubs in vm (issue_ref)* undef jit_tailcall on non-windows x86* jit_tailcallreturnfromvsd* jit_tailcallvsdleave and jit_tailcallleave* move jit_profilerenterleavetailcallstub to asm* getcontextfromredirectedstubstackframe* redirectforthrowcontrol and empty unixstubs* update comment mentioning redirectforthrowcontrol* link to issue for stack probing* remove getcontextfromredirectedstubstackframe(t_dispatcher_context) on all unix* remove defines for other archs in windows specific handler
dotnet/runtime,4536b96c60507e64c77792285987c9471ab5f2f9,"[NativeAOT/ARM64] Generate frames compatible with Apple compact unwinding (#107766)

* JIT/ARM64: Add ability to generate frames compatible with Apple compact
unwinding format.

For NativeAOT/ARM64/Apple API do the following:
- Save callee registers in opposite order and in pairs.
- Prefer saving FP/LR on the top of the frame. Heuristics are used to
  avoid worse code quality outside of prolog/epilog due to addressing
  range limits of the ARM64 instruction set.
- Added optimization to lvaFrameAddress to rewrite FP-x references to
  SP+y when possible. This allows efficient addressing using positive
  indexes when FP points to the top of the frame. It mimics similar
  optimization on ARM32.

* ObjWriter: For Mach-O ARM64 try to convert the DWARF CFI unwinding codes
into compact unwinding code

* Disable lvaFrameAddress FP->SP optimization for OSR methods",2025-01-12 05:12:10+00:00,Filip Navara,1,a05d34befcf741aeb6d7ef8b8117569c91eeb031,"JIT: move second pass of EH opts earlier (#111364)

to avoid messing up loop exit canonicalization (which is sensitive
to loops with internal EH flow).

Fixed #110959.

Also, remove some of the ceremony around `fgModified` -- seems like this
is no longer useful/needed.

Defer deciding if we need a PSPSym until we create funclets. This removes
unused PSPSym allocations in some cases. Also, there is no benefit to
tracking the PSPSym, so stop doing that.",7,329,86,[nativeaot/arm64] generate frames compatible with apple compact unwinding (issue_ref)* jit/arm64: add ability to generate frames compatible with apple compactunwinding format.for nativeaot/arm64/apple api do the following:- save callee registers in opposite order and in pairs.- prefer saving fp/lr on the top of the frame. heuristics are used to avoid worse code quality outside of prolog/epilog due to addressing range limits of the arm64 instruction set.- added optimization to lvaframeaddress to rewrite fp-x references to sp+y when possible. this allows efficient addressing using positive indexes when fp points to the top of the frame. it mimics similar optimization on arm32.* objwriter: for mach-o arm64 try to convert the dwarf cfi unwinding codesinto compact unwinding code* disable lvaframeaddress fp->sp optimization for osr methods
dotnet/runtime,a69d74ad624ea5da6ba99147c4a45d6d4cae7c1f,"Update dependencies from https://github.com/dotnet/runtime-assets build 20250110.2 (#111290)

Microsoft.DotNet.CilStrip.Sources , Microsoft.NET.HostModel.TestData , System.ComponentModel.TypeConverter.TestData , System.Data.Common.TestData , System.Drawing.Common.TestData , System.Formats.Tar.TestData , System.IO.Compression.TestData , System.IO.Packaging.TestData , System.Net.TestData , System.Private.Runtime.UnicodeData , System.Runtime.Numerics.TestData , System.Runtime.TimeZoneData , System.Security.Cryptography.X509Certificates.TestData , System.Text.RegularExpressions.TestData , System.Windows.Extensions.TestData
 From Version 10.0.0-beta.25057.1 -> To Version 10.0.0-beta.25060.2

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-01-12 19:23:59+00:00,dotnet-maestro[bot],0,,,2,45,45,"update dependencies from build 20250110.2 (issue_ref)microsoft.dotnet.cilstrip.sources , microsoft.net.hostmodel.testdata , system.componentmodel.typeconverter.testdata , system.data.common.testdata , system.drawing.common.testdata , system.formats.tar.testdata , system.io.compression.testdata , system.io.packaging.testdata , system.net.testdata , system.private.runtime.unicodedata , system.runtime.numerics.testdata , system.runtime.timezonedata , system.security.cryptography.x509certificates.testdata , system.text.regularexpressions.testdata , system.windows.extensions.testdata from version 10.0.0-beta.25057.1 -> to version 10.0.0-beta.25060.2"
dotnet/runtime,010e61a4f46d6d9b544cde169dc034417de7223a,"JIT: Model GT_RETURN kills with contained operand (#111230)

When `GT_RETURN` has a contained operand (due to returning a DNER
local), it will load the ABI return registers directly from stack. This
will kill those registers. However, nothing was modelling this kill.

This was noticed while trying to ensure that GC information is correctly
marked in codegen when going into epilogs. However, this is potential
bad codegen even on its own: before this change LSRA might not properly
spill locals that are required to be live around a `GT_RETURN` node even
if they are getting killed by the `GT_RETURN`. A concrete case was seen
in `<StartupCode$FSharp-Core>.$Tasks+Using@148-5[System.__Canon]:Invoke`
under JitStressRegs=2, where the VM requests that the JIT keep ""this""
alive throughout the function. Before this change we get the following
codegen:
```asm
G_M51753_IG05:        ; bbWeight=0.50, gcVars=0000000000000000 {}, gcrefRegs=0002 {x1}, byrefRegs=0000 {}, gcvars, byref
                             ; gcrRegs -[x0] +[x1]
                             ; GC ptr vars -{V00}
            stp     xzr, xzr, [fp, #0x38]
            ldp     x0, x1, [fp, #0x38]	// [V04 loc2], [V04 loc2+0x08]
                             ; gcrRegs -[x1] +[x0]
						;; size=8 bbWeight=0.50 PerfScore 2.00

```
where ""this""  is in `x1` going into the block, and gets overridden by
the return without being available somewhere else. After this change,
the codegen becomes
```asm
G_M51753_IG05:        ; bbWeight=0.50, gcVars=0000000000000000 {}, gcrefRegs=0002 {x1}, byrefRegs=0000 {}, gcvars, byref
                             ; gcrRegs -[x0] +[x1]
                             ; GC ptr vars -{V00}
            str     x1, [fp, #0x20]	// [V00 this]
                             ; GC ptr vars +{V00}
            stp     xzr, xzr, [fp, #0x38]
            ldp     x0, x1, [fp, #0x38]	// [V04 loc2], [V04 loc2+0x08]
                             ; gcrRegs -[x1] +[x0]
						;; size=12 bbWeight=0.50 PerfScore 2.50
```",2025-01-12 19:35:59+00:00,Jakob Botsch Nielsen,0,,,1,10,0,"jit: model gt_return kills with contained operand (issue_ref)when has a contained operand (due to returning a dnerlocal), it will load the abi return registers directly from stack. thiswill kill those registers. however, nothing was modelling this kill.this was noticed while trying to ensure that gc information is correctlymarked in codegen when going into epilogs. however, this is potentialbad codegen even on its own: before this change lsra might not properlyspill locals that are required to be live around a node evenif they are getting killed by the . a concrete case was seenin under jitstressregs=2, where the vm requests that the jit keep ""this""alive throughout the function. before this change we get the followingcodegen:where ""this"" is in going into the block, and gets overridden bythe return without being available somewhere else. after this change,the codegen becomes"
dotnet/runtime,a5a7a3a6254b672d70fc96aa9b2630ee811d17d0,[browser] Don't cache index.html during development (#111268),2025-01-13 09:56:36+00:00,Marek Fišera,0,,,1,9,1,[browser] don't cache index.html during development (issue_ref)
dotnet/runtime,ff5726fb5f1e49711441eeb60ac9eddc1c9d159a,"[Apple mobile] Enable trimming on build machines to match ILLink features (#110966)

Trimming is now moved trimming from Helix to AzDo (build) machines. Redundant code for maintaining ILLink features is removed.",2025-01-13 10:48:04+00:00,Milos Kotlar,0,,,11,16,50,[apple mobile] enable trimming on build machines to match illink features (issue_ref)trimming is now moved trimming from helix to azdo (build) machines. redundant code for maintaining illink features is removed.
dotnet/runtime,2f51a56eddcb9beb7bc3073aa10173042a7005e6,Console.Unix: also reset terminal state when process terminates due to an unhandled exception. (#111272),2025-01-13 13:13:17+00:00,Tom Deseyn,0,,,6,22,2,console.unix: also reset terminal state when process terminates due to an unhandled exception. (issue_ref)
dotnet/runtime,56844508af7293460618995dcc2bef1cd1369ef7,"Do not build GCSimulator tests with native AOT (#111336)

This is 400 executables that take 15 minutes to compile on my azure devbox and take up 7 GB of space that we don't even execute because GCSimulator is a special test run mode that native AOT doesn't run.",2025-01-13 14:23:57+00:00,Michal Strehovský,0,,,1,1,0,do not build gcsimulator tests with native aot (issue_ref)this is 400 executables that take 15 minutes to compile on my azure devbox and take up 7 gb of space that we don't even execute because gcsimulator is a special test run mode that native aot doesn't run.
dotnet/runtime,d41bdd95e29a175ebc434bb50b968ef5b8ed1b22,"Mark new test as needing Reflection.Emit (#111334)

This is failing pri1 native AOT runs.",2025-01-13 14:24:32+00:00,Michal Strehovský,0,,,1,2,1,mark new test as needing reflection.emit (issue_ref)this is failing pri1 native aot runs.
dotnet/runtime,c9f0d049340a2ade9fe469c0037cf47ad19bad99,"Initialize CrossCompileArch with _targetArch (#111277)

* Initialize CrossCompileArch with _targetArch

* Relax arch validation in publishing",2025-01-13 15:59:16+00:00,Adeel Mujahid,1,0d1897891afe4a2e011c0f0aa3fb78faae0d2840,"Fix relocs errors on riscv64 (#111317)

* Fix relocs errors on riscv64

* Fix RELPTR32 and feedback

* Align with PutLoongArch64JIR

* Consolidate relocs

Co-authored-by: Tomek Sowiński <tomeksowi@gmail.com>

* Use reloc-57

Co-authored-by: Filip Navara <filip.navara@gmail.com>

* Combine PC & JALR to correct reloc

* Fix var macros

* Update emitriscv64.h

* Remove JALR

* Combine TODO comments related to CAS-128

---------

Co-authored-by: Tomasz Sowiński <tomeksowi@gmail.com>
Co-authored-by: Filip Navara <filip.navara@gmail.com>",2,2,8,initialize crosscompilearch with _targetarch (issue_ref)* initialize crosscompilearch with _targetarch* relax arch validation in publishing
dotnet/runtime,b6be804d7b9c19d264698da5159dffdbb1f574e4,Imply NoInlining when only NoOptimization is set (#111308),2025-01-13 21:51:13+00:00,Egor Bogatov,1,847a8c2979d2ef252c41e1ad97901f6e6b5bcaef,"Fix explicit offset of ByRefLike fields. (#111584)

* Fix explicit offset of ByRefLike fields.

A ByRefLike type was previously forced to be
pointer aligned so ref fields were implicitly aligned.
Using Explicit layout one can create valid aligned
ByRefLike types with no object pointers. This change
tkaes into account the base offset of the ByRefLike type and
includes that for determining offsets of fields in the
ByRefLike type.

---------

Co-authored-by: Michal Strehovský <MichalStrehovsky@users.noreply.github.com>",7,21,12,imply noinlining when only nooptimization is set (issue_ref)
dotnet/runtime,56d28a6d280d38a8f0b8a56ac1abf0cf675f4411,"Disable polyrec test on native AOT (#111333)

This has a deep generic recursion that generates throwing code. It also uses threads so the unhandled exception crashes the merged test runner instead of being reported as a failure. The reporting at the end of test run then reports 0 failing test. I assume this would still be failing in Helix, so it's not a big deal, but I missed a couple failing tests from the Loader tree that I need to bucket.",2025-01-13 21:58:34+00:00,Michal Strehovský,0,,,1,2,0,"disable polyrec test on native aot (issue_ref)this has a deep generic recursion that generates throwing code. it also uses threads so the unhandled exception crashes the merged test runner instead of being reported as a failure. the reporting at the end of test run then reports 0 failing test. i assume this would still be failing in helix, so it's not a big deal, but i missed a couple failing tests from the loader tree that i need to bucket."
dotnet/runtime,4ae1cf20ecf70b33a2ac6afb9e362b3359b430b7,"JIT: Mark profile inconsistent during flow opts if OSR entry is involved (#111362)

OSR entry weights are frequently imbalanced, so we skip profile consistency checks for them. However, fgUpdateFlowGraph can propagate these weights to normal blocks, which are checked for profile consistency. If we think this happened, liberally mark the profile as inconsistent. Fixes #111343.",2025-01-13 22:16:18+00:00,Aman Khalid,1,07e4c1b42cbcdad6e3ef49731833654667188978,"JIT: Cache start of cold section for reuse in 3-opt layout (#111365)

During cold code motion, if fgMoveColdBlocks finds a call-finally pair that begins with a cold block, it will try to move the entire pair, regardless of whether the tail is cold or not. If the tail isn't cold, 3-opt layout's detection of the last hot block may terminate early, causing the cold part of an EH region to also be considered for reordering. Because 3-opt expects each EH subregion being reordered to be contiguous, this split causes asserts. Caching the cold region start point in fgMoveColdBlocks means we don't need to find the first cold block in 3-opt, thus removing the potential of getting it wrong.

While I was here, I decided to enhance fgMoveColdBlocks so that it can move cold call-finally pairs at the end of the hot main method body, and clean up 3-opt's initialization logic to reduce its allocation sizes. Fixes #111207.",1,9,0,"jit: mark profile inconsistent during flow opts if osr entry is involved (issue_ref)osr entry weights are frequently imbalanced, so we skip profile consistency checks for them. however, fgupdateflowgraph can propagate these weights to normal blocks, which are checked for profile consistency. if we think this happened, liberally mark the profile as inconsistent. fixes issue_ref."
dotnet/runtime,e5ed253e38d3bf1414949924e1e69f43c8164d1b,"Optimize DateOnly, TimeOnly, ISOWeek (#111244)

* Optimize DateOnly, TimeOnly, ISOWeek

* Address PR feedback",2025-01-14 00:51:53+00:00,Pent Ploompuu,0,,,6,121,113,"optimize dateonly, timeonly, isoweek (issue_ref)* optimize dateonly, timeonly, isoweek* address pr feedback"
dotnet/runtime,25b72b0e9164830fe8a5c3014770eccbf3f2678b,Call from the monocrossaot traversal project into the sfxproj using the regular ProjectReference flow. Simplify the sfxproj to not do unnecessary additional work. (#111372),2025-01-14 07:40:04+00:00,Jeremy Koritzinsky,1,bdf9d67d08e8c586c7faaf5bca6fc239e58e9ed0,"Only build one runtime when building source-build (#111415)

* Only build one runtime when building source-build.

* Set OutDirName with TargetCrossRid to avoid parallel file access problems

* Restore once, point all rid-specific builds to the same restore outputs

* Remove extraneous $

* Exclude the nonportable.txt marker file from the platform manifest validation

* Don't build the Mono AOT cross compiler in source-build

* Fix inverted condition

* Always restore to the same folder (WasmBuildTests restores while also setting the RID as they reference this project directly.

* Look up project extensions where we restored

* Add a nice big comment block to explain the situation.

* Move some properties later to make sure ArtifactsObjDir is available

* Split the MonoCrossAOT project per-rid and get rid of the shenanigans.

* Remove double-import

* Set the path for the package readme

* Fix file names

* Update Microsoft.NETCore.App.MonoCrossAOT.iossimulator-arm64.sfxproj",3,11,23,call from the monocrossaot traversal project into the sfxproj using the regular projectreference flow. simplify the sfxproj to not do unnecessary additional work. (issue_ref)
dotnet/runtime,2572ab8a66810ca88aaad7b06dd7e25ad7f4a28d,"Unify two identical implementations of class_kind in SGen GC bridges (#107909)

Co-authored-by: Manish Godse <61718172+mangod9@users.noreply.github.com>
Co-authored-by: Vlad Brezae <brezaevlad@gmail.com>",2025-01-14 09:06:05+00:00,Filip Navara,1,e0f1b2188f0f33b0708eff9d32597c50fb2f06d1,"[mono] Add a few bridge tests (#113703)

* [mono][sgen] Fix DUMP_GRAPH debug option build for tarjan bridge

* [mono][sgen] Don't create ScanData* during debug dumping of SCCs

It serves no purpose and it would later crash the runtime since we didn't patch the lockword back in place.

* [mono][sgen] Fix some null deref crashes in DUMP_GRAPH debug option

* [mono][tests] Add bridge tests

These are ported from some of the bridge tests we had on mono/mono. In order to test them we compare between the output of the new and the tarjan bridge.",4,27,66,unify two identical implementations of class_kind in sgen gc bridges (issue_ref)
dotnet/runtime,c290df149ee29f243e9db27355d26ecbbc81ad2a,"[browser] Add `OutputType=Library` tests (#110731)

* Browser library test

* Wasi should test both sdks.

* Test both sdks in browser lib mode.

* Trnsform the test asset to sample-like-project.

* Add running the lib to the test.",2025-01-14 09:06:56+00:00,Ilona Tomkowicz,0,,,10,101,22,[browser] add tests (issue_ref)* browser library test* wasi should test both sdks.* test both sdks in browser lib mode.* trnsform the test asset to sample-like-project.* add running the lib to the test.
dotnet/runtime,69b3d4aff52c1ea5f9a95007f4068d3898dc4f74,"[RISC-V] JIT: Remove src/dst from CORINFO_HELP_ASSIGN_BYREF GC kill set (#111360)

* Remove t3 and t5 from RBM_CALLEE_TRASH_NOGC",2025-01-14 09:24:19+00:00,Tomasz Sowiński,0,,,1,2,2,[risc-v] jit: remove src/dst from corinfo_help_assign_byref gc kill set (issue_ref)* remove t3 and t5 from rbm_callee_trash_nogc
dotnet/runtime,9fea44166064fb9ca6ef1bab9362f24c47512ae1,"Disable more tests dependent on http://corefx-net-http11.azurewebsites.net (#111354)

* Disable more tests dependent on http://corefx-net-http11.azurewebsites.net

* Disable winhttphandlertests",2025-01-14 11:49:09+00:00,Radek Zikmund,1,c47a53de9f37b648d26f970cafa54dd24b689ba8,"[WinHTTP] Make concurrent IO check thread safe (#111750)

* Check for concurrent IO is now thread safe.

* Add test

* Use compare exchange, fix cancellation token registration

* Typo

* Fixed unit tests.

* Test exception narrow down

* Narrow down the exception

* Don't dispose handle outside of lock",5,17,12,disable more tests dependent on (issue_ref)* disable more tests dependent on * disable winhttphandlertests
dotnet/runtime,a05d34befcf741aeb6d7ef8b8117569c91eeb031,"JIT: move second pass of EH opts earlier (#111364)

to avoid messing up loop exit canonicalization (which is sensitive
to loops with internal EH flow).

Fixed #110959.

Also, remove some of the ceremony around `fgModified` -- seems like this
is no longer useful/needed.

Defer deciding if we need a PSPSym until we create funclets. This removes
unused PSPSym allocations in some cases. Also, there is no benefit to
tracking the PSPSym, so stop doing that.",2025-01-14 15:33:34+00:00,Andy Ayers,1,2a2b7dc72b5642dd24ca37623327e765a9730dd7,"JIT: Fix profile maintenance in `optSetBlockWeights`, funclet creation (#111736)

Fixes #111724. Fixes #111732.",6,31,45,"jit: move second pass of eh opts earlier (issue_ref)to avoid messing up loop exit canonicalization (which is sensitiveto loops with internal eh flow).fixed issue_ref.also, remove some of the ceremony around -- seems like thisis no longer useful/needed.defer deciding if we need a pspsym until we create funclets. this removesunused pspsym allocations in some cases. also, there is no benefit totracking the pspsym, so stop doing that."
dotnet/runtime,30834e44d5b543bf4ead6d3786e5e4e3f5c4ebd4,"Fix Encoding regression (#111320)

* Fix Encoding regression

* Feedback addressing

* Fix the test",2025-01-14 16:51:41+00:00,Tarek Mahmoud Sayed,1,aba4de871061b82361f9d91886f2db7f41ff72d0,"Fix encoding missed overridden properties (#113167)

* Fix encoding missed overriden properties

* Update src/libraries/System.Text.Encoding.CodePages/src/System/Text/EncodingNLS.cs

Co-authored-by: Carlos Sánchez López <1175054+carlossanlop@users.noreply.github.com>

* Small test fix

* Fix the tuple package reference in the csproj file

* apply missed feedback

---------

Co-authored-by: Carlos Sánchez López <1175054+carlossanlop@users.noreply.github.com>",2,24,1,fix encoding regression (issue_ref)* fix encoding regression* feedback addressing* fix the test
dotnet/runtime,bbe2cb9de0b9764ed5676fa4f1cbffb1b9fee66b,"Revert ""[NativeAOT/ARM64] Generate frames compatible with Apple compact unwinding (#107766)"" (#111405)

This reverts commit 4536b96c60507e64c77792285987c9471ab5f2f9.",2025-01-14 19:20:02+00:00,Egor Bogatov,1,44ad4db309db80fbf1bd89d7f54d5d2a78e798e5,"JIT: Track GC info accurately into epilogs in codegen (#107283)

- Handle tailcall arguments which are consumed by the call node but
  remain live into the epilog
- Handle return nodes which move the operand to the return registers
  which then should remain live into the epilog

Fix #107137",7,86,329,"revert ""[nativeaot/arm64] generate frames compatible with apple compact unwinding (issue_ref)"" (issue_ref)this reverts commit 4536b96c60507e64c77792285987c9471ab5f2f9."
dotnet/runtime,845dc11a2dd779170dc0ca642a339afb883fdb1a,"JIT: Move profile consistency checks to after morph (#111253)

Part of #107749. Enables profile checks for morph and post-morph phases.

For benchmarks.run_pgo, 45383 methods are consistent before inlining; after, we're down to 37215, or 82%. By the time we make it to morph, 33461 methods (~74% of the original) are consistent; after morph, we're down to 29402 (~65%). The decline isn't too dramatic for this collection, though I imagine we fare worse elsewhere.

---------

Co-authored-by: Andy Ayers <andya@microsoft.com>",2025-01-14 19:54:44+00:00,Aman Khalid,1,e6c3353d03b4e73461d335f36e2c1a840cebd506,"JIT: tolerate unreachable callfinallies during EH removal (#111668)

If we unexpectedly see multiple (likely unreachable) callfinallies from an
empty try, just defer optimizing away the try. Now that we run multiple
passes of EH removal, we will  redo the opt later once flow opts have cleaned
up those unreachable blocks.

Fixes #111617",6,125,87,"jit: move profile consistency checks to after morph (issue_ref)part of issue_ref. enables profile checks for morph and post-morph phases.for benchmarks.run_pgo, 45383 methods are consistent before inlining; after, we're down to 37215, or 82%. by the time we make it to morph, 33461 methods (~74% of the original) are consistent; after morph, we're down to 29402 (~65%). the decline isn't too dramatic for this collection, though i imagine we fare worse elsewhere.---------"
dotnet/runtime,9e6b45ce0792d81d2d28435cd11ea42b4b5ae83f,Add lock in ValidateName (#110780),2025-01-14 21:20:52+00:00,MaxPatri,0,,,1,10,7,add lock in validatename (issue_ref)
dotnet/runtime,00506eb2501118d1ce803de2627f591eb53e37d0,"Remove ConcurrentDictionary lookups from Unix socket event loop (#109052)

* Remove ConcurrentDictionary lookups from Unix socket event loop

* Switch from GCHandle to simple array+index",2025-01-14 21:28:35+00:00,Miha Zupan,0,,,4,59,38,remove concurrentdictionary lookups from unix socket event loop (issue_ref)* remove concurrentdictionary lookups from unix socket event loop* switch from gchandle to simple array+index
dotnet/runtime,2bfe21baf9fdff6804587c134579d67354e18b18,Support writing base64 JSON segments (#111041),2025-01-14 22:10:53+00:00,Pranav Senthilnathan,1,d454419cb232cb5ef76c17968e13be8bad04a703,"Switch Json's PooledByteBufferWriter to shared ArrayBuffer helper (#111348)

* Switch Json's PooledByteBufferWriter to use ArrayBuffer

* Revert useless change

* Delete unused error message

* Merge a couple Stream polyfills

* Commit the moved file :facepalm:

* Use the polyfills in more places",7,912,312,support writing base64 json segments (issue_ref)
dotnet/runtime,cea112c04e144bb2ee6ee2515607fdc7dfb89d1a,"Remove `RequiresProcessIsolation` from HFA tests (#111406)

Tests using `CMakeProjectReference` seem to work just fine with the merged runner.

Before (CoreCLR, checked, Ryzen 9700X):

```
Time [secs] | Total | Passed | Failed | Skipped | Assembly Execution Summary
============================================================================
     47.303 |   112 |    112 |      0 |       0 | JIT.jit64.jit64_1
```

After:

```
Time [secs] | Total | Passed | Failed | Skipped | Assembly Execution Summary
============================================================================
      2.694 |   112 |    112 |      0 |       0 | JIT.jit64.jit64_1
```",2025-01-14 22:45:36+00:00,Michal Strehovský,0,,,112,0,226,"remove from hfa tests (issue_ref)tests using seem to work just fine with the merged runner.before (coreclr, checked, ryzen 9700x):after:"
dotnet/runtime,73bcb1d808e906808f91780aa1af23208549426f,Use alternative format (#111254),2025-01-15 02:25:13+00:00,Jeremy Koritzinsky,1,6e1486e7bf62d4268c198833fa3590b8f79cd99d,"Allow nested types inside of the <Module> type (#111435)

* Allow nested types inside of the <Module> type
- This isn't disallowed by spec, although ilasm and ildasm cannot handle these cases
- Simply skip adding the type to the available class hash.

* Fix issue where TokenFromRid parameters are out of order in a number of places in the runtime

Fix #111164",1,4,4,use alternative format (issue_ref)
dotnet/runtime,8104cb13dfbc0a8b0707239b1bd80f143bc56402,"Add IPAddress.IsValid (#111433)

* Add IPAddress.IsValid

* Speed up fuzzing inner loop

* Rename IsValid for bytes to IsValidUtf8",2025-01-15 09:01:09+00:00,Miha Zupan,1,fdfd4c453310812b20f95659845cd9ad0c4aba06,Use uint.TryFormat to fix TODO in IPAddressParser (#117300),18,234,98,add ipaddress.isvalid (issue_ref)* add ipaddress.isvalid* speed up fuzzing inner loop* rename isvalid for bytes to isvalidutf8
dotnet/runtime,d2cdcdd69391bbfde1a8fb4aa275a6cc393ca65b,"JIT: Relax address exposure check for tailcalls (#111397)

The `lvHasLdAddrOp` based check is conservative: address exposure (as computed in local morph) is much more precise. We can switch to that check only.",2025-01-15 09:15:38+00:00,Jakob Botsch Nielsen,0,,,1,0,5,jit: relax address exposure check for tailcalls (issue_ref)the based check is conservative: address exposure (as computed in local morph) is much more precise. we can switch to that check only.
dotnet/runtime,44ad4db309db80fbf1bd89d7f54d5d2a78e798e5,"JIT: Track GC info accurately into epilogs in codegen (#107283)

- Handle tailcall arguments which are consumed by the call node but
  remain live into the epilog
- Handle return nodes which move the operand to the return registers
  which then should remain live into the epilog

Fix #107137",2025-01-15 09:35:47+00:00,Jakob Botsch Nielsen,1,11d70ec149d6f9efcc5d0a867e131a06d483e55d,"JIT: Handle `GT_RETFILT` when updating GC information for returns (#111621)

We were updating GC information as if RETFILT were normal returns.

Fix #111618",8,85,136,jit: track gc info accurately into epilogs in codegen (issue_ref)- handle tailcall arguments which are consumed by the call node but remain live into the epilog- handle return nodes which move the operand to the return registers which then should remain live into the epilogfix issue_ref
dotnet/runtime,dda0d4ea906a5a87f3ad2025ebaa3de89a0da16d,SPMI: Handle sourcelink for NAOT smoke test collection (#111417),2025-01-15 14:53:34+00:00,Jakob Botsch Nielsen,1,e8a1e2d730536f0198a572410caa13bf405d4bba,"SPMI: Include JIT-EE GUID changes in JIT baseline detection (#112820)

fb67dbab4f50402a92a0a42a6c4254df304b4bbb changed the JIT-EE GUID, but it
includes no changes under src/coreclr/jit/*. The result is that
jitrollingbuild built a JIT on that version but overrode the JIT on the
parent commit 7060c62203d056f074e7d43f96fd43c37a19d4a2 with it. That
means the JIT for 7060c62203d056f074e7d43f96fd43c37a19d4a2 now has a
wrong JIT-EE GUID.

Fix the baseline detection so that it includes changes in the JIT-EE
GUID. Also log the GUIDs when there is a mismatch in SPMI.",1,3,0,spmi: handle sourcelink for naot smoke test collection (issue_ref)
dotnet/runtime,d548f38d46f5702b0ad1f2b987cecff6d8e95970,"JIT: more anticipatory extra SPMI queries for array stack alloc (#111441)

Augment the set of extra queries added in #111293 with a few more
that we might call when stack allocating arrays.",2025-01-15 15:59:43+00:00,Andy Ayers,0,,,1,6,2,jit: more anticipatory extra spmi queries for array stack alloc (issue_ref)augment the set of extra queries added in issue_ref with a few morethat we might call when stack allocating arrays.
dotnet/runtime,1dc213fcb9d1f00d7ee07504f6142200db184ac3,[NativeAOT] Delete unnecessary fast paths from asm helpers (#111440),2025-01-15 17:31:12+00:00,Jan Kotas,0,,,6,53,119,[nativeaot] delete unnecessary fast paths from asm helpers (issue_ref)
dotnet/runtime,1ce82e73932b8bc98f6395b0169c21f17f71268b,"Avoid IndexOutOfRangeException in ZipArchive (#109168)

* Avoid IndexOutOfRangeException in ZipArchive

* Add Sys.IO.Compression test

Add test to cover problem with invalid zip file.
Currently an IndexOutOfRangeException is thrown when invalid zip file is opened with ZipArchive.

* Update Add Sys.IO.Compression test

Change ""Theory"" to ""Fact""

Co-authored-by: Eric StJohn <ericstj@microsoft.com>

---------

Co-authored-by: Eric StJohn <ericstj@microsoft.com>
Co-authored-by: Viktor Hofer <viktor.hofer@microsoft.com>",2025-01-15 17:57:41+00:00,Peter Zmanovsky,1,0a477a86d0fea6234ada63e660c0faa310fe121d,"Reduce memory usage when updating ZipArchives (#102704)

* Changed behaviour of WriteFile

WriteFile now takes a more granular approach to writing the ZipArchive to its stream.
Adding a new file to the end of the archive will no longer require every file in the archive to be loaded into memory.
Changing fixed-length metadata inside a file will no longer require the entire archive to be re-written.

* Added tests for changed WriteFile behaviour

* Changes following code review

Renamed Dirty and DirtyState to Changed and ChangeState.
Explicitly assigned Unchanged as a zero-value ChangeState.

* Changed field protection levels

Reset _originallyInArchive and _offsetOfLocalHeader to private members, exposed as internal properties.
Also changed _versionToExtract to be private - this isn't ever used in System.IO.Compression outside of ZipArchiveEntry.

* Following code review feedback

* Used named parameter when passing a constant to forceWrite.
* Replaced two magic numbers with constants.
* Small cleanup of ZipArchive.WriteFile for clarity.
* Renamed ZipArchiveEntry.Changed to Changes.

* Further code review: initial response

* Further code review comments

The list of entries in a ZipArchive is now only sorted when opened in Update mode.
Added/modified a test to verify that these entries appear in the correct order: offset order when opened in Update mode, central directory entry order when opened in Read mode.

* Correct the write counts in tests

This accounts for the removal of BinaryReader in an earlier PR

* Extra test: Update_PerformMinimalWritesWhenEntriesModifiedAndAdded

This test modifies an entry at a specific index, adds N entries after it, then verifies that they've been written in the expected order: existing entries first, new entries afterwards

---------

Co-authored-by: Carlos Sánchez López <1175054+carlossanlop@users.noreply.github.com>",2,24,0,"avoid indexoutofrangeexception in ziparchive (issue_ref)* avoid indexoutofrangeexception in ziparchive* add sys.io.compression testadd test to cover problem with invalid zip file.currently an indexoutofrangeexception is thrown when invalid zip file is opened with ziparchive.* update add sys.io.compression testchange ""theory"" to ""fact"""
dotnet/runtime,4f16361cc0748eed1dce3f762d17cfd1b5fc07d1,removing deprecated helix queue (#111462),2025-01-15 19:21:57+00:00,Michael Sharp,1,4974c129e937741b6faa98389b22518cad2b0cda,"Add Ubuntu 24.10 image (#111504)

* Add Ubuntu 24.10 image

* Fix TimeZone tests to avoid failures because of deprecated zone names

* Update eng/pipelines/libraries/helix-queues-setup.yml

Co-authored-by: Rich Lander <rlander@microsoft.com>

* DIsable System.Net.Security failing test

---------

Co-authored-by: Tarek Mahmoud Sayed <tarekms@microsoft.com>
Co-authored-by: Tarek Mahmoud Sayed <10833894+tarekgh@users.noreply.github.com>",1,0,1,removing deprecated helix queue (issue_ref)
dotnet/runtime,72a243b43fae9b11933113a454533e68678e5bad,"JIT: fix loop cloning when loop's last block is within a hander (#111432)

In some unusual cases the last block of a loop might be in the middle of a
handler region (say the loop backedge is in a catch, and the catch has
alternate flow that exits the loop).

Make sure that we properly place the slow loop preheader into the same EH regions
as the fast loop preheader.

Fixes #111344",2025-01-15 21:30:47+00:00,Andy Ayers,1,c75166b10cd3337376fd65190a554e3969a7b130,"JIT: enable cloning of loops with EH in release (#111726)

My earlier changes left this enabled only in debug and checked builds.

Fixes #111351.",1,21,12,"jit: fix loop cloning when loop's last block is within a hander (issue_ref)in some unusual cases the last block of a loop might be in the middle of ahandler region (say the loop backedge is in a catch, and the catch hasalternate flow that exits the loop).make sure that we properly place the slow loop preheader into the same eh regionsas the fast loop preheader.fixes issue_ref"
dotnet/runtime,4c7991c9e4548ce9e7b9cd3c0dec47d8e9b46f2b,"Workaround error G6E97C40B (#111459)

* Workaround error G6E97C40B

* Update zlib-ng-version.txt",2025-01-15 22:29:30+00:00,Dmitry Kurtaev,1,7e41ae6eaf5376ea4a292936e1d1eddcf1671c6a,"Update zlib-ng to 2.2.4 (#116044)

* Update zlib-ng to 2.2.4

* Fix MSVC build of zlib-ng",2,2,1,workaround error g6e97c40b (issue_ref)* workaround error g6e97c40b* update zlib-ng-version.txt
dotnet/runtime,8dcee504cb91ebd8890097ca8ca421ea547a29e2,"Set TypeLoadException.TypeName to the fully qualified name of the type that caused the exception (#111374)

* Set TypeLoadException.TypeName to the fully qualified name of the type that caused the exception

This is regression introduce by rewrite of type name parser in managed code.

Fixes #111059

* Workaround for Mono",2025-01-15 22:51:43+00:00,Jan Kotas,1,493650aabd61481ed2c5e06dad148bfefea91360,fix: correct ArgumentException formatting in NativeAOT #113016 (#113163),12,79,57,set typeloadexception.typename to the fully qualified name of the type that caused the exception (issue_ref)* set typeloadexception.typename to the fully qualified name of the type that caused the exceptionthis is regression introduce by rewrite of type name parser in managed code.fixes issue_ref* workaround for mono
dotnet/runtime,e7788c155ae5e2c95a69946697a6179e565d2759,fixed last stack errors (#111390),2025-01-15 22:56:20+00:00,Michael Sharp,1,3688b59a4c8efebf6d13307d555be0f3ef063b40,"Use IRootFunctions in Tensor.StdDev (#110641)

* Use IRootFunctions in Tensor.StdDev

* Try fix api compat issue

* Replace Pow+Sum with SumOfSquares

* Drop IPowerFunctions constraint

* Try fix compatability supression

* Fix StdDev stride issue

* Add regression test

* fix test

* Use FlattenedLength in StdDev

* Try add byref to api compat supressions

* Try fix type constraint

---------

Co-authored-by: Tanner Gooding <tagoo@outlook.com>",2,23,2,fixed last stack errors (issue_ref)
dotnet/runtime,2da9a85776113f3f7b202a1e298a22d7e88496d2,Remove some unused configuration knobs for PAL object types (#111466),2025-01-15 23:47:26+00:00,Jeremy Koritzinsky,0,,,9,1,146,remove some unused configuration knobs for pal object types (issue_ref)
dotnet/runtime,6e1486e7bf62d4268c198833fa3590b8f79cd99d,"Allow nested types inside of the <Module> type (#111435)

* Allow nested types inside of the <Module> type
- This isn't disallowed by spec, although ilasm and ildasm cannot handle these cases
- Simply skip adding the type to the available class hash.

* Fix issue where TokenFromRid parameters are out of order in a number of places in the runtime

Fix #111164",2025-01-16 00:39:22+00:00,David Wrighton,1,bd24074af017236c97d8c15b3f77a16e84fff937,"[main] Fix LoaderAllocator computation for a generic type instance (#111706)

* Take defining type loader allocator into account when computing loader allocator of a generic type instance

(cherry picked from commit b3a73f3b66589df3cd8d00c7333ad28e84d669d2)

* Added a test that validates ALC unload when it participates in a static field of a generic class

* Addressed codereview comment

* Updated https://github.com/mono/mono/issues/15142 to https://github.com/dotnet/runtime/issues/34072",6,11,5,"allow nested types inside of the <module> type (issue_ref)* allow nested types inside of the <module> type- this isn't disallowed by spec, although ilasm and ildasm cannot handle these cases- simply skip adding the type to the available class hash.* fix issue where tokenfromrid parameters are out of order in a number of places in the runtimefix issue_ref"
dotnet/runtime,982d57f49e99d19be469d82091a9c1686abda8c1,Use li instead of ori for load immediate (#111453),2025-01-16 05:51:17+00:00,Tomasz Sowiński,0,,,2,6,6,use li instead of ori for load immediate (issue_ref)
dotnet/runtime,e71d737628c7b807aa12755dabe4eca40c40da7e,"Out of range exception on system without a WINS configuration (#110165)

* ut of range exception on system without a WINS configuration

* add third part notice

---------

Co-authored-by: Marie Píchová <11718369+ManickaP@users.noreply.github.com>",2025-01-16 09:50:47+00:00,Badre BSAILA,0,,,5,575,6,out of range exception on system without a wins configuration (issue_ref)* ut of range exception on system without a wins configuration* add third part notice---------
dotnet/runtime,dde00d376e4b40674488c5c688899d7a343f4eca,Optimize redundant sign extensions in assertprop (#111305),2025-01-16 12:36:23+00:00,Egor Bogatov,0,,,1,13,0,optimize redundant sign extensions in assertprop (issue_ref)
dotnet/runtime,b03f83de362f7168c94daa2f4b192959abefe366,"[RISC-V] Enable JitDisasmWithCodeBytes (#111450)

* Remove unused IsMovInstruction",2025-01-16 12:52:00+00:00,Tomasz Sowiński,1,42a58a2595e0772c06b7e0ebe96b9a4f70b21f32,"Fix riscv register mapping with llvm-libunwind (#111735)

* Fix riscv register mapping with llvm-libunwind

* Use tail and cleanup custom regs

* Delete emulated TLS from riscv and loongarch

* Fix UniversalTransition

* Fix emitOutputCall and use ret

Co-authored-by: Filip Navara <filip.navara@gmail.com>

* Use traditional TLS dialect for the time being

---------

Co-authored-by: Filip Navara <filip.navara@gmail.com>",2,7,57,[risc-v] enable jitdisasmwithcodebytes (issue_ref)* remove unused ismovinstruction
dotnet/runtime,777bbaf22e9ec00ce58daeb0e8c0864e54acbeca,"Clean up in LowerFusedMultiplyAdd (#110113)

Co-authored-by: Tanner Gooding <tagoo@outlook.com>",2025-01-16 14:16:35+00:00,Egor Bogatov,0,,,1,14,34,clean up in lowerfusedmultiplyadd (issue_ref)
dotnet/runtime,73a93307f5ad0c3eeb26b23748f8856d89f1741c,"JIT: Use `bbPostorderNum` to track ordinals in 3-opt layout (#111464)

Follow-up to #111365. Instead of allocating a separate ordinal array, track each block's ordinal by overwriting its bbPostorderNum. We can check if a given block is in the candidate set of blocks being reordered if its ordinal is less than the number of hot blocks, and if the block at the given ordinal in blockOrder matches the block in question (i.e. the same implementation as FlowGraphDfsTree::Contains).",2025-01-16 14:37:54+00:00,Aman Khalid,1,55a4602b91f0c987975c644c43920bc73fc41165,"JIT: Don't let 4-opt layout modify other EH regions (#111637)

When trying to create fallthrough for a jump that begins after an EH region, and ends before the EH region, don't consider a split point within the EH region; otherwise, the swap will break the invariant that EH entries are not moved relative to other blocks in the region. Fixes #111347.",2,16,31,"jit: use to track ordinals in 3-opt layout (issue_ref)follow-up to issue_ref. instead of allocating a separate ordinal array, track each block's ordinal by overwriting its bbpostordernum. we can check if a given block is in the candidate set of blocks being reordered if its ordinal is less than the number of hot blocks, and if the block at the given ordinal in blockorder matches the block in question (i.e. the same implementation as flowgraphdfstree::contains)."
dotnet/runtime,50486562f3ee86078eb8d6622fb656dde1822142,JIT: unroll more memset patterns (#110893),2025-01-16 16:00:34+00:00,Egor Bogatov,1,7d758783e7ec32cb0b42c76c26f18deb927e4ab8,"JIT: Extend escape analysis to account for arrays with non-gcref elements (#104906)

Support stack allocation of small fixed-length arrays of non-GC types.
* Size limit is currently 528 bytes (allows for a 512 byte array on 64 bit) per array.
* No per-method limit (yet) on total amount of allocation
* Bounds check elimination and such works normally
* Codegen is similar to that for heap arrays
* Limited ability to treat stack allocated array storage more aggressively than heap arrays

Co-authored-by: Jakob Botsch Nielsen <jakob.botsch.nielsen@gmail.com>
Co-authored-by: Andy Ayers <andya@microsoft.com>",3,123,5,jit: unroll more memset patterns (issue_ref)
dotnet/runtime,1af7c2370bce80cba73d442d69f4a2f1b02dcbef,"Add a number of additional APIs to the various SIMD accelerated vector types (#111179)

* Add a number of additional APIs to the various SIMD accelerated vector types

* Add tests for the new vector APIs

* Fix the boolean logic for the vectorized IsEvenInteger

* Try to fix the Mono build

* Fixing some RyuJIT handling

* Add some additional Mono handling and document what's hindering other support

* Update src/libraries/System.Private.CoreLib/src/System/Half.cs

* Fix mono interp

* Ensure the handling of the Vector2/3 All/Any/None and Count/IndexOf/LastIndexOf methods is correct

* Try and fix the mono build

* Don't accelerate the new methods for Vector2/3 on Mono

* Fix mono build warning

* Ensure the right class name is resolved for Vector4",2025-01-16 16:30:16+00:00,Tanner Gooding,1,c0ca2c220c8b931ee017278fdf022bb22f202f1f,"Includes type forwarding for System.Text.Unicode.Utf8 to the Microsoft.Bcl.Memory library (#111292)

* Add support for System.Text.Unicode.Utf8

This commit introduces the `System.Text.Unicode.Utf8` type to the `Microsoft.Bcl.Memory` library.

It includes type forwarding for `Utf8` in `Microsoft.Bcl.Memory.Forwards.cs`, updates the documentation in `PACKAGE.md` to include `Utf8` functionality, and adds corresponding test cases in `Microsoft.Bcl.Memory.Tests.csproj`.

 The documentation now emphasizes `Utf8` alongside `Index`, `Range`, and `Base64Url`, highlighting its role in converting data between UTF-8 and UTF-16 encodings.

* Enhance UTF-8 and Unicode support in BCL Memory

Updated `PackageDescription` to include ""Utf8"" support.

Added new `ItemGroup` for conditional compilation of UTF-8
and Unicode handling files for non-net8.0 frameworks.

Modified visibility and implementations in `Ascii.Utility.Helpers.cs`,
`Utf8.cs`, and `Utf8Utility` based on `MICROSOFT_BCL_MEMORY` define.

* Enhance Unicode handling in tests and project structure

Updated `Microsoft.Bcl.Memory.Tests.csproj` to include `UnicodeUtility.cs` and removed .NET 8.0 targeting condition.

Modified `Utf8Tests.cs` by adjusting using directives and enhancing the `DecodeHex` method with conditional compilation for .NET 5.0+.

* Add compilation constant for Microsoft BCL Memory

Added a new property `<DefineConstants>$(DefineConstants);MICROSOFT_BCL_MEMORY</DefineConstants>` to the project file to define a new compilation constant for the project.

* Apply suggestions from code review

Co-authored-by: Theodore Tsirpanis <teo@tsirpanis.gr>

* Update Microsoft.Bcl.Memory for framework compatibility

- Added polyfill for System.Numerics.BitOperations for .NET Standard 2.0.

* Space

* Remove MICROSOFT_BCL_MEMORY from project constants

Removed the `DefineConstants` property from the project file, which included the constant `MICROSOFT_BCL_MEMORY`. This change may impact conditional compilation within the project.

* Refactor Utf8Tests for .NET compatibility improvements

* Use `Rune.DecodeFromUtf8` on all frameworks.

For downlevel frameworks we add `Rune.cs` to `Microsoft.Bcl.Memory`.

(cherry picked from commit 79ee05d67f31c0dd7b218c2cf6b2c864b96ce8db)

* Fix compile errors.

(cherry picked from commit bf6f989f91e88ea75a07e4870faf98a8fb711b88)

* Address PR feedback.

(cherry picked from commit 445a2325c937eea57f4acea30ed63fae5a2dce13)

---------

Co-authored-by: Theodore Tsirpanis <teo@tsirpanis.gr>
Co-authored-by: Stephen Toub <stoub@microsoft.com>",50,11124,975,add a number of additional apis to the various simd accelerated vector types (issue_ref)* add a number of additional apis to the various simd accelerated vector types* add tests for the new vector apis* fix the boolean logic for the vectorized iseveninteger* try to fix the mono build* fixing some ryujit handling* add some additional mono handling and document what's hindering other support* update src/libraries/system.private.corelib/src/system/half.cs* fix mono interp* ensure the handling of the vector2/3 all/any/none and count/indexof/lastindexof methods is correct* try and fix the mono build* don't accelerate the new methods for vector2/3 on mono* fix mono build warning* ensure the right class name is resolved for vector4
dotnet/runtime,be318b1539bd39da280157a742697816d7ff28d1,"Gc enter/leave/poll without HELPER_METHOD_FRAME (#109378)

Rewrite gc polling logic as a managed helper and remove the stress helper. Also move the pinvoke suspension and rare disable paths to take advantage of the QCall infrastructure.",2025-01-16 17:55:03+00:00,David Wrighton,0,,,20,210,85,gc enter/leave/poll without helper_method_frame (issue_ref)rewrite gc polling logic as a managed helper and remove the stress helper. also move the pinvoke suspension and rare disable paths to take advantage of the qcall infrastructure.
dotnet/runtime,7790117932dc14aaeb2fc82aff6c0dc6c74ce434,"Safer stackallocs (#110864)


Co-authored-by: Miha Zupan <mihazupan.zupan1@gmail.com>",2025-01-16 18:34:00+00:00,Egor Bogatov,1,2f1efc24095a454a44c836fd7696731dc2917a5d,"Improve consistency of StreamReader and StreamWriter (#118958)

* Enhance consistency of StreamReader and StreamWriter

* Fix path missing error in StringCtorTests of StreamReader and StreamWriter

* Fix a param error in StreamWriter.StringCtorTests.cs

* PR change suggestions

* Revert change for constructors

* Fix whitespace

* Add buffer size test in stream ctor tests

---------

Co-authored-by: Viviana Dueñas <50237907+ViveliDuCh@users.noreply.github.com>",42,190,197,safer stackallocs (issue_ref)
dotnet/runtime,0910e46e2f741d55cec8623b66faf6c8ac0389ee,Update comment in Attribute.cs (#111225),2025-01-16 19:30:57+00:00,Leonid Tsarev,0,,,1,3,4,update comment in attribute.cs (issue_ref)
dotnet/runtime,8a8871df5bff8b143338713f7ea350e51a6b4fc8,[SRM] Remove `ReadOnlyUnmanagedMemoryStream`. (#111321),2025-01-16 19:31:39+00:00,Theodore Tsirpanis,0,,,6,4,115,[srm] remove . (issue_ref)
dotnet/runtime,5667c2887f607939e5ce054137481f877530a279,[browser] Remove dotnet-experimental feed from sources (#111269),2025-01-16 20:01:46+00:00,Marek Fišera,0,,,1,1,2,[browser] remove dotnet-experimental feed from sources (issue_ref)
dotnet/runtime,8258597308d016333494ad58be7273c9d6a85f8e,"Use live apphost when publishing ilc as singlefile (#105004)

Co-authored-by: Jeremy Koritzinsky <jkoritzinsky@gmail.com>",2025-01-16 21:03:38+00:00,Adeel Mujahid,1,db7e9abb70208a67e686fdb6a593618649a2ed7e,Fix source-build condition to ensure we build the Mono Cross AOT compiler correctly (#111509),8,41,24,use live apphost when publishing ilc as singlefile (issue_ref)
dotnet/runtime,9599b26db9245538aceedbdae604b945db647c23,"System.Formats.Cbor.Tests.DataModel: don't sign when DotNetBuildSourceOnly. (#111123)

Co-authored-by: Viktor Hofer <viktor.hofer@microsoft.com>",2025-01-16 21:37:23+00:00,Tom Deseyn,0,,,1,2,0,system.formats.cbor.tests.datamodel: don't sign when dotnetbuildsourceonly. (issue_ref)
dotnet/runtime,01b1b8f532ed5b377e13a3c5112048061d33e70c,"DnsAddresses throw PlatformNotSupportedException if /etc/resolv.conf is missing (#111471)

* DnsAddresses throw PlatformNotSupportedException if /etc/resolv.conf is missing

* missing files",2025-01-16 22:04:38+00:00,Badre BSAILA,0,,,3,17,33,dnsaddresses throw platformnotsupportedexception if /etc/resolv.conf is missing (issue_ref)* dnsaddresses throw platformnotsupportedexception if /etc/resolv.conf is missing* missing files
dotnet/runtime,16b17d80869594e31398d5f01ecd320f263187a6,"Delete dead code in ilasm PE writer (#111218)

* Delete dead code in ilasm PE writer

* Delete magic enum values",2025-01-17 00:11:22+00:00,Jan Kotas,0,,,7,34,256,delete dead code in ilasm pe writer (issue_ref)* delete dead code in ilasm pe writer* delete magic enum values
dotnet/runtime,6afd223111ab297863728a67a4bc9daa1828de3c,Produce a package with the host-running ILC for repos in the VMR (#111443),2025-01-17 00:26:28+00:00,Jeremy Koritzinsky,1,6c58f7992cfd628a53d9b90f258ac123cb803644,Fix building the host-targeting components and packing ILC (#111552),10,77,23,produce a package with the host-running ilc for repos in the vmr (issue_ref)
dotnet/runtime,42fe08e9270201a6873ad49ae266e122d1e47401,add rcl/rcr tp and latency info (#111442),2025-01-17 01:12:20+00:00,Ruihan-Yin,0,,,3,6,5,add rcl/rcr tp and latency info (issue_ref)
dotnet/runtime,a2ef22e1ec55c833b509c0384872f10926ead099,Added JITDUMP_USE_ARCH_TIMESTAMP support. (#111359),2025-01-17 05:24:25+00:00,Kuinox,0,,,1,29,1,added jitdump_use_arch_timestamp support. (issue_ref)
dotnet/runtime,0d1897891afe4a2e011c0f0aa3fb78faae0d2840,"Fix relocs errors on riscv64 (#111317)

* Fix relocs errors on riscv64

* Fix RELPTR32 and feedback

* Align with PutLoongArch64JIR

* Consolidate relocs

Co-authored-by: Tomek Sowiński <tomeksowi@gmail.com>

* Use reloc-57

Co-authored-by: Filip Navara <filip.navara@gmail.com>

* Combine PC & JALR to correct reloc

* Fix var macros

* Update emitriscv64.h

* Remove JALR

* Combine TODO comments related to CAS-128

---------

Co-authored-by: Tomasz Sowiński <tomeksowi@gmail.com>
Co-authored-by: Filip Navara <filip.navara@gmail.com>",2025-01-17 06:44:30+00:00,Adeel Mujahid,1,224017576edf9402901da00b0323fb79b854bc7b,"Fix relocs for linux-riscv64 AOT (#112331)

Co-authored-by: Filip Navara <filip.navara@gmail.com>",17,34,51,fix relocs errors on riscv64 (issue_ref)* fix relocs errors on riscv64* fix relptr32 and feedback* align with putloongarch64jir* consolidate relocs
dotnet/runtime,f2363c7886a8cb221ff4b43350e31be239845ac6,Forward DefaultArtifactVisibility down from the VMR orchestrator (#111513),2025-01-17 07:18:45+00:00,Jeremy Koritzinsky,1,ba72b9787d6c591557b4fc60d3e2a602f2b18dd3,"Fix MonoEnableLLVM* properties (#111746)

Counter-part change in https://github.com/dotnet/sdk/pull/46239",1,1,0,forward defaultartifactvisibility down from the vmr orchestrator (issue_ref)
dotnet/runtime,9aa8cbf2d27fae34c0eb46f6049d2f244998e841,Avoid capturing the ExecutionContext for the whole HTTP connection lifetime (#111475),2025-01-17 10:50:11+00:00,Miha Zupan,1,d291f3a6477a14749dde9b1ed883285a69d13fef,"Ignore DefaultCredentials when doing Basic & Digest auth in SocketsHttpHandler (#113728)

* Ignore DefaultCredentials in Basic Auth

* Fix formatting in AuthenticationHelper for Basic Auth credential check

* Remove unnecessary blank line in AuthenticationHelper

* Add SocketsHttpHandler_UseDefaultCredentials_OneRequestOnlyWhen401 test

* update

* update

* update

* update

* Ignore DefaultCredentials in Digest auth

* Update UT

* Rename test method for clarity on Basic Authentication behavior

* update

* update

* Refactor SocketsHttpHandler test to use Theory for authentication types

Updated the SocketsHttpHandler_UseDefaultCredentials test to utilize [Theory] and [InlineData] attributes, allowing for testing with both Basic and Digest authentication types.",4,50,12,avoid capturing the executioncontext for the whole http connection lifetime (issue_ref)
dotnet/runtime,b790824ceb1fca4b3e8a19f484767e746f2ea023,Add MemoryExtensions overloads with comparer (#110197),2025-01-17 13:52:13+00:00,Stephen Toub,0,,,17,2658,867,add memoryextensions overloads with comparer (issue_ref)
dotnet/runtime,bb350689352c290c605379da967e20d9eaf25c89,Remove explicit __compact_unwind entries from x64 assembler (#111530),2025-01-17 14:36:49+00:00,Filip Navara,0,,,2,0,18,remove explicit __compact_unwind entries from x64 assembler (issue_ref)
dotnet/runtime,4de59c4db6a2357532865d1805ee8b517ca4ab60,Include GPL-3 licence text in the notice (#111528),2025-01-17 14:51:27+00:00,Marie Píchová,0,,,1,680,2,include gpl-3 licence text in the notice (issue_ref)
dotnet/runtime,3e899bcaeecc9db7e204700cc1dd5fc4d78f368b,Update github-merge-flow.jsonc to autoflow 9.0 to 9.0-staging (#111549),2025-01-17 19:29:19+00:00,Carlos Sánchez López,0,,,1,3,13,update github-merge-flow.jsonc to autoflow 9.0 to 9.0-staging (issue_ref)
dotnet/runtime,a73f1637cbd74e3048bd420e876113f94f650996,Improve JSON validation perf (#111332),2025-01-17 21:24:15+00:00,Pranav Senthilnathan,0,,,8,378,188,improve json validation perf (issue_ref)
dotnet/runtime,dd76387ea74ad72e938d00bc881cf1d2c578081a,"Improve performance of interface method resolution in ILC (#103066)

* Reverse order of loop in MightHaveInterfaceDispatchMap

Presumably the last interfaces on the list are more likely to be coming
from the less nested classes and allow short circuiting the loop earlier.

* Short-circuit recursive ResolveInterfaceMethodToVirtualMethodOnType

When ResolveInterfaceMethodToVirtualMethodOnType is recursively calling
itself, use the result instead of returning `null` and then continuing
the outer loop that is effectively doing the same recursion on base
types.

* Add comment

---------

Co-authored-by: Andy Gocke <angocke@microsoft.com>",2025-01-18 00:19:33+00:00,Filip Navara,1,adb2af26bb6bb19312c38cacda2694b981b56c6d,"Consider type declaration order in MethodImpls (#111998)

This fixes the Loader\classloader\InterfaceFolding\Ambiguous test.

For the following program in pseudo-C# (test is in IL since this is not valid C#):

```csharp
B<int, int> b = new B<int, int>();
if (!(((I<int>)b).Foo() != ""B::Foo2""))
{
    B<string, string> b2 = new B<string, string>();
    if (!(((I<string>)b2).Foo() != ""B::Foo2""))
    {
        Console.WriteLine(""Pass"");
        return 100;
    }
}

Console.WriteLine(""Failed!"");
return -1;

interface I<T>
{
    string Foo();
}

class A<U> : I<U>
{
    string I<U>.Foo() => ""A::Foo"";
}

internal class B<V, W> : A<V>, I<W>
{
    string I<W>.Foo() => ""B::Foo1"";
    string I<V>.Foo() => ""B::Foo2"";
}

```

We incorrectly resolve the interface call into `B::Foo1` because `I<int>.Foo` could be implemented by both `Foo1` and `Foo2` methods and we just pick whatever we see first. Per ECMA-335: ""If there are multiple methods for the same interface method (i.e. with different generic type parameters), place them in the list in type declaration order of the associated interfaces.""

This implements the tie break.",2,15,4,"improve performance of interface method resolution in ilc (issue_ref)* reverse order of loop in mighthaveinterfacedispatchmappresumably the last interfaces on the list are more likely to be comingfrom the less nested classes and allow short circuiting the loop earlier.* short-circuit recursive resolveinterfacemethodtovirtualmethodontypewhen resolveinterfacemethodtovirtualmethodontype is recursively callingitself, use the result instead of returning and then continuingthe outer loop that is effectively doing the same recursion on basetypes.* add comment---------"
dotnet/runtime,3998f4aaa3623d2b6e4d74e71842f7dfb7a19445,Build ilasm/ildasm packages for the host machine (#111512),2025-01-18 01:13:20+00:00,Jeremy Koritzinsky,1,1f93ea7763a6391a9063c5e35843253f3d666893,"Fix build with FEATURE_STANDALONE_GC disabled (#111682)

* Fix build with FEATURE_STANDALONE_GC disabled

Currently, the build fails, because the gc_pal is built only when
standalone GC is enabled, but it is used for the built-in GC as
well.

This change fixes it.

* PR feedback",9,40,8,build ilasm/ildasm packages for the host machine (issue_ref)
dotnet/runtime,8a2e93486920436613fb4d3bce30f135933d91c6,"JIT: tolerate missing InitClass map in SPMI (#111555)

For some reason this map is missing in some recent OSX arm64 crossgen2
collections. SPMI shouldn't AV when this happens.",2025-01-18 02:28:01+00:00,Andy Ayers,0,,,1,4,1,jit: tolerate missing initclass map in spmi (issue_ref)for some reason this map is missing in some recent osx arm64 crossgen2collections. spmi shouldn't av when this happens.
dotnet/runtime,ffc68b87b42f29886fbc8642b25af79b8b6d4a19,[iOS] Retrieve device locale in full (specific) format from ObjectiveC APIs (#111032),2025-01-20 09:38:03+00:00,Matous Kozak,0,,,2,11,9,[ios] retrieve device locale in full (specific) format from objectivec apis (issue_ref)
dotnet/runtime,b61c8fc7f63145ded1f522b21344241679345f81,"[iOS][globalization] Revert of #107390 to allow the use of String.Replace (#111534)

Reverting #107390 to unblock MAUI upgrade to .NET 10 #111506.

Note that this will cause IndexOf, in some cases, to return incorrect matchLength due to normalization we use before calling Objective-C rangeOfString API.",2025-01-20 09:41:00+00:00,Matous Kozak,1,4e01649f4a39bc2d9ee0e758736a7d90954fed14,[iOS][globalization] Fix IndexOf on empty strings on iOS to return -1 (#111898),5,72,116,"[ios][globalization] revert of issue_ref to allow the use of string.replace (issue_ref)reverting issue_ref to unblock maui upgrade to .net 10 issue_ref.note that this will cause indexof, in some cases, to return incorrect matchlength due to normalization we use before calling objective-c rangeofstring api."
dotnet/runtime,8c4c381dad9b0338675298391c4a69e6b548f7e6,"Use Queue instead of ConcurrentQueue in single-threaded thread pool, non-generic ThreadPoolTypedWorkItemQueue (#111245)",2025-01-20 10:45:18+00:00,Pavel Savara,1,bb19ea4b7e701fef916df09253c916b93f54d1c7,"Make counting of IO completion work items more precise on Windows (#112793)

* Make counting of IO completion work items more precise on Windows

- Follow-up to https://github.com/dotnet/runtime/pull/106854. Issue: https://github.com/dotnet/runtime/issues/104284.
- Before the change, the modified test case often yields 5 or 6 completed work items, due to queue-processing work items that happen to not process any user work items. After the change, it always yields 4.
- Looks like it doesn't hurt to have more-precise counting, and there was a request to backport a fix to .NET 8, where it's more necessary to fix the issue",6,50,39,"use queue instead of concurrentqueue in single-threaded thread pool, non-generic threadpooltypedworkitemqueue (issue_ref)"
dotnet/runtime,32b4ba3df72fa61fb7455f935dee92a2cce2ad0d,[Mono] trim hot reload (#111247),2025-01-20 11:26:19+00:00,Pavel Savara,1,505e3171007810999a7f56672b9f70332609273f,"Ensure Loader tests create deps file (#112500)

Fixes #112471",4,17,13,[mono] trim hot reload (issue_ref)
dotnet/runtime,e93f360d6b76482e660e641949ec57e308767a19,"NativeAOT: Skip TypeSpec for well-known custom attributes lookup (#111585)

Skip checking TypeSpec for well-known custom attributes.",2025-01-20 13:08:38+00:00,Steve,0,,,2,21,0,nativeaot: skip typespec for well-known custom attributes lookup (issue_ref)skip checking typespec for well-known custom attributes.
dotnet/runtime,4c224ab16d287c17dbc54236638db91266071465,"Add deploy pipeline for networking echo test servers. (#111398)

* Set up CI with Start Right

* Update deploy-networking-echo-test-servers.yml for Azure Pipelines

* Update deploy-networking-echo-test-servers.yml for Azure Pipelines

Add build and publish steps (TODO: Authorize)

* Update deploy-networking-echo-test-servers.yml for Azure Pipelines

Add azureSubscription reference

* Update .NET version in pipeline

* allow preview versions of .NET

* fix

* Update deploy-networking-echo-test-servers.yml for Azure Pipelines

* Use multi level lookup

* Manual invocation of dotnet build.

* use .NET 8

* script task instead of powershell

* Specify working directory during build

* remove global.json

* fix

* Add versions reference

* Update to released OpenTelemetry packages

* Turn on GenevaTelemetry in the pipeline build

* Add swagger file

* Move yml file to eng/pipelines/libraries

* Fix pipeline

* Deploy to http2 as well

* Update eng/pipelines/libraries/deploy-networking-echo-test-servers.yml

* Remove duplicate server URL from swagger file

* Update eng/pipelines/libraries/deploy-networking-echo-test-servers.yml

Co-authored-by: Anton Firszov <antonfir@gmail.com>

* Add deploy instructions

* Update eng/pipelines/libraries/deploy-networking-echo-test-servers.yml

Co-authored-by: Marie Píchová <11718369+ManickaP@users.noreply.github.com>

---------

Co-authored-by: Ilya Skuratovsky <ilyas@microsoft.com>
Co-authored-by: Anton Firszov <antonfir@gmail.com>
Co-authored-by: Marie Píchová <11718369+ManickaP@users.noreply.github.com>",2025-01-20 15:34:38+00:00,Radek Zikmund,1,a2bb26d4b72a8fd19c0582040aa9d3efce23de9f,Fix typo in deploy-networking-echo-test-servers.yml after applying suggestions. (#111627),6,416,10,add deploy pipeline for networking echo test servers. (issue_ref)* set up ci with start right* update deploy-networking-echo-test-servers.yml for azure pipelines* update deploy-networking-echo-test-servers.yml for azure pipelinesadd build and publish steps (todo: authorize)* update deploy-networking-echo-test-servers.yml for azure pipelinesadd azuresubscription reference* update .net version in pipeline* allow preview versions of .net* fix* update deploy-networking-echo-test-servers.yml for azure pipelines* use multi level lookup* manual invocation of dotnet build.* use .net 8* script task instead of powershell* specify working directory during build* remove global.json* fix* add versions reference* update to released opentelemetry packages* turn on genevatelemetry in the pipeline build* add swagger file* move yml file to eng/pipelines/libraries* fix pipeline* deploy to http2 as well* update eng/pipelines/libraries/deploy-networking-echo-test-servers.yml* remove duplicate server url from swagger file* update eng/pipelines/libraries/deploy-networking-echo-test-servers.yml
dotnet/runtime,ab75795cf38f7c0f33ada0f505133f510828da8e,"Limit OpenSSL TLS Session cache for client SSL_CTX instances (#110154)

* Limit OpenSSL TLS Session cache for client SSL_CTX instances.

* Don't enable TLS cache callbacks when using IP address as target host.",2025-01-21 07:53:50+00:00,Radek Zikmund,0,,,1,14,5,limit openssl tls session cache for client ssl_ctx instances (issue_ref)* limit openssl tls session cache for client ssl_ctx instances.* don't enable tls cache callbacks when using ip address as target host.
dotnet/runtime,7007b3a4f01fa9a45dd78a89a8044dda6fe65dd5,"Treat files in ""build"" directories as not generated (#111363)",2025-01-21 11:22:57+00:00,Marek Fišera,1,aa500a46758c21af99cb8970bf16a5e34b7fb9d2,[browser][coreCLR] fix git attributes for dotnet.d.ts (#122105),1,3,0,"treat files in ""build"" directories as not generated (issue_ref)"
dotnet/runtime,22c04fcf3de4c4d5237c0f604f6318c5a43fcc23,Do not close the connection before we set _firstRejectedStreamId (#111623),2025-01-21 15:48:04+00:00,Marie Píchová,0,,,2,8,4,do not close the connection before we set _firstrejectedstreamid (issue_ref)
dotnet/runtime,8f284ee62dc8778158facff250257c048adac2f6,"Wrap temporary event handle in using statement (#111657)

* Wrap event handle in using statement

* Update src/libraries/System.Diagnostics.EventLog/src/System/Diagnostics/Reader/EventLogRecord.cs

Co-authored-by: Stephen Toub <stoub@microsoft.com>

---------

Co-authored-by: Stephen Toub <stoub@microsoft.com>",2025-01-21 16:16:47+00:00,Jens Andersson,0,,,1,6,4,wrap temporary event handle in using statement (issue_ref)* wrap event handle in using statement* update src/libraries/system.diagnostics.eventlog/src/system/diagnostics/reader/eventlogrecord.cs
dotnet/runtime,21e92cba6b290c616664902a255e3d00d8ff8667,"GC-report all associated LoaderAllocators (#110856)

* Report all LoaderAllocators associated with an interior pointer

* Remove IsInRange's unused out parameter

* Remove assertion for at least one valid LoaderAllocator object ref

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-01-21 17:24:32+00:00,Tomasz Sowiński,1,242af171c01b473e8c3f67693053c6a0ee459004,"Fix `UnsafeAccessor` scenario for modopts/modreqs when comparing field sigs. (#111648)

* Consume custom modifiers and ByRef in RetType signature
prior to comparing field signature.",8,65,68,gc-report all associated loaderallocators (issue_ref)* report all loaderallocators associated with an interior pointer* remove isinrange's unused out parameter* remove assertion for at least one valid loaderallocator object ref---------
dotnet/runtime,55a4602b91f0c987975c644c43920bc73fc41165,"JIT: Don't let 4-opt layout modify other EH regions (#111637)

When trying to create fallthrough for a jump that begins after an EH region, and ends before the EH region, don't consider a split point within the EH region; otherwise, the swap will break the invariant that EH entries are not moved relative to other blocks in the region. Fixes #111347.",2025-01-21 18:10:43+00:00,Aman Khalid,1,c5bb5057dddf4b5834626e90e63bfd50f0cda3ff,"JIT: Add bounds check for ordinals in `ThreeOptLayout::ConsiderEdge` (#111719)

When setting up the data structures needed for 3-opt layout, we allocate an array of basic blocks that is large enough to fit everything reachable via a RPO traversal. However, we only initialize as much of the array as needed to fit the blocks hot enough to be considered for reordering, so we frequently have uninitialized space at the end of the array. Thus, our current strategy to check if a block is in the set of candidates takes two steps:

Check if the block's ordinal is less than the number of hot blocks. If it isn't, then it cannot possibly be in the set.
If the ordinal is valid, check if the block in the array matches the block in question.
We were neglecting to do the first step in ThreeOptLayout::ConsiderEdge, which meant in rare cases, we would compare a block outside the candidate set to some uninitialized part of the array, and the comparison would happen to be equal. Thus, we would later consider creating fallthrough along a flow edge that breaks 3-opt's invariants.

To solve this, we can either add the bounds check mentioned above, or we can default-initialize the entire block array to ensure comparisons outside the candidate set are with nullptr. I've decided to pursue the former.

Fixes #111563.",1,2,2,"jit: don't let 4-opt layout modify other eh regions (issue_ref)when trying to create fallthrough for a jump that begins after an eh region, and ends before the eh region, don't consider a split point within the eh region; otherwise, the swap will break the invariant that eh entries are not moved relative to other blocks in the region. fixes issue_ref."
dotnet/runtime,fc2603ebf12d25340003606a1441ca54b9811550,"JIT: Add 3-opt stress mode (#111640)

If this stress mode is enabled, skip the preliminary reordering passes -- RPO layout and cold code motion -- to create more work for 3-opt, thus exercising new cut points. We could probably do something more aggressive, like reverse the initial layout order (though we'd need to respect EH invariants), but this was enough to help me repro some failures like #111347 locally.",2025-01-21 18:41:22+00:00,Aman Khalid,1,90319408aff4d0709f0d28e915dfc0e15ab94a72,"[NativeAOT/ARM64] Generate frames compatible with Apple compact unwinding (#111451)

* [NativeAOT/ARM64] Generate frames compatible with Apple compact unwinding (#107766)

* JIT/ARM64: Add ability to generate frames compatible with Apple compact
unwinding format.

For NativeAOT/ARM64/Apple API do the following:
- Save callee registers in opposite order and in pairs.
- Prefer saving FP/LR on the top of the frame. Heuristics are used to
  avoid worse code quality outside of prolog/epilog due to addressing
  range limits of the ARM64 instruction set.
- Added optimization to lvaFrameAddress to rewrite FP-x references to
  SP+y when possible. This allows efficient addressing using positive
  indexes when FP points to the top of the frame. It mimics similar
  optimization on ARM32.

* ObjWriter: For Mach-O ARM64 try to convert the DWARF CFI unwinding codes
into compact unwinding code

* Disable lvaFrameAddress FP->SP optimization for OSR methods

* Fix variable offsets used in emitGCvarLiveUpd by suppressing the
FP-n => SP+m (for m = frameSize - n) optimization.

---------

Co-authored-by: Kunal Pathak <Kunal.Pathak@microsoft.com>",2,12,2,"jit: add 3-opt stress mode (issue_ref)if this stress mode is enabled, skip the preliminary reordering passes -- rpo layout and cold code motion -- to create more work for 3-opt, thus exercising new cut points. we could probably do something more aggressive, like reverse the initial layout order (though we'd need to respect eh invariants), but this was enough to help me repro some failures like issue_ref locally."
dotnet/runtime,4365cd2b1d6212d029a21517d19b807a052fca16,Hide reflection additions introduced for Windows Store (#111079),2025-01-21 19:20:21+00:00,Badre BSAILA,1,2a47838c6d353b783ca8466e40d7db756f2d2acf,"Fix dataflow annotations on `TypeExtensions` (#116008)

There was a leftover use of `.All` on some `EditorBrowsable.Never` APIs.",4,146,4,hide reflection additions introduced for windows store (issue_ref)
dotnet/runtime,ba82203abb9b8d2bb5efc2cc329595539a556dd2,Allow building the mono subset on win-arm64 (#111629),2025-01-21 20:02:34+00:00,Jeremy Koritzinsky,1,717d3b1c787a78c37b2ec1f079ad6a6fd9d5eb0b,"Add support for building CoreCLR for MacCatalyst/iOS simulator (#109928)

* Make it possible to compile CoreCLR on iOS-like platforms with './build.sh clr+clr.nativeaotlibs+libs+packs -os [iossimulator/maccatalyst/ios] -arch arm64 -cross'

Build the singlefilehost even if we don't currently use it

Make coreclrhost.h compatible v C(not++)

Fix TargetOS::IsMacOS

WIP: AppleAppBuilder support for CoreCLR

Make the sample app working: dotnet publish src/mono/sample/iOS/Program.csproj -c Release /p:TargetOS=iossimulator /p:TargetArchitecture=arm64 /p:AppleAppBuilderRuntime=CoreCLR /p:DeployAndRun=true /p:UseMonoRuntime=false /p:RunAOTCompilation=false /p:MonoForceInterpreter=false

Cleanup

Update src/tasks/AppleAppBuilder/AppleAppBuilder.csproj

Co-authored-by: Adeel Mujahid <3840695+am11@users.noreply.github.com>

Use sys_icache_invalidate for all iOS-like platforms

Consolidate macOS-only entrypoints in a single #if block

Apply feedback

Fix jitinterface cross-build

Infer AppleAppBuilderRuntime from UseMonoRuntime and UseNativeAOTRuntime

Minor changes to test infrastructure

Add basic documentation

Add nearly complete support for building runtime tests

Fix building seh-unwind with older iOS SDK

Use enum for TargetRuntime in AppleAppBuilder

Fix LibraryBuilder build

Cleanup

Fix after rebase

Revert accidental change

Fix tvOS build

Drop CoreCLR tvOS Simulator support for now

* Fix rpath on MacCatalyst

* Apply suggestions from code review

Co-authored-by: Aaron Robinson <arobins@microsoft.com>

* Use CORECLR_HOSTING_API_LINKAGE for extern 'C'

* Remove extra #include

* Drop ICU linkage (not needed with Hybrid Globalization)

* Move jit_write_protect_np initialization

* Use __APPLE__ in PAL instead of TARGET_APPLE for consistency

* Revert changes to native libs and exclude singlefilehost

* Revert more singlefilehost changes

* Remove excessive -D_XOPEN_SOURCE

* Fix build with FEATURE_PERFTRACING_STANDALONE_PAL (debug libs)

* Build with FEATURE_STANDALONE_GC=0

* Remove extra NativeDependencies property (bad merge)

* Add back the UseNativeAOTRuntime property to unblock CI

---------

Co-authored-by: Aaron Robinson <arobins@microsoft.com>
Co-authored-by: Milos Kotlar <kotlarmilos@gmail.com>",1,6,4,allow building the mono subset on win-arm64 (issue_ref)
dotnet/runtime,ccc9c52e6137464f5b369c5d4f9d17f24287342b,"JIT: Move profile consistency checks to after loop opts (#111285)

Part of #107749.",2025-01-21 20:27:00+00:00,Aman Khalid,1,f552567173b706812d11579f8059a14a748dab81,"JIT: fix try region cloning when try is nested in a handler (#111975)

We were not placing the new EH region in the table properly,
and not correctly updating the handler indexes of cloned blocks.

Add some test cases where we have cloneable loops with EH inside
of finallies.

Fixes some issues that came up testing #111473",6,125,136,jit: move profile consistency checks to after loop opts (issue_ref)part of issue_ref.
dotnet/runtime,397863948b5e0ca98ee849053153078acdf3be86,"[main] Update dependencies from dnceng/internal/dotnet-optimization (#111326)

* Update dependencies from https://dev.azure.com/dnceng/internal/_git/dotnet-optimization build 20250111.2

optimization.linux-arm64.MIBC.Runtime , optimization.linux-x64.MIBC.Runtime , optimization.windows_nt-arm64.MIBC.Runtime , optimization.windows_nt-x64.MIBC.Runtime , optimization.windows_nt-x86.MIBC.Runtime , optimization.PGO.CoreCLR
 From Version 1.0.0-prerelease.25053.1 -> To Version 1.0.0-prerelease.25061.2

* Update dependencies from https://dev.azure.com/dnceng/internal/_git/dotnet-optimization build 20250117.2

optimization.linux-arm64.MIBC.Runtime , optimization.linux-x64.MIBC.Runtime , optimization.windows_nt-arm64.MIBC.Runtime , optimization.windows_nt-x64.MIBC.Runtime , optimization.windows_nt-x86.MIBC.Runtime , optimization.PGO.CoreCLR
 From Version 1.0.0-prerelease.25053.1 -> To Version 1.0.0-prerelease.25067.2

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-01-21 20:43:48+00:00,dotnet-maestro[bot],0,,,2,18,18,"[main] update dependencies from dnceng/internal/dotnet-optimization (issue_ref)* update dependencies from build 20250111.2optimization.linux-arm64.mibc.runtime , optimization.linux-x64.mibc.runtime , optimization.windows_nt-arm64.mibc.runtime , optimization.windows_nt-x64.mibc.runtime , optimization.windows_nt-x86.mibc.runtime , optimization.pgo.coreclr from version 1.0.0-prerelease.25053.1 -> to version 1.0.0-prerelease.25061.2* update dependencies from build 20250117.2optimization.linux-arm64.mibc.runtime , optimization.linux-x64.mibc.runtime , optimization.windows_nt-arm64.mibc.runtime , optimization.windows_nt-x64.mibc.runtime , optimization.windows_nt-x86.mibc.runtime , optimization.pgo.coreclr from version 1.0.0-prerelease.25053.1 -> to version 1.0.0-prerelease.25067.2---------"
dotnet/runtime,41e2b8c403fdf0e4002d3d45057b946bd155e1ca,[mono] Run runtime-llvm and runtime-ioslike on Mono LLVM PRs (#111614),2025-01-22 09:30:35+00:00,Matous Kozak,0,,,2,36,0,[mono] run runtime-llvm and runtime-ioslike on mono llvm prs (issue_ref)
dotnet/runtime,1f93ea7763a6391a9063c5e35843253f3d666893,"Fix build with FEATURE_STANDALONE_GC disabled (#111682)

* Fix build with FEATURE_STANDALONE_GC disabled

Currently, the build fails, because the gc_pal is built only when
standalone GC is enabled, but it is used for the built-in GC as
well.

This change fixes it.

* PR feedback",2025-01-22 09:40:06+00:00,Jan Vorlicek,1,ee46066fef265e69f8e0b4842079afc7d8bfa263,"Add build support for Android+CoreCLR (#110471)

This change adds build support for the arm64 and x64 CoreCLR runtimes for Android. Initial infrastructure to run a simple sample was also added (src/mono/sample/Android) and we plan to do more in a follow up.

The arm32 and x86 builds are blocked by https://github.com/dotnet/runtime/issues/111665 since our min API level target is 21. Both will be fixed at a later time.

Contributes to https://github.com/dotnet/runtime/issues/111491

---------

Co-authored-by: Steve Pfister <stpfiste@microsoft.com>
Co-authored-by: Jan Vorlicek <janvorli@microsoft.com>
Co-authored-by: Ivan Povazan <ivan.povazan@gmail.com>
Co-authored-by: Milos Kotlar <kotlarmilos@gmail.com>",2,42,45,"fix build with feature_standalone_gc disabled (issue_ref)* fix build with feature_standalone_gc disabledcurrently, the build fails, because the gc_pal is built only whenstandalone gc is enabled, but it is used for the built-in gc aswell.this change fixes it.* pr feedback"
dotnet/runtime,a78ec96f3f474615d4c850482134bd291f1b1384,Use hardlinks for mono crossaot files (#111702),2025-01-22 15:06:55+00:00,Viktor Hofer,1,9373c6121274e61425305f6faebacae728515c32,"Fix the issue of Mono.AotCross build errors (#117971)

Check MonoAotTarget before building and prompt

Fixes #117970",1,3,1,use hardlinks for mono crossaot files (issue_ref)
dotnet/runtime,9c0c3fdeddc96a26d2cc2ddacc3f0a58aafad708,"JIT: Enable profile consistency checks throughout JIT frontend (#111498)

Part of #107749.",2025-01-22 16:59:45+00:00,Aman Khalid,1,06c3929c917cbf313fbd4154abfa70631c67dc79,"JIT: enhance RBO inference for similar compares to constants (#111766)

Thanks to #95234, RBO can draw inferences when the same value is compared to
different constants, if the initial comparison dominates and was false. Generalize this
to also handle cases where the initial comparison dominates and is true.

Fixes #111725.",7,114,26,jit: enable profile consistency checks throughout jit frontend (issue_ref)part of issue_ref.
dotnet/runtime,fd652abd8305600a675f4217368b6d80988b5b56,When loading libldap try libldap.so.2 first (#111553),2025-01-22 18:37:20+00:00,Steve Harter,0,,,3,15,3,when loading libldap try libldap.so.2 first (issue_ref)
dotnet/runtime,7d758783e7ec32cb0b42c76c26f18deb927e4ab8,"JIT: Extend escape analysis to account for arrays with non-gcref elements (#104906)

Support stack allocation of small fixed-length arrays of non-GC types.
* Size limit is currently 528 bytes (allows for a 512 byte array on 64 bit) per array.
* No per-method limit (yet) on total amount of allocation
* Bounds check elimination and such works normally
* Codegen is similar to that for heap arrays
* Limited ability to treat stack allocated array storage more aggressively than heap arrays

Co-authored-by: Jakob Botsch Nielsen <jakob.botsch.nielsen@gmail.com>
Co-authored-by: Andy Ayers <andya@microsoft.com>",2025-01-22 19:34:28+00:00,Steve,1,1084c54e1668f199a93d1f4bab5162ee3ea48c8e,"JIT: Fix stack allocated arrays for NativeAOT (#111827)

* Remove redundant check

* Add R2R assertion

* Fix isReadyToRun check

* Oops",17,766,123,jit: extend escape analysis to account for arrays with non-gcref elements (issue_ref)support stack allocation of small fixed-length arrays of non-gc types.* size limit is currently 528 bytes (allows for a 512 byte array on 64 bit) per array.* no per-method limit (yet) on total amount of allocation* bounds check elimination and such works normally* codegen is similar to that for heap arrays* limited ability to treat stack allocated array storage more aggressively than heap arrays
dotnet/runtime,90319408aff4d0709f0d28e915dfc0e15ab94a72,"[NativeAOT/ARM64] Generate frames compatible with Apple compact unwinding (#111451)

* [NativeAOT/ARM64] Generate frames compatible with Apple compact unwinding (#107766)

* JIT/ARM64: Add ability to generate frames compatible with Apple compact
unwinding format.

For NativeAOT/ARM64/Apple API do the following:
- Save callee registers in opposite order and in pairs.
- Prefer saving FP/LR on the top of the frame. Heuristics are used to
  avoid worse code quality outside of prolog/epilog due to addressing
  range limits of the ARM64 instruction set.
- Added optimization to lvaFrameAddress to rewrite FP-x references to
  SP+y when possible. This allows efficient addressing using positive
  indexes when FP points to the top of the frame. It mimics similar
  optimization on ARM32.

* ObjWriter: For Mach-O ARM64 try to convert the DWARF CFI unwinding codes
into compact unwinding code

* Disable lvaFrameAddress FP->SP optimization for OSR methods

* Fix variable offsets used in emitGCvarLiveUpd by suppressing the
FP-n => SP+m (for m = frameSize - n) optimization.

---------

Co-authored-by: Kunal Pathak <Kunal.Pathak@microsoft.com>",2025-01-22 19:51:57+00:00,Filip Navara,1,7693b6d0202281dc38dcfb9562e9064fcd13bc61,"Fix failed assertion 'FPbased == FPbased2' (#111787)

* Move assert to prevent incorrect trigger when lvaFrameAddress optimization merged SP+n and FP-m stores into a single pair-wise store

* Better fix",9,337,93,[nativeaot/arm64] generate frames compatible with apple compact unwinding (issue_ref)* [nativeaot/arm64] generate frames compatible with apple compact unwinding (issue_ref)* jit/arm64: add ability to generate frames compatible with apple compactunwinding format.for nativeaot/arm64/apple api do the following:- save callee registers in opposite order and in pairs.- prefer saving fp/lr on the top of the frame. heuristics are used to avoid worse code quality outside of prolog/epilog due to addressing range limits of the arm64 instruction set.- added optimization to lvaframeaddress to rewrite fp-x references to sp+y when possible. this allows efficient addressing using positive indexes when fp points to the top of the frame. it mimics similar optimization on arm32.* objwriter: for mach-o arm64 try to convert the dwarf cfi unwinding codesinto compact unwinding code* disable lvaframeaddress fp->sp optimization for osr methods* fix variable offsets used in emitgcvarliveupd by suppressing thefp-n => sp+m (for m = framesize - n) optimization.---------
dotnet/runtime,00c8751584d58ffc2b906b3b55f756b9bd28babe,Remove more write-barriers around byreflike structs (#111576),2025-01-22 20:07:07+00:00,Egor Bogatov,1,938f546bf59655f323ebf5517a14584e7215f98a,"[LoongArch64] Fix some assertion failures for Debug ILC building Debug NativeAOT testcases. (#112229)

* Fix the break of backtrace when already establish the frame pointer chain.
* Delete some unused codes.",14,76,27,remove more write-barriers around byreflike structs (issue_ref)
dotnet/runtime,475810301ec20dfb12bbc23d9f573be488dd9129,Use hardlinks when copying LLVM into the tree (#111716),2025-01-22 22:48:49+00:00,Jeremy Koritzinsky,0,,,1,5,1,use hardlinks when copying llvm into the tree (issue_ref)
dotnet/runtime,4dabc7b723888269ec01eaa0f152ede02120475b,"Add readonly Capacity property to PriorityQueue<TElement, TPriority> (#110727)

* Add readonly Capacity property to PriorityQueue<TElement, TPriority>

* Add test for EnsureCapacity and TrimExcess

* remove param

* Update src/libraries/System.Collections/tests/Generic/PriorityQueue/PriorityQueue.Generic.Tests.cs

Co-authored-by: Stephen Toub <stoub@microsoft.com>

* Update src/libraries/System.Collections/tests/Generic/PriorityQueue/PriorityQueue.Generic.Tests.cs

Co-authored-by: Stephen Toub <stoub@microsoft.com>

* Update src/libraries/System.Collections/src/System/Collections/Generic/PriorityQueue.cs

Co-authored-by: Stephen Toub <stoub@microsoft.com>

---------

Co-authored-by: Stephen Toub <stoub@microsoft.com>",2025-01-22 23:09:21+00:00,Pavel Djundik,0,,,3,28,0,"add readonly capacity property to priorityqueue<telement, tpriority> (issue_ref)* add readonly capacity property to priorityqueue<telement, tpriority>* add test for ensurecapacity and trimexcess* remove param* update src/libraries/system.collections/tests/generic/priorityqueue/priorityqueue.generic.tests.cs"
dotnet/runtime,77fc88ad405b4d7db3d0c4cdcf6694678c9883c1,"Remove BinaryReader and BinaryWriter references from ZipArchive (#103153)

* Removed BinaryReader, BinaryWriter from ZipArchive and ZipBlocks
We now read the data into a (sometimes stack-allocated) byte array and slice it up with BinaryPrimitives.
This reduces the number of reads and writes required to read and write a ZipArchive. It also makes future work to enable async APIs easier, since BinaryReader and BinaryWriter lack this support.
Also changed approach to reading central file directory headers. Rather than performing X reads per header, we read 4KB of data at a time and look for all applicable headers in that data. This should improve performance when dealing with many small files.
* Removed BinaryReader from ZipArchiveEntry
This allowed the removal of the ArchiveReader property from ZipArchive.
* Removed BinaryWriter from ZipArchiveEntry
* Re-adding missing assertion
* Reduced memory usage with array pooling
Now pooling the file IO buffers and the temporary buffers for extra fields of the CD file header (which would otherwise be allocated and deallocated in a loop.)
* Corrected duplicate comment
* Added test for changed central directory read method
This handles 64x entries with 19-character filenames (and thus, 65-byte file headers.) As a result, it straddles two 4KB read buffers.
Also corrected the seek logic while reading the central directory header
* Test changes: formatting, converted Theory to Fact
* Resolving test failures
The buffer returned from the ArrayPool contained older data (including a ZIP header.) When reading the last chunk of the file (i.e a chunk which was less than BackwardsSeekingBufferSize) the buffer's Span wasn't resized to account for this.
SeekBackwardsToSignature would thus find the older data, try to seek beyond the end of the stream and fail to read the file.
* Responded to code review
Reads and writes are now performed using a new set of field lengths and locations.
* Code review response
Formatting change; added one comment to Zip64EndOfCentralDirectoryLocator.SignatureConstantBytes; clarified comment on ZipHelper.SeekBackwardsAndRead
* Additional code review comments
Added comment to SeekBackwardsToStream.
Lingering references to SignatureConstantBytes.Length.
Added two asserts to CanReadLargeCentralDirectoryHeader test, verifying that the archive entry metadata is in a sensible state.

---------

Co-authored-by: Carlos Sánchez López <1175054+carlossanlop@users.noreply.github.com>",2025-01-23 00:11:36+00:00,Edward Neal,1,8c3506aff2a0d07b5ed4a3dcf3862a4a961395fa,"Fix ref files from System.IO.Compression and System.IO.Compression.Brotli with autogenerated file using GenAPI (#112440)

* Fix System.IO.Compression ref file.
* Fix System.IO.Compression.Brotli ref file.
* Add missing default CancellationToken argument value to WriteAsync in DeflateStream, remove unnecessary cast in ReadAsync.
* Omit ZLibException as intended in the CompatibilitySuppressions.xml
* Remove invalid test files
* Add GenApiExcludeApiList and an API exclusions txt file",8,1031,401,"remove binaryreader and binarywriter references from ziparchive (issue_ref)* removed binaryreader, binarywriter from ziparchive and zipblockswe now read the data into a (sometimes stack-allocated) byte array and slice it up with binaryprimitives.this reduces the number of reads and writes required to read and write a ziparchive. it also makes future work to enable async apis easier, since binaryreader and binarywriter lack this support.also changed approach to reading central file directory headers. rather than performing x reads per header, we read 4kb of data at a time and look for all applicable headers in that data. this should improve performance when dealing with many small files.* removed binaryreader from ziparchiveentrythis allowed the removal of the archivereader property from ziparchive.* removed binarywriter from ziparchiveentry* re-adding missing assertion* reduced memory usage with array poolingnow pooling the file io buffers and the temporary buffers for extra fields of the cd file header (which would otherwise be allocated and deallocated in a loop.)* corrected duplicate comment* added test for changed central directory read methodthis handles 64x entries with 19-character filenames (and thus, 65-byte file headers.) as a result, it straddles two 4kb read buffers.also corrected the seek logic while reading the central directory header* test changes: formatting, converted theory to fact* resolving test failuresthe buffer returned from the arraypool contained older data (including a zip header.) when reading the last chunk of the file (i.e a chunk which was less than backwardsseekingbuffersize) the buffer's span wasn't resized to account for this.seekbackwardstosignature would thus find the older data, try to seek beyond the end of the stream and fail to read the file.* responded to code reviewreads and writes are now performed using a new set of field lengths and locations.* code review responseformatting change; added one comment to zip64endofcentraldirectorylocator.signatureconstantbytes; clarified comment on ziphelper.seekbackwardsandread* additional code review commentsadded comment to seekbackwardstostream.lingering references to signatureconstantbytes.length.added two asserts to canreadlargecentraldirectoryheader test, verifying that the archive entry metadata is in a sensible state.---------"
dotnet/runtime,e2874f53ff8ba0d15cc552e380419f2e7c1217fa,Improve char.IsWhiteSpace for non-ASCII (#111569),2025-01-23 00:30:45+00:00,Miha Zupan,0,,,1,1,0,improve char.iswhitespace for non-ascii (issue_ref)
dotnet/runtime,e20ee224bc1c83f8fe33d890a00f1cebed178b42,Update versions of code coverage tooling (#111687),2025-01-23 00:52:44+00:00,Stephen Toub,0,,,1,2,2,update versions of code coverage tooling (issue_ref)
dotnet/runtime,c74440f8291edd35843f3039754b887afe61766e,Requite SSE4.1 for Vector128.IsInteger (#111713),2025-01-23 11:03:34+00:00,Egor Bogatov,1,03b2d3d73250a210109d803a65299c0e9477bfff,"Add support for AVX10.2, Add AVX10.2 API surface and template tests (#111209)

* Add support for AVX10.2. Add AVX10.2 API surface and template tests. Lower Avx10.2 nodes accordingly.

* Add support and template tests for AVX10v2_V512

* Add new coredistools.dll build from latest llvm repo

* Limit JIT unit suite within the subsets which are stable in SDE.

* Rename API as per latest API proposal discussions

* fix sample tests in handwritten project

* Revert ""Limit JIT unit suite within the subsets which are stable in SDE.""

This reverts commit 067e31e0b7b55fc3c70d69592e4fed9dd577f462.

* Limit JIT unit suite within the subsets which are stable in SDE.

* Allow a prefix of 0x00 for AVX10.2 instructions.

* Revert ""Limit JIT unit suite within the subsets which are stable in SDE.""

This reverts commit 067e31e0b7b55fc3c70d69592e4fed9dd577f462.

* Limit JIT unit suite within the subsets which are stable in SDE.

* remove developer comments from files

* Enable all template tests and enable ymm embedded rounding

* Make emitter independent of ISa and based on insOpts for ymm embedded rounding

* Enable ymm embedded rounding based on architecture

* Revert ""Make emitter independent of ISa and based on insOpts for ymm embedded rounding""

This reverts commit 493572f098e1390a11fa1523b03fcd2833a98173.

* Separate Avx10.2 unit testing framework from APX framework

* Revert ""Limit JIT unit suite within the subsets which are stable in SDE.""

This reverts commit 067e31e0b7b55fc3c70d69592e4fed9dd577f462.

* Revert ""Add new coredistools.dll build from latest llvm repo""

This reverts commit 61719f8b1ec9867514323d8f2322915f1de448a8.

* Fix formatting

* Use new keyword for class V512 to hide Avx10v1.V512 and correct CI errors

* Remove MinMax APis from lowering for numargs=2

* Add docstrings for APIs

* revert changes for sde execution of tests

* Add appropriate comments from reviews

* Apply suggestions from code review

Co-authored-by: Bruce Forstall <brucefo@microsoft.com>

* Add emitter tests for XMM9/16 to make sure special handling does not interfere.

* Format code

* Handle sizePrefix = 0 case when decoding evex instruction

* Add assert in appropriate places

* Club similar instructions together in perf calculation in emitxarch

* Run formatting

* Add assembly prints for debug assembly capturing for Avx10.2

* Use correct size when running emitter tests

* Ad appropriate comments and make review changes

* Apply suggestions from code review

Co-authored-by: Bruce Forstall <brucefo@microsoft.com>

---------

Co-authored-by: Ruihan-Yin <ruihan.yin@intel.com>
Co-authored-by: Bruce Forstall <brucefo@microsoft.com>",1,9,3,requite sse4.1 for vector128.isinteger (issue_ref)
dotnet/runtime,546482da95f03c2b963f2fa73ae1f1c380b41c89,docs: unit to uint (#111741),2025-01-23 11:25:12+00:00,小辉辉,0,,,1,1,1,docs: unit to uint (issue_ref)
dotnet/runtime,92e1cdd4b786ce237f9f378f979e871df3ff076a,"Simplify NativeAOT PAL (#111730)

* Simplify NativeAOT PAL

- Delete xplat Windows CONTEXT definition since it is not actually used for anything
- Delete hijacking callback abstraction. We have introduced cycles between PAL layer and runtime layer of the thread suspension a while ago, so we can take full advantage of the tight coupling and avoid going through extra indirections.
- Delete HANDLE abstraction for Thread object (enabled by deleting hijacking callback abstraction)

* More cleanup

* Fix Arm64 build break

* Delete RhpPInvokeExceptionGuard

* Fix win x86 build break

* More win x86 build breaks",2025-01-23 11:35:34+00:00,Jan Kotas,1,8a79637e1454c751c24a984b7fb8af4c4d43394b,"Fixed the issue of incorrect return value of PalVirtualAlloc (#112579)

* Fixed the issue that the PalVirtualAlloc function did not return a NULL value correctly when memory allocation failed on Unix-like platforms

* Fix variable name spelling",27,389,1111,"simplify nativeaot pal (issue_ref)* simplify nativeaot pal- delete xplat windows context definition since it is not actually used for anything- delete hijacking callback abstraction. we have introduced cycles between pal layer and runtime layer of the thread suspension a while ago, so we can take full advantage of the tight coupling and avoid going through extra indirections.- delete handle abstraction for thread object (enabled by deleting hijacking callback abstraction)* more cleanup* fix arm64 build break* delete rhppinvokeexceptionguard* fix win x86 build break* more win x86 build breaks"
dotnet/runtime,6ad67d17242b54da6ce38a9a62b041c1aff5ef73,Obsolete all constructors for Rfc2898DeriveBytes (#111678),2025-01-23 13:58:16+00:00,Kevin Jones,1,4f2bcbc7e8ece299be6e8dfa3961bca817ecfc0b,"Fix obsoletion message for SslStream properties (#113375)

* Fix SYSLIB0058 obsoletion message.

* Revert unwanted whitespace changes",7,32,17,obsolete all constructors for rfc2898derivebytes (issue_ref)
dotnet/runtime,bcc10fea44224de598aef09bf0079a8ba6d241ca,Add System.Linq.AsyncEnumerable (#111685),2025-01-23 19:41:47+00:00,Stephen Toub,1,a98f3c30236aac6174733d98c8a290e5d3984f60,doc fixes for preview 1 update (#113027),146,18312,52,add system.linq.asyncenumerable (issue_ref)
dotnet/runtime,f196875c5d0441364f6538d2dd8fc4e3eb1ff108,"Fix DateTime.Parse with AssumeUniversal style option (#111729)

* Fix DateTime.Parse with AssumeUniversal style option

* Apply suggestions from code review

Co-authored-by: Stephen Toub <stoub@microsoft.com>

---------

Co-authored-by: Stephen Toub <stoub@microsoft.com>",2025-01-23 20:22:23+00:00,Tarek Mahmoud Sayed,1,36f59e838d4b58d4347552efac9842e306ef2353,"Fix ""MMM.yy"" date parsing in German culture. #114169 (#114194)

* Fix ""MMM.yy"" date parsing in German culture. #114169

* Fix ""MMM.yy"" date parsing in German culture. dotnet#114169

* Fix ""MMM.yy"" date parsing in German culture. #114169 v3

* Fix ""MMM.yy"" date parsing in German culture. #114169 [Testing]

* Fix ""MMM.yy"" date parsing in German culture. #114169 [Testing] v1

* Fix the test

---------

Co-authored-by: Tarek Mahmoud Sayed <tarekms@microsoft.com>",2,15,13,fix datetime.parse with assumeuniversal style option (issue_ref)* fix datetime.parse with assumeuniversal style option* apply suggestions from code review
dotnet/runtime,d917005f9f24470a12cf4fbe5f8c711a31fd7d5f,"Remove the crosscomponents.cmake logic and use various components that already exist to build ""run on host"" binaries (#111677)",2025-01-23 22:40:01+00:00,Jeremy Koritzinsky,1,0290a8bc4475dd4c780f9dac1be795170af68280,"Fix build of windows arm64 crossdac (#112553)

Partial revert of https://github.com/dotnet/runtime/pull/112256",9,35,98,"remove the crosscomponents.cmake logic and use various components that already exist to build ""run on host"" binaries (issue_ref)"
dotnet/runtime,0a477a86d0fea6234ada63e660c0faa310fe121d,"Reduce memory usage when updating ZipArchives (#102704)

* Changed behaviour of WriteFile

WriteFile now takes a more granular approach to writing the ZipArchive to its stream.
Adding a new file to the end of the archive will no longer require every file in the archive to be loaded into memory.
Changing fixed-length metadata inside a file will no longer require the entire archive to be re-written.

* Added tests for changed WriteFile behaviour

* Changes following code review

Renamed Dirty and DirtyState to Changed and ChangeState.
Explicitly assigned Unchanged as a zero-value ChangeState.

* Changed field protection levels

Reset _originallyInArchive and _offsetOfLocalHeader to private members, exposed as internal properties.
Also changed _versionToExtract to be private - this isn't ever used in System.IO.Compression outside of ZipArchiveEntry.

* Following code review feedback

* Used named parameter when passing a constant to forceWrite.
* Replaced two magic numbers with constants.
* Small cleanup of ZipArchive.WriteFile for clarity.
* Renamed ZipArchiveEntry.Changed to Changes.

* Further code review: initial response

* Further code review comments

The list of entries in a ZipArchive is now only sorted when opened in Update mode.
Added/modified a test to verify that these entries appear in the correct order: offset order when opened in Update mode, central directory entry order when opened in Read mode.

* Correct the write counts in tests

This accounts for the removal of BinaryReader in an earlier PR

* Extra test: Update_PerformMinimalWritesWhenEntriesModifiedAndAdded

This test modifies an entry at a specific index, adds N entries after it, then verifies that they've been written in the expected order: existing entries first, new entries afterwards

---------

Co-authored-by: Carlos Sánchez López <1175054+carlossanlop@users.noreply.github.com>",2025-01-24 09:08:32+00:00,Edward Neal,1,f0de80d7c8c492fa75941d2cc83110855d043077,"Fix Zip64ExtraField handling (#111802)

* Correct absolute addressing in Zip64ExtraField

* Correct byte counts in WriteDataDescriptor",8,883,118,"reduce memory usage when updating ziparchives (issue_ref)* changed behaviour of writefilewritefile now takes a more granular approach to writing the ziparchive to its stream.adding a new file to the end of the archive will no longer require every file in the archive to be loaded into memory.changing fixed-length metadata inside a file will no longer require the entire archive to be re-written.* added tests for changed writefile behaviour* changes following code reviewrenamed dirty and dirtystate to changed and changestate.explicitly assigned unchanged as a zero-value changestate.* changed field protection levelsreset _originallyinarchive and _offsetoflocalheader to private members, exposed as internal properties.also changed _versiontoextract to be private - this isn't ever used in system.io.compression outside of ziparchiveentry.* following code review feedback* used named parameter when passing a constant to forcewrite.* replaced two magic numbers with constants.* small cleanup of ziparchive.writefile for clarity.* renamed ziparchiveentry.changed to changes.* further code review: initial response* further code review commentsthe list of entries in a ziparchive is now only sorted when opened in update mode.added/modified a test to verify that these entries appear in the correct order: offset order when opened in update mode, central directory entry order when opened in read mode.* correct the write counts in teststhis accounts for the removal of binaryreader in an earlier pr* extra test: update_performminimalwriteswhenentriesmodifiedandaddedthis test modifies an entry at a specific index, adds n entries after it, then verifies that they've been written in the expected order: existing entries first, new entries afterwards---------"
dotnet/runtime,717d3b1c787a78c37b2ec1f079ad6a6fd9d5eb0b,"Add support for building CoreCLR for MacCatalyst/iOS simulator (#109928)

* Make it possible to compile CoreCLR on iOS-like platforms with './build.sh clr+clr.nativeaotlibs+libs+packs -os [iossimulator/maccatalyst/ios] -arch arm64 -cross'

Build the singlefilehost even if we don't currently use it

Make coreclrhost.h compatible v C(not++)

Fix TargetOS::IsMacOS

WIP: AppleAppBuilder support for CoreCLR

Make the sample app working: dotnet publish src/mono/sample/iOS/Program.csproj -c Release /p:TargetOS=iossimulator /p:TargetArchitecture=arm64 /p:AppleAppBuilderRuntime=CoreCLR /p:DeployAndRun=true /p:UseMonoRuntime=false /p:RunAOTCompilation=false /p:MonoForceInterpreter=false

Cleanup

Update src/tasks/AppleAppBuilder/AppleAppBuilder.csproj

Co-authored-by: Adeel Mujahid <3840695+am11@users.noreply.github.com>

Use sys_icache_invalidate for all iOS-like platforms

Consolidate macOS-only entrypoints in a single #if block

Apply feedback

Fix jitinterface cross-build

Infer AppleAppBuilderRuntime from UseMonoRuntime and UseNativeAOTRuntime

Minor changes to test infrastructure

Add basic documentation

Add nearly complete support for building runtime tests

Fix building seh-unwind with older iOS SDK

Use enum for TargetRuntime in AppleAppBuilder

Fix LibraryBuilder build

Cleanup

Fix after rebase

Revert accidental change

Fix tvOS build

Drop CoreCLR tvOS Simulator support for now

* Fix rpath on MacCatalyst

* Apply suggestions from code review

Co-authored-by: Aaron Robinson <arobins@microsoft.com>

* Use CORECLR_HOSTING_API_LINKAGE for extern 'C'

* Remove extra #include

* Drop ICU linkage (not needed with Hybrid Globalization)

* Move jit_write_protect_np initialization

* Use __APPLE__ in PAL instead of TARGET_APPLE for consistency

* Revert changes to native libs and exclude singlefilehost

* Revert more singlefilehost changes

* Remove excessive -D_XOPEN_SOURCE

* Fix build with FEATURE_PERFTRACING_STANDALONE_PAL (debug libs)

* Build with FEATURE_STANDALONE_GC=0

* Remove extra NativeDependencies property (bad merge)

* Add back the UseNativeAOTRuntime property to unblock CI

---------

Co-authored-by: Aaron Robinson <arobins@microsoft.com>
Co-authored-by: Milos Kotlar <kotlarmilos@gmail.com>",2025-01-24 12:46:03+00:00,Filip Navara,1,20b579bdbb6d8f11af41014d540c82f1d832de61,"Haiku: Fix IPC socket (#114520)

Haiku also does not support `fchmod` on a socket.",55,568,203,add support for building coreclr for maccatalyst/ios simulator (issue_ref)* make it possible to compile coreclr on ios-like platforms with './build.sh clr+clr.nativeaotlibs+libs+packs -os [iossimulator/maccatalyst/ios] -arch arm64 -cross'build the singlefilehost even if we don't currently use itmake coreclrhost.h compatible v c(not++)fix targetos::ismacoswip: appleappbuilder support for coreclrmake the sample app working: dotnet publish src/mono/sample/ios/program.csproj -c release /p:targetos=iossimulator /p:targetarchitecture=arm64 /p:appleappbuilderruntime=coreclr /p:deployandrun=true /p:usemonoruntime=false /p:runaotcompilation=false /p:monoforceinterpreter=falsecleanupupdate src/tasks/appleappbuilder/appleappbuilder.csproj
dotnet/runtime,3fef04fbd90b0b9c29bf83df312a563476eeba0a,Remove unused scripts (#111765),2025-01-24 13:08:20+00:00,Jeremy Koritzinsky,0,,,3,0,83,remove unused scripts (issue_ref)
dotnet/runtime,85506c30edece50c6321e8317a44902df1ae2dde,"[wasm] Bump chrome for testing - linux: 132.0.6834.83, windows: 132.0.6834.84 (#111580)

* Automated bump of chrome version

* @Tornhoof's feedback: Try `headless` only.

---------

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>
Co-authored-by: Ilona Tomkowicz <itomkowicz@microsoft.com>",2025-01-24 13:36:07+00:00,github-actions[bot],0,,,2,12,10,"[wasm] bump chrome for testing - linux: 132.0.6834.83, windows: 132.0.6834.84 (issue_ref)* automated bump of chrome version* @tornhoof's feedback: try only.---------"
dotnet/runtime,d90c2e5408419a22ad70133bead41111e119012f,"M.E.C.M. performance (#111502)

- split string and non-string keys into separate collections, to
  allow re-hashing of string keys
- use Marvin explicitly on down-level TFMs (it is implicit on up-level)",2025-01-24 16:00:02+00:00,Marc Gravell,1,2dada4c5d6fb82f9d7f274d7bd980e508cdf52e2,"Mark Marvin.ComputeHash32 as noinlining (#118851)

Recent changes to the JIT's inliner may lead to this method but not all of its callees
being inlined, which is not good for performance.

There is not much benefit to be had by inlining this method, so mark it as noinline.

Fixes (part of) #118739.",4,154,32,"m.e.c.m. performance (issue_ref)- split string and non-string keys into separate collections, to allow re-hashing of string keys- use marvin explicitly on down-level tfms (it is implicit on up-level)"
dotnet/runtime,6b55713d95e9a768de14b77759ee174c9652f564,"JIT: Preliminary for enabling inlining late devirted calls (#111782)

* Remove unused ilOffset

* Handle BBF_INTERNAL

* Use correct return type

* Use bbInCatchHandlerBBRange and bbInFilterBBRange

* Cleanup fncRetType",2025-01-24 16:09:19+00:00,Steve,0,,,6,37,27,jit: preliminary for enabling inlining late devirted calls (issue_ref)* remove unused iloffset* handle bbf_internal* use correct return type* use bbincatchhandlerbbrange and bbinfilterbbrange* cleanup fncrettype
dotnet/runtime,03b2d3d73250a210109d803a65299c0e9477bfff,"Add support for AVX10.2, Add AVX10.2 API surface and template tests (#111209)

* Add support for AVX10.2. Add AVX10.2 API surface and template tests. Lower Avx10.2 nodes accordingly.

* Add support and template tests for AVX10v2_V512

* Add new coredistools.dll build from latest llvm repo

* Limit JIT unit suite within the subsets which are stable in SDE.

* Rename API as per latest API proposal discussions

* fix sample tests in handwritten project

* Revert ""Limit JIT unit suite within the subsets which are stable in SDE.""

This reverts commit 067e31e0b7b55fc3c70d69592e4fed9dd577f462.

* Limit JIT unit suite within the subsets which are stable in SDE.

* Allow a prefix of 0x00 for AVX10.2 instructions.

* Revert ""Limit JIT unit suite within the subsets which are stable in SDE.""

This reverts commit 067e31e0b7b55fc3c70d69592e4fed9dd577f462.

* Limit JIT unit suite within the subsets which are stable in SDE.

* remove developer comments from files

* Enable all template tests and enable ymm embedded rounding

* Make emitter independent of ISa and based on insOpts for ymm embedded rounding

* Enable ymm embedded rounding based on architecture

* Revert ""Make emitter independent of ISa and based on insOpts for ymm embedded rounding""

This reverts commit 493572f098e1390a11fa1523b03fcd2833a98173.

* Separate Avx10.2 unit testing framework from APX framework

* Revert ""Limit JIT unit suite within the subsets which are stable in SDE.""

This reverts commit 067e31e0b7b55fc3c70d69592e4fed9dd577f462.

* Revert ""Add new coredistools.dll build from latest llvm repo""

This reverts commit 61719f8b1ec9867514323d8f2322915f1de448a8.

* Fix formatting

* Use new keyword for class V512 to hide Avx10v1.V512 and correct CI errors

* Remove MinMax APis from lowering for numargs=2

* Add docstrings for APIs

* revert changes for sde execution of tests

* Add appropriate comments from reviews

* Apply suggestions from code review

Co-authored-by: Bruce Forstall <brucefo@microsoft.com>

* Add emitter tests for XMM9/16 to make sure special handling does not interfere.

* Format code

* Handle sizePrefix = 0 case when decoding evex instruction

* Add assert in appropriate places

* Club similar instructions together in perf calculation in emitxarch

* Run formatting

* Add assembly prints for debug assembly capturing for Avx10.2

* Use correct size when running emitter tests

* Ad appropriate comments and make review changes

* Apply suggestions from code review

Co-authored-by: Bruce Forstall <brucefo@microsoft.com>

---------

Co-authored-by: Ruihan-Yin <ruihan.yin@intel.com>
Co-authored-by: Bruce Forstall <brucefo@microsoft.com>",2025-01-24 16:29:15+00:00,Khushal Modi,1,843f7985e470f5526799abacb81cbb245c7dec70,"JIT: Fix embedded broadcast simd size (#111638)

This ensures that when a constant vector is replaced with a broadcast node, the replacement node is of the correct size.  Since only the scalar is read from the broadcast node, SIMD size doesn't really matter for codegen, but this fix satisfies the assert in #111613 by ensuring we replace like for like.",37,2092,166,"add support for avx10.2, add avx10.2 api surface and template tests (issue_ref)* add support for avx10.2. add avx10.2 api surface and template tests. lower avx10.2 nodes accordingly.* add support and template tests for avx10v2_v512* add new coredistools.dll build from latest llvm repo* limit jit unit suite within the subsets which are stable in sde.* rename api as per latest api proposal discussions* fix sample tests in handwritten project* revert ""limit jit unit suite within the subsets which are stable in sde.""this reverts commit 067e31e0b7b55fc3c70d69592e4fed9dd577f462.* limit jit unit suite within the subsets which are stable in sde.* allow a prefix of 0x00 for avx10.2 instructions.* revert ""limit jit unit suite within the subsets which are stable in sde.""this reverts commit 067e31e0b7b55fc3c70d69592e4fed9dd577f462.* limit jit unit suite within the subsets which are stable in sde.* remove developer comments from files* enable all template tests and enable ymm embedded rounding* make emitter independent of isa and based on insopts for ymm embedded rounding* enable ymm embedded rounding based on architecture* revert ""make emitter independent of isa and based on insopts for ymm embedded rounding""this reverts commit 493572f098e1390a11fa1523b03fcd2833a98173.* separate avx10.2 unit testing framework from apx framework* revert ""limit jit unit suite within the subsets which are stable in sde.""this reverts commit 067e31e0b7b55fc3c70d69592e4fed9dd577f462.* revert ""add new coredistools.dll build from latest llvm repo""this reverts commit 61719f8b1ec9867514323d8f2322915f1de448a8.* fix formatting* use new keyword for class v512 to hide avx10v1.v512 and correct ci errors* remove minmax apis from lowering for numargs=2* add docstrings for apis* revert changes for sde execution of tests* add appropriate comments from reviews* apply suggestions from code review"
dotnet/runtime,ccd8c3d5cc94b9bfb7525840d08bbefce985ab49,"JIT: Ensure `BBF_PROF_WEIGHT` flag is set when we have PGO data (#111780)

Part of #107749. Prerequisite to #111764 (comment). Add a post-phase check that ensures BBF_PROF_WEIGHT is set for every reachable block when we have profile data. This check revealed only one site -- when incorporating an inlinee's blocks -- where we couldn't rely on normal flow propagation to set the flag.",2025-01-24 20:15:05+00:00,Aman Khalid,1,cdb88b2c0051de63a09de791a1b958225dd11cec,"Fix linux-x86 build (#111861)

* Enable FEATURE_SIMD on linux-x86

* Disable AVX+ support on linux-x86 (lacks support of XState in thread context saving)

* Enable CrossGen of S.P.CoreLib on CI for linux-x86

* Move the AVX workaround to xmmYmmStateSupport

* Fix loop condition overflow and offsets in StubLinker

* Fix swapped parameters for .space in JIT_WriteBarrier* helper

* Fix comment

* Workaround: Treat SIMD variables as unaligned

* Enable intrinsics in CoreLib

* Fix alignment in linux-x86 assembly

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",4,35,9,jit: ensure flag is set when we have pgo data (issue_ref)part of issue_ref. prerequisite to issue_ref (comment). add a post-phase check that ensures bbf_prof_weight is set for every reachable block when we have profile data. this check revealed only one site -- when incorporating an inlinee's blocks -- where we couldn't rely on normal flow propagation to set the flag.
dotnet/runtime,becfc211457db4d29755adc4b74f05efe864051d,"arm64: Add bic(s) compact encoding (#111452)

Change-Id: Ief95d09c2f7bec412b2509e615f7c09e4d228986",2025-01-24 20:24:52+00:00,Jonathan Davies,1,a9d67ec265ed4078265d70d155d06316acadf6fe,"JIT: Enable inlining for late devirtualization (#110827)

* Enable inlining for late devirt

* Pass correct IL offset

* Only creates RET_EXPR if the node is not top-level or not returning void

* Do not try inlining if BBF_INTERNAL is set

* Ensure the type matches

* Set inliner context correctly

* Address review feedbacks

* Fix non inline candidate marking

* Handle calls with retbuf

* Handle BBF_INTERNAL

* Get real type from local

* Always set IL offset

* Add comments

* Oops

* Use gtReturnType instead

* Remove unused ilOffset

* Use genActualType

* Remove unnecessary spillTemp

* Handle nested call correctly

* Don't promote compCurStmt

* Remove unused ilOffset

* Handle BBF_INTERNAL

* Use correct return type

* Use bbInCatchHandlerBBRange and bbInFilterBBRange

* Cleanup fncRetType

* Add a runtime check to prevent accidental execution order change

* Format jit

* Revert some changes

* Remove unused local

* Check whether a call can be spilled without side effect

* Get rid of BAD_VAR_NUM

* Add comments for CanSpillCallWithoutSideEffect

* Use ancestors to estimate whether a call can be spilled or not

* Reset m_ancestors before walking

* Nit

* Fix assertion

* Limit to GT_STORE_LCL_VAR only

* Oops

* Inline the check

* Remove leftovers

* Hoist the check

* Make sure the store parent is the statement root

Co-authored-by: Andy Ayers <andya@microsoft.com>

* Format JIT

* Check side effects before trying inlining

* Fix

* Nit

* Make lvHasLdAddrOp check optional

* Rename to early

* Split effects if necessary

* Use gtSplitTree

* Teach gtSplitTree to support early use

* Cleanup

* ClearInlineInfo is not needed

---------

Co-authored-by: Andy Ayers <andya@microsoft.com>",5,246,1,arm64: add bic(s) compact encoding (issue_ref)change-id: ief95d09c2f7bec412b2509e615f7c09e4d228986
dotnet/runtime,ee46066fef265e69f8e0b4842079afc7d8bfa263,"Add build support for Android+CoreCLR (#110471)

This change adds build support for the arm64 and x64 CoreCLR runtimes for Android. Initial infrastructure to run a simple sample was also added (src/mono/sample/Android) and we plan to do more in a follow up.

The arm32 and x86 builds are blocked by https://github.com/dotnet/runtime/issues/111665 since our min API level target is 21. Both will be fixed at a later time.

Contributes to https://github.com/dotnet/runtime/issues/111491

---------

Co-authored-by: Steve Pfister <stpfiste@microsoft.com>
Co-authored-by: Jan Vorlicek <janvorli@microsoft.com>
Co-authored-by: Ivan Povazan <ivan.povazan@gmail.com>
Co-authored-by: Milos Kotlar <kotlarmilos@gmail.com>",2025-01-24 21:18:01+00:00,Marek Habersack,1,1abd8125727fd89d2a92f86bd945505171624bba,"Fix Unable to load shared library 'jitinterface_x64' build error on linux/mac (#114012)

When crossgen is first built, it writes the executable and shared lib artifacts to `artifacts/bin/coreclr/<os>.<arch>.<config>/<arch>/crossgen2`. On subsequent builds the native libs are cleaned and never copied back (by the SDK) even though they are included as <Content> items in crossgen.props. This can cause the build to fail later on down the line when we attempt to use the in build crossgen on different assemblies as it won't find the native libs it depends on.

We need to set `ExcludeFromSingleFile=true` so that the publishing logic knows that we want to not include these files in the singlefile bundle.

See https://github.com/dotnet/designs/blob/main/accepted/2020/single-file/design_3_0.md

Fixes https://github.com/dotnet/runtime/issues/111731",40,491,111,add build support for android+coreclr (issue_ref)this change adds build support for the arm64 and x64 coreclr runtimes for android. initial infrastructure to run a simple sample was also added (src/mono/sample/android) and we plan to do more in a follow up.the arm32 and x86 builds are blocked by since our min api level target is 21. both will be fixed at a later time.contributes to ---------
dotnet/runtime,cedf4e29bae9f0fe7d0c7200b797b626b7e9cbf8,"JIT: revise `optRelopImpliesRelop` to always set `reverseSense` (#111803)

Update clients to rely on `reverseSense` rather than parsing `vnRelation`.

Also revised the and/or inference slightly as I found it hard to follow;
hopefully it's clearer now.

Fixes an issue that came up in testing #111766.",2025-01-24 22:16:55+00:00,Andy Ayers,1,6f7c6fb8d73889ef1189add4ef7ae4b809785840,"JIT: Fix cross crossgen comparison failures (#112078)

Fix a couple of issues that were causing cross-crossgen tests to fail

* address mode formation was sensitive to the size of a constant handle
* value histogram processing was always using 64 bit value sizes
* transformation for down-counted loops was using host-sized -1.

Fixes the jit-related issues in #111972",2,35,21,jit: revise to always set (issue_ref)update clients to rely on rather than parsing .also revised the and/or inference slightly as i found it hard to follow;hopefully it's clearer now.fixes an issue that came up in testing issue_ref.
dotnet/runtime,6e2d3941faad36c830a8c746a3a8db351616283e,Add left-handed spherical and cylindrical billboards (#109605),2025-01-24 23:17:30+00:00,Pranav Senthilnathan,0,,,5,498,145,add left-handed spherical and cylindrical billboards (issue_ref)
dotnet/runtime,6acb17a709bd803e3bdcb5cd0d3cb9936a90aa23,Swap some libraries areas between leads (#111816),2025-01-24 23:21:04+00:00,Jeff Handley,0,,,1,6,6,swap some libraries areas between leads (issue_ref)
dotnet/runtime,f91ff5e443dbc9149447eefa9ddb173cfddc2735,"Change empty subject test certificate to include a critical SAN.

This test was marked SkipOnPlatform for Android because the test would fail. However,
it turns out that Android does support empty subjects in certificates. If the subject
is empty, then the SubjectAltName extension must be marked critical. This is in accordance
with RFC 5280:

> If the subject field contains an empty sequence, then the issuing CA MUST include a subjectAltName extension that is marked as critical.

With a critical SAN extension, this test now passes on all platforms.",2025-01-25 00:34:30+00:00,Kevin Jones,1,3f0d8d9fcb6dfb793b5ee7060b7df61b07d63e44,Fix BuildChainCustomTrustStore test,2,47,47,"change empty subject test certificate to include a critical san.this test was marked skiponplatform for android because the test would fail. however,it turns out that android does support empty subjects in certificates. if the subjectis empty, then the subjectaltname extension must be marked critical. this is in accordancewith rfc 5280:> if the subject field contains an empty sequence, then the issuing ca must include a subjectaltname extension that is marked as critical.with a critical san extension, this test now passes on all platforms."
dotnet/runtime,a0ccbd834ebede7a35f339962f7ad9cb44515fbc,"[Android] Make sure RuntimeFlavor=CoreCLR when clr subset is specified (#111821)

Before this change the RuntimeFlavor defaulted to Mono and as a result the right clr subsets were not substituted.",2025-01-25 13:49:52+00:00,Steve Pfister,0,,,1,1,1,[android] make sure runtimeflavor=coreclr when clr subset is specified (issue_ref)before this change the runtimeflavor defaulted to mono and as a result the right clr subsets were not substituted.
dotnet/runtime,38b1419d103c217551fad6d7afcf6cf9f8bdf3c6,"JIT: Don't run optSetBlockWeights when we have PGO data (#111764)

Part of #107749. For PGO scenarios, we plan to rely entirely on profile synthesis to propagate profile-derived weights throughout the flowgraph. This is the first step in transitioning away from the existing weight propagation heuristics. We want to keep these around for non-PGO scenarios for now, though ideally, we'll eventually be able to replace these entirely with profile synthesis (plus branch prediction heuristics when we don't have profile data), and consolidate how the profile is maintained for PGO and non-PGO scenarios.",2025-01-25 13:58:00+00:00,Aman Khalid,0,,,1,13,3,"jit: don't run optsetblockweights when we have pgo data (issue_ref)part of issue_ref. for pgo scenarios, we plan to rely entirely on profile synthesis to propagate profile-derived weights throughout the flowgraph. this is the first step in transitioning away from the existing weight propagation heuristics. we want to keep these around for non-pgo scenarios for now, though ideally, we'll eventually be able to replace these entirely with profile synthesis (plus branch prediction heuristics when we don't have profile data), and consolidate how the profile is maintained for pgo and non-pgo scenarios."
dotnet/runtime,a40f92ea4ed936117f7d490150b0195532a97493,Handle OSSL 3.4 change to SAN:othername formatting,2025-01-26 01:38:03+00:00,Jeremy Barton,0,,,2,19,4,handle ossl 3.4 change to san:othername formatting
dotnet/runtime,d5c8265543c9e1035cd7551b713602539867bd83,re-enable acceleration of Vector512<long>.op_Multiply (#111832),2025-01-26 12:49:59+00:00,Clinton Ingram,0,,,1,2,2,re-enable acceleration of vector512<long>.op_multiply (issue_ref)
dotnet/runtime,0f0753d0a5b6585803ae80e0efaca59be41a42fb,Revert potential UB due to aliasing + more WB removals (#111733),2025-01-26 14:47:16+00:00,Egor Bogatov,0,,,5,41,32,revert potential ub due to aliasing + more wb removals (issue_ref)
dotnet/runtime,f41b65f26753bfb061abf3841f11b2c12e173e5c,"Clean up Stopwatch a bit (#111834)

* Clean up Stopwatch a bit

- Remove unnecessary Reset call from ctor
- Remove unnecessary branch for _elapsed < 0
- Remove some defunct comments
- Clean up style of Stop to match that of Start

* More stylistic cleanup

- Use expression-bodied properties
- Remove unnecessary Debug.Asserts
- Remove private method whose impl could just have been that of an existing public property
- Change a private GetXx method to an Xx property.
- Remove some type names that could be inferred",2025-01-26 18:08:58+00:00,Stephen Toub,0,,,1,22,69,clean up stopwatch a bit (issue_ref)* clean up stopwatch a bit- remove unnecessary reset call from ctor- remove unnecessary branch for _elapsed < 0- remove some defunct comments- clean up style of stop to match that of start* more stylistic cleanup- use expression-bodied properties- remove unnecessary debug.asserts- remove private method whose impl could just have been that of an existing public property- change a private getxx method to an xx property.- remove some type names that could be inferred
dotnet/runtime,2ac0591de5e95f6e98b28b7525b712ed09c73c39,"Delete local __NR_membarrier definition (#111846)

This definition was needed for portable builds against CentOS baseline. We do not need it anymore now that portable builds are done against Ubuntu 16 baseline that includes it.",2025-01-27 09:25:40+00:00,Jan Kotas,1,1b71136cdaf9a6ab3d01149bac31459fa91ea4a6,"Cleanup membarrier portability (#111943)

Fixes #111776",2,0,32,delete local __nr_membarrier definition (issue_ref)this definition was needed for portable builds against centos baseline. we do not need it anymore now that portable builds are done against ubuntu 16 baseline that includes it.
dotnet/runtime,c47a53de9f37b648d26f970cafa54dd24b689ba8,"[WinHTTP] Make concurrent IO check thread safe (#111750)

* Check for concurrent IO is now thread safe.

* Add test

* Use compare exchange, fix cancellation token registration

* Typo

* Fixed unit tests.

* Test exception narrow down

* Narrow down the exception

* Don't dispose handle outside of lock",2025-01-27 12:06:20+00:00,Marie Píchová,1,972b621bc9a5aaf1429b19de65571ec250f18af4,"[WinHTTP] Remove unnecessary recursion (#112698)

* Remove unnecessary recursion

* Feedback - refetch the last error

* Fix",6,51,27,"[winhttp] make concurrent io check thread safe (issue_ref)* check for concurrent io is now thread safe.* add test* use compare exchange, fix cancellation token registration* typo* fixed unit tests.* test exception narrow down* narrow down the exception* don't dispose handle outside of lock"
dotnet/runtime,ea4a404ef8890f265780f798e7668d4710259e03,"Fix alternate stack overflow with superpmi (#111709)

* Fix alternate stack overflow with superpmi

The superpmi-shim-collector shared library registers sigsegv handler
so that it can flush out the logged data in case the JIT crashes
due to some null reference. The sigsegv handler of the superpmi then
calls the previous handler, which is the one of coreclr. Both of these
handlers run on the alternate stack. Each sigsegv handler has stack
frame of about 0xd70 bytes mostly due to the `SignalHandlerWorkerReturnPoint`
structure that contains `CONTEXT` structure.
The alternate stack size that we allocate is then on the tipping point
of not being sufficient and some variation on how much of the alternate
stack is used by the unix kernel causes it to tip over in some cases.
This started to happen on x64 Linux after we've added the APX registers
to the context.

The problem actually happens due to the `SwitchStackAndExecuteHandler`
being inlined into the `sigsegv_handler`. That moves the large
`SignalHandlerWorkerReturnPoint` structure to the frame of the
`sigsegv_handler`.

This change fixes the problem by marking the
`SwitchStackAndExecuteHandler` as noinline. That makes the
`sigsegv_handler` frame significantly smaller.

Close #111707

* Add comment based on PR feedback",2025-01-27 15:20:22+00:00,Jan Vorlicek,1,9e1ccbd3ca80cb232c20501fed1d2e9503427f71,"Add debugging checks for stack overflow tests failure (#111867)

The stack overflow tests are failing intermittently in the CI and I am
unable to repro that locally. So I am temporarilly adding some checks and
standard error prints to give me better understanding of the failure
mode.",1,6,0,"fix alternate stack overflow with superpmi (issue_ref)* fix alternate stack overflow with superpmithe superpmi-shim-collector shared library registers sigsegv handlerso that it can flush out the logged data in case the jit crashesdue to some null reference. the sigsegv handler of the superpmi thencalls the previous handler, which is the one of coreclr. both of thesehandlers run on the alternate stack. each sigsegv handler has stackframe of about 0xd70 bytes mostly due to the structure that contains structure.the alternate stack size that we allocate is then on the tipping pointof not being sufficient and some variation on how much of the alternatestack is used by the unix kernel causes it to tip over in some cases.this started to happen on x64 linux after we've added the apx registersto the context.the problem actually happens due to the being inlined into the . that moves the large structure to the frame of the.this change fixes the problem by marking the as noinline. that makes the frame significantly smaller.close issue_ref* add comment based on pr feedback"
dotnet/runtime,8eab62c365de53e0a341fb1000249d338c203354,"Fix matched check for balancing groups in regex compiler / source generator (#111769)

The emitted IsMatched check should come after processing the child, not before.",2025-01-27 16:11:23+00:00,Stephen Toub,1,f5763df14e3a83f8846ca3bcab8c51f605248f01,"Fix regex timeout test by reducing timeout from 10ms to 1ms (#117617)

* Initial plan

* Fix regex timeout test by reducing timeout from 10ms to 1ms

Co-authored-by: ericstj <8918108+ericstj@users.noreply.github.com>

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: ericstj <8918108+ericstj@users.noreply.github.com>",3,16,22,"fix matched check for balancing groups in regex compiler / source generator (issue_ref)the emitted ismatched check should come after processing the child, not before."
dotnet/runtime,eb73fc63ffbe2197d970bc5dbc26038ca2908296,Remove redundant SourceBuildTrimNetFrameworkTargets property (#111773),2025-01-27 20:09:47+00:00,v-firzha,0,,,1,1,1,remove redundant sourcebuildtrimnetframeworktargets property (issue_ref)
dotnet/runtime,c1ed07c36210e072adadcdc2288812c15dfd5e94,Implement PKCS12 Export in terms of Pkcs12Builder for non-Windows,2025-01-27 20:45:59+00:00,Kevin Jones,0,,,32,673,823,implement pkcs12 export in terms of pkcs12builder for non-windows
dotnet/runtime,5c831a4e6109d67b0df110c3a8762920d0aec83c,Put the cross-dacs in the correct subdirectory (#111869),2025-01-27 21:43:07+00:00,Jeremy Koritzinsky,0,,,1,2,0,put the cross-dacs in the correct subdirectory (issue_ref)
dotnet/runtime,cf0162f3ff84d8b21468b5528f7aad5f8f6c9143,"win32: add fallback to environment vars for system folder (#109673)

* win32: add fallback to environment vars for system folder

Implement fallback to environment variables for system folders in NanoServer, ensuring correct paths when SHGetKnownFolderPath fails.

* feedback

* Update src/libraries/System.Private.CoreLib/src/System/Environment.Win32.cs

---------

Co-authored-by: Tanner Gooding <tagoo@outlook.com>",2025-01-28 00:02:33+00:00,kasperk81,0,,,2,15,9,"win32: add fallback to environment vars for system folder (issue_ref)* win32: add fallback to environment vars for system folderimplement fallback to environment variables for system folders in nanoserver, ensuring correct paths when shgetknownfolderpath fails.* feedback* update src/libraries/system.private.corelib/src/system/environment.win32.cs---------"
dotnet/runtime,baa835924277f3562ebd922be181ea4834ef6df6,"Update Debian version to 13 (#111768)

Co-authored-by: Jeremy Barton <jbarton@microsoft.com>",2025-01-28 00:05:57+00:00,Rich Lander,1,2c7753540b961ef15ec36fc25715bd4469e91aa8,"Add Windows Server 2025 to test configurations (#111938)

* (WIP) Add Windows Server 2025 test runs

* Fixup names to match helix

* Remove missing image

* fix NegotiateStream_StreamToStream_Authentication_EmptyCredentials test

* Update eng/pipelines/libraries/helix-queues-setup.yml

Simplify selecting server.

Co-authored-by: Eric StJohn <ericstj@microsoft.com>

* Add back docker image.

* Remove excess matrix on InnerLoop

---------

Co-authored-by: wfurt <tweinfurt@yahoo.com>
Co-authored-by: Eric StJohn <ericstj@microsoft.com>",1,6,6,update debian version to 13 (issue_ref)
dotnet/runtime,22be4caa9ecd96a10a21bed53de43fca44f07da8,"Improve docs on building ILVerify (#111851)

* Improve docs on building ILVerify

* Update src/coreclr/tools/ILVerify/README.md

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-01-28 00:18:45+00:00,Andrii Kurdiumov,0,,,1,15,5,improve docs on building ilverify (issue_ref)* improve docs on building ilverify* update src/coreclr/tools/ilverify/readme.md
dotnet/runtime,f84475a531ff3eeaadbaf14396f62ea670a3add6,Switch OneLoc to main (#111872),2025-01-28 00:30:54+00:00,Carlos Sánchez López,0,,,1,2,3,switch oneloc to main (issue_ref)
dotnet/runtime,1da2ea4983bb5cc3d17a3806eebc435df4cd27dd,Bump main versioning to preview1 (#111880),2025-01-28 01:09:16+00:00,Carlos Sánchez López,0,,,1,1,1,bump main versioning to preview1 (issue_ref)
dotnet/runtime,ac6152838ebdcb7ca5765b908a4e15956d0e0f91,"Avoid generic virtual dispatch for frozen collections alternate lookup (#108732)

* Avoid generic virtual dispatch for frozen collections alternate lookup

* Various stylistic changes addressing PR feedback

* Tidy up some more xmldocs

---------

Co-authored-by: Stephen Toub <stoub@microsoft.com>",2025-01-28 06:09:18+00:00,Andrew J Said,1,4d109dafe620c5f19bfdc6f1951897aab8562d05,"Fix typo from `unit` to `uint` (#121884)

Fix typo from `unit` to `uint` in comment.",36,458,96,avoid generic virtual dispatch for frozen collections alternate lookup (issue_ref)* avoid generic virtual dispatch for frozen collections alternate lookup* various stylistic changes addressing pr feedback* tidy up some more xmldocs---------
dotnet/runtime,ca8698df4d3446460ce5c837dcca53069fbec9ee,Bump main to preview2 (#111882),2025-01-28 06:13:17+00:00,Carlos Sánchez López,0,,,1,1,1,bump main to preview2 (issue_ref)
dotnet/runtime,67669fdfd1d32498c3cd3feccbf9a0a669635195,"Localized file check-in by OneLocBuild Task: Build definition ID 679: Build ID 2629821 (#111884)

* Localized file check-in by OneLocBuild Task: Build definition ID 679: Build ID 2629686

* Localized file check-in by OneLocBuild Task: Build definition ID 679: Build ID 2629686",2025-01-28 09:03:31+00:00,dotnet bot,0,,,65,701,701,localized file check-in by onelocbuild task: build definition id 679: build id 2629821 (issue_ref)* localized file check-in by onelocbuild task: build definition id 679: build id 2629686* localized file check-in by onelocbuild task: build definition id 679: build id 2629686
dotnet/runtime,2eb6459f1df21ccc58af3d6151ebe5c5ad23e26a,[browser] reduce msbuild memory footprint (#111751),2025-01-28 09:39:45+00:00,Pavel Savara,1,3ee4c4141d45765c18eb32680a77a617f7f57f17,"Removing Entry2MethodDesc as it is unnecessary (#111756)

It appears that the pathways that Entry2MethodDesc has for virtual resolution are unnecessary. Testing has shown that everything seems to work without this logic, and removing excess baggage is always good, and a bit less code should run a bit faster. As a bonus, this simplifies the logic around adding support for cached interface dispatch in CoreCLR.

Also, fix the crossgen2 test legs, as they are currently broken due to issues with the now NativeAOT'd crossgen2 binary.",17,91,33,[browser] reduce msbuild memory footprint (issue_ref)
dotnet/runtime,10f0bbf03ccc0f560f315ce13d5918ef8452ee6f,new trimmer feature System.TimeZoneInfo.Invariant (#111215),2025-01-28 09:41:45+00:00,Pavel Savara,0,,,20,1084,690,new trimmer feature system.timezoneinfo.invariant (issue_ref)
dotnet/runtime,1573f4c7e8ad27a93a52973b6d5e342632e3d554,"[main] Update dependencies from dotnet/roslyn (#111691)

* Update dependencies from https://github.com/dotnet/roslyn build 20250121.6

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-3.25057.3 -> To Version 4.13.0-3.25071.6

* Update dependencies from https://github.com/dotnet/roslyn build 20250122.7

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-3.25057.3 -> To Version 4.13.0-3.25072.7

* Update dependencies from https://github.com/dotnet/roslyn build 20250122.11

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-3.25057.3 -> To Version 4.13.0-3.25072.11

* Update dependencies from https://github.com/dotnet/roslyn build 20250124.9

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-3.25057.3 -> To Version 4.13.0-3.25074.9

* Update dependencies from https://github.com/dotnet/roslyn build 20250124.10

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-3.25057.3 -> To Version 4.13.0-3.25074.10

* Update dependencies from https://github.com/dotnet/roslyn build 20250126.8

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-3.25057.3 -> To Version 4.13.0-3.25076.8

* Update dependencies from https://github.com/dotnet/roslyn build 20250126.11

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-3.25057.3 -> To Version 4.14.0-1.25076.11

* Update dependencies from https://github.com/dotnet/roslyn build 20250127.5

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.13.0-3.25057.3 -> To Version 4.14.0-1.25077.5

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-01-28 12:01:23+00:00,dotnet-maestro[bot],1,7afd807da79b99c2d1b4b2e03b5e147836178fe2,"Combined dependency update (#111852)

* Update dependencies from https://github.com/dotnet/arcade build 20250111.1

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.25058.4 -> To Version 10.0.0-beta.25061.1

* Update dependencies from https://github.com/dotnet/hotreload-utils build 20250107.4

Microsoft.DotNet.HotReload.Utils.Generator.BuildTool
 From Version 10.0.0-alpha.0.24627.1 -> To Version 10.0.0-alpha.0.25057.4

* Update dependencies from https://github.com/dotnet/cecil build 20250106.4

Microsoft.SourceBuild.Intermediate.cecil , Microsoft.DotNet.Cecil
 From Version 0.11.5-alpha.24627.1 -> To Version 0.11.5-alpha.25056.4

* Update dependencies from https://github.com/dotnet/sdk build 20250112.16

Microsoft.DotNet.ApiCompat.Task
 From Version 10.0.100-alpha.1.24622.2 -> To Version 10.0.100-alpha.1.25062.16

* Update dependencies from https://github.com/dotnet/icu build 20250113.1

Microsoft.NETCore.Runtime.ICU.Transport
 From Version 10.0.0-alpha.1.24627.1 -> To Version 10.0.0-alpha.1.25063.1

* Update dependencies from https://github.com/dotnet/runtime-assets build 20250113.1

Microsoft.DotNet.CilStrip.Sources , Microsoft.NET.HostModel.TestData , System.ComponentModel.TypeConverter.TestData , System.Data.Common.TestData , System.Drawing.Common.TestData , System.Formats.Tar.TestData , System.IO.Compression.TestData , System.IO.Packaging.TestData , System.Net.TestData , System.Private.Runtime.UnicodeData , System.Runtime.Numerics.TestData , System.Runtime.TimeZoneData , System.Security.Cryptography.X509Certificates.TestData , System.Text.RegularExpressions.TestData , System.Windows.Extensions.TestData
 From Version 10.0.0-beta.25060.2 -> To Version 10.0.0-beta.25063.1

* Update dependencies from https://github.com/dotnet/arcade build 20250117.3

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.25058.4 -> To Version 10.0.0-beta.25067.3

* Update dependencies from https://github.com/dotnet/hotreload-utils build 20250113.1

Microsoft.DotNet.HotReload.Utils.Generator.BuildTool
 From Version 10.0.0-alpha.0.24627.1 -> To Version 10.0.0-alpha.0.25063.1

* Update dependencies from https://github.com/dotnet/runtime build 20250118.1

Microsoft.SourceBuild.Intermediate.runtime.linux-x64 , Microsoft.NET.Sdk.IL , Microsoft.NETCore.App.Runtime.win-x64 , Microsoft.NETCore.ILAsm , runtime.native.System.IO.Ports , System.Reflection.Metadata , System.Reflection.MetadataLoadContext , System.Text.Json
 From Version 10.0.0-alpha.1.25057.24 -> To Version 10.0.0-alpha.1.25068.1

* Update dependencies from https://github.com/dotnet/icu build 20250119.1

Microsoft.NETCore.Runtime.ICU.Transport
 From Version 10.0.0-alpha.1.24627.1 -> To Version 10.0.0-alpha.1.25069.1

* Update dependencies from https://github.com/dotnet/runtime-assets build 20250120.2

Microsoft.DotNet.CilStrip.Sources , Microsoft.NET.HostModel.TestData , System.ComponentModel.TypeConverter.TestData , System.Data.Common.TestData , System.Drawing.Common.TestData , System.Formats.Tar.TestData , System.IO.Compression.TestData , System.IO.Packaging.TestData , System.Net.TestData , System.Private.Runtime.UnicodeData , System.Runtime.Numerics.TestData , System.Runtime.TimeZoneData , System.Security.Cryptography.X509Certificates.TestData , System.Text.RegularExpressions.TestData , System.Windows.Extensions.TestData
 From Version 10.0.0-beta.25060.2 -> To Version 10.0.0-beta.25070.2

* Update dependencies from https://github.com/dotnet/sdk build 20250120.10

Microsoft.DotNet.ApiCompat.Task
 From Version 10.0.100-alpha.1.24622.2 -> To Version 10.0.100-alpha.1.25070.10

* Update dependencies from https://github.com/dotnet/command-line-api build 20250121.2

Microsoft.SourceBuild.Intermediate.command-line-api , System.CommandLine
 From Version 0.1.552801 -> To Version 0.1.607102

* Update dependencies from https://github.com/dotnet/command-line-api build 20250122.1

Microsoft.SourceBuild.Intermediate.command-line-api , System.CommandLine
 From Version 0.1.552801 -> To Version 0.1.607201

* Revert System.CommandLine update

* Update dependencies from https://github.com/dotnet/sdk build 20250123.10

Microsoft.DotNet.ApiCompat.Task
 From Version 10.0.100-alpha.1.24622.2 -> To Version 10.0.100-alpha.1.25073.10

* Remove dependency on sdk SB intermediate

* allow prebuilt for Microsoft.DotNet.ApiCompat.Task

* Update dependencies from https://github.com/dotnet/icu build 20250124.1

Microsoft.NETCore.Runtime.ICU.Transport
 From Version 10.0.0-alpha.1.24627.1 -> To Version 10.0.0-preview.2.25074.1

* Update dependencies from https://github.com/dotnet/hotreload-utils build 20250120.1

Microsoft.DotNet.HotReload.Utils.Generator.BuildTool
 From Version 10.0.0-alpha.0.24627.1 -> To Version 10.0.0-alpha.0.25070.1

* Update dependencies from https://github.com/dotnet/arcade build 20250126.1

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.25058.4 -> To Version 10.0.0-beta.25076.1

* Update dependencies from https://github.com/dotnet/cecil build 20250119.2

Microsoft.SourceBuild.Intermediate.cecil , Microsoft.DotNet.Cecil
 From Version 0.11.5-alpha.24627.1 -> To Version 0.11.5-alpha.25069.2

* Update dependencies from https://github.com/dotnet/source-build-externals build 20250121.1

Microsoft.SourceBuild.Intermediate.source-build-externals
 From Version 10.0.562301 -> To Version 10.0.607101

* Update SDK to 10.0.100-alpha.1.25077.2 (to fix a deps.json regression)

* Update Microsoft.DotNet.ApiCompat.Task version

* Update aspnetcore versions

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Larry Ewing <lewing@microsoft.com>
Co-authored-by: Viktor Hofer <viktor.hofer@microsoft.com>
Co-authored-by: Matt Thalman <mthalman@microsoft.com>
Co-authored-by: Alexander Köplinger <alex.koeplinger@outlook.com>",2,11,11,"[main] update dependencies from dotnet/roslyn (issue_ref)* update dependencies from build 20250121.6microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-3.25057.3 -> to version 4.13.0-3.25071.6* update dependencies from build 20250122.7microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-3.25057.3 -> to version 4.13.0-3.25072.7* update dependencies from build 20250122.11microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-3.25057.3 -> to version 4.13.0-3.25072.11* update dependencies from build 20250124.9microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-3.25057.3 -> to version 4.13.0-3.25074.9* update dependencies from build 20250124.10microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-3.25057.3 -> to version 4.13.0-3.25074.10* update dependencies from build 20250126.8microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-3.25057.3 -> to version 4.13.0-3.25076.8* update dependencies from build 20250126.11microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-3.25057.3 -> to version 4.14.0-1.25076.11* update dependencies from build 20250127.5microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.13.0-3.25057.3 -> to version 4.14.0-1.25077.5---------"
dotnet/runtime,54f41ac4916077f8c9bf55eb502f04d3388af87a,"Drop RequiresProcessIsolation on mcc tests (#111887)

As per #111406, `RequiresProcessIsolation` is not needed just because of `CMakeProjectReference`. The tests also have `CLRTestTargetUnsupported`, but all of them do, so I just moved it to the merged runner.

(Note, mcc_i00 didn't have CLRTestTargetUnsupported to make it Windows only, but instead we had it in issues.targets as `needs triage`, so deleting that.)

Before (CoreCLR checked, Microsoft DevBox):

```
Time [secs] | Total | Passed | Failed | Skipped | Assembly Execution Summary
============================================================================
     74.311 |    56 |     56 |      0 |       0 | JIT.jit64.jit64_2
```

After:

```
Time [secs] | Total | Passed | Failed | Skipped | Assembly Execution Summary
============================================================================
      2.088 |    56 |     56 |      0 |       0 | JIT.jit64.jit64_2
```",2025-01-28 12:31:30+00:00,Michal Strehovský,0,,,58,4,334,"drop requiresprocessisolation on mcc tests (issue_ref)as per issue_ref, is not needed just because of . the tests also have , but all of them do, so i just moved it to the merged runner.(note, mcc_i00 didn't have clrtesttargetunsupported to make it windows only, but instead we had it in issues.targets as , so deleting that.)before (coreclr checked, microsoft devbox):after:"
dotnet/runtime,d20c35e05c16dd2ec9cddd4259738cc02228d425,"Handle unicode in absolute URI path for combine. (#111710)

* Handle unicode in absolute URI path for combine.
* Adding debug assert

Co-authored-by: Miha Zupan <mihazupan.zupan1@gmail.com>",2025-01-28 12:52:58+00:00,Roman Konecny,1,347ac709c1a79532f88ba7dc13a3618508cc51af,"Fix URI edge case issue (#116789)

* Fix URI edge case issue

* Fix tests

* Fix spelling in comment

* Add missing using

---------

Co-authored-by: Miha Zupan <mihazupan.zupan1@gmail.com>",2,50,18,handle unicode in absolute uri path for combine. (issue_ref)* handle unicode in absolute uri path for combine.* adding debug assert
dotnet/runtime,f1901a00dfcfbcf0a4f8b6aa7459fec30846d1ab,"Cross Product for Vector2 and Vector4 (#111265)

* System.Numerics Cross Product for Vector2 and Vector4

* Optimize vector operations and update tests

Refactor test methods in `Vector2Tests.cs` and `Vector4Tests.cs` for clarity and correctness.
Enhance the `Cross` methods in `Vector2.cs` and `Vector4.cs` using SIMD techniques for improved performance.

* Refactor Cross method in Vector2.cs for simplicity

Reverted the Cross method to a simpler implementation by removing the use of Vector64 for vector math. The method now directly computes the cross product using the formula `value1.X * value2.Y - value1.Y * value2.X`, prioritizing clarity and performance on xarch architectures.

* Update src/libraries/System.Private.CoreLib/src/System/Numerics/Vector4.cs

Co-authored-by: Huo Yaoyuan <huoyaoyuan@hotmail.com>

* Return [Intrinsic]

* Return New Line

* Optimize Cross methods in Vector2 and Vector3 using SIMD

Updated the `Cross` method in `Vector2.cs` to utilize SIMD operations with `Vector128`, enhancing performance through hardware acceleration.

The `Cross` method in `Vector3.cs` has been modified to use `AsVector128Unsafe()`, aligning with the performance improvements.

* Improve Cross method implementation in Vector4.cs

Refactor the `Cross` method to enhance performance by utilizing
`Vector128.MultiplyAddEstimate`.

* Refactor Cross method in Vector4.cs for clarity

Removed unnecessary assignment in the Cross method and streamlined the return statement. This change enhances code clarity and efficiency by eliminating redundancy.

* Optimize Cross product calculations in Vector2 and Vector3

Refactored the `Cross` method in `Vector2.cs` to enhance performance by using vector shuffling and subtraction with SIMD operations. Updated the `Cross` method in `Vector3.cs` to correct shuffling indices for accurate component multiplication, also leveraging SIMD for improved efficiency.

---------

Co-authored-by: Huo Yaoyuan <huoyaoyuan@hotmail.com>",2025-01-28 16:42:08+00:00,Alexander Radchenko,0,,,6,136,5,"cross product for vector2 and vector4 (issue_ref)* system.numerics cross product for vector2 and vector4* optimize vector operations and update testsrefactor test methods in and for clarity and correctness.enhance the methods in and using simd techniques for improved performance.* refactor cross method in vector2.cs for simplicityreverted the cross method to a simpler implementation by removing the use of vector64 for vector math. the method now directly computes the cross product using the formula , prioritizing clarity and performance on xarch architectures.* update src/libraries/system.private.corelib/src/system/numerics/vector4.cs"
dotnet/runtime,3ee4c4141d45765c18eb32680a77a617f7f57f17,"Removing Entry2MethodDesc as it is unnecessary (#111756)

It appears that the pathways that Entry2MethodDesc has for virtual resolution are unnecessary. Testing has shown that everything seems to work without this logic, and removing excess baggage is always good, and a bit less code should run a bit faster. As a bonus, this simplifies the logic around adding support for cached interface dispatch in CoreCLR.

Also, fix the crossgen2 test legs, as they are currently broken due to issues with the now NativeAOT'd crossgen2 binary.",2025-01-28 18:43:33+00:00,David Wrighton,1,d551abb68de9ed473a505a84fd60244ba11bca74,"Invoke crossgen exe when building R2RTest (#111881)

Given the way crossgen is built in-tree, we no longer have crossgen.dll, but rather the actual crossgen executable.

Should fix https://github.com/dotnet/runtime/issues/111878",6,7,40,"removing entry2methoddesc as it is unnecessary (issue_ref)it appears that the pathways that entry2methoddesc has for virtual resolution are unnecessary. testing has shown that everything seems to work without this logic, and removing excess baggage is always good, and a bit less code should run a bit faster. as a bonus, this simplifies the logic around adding support for cached interface dispatch in coreclr.also, fix the crossgen2 test legs, as they are currently broken due to issues with the now nativeaot'd crossgen2 binary."
dotnet/runtime,9b24fb60a19f62620ca1fc5e4eb2e3ae0b3b086d,Sign the DAC and DBI during the build process instead of in separate steps (#111416),2025-01-28 19:19:39+00:00,Jeremy Koritzinsky,0,,,21,271,237,sign the dac and dbi during the build process instead of in separate steps (issue_ref)
dotnet/runtime,473cad84109575a5f059f4ac6cea6a4a8a4d341c,[SRM] Refactor reading from streams. (#111323),2025-01-28 20:22:53+00:00,Theodore Tsirpanis,0,,,16,121,280,[srm] refactor reading from streams. (issue_ref)
dotnet/runtime,4b98d321ef5a2b8211c28727d5b2521a20417549,"Add FrozenDictionary specialization for integers / enums (#111886)

* Add FrozenDictionary specialization for integers / enums

This adds a specialized dictionary implementation for when TKey is an integer (some integer types) or an enum backed by an integer. It employs an array that can be indexed into directly, handling both the cases where the values are contiguous from zero and where they're either non-contiguous or not from zero. A density threshold is used to decide when to fallback to another implementation rather than expending more memory on unused array slots.

* Address PR feedback",2025-01-28 20:33:05+00:00,Stephen Toub,0,,,6,288,3,"add frozendictionary specialization for integers / enums (issue_ref)* add frozendictionary specialization for integers / enumsthis adds a specialized dictionary implementation for when tkey is an integer (some integer types) or an enum backed by an integer. it employs an array that can be indexed into directly, handling both the cases where the values are contiguous from zero and where they're either non-contiguous or not from zero. a density threshold is used to decide when to fallback to another implementation rather than expending more memory on unused array slots.* address pr feedback"
dotnet/runtime,cdb88b2c0051de63a09de791a1b958225dd11cec,"Fix linux-x86 build (#111861)

* Enable FEATURE_SIMD on linux-x86

* Disable AVX+ support on linux-x86 (lacks support of XState in thread context saving)

* Enable CrossGen of S.P.CoreLib on CI for linux-x86

* Move the AVX workaround to xmmYmmStateSupport

* Fix loop condition overflow and offsets in StubLinker

* Fix swapped parameters for .space in JIT_WriteBarrier* helper

* Fix comment

* Workaround: Treat SIMD variables as unaligned

* Enable intrinsics in CoreLib

* Fix alignment in linux-x86 assembly

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-01-28 21:02:36+00:00,Filip Navara,1,219622a23cef3dde6a08378ac9829cb2b242cead,"[PERF] Move performance testing YAML from dotnet/runtime to dotnet/performance (#111454)

* Move runtime yaml to performance

* Fix yaml path

* Fix extends template parameters

* Try to fix invalid stages

* Try defining resource in root template

* Change default branch during testing

* Use additionalJobIdentifier

* Use correct checkout paths

* Ensure isScenario is passed in for ios_scenarios

* Remove perfBranch now that we can set branch in Run pipeline dialog

* Set default ref during testing

* Move all job listings to performance repository

* Fix template conditions

* Fix perf_slow pipeline

* Use new paths for yamls in performance repo

* Move all remaining perf templates to performance directory

* Fix missing parameters

* Update all remaining references from old paths to new paths. Add comments to pipelines which will be deleted in next PR.

* Remove clr subsets from mono build jobs

* Fix capitalization of true

* Change public CI job to point to fork during testing

* Revert removing clr subsets from mono builds. Reset repository resources to correct values.",7,24,12,fix linux-x86 build (issue_ref)* enable feature_simd on linux-x86* disable avx+ support on linux-x86 (lacks support of xstate in thread context saving)* enable crossgen of s.p.corelib on ci for linux-x86* move the avx workaround to xmmymmstatesupport* fix loop condition overflow and offsets in stublinker* fix swapped parameters for .space in jit_writebarrier* helper* fix comment* workaround: treat simd variables as unaligned* enable intrinsics in corelib* fix alignment in linux-x86 assembly---------
dotnet/runtime,21ab780ed4aad5d3f37b92c9015f0a8051dd4a69,"Remove unsafe `bool` casts (#111024)


Co-authored-by: Egor Bogatov <egorbo@gmail.com>",2025-01-28 23:31:49+00:00,xtqqczze,0,,,2,8,10,remove unsafe casts (issue_ref)
dotnet/runtime,a9d67ec265ed4078265d70d155d06316acadf6fe,"JIT: Enable inlining for late devirtualization (#110827)

* Enable inlining for late devirt

* Pass correct IL offset

* Only creates RET_EXPR if the node is not top-level or not returning void

* Do not try inlining if BBF_INTERNAL is set

* Ensure the type matches

* Set inliner context correctly

* Address review feedbacks

* Fix non inline candidate marking

* Handle calls with retbuf

* Handle BBF_INTERNAL

* Get real type from local

* Always set IL offset

* Add comments

* Oops

* Use gtReturnType instead

* Remove unused ilOffset

* Use genActualType

* Remove unnecessary spillTemp

* Handle nested call correctly

* Don't promote compCurStmt

* Remove unused ilOffset

* Handle BBF_INTERNAL

* Use correct return type

* Use bbInCatchHandlerBBRange and bbInFilterBBRange

* Cleanup fncRetType

* Add a runtime check to prevent accidental execution order change

* Format jit

* Revert some changes

* Remove unused local

* Check whether a call can be spilled without side effect

* Get rid of BAD_VAR_NUM

* Add comments for CanSpillCallWithoutSideEffect

* Use ancestors to estimate whether a call can be spilled or not

* Reset m_ancestors before walking

* Nit

* Fix assertion

* Limit to GT_STORE_LCL_VAR only

* Oops

* Inline the check

* Remove leftovers

* Hoist the check

* Make sure the store parent is the statement root

Co-authored-by: Andy Ayers <andya@microsoft.com>

* Format JIT

* Check side effects before trying inlining

* Fix

* Nit

* Make lvHasLdAddrOp check optional

* Rename to early

* Split effects if necessary

* Use gtSplitTree

* Teach gtSplitTree to support early use

* Cleanup

* ClearInlineInfo is not needed

---------

Co-authored-by: Andy Ayers <andya@microsoft.com>",2025-01-29 00:02:08+00:00,Steve,1,f652094f081925774826a5be8147b5cdea3c386f,"[JIT] Add legacy extended EVEX encoding and EVEX.ND/NF feature to x64 emitter backend (#108796)

* Ruihan: POC with REX2

Update comments.

Merge the REX2 changes into the original legacy emit path

bug fix: Set REX2.W with correct mask code.

register encoding and prefix emitting logics.

Add REX2 prefix emit logic

bug fixes

Add Stress mode for REX2 encoding and some bug fixes

resolve comments:
1. add assertion check for UD opcodes.
2. add checks for EGPRs.

Add REX2 to emitOutputAM, and let LEA to be REX2 compatible.

Add REX2.X encoding for SIB byte

But fixes: add REX2 prefix on the path in RI where MOV is specially handled.

Enable REX2 encoding for `movups`

fixed bugs in REX2 prefix emitting logic when working with map 1 instructions, and enabled REX2 for POPCNT

legacy map index-er

bug fixes

some clean-up

Adding initial APX unit testing path.

Adding a coredistools dll that has LLVM APX disasm capability.

It must be coppied into a CORE_ROOT manually.

clean up work for REX2

narrow the REX2 scope to `sub` only

some clean up based on the comments.

bug fix

resolve comment

* resolve comments

* refactor register encoding for REX2

* merge REX2 path to legacy path

* Enable REX2 in more instructions.

* Avoid repeatedly estimate the size of REX2 prefix

* Enable REX2 encoding on RI and SV path
 - SV path is mostly for debugging purposes

Added encoding unit tests for instructions with immediates

* Add rex2 support to rotate and shift.

* CR session.

* Testing infra updates: assert REX2 is enabled.
Code refactoring: AddX86PrefixIfNeeded.

* revert rcl_N and rcr_N, tp and latency data for these instructions is missing in JIT, may indicate these instructions are not being used in JIT, drop them for now.

* partially enable REX2 on emitOutputAM, case covered: R_AR and AR_R.

* Adding unit tests.

* push, pop, inc, dec, neg, not, xadd, shld, shrd, cmpxchg, setcc, bswap.

* bug fix for bswap

* bt

* xchg, idiv

* Make sure add REX2 prefix if register encoding for EGPRs are being called before adding any prefix.

* Ensure code size is correctly computed in R_R_I path.

* clean up

* Change all AddSimdPrefix to AddX86Prefix
Refactor REX2 encoding stress logics.

* div, mulEAX

* filter out test from REX2 encoding when using ACC form.
(this will have side effect that the estimated code will go up and mismatch with actual code size.)

* Make sure REX prefix will not be added when emitting with REX2.

* resolve comments.

* make sure the APX debug knob is only available under debug build.

* clean up some out-dated code.

* enable movsxd

* Enable ""Call""

* Enable ""JMP""

* resolve merge errors

* formatting

* remote coredistools.dll for internal tests only

* bug fix

* SUB reg, reg, reg

* enable NDD on genCodeForBinary

* consolidate TakesLegacyPromotedEvexPrefix logics.

* ensure register encoding is correct under legacy-promoted-evex encoding.

* Make sure the overflow check is correctly emitted.

* simplify the compiler setup logics.

* emitInsNddBinary

* make sure REX will not be added when EVEX presents.

* resolve comment and clean up.

* enable more NDD instructions.

* bug fixes

* enable imul

* add emitter unit tests, and fix encoding error for CMOVcc

* bug fixes:
1. make sure RWR_RRD_SHF has correct register update mode
2. make sure shift instructions will get correct opcode in RR path.

* refactor emitInsBinary

* clean up

* clean up and refactor some code

* make sure the code size estimation is correct for some apx promoted instructions.

* add tuning knob to EVEX.ND feature.

* flip the Evex.nd knob.

* put NDD control knob to the correct place.

* resolve merge errors

* Make sure APX related knobs are defined properly across platforms

* Add Evex.nf to instrDesc

* {nf} add reg, reg

* Enable EVEX.NF in more instructions

* more instructions

* comments.

* lzcnt, tzcnt, popcnt

* Exclude ACC form from EVEX promotion.

* BMI instructions.

* bug fixes

* Tweak the code size calculation to make sure REX2 and APX-EVEX are properly handled.

* bug fixes for stress mode

* Add idEvexNoPromotion to emitter to exclude the APX-EVEX promotion from LOCK prefixd instructions.

* resolve merge error

* fix merge error

* Revert ""Add idEvexNoPromotion to emitter to exclude the APX-EVEX promotion from LOCK prefixd instructions.""

This reverts commit 1be4b12f115f032e3fa878fd2d3f7619e6c994c6.

* bug fix

* introduce _no_evex suffix for some instructions for cases when LOCK will be prefixed.

* resolve merge comflict

* fix merge error.

* fix comments and some checks.

* formatting

* remove unneeded env var.

* Make sure the BMI instruction is properly hidden behind APX stress knob and will not be EVEX-encoded when JitStressEvexEncoding is set.

* resolve merge error.

* Resolve comments.

* formatting.

* Add rcr/rcl emitter unit tests for extended EVEX.

* Resolve merge error.

* formatting

* resolve comments

* formatting

* use the right size for neg and not code gen.",4,102,20,jit: enable inlining for late devirtualization (issue_ref)* enable inlining for late devirt* pass correct il offset* only creates ret_expr if the node is not top-level or not returning void* do not try inlining if bbf_internal is set* ensure the type matches* set inliner context correctly* address review feedbacks* fix non inline candidate marking* handle calls with retbuf* handle bbf_internal* get real type from local* always set il offset* add comments* oops* use gtreturntype instead* remove unused iloffset* use genactualtype* remove unnecessary spilltemp* handle nested call correctly* don't promote compcurstmt* remove unused iloffset* handle bbf_internal* use correct return type* use bbincatchhandlerbbrange and bbinfilterbbrange* cleanup fncrettype* add a runtime check to prevent accidental execution order change* format jit* revert some changes* remove unused local* check whether a call can be spilled without side effect* get rid of bad_var_num* add comments for canspillcallwithoutsideeffect* use ancestors to estimate whether a call can be spilled or not* reset m_ancestors before walking* nit* fix assertion* limit to gt_store_lcl_var only* oops* inline the check* remove leftovers* hoist the check* make sure the store parent is the statement root
dotnet/runtime,d9b75154ad360154b863ee01b72fbef94de261b0,Make cdac APIs public but experimental (#111180),2025-01-29 03:52:02+00:00,Jeremy Koritzinsky,1,b0e9b734ef874a26cedd4045816dd973f042a1b8,"[cDAC] fix condition to only link in native unwinders on Windows x64 (#112999)

Unblocks official build as it was failing on win-arm64.",58,191,179,make cdac apis public but experimental (issue_ref)
dotnet/runtime,e66d834512c4176682cec496165f5101be9e0727,"Implement 'ConditionalWeakTable<TKey,TValue>.GetOrAdd' APIs (#111204)

* Add '[EditorBrowsable(Never)]' to APIs

* Add 'GetOrAdd' API

* Add 'GetOrAdd' API

* Add 'GetOrAdd' API

* Update ref assembly

* Add unit tests

* Add XML docs for new APIs

* Remove 'Atomically' to clarify docs

* Convert uses to new APIs

* Remove leftover unused method

* Switch 'GetOrCreateComInterfaceForObject' to local type

* Apply suggestions from code review

* Lower threshold time for new tests

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-01-29 11:20:38+00:00,Sergio Pedri,0,,,10,344,49,"implement 'conditionalweaktable<tkey,tvalue>.getoradd' apis (issue_ref)* add '[editorbrowsable(never)]' to apis* add 'getoradd' api* add 'getoradd' api* add 'getoradd' api* update ref assembly* add unit tests* add xml docs for new apis* remove 'atomically' to clarify docs* convert uses to new apis* remove leftover unused method* switch 'getorcreatecominterfaceforobject' to local type* apply suggestions from code review* lower threshold time for new tests---------"
dotnet/runtime,bcc0e894256b22736be3ffac876c7f21cffe070a,"arm64: Add tests for add(s), and(s), sub(s), cmp, cmn, eor, neg & orr (#111796)

* arm64: Add tests for add(s), and(s), sub(s), cmp, cmn, eor, neg & orr

* Add swap tests with operands in opposite order",2025-01-29 15:18:24+00:00,Jonathan Davies,0,,,16,1345,0,"arm64: add tests for add(s), and(s), sub(s), cmp, cmn, eor, neg & orr (issue_ref)* arm64: add tests for add(s), and(s), sub(s), cmp, cmn, eor, neg & orr* add swap tests with operands in opposite order"
dotnet/runtime,3e32e51532ac941cb0a1dd04dcb78e2278ca74a1,"arm64: Add support for bitwise NOT (#111904)

* Contributes to #68028",2025-01-29 15:55:40+00:00,Jonathan Davies,1,cf89ec4171a58d783850fec0d77a673b9e784551," JIT: Optimize bit-wise AND with a constant mask in combination with a left shift in a compare (#111979)

This optmizes the generated code when having a pattern  like '(SomeConstant & (1 << value)) != 0' which was previously only optimized for '(variable & (1 << value)) != 0'.

Fix #111554",6,150,3,arm64: add support for bitwise not (issue_ref)* contributes to issue_ref
dotnet/runtime,c5921ed898702e8628af0ce7b1943a063fd76cd1,"JIT: Remove OSR quirk in `fgOptimizeUncondBranchToSimpleCond` (#111936)

Looks like a relic from when loop recognition was lexical.",2025-01-29 16:09:29+00:00,Aman Khalid,0,,,1,0,21,jit: remove osr quirk in (issue_ref)looks like a relic from when loop recognition was lexical.
dotnet/runtime,d410898949f19681587bb308e6c50190350f3d81,"JIT: Skip `fgComputeMissingBlockWeights` when we have profile data (#111873)

Part of #107749. Follow-up to #111764. fgComputeMissingBlockWeights doesn't modify anything when we have profile data, and fgCalledCount can be derived from the entry block's weight quite simply.",2025-01-29 16:10:41+00:00,Aman Khalid,1,55e9ab59bdd73abba398687fab994a38fa3cb28b,"JIT: fix case where implied subrange assertions can get lost in morph (#112020)

If a method used short bit vectors during morph, modifications to the
assertion set were being made to a copy, not to the original.

Also, restrict implied boolean subrange assertions to integer vars.",3,17,107,"jit: skip when we have profile data (issue_ref)part of issue_ref. follow-up to issue_ref. fgcomputemissingblockweights doesn't modify anything when we have profile data, and fgcalledcount can be derived from the entry block's weight quite simply."
dotnet/runtime,f71255e9f563cde3214f746eef0285a934803c18,"[android] Internal Android sample build improvements and CoreCLR support (#111545)

* Move default AOT properties to a common props file

* Use AndroidBuild.targets in AndroidSampleApp

* Adding a comment on usage of UseAotDataFile opt

* Relocate MonoAOTCompiler.props and ship it as part of LibraryBuilder.nupkg

* Add functional test for Android library mode

* We need the comment as we are referring to OS versions in the AOT compiler props

* Disable the library mode tests

* Do not force UseMonoRuntime in AndroidBuild.props

* Avoid using CoreCLR properties when building mono runtime tests

* Revert ""Avoid using CoreCLR properties when building mono runtime tests""

This reverts commit 156cc0e8bdc200fa6a9b92e0c5c202975cc3143b.

* workaround for runtime tests which imports coreCLR Directory.Build.props and forces UseMonoRuntime=false

* Adapt build integration targets to work with CoreCLR

* Use RuntimeHeaders everywhere

* Link issues for TODOs",2025-01-29 16:33:33+00:00,Ivan Povazan,0,,,16,136,194,"[android] internal android sample build improvements and coreclr support (issue_ref)* move default aot properties to a common props file* use androidbuild.targets in androidsampleapp* adding a comment on usage of useaotdatafile opt* relocate monoaotcompiler.props and ship it as part of librarybuilder.nupkg* add functional test for android library mode* we need the comment as we are referring to os versions in the aot compiler props* disable the library mode tests* do not force usemonoruntime in androidbuild.props* avoid using coreclr properties when building mono runtime tests* revert ""avoid using coreclr properties when building mono runtime tests""this reverts commit 156cc0e8bdc200fa6a9b92e0c5c202975cc3143b.* workaround for runtime tests which imports coreclr directory.build.props and forces usemonoruntime=false* adapt build integration targets to work with coreclr* use runtimeheaders everywhere* link issues for todos"
dotnet/runtime,6b47b537be038ecad0e82c4a478cecc0d52bdcdd,Rewrite how we swap assemblies out as part of NativeAOT to specifically check that they're coming from the runtime pack instead of checking file version numbers and using that as a heuristic for the same thing. (#111944),2025-01-29 18:41:56+00:00,Jeremy Koritzinsky,0,,,1,19,33,rewrite how we swap assemblies out as part of nativeaot to specifically check that they're coming from the runtime pack instead of checking file version numbers and using that as a heuristic for the same thing. (issue_ref)
dotnet/runtime,be91a3666f36167e698026fb2bb10abcbc807f68,"Avoid `Unsafe.As` for `Memory<T>` and `ReadOnlyMemory<T>` conversion (#111023)

* Use `Unsafe.BitCast`to cast `Memory<T>` and `ReadOnlyMemory<T>`

* remove use of `Unsafe`",2025-01-29 22:19:14+00:00,xtqqczze,0,,,3,5,11,avoid for and conversion (issue_ref)* use to cast and * remove use of
dotnet/runtime,7de730ad244e58626840e3617ca41349e5cf3720,Remove zlib dependencies from Docker containers (#111939),2025-01-29 22:22:10+00:00,Carlos Sánchez López,0,,,4,0,5,remove zlib dependencies from docker containers (issue_ref)
dotnet/runtime,f3d90b2f622691253225ddcd61b8ae8a087955ae,"Add remark to `ConditionalSelect` (#111945)

* Update Vector files

* Update Vector.cs

* Address Feedback",2025-01-30 00:05:17+00:00,Hamish Arblaster,0,,,6,8,0,add remark to (issue_ref)* update vector files* update vector.cs* address feedback
dotnet/runtime,adf123c23ee42262515c36562b09fa0b19959599,Replace OPTIMIZE_FOR_SIZE with feature switch (#111743),2025-01-30 08:36:04+00:00,Michal Strehovský,0,,,26,92,105,replace optimize_for_size with feature switch (issue_ref)
dotnet/runtime,c96be21a86ca9911f90a2f915a576d3959bc207e,Try changing the ICustomQueryInterface implementation to always return NotHandled instead of Failed to defer back to the ComWrappers impl. (#111978),2025-01-30 16:00:21+00:00,Jeremy Koritzinsky,0,,,1,1,1,try changing the icustomqueryinterface implementation to always return nothandled instead of failed to defer back to the comwrappers impl. (issue_ref)
dotnet/runtime,1497af6ab56195b376803e4d99ca9fab434b9acc,"Update dependencies from https://github.com/dotnet/arcade build 20250129.2 (#111996)

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.25076.1 -> To Version 10.0.0-beta.25079.2

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-01-30 16:04:43+00:00,dotnet-maestro[bot],0,,,3,61,61,"update dependencies from build 20250129.2 (issue_ref)microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.versiontools.tasks , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.25076.1 -> to version 10.0.0-beta.25079.2"
dotnet/runtime,99b373a86fcf33ede2dd7b572478ad9890547808,"[main] Update dependencies from dotnet/roslyn (#111946)

* Update dependencies from https://github.com/dotnet/roslyn build 20250128.5

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.14.0-1.25077.5 -> To Version 4.14.0-2.25078.5

* Update dependencies from https://github.com/dotnet/roslyn build 20250129.2

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.14.0-1.25077.5 -> To Version 4.14.0-2.25079.2

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-01-30 16:05:18+00:00,dotnet-maestro[bot],0,,,2,11,11,"[main] update dependencies from dotnet/roslyn (issue_ref)* update dependencies from build 20250128.5microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.14.0-1.25077.5 -> to version 4.14.0-2.25078.5* update dependencies from build 20250129.2microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.14.0-1.25077.5 -> to version 4.14.0-2.25079.2---------"
dotnet/runtime,1e21b131372c334d586f8d8504e71472a72422a7,"[mono][mini] Disable inlining if we encounter class initialization failure (#111754)

method_make_alwaysthrow_typeloadfailure replaces the entire method code with a throw of type load exception. This behaviour not only seem dubious, if it is triggered from inlining a method, that might never even get called, but it also does changes to the set of basic blocks that can lead to crashes later on during compilation.",2025-01-30 16:44:18+00:00,Vlad Brezae,0,,,1,2,0,"[mono][mini] disable inlining if we encounter class initialization failure (issue_ref)method_make_alwaysthrow_typeloadfailure replaces the entire method code with a throw of type load exception. this behaviour not only seem dubious, if it is triggered from inlining a method, that might never even get called, but it also does changes to the set of basic blocks that can lead to crashes later on during compilation."
dotnet/runtime,e3f359889e65f0209d5149f4251c2f4146070175,System.Speech: Use intellisense xml from dotnet-api-docs (#111983),2025-01-30 16:54:24+00:00,Carlos Sánchez López,0,,,1,1,0,system.speech: use intellisense xml from dotnet-api-docs (issue_ref)
dotnet/runtime,f652094f081925774826a5be8147b5cdea3c386f,"[JIT] Add legacy extended EVEX encoding and EVEX.ND/NF feature to x64 emitter backend (#108796)

* Ruihan: POC with REX2

Update comments.

Merge the REX2 changes into the original legacy emit path

bug fix: Set REX2.W with correct mask code.

register encoding and prefix emitting logics.

Add REX2 prefix emit logic

bug fixes

Add Stress mode for REX2 encoding and some bug fixes

resolve comments:
1. add assertion check for UD opcodes.
2. add checks for EGPRs.

Add REX2 to emitOutputAM, and let LEA to be REX2 compatible.

Add REX2.X encoding for SIB byte

But fixes: add REX2 prefix on the path in RI where MOV is specially handled.

Enable REX2 encoding for `movups`

fixed bugs in REX2 prefix emitting logic when working with map 1 instructions, and enabled REX2 for POPCNT

legacy map index-er

bug fixes

some clean-up

Adding initial APX unit testing path.

Adding a coredistools dll that has LLVM APX disasm capability.

It must be coppied into a CORE_ROOT manually.

clean up work for REX2

narrow the REX2 scope to `sub` only

some clean up based on the comments.

bug fix

resolve comment

* resolve comments

* refactor register encoding for REX2

* merge REX2 path to legacy path

* Enable REX2 in more instructions.

* Avoid repeatedly estimate the size of REX2 prefix

* Enable REX2 encoding on RI and SV path
 - SV path is mostly for debugging purposes

Added encoding unit tests for instructions with immediates

* Add rex2 support to rotate and shift.

* CR session.

* Testing infra updates: assert REX2 is enabled.
Code refactoring: AddX86PrefixIfNeeded.

* revert rcl_N and rcr_N, tp and latency data for these instructions is missing in JIT, may indicate these instructions are not being used in JIT, drop them for now.

* partially enable REX2 on emitOutputAM, case covered: R_AR and AR_R.

* Adding unit tests.

* push, pop, inc, dec, neg, not, xadd, shld, shrd, cmpxchg, setcc, bswap.

* bug fix for bswap

* bt

* xchg, idiv

* Make sure add REX2 prefix if register encoding for EGPRs are being called before adding any prefix.

* Ensure code size is correctly computed in R_R_I path.

* clean up

* Change all AddSimdPrefix to AddX86Prefix
Refactor REX2 encoding stress logics.

* div, mulEAX

* filter out test from REX2 encoding when using ACC form.
(this will have side effect that the estimated code will go up and mismatch with actual code size.)

* Make sure REX prefix will not be added when emitting with REX2.

* resolve comments.

* make sure the APX debug knob is only available under debug build.

* clean up some out-dated code.

* enable movsxd

* Enable ""Call""

* Enable ""JMP""

* resolve merge errors

* formatting

* remote coredistools.dll for internal tests only

* bug fix

* SUB reg, reg, reg

* enable NDD on genCodeForBinary

* consolidate TakesLegacyPromotedEvexPrefix logics.

* ensure register encoding is correct under legacy-promoted-evex encoding.

* Make sure the overflow check is correctly emitted.

* simplify the compiler setup logics.

* emitInsNddBinary

* make sure REX will not be added when EVEX presents.

* resolve comment and clean up.

* enable more NDD instructions.

* bug fixes

* enable imul

* add emitter unit tests, and fix encoding error for CMOVcc

* bug fixes:
1. make sure RWR_RRD_SHF has correct register update mode
2. make sure shift instructions will get correct opcode in RR path.

* refactor emitInsBinary

* clean up

* clean up and refactor some code

* make sure the code size estimation is correct for some apx promoted instructions.

* add tuning knob to EVEX.ND feature.

* flip the Evex.nd knob.

* put NDD control knob to the correct place.

* resolve merge errors

* Make sure APX related knobs are defined properly across platforms

* Add Evex.nf to instrDesc

* {nf} add reg, reg

* Enable EVEX.NF in more instructions

* more instructions

* comments.

* lzcnt, tzcnt, popcnt

* Exclude ACC form from EVEX promotion.

* BMI instructions.

* bug fixes

* Tweak the code size calculation to make sure REX2 and APX-EVEX are properly handled.

* bug fixes for stress mode

* Add idEvexNoPromotion to emitter to exclude the APX-EVEX promotion from LOCK prefixd instructions.

* resolve merge error

* fix merge error

* Revert ""Add idEvexNoPromotion to emitter to exclude the APX-EVEX promotion from LOCK prefixd instructions.""

This reverts commit 1be4b12f115f032e3fa878fd2d3f7619e6c994c6.

* bug fix

* introduce _no_evex suffix for some instructions for cases when LOCK will be prefixed.

* resolve merge comflict

* fix merge error.

* fix comments and some checks.

* formatting

* remove unneeded env var.

* Make sure the BMI instruction is properly hidden behind APX stress knob and will not be EVEX-encoded when JitStressEvexEncoding is set.

* resolve merge error.

* Resolve comments.

* formatting.

* Add rcr/rcl emitter unit tests for extended EVEX.

* Resolve merge error.

* formatting

* resolve comments

* formatting

* use the right size for neg and not code gen.",2025-01-30 17:48:14+00:00,Ruihan-Yin,1,39df50ee30aa7e1f31da14671d84ff2d3fdda6dc,"Fix the failing template test for AVX10.2 (#112252)

* Limit JIT unit suite within the subsets which are stable in SDE.

* Fix the bug in instruction definition for INS_VMPSADBW

* Revert ""Limit JIT unit suite within the subsets which are stable in SDE.""

This reverts commit 552bbe28887cd19c9831f85cd9c0b417c100aaa6.

---------

Co-authored-by: Ruihan-Yin <ruihan.yin@intel.com>",10,1614,412,"[jit] add legacy extended evex encoding and evex.nd/nf feature to x64 emitter backend (issue_ref)* ruihan: poc with rex2update comments.merge the rex2 changes into the original legacy emit pathbug fix: set rex2.w with correct mask code.register encoding and prefix emitting logics.add rex2 prefix emit logicbug fixesadd stress mode for rex2 encoding and some bug fixesresolve comments:1. add assertion check for ud opcodes.2. add checks for egprs.add rex2 to emitoutputam, and let lea to be rex2 compatible.add rex2.x encoding for sib bytebut"
dotnet/runtime,aef8f42992ba3e28ec68b6bd983ce1e508bcec47,"JIT: Check for profile consistency throughout JIT backend (#111684)

Part of #107749.",2025-01-30 18:12:22+00:00,Aman Khalid,1,16782a4481f389e68314b16ea628c5af80f22783,"JIT: Recompute test block weights after loop inversion (#112197)

Fixes #112196.",5,93,35,jit: check for profile consistency throughout jit backend (issue_ref)part of issue_ref.
dotnet/runtime,84f4c2ae9f5e3c10b994e1c6b8ccbf00c8c151cb,"JIT: Run 3-opt once across all regions (#111989)

Part of #107749. 3-opt layout already refuses to align branches that cross EH regions, so there doesn't seem to be much utility in reordering each EH region independently. Thus, remove 3-opt's per-region ordering constraints, and run 3-opt once.",2025-01-30 18:15:04+00:00,Aman Khalid,0,,,2,24,61,"jit: run 3-opt once across all regions (issue_ref)part of issue_ref. 3-opt layout already refuses to align branches that cross eh regions, so there doesn't seem to be much utility in reordering each eh region independently. thus, remove 3-opt's per-region ordering constraints, and run 3-opt once."
dotnet/runtime,586e891dcd085befe279190591fa18613ab7854b,"More native AOT Pri-1 test tree bring up (#111994)

I've also dropped `RequiresProcessIsolation` from tests while I was looking at them.",2025-01-30 21:28:54+00:00,Michal Strehovský,0,,,13,22,16,more native aot pri-1 test tree bring up (issue_ref)i've also dropped from tests while i was looking at them.
dotnet/runtime,62528e7271721691e6aa47846d1270286d0ba37a,"JIT: Fold more nullchecks (#111985)

Co-authored-by: Jakob Botsch Nielsen <Jakob.botsch.nielsen@gmail.com>",2025-01-31 00:16:23+00:00,Egor Bogatov,1,44167e071359ab0d456cdac5e45328e9bd57b5bb,"JIT: Update type when return temp is freshly created (#111948)

* Teach the JIT about System.SZArrayHelper.GetEnumerator

* A better approach

* Format JIT

* Use lvaInlineeReturnSpillTempFreshlyCreated

* Update src/coreclr/jit/fgopt.cpp

Co-authored-by: Jakob Botsch Nielsen <Jakob.botsch.nielsen@gmail.com>

* Update assertion

* Nit

* Nit

* Address review feedbacks

* Make the check always available

* Deploy a fix for COM objects

* Revert ""Deploy a fix for COM objects""

This reverts commit e94839bf462b636e07e13e3d14553de4281e781a.

* The real fix

* Address review feedback

* Fix typo

---------

Co-authored-by: Jakob Botsch Nielsen <Jakob.botsch.nielsen@gmail.com>
Co-authored-by: Andy Ayers <andya@microsoft.com>",3,109,37,jit: fold more nullchecks (issue_ref)
dotnet/runtime,ae240963f81c5385c0daa439274bd37ab4b08d63,"Move the diagnostic print for stack overflow test failure (#112001)

This is an update of the temporary logging for stack overflow test
failure investigation, based on what the previous logging has shown in
the CI tests.",2025-01-31 01:54:25+00:00,Jan Vorlicek,1,4309e436866720f919d16be0fe534338cd63345e,"Enlarge stack overflow handling stack (#114956)

This is an attempt to fix rare failures in the stack overflow tests that
I was unable to repro locally. The logs I've added so far seems to indicate
that the thread handling the exception crashes with another stack overflow
at the point when it waits for a secondary thread to finish dumping stack
trace.",1,2,2,"move the diagnostic print for stack overflow test failure (issue_ref)this is an update of the temporary logging for stack overflow testfailure investigation, based on what the previous logging has shown inthe ci tests."
dotnet/runtime,eb73ab1afaa45cdb4d15dda741bac3cebd87b900,"Propose new async API (#110420)

* Propose new async API

This PR replaces the 'method signature' overloading with a new
'Await' method that JIT should treat as an intrinsic. The primary
benefit in this case is that it makes the IL valid according to previous
versions of the ECMA specification. Ideally, this should cause fewer
failures in tooling that examines IL.

* Change return type of AwaitAwaiter methods to void

* Reword suspension",2025-01-31 02:23:52+00:00,Andy Gocke,0,,,1,16,28,"propose new async api (issue_ref)* propose new async apithis pr replaces the 'method signature' overloading with a new'await' method that jit should treat as an intrinsic. the primarybenefit in this case is that it makes the il valid according to previousversions of the ecma specification. ideally, this should cause fewerfailures in tooling that examines il.* change return type of awaitawaiter methods to void* reword suspension"
dotnet/runtime,847a8c2979d2ef252c41e1ad97901f6e6b5bcaef,"Fix explicit offset of ByRefLike fields. (#111584)

* Fix explicit offset of ByRefLike fields.

A ByRefLike type was previously forced to be
pointer aligned so ref fields were implicitly aligned.
Using Explicit layout one can create valid aligned
ByRefLike types with no object pointers. This change
tkaes into account the base offset of the ByRefLike type and
includes that for determining offsets of fields in the
ByRefLike type.

---------

Co-authored-by: Michal Strehovský <MichalStrehovsky@users.noreply.github.com>",2025-01-31 12:03:33+00:00,Aaron Robinson,1,3be0023cf5a8cc91a117f93afc05eb189e25f1e0,"Mark the special ABI primitive types as having stable layout (#120802)

This resolves #120367 and was tested using the following program:
```csharp
using System.Numerics;
using System.Runtime.Intrinsics;

TestV();
TestV64();
TestV128();
TestV256();
TestV512();

static ushort[] TestV()
{
    Console.WriteLine(Vector<byte>.Count);
    ushort[] numbers = new ushort[32];
    Vector<ushort>.Zero.CopyTo(numbers);
    return numbers;
}

static ushort[] TestV64()
{
    Console.WriteLine(Vector64<byte>.Count);
    ushort[] numbers = new ushort[4];
    Vector64<ushort>.Zero.CopyTo(numbers);
    return numbers;
}

static ushort[] TestV128()
{
    Console.WriteLine(Vector128<byte>.Count);
    ushort[] numbers = new ushort[8];
    Vector128<ushort>.Zero.CopyTo(numbers);
    return numbers;
}

static ushort[] TestV256()
{
    Console.WriteLine(Vector256<byte>.Count);
    ushort[] numbers = new ushort[16];
    Vector256<ushort>.Zero.CopyTo(numbers);
    return numbers;
}

static ushort[] TestV512()
{
    Console.WriteLine(Vector512<byte>.Count);
    ushort[] numbers = new ushort[32];
    Vector512<ushort>.Zero.CopyTo(numbers);
    return numbers;
}
```

## Results

## Before
```
BEFORE
   1: JIT compiled Program:<Main>$(System.String[]) [Tier0, IL size=31, code size=51]
   2: JIT compiled Program:<<Main>$>g__TestV|0_0() [Tier0, IL size=34, code size=92]
   3: JIT compiled System.Threading.Thread:GetThreadStaticsBase() [Tier0, IL size=18, code size=34]
   4: JIT compiled System.Numerics.Vector`1[ushort]:CopyTo(ushort[]) [Tier0, IL size=39, code size=79]
   5: JIT compiled Program:<<Main>$>g__TestV64|0_1() [Tier0, IL size=30, code size=85]
   6: JIT compiled System.Runtime.Intrinsics.Vector64:CopyTo[ushort](System.Runtime.Intrinsics.Vector64`1[ushort],ushort[]) [Tier0, IL size=34, code size=71]
   7: JIT compiled Program:<<Main>$>g__TestV128|0_2() [Tier0, IL size=30, code size=84]
   8: JIT compiled Program:<<Main>$>g__TestV256|0_3() [Tier0, IL size=31, code size=84]
   9: JIT compiled System.Runtime.Intrinsics.Vector256:CopyTo[ushort](System.Runtime.Intrinsics.Vector256`1[ushort],ushort[]) [Tier0, IL size=34, code size=79]
  10: JIT compiled Program:<<Main>$>g__TestV512|0_4() [Tier0, IL size=31, code size=98]
  11: JIT compiled System.Runtime.Intrinsics.Vector512:CopyTo[ushort](System.Runtime.Intrinsics.Vector512`1[ushort],ushort[]) [Tier0, IL size=34, code size=83]
```

## After - .NET 10

### AVX512 Capable Machine
```
1: JIT compiled System.Threading.Thread:GetThreadStaticsBase() [Tier0, IL size=18, code size=34]
   2: JIT compiled System.Numerics.Vector`1[ushort]:CopyTo(ushort[]) [Tier0, IL size=39, code size=79]
   3: JIT compiled System.Runtime.Intrinsics.Vector64:CopyTo[ushort](System.Runtime.Intrinsics.Vector64`1[ushort],ushort[]) [Tier0, IL size=34, code size=71]
   4: JIT compiled System.Runtime.Intrinsics.Vector256:CopyTo[ushort](System.Runtime.Intrinsics.Vector256`1[ushort],ushort[]) [Tier0, IL size=34, code size=79]
   5: JIT compiled Program:<<Main>$>g__TestV512|0_4() [Tier0, IL size=31, code size=98]
   6: JIT compiled System.Runtime.Intrinsics.Vector512:CopyTo[ushort](System.Runtime.Intrinsics.Vector512`1[ushort],ushort[]) [Tier0, IL size=34, code size=83]
```

### AVX512=0
```
   1: JIT compiled System.Threading.Thread:GetThreadStaticsBase() [Tier0, IL size=18, code size=34]
   2: JIT compiled System.Numerics.Vector`1[ushort]:CopyTo(ushort[]) [Tier0, IL size=39, code size=79]
   3: JIT compiled System.Runtime.Intrinsics.Vector64:CopyTo[ushort](System.Runtime.Intrinsics.Vector64`1[ushort],ushort[]) [Tier0, IL size=34, code size=71]
   4: JIT compiled System.Runtime.Intrinsics.Vector256:CopyTo[ushort](System.Runtime.Intrinsics.Vector256`1[ushort],ushort[]) [Tier0, IL size=34, code size=79]
   5: JIT compiled System.Runtime.Intrinsics.Vector512:CopyTo[ushort](System.Runtime.Intrinsics.Vector512`1[ushort],ushort[]) [Tier0, IL size=34, code size=100]
```

### AVX2=0
```
   1: JIT compiled Program:<Main>$(System.String[]) [Tier0, IL size=31, code size=51]
   2: JIT compiled Program:<<Main>$>g__TestV|0_0() [Tier0, IL size=34, code size=87]
   3: JIT compiled System.Threading.Thread:GetThreadStaticsBase() [Tier0, IL size=18, code size=34]
   4: JIT compiled Program:<<Main>$>g__TestV64|0_1() [Tier0, IL size=30, code size=85]
   5: JIT compiled System.Runtime.Intrinsics.Vector64:CopyTo[ushort](System.Runtime.Intrinsics.Vector64`1[ushort],ushort[]) [Tier0, IL size=34, code size=71]
   6: JIT compiled Program:<<Main>$>g__TestV128|0_2() [Tier0, IL size=30, code size=84]
   7: JIT compiled Program:<<Main>$>g__TestV256|0_3() [Tier0, IL size=31, code size=84]
   8: JIT compiled System.Runtime.Intrinsics.Vector256:CopyTo[ushort](System.Runtime.Intrinsics.Vector256`1[ushort],ushort[]) [Tier0, IL size=34, code size=79]
   9: JIT compiled Program:<<Main>$>g__TestV512|0_4() [Tier0, IL size=31, code size=126]
  10: JIT compiled System.Runtime.Intrinsics.Vector512:CopyTo[ushort](System.Runtime.Intrinsics.Vector512`1[ushort],ushort[]) [Tier0, IL size=34, code size=100]
```

### SSE42=0
```
   1: JIT compiled System.SpanHelpers:IndexOfNullCharacter(ptr) [Instrumented Tier0, IL size=1148, code size=926]
   2: JIT compiled System.SpanHelpers:GetCharVector128SpanLength(nint,nint) [Tier0, IL size=14, code size=26]
   3: JIT compiled System.SpanHelpers:NonPackedIndexOfValueType[short,System.SpanHelpers+DontNegate`1[short]](byref,short,int) [Instrumented Tier0, IL size=1204, code size=1761]
   4: JIT compiled System.Text.Unicode.Utf16Utility:GetPointerToFirstInvalidChar(ptr,int,byref,byref) [Instrumented Tier0, IL size=946, code size=1280]
   5: JIT compiled System.Text.Ascii:GetIndexOfFirstNonAsciiChar_Intrinsified(ptr,nuint) [Instrumented Tier0, IL size=473, code size=1390]
   6: JIT compiled System.Text.Ascii:VectorContainsNonAsciiChar(System.Runtime.Intrinsics.Vector128`1[ushort]) [Tier0, IL size=109, code size=63]
   7: JIT compiled System.Text.Unicode.Utf8Utility:TranscodeToUtf8(ptr,int,ptr,int,byref,byref) [Instrumented Tier0, IL size=1494, code size=2856]
   8: JIT compiled System.Text.Ascii:NarrowUtf16ToAscii(ptr,ptr,nuint) [Instrumented Tier0, IL size=380, code size=755]
   9: JIT compiled Program:<Main>$(System.String[]) [Tier0, IL size=31, code size=51]
  10: JIT compiled Program:<<Main>$>g__TestV|0_0() [Tier0, IL size=34, code size=87]
  11: JIT compiled System.Threading.Thread:GetThreadStaticsBase() [Tier0, IL size=18, code size=34]
  12: JIT compiled System.PackedSpanHelpers:IndexOfAnyInRange[System.SpanHelpers+DontNegate`1[short]](byref,short,short,int) [Instrumented Tier0, IL size=861, code size=1316]
  13: JIT compiled Program:<<Main>$>g__TestV64|0_1() [Tier0, IL size=30, code size=85]
  14: JIT compiled System.Runtime.Intrinsics.Vector64:CopyTo[ushort](System.Runtime.Intrinsics.Vector64`1[ushort],ushort[]) [Tier0, IL size=34, code size=71]
  15: JIT compiled Program:<<Main>$>g__TestV128|0_2() [Tier0, IL size=30, code size=82]
  16: JIT compiled Program:<<Main>$>g__TestV256|0_3() [Tier0, IL size=31, code size=104]
  17: JIT compiled System.Runtime.Intrinsics.Vector256:CopyTo[ushort](System.Runtime.Intrinsics.Vector256`1[ushort],ushort[]) [Tier0, IL size=34, code size=93]
  18: JIT compiled Program:<<Main>$>g__TestV512|0_4() [Tier0, IL size=31, code size=135]
  19: JIT compiled System.Runtime.Intrinsics.Vector512:CopyTo[ushort](System.Runtime.Intrinsics.Vector512`1[ushort],ushort[]) [Tier0, IL size=34, code size=109]
```

### HWIntrinsics=0
```
   A LOT - Not actually going to list the several hundred APIs, this is expected since the ""baseline"" ISA is disabled
```

## After - .NET 11

### AVX512 Capable Machine
```
  1: JIT compiled System.Runtime.Intrinsics.Vector64:CopyTo[ushort](System.Runtime.Intrinsics.Vector64`1[ushort],ushort[]) [Tier0, IL size=34, code size=71]
  2: JIT compiled System.Runtime.Intrinsics.Vector256:CopyTo[ushort](System.Runtime.Intrinsics.Vector256`1[ushort],ushort[]) [Tier0, IL size=34, code size=79]
  3: JIT compiled Program:<<Main>$>g__TestV512|0_4() [Tier0, IL size=31, code size=98]
  4: JIT compiled System.Runtime.Intrinsics.Vector512:CopyTo[ushort](System.Runtime.Intrinsics.Vector512`1[ushort],ushort[]) [Tier0, IL size=34, code size=83]
```
  
### AVX512=0
```
  1: JIT compiled System.Runtime.Intrinsics.Vector64:CopyTo[ushort](System.Runtime.Intrinsics.Vector64`1[ushort],ushort[]) [Tier0, IL size=34, code size=71]
  2: JIT compiled System.Runtime.Intrinsics.Vector256:CopyTo[ushort](System.Runtime.Intrinsics.Vector256`1[ushort],ushort[]) [Tier0, IL size=34, code size=79]
  3: JIT compiled System.Runtime.Intrinsics.Vector512:CopyTo[ushort](System.Runtime.Intrinsics.Vector512`1[ushort],ushort[]) [Tier0, IL size=34, code size=100]
```

### AVX2=0
```
  A LOT - This is also expected since we bumped the R2R baseline to AVX2 for .NET 11
```",19,307,79,fix explicit offset of byreflike fields. (issue_ref)* fix explicit offset of byreflike fields.a byreflike type was previously forced to bepointer aligned so ref fields were implicitly aligned.using explicit layout one can create valid alignedbyreflike types with no object pointers. this changetkaes into account the base offset of the byreflike type andincludes that for determining offsets of fields in thebyreflike type.---------
dotnet/runtime,572533b433aa1b0b5a498cec2d310b939acd3a93,"JIT: Try to retain entry weight during profile synthesis (#111971)

Part of #107749. Prerequisite to #111915. Regardless of the profile synthesis option used, we ought to maintain the method's entry weight, which is computed by summing all non-flow weight into the entry block. Ideally, we'd use fgCalledCount here, but this isn't computed until after morph, and we need to tolerate the existence of multiple entry blocks for methods with OSR pre-morph.",2025-01-31 16:02:17+00:00,Aman Khalid,0,,,3,32,52,"jit: try to retain entry weight during profile synthesis (issue_ref)part of issue_ref. prerequisite to issue_ref. regardless of the profile synthesis option used, we ought to maintain the method's entry weight, which is computed by summing all non-flow weight into the entry block. ideally, we'd use fgcalledcount here, but this isn't computed until after morph, and we need to tolerate the existence of multiple entry blocks for methods with osr pre-morph."
dotnet/runtime,d9ab7162298e4b49888eee794d213ed916686262,simplify x86 special intrinsic imports (#111836),2025-01-31 18:47:01+00:00,Clinton Ingram,0,,,2,103,210,simplify x86 special intrinsic imports (issue_ref)
dotnet/runtime,fa0f65c9a89cd140929aa12ac3ab70d2d0fc0d6d,"JIT: Improve x86 unsigned to floating cast codegen (#111595)

* improve x86 integral to floating cast codegen

* more cleanup

* more cleanup",2025-01-31 19:06:46+00:00,Clinton Ingram,1,1b23d6fd9fbcc9f9a842c11586c2d60f0a942e3d,"Improve compare-and-branch sequences produced by Emitter (#111797)

* Improve compare-and-branch sequences produced by Emitter

Introduces an overload of `genJumpToThrowHlpBlk` that allows you to pass
a function that generates the branch code, before it creates an inline
throw block. This allows us to choose compare-and-branch sequences such
as `cbz` on ARM64 for checks added in the emitter, such as divide-by-zero.

* Optimize bounds checks for zero index on ARM64

Emit `cbz` instead of `cmp+b.ls` when checking bounds for an access to the
0 index of an array. It can only throw when `arrayLength == 0`.

Fixes #42514

* Move `genGetThrowHelper` to codegenarm64.cpp

* Use `GetRegNum` instead of `GetReg`",7,111,204,jit: improve x86 unsigned to floating cast codegen (issue_ref)* improve x86 integral to floating cast codegen* more cleanup* more cleanup
dotnet/runtime,8edaf7460777e791b6279b395a68a77533db2d20,Disable LTCG for brotli and zlibng. (#111805),2025-01-31 21:50:04+00:00,Jeremy Koritzinsky,0,,,9,34,30,disable ltcg for brotli and zlibng. (issue_ref)
dotnet/runtime,c2194f8ab0e1088192279422c2f92f621e6fe46b,WasmAppBuilder: Remove double computation of a value (#112047),2025-01-31 22:40:48+00:00,Filip Navara,0,,,1,0,2,wasmappbuilder: remove double computation of a value (issue_ref)
dotnet/runtime,ad7b8299d8d80eb27cf22838c7017c5872056b56,Remove unused build controls and simplify DotNetBuild.props (#111986),2025-01-31 23:26:10+00:00,Jeremy Koritzinsky,1,dea928c98e6355c8dc6cd6e94ef5686000edca8d,"Change how we build the cross-OS DAC to support building in the VMR (#111927)

* Don't build the linuxdac by default. Cross-os DAC build failures are quite rare nowadays and we have CI protection against build failures. Remove the linux dac from the default build subsets to speed up the default build experience.
* Rewrite cross-os DAC packaging in terms of runtime packs instead of using a separate artifact
* Build the cross-os DACs when crossdacpack is built.
* Forward the ESRP tool path down from DotNetBuild.props and set up the cross-dac invocation from the join jobs.
* Pass down the buildpass to the inner build and decide what to build in Subsets.props
* Allow passing a script root (needed for VMR reusage of this template)
* Adjust DAC signing script to fix failures in internal testing
* Force the value of SignRequestFiles to always be an array
* Build the cross-os DACs via their subset names",5,7,24,remove unused build controls and simplify dotnetbuild.props (issue_ref)
dotnet/runtime,44167e071359ab0d456cdac5e45328e9bd57b5bb,"JIT: Update type when return temp is freshly created (#111948)

* Teach the JIT about System.SZArrayHelper.GetEnumerator

* A better approach

* Format JIT

* Use lvaInlineeReturnSpillTempFreshlyCreated

* Update src/coreclr/jit/fgopt.cpp

Co-authored-by: Jakob Botsch Nielsen <Jakob.botsch.nielsen@gmail.com>

* Update assertion

* Nit

* Nit

* Address review feedbacks

* Make the check always available

* Deploy a fix for COM objects

* Revert ""Deploy a fix for COM objects""

This reverts commit e94839bf462b636e07e13e3d14553de4281e781a.

* The real fix

* Address review feedback

* Fix typo

---------

Co-authored-by: Jakob Botsch Nielsen <Jakob.botsch.nielsen@gmail.com>
Co-authored-by: Andy Ayers <andya@microsoft.com>",2025-02-01 16:01:45+00:00,Steve,1,4dcd4d37fb65f10ce1d1ea370a11a7bf55155a40,"JIT: boost inlining when callee unboxes an arg (#110596)

Especially so if the caller is passing an exact type. This may lead
to the JIT being able to stack allocate the box and promote the underlying
payload.

Fixes #104479",5,33,14,jit: update type when return temp is freshly created (issue_ref)* teach the jit about system.szarrayhelper.getenumerator* a better approach* format jit* use lvainlineereturnspilltempfreshlycreated* update src/coreclr/jit/fgopt.cpp
dotnet/runtime,c693bfaa3eb6a18c185c315c07621bd0212c5796,Simplify boolean logic in `TimeZoneInfo` (#112062),2025-02-01 16:54:40+00:00,xtqqczze,0,,,1,1,1,simplify boolean logic in (issue_ref)
dotnet/runtime,9c456f6bdbfa82a984688bede5f65136cbb53b18,"JIT: Compute `fgCalledCount` after synthesis (#112041)

Part of #107749. Follow-up to #111971 and #110693. For methods without profile data, ensure the default call count is available throughout compilation (this had no diffs for me locally). For methods with profile data, compute the call count after synthesis runs to ensure it is available early, and reasonably accurate.

I'm only seeing diffs in OSR methods locally, due to the logic in `fgFixEntryFlowForOSR` (which runs right after profile incorporation) no longer affecting `fgCalledCount`. This method guesses that the loop iterates about 100x the method call count, and scales the method entry block's weight down accordingly. This gives the impression later on that `fgCalledCount` is much lower than what we calculated using `fgEntryBB`.

The actual diffs seem to manifest largely in LSRA, which uses `fgCalledCount` to normalize block weights, though there are a few other phases that use `BasicBlock::getBBWeight` in lieu of the raw weight as well. I think we ought to consolidate our block weight strategy at some point, especially if we have newfound faith in `fgCalledCount`. For example, instead of this check in if conversion:
```
if (m_startBlock->getBBWeight(m_comp) > BB_UNITY_WEIGHT * 1.05)
```

Perhaps we could do:
```
if (m_startBlock->bbWeight > fgCalledCount * 1.05)
```

But that's for another PR.",2025-02-01 18:50:20+00:00,Aman Khalid,1,d257079e2619912fb3e739aab3fc7119c490130a,"JIT: Unify handling of InstParam argument during inlining (#112119)

* Handle InstParam in the same way as all other arguments
* Insert the evaluation of the InstParam in the right spot when inlining
  succeeded

Fix #112092",3,17,13,"jit: compute after synthesis (issue_ref)part of issue_ref. follow-up to issue_ref and issue_ref. for methods without profile data, ensure the default call count is available throughout compilation (this had no diffs for me locally). for methods with profile data, compute the call count after synthesis runs to ensure it is available early, and reasonably accurate.i'm only seeing diffs in osr methods locally, due to the logic in (which runs right after profile incorporation) no longer affecting . this method guesses that the loop iterates about 100x the method call count, and scales the method entry block's weight down accordingly. this gives the impression later on that is much lower than what we calculated using .the actual diffs seem to manifest largely in lsra, which uses to normalize block weights, though there are a few other phases that use in lieu of the raw weight as well. i think we ought to consolidate our block weight strategy at some point, especially if we have newfound faith in . for example, instead of this check in if conversion:perhaps we could do:but that's for another pr."
dotnet/runtime,bc191c9b265b436b381a58211370650a438f7e28,Use double.ConvertToIntegerNative where safe to do in System.Random (#112046),2025-02-01 19:03:31+00:00,Tanner Gooding,0,,,1,21,6,use double.converttointegernative where safe to do in system.random (issue_ref)
dotnet/runtime,6f221b41da8b4fbd09dcf7ac4b796ff3c86cbeb9,"Ensure that math calls into the CRT are tracked as needing vzeroupper (#112011)

* Ensure that math calls into the CRT are tracked as needing vzeroupper

* Apply suggestions from code review

* Don't force vzeroupper for helpers written in managed",2025-02-01 19:06:23+00:00,Tanner Gooding,1,fc7fcb7235d446cb533166db39f0b6c70c2f93ae,"JIT: remove asserts about inlining methods that call varargs methods (#112465)

We can't inline varargs methods, but we can inline methods that call varargs
methods. Remove some asserts that say otherwise.

Fixes #112363.",10,125,76,ensure that math calls into the crt are tracked as needing vzeroupper (issue_ref)* ensure that math calls into the crt are tracked as needing vzeroupper* apply suggestions from code review* don't force vzeroupper for helpers written in managed
dotnet/runtime,5cc946745cd7a15047c0e74c8649740d1260a209,"JIT: Transform single-reg args to FIELD_LIST in physical promotion (#111590)

Extend the support for struct arguments in physical promotion to support
transforming single-reg structs into a single-field FIELD_LIST node.
This allows physically promoted struct arguments passed in a single
register to stay in registers.

Morph strips the FIELD_LIST in this particular case to match its
standard (type-mismatched) representation for single-reg structs. We
could produce this IR directly in physical promotion too, but that hits
asserts due to type mismatches. Long term we might consider switching to
uniformly use FIELD_LIST for structs to avoid the type mismatches we see
today.",2025-02-01 21:07:02+00:00,Jakob Botsch Nielsen,0,,,2,42,15,"jit: transform single-reg args to field_list in physical promotion (issue_ref)extend the support for struct arguments in physical promotion to supporttransforming single-reg structs into a single-field field_list node.this allows physically promoted struct arguments passed in a singleregister to stay in registers.morph strips the field_list in this particular case to match itsstandard (type-mismatched) representation for single-reg structs. wecould produce this ir directly in physical promotion too, but that hitsasserts due to type mismatches. long term we might consider switching touniformly use field_list for structs to avoid the type mismatches we seetoday."
dotnet/runtime,e51af404d1ea26be4a3d8e51fe21cf2f09ad34dd,"Update dependencies from https://github.com/dotnet/arcade build 20250130.5 (#112013)

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.25079.2 -> To Version 10.0.0-beta.25080.5

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Larry Ewing <lewing@microsoft.com>",2025-02-01 23:17:39+00:00,dotnet-maestro[bot],1,13795b1995f7034ec5cf908ce032694444542ba3,"[main] Update dependencies from dotnet/roslyn-analyzers (#111518)

* Update dependencies from https://github.com/dotnet/roslyn-analyzers build 20250116.1

Microsoft.CodeAnalysis.Analyzers , Microsoft.CodeAnalysis.NetAnalyzers
 From Version 3.12.0-beta1.24629.1 -> To Version 3.12.0-beta1.25066.1

* Update dependencies from https://github.com/dotnet/roslyn-analyzers build 20250122.1

Microsoft.CodeAnalysis.Analyzers , Microsoft.CodeAnalysis.NetAnalyzers
 From Version 3.12.0-beta1.24629.1 -> To Version 3.12.0-beta1.25072.1

* Update dependencies from https://github.com/dotnet/roslyn-analyzers build 20250123.1

Microsoft.CodeAnalysis.Analyzers , Microsoft.CodeAnalysis.NetAnalyzers
 From Version 3.12.0-beta1.24629.1 -> To Version 3.12.0-beta1.25073.1

* Update dependencies from https://github.com/dotnet/roslyn-analyzers build 20250124.5

Microsoft.CodeAnalysis.Analyzers , Microsoft.CodeAnalysis.NetAnalyzers
 From Version 3.12.0-beta1.24629.1 -> To Version 3.12.0-beta1.25074.5

* Update dependencies from https://github.com/dotnet/roslyn-analyzers build 20250126.4

Microsoft.CodeAnalysis.Analyzers , Microsoft.CodeAnalysis.NetAnalyzers
 From Version 3.12.0-beta1.24629.1 -> To Version 3.12.0-beta1.25076.4

* Fix SupportedOSPlatform(""maccatalyst"") order in ref assemblies

See https://github.com/dotnet/runtime/pull/105409 for background.

* Suppress CA1416 for browser cases in Normalization.Icu.cs

* Fix windows build

* Update dependencies from https://github.com/dotnet/roslyn-analyzers build 20250131.1

Microsoft.CodeAnalysis.Analyzers , Microsoft.CodeAnalysis.NetAnalyzers
 From Version 3.12.0-beta1.24629.1 -> To Version 3.12.0-beta1.25081.1

* Add unsupported OS attribute for browser to Pkcs12CertBag.GetCertificate()

X509CertificateLoader.LoadCertificate() is not supported there, bubble up the warning.

* Fix ApiCompat

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Alexander Köplinger <alex.koeplinger@outlook.com>",3,61,61,"update dependencies from build 20250130.5 (issue_ref)microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.versiontools.tasks , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.25079.2 -> to version 10.0.0-beta.25080.5"
dotnet/runtime,5a8f4055574f513a6e8a1d04ac20216ca041773a,Use Contains{Any} in Regex source generator (#112065),2025-02-02 16:36:10+00:00,Miha Zupan,0,,,1,4,2,use contains{any} in regex source generator (issue_ref)
dotnet/runtime,4bd597ffde128555b4ff017e87c60adc2fedd178,"Always inline number conversions (#112061)

* Mark TryConvertFrom as AggressiveInlining

* Cover TryConvertTo",2025-02-02 17:13:18+00:00,Steve,0,,,5,10,0,always inline number conversions (issue_ref)* mark tryconvertfrom as aggressiveinlining* cover tryconvertto
dotnet/runtime,6f3f67528f9c1e6fd3b8614aac054286f3b2e7e0,Build the RID-specific System.IO.Ports packages in the VMR (#112054),2025-02-02 19:20:24+00:00,Jeremy Koritzinsky,0,,,1,13,7,build the rid-specific system.io.ports packages in the vmr (issue_ref)
dotnet/runtime,d8a611799782afc0b14c214c8b541a0c3f6d3663,"Keep test PDB in helix payload for native AOT (#111949)

The crashdumps are unusable without this.",2025-02-03 06:04:03+00:00,Michal Strehovský,0,,,1,3,2,keep test pdb in helix payload for native aot (issue_ref)the crashdumps are unusable without this.
dotnet/runtime,e424e0538fcafa56802d6ee23263aa0772e327d3,"Automated bump of chrome version (#112066)

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>",2025-02-03 12:00:04+00:00,github-actions[bot],0,,,1,4,4,automated bump of chrome version (issue_ref)
dotnet/runtime,4fd9470900aea2fe6b0cd72aab1d3141d7540bfd,"Fail tests if LTCG is used (#111651)

#111566 is not the first time we accidentally shipped something built with LTCG. We should ideally not allow merging such code into `main`.",2025-02-03 12:20:53+00:00,Michal Strehovský,0,,,2,8,2,fail tests if ltcg is used (issue_ref)issue_ref is not the first time we accidentally shipped something built with ltcg. we should ideally not allow merging such code into .
dotnet/runtime,f3f85ed7be991b6da59767efd4981f0b34c932ba,"[main] Update dependencies from dotnet/roslyn (#112030)

* Update dependencies from https://github.com/dotnet/roslyn build 20250130.6

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.14.0-2.25079.2 -> To Version 4.14.0-2.25080.6

* Update dependencies from https://github.com/dotnet/roslyn build 20250131.4

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.14.0-2.25079.2 -> To Version 4.14.0-2.25081.4

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-02-03 14:21:34+00:00,dotnet-maestro[bot],0,,,2,11,11,"[main] update dependencies from dotnet/roslyn (issue_ref)* update dependencies from build 20250130.6microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.14.0-2.25079.2 -> to version 4.14.0-2.25080.6* update dependencies from build 20250131.4microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.14.0-2.25079.2 -> to version 4.14.0-2.25081.4---------"
dotnet/runtime,fe7fbae0082d0290a8abcfa00c93e1c4698fcaa8,"[main] Update dependencies from dnceng/internal/dotnet-optimization (#111848)

* Update dependencies from https://dev.azure.com/dnceng/internal/_git/dotnet-optimization build 20250124.2

optimization.linux-arm64.MIBC.Runtime , optimization.linux-x64.MIBC.Runtime , optimization.windows_nt-arm64.MIBC.Runtime , optimization.windows_nt-x64.MIBC.Runtime , optimization.windows_nt-x86.MIBC.Runtime , optimization.PGO.CoreCLR
 From Version 1.0.0-prerelease.25067.2 -> To Version 1.0.0-prerelease.25074.2

* Update dependencies from https://dev.azure.com/dnceng/internal/_git/dotnet-optimization build 20250129.10

optimization.linux-arm64.MIBC.Runtime , optimization.linux-x64.MIBC.Runtime , optimization.windows_nt-arm64.MIBC.Runtime , optimization.windows_nt-x64.MIBC.Runtime , optimization.windows_nt-x86.MIBC.Runtime , optimization.PGO.CoreCLR
 From Version 1.0.0-prerelease.25067.2 -> To Version 1.0.0-prerelease.25079.10

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-02-03 14:22:08+00:00,dotnet-maestro[bot],0,,,2,18,18,"[main] update dependencies from dnceng/internal/dotnet-optimization (issue_ref)* update dependencies from build 20250124.2optimization.linux-arm64.mibc.runtime , optimization.linux-x64.mibc.runtime , optimization.windows_nt-arm64.mibc.runtime , optimization.windows_nt-x64.mibc.runtime , optimization.windows_nt-x86.mibc.runtime , optimization.pgo.coreclr from version 1.0.0-prerelease.25067.2 -> to version 1.0.0-prerelease.25074.2* update dependencies from build 20250129.10optimization.linux-arm64.mibc.runtime , optimization.linux-x64.mibc.runtime , optimization.windows_nt-arm64.mibc.runtime , optimization.windows_nt-x64.mibc.runtime , optimization.windows_nt-x86.mibc.runtime , optimization.pgo.coreclr from version 1.0.0-prerelease.25067.2 -> to version 1.0.0-prerelease.25079.10---------"
dotnet/runtime,6e5920cced49e3dc1f36df36793c7c9c23d021ac,"Update dependencies from https://github.com/dotnet/arcade build 20250130.7 (#112084)

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.25080.5 -> To Version 10.0.0-beta.25080.7

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-02-03 14:23:16+00:00,dotnet-maestro[bot],0,,,4,64,64,"update dependencies from build 20250130.7 (issue_ref)microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.versiontools.tasks , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.25080.5 -> to version 10.0.0-beta.25080.7"
dotnet/runtime,4d463baf32f5f650f35440b3434c44b78aa248f7,"[main] Update dependencies from dotnet/cecil, dotnet/hotreload-utils, dotnet/source-build-externals (#112085)

* Update dependencies from https://github.com/dotnet/hotreload-utils build 20250127.1

Microsoft.DotNet.HotReload.Utils.Generator.BuildTool
 From Version 10.0.0-alpha.0.25070.1 -> To Version 10.0.0-alpha.0.25077.1

* Update dependencies from https://github.com/dotnet/cecil build 20250128.1

Microsoft.SourceBuild.Intermediate.cecil , Microsoft.DotNet.Cecil
 From Version 0.11.5-alpha.25069.2 -> To Version 0.11.5-alpha.25078.1

* Update dependencies from https://github.com/dotnet/source-build-externals build 20250129.1

Microsoft.SourceBuild.Intermediate.source-build-externals
 From Version 10.0.607101 -> To Version 10.0.607901

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-02-03 14:23:47+00:00,dotnet-maestro[bot],0,,,2,10,10,"[main] update dependencies from dotnet/cecil, dotnet/hotreload-utils, dotnet/source-build-externals (issue_ref)* update dependencies from build 20250127.1microsoft.dotnet.hotreload.utils.generator.buildtool from version 10.0.0-alpha.0.25070.1 -> to version 10.0.0-alpha.0.25077.1* update dependencies from build 20250128.1microsoft.sourcebuild.intermediate.cecil , microsoft.dotnet.cecil from version 0.11.5-alpha.25069.2 -> to version 0.11.5-alpha.25078.1* update dependencies from build 20250129.1microsoft.sourcebuild.intermediate.source-build-externals from version 10.0.607101 -> to version 10.0.607901---------"
dotnet/runtime,b2880aed272879e1f847a8694dcdc72d13034946,"[main] Update dependencies from dotnet/source-build-reference-packages (#111329)

* Update dependencies from https://github.com/dotnet/source-build-reference-packages build 20250110.4

Microsoft.SourceBuild.Intermediate.source-build-reference-packages
 From Version 10.0.605601 -> To Version 10.0.606004

* Update dependencies from https://github.com/dotnet/source-build-reference-packages build 20250115.1

Microsoft.SourceBuild.Intermediate.source-build-reference-packages
 From Version 10.0.605601 -> To Version 10.0.606501

* Update dependencies from https://github.com/dotnet/source-build-reference-packages build 20250124.2

Microsoft.SourceBuild.Intermediate.source-build-reference-packages
 From Version 10.0.605601 -> To Version 10.0.607402

* Update dependencies from https://github.com/dotnet/source-build-reference-packages build 20250130.4

Microsoft.SourceBuild.Intermediate.source-build-reference-packages
 From Version 10.0.605601 -> To Version 10.0.608004

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Viktor Hofer <viktor.hofer@microsoft.com>",2025-02-03 14:25:16+00:00,dotnet-maestro[bot],0,,,1,2,2,[main] update dependencies from dotnet/source-build-reference-packages (issue_ref)* update dependencies from build 20250110.4microsoft.sourcebuild.intermediate.source-build-reference-packages from version 10.0.605601 -> to version 10.0.606004* update dependencies from build 20250115.1microsoft.sourcebuild.intermediate.source-build-reference-packages from version 10.0.605601 -> to version 10.0.606501* update dependencies from build 20250124.2microsoft.sourcebuild.intermediate.source-build-reference-packages from version 10.0.605601 -> to version 10.0.607402* update dependencies from build 20250130.4microsoft.sourcebuild.intermediate.source-build-reference-packages from version 10.0.605601 -> to version 10.0.608004---------
dotnet/runtime,b41e8cbe26e8ea8bf04af405ee4fc16276bbd95d,"[main] Update dependencies from dotnet/xharness (#111604)

* Update dependencies from https://github.com/dotnet/xharness build 20250114.3

Microsoft.DotNet.XHarness.CLI , Microsoft.DotNet.XHarness.TestRunners.Common , Microsoft.DotNet.XHarness.TestRunners.Xunit
 From Version 10.0.0-prerelease.24610.1 -> To Version 10.0.0-prerelease.25064.3

* Update dependencies from https://github.com/dotnet/xharness build 20250124.1

Microsoft.DotNet.XHarness.CLI , Microsoft.DotNet.XHarness.TestRunners.Common , Microsoft.DotNet.XHarness.TestRunners.Xunit
 From Version 10.0.0-prerelease.24610.1 -> To Version 10.0.0-prerelease.25074.1

* Update dependencies from https://github.com/dotnet/xharness build 20250127.1

Microsoft.DotNet.XHarness.CLI , Microsoft.DotNet.XHarness.TestRunners.Common , Microsoft.DotNet.XHarness.TestRunners.Xunit
 From Version 10.0.0-prerelease.24610.1 -> To Version 10.0.0-prerelease.25077.1

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Larry Ewing <lewing@microsoft.com>",2025-02-03 14:29:55+00:00,dotnet-maestro[bot],0,,,3,10,10,"[main] update dependencies from dotnet/xharness (issue_ref)* update dependencies from build 20250114.3microsoft.dotnet.xharness.cli , microsoft.dotnet.xharness.testrunners.common , microsoft.dotnet.xharness.testrunners.xunit from version 10.0.0-prerelease.24610.1 -> to version 10.0.0-prerelease.25064.3* update dependencies from build 20250124.1microsoft.dotnet.xharness.cli , microsoft.dotnet.xharness.testrunners.common , microsoft.dotnet.xharness.testrunners.xunit from version 10.0.0-prerelease.24610.1 -> to version 10.0.0-prerelease.25074.1* update dependencies from build 20250127.1microsoft.dotnet.xharness.cli , microsoft.dotnet.xharness.testrunners.common , microsoft.dotnet.xharness.testrunners.xunit from version 10.0.0-prerelease.24610.1 -> to version 10.0.0-prerelease.25077.1---------"
dotnet/runtime,a95b9d9f7f96166b82fe76587eb07ad0ff26965e,Remove one usage of `Unsafe.AsPointer`. (#112079),2025-02-03 15:19:03+00:00,Theodore Tsirpanis,0,,,1,5,9,remove one usage of . (issue_ref)
dotnet/runtime,7c3297ef03217ae4ec59ad21656a0951131b2f58,"[mono][mini] Remove support for the Xamarin.iOS and Xamarin.Mac assemblies in the AOT compiler. (#108886)

This code hasn't been needed for many years.

Co-authored-by: Larry Ewing <lewing@microsoft.com>",2025-02-03 16:05:58+00:00,Rolf Bjarne Kvinge,0,,,1,1,5,[mono][mini] remove support for the xamarin.ios and xamarin.mac assemblies in the aot compiler. (issue_ref)this code hasn't been needed for many years.
dotnet/runtime,b2a62662916f5fa30a559d796b72d683bde6ee32,"Tests ran counter (#111145)

* record how many times each test ran for

* record all tests

* use lock when constructing string and clean the code

* rename counter

* remove sln file

---------

Co-authored-by: Manish Godse <61718172+mangod9@users.noreply.github.com>",2025-02-03 17:43:47+00:00,VincentBu,1,307753a093721b963df0671777fad237c384efdd,"Fix the issue that the test exits with cannot find Microsoft.Win32.Primitives.dll (#117699)

* fix the issue that the test exits with cannot find Microsoft.Win32.Primitives.dll

* Update src/tests/GC/Stress/Framework/ReliabilityFramework.cs

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",1,32,1,tests ran counter (issue_ref)* record how many times each test ran for* record all tests* use lock when constructing string and clean the code* rename counter* remove sln file---------
dotnet/runtime,cd1657d977337ba52e652be51c253f769739c8b5,Let the debugger knows DATAS is on (#107115),2025-02-03 18:32:46+00:00,Andrew Au,1,0f66f23859cb10e32ccbc38ef1fba4814bc3d30d,"[DAC] ClrDataAccess::GetFrameName support Frames using identifier instead of vptr (#112488)

* fix ClrDataAccess::GetFrameName for FrameIdentifier change

* remove g_dacVtStrings and DacGetVtNameW which are no longer used

---------

Co-authored-by: Max Charlamb <maxcharlamb@microsoft.com>",12,180,8,let the debugger knows datas is on (issue_ref)
dotnet/runtime,3ab8574307f12f4afbb813fbe708734334f87914,Enable Mono tests (#111981),2025-02-03 19:42:04+00:00,Steve Harter,0,,,1,0,2,enable mono tests (issue_ref)
dotnet/runtime,fffbd3eaaa0de6984c1b72d3e0b39e2a2d8841de,"[main] Update dependencies from dotnet/emsdk (#111690)

* Update dependencies from https://github.com/dotnet/emsdk build 20250121.2

Microsoft.SourceBuild.Intermediate.emsdk , Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport
 From Version 10.0.0-alpha.1.25059.1 -> To Version 10.0.0-alpha.1.25071.2

Dependency coherency updates

runtime.linux-arm64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.linux-x64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.win-arm64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.win-x64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.osx-arm64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.osx-x64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.linux-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.linux-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.linux-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.linux-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.linux-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.linux-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.win-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.win-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.win-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.osx-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.osx-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.osx-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.osx-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.osx-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.osx-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.linux-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.linux-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.osx-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.osx-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.win-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.win-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport
 From Version 19.1.0-alpha.1.25055.2 -> To Version 19.1.0-alpha.1.25057.1 (parent: Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport

* Update dependencies from https://github.com/dotnet/emsdk build 20250124.1

Microsoft.SourceBuild.Intermediate.emsdk , Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport
 From Version 10.0.0-alpha.1.25059.1 -> To Version 10.0.0-preview.2.25074.1

* Update dependencies from https://github.com/dotnet/emsdk build 20250127.2

Microsoft.SourceBuild.Intermediate.emsdk , Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport
 From Version 10.0.0-alpha.1.25059.1 -> To Version 10.0.0-preview.2.25077.2

Dependency coherency updates

runtime.linux-arm64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.linux-x64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.win-arm64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.win-x64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.osx-arm64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.osx-x64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.linux-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.linux-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.linux-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.linux-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.linux-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.linux-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.win-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.win-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.win-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.osx-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.osx-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.osx-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.osx-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.osx-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.osx-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools
 From Version 19.1.0-alpha.1.25055.2 -> To Version 19.1.0-alpha.1.25070.1 (parent: Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport

* Update dependencies from https://github.com/dotnet/emsdk build 20250129.1

Microsoft.SourceBuild.Intermediate.emsdk , Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport
 From Version 10.0.0-alpha.1.25059.1 -> To Version 10.0.0-preview.2.25079.1

Dependency coherency updates

runtime.linux-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.linux-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.osx-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.osx-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.win-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.win-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport
 From Version 10.0.0-alpha.1.25057.1 -> To Version 10.0.0-alpha.1.25077.1 (parent: Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport

* Update dependencies from https://github.com/dotnet/emsdk build 20250130.1

Microsoft.SourceBuild.Intermediate.emsdk , Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport
 From Version 10.0.0-alpha.1.25059.1 -> To Version 10.0.0-preview.2.25080.1

* Update dependencies from https://github.com/dotnet/emsdk build 20250203.1

Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport , Microsoft.SourceBuild.Intermediate.emsdk
 From Version 10.0.0-alpha.1.25059.1 -> To Version 10.0.0-preview.2.25103.1

Dependency coherency updates

runtime.linux-arm64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.linux-x64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.win-arm64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.win-x64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.osx-arm64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.osx-x64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.linux-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.linux-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.linux-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.linux-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.linux-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.linux-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.win-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.win-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.win-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.osx-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.osx-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.osx-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.osx-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.osx-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.osx-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools
 From Version 19.1.0-alpha.1.25055.2 -> To Version 19.1.0-alpha.1.25077.1 (parent: Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-02-03 20:28:30+00:00,dotnet-maestro[bot],0,,,2,109,109,"[main] update dependencies from dotnet/emsdk (issue_ref)* update dependencies from build 20250121.2microsoft.sourcebuild.intermediate.emsdk , microsoft.net.workload.emscripten.current.manifest-10.0.100.transport from version 10.0.0-alpha.1.25059.1 -> to version 10.0.0-alpha.1.25071.2dependency coherency updatesruntime.linux-arm64.microsoft.netcore.runtime.jit.tools,runtime.linux-x64.microsoft.netcore.runtime.jit.tools,runtime.linux-musl-arm64.microsoft.netcore.runtime.jit.tools,runtime.linux-musl-x64.microsoft.netcore.runtime.jit.tools,runtime.win-arm64.microsoft.netcore.runtime.jit.tools,runtime.win-x64.microsoft.netcore.runtime.jit.tools,runtime.osx-arm64.microsoft.netcore.runtime.jit.tools,runtime.osx-x64.microsoft.netcore.runtime.jit.tools,runtime.linux-arm64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.linux-arm64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.linux-arm64.microsoft.netcore.runtime.mono.llvm.tools,runtime.linux-musl-arm64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.linux-musl-arm64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.linux-musl-arm64.microsoft.netcore.runtime.mono.llvm.tools,runtime.linux-x64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.linux-x64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.linux-x64.microsoft.netcore.runtime.mono.llvm.tools,runtime.linux-musl-x64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.linux-musl-x64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.linux-musl-x64.microsoft.netcore.runtime.mono.llvm.tools,runtime.win-x64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.win-x64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.win-x64.microsoft.netcore.runtime.mono.llvm.tools,runtime.osx-arm64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.osx-arm64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.osx-arm64.microsoft.netcore.runtime.mono.llvm.tools,runtime.osx-x64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.osx-x64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.osx-x64.microsoft.netcore.runtime.mono.llvm.tools,runtime.linux-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.linux-musl-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.linux-x64.microsoft.netcore.runtime.wasm.node.transport,runtime.linux-musl-x64.microsoft.netcore.runtime.wasm.node.transport,runtime.osx-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.osx-x64.microsoft.netcore.runtime.wasm.node.transport,runtime.win-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.win-x64.microsoft.netcore.runtime.wasm.node.transport from version 19.1.0-alpha.1.25055.2 -> to version 19.1.0-alpha.1.25057.1 (parent: microsoft.net.workload.emscripten.current.manifest-10.0.100.transport* update dependencies from build 20250124.1microsoft.sourcebuild.intermediate.emsdk , microsoft.net.workload.emscripten.current.manifest-10.0.100.transport from version 10.0.0-alpha.1.25059.1 -> to version 10.0.0-preview.2.25074.1* update dependencies from build 20250127.2microsoft.sourcebuild.intermediate.emsdk , microsoft.net.workload.emscripten.current.manifest-10.0.100.transport from version 10.0.0-alpha.1.25059.1 -> to version 10.0.0-preview.2.25077.2dependency coherency updatesruntime.linux-arm64.microsoft.netcore.runtime.jit.tools,runtime.linux-x64.microsoft.netcore.runtime.jit.tools,runtime.linux-musl-arm64.microsoft.netcore.runtime.jit.tools,runtime.linux-musl-x64.microsoft.netcore.runtime.jit.tools,runtime.win-arm64.microsoft.netcore.runtime.jit.tools,runtime.win-x64.microsoft.netcore.runtime.jit.tools,runtime.osx-arm64.microsoft.netcore.runtime.jit.tools,runtime.osx-x64.microsoft.netcore.runtime.jit.tools,runtime.linux-arm64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.linux-arm64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.linux-arm64.microsoft.netcore.runtime.mono.llvm.tools,runtime.linux-musl-arm64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.linux-musl-arm64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.linux-musl-arm64.microsoft.netcore.runtime.mono.llvm.tools,runtime.linux-x64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.linux-x64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.linux-x64.microsoft.netcore.runtime.mono.llvm.tools,runtime.linux-musl-x64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.linux-musl-x64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.linux-musl-x64.microsoft.netcore.runtime.mono.llvm.tools,runtime.win-x64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.win-x64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.win-x64.microsoft.netcore.runtime.mono.llvm.tools,runtime.osx-arm64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.osx-arm64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.osx-arm64.microsoft.netcore.runtime.mono.llvm.tools,runtime.osx-x64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.osx-x64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.osx-x64.microsoft.netcore.runtime.mono.llvm.tools from version 19.1.0-alpha.1.25055.2 -> to version 19.1.0-alpha.1.25070.1 (parent: microsoft.net.workload.emscripten.current.manifest-10.0.100.transport* update dependencies from build 20250129.1microsoft.sourcebuild.intermediate.emsdk , microsoft.net.workload.emscripten.current.manifest-10.0.100.transport from version 10.0.0-alpha.1.25059.1 -> to version 10.0.0-preview.2.25079.1dependency coherency updatesruntime.linux-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.linux-musl-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.linux-x64.microsoft.netcore.runtime.wasm.node.transport,runtime.linux-musl-x64.microsoft.netcore.runtime.wasm.node.transport,runtime.osx-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.osx-x64.microsoft.netcore.runtime.wasm.node.transport,runtime.win-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.win-x64.microsoft.netcore.runtime.wasm.node.transport from version 10.0.0-alpha.1.25057.1 -> to version 10.0.0-alpha.1.25077.1 (parent: microsoft.net.workload.emscripten.current.manifest-10.0.100.transport* update dependencies from build 20250130.1microsoft.sourcebuild.intermediate.emsdk , microsoft.net.workload.emscripten.current.manifest-10.0.100.transport from version 10.0.0-alpha.1.25059.1 -> to version 10.0.0-preview.2.25080.1* update dependencies from build 20250203.1microsoft.net.workload.emscripten.current.manifest-10.0.100.transport , microsoft.sourcebuild.intermediate.emsdk from version 10.0.0-alpha.1.25059.1 -> to version 10.0.0-preview.2.25103.1dependency coherency updatesruntime.linux-arm64.microsoft.netcore.runtime.jit.tools,runtime.linux-x64.microsoft.netcore.runtime.jit.tools,runtime.linux-musl-arm64.microsoft.netcore.runtime.jit.tools,runtime.linux-musl-x64.microsoft.netcore.runtime.jit.tools,runtime.win-arm64.microsoft.netcore.runtime.jit.tools,runtime.win-x64.microsoft.netcore.runtime.jit.tools,runtime.osx-arm64.microsoft.netcore.runtime.jit.tools,runtime.osx-x64.microsoft.netcore.runtime.jit.tools,runtime.linux-arm64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.linux-arm64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.linux-arm64.microsoft.netcore.runtime.mono.llvm.tools,runtime.linux-musl-arm64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.linux-musl-arm64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.linux-musl-arm64.microsoft.netcore.runtime.mono.llvm.tools,runtime.linux-x64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.linux-x64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.linux-x64.microsoft.netcore.runtime.mono.llvm.tools,runtime.linux-musl-x64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.linux-musl-x64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.linux-musl-x64.microsoft.netcore.runtime.mono.llvm.tools,runtime.win-x64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.win-x64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.win-x64.microsoft.netcore.runtime.mono.llvm.tools,runtime.osx-arm64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.osx-arm64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.osx-arm64.microsoft.netcore.runtime.mono.llvm.tools,runtime.osx-x64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.osx-x64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.osx-x64.microsoft.netcore.runtime.mono.llvm.tools from version 19.1.0-alpha.1.25055.2 -> to version 19.1.0-alpha.1.25077.1 (parent: microsoft.net.workload.emscripten.current.manifest-10.0.100.transport---------"
dotnet/runtime,fd9c728bd3560850afde9a38a063a07dc1f3ed96,"Include PDB for all TfmRuntimeSpecificPackageFile (#111879)

Previously this would only include the PDB for the primary output which
missed any other additions to TfmRuntimeSpecificPackageFile - such as
those from references or packages.",2025-02-03 20:51:37+00:00,Eric StJohn,0,,,1,1,1,include pdb for all tfmruntimespecificpackagefile (issue_ref)previously this would only include the pdb for the primary output whichmissed any other additions to tfmruntimespecificpackagefile - such asthose from references or packages.
dotnet/runtime,2728f2c80f167cc0d19d3811245faf9cb8c3c3b9,"use collection syntax in illink (#108458)

Co-authored-by: Sven Boemer <sbomer@gmail.com>
Co-authored-by: Andy Gocke <angocke@microsoft.com>",2025-02-03 21:11:30+00:00,kasperk81,0,,,7,11,10,use collection syntax in illink (issue_ref)
dotnet/runtime,688ce018d01c1164f78483ab730dc8046ee946af,[daccess] Do not use USE_DAC_TABLE_RVA on Apple platforms (#112076),2025-02-03 21:40:44+00:00,Filip Navara,0,,,2,4,4,[daccess] do not use use_dac_table_rva on apple platforms (issue_ref)
dotnet/runtime,72f4147c5261890e10b8f9615d3d4ae33dc4d5ec,"Update breaking change rules regarding byref/objref fields. (#112087)

New rule based on https://github.com/dotnet/runtime/pull/111584

---------

Co-authored-by: Stephen Toub <stoub@microsoft.com>",2025-02-03 21:41:38+00:00,Aaron Robinson,0,,,1,2,0,update breaking change rules regarding byref/objref fields. (issue_ref)new rule based on ---------
dotnet/runtime,4cfdb7d31e47073cda6b00f46ccd0e1289f8f2ce,"Use hardlinks in helixpublishwitharcade (#112091)

We're running out of disk space in native AOT runs e.g. in #111178.",2025-02-03 21:42:31+00:00,Michal Strehovský,0,,,1,1,1,use hardlinks in helixpublishwitharcade (issue_ref)we're running out of disk space in native aot runs e.g. in issue_ref.
dotnet/runtime,d38bb6eee033d3e500f7b2996b978098e867f384,"Remove `RequiresProcessIsolation` on InterfaceFolding tests (#112098)

Was looking at these and saw there's no need for isolation here.",2025-02-03 21:43:51+00:00,Michal Strehovský,0,,,37,0,74,remove on interfacefolding tests (issue_ref)was looking at these and saw there's no need for isolation here.
dotnet/runtime,05d94d94028b5622b19734e0e1b60d7aca4667b3,"Bump `StyleCop.Analyzers` to `1.2.0-beta.556` (#111278)

Co-authored-by: Viktor Hofer <viktor.hofer@microsoft.com>",2025-02-03 21:54:14+00:00,xtqqczze,0,,,1,1,1,bump to (issue_ref)
dotnet/runtime,3a99c64fe2f5814639537b9d8c798b09c4d42050,"arm64: Add support for Bitwise OR NOT & XOR NOT (#111893)

* arm64: Add support for Bitwise XOR NOT

* contributes towards #68028

* arm64: Add support for Bitwise OR NOT

* Update comments & add a tests that takes ints

* Add swap tests that take a int & uint",2025-02-03 23:59:22+00:00,Jonathan Davies,1,fae05be4f67a05ce024363ec4f393670d967c532,"JIT: Support custom `ClassLayout` instances with GC pointers in them (#112064)

- Add a `ClassLayoutBuilder` that can be used to build new `ClassLayout` instances with arbitrary GC pointers
- Add support for GC types to `LCL_FLD` stress to test some of this new support

Subsumes #111942
Fixes #103362",13,350,12,arm64: add support for bitwise or not & xor not (issue_ref)* arm64: add support for bitwise xor not* contributes towards issue_ref* arm64: add support for bitwise or not* update comments & add a tests that takes ints* add swap tests that take a int & uint
dotnet/runtime,2c7753540b961ef15ec36fc25715bd4469e91aa8,"Add Windows Server 2025 to test configurations (#111938)

* (WIP) Add Windows Server 2025 test runs

* Fixup names to match helix

* Remove missing image

* fix NegotiateStream_StreamToStream_Authentication_EmptyCredentials test

* Update eng/pipelines/libraries/helix-queues-setup.yml

Simplify selecting server.

Co-authored-by: Eric StJohn <ericstj@microsoft.com>

* Add back docker image.

* Remove excess matrix on InnerLoop

---------

Co-authored-by: wfurt <tweinfurt@yahoo.com>
Co-authored-by: Eric StJohn <ericstj@microsoft.com>",2025-02-04 04:38:10+00:00,Art Leonard,1,33612803be925e3ae2f8d8e66a068591a265d904,"Update Ubuntu and CentOS Stream versions (#112124)

* Update Ubuntu and CentOS Stream versions

* Fix image URI",3,13,4,add windows server 2025 to test configurations (issue_ref)* (wip) add windows server 2025 test runs* fixup names to match helix* remove missing image* fix negotiatestream_streamtostream_authentication_emptycredentials test* update eng/pipelines/libraries/helix-queues-setup.ymlsimplify selecting server.
dotnet/runtime,e567edb4e73ae134f6cc407ebfb5ceec78be057a,Re-enable HKDF-SHA3 on Azure Linux,2025-02-04 14:43:16+00:00,Kevin Jones,0,,,1,0,1,re-enable hkdf-sha3 on azure linux
dotnet/runtime,f6c74b8df8776dce39e9978d98cc835a81fe9232,"Jit: Conditional Escape Analysis and Cloning (#111473)

Enhance escape analysis to determine if an object escapes only under
failed GDV tests. If so, clone to create a path of code so that
the object doesn't escape, and then stack allocate the object.

More details in the included document.

Contributes to #108913

Co-authored-by: Aman Khalid <amankhalid@microsoft.com>",2025-02-04 15:26:07+00:00,Andy Ayers,1,72797525571f962081da2bd463706ffb291bf4e8,Fix Escape analysis readme (#113015),16,3048,139,"jit: conditional escape analysis and cloning (issue_ref)enhance escape analysis to determine if an object escapes only underfailed gdv tests. if so, clone to create a path of code so thatthe object doesn't escape, and then stack allocate the object.more details in the included document.contributes to issue_ref"
dotnet/runtime,d59ab5358ff794fa6605762ee5c02bb924531a24,"Remove unneeded DiagnosticSource content (#112116)

The IL link file was getting included as unnecessary content in transitive dependent projects which caused confusion.

Fixes #112110",2025-02-04 16:18:23+00:00,Noah Falk,1,9d16e263c3d7f25ea9f9c72293ccc3d8b3bc3557,"Support Telemetry Schema Url in tracing and metrics (#113034)

* Support Telemetry Schema Url in tracing and metrics

* Test fix

* Feedback

* Fix the setters in the ref code",1,1,1,remove unneeded diagnosticsource content (issue_ref)the il link file was getting included as unnecessary content in transitive dependent projects which caused confusion.fixes issue_ref
dotnet/runtime,d257079e2619912fb3e739aab3fc7119c490130a,"JIT: Unify handling of InstParam argument during inlining (#112119)

* Handle InstParam in the same way as all other arguments
* Insert the evaluation of the InstParam in the right spot when inlining
  succeeded

Fix #112092",2025-02-04 17:19:09+00:00,Jakob Botsch Nielsen,1,c6fd0543b67aec813b16fc9458afd2ec2716178b,Fix side-effect order for COMMA in impStoreStruct (#112455),5,88,69,jit: unify handling of instparam argument during inlining (issue_ref)* handle instparam in the same way as all other arguments* insert the evaluation of the instparam in the right spot when inlining succeededfix issue_ref
dotnet/runtime,d44116e0dc18ffd94b910bd03cdcf2c8219a59bd,"Use current STJ in HostModel and remove unnecessary audit suppressions (#109852)

* Use current STJ in HostModel and remove unnecessary audit suppressions

Fixes https://github.com/dotnet/runtime/issues/108262

* Remove unnecessary nuget audit suppressions

* Remove SetConfiguration from ProjectReference",2025-02-04 17:29:47+00:00,Viktor Hofer,1,ffece948c6b743eecc3528b7e5817aba0195b8c3,"React to NuGet package pruning warnings (#112357)

* React to NuGet package pruning warnings

Contributes to https://github.com/dotnet/sdk/pull/46642

NuGet added a new feature that automatically prunes package and project references that are provided by the shared framework that is targeted.

Resolve the few warnings that got emitted in ref projects when source-building the repository.

* Remove WarnOnProjectReferenceToFrameworkAssemblies target

* fix

* Aktualisieren von Microsoft.Extensions.Logging.Console.csproj

* Fix one more case

* Create PackageOverrides.txt in libs

* add empty line

* Suppress NU1511 for false positives

* One more hit",10,6,51,use current stj in hostmodel and remove unnecessary audit suppressions (issue_ref)* use current stj in hostmodel and remove unnecessary audit suppressionsfixes * remove unnecessary nuget audit suppressions* remove setconfiguration from projectreference
dotnet/runtime,731785c0ff0c95a5b955058e1128501d2c82463f,Delete copy of performance pipelines in previous location (#112113),2025-02-04 21:01:02+00:00,Cameron Aavik,0,,,3,0,190,delete copy of performance pipelines in previous location (issue_ref)
dotnet/runtime,96999291536892d5777ff9e7d67834f248652cd8,Annotate ConfiguredCancelableAsyncEnumerable T with allows ref struct and update extensions (#111953),2025-02-04 22:16:23+00:00,nietras,1,7b5f7f0806d51cb2d91bce341e4b7059ea14c419,"Add GCHandle<T> (#111307)

* Add GCHandle<T>

* Implementation and documentation

* PinnedGCHandle

* WeakGCHandle

* GCHandleExtensions

* Reference source

* Unit test

* Fix unit tests

* Maximize unsafety

* Remove interlock

* Allow pinning any object

* Nullable oblivious

* Avoid extra overhead of null check

* Reduce overhead of GetAddressOfArrayData and GetAddressOfStringData

* Add equality

* Remove equality operators

* Update semantic of GetAddressOfObjectData

* Update xmldoc

* Remove UnsafeGCHandle

* Update usages in CoreLib

* Update usages in NativeAot CoreLib

* Cleanup leaked handle in R2R

* Add xmldoc for exception

* Fix constraint

* Fix build

* Fix unintended change

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>
Co-authored-by: Aaron Robinson <arobins@microsoft.com>",3,16,6,annotate configuredcancelableasyncenumerable t with allows ref struct and update extensions (issue_ref)
dotnet/runtime,4c1ae74d7e3151c5b71246f2187145e3aa0e8397,"Change some workflows using `pull_request` to use `pull_request_target` instead (#112161)

* Change workflows to use pull_request_target instead of pull_request event
* Add CODEOWNERS entry
* Add initial readme",2025-02-05 00:05:19+00:00,Carlos Sánchez López,0,,,4,11,4,change some workflows using to use instead (issue_ref)* change workflows to use pull_request_target instead of pull_request event* add codeowners entry* add initial readme
dotnet/runtime,debf2276a9ea9f492d6c224c29c8c2334c4771a8,"[H/3] Fix handling H3_NO_ERROR (#112125)

* Fix handling H3_NO_ERROR

* Revert using change",2025-02-05 08:52:25+00:00,Marie Píchová,1,d6cd5777ad238107d66503fb834abbaab849f440,"[H/3] Clean up and fix Alt-Svc handling (#114528)

* Alt-Svc allow empty ALPN

* Fix Alt-Svc handling of clear and authority equality.

* Test alt-svc clear

* Update src/libraries/System.Net.Http/src/System/Net/Http/Headers/AltSvcHeaderValue.cs

Co-authored-by: Miha Zupan <mihazupan.zupan1@gmail.com>

---------

Co-authored-by: Miha Zupan <mihazupan.zupan1@gmail.com>",3,46,3,[h/3] fix handling h3_no_error (issue_ref)* fix handling h3_no_error* revert using change
dotnet/runtime,ff604c23939bc59f856ef67f1f3d18dd685ff7a2,"JIT: Set PGO data inconsistent when flow disappears in cast expansion (#112147)

Cast expansion can expand into a `BBJ_THROW` block. If that happens and
that block has flow into it, the PGO data becomes inconsistent.",2025-02-05 11:47:32+00:00,Jakob Botsch Nielsen,0,,,1,8,0,"jit: set pgo data inconsistent when flow disappears in cast expansion (issue_ref)cast expansion can expand into a block. if that happens andthat block has flow into it, the pgo data becomes inconsistent."
dotnet/runtime,58d1241bb5bc118ce86510b7028344578700cd2b,"Update dependencies from https://github.com/dotnet/emsdk build 20250204.1 (#112174)

Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport , Microsoft.SourceBuild.Intermediate.emsdk
 From Version 10.0.0-preview.2.25103.1 -> To Version 10.0.0-preview.2.25104.1

Dependency coherency updates

runtime.linux-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.linux-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.osx-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.osx-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.win-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.win-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport
 From Version 10.0.0-alpha.1.25077.1 -> To Version 10.0.0-alpha.1.25103.1 (parent: Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-02-05 15:12:59+00:00,dotnet-maestro[bot],0,,,2,22,22,"update dependencies from build 20250204.1 (issue_ref)microsoft.net.workload.emscripten.current.manifest-10.0.100.transport , microsoft.sourcebuild.intermediate.emsdk from version 10.0.0-preview.2.25103.1 -> to version 10.0.0-preview.2.25104.1dependency coherency updatesruntime.linux-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.linux-musl-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.linux-x64.microsoft.netcore.runtime.wasm.node.transport,runtime.linux-musl-x64.microsoft.netcore.runtime.wasm.node.transport,runtime.osx-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.osx-x64.microsoft.netcore.runtime.wasm.node.transport,runtime.win-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.win-x64.microsoft.netcore.runtime.wasm.node.transport from version 10.0.0-alpha.1.25077.1 -> to version 10.0.0-alpha.1.25103.1 (parent: microsoft.net.workload.emscripten.current.manifest-10.0.100.transport"
dotnet/runtime,27f045dcaeaec9537489e81c614b0a363f6bbc75,"Update dependencies from https://github.com/dotnet/roslyn build 20250204.11 (#112175)

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.14.0-2.25081.4 -> To Version 4.14.0-2.25104.11

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-02-05 15:13:36+00:00,dotnet-maestro[bot],0,,,2,11,11,"update dependencies from build 20250204.11 (issue_ref)microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.14.0-2.25081.4 -> to version 4.14.0-2.25104.11"
dotnet/runtime,d2b97032d0206c0204912ecfe9df399ab11edf6b,[Apple mobile] Use merged runners for runtime tests (#107118),2025-02-05 16:10:27+00:00,Jeremy Koritzinsky,1,e66906a533f36d5c077d18b95f7cc8f1db5dfd70,"[iOS] Fix `SkipOnCI` attribute support on Apple mobile devices (#120671)

* Add DOTNET_CI environment variable to xharness command

* Refactor xharness command execution to conditionally set DOTNET_CI environment variable

* Update AOT build command to always set DOTNET_CI environment variable

* Add environment variable switches to xharness command in AOT build process

* Fix environment variable expansion in iOS build commands

* Test env variables

* Set HELIX_WORKITEM_ROOT env variable",49,483,412,[apple mobile] use merged runners for runtime tests (issue_ref)
dotnet/runtime,c9af66ccb24faea7538b682e4d928557276d7367,"[Android] Decouple runtime initialization and entry point execution for Android sample (#111742)

By decoupling the initialization of runtime and execution of entry point, we can run the runtime initialization synchronously, forcing the onCreate callback to report the Displayed <name> for user 0: <time> after the runtime is fully initialized.

The execution of the entry point is still performed asynchronously to prevent the freeze of main thread for strenuous executables.

---------

Co-authored-by: Ivan Povazan <55002338+ivanpovazan@users.noreply.github.com>",2025-02-05 16:16:52+00:00,Matous Kozak,1,a8ce39671047f341dee551777d2d383596af601c,"[android] Fix java runner to not assume zip format when unzipping (#112654)

After https://github.com/dotnet/runtime/pull/112256 landed, there was a change to zip the test assets using `ZipFile.CreateFromDirectory` for cross platform support. This regressed `unzipAssets` in `MonoRunner.java` because it naivley assumed that directories would come before files in the zip archive.

This change fixes the problem by making sure directories are created first before writing files to disk.

Fixes https://github.com/dotnet/runtime/issues/112558",5,309,107,"[android] decouple runtime initialization and entry point execution for android sample (issue_ref)by decoupling the initialization of runtime and execution of entry point, we can run the runtime initialization synchronously, forcing the oncreate callback to report the displayed <name> for user 0: <time> after the runtime is fully initialized.the execution of the entry point is still performed asynchronously to prevent the freeze of main thread for strenuous executables.---------"
dotnet/runtime,5148d9ace0079753a253c2a198033932d5ddb768,"Replace HELPER_METHOD_FRAME with DynamicHelperFrame in patchpoints (#112025)

- Consolidate the 2 functions so we only need 1 copy of the C++ code (JIT_Patchpoint and JIT_PartialCompilationPatchpoint are still separate entrypoints, but the real meat of the logic is now all in PatchpointWorkerWorkerWithPolicy)
- Instead of using a managed function, I decided to use a transition frame to manage the case of calling into the runtime. In this case we are able to re-use the DynamicHelperFrame which appears to be sufficient.
- Add asm helpers in the current architectures which support on stack replacement to setup the TransitionBlock and call into the common C++ code

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>
Co-authored-by: Andy Ayers <andya@microsoft.com>",2025-02-05 18:09:02+00:00,David Wrighton,1,cee8434d1efab267301c84e1c2cef0b8d5fb7e8e,"Initial interpreter wire-in (#112202)

* Initial interpreter wire-in

This change adds initial support for a new interpreter to coreclr. The
interpreter will have a compilation phase that generates an IR byte code
and will behave as a JIT. This change allows the runtime to understand
that the generated code is an interpreter IR and when runtime attempts
to execute such a method, it calls into the ExecuteInterpretedMethod.
This will call into the interpreter execution code once the actual
interpreter is merged in.
The change uses the StubPrecode and FixupPrecode as a mean to call the
InterpreterStub with a special register loaded with a pointer to the
IR byte code of the methods and TransitionFrame to get the arguments
from. So instead of MethodDesc, the stub data holds the IR address and
instead of the usual generated code target, it holds the
InterpreterStub. There is a small twist for FixupPrecode. This precode
has two parts ensuring that we load the MethodDesc into the special
register only at the first call when we need to know what method we are
going to compile. In follow up calls, it invokes the target directly
without loading that register. For interpreter, it is always kept in the
state of going through the register loading path so that the interpreter
execution knows what to run.
The plan is to use AltJit mechanism to load the interpreter during its
development. That allows us to interpret only a subset of the methods
and fall back to JIT for the ones we cannot interpret yet.

* Fix incorrect lookup for CodeHeader

Found by PR feedback, instead of InterpretedCodeAddressFlag, it was
using 1.

* Add new precode type for interpreter

* Put all interpreter related code under #ifdef

Also enable the interpreter in debug / checked builds only by default

* Fix OSX x64 build break",12,382,332,"replace helper_method_frame with dynamichelperframe in patchpoints (issue_ref)- consolidate the 2 functions so we only need 1 copy of the c++ code (jit_patchpoint and jit_partialcompilationpatchpoint are still separate entrypoints, but the real meat of the logic is now all in patchpointworkerworkerwithpolicy)- instead of using a managed function, i decided to use a transition frame to manage the case of calling into the runtime. in this case we are able to re-use the dynamichelperframe which appears to be sufficient.- add asm helpers in the current architectures which support on stack replacement to setup the transitionblock and call into the common c++ code---------"
dotnet/runtime,b2749389254e40db1d4a34f2db331e2d5fe1b471,"JIT: some reworking for conditional escape analysis (#112194)

Reduce the amount of graph walking needed somewhat. Use compile
time handles consistently.",2025-02-05 19:13:05+00:00,Andy Ayers,0,,,1,39,37,jit: some reworking for conditional escape analysis (issue_ref)reduce the amount of graph walking needed somewhat. use compiletime handles consistently.
dotnet/runtime,9ff850ea5d29f487961d1c773bd495630aa8d2ea,"Allow the NativeAOT runtime pack to be specified as the ILC runtime package (#111876)

* Allow the NativeAOT runtime pack to be specified as the ILC runtime package

* Put the property in a PropertyGroup

* Finish sentence

* PR feedback",2025-02-05 19:27:52+00:00,Jeremy Koritzinsky,0,,,4,29,11,allow the nativeaot runtime pack to be specified as the ilc runtime package (issue_ref)* allow the nativeaot runtime pack to be specified as the ilc runtime package* put the property in a propertygroup* finish sentence* pr feedback
dotnet/runtime,99d48c2edfe84c79c078157e086a5cb18987066e,"[mono] ILStrip write directly to the output filestream (#112142)

* make sure the memorystream is disposed

* more cleanup

* Just write to the filestream directly

* Remove explicit flushes

* just write bytes",2025-02-05 20:39:09+00:00,Larry Ewing,0,,,1,30,39,[mono] ilstrip write directly to the output filestream (issue_ref)* make sure the memorystream is disposed* more cleanup* just write to the filestream directly* remove explicit flushes* just write bytes
dotnet/runtime,bcf880c1c5d5160564143f35acff0b8b2f95e360,Add ImmutableCollectionsMarshal.AsMemory (#112177),2025-02-05 21:07:19+00:00,Stephen Toub,0,,,4,72,0,add immutablecollectionsmarshal.asmemory (issue_ref)
dotnet/runtime,2faef6de9f7dd1f415513dc70040c43297ada043,"Factor positive lookaheads better into find optimizations (#112107)

* Factor positive lookaheads better into find optimizations

A positive lookahead at the start of a pattern can be used for determining find optimizations even when the non-zero-width portions of the pattern aren't. This helps particularly in cases where the positive lookahead contains an anchor or a literal.

Also extends the existing alternation reduction optimization to factor out anchors that begin every branch of an alternation.",2025-02-05 21:07:43+00:00,Stephen Toub,0,,,6,235,22,factor positive lookaheads better into find optimizations (issue_ref)* factor positive lookaheads better into find optimizationsa positive lookahead at the start of a pattern can be used for determining find optimizations even when the non-zero-width portions of the pattern aren't. this helps particularly in cases where the positive lookahead contains an anchor or a literal.also extends the existing alternation reduction optimization to factor out anchors that begin every branch of an alternation.
dotnet/runtime,53a3e33de22ed4dc67e7f27d9f3ef824b3b994f3,Add support for LDAPTLS_CACERTDIR \ TrustedCertificateDirectory (#111877),2025-02-05 21:29:46+00:00,Steve Harter,1,9130524f431ecbb134031e6ce031b2eab8eac740,"Fix LDAP network timeout not being honored on Linux (#119210)

* Initial plan

* Implement LDAP_OPT_NETWORK_TIMEOUT for Linux LDAP connections

Co-authored-by: ericstj <8918108+ericstj@users.noreply.github.com>

* Add tests to verify LDAP network timeout functionality on Linux

Co-authored-by: ericstj <8918108+ericstj@users.noreply.github.com>

* Fix microseconds calculation for LDAP network timeout

Co-authored-by: ericstj <8918108+ericstj@users.noreply.github.com>

* Address PR feedback: improve tests and error handling

Co-authored-by: ericstj <8918108+ericstj@users.noreply.github.com>

* Mark unreachable server timeout test as OuterLoop

Co-authored-by: ericstj <8918108+ericstj@users.noreply.github.com>

* Update src/libraries/System.DirectoryServices.Protocols/tests/LdapConnectionTests.cs

* Update src/libraries/System.DirectoryServices.Protocols/src/System/DirectoryServices/Protocols/ldap/LdapConnection.Linux.cs

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: ericstj <8918108+ericstj@users.noreply.github.com>
Co-authored-by: Eric StJohn <ericstj@microsoft.com>
Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",11,195,38,add support for ldaptls_cacertdir \ trustedcertificatedirectory (issue_ref)
dotnet/runtime,2ccf715aef508f7315f0a7438868de2220ce4f72,"JIT: Enable reusing profile-aware DFS trees between phases (#112198)

Revival of #112105. Add a switch to FlowGraphDfsTree that indicates if its traversal used edge likelihoods to determine the order in which successors were visited. This switch can then be used by debug checks that verify the DFS's correctness to check both types of trees. This functionality means we can frequently reuse the DFS tree annotations computed by LSRA throughout block layout.",2025-02-05 21:30:22+00:00,Aman Khalid,1,c1538339f3e644a699011dc0247ba419be506d50,"[JIT] [APX] Enable additional General Purpose Registers. (#108799)

* Enabling Additional Registers in JIT.

* Assing EnableAPX config

* Add encoding support for eGPR with REX2

* Adding stressMode, masking away eGPR for unsupported nodes and cleanup

* Caching lowGprs.

* Fix formatting

* More review cleanup.

* Fix formatting

* Updating names to remove STATIC

* Fix formatting",5,48,18,jit: enable reusing profile-aware dfs trees between phases (issue_ref)revival of issue_ref. add a switch to flowgraphdfstree that indicates if its traversal used edge likelihoods to determine the order in which successors were visited. this switch can then be used by debug checks that verify the dfs's correctness to check both types of trees. this functionality means we can frequently reuse the dfs tree annotations computed by lsra throughout block layout.
dotnet/runtime,726903dd22e25074d6302c6634aa829addcb3394,"Make `CalculateAssemblyAction` virtual. (#112154)

We need to override this in UnityLinker",2025-02-05 21:31:19+00:00,Mike Voorhees,0,,,1,1,1,make virtual. (issue_ref)we need to override this in unitylinker
dotnet/runtime,9caf9f15e46afb96c4ee2d2a15fc66d8eefe322c,"Add repo-specific condition to labeling workflows (#112169)

* Condition labeling workflows to only run on dotnet/runtime.
* Improve readme
* Add jeffhandley as explicit workflow owner

Co-authored-by: Jeff Handley <jeffhandley@users.noreply.github.com>",2025-02-06 00:58:28+00:00,Carlos Sánchez López,0,,,4,21,3,add repo-specific condition to labeling workflows (issue_ref)* condition labeling workflows to only run on dotnet/runtime.* improve readme* add jeffhandley as explicit workflow owner
dotnet/runtime,c587256d18fa01834508b0e5128b5192b48c08dc,"Add more detailed explanations to control-flow RegexOpcode values (#112170)

Add more detailed explanations to control-flow RegexOpcode values",2025-02-06 01:43:26+00:00,Stephen Toub,0,,,1,134,19,add more detailed explanations to control-flow regexopcode values (issue_ref)add more detailed explanations to control-flow regexopcode values
dotnet/runtime,eadb3576f4e52dee255fc785400c75953c8a2e33,Restructure JSImport/JSExport generators to share more code and utilize more Microsoft.Interop.SourceGeneration shared code (#107769),2025-02-06 02:01:24+00:00,Jeremy Koritzinsky,0,,,45,1348,1444,restructure jsimport/jsexport generators to share more code and utilize more microsoft.interop.sourcegeneration shared code (issue_ref)
dotnet/runtime,e7e82867ea472288c3f996e9ac66ffdc9f4a7378,"[cDAC] Implement ISOSDacInterface::GetMethodDescPtrFromIp (#110755)

Contributes to #108553

Tested using `!sos ip2md <ip>`.

---------

Co-authored-by: Max Charlamb <maxcharlamb@microsoft.com>
Co-authored-by: Elinor Fung <elfung@microsoft.com>",2025-02-06 02:23:47+00:00,Max Charlamb,1,4631ecec883a90ae9c29c058eea4527f9f2cb473,[cDAC] Resolve breaking change caused by removing ThunkHeap descriptor (#113737),1,56,1,[cdac] implement isosdacinterface::getmethoddescptrfromip (issue_ref)contributes to issue_reftested using .---------
dotnet/runtime,481eab6acca647c7b4fc34b48e4454143b8f84f8,"Add a feature flag to not use GVM in Linq Select (#109978)

Adds a feature flag to allow Linq Select to not use
a GVM implementation.",2025-02-06 05:59:58+00:00,Keegan,0,,,1,13,1,add a feature flag to not use gvm in linq select (issue_ref)adds a feature flag to allow linq select to not usea gvm implementation.
dotnet/runtime,f810340d7ee469abf4ccf937ab88f34dd64ef09c,"add important remarks to NrbfDecoder (#111286)

* add important remarks to NrbfDecoder

* add a warning about TypeName",2025-02-06 09:50:33+00:00,Adam Sitnik,0,,,5,21,0,add important remarks to nrbfdecoder (issue_ref)* add important remarks to nrbfdecoder* add a warning about typename
dotnet/runtime,4008f8266bac19aa9a09632ae924a073af52e637,Add LINQ Shuffle (#112173),2025-02-06 10:44:32+00:00,Stephen Toub,1,7eaf6c4b38b68d4a4d8bc6414e5efad6343a6a29,"Fixed instances where invalid was written as invalud or invalod (#117027)

* Fixed instances where invalid was written as invalud

* added invalod typo

---------

Co-authored-by: Jeff Handley <jeffhandley@users.noreply.github.com>",21,982,122,add linq shuffle (issue_ref)
dotnet/runtime,86dbcbdb9d711c2da04f188bc8d7ca7e1b03388f,[browser] Leave the fingerprint pattern in relative path (#112186),2025-02-06 12:14:39+00:00,Marek Fišera,0,,,1,0,1,[browser] leave the fingerprint pattern in relative path (issue_ref)
dotnet/runtime,666bb9dae30fca79b7b260d028566b2bd6ef19a7,Relax unrolling for structs with gc refs (#112227),2025-02-06 13:04:24+00:00,Egor Bogatov,0,,,1,6,5,relax unrolling for structs with gc refs (issue_ref)
dotnet/runtime,73efdf313bb69769ff5a441317e21a738e926c20,"JIT: Clean up 3-opt driver logic (#112210)

Follow-up to #111989. Now that we only run one pass of 3-opt, we can remove some cruft needed to maintain state across 3-opt passes. This is a meek attempt to reduce the size of #112004 by separating out some of the no-diff changes.",2025-02-06 15:41:20+00:00,Aman Khalid,1,5f652c2887c0ae0b96a0a9e3602a72e50713b520,"JIT: Limit 3-opt to 1000 swaps per run (#112259)

Fixes #111988.",2,16,24,"jit: clean up 3-opt driver logic (issue_ref)follow-up to issue_ref. now that we only run one pass of 3-opt, we can remove some cruft needed to maintain state across 3-opt passes. this is a meek attempt to reduce the size of issue_ref by separating out some of the no-diff changes."
dotnet/runtime,aeda1de6c20cb055e54c0527d595dfa919e2bfd6,Use SHA512 to generate cert thumbprint (#112193),2025-02-06 15:52:35+00:00,Marie Píchová,1,669df89081734ba2ed8cb499673c2ba1d9a72442,"Fix null reference exception in SslStream.Protocol (#113606)

* Fix possible null reference exception in SslStream.Protocol

* Update src/libraries/System.Net.Security/src/System/Net/Security/SslStream.Protocol.cs

Co-authored-by: Marie Píchová <11718369+ManickaP@users.noreply.github.com>

* code review feedback

* Fix build

---------

Co-authored-by: Marie Píchová <11718369+ManickaP@users.noreply.github.com>",3,6,5,use sha512 to generate cert thumbprint (issue_ref)
dotnet/runtime,fc8b63c3b36744b4012210e67cabb7fd96c938b5,"Update dependencies from https://github.com/dotnet/roslyn build 20250205.10 (#112224)

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.14.0-2.25104.11 -> To Version 4.14.0-2.25105.10

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-02-06 19:52:45+00:00,dotnet-maestro[bot],0,,,2,11,11,"update dependencies from build 20250205.10 (issue_ref)microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.14.0-2.25104.11 -> to version 4.14.0-2.25105.10"
dotnet/runtime,6d0eae5d8624ff4e0773da5fa6d7b43e7285fb7c,"JIT: Store padding information in ClassLayout/ClassLayoutBuilder (#112212)

* Rename `StructSegments` -> `SegmentList`
* Add `ClassLayout::GetNonPadding` to get the non-padding of a class
  layout. Computed lazily for `CORINFO_CLASS_HANDLE` backed layouts and
  saved ahead of time for custom layouts.
* Add `ClassLayoutBuilder::AddPadding` and
  `ClassLayoutBuilder::RemovePadding`
* Remove `Compiler::GetSignificantSegments` and switch uses to
  `ClassLayout->GetNonPadding()`",2025-02-06 20:12:02+00:00,Jakob Botsch Nielsen,1,109c9469a7f76bdc98300bd9c7bb4eaf014be971,"JIT: Invalidate LSRA's DFS tree if we aren't running new layout phase (#112364)

Fixes #112361.",11,234,115,jit: store padding information in classlayout/classlayoutbuilder (issue_ref)* rename -> * add to get the non-padding of a class layout. computed lazily for backed layouts and saved ahead of time for custom layouts.* add and * remove and switch uses to
dotnet/runtime,dc285ff099fc7d1e9c6072f8ee441405ad3d2f25,"[LoongArch64] Remove the register tp from callee saved registers in coreclr. (#108696)

* [LoongArch64] Remove the register tp from callee saved registers in coreclr.

* [LoongArch64] Remove the register tp from callee saved registers in coreclr.

---------

Co-authored-by: Manish Godse <61718172+mangod9@users.noreply.github.com>",2025-02-06 20:39:14+00:00,Sun Lijun,0,,,24,39,84,[loongarch64] remove the register tp from callee saved registers in coreclr. (issue_ref)* [loongarch64] remove the register tp from callee saved registers in coreclr.* [loongarch64] remove the register tp from callee saved registers in coreclr.---------
dotnet/runtime,9c2bfb9ab73961d149ea263c7a78606bfb4bc0b4,Disable newly added test on native AOT (#112095),2025-02-06 21:51:13+00:00,Michal Strehovský,0,,,1,3,1,disable newly added test on native aot (issue_ref)
dotnet/runtime,111ceb8a0fba166bc3a410314518576801cd48f9,"Enable building projects during BuildPass=2 in dotnet/runtime (#112201)

* Enable building projects during BuildPass=2 in dotnet/runtime

* Only provide the DotNetBuildPass=2 variant when actually in that build pass

* Use TargetOS/Arch instead (we don't have TargetRID available at this time in Build.proj)",2025-02-06 22:34:06+00:00,Jeremy Koritzinsky,0,,,2,3,1,enable building projects during buildpass=2 in dotnet/runtime (issue_ref)* enable building projects during buildpass=2 in dotnet/runtime* only provide the dotnetbuildpass=2 variant when actually in that build pass* use targetos/arch instead (we don't have targetrid available at this time in build.proj)
dotnet/runtime,e20549e302ee1e6abc8681ada96a052f27a0297c,"Our ""mono variant"" check doesn't work on non-desktop platforms, so explicitly skip on Browser and Wasi (#112246)",2025-02-06 23:26:44+00:00,Jeremy Koritzinsky,0,,,1,4,0,"our ""mono variant"" check doesn't work on non-desktop platforms, so explicitly skip on browser and wasi (issue_ref)"
dotnet/runtime,c1538339f3e644a699011dc0247ba419be506d50,"[JIT] [APX] Enable additional General Purpose Registers. (#108799)

* Enabling Additional Registers in JIT.

* Assing EnableAPX config

* Add encoding support for eGPR with REX2

* Adding stressMode, masking away eGPR for unsupported nodes and cleanup

* Caching lowGprs.

* Fix formatting

* More review cleanup.

* Fix formatting

* Updating names to remove STATIC

* Fix formatting",2025-02-07 03:29:09+00:00,DeepakRajendrakumaran,1,eb99e9380129ff621132e6c60113793804713860,"JIT: Fix illegal instruction encoding for float->float casts (#112217)

* fix illegal instruction encoding for floating->floating casts

* remove path-based trigger for jitstress-isas-avx512 pipeline",24,729,150,"[jit] [apx] enable additional general purpose registers. (issue_ref)* enabling additional registers in jit.* assing enableapx config* add encoding support for egpr with rex2* adding stressmode, masking away egpr for unsupported nodes and cleanup* caching lowgprs.* fix formatting* more review cleanup.* fix formatting* updating names to remove static* fix formatting"
dotnet/runtime,cee8434d1efab267301c84e1c2cef0b8d5fb7e8e,"Initial interpreter wire-in (#112202)

* Initial interpreter wire-in

This change adds initial support for a new interpreter to coreclr. The
interpreter will have a compilation phase that generates an IR byte code
and will behave as a JIT. This change allows the runtime to understand
that the generated code is an interpreter IR and when runtime attempts
to execute such a method, it calls into the ExecuteInterpretedMethod.
This will call into the interpreter execution code once the actual
interpreter is merged in.
The change uses the StubPrecode and FixupPrecode as a mean to call the
InterpreterStub with a special register loaded with a pointer to the
IR byte code of the methods and TransitionFrame to get the arguments
from. So instead of MethodDesc, the stub data holds the IR address and
instead of the usual generated code target, it holds the
InterpreterStub. There is a small twist for FixupPrecode. This precode
has two parts ensuring that we load the MethodDesc into the special
register only at the first call when we need to know what method we are
going to compile. In follow up calls, it invokes the target directly
without loading that register. For interpreter, it is always kept in the
state of going through the register loading path so that the interpreter
execution knows what to run.
The plan is to use AltJit mechanism to load the interpreter during its
development. That allows us to interpret only a subset of the methods
and fall back to JIT for the ones we cannot interpret yet.

* Fix incorrect lookup for CodeHeader

Found by PR feedback, instead of InterpretedCodeAddressFlag, it was
using 1.

* Add new precode type for interpreter

* Put all interpreter related code under #ifdef

Also enable the interpreter in debug / checked builds only by default

* Fix OSX x64 build break",2025-02-07 08:52:14+00:00,Jan Vorlicek,1,12fa8646917828c72903eb85827407095ad97f0e,"Fix exception handling in the prestub worker (#111937)

* Fix exception handling in prestub worker

There is a bug in the new exception handling when ThePreStub is called
from CallDescrWorkerInternal and the exception is propagated through
that. One of such cases is when a managed class is being initialized
during JITting and the constructor is in an assembly that's not found.
The bug results in skipping all the native frames upto a managed frame
that called that native chain that lead to the exception. In the
specific case I've mentioned, a lock in the native code is left in
locked state. That later leads to a hang. This was case was observed
with Roslyn invoking an analyzer where one of the dependencies was
missing.

The fix is to ensure that when ThePreStub is called by
CallDescrWorkerInternal, the exception is not caught in the
PreStubWorker. It is left flowing into the native calling code instead.

On Windows, we also need to prevent the ProcessCLRException invocation
to call into the managed exception handling code.

* Regression test

* Fix ExternalMethodFixupWorker and VSD_ResolveWorker too

These two need the same treatment when they end up being called from
CallDescrWorkerInternal.

Add regression tests for those cases too. These two cases don't result
in a visible failure, so the regression tests just exercise the specific
code paths.

* Disable the regression test for NativeAOT / MonoAOT

* Reverting change in PrestubWorker_Preemptive

This change is not needed, as that function cannot be called via
CallDescrWorker.

* Few forgotten cleanups

* Remove the RequiresProcessIsolation

* Disable the regression test for WASM

* Attempt to properly disable the test for WASM

* Another attempt to prevent running the test on WASM",12,211,2,"initial interpreter wire-in (issue_ref)* initial interpreter wire-inthis change adds initial support for a new interpreter to coreclr. theinterpreter will have a compilation phase that generates an ir byte codeand will behave as a jit. this change allows the runtime to understandthat the generated code is an interpreter ir and when runtime attemptsto execute such a method, it calls into the executeinterpretedmethod.this will call into the interpreter execution code once the actualinterpreter is merged in.the change uses the stubprecode and fixupprecode as a mean to call theinterpreterstub with a special register loaded with a pointer to their byte code of the methods and transitionframe to get the argumentsfrom. so instead of methoddesc, the stub data holds the ir address andinstead of the usual generated code target, it holds theinterpreterstub. there is a small twist for fixupprecode. this precodehas two parts ensuring that we load the methoddesc into the specialregister only at the first call when we need to know what method we aregoing to compile. in follow up calls, it invokes the target directlywithout loading that register. for interpreter, it is always kept in thestate of going through the register loading path so that the interpreterexecution knows what to run.the plan is to use altjit mechanism to load the interpreter during itsdevelopment. that allows us to interpret only a subset of the methodsand fall back to jit for the ones we cannot interpret yet.* fix incorrect lookup for codeheaderfound by pr feedback, instead of interpretedcodeaddressflag, it wasusing 1.* add new precode type for interpreter* put all interpreter related code under #ifdefalso enable the interpreter in debug / checked builds only by default* fix osx x64 build break"
dotnet/runtime,15f422d3990233e834aa5418169347629fc84c11,[x86] Force EBP frame for synchronized methods (#112243),2025-02-07 15:08:27+00:00,Filip Navara,0,,,1,5,2,[x86] force ebp frame for synchronized methods (issue_ref)
dotnet/runtime,99d6fc0cd3c160524166cc9a469b368e7d06a2ad,"Rework Unix socket option tracking (#111676)

This PR changes how socket option tracking and state transfer is implemented to support multi-connect on Unix. Instead of calling property setters and getters, the new logic uses `GetSocketOption` / `SetSocketOption` directly and extends the set of tracked options. The property logic did two things: validations and and the selection of the the necessary `SocketOptionLevel`. Regarding the former: when transferring the state, validation is unnecessary, since it already happened in the property setter of the original socket. Regarding the latter: `SocketOptionLevel` is now implied by `TrackableSocketOptions`. To make sure there is no mistake in the mapping, I generated the necessary mapping logic programatically based on option names/values taken from Windows headers: https://gist.github.com/antonfirsov/2cbfc37e665ad840ed7734994948c29a

The new implementation now tracks more options, however options which are specific to datagram/udp sockets were removed from the set of tracked options, since such sockets will never be multi-connected in practice. If we think we need to add some of them back, it is easy to do so since it is easy to extend the new tracking logic to other known options of `int` values.

Additionally, the PR relaxes the check done in `ValidateForMultiConnect`:  if the socket handle's state is still transferrable (`ExposedHandleOrUntrackedConfiguration == false`), we no longer throw from multi-endpoint API-s at the beginning of the call. If the first connect attempt fails and the handle is exposed, we terminate with the exception of the first failure, ignoring the remaining endpoints.",2025-02-07 16:24:15+00:00,Anton Firszov,1,edb2fac30147485b2b3fccf0c60fc52879fe4736,"Enable `SA1000`: Spacing around keywords (#112302)

* Enable `SA1000`: Spacing around keywords

Do not enable for `src/tools/illink/` due to different code style.

* fix `SA1000`

* fix `SA1000`

* fix `SA1000`

* fix `SA1000`

* fix `SA1000`

* fix `SA1000`

* `if(` -> `if (`

* `catch(` -> `catch (`

* `for(` -> `for (`

* `while(` -> `while (`",11,486,217,"rework unix socket option tracking (issue_ref)this pr changes how socket option tracking and state transfer is implemented to support multi-connect on unix. instead of calling property setters and getters, the new logic uses / directly and extends the set of tracked options. the property logic did two things: validations and and the selection of the the necessary . regarding the former: when transferring the state, validation is unnecessary, since it already happened in the property setter of the original socket. regarding the latter: is now implied by . to make sure there is no mistake in the mapping, i generated the necessary mapping logic programatically based on option names/values taken from windows headers: the new implementation now tracks more options, however options which are specific to datagram/udp sockets were removed from the set of tracked options, since such sockets will never be multi-connected in practice. if we think we need to add some of them back, it is easy to do so since it is easy to extend the new tracking logic to other known options of values.additionally, the pr relaxes the check done in : if the socket handle's state is still transferrable (), we no longer throw from multi-endpoint api-s at the beginning of the call. if the first connect attempt fails and the handle is exposed, we terminate with the exception of the first failure, ignoring the remaining endpoints."
dotnet/runtime,12fa8646917828c72903eb85827407095ad97f0e,"Fix exception handling in the prestub worker (#111937)

* Fix exception handling in prestub worker

There is a bug in the new exception handling when ThePreStub is called
from CallDescrWorkerInternal and the exception is propagated through
that. One of such cases is when a managed class is being initialized
during JITting and the constructor is in an assembly that's not found.
The bug results in skipping all the native frames upto a managed frame
that called that native chain that lead to the exception. In the
specific case I've mentioned, a lock in the native code is left in
locked state. That later leads to a hang. This was case was observed
with Roslyn invoking an analyzer where one of the dependencies was
missing.

The fix is to ensure that when ThePreStub is called by
CallDescrWorkerInternal, the exception is not caught in the
PreStubWorker. It is left flowing into the native calling code instead.

On Windows, we also need to prevent the ProcessCLRException invocation
to call into the managed exception handling code.

* Regression test

* Fix ExternalMethodFixupWorker and VSD_ResolveWorker too

These two need the same treatment when they end up being called from
CallDescrWorkerInternal.

Add regression tests for those cases too. These two cases don't result
in a visible failure, so the regression tests just exercise the specific
code paths.

* Disable the regression test for NativeAOT / MonoAOT

* Reverting change in PrestubWorker_Preemptive

This change is not needed, as that function cannot be called via
CallDescrWorker.

* Few forgotten cleanups

* Remove the RequiresProcessIsolation

* Disable the regression test for WASM

* Attempt to properly disable the test for WASM

* Another attempt to prevent running the test on WASM",2025-02-07 16:28:20+00:00,Jan Vorlicek,1,a38dfa4b0fc03e94a4177ad0fdb82eebfd968517,"Revert ""Fix exception handling in the prestub worker (#111937)"" (#112466)

This reverts commit 12fa8646917828c72903eb85827407095ad97f0e.",12,270,62,"fix exception handling in the prestub worker (issue_ref)* fix exception handling in prestub workerthere is a bug in the new exception handling when theprestub is calledfrom calldescrworkerinternal and the exception is propagated throughthat. one of such cases is when a managed class is being initializedduring jitting and the constructor is in an assembly that's not found.the bug results in skipping all the native frames upto a managed framethat called that native chain that lead to the exception. in thespecific case i've mentioned, a lock in the native code is left inlocked state. that later leads to a hang. this was case was observedwith roslyn invoking an analyzer where one of the dependencies wasmissing.the fix is to ensure that when theprestub is called bycalldescrworkerinternal, the exception is not caught in theprestubworker. it is left flowing into the native calling code instead.on windows, we also need to prevent the processclrexception invocationto call into the managed exception handling code.* regression test* fix externalmethodfixupworker and vsd_resolveworker toothese two need the same treatment when they end up being called fromcalldescrworkerinternal.add regression tests for those cases too. these two cases don't resultin a visible failure, so the regression tests just exercise the specificcode paths.* disable the regression test for nativeaot / monoaot* reverting change in prestubworker_preemptivethis change is not needed, as that function cannot be called viacalldescrworker.* few forgotten cleanups* remove the requiresprocessisolation* disable the regression test for wasm* attempt to properly disable the test for wasm* another attempt to prevent running the test on wasm"
dotnet/runtime,a557c4950b6847024ce972048d1086faa73091c1,"Update dependencies from https://github.com/dotnet/emsdk build 20250205.3 (#112223)

Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport , Microsoft.SourceBuild.Intermediate.emsdk
 From Version 10.0.0-preview.2.25104.1 -> To Version 10.0.0-preview.2.25105.3

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Larry Ewing <lewing@microsoft.com>",2025-02-07 18:52:36+00:00,dotnet-maestro[bot],0,,,2,5,5,"update dependencies from build 20250205.3 (issue_ref)microsoft.net.workload.emscripten.current.manifest-10.0.100.transport , microsoft.sourcebuild.intermediate.emsdk from version 10.0.0-preview.2.25104.1 -> to version 10.0.0-preview.2.25105.3"
dotnet/runtime,7c8d89cc8efa5dbe38b49caaeb39abbb0eee9746,"[main] Update dependencies from dotnet/icu, dotnet/runtime-assets (#112120)

* Update dependencies from https://github.com/dotnet/icu build 20250202.3

Microsoft.NETCore.Runtime.ICU.Transport
 From Version 10.0.0-preview.2.25074.1 -> To Version 10.0.0-preview.2.25102.3

* Update dependencies from https://github.com/dotnet/runtime-assets build 20250203.1

Microsoft.DotNet.CilStrip.Sources , Microsoft.NET.HostModel.TestData , System.ComponentModel.TypeConverter.TestData , System.Data.Common.TestData , System.Drawing.Common.TestData , System.Formats.Tar.TestData , System.IO.Compression.TestData , System.IO.Packaging.TestData , System.Net.TestData , System.Private.Runtime.UnicodeData , System.Runtime.Numerics.TestData , System.Runtime.TimeZoneData , System.Security.Cryptography.X509Certificates.TestData , System.Text.RegularExpressions.TestData , System.Windows.Extensions.TestData
 From Version 10.0.0-beta.25070.2 -> To Version 10.0.0-beta.25103.1

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-02-07 19:04:50+00:00,dotnet-maestro[bot],0,,,2,48,48,"[main] update dependencies from dotnet/icu, dotnet/runtime-assets (issue_ref)* update dependencies from build 20250202.3microsoft.netcore.runtime.icu.transport from version 10.0.0-preview.2.25074.1 -> to version 10.0.0-preview.2.25102.3* update dependencies from build 20250203.1microsoft.dotnet.cilstrip.sources , microsoft.net.hostmodel.testdata , system.componentmodel.typeconverter.testdata , system.data.common.testdata , system.drawing.common.testdata , system.formats.tar.testdata , system.io.compression.testdata , system.io.packaging.testdata , system.net.testdata , system.private.runtime.unicodedata , system.runtime.numerics.testdata , system.runtime.timezonedata , system.security.cryptography.x509certificates.testdata , system.text.regularexpressions.testdata , system.windows.extensions.testdata from version 10.0.0-beta.25070.2 -> to version 10.0.0-beta.25103.1---------"
dotnet/runtime,61b9cb83763b57227f2746662897252ba4d7fe56,Replace bitvector.h/cpp with ptrArgTP type in gc_unwind_x86.h/inl (#112268),2025-02-07 21:58:47+00:00,Filip Navara,0,,,7,587,875,replace bitvector.h/cpp with ptrargtp type in gc_unwind_x86.h/inl (issue_ref)
dotnet/runtime,c0b612c75dc918141c0fcd7a44e05be0541726d1,Remove repeated call to DllMain (#112285),2025-02-07 22:43:01+00:00,Gregg Miskelly,0,,,1,36,29,remove repeated call to dllmain (issue_ref)
dotnet/runtime,0f0f8ce751134cccf11e47c90f781597039146ef,"Fix init race in mono_class_try_get_[shortname]_class. (#112282)

We observed several crash reports in dotnet Android coming from
google play store, like this one:

https://github.com/dotnet/runtime/issues/109921#issuecomment-2640412870

and it happens at the following callstack:

mono_class_setup_vtable_full at /__w/1/s/src/mono/mono/metadata/class-setup-vtable.c:900
init_io_stream_slots at /__w/1/s/src/mono/mono/metadata/icall.c:3378
ves_icall_System_IO_Stream_HasOverriddenBeginEndRead at /__w/1/s/src/mono/mono/metadata/icall.c:3437
 (inlined by) ves_icall_System_IO_Stream_HasOverriddenBeginEndRead_raw at /__w/1/s/src/mono/mono/metadata/../metadata/icall-def.h:228

Looking a little deeper at that that code path expects call to
mono_class_try_get_stream_class to succeed since it calls
mono_class_setup_vtable on returned class pointer. There are other
places where code expectes mono_class_try_get_[shortname]_class to
always succeed or it will assert. Other locations handles the case
where it returns NULL meaning that the class has been linked out.

After looking into the macro implementation generating the
mono_class_try_get_[shortname]_class functions it appears that it has
a race where one thread could return NULL even if the class successfully
gets loaded by another racing thread. Initially that might have
been intentionally and callers would need to redo the call, but then
there is no way for callers to distinct between hitting the race and
class not available. Adding to the fact that code would also expect that
some critical classes never fail loading, like what
init_io_stream_slots does, this race ended up in race conditions.

In the past, this particular race in init_io_stream_slots was hidden
due to multiple calls to mono_class_try_get_stream_class minimzing the
risk of a race to cause a crash. That implementation was however
changed by https://github.com/dotnet/runtime/commit/e74da7c72c81787f8339df93cb6f13ac40b1e39d
ending up in just one call to mono_class_try_get_stream_class in the
critical paths.

Since code relies on mono_class_try_get_[shortname]_class to succeed
for some critical classes, code asserts if it returns NULL or crashes.
The fix will use acquire/release semantics on the static variable
guarding the cached type and make sure memory order is preserved
on both read and write. Previous implementation adopted a similar approach
but it took a copy of the static tmp_class into a local variable meaning
that memory order would not be guaranteed, even if it applied memory
barriers and volatile keywords on the static variables.

Fix also adds an assert into init_io_stream_slots since it expects
failures in calls to mono_class_try_get_stream_class as fatal.",2025-02-07 22:56:21+00:00,Johan Lorensson,1,6649e7f1f941d869498ecbf8710623ac86d9d115,"Guard members of MonoType union & fix related bugs (#111645)

* Guard members of MonoType union behind type check helpers
* Add _unchecked to call sites that are obviously guarded correctly
* Fix type confusion in bulk_type_log_single_type
* Fix genericinst fallthrough treating a MonoGenericClass ptr as a MonoClass ptr
* Fix type confusion in amd64 mini
* Fix type confusion in aot-runtime-wasm
* Prune a dead goto to make unchecked safe
* Fix two cases where we were partially initializing a stack-allocated MonoType instead of fully initializing it
* See https://github.com/dotnet/runtime/issues/112395 for detailed list of bugs fixed",2,11,14,"fix init race in mono_class_try_get_[shortname]_class. (issue_ref)we observed several crash reports in dotnet android coming fromgoogle play store, like this one:#issuecomment-2640412870and it happens at the following callstack:mono_class_setup_vtable_full at /__w/1/s/src/mono/mono/metadata/class-setup-vtable.c:900init_io_stream_slots at /__w/1/s/src/mono/mono/metadata/icall.c:3378ves_icall_system_io_stream_hasoverriddenbeginendread at /__w/1/s/src/mono/mono/metadata/icall.c:3437 (inlined by) ves_icall_system_io_stream_hasoverriddenbeginendread_raw at /__w/1/s/src/mono/mono/metadata/../metadata/icall-def.h:228looking a little deeper at that that code path expects call tomono_class_try_get_stream_class to succeed since it callsmono_class_setup_vtable on returned class pointer. there are otherplaces where code expectes mono_class_try_get_[shortname]_class toalways succeed or it will assert. other locations handles the casewhere it returns null meaning that the class has been linked out.after looking into the macro implementation generating themono_class_try_get_[shortname]_class functions it appears that it hasa race where one thread could return null even if the class successfullygets loaded by another racing thread. initially that might havebeen intentionally and callers would need to redo the call, but thenthere is no way for callers to distinct between hitting the race andclass not available. adding to the fact that code would also expect thatsome critical classes never fail loading, like whatinit_io_stream_slots does, this race ended up in race conditions.in the past, this particular race in init_io_stream_slots was hiddendue to multiple calls to mono_class_try_get_stream_class minimzing therisk of a race to cause a crash. that implementation was howeverchanged by ending up in just one call to mono_class_try_get_stream_class in thecritical paths.since code relies on mono_class_try_get_[shortname]_class to succeedfor some critical classes, code asserts if it returns null or crashes.the fix will use acquire/release semantics on the static variableguarding the cached type and make sure memory order is preservedon both read and write. previous implementation adopted a similar approachbut it took a copy of the static tmp_class into a local variable meaningthat memory order would not be guaranteed, even if it applied memorybarriers and volatile keywords on the static variables.fix also adds an assert into init_io_stream_slots since it expectsfailures in calls to mono_class_try_get_stream_class as fatal."
dotnet/runtime,7324dd154599807cad1e4c65b2fcf3acd0a01bfe,"Test failure - SendAsync_RequestVersion20_ResponseVersion20 (#112232)

* Change server to httpbin
* Update Http2NoPushHost and add Http2NoPushGetUris for improved testing",2025-02-07 23:11:27+00:00,Roman Konecny,0,,,2,4,2,test failure - sendasync_requestversion20_responseversion20 (issue_ref)* change server to httpbin* update http2nopushhost and add http2nopushgeturis for improved testing
dotnet/runtime,3998832b9727592c3a9e863d962e97f6ba61d42c,Observe exceptions from _connectionCloseTcs (#112190),2025-02-08 06:01:35+00:00,Marie Píchová,0,,,2,15,26,observe exceptions from _connectionclosetcs (issue_ref)
dotnet/runtime,475cd04b1dfc787f2f3090488a57e9439023f05e,Start regular pri-1 tests runs with native AOT (#111391),2025-02-08 10:49:39+00:00,Michal Strehovský,1,bc2a8ff724c86fe2c2c99c1e349a72c77b52e52b,"Enable passing tests (#112478)

Resolves dotnet/runtimelab#184
Resolves #101363",3,6,8,start regular pri-1 tests runs with native aot (issue_ref)
dotnet/runtime,ffb98130bf22d12483b918e296ce2e836b7d90e4,"Address feedback on dense FrozenDictionary optimization (#112298)

* Address feedback on dense FrozenDictionary optimization

Allow it to apply to chars and reduce cost of construction a bit.

* Update src/libraries/System.Collections.Immutable/src/System/Collections/Frozen/Integer/DenseIntegralFrozenDictionary.cs

Co-authored-by: skyoxZ <skyoxZ@qq.com>

---------

Co-authored-by: skyoxZ <skyoxZ@qq.com>",2025-02-08 15:06:03+00:00,Stephen Toub,0,,,3,64,91,address feedback on dense frozendictionary optimization (issue_ref)* address feedback on dense frozendictionary optimizationallow it to apply to chars and reduce cost of construction a bit.* update src/libraries/system.collections.immutable/src/system/collections/frozen/integer/denseintegralfrozendictionary.cs
dotnet/runtime,826d9313afff3c406df6f8c13a8d70bcbe4e34e8,"Enable `SA1206`: Keyword ordering (#112303)

https://github.com/DotNetAnalyzers/StyleCopAnalyzers/blob/master/documentation/SA1206.md",2025-02-08 15:20:59+00:00,xtqqczze,1,ea63985c1cf56b07324f87c54acb4d49875fa360,"Enable `SA1015`: Closing generic bracket should not be followed by a space (#112597)

* Enable `SA1015`: Closing generic bracket should not be followed by a space

Do not enable for `src/tools/illink/` due to different code style.

https://github.com/DotNetAnalyzers/StyleCopAnalyzers/blob/master/documentation/SA1015.md

* Fix `SA1015`",1,2,2,enable : keyword ordering (issue_ref)
dotnet/runtime,497236a2359f9de4b70b1dbd00e55449823e6f63,"update the location of assert for REG_ZR check (#112294)

* update the location of assert for REG_ZR check

* encodeZRtoSP() in caller",2025-02-08 16:56:35+00:00,Kunal Pathak,0,,,1,2,2,update the location of assert for reg_zr check (issue_ref)* update the location of assert for reg_zr check* encodezrtosp() in caller
dotnet/runtime,fb1d06107c12be0444390e3c2740f90df6d20005,Update Xcode casing (#112307),2025-02-08 23:53:17+00:00,Rich Lander,0,,,1,1,1,update xcode casing (issue_ref)
dotnet/runtime,2a1b35e8afe469e4db01de7ba96b9133acc55d38,"[main] Update dependencies from dotnet/roslyn (#112260)

* Update dependencies from https://github.com/dotnet/roslyn build 20250206.12

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.14.0-2.25105.10 -> To Version 4.14.0-2.25106.12

* Update dependencies from https://github.com/dotnet/roslyn build 20250207.8

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.14.0-2.25105.10 -> To Version 4.14.0-2.25107.8

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-02-09 01:30:47+00:00,dotnet-maestro[bot],0,,,2,11,11,"[main] update dependencies from dotnet/roslyn (issue_ref)* update dependencies from build 20250206.12microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.14.0-2.25105.10 -> to version 4.14.0-2.25106.12* update dependencies from build 20250207.8microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.14.0-2.25105.10 -> to version 4.14.0-2.25107.8---------"
dotnet/runtime,ca9893f6bda7866370c58bd03ed60854019fe5de,"JIT: initial support for stack allocating arrays of GC type (#112250)

Add the ability to create a ClassLayout for arrays, and use this to
unblock stack allocation for arrays with GC types.

Replaces #111686.",2025-02-09 02:06:49+00:00,Andy Ayers,1,bde9ba9d5fd3304acb843bb37d399eb92ccf90ed,"JIT: array allocation fixes (#112676)

Fix some issues with array stack allocation that are currently hard to observe:
* use correct method table for shared array types
* pad array layout out to a multiple of TARGET_POINTER_SIZE

It's currently not easy to observe the type of a stack allocated array as
accessing the type causes escape. But this becomes possible when supporting
span capture or once we have a version of the covariant store check that can
handle stack allocated arrays.

Non-padded layouts may mean elements just off the end of an odd-length
short or byte array won't be zeroed, which some unsafe uses may expect.

Added some test cases.",5,97,27,"jit: initial support for stack allocating arrays of gc type (issue_ref)add the ability to create a classlayout for arrays, and use this tounblock stack allocation for arrays with gc types.replaces issue_ref."
dotnet/runtime,34ec4f5f0bf2b67764db8a6413ba9975c41bc35a,Update the System.ComponentModel.Annotations solution to build in VS (#112313),2025-02-09 08:22:06+00:00,Jeff Handley,0,,,1,11,0,update the system.componentmodel.annotations solution to build in vs (issue_ref)
dotnet/runtime,1c3b1b5835cce7c61bb5c7bdab8468bb6ced47b6,"Add `GetDeclaringType` to `PropertyDefinition` and `EventDefinition`. (#111646)

* Add `GetDeclaringType` to `PropertyDefinition` and `EventDefinition`.

* Add test.

* Add documentation to all `GetDeclaringType` APIs.

* Remove unnecessary code.

* Update tests.

We assert that the test assembly has types with events and properties, and acknowledge that it does not have nested types.

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-02-10 00:16:47+00:00,Theodore Tsirpanis,1,617f9ee5f357a52309f21a732df04a87ee16adc9,"Add `TypeName` APIs to simplify metadata lookup. (#111598)

* Add `TypeName.Namespace` and tests.

* Add `TypeName.Unescape`.

* Update reference assembly.

* Remove file with duplicate `Unescape` method.

* Reduce allocations when calling `Namespace` across a type name hierachy.

* Fix nested types with namespaces.

* Add tests for `Unescape`.

* Update `GetNamespace` to fail if a nested type has a namespace.

* Remove support for nested types and escaped dots in namespaces.

* Remove support for escaped dots in `GetName`, and optimize it if the type is not nested.

* Simplify `Name` to avoid linear search of the full name in nested types.

* [mono] Do not treat nested type names as full names.

* Update algorithm to find namespace delimiter.

* Redirect all `Type.GetType` overloads in Mono through `TypeNameResolver`.

* Update tests to account for Mono using the managed type parser in `Type.GetType`.

* Disallow getting the namespace of non-simple nested type names.

* Ignore ambiguous match exceptions in non-extensible `Type.GetType` overloads.

This matches the behavior of CoreCLR and Native AOT.

* Use alternative strategy to provide a `(message, typeName)` overload in Mono, while still avoiding changes to the Mono runtime code.

---------

Co-authored-by: Adam Sitnik <adam.sitnik@gmail.com>
Co-authored-by: Jan Kotas <jkotas@microsoft.com>",12,136,1,"add to and . (issue_ref)* add to and .* add test.* add documentation to all apis.* remove unnecessary code.* update tests.we assert that the test assembly has types with events and properties, and acknowledge that it does not have nested types.---------"
dotnet/runtime,02f99e5609a45bf8568f3d49a01ee126576fd206,"Automated bump of chrome version (#112309)

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>",2025-02-10 07:53:43+00:00,github-actions[bot],0,,,1,4,4,automated bump of chrome version (issue_ref)
dotnet/runtime,edb2fac30147485b2b3fccf0c60fc52879fe4736,"Enable `SA1000`: Spacing around keywords (#112302)

* Enable `SA1000`: Spacing around keywords

Do not enable for `src/tools/illink/` due to different code style.

* fix `SA1000`

* fix `SA1000`

* fix `SA1000`

* fix `SA1000`

* fix `SA1000`

* fix `SA1000`

* `if(` -> `if (`

* `catch(` -> `catch (`

* `for(` -> `for (`

* `while(` -> `while (`",2025-02-10 13:30:34+00:00,xtqqczze,1,dfd3cc0166484125d8a913b5a8dce3d60e921e90,"[browser] Fix double dispose of GCHandle in BrowserWebSocket (#113464)

Co-authored-by: pavelsavara <pavel.savara@gmail.com>",81,147,145,enable : spacing around keywords (issue_ref)* enable : spacing around keywordsdo not enable for due to different code style.* fix * fix * fix * fix * fix * fix * -> * -> * -> * ->
dotnet/runtime,712209038f2ab28a4b3dea3897b07fb38fed0c46,[RISC-V] Synthesize some floating constants inline (#111529),2025-02-10 14:15:47+00:00,Tomasz Sowiński,0,,,2,45,18,[risc-v] synthesize some floating constants inline (issue_ref)
dotnet/runtime,9b77dd4f04ff763a16deae36430ea62d5fff95bf,"JIT: Don't reorder handler blocks (#112292)

Splitting this out of #112004 to simplify diff triage. The cost of executing a handler region should be dominated by the runtime overhead of exception handling, so I don't think we're losing anything meaningful in not reordering them. In the case of finally regions, if they are sufficiently hot, the JIT should've copied them into the main method region.",2025-02-10 14:44:16+00:00,Aman Khalid,0,,,3,75,111,"jit: don't reorder handler blocks (issue_ref)splitting this out of issue_ref to simplify diff triage. the cost of executing a handler region should be dominated by the runtime overhead of exception handling, so i don't think we're losing anything meaningful in not reordering them. in the case of finally regions, if they are sufficiently hot, the jit should've copied them into the main method region."
dotnet/runtime,68a88d16fd0dc689081d6e401837e1c2143fbf53,"Force write of local file header when ""version needed to extract"" changes (#112032)

aapt2 creates ZIP entries with a ""version needed to extract"" of 0.0, but sometimes writes these entries with deflate compression (which requires a ""version needed to extract"" of 2.0.)

When a ZipArchive is opened in Update mode and a new item is added, the central directory is written with the correct value for this field. However, the local file header for existing entries isn't rewritten (because it hasn't changed.) This leads to a mismatch between the local file header values and the central directory header values, which causes Android app builds to fail.

When an existing entry's ""version needed to extract"" is changed, we force its local file header to be rewritten.

There's a test to cover this. I've also added an entry to the packaged_resources.zip file from the issue and confirmed that the field matches between the local file header and the CD header for all compressed entries in the resultant file.


* Add failing test
* Force local file headers to be rewritten if the version to extract is changed
* Code review
Adding/correcting comments in test, and slightly reducing the diff in ZipArchiveEntry.

---------

Co-authored-by: Carlos Sánchez López <1175054+carlossanlop@users.noreply.github.com>",2025-02-10 15:53:58+00:00,Edward Neal,1,b5936a90de8f31fd756b730f8519f48b1de17994,"Revert ""version needed to extract"" fix to address mismatch between central and local directories when updating entries. (#112922)

This reverts commit 68a88d16fd0dc689081d6e401837e1c2143fbf53.",2,149,7,"force write of local file header when ""version needed to extract"" changes (issue_ref)aapt2 creates zip entries with a ""version needed to extract"" of 0.0, but sometimes writes these entries with deflate compression (which requires a ""version needed to extract"" of 2.0.)when a ziparchive is opened in update mode and a new item is added, the central directory is written with the correct value for this field. however, the local file header for existing entries isn't rewritten (because it hasn't changed.) this leads to a mismatch between the local file header values and the central directory header values, which causes android app builds to fail.when an existing entry's ""version needed to extract"" is changed, we force its local file header to be rewritten.there's a test to cover this. i've also added an entry to the packaged_resources.zip file from the issue and confirmed that the field matches between the local file header and the cd header for all compressed entries in the resultant file.* add failing test* force local file headers to be rewritten if the version to extract is changed* code reviewadding/correcting comments in test, and slightly reducing the diff in ziparchiveentry.---------"
dotnet/runtime,cc74292fb04d03b4fc91df200fab3da50654d64a,"System.Configuration.ConfigurationManager.Tests: use Assembly.Location to determine ThisApplicationPath. (#112231)

* System.Configuration.ConfigurationManager.Tests: use Assembly.Location to determine ThisApplicationPath.

* Remove exePath_UserLevelNone test.

This is functionally covered other tests (OpenExeConfiguration2 and OpenExeConfiguration2_ExePath_DoesNotExist)
that do not rely on the test deployment.",2025-02-10 17:10:09+00:00,Tom Deseyn,0,,,2,0,18,system.configuration.configurationmanager.tests: use assembly.location to determine thisapplicationpath. (issue_ref)* system.configuration.configurationmanager.tests: use assembly.location to determine thisapplicationpath.* remove exepath_userlevelnone test.this is functionally covered other tests (openexeconfiguration2 and openexeconfiguration2_exepath_doesnotexist)that do not rely on the test deployment.
dotnet/runtime,4dfe6575db2ff2ccb39a694e5aff5c719b944bf5,"Update dependencies from https://github.com/dotnet/arcade build 20250206.4 (#112338)

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.25080.7 -> To Version 10.0.0-beta.25106.4

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-02-10 18:03:50+00:00,dotnet-maestro[bot],0,,,5,171,61,"update dependencies from build 20250206.4 (issue_ref)microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.versiontools.tasks , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.25080.7 -> to version 10.0.0-beta.25106.4"
dotnet/runtime,d05d6c2ce8ab97d9652e953d608b0d42b7cda90e,"Have mono handle ConvertToIntegerNative for Double and Single (#112206)

* Have mono handle ConvertToIntegerNative for Double and Single

* Ensure indirect calls on Mono produce the expected result for ConvertToInteger native

* Ensure the mono interpreter also handles ConvertToIntegerNative for double and single

* Ensure mono uses OP_RCONV_TO_* for Single.ConvertIntegerToNative

* Ensure we decompose the opcode to support ones that are emulated",2025-02-10 18:15:58+00:00,Tanner Gooding,1,5ac238b788fdb3a9c9fac93990633bc0aedd8d14,Fix XML inheritdoc of Single/Double.SinCosPi() (#115651),4,106,7,have mono handle converttointegernative for double and single (issue_ref)* have mono handle converttointegernative for double and single* ensure indirect calls on mono produce the expected result for converttointeger native* ensure the mono interpreter also handles converttointegernative for double and single* ensure mono uses op_rconv_to_* for single.convertintegertonative* ensure we decompose the opcode to support ones that are emulated
dotnet/runtime,6070e26639614c2225ea026456945fdade08f81d,"Special-case empty enumerables in AsyncEnumerable (#112321)

The goal here is to handle known empty inputs in a way that reduces unnecessary allocation, e.g. avoiding an iterator allocation or avoiding an intermediate collection. This does not modify operators where there isn't such overhead.",2025-02-10 18:54:32+00:00,Stephen Toub,0,,,74,920,186,"special-case empty enumerables in asyncenumerable (issue_ref)the goal here is to handle known empty inputs in a way that reduces unnecessary allocation, e.g. avoiding an iterator allocation or avoiding an intermediate collection. this does not modify operators where there isn't such overhead."
dotnet/runtime,91bbb321494f4c274a5836226dc39105313859d0,"Do not run NAOT arm64 OSX testing on all PRs (#112342)

These legs have been constantly timing out since beginning of January because Helix is overloaded (e.g. #112073). In looking at why we don't see timeouts with CoreCLR, I found out we do not test ARM64 OSX with CoreCLR on all PRs. So this moves it to the same plan as e.g. ARM32 Linux.",2025-02-10 19:02:23+00:00,Michal Strehovský,0,,,1,0,1,"do not run naot arm64 osx testing on all prs (issue_ref)these legs have been constantly timing out since beginning of january because helix is overloaded (e.g. issue_ref). in looking at why we don't see timeouts with coreclr, i found out we do not test arm64 osx with coreclr on all prs. so this moves it to the same plan as e.g. arm32 linux."
dotnet/runtime,fe9e119647168599f2d2b1b9eb8782faca97dee2,"Internal monitor impl not using coop mutex causing deadlocks on Android. (#112358)

On Android we have seen ANR issues, like the one described in
https://github.com/dotnet/runtime/issues/111485. After investigating
several different dumps including all threads it turns out that we
could end up in a deadlock when init a monitor since that code path
didn't use a coop mutex and owner of lock could end up in GC code
while holding that lock, leading to deadlock if another thread was
about to lock the same monitor init lock. In several dumps we see
the following two threads:

Thread 1:

syscall+28
__futex_wait_ex(void volatile*, bool, int, bool, timespec const*)+14
NonPI::MutexLockWithTimeout(pthread_mutex_internal_t*, bool, timespec const*)+384
sgen_gc_lock+105
mono_gc_wait_for_bridge_processing_internal+70
sgen_gchandle_get_target+288
alloc_mon+358
ves_icall_System_Threading_Monitor_Monitor_wait+452
ves_icall_System_Threading_Monitor_Monitor_wait_raw+583

Thread 2:

syscall+28
__futex_wait_ex(void volatile*, bool, int, bool, timespec const*)+144
NonPI::MutexLockWithTimeout(pthread_mutex_internal_t*, bool, timespec const*)+652
alloc_mon+105
ves_icall_System_Threading_Monitor_Monitor_wait+452
ves_icall_System_Threading_Monitor_Monitor_wait_raw+583

So in this scenario Thread 1 holds monitor_mutex that is not a coop
mutex and end up trying to take GC lock, since it calls,
mono_gc_wait_for_bridge_processing_internal, but since a GC is already
started (waiting on STW to complete), Thread 1 will block holding
monitor_mutex.

Thread 2 will try to lock monitor_mutex as well, and since its not a
coop mutex it will block on OS __futex_wait_ex without changing
Mono thread state to blocking, preventing the STW from processing.

Fix is to switch to coop aware implementation of monitor_mutex.

Normally this should have been resolved on Android since we run
hybrid suspend meaning we should be able to run a signal handler on the
blocking thread that would suspend it meaning that STW would continue,
but for some reason the signal can't have been executed in this case putting the app under coop suspend limitations.

This fix will take care of the deadlock, but if there are issues running
Signals on Android, then threads not attached to runtime using
coop attach methods could end up in similar situations
blocking STW.",2025-02-10 21:58:46+00:00,Johan Lorensson,1,ab3d27fd2425f4403fcfbd04d93122d1f8bcb508,"[Mono] Fix wait's returning false on non-runtime queued user APC's. (#116001)

Mono's internal interrupt handling uses user APC to break waits in case runtime needs to interrupt threads. If that happens, wait will return false. For API's like `ManualResetEventSlim.Wait()` with `void` return, this can cause issues if the wait is broken prematurely. If a user APC have been queued to the thread, not triggered by internal runtime interrupt handling, it would lead to unexpected side effects.

Fix makes sure runtime ignores returns from WaitForSingleObjectEx/WaitForMultipleObjectsEx due to APC completions not initialized by runtime.

Fix also adds a new runtime test to trigger this scenario for Mono runtime on Windows.

Fixes https://github.com/dotnet/runtime/issues/115178.",1,4,4,"internal monitor impl not using coop mutex causing deadlocks on android. (issue_ref)on android we have seen anr issues, like the one described in after investigatingseveral different dumps including all threads it turns out that wecould end up in a deadlock when init a monitor since that code pathdidn't use a coop mutex and owner of lock could end up in gc codewhile holding that lock, leading to deadlock if another thread wasabout to lock the same monitor init lock. in several dumps we seethe following two threads:thread 1:syscall+28__futex_wait_ex(void volatile*, bool, int, bool, timespec const*)+14nonpi::mutexlockwithtimeout(pthread_mutex_internal_t*, bool, timespec const*)+384sgen_gc_lock+105mono_gc_wait_for_bridge_processing_internal+70sgen_gchandle_get_target+288alloc_mon+358ves_icall_system_threading_monitor_monitor_wait+452ves_icall_system_threading_monitor_monitor_wait_raw+583thread 2:syscall+28__futex_wait_ex(void volatile*, bool, int, bool, timespec const*)+144nonpi::mutexlockwithtimeout(pthread_mutex_internal_t*, bool, timespec const*)+652alloc_mon+105ves_icall_system_threading_monitor_monitor_wait+452ves_icall_system_threading_monitor_monitor_wait_raw+583so in this scenario thread 1 holds monitor_mutex that is not a coopmutex and end up trying to take gc lock, since it calls,mono_gc_wait_for_bridge_processing_internal, but since a gc is alreadystarted (waiting on stw to complete), thread 1 will block holdingmonitor_mutex.thread 2 will try to lock monitor_mutex as well, and since its not acoop mutex it will block on os __futex_wait_ex without changingmono thread state to blocking, preventing the stw from processing.fix is to switch to coop aware implementation of monitor_mutex.normally this should have been resolved on android since we runhybrid suspend meaning we should be able to run a signal handler on theblocking thread that would suspend it meaning that stw would continue,but for some reason the signal can't have been executed in this case putting the app under coop suspend limitations.this fix will take care of the deadlock, but if there are issues runningsignals on android, then threads not attached to runtime usingcoop attach methods could end up in similar situationsblocking stw."
dotnet/runtime,617f9ee5f357a52309f21a732df04a87ee16adc9,"Add `TypeName` APIs to simplify metadata lookup. (#111598)

* Add `TypeName.Namespace` and tests.

* Add `TypeName.Unescape`.

* Update reference assembly.

* Remove file with duplicate `Unescape` method.

* Reduce allocations when calling `Namespace` across a type name hierachy.

* Fix nested types with namespaces.

* Add tests for `Unescape`.

* Update `GetNamespace` to fail if a nested type has a namespace.

* Remove support for nested types and escaped dots in namespaces.

* Remove support for escaped dots in `GetName`, and optimize it if the type is not nested.

* Simplify `Name` to avoid linear search of the full name in nested types.

* [mono] Do not treat nested type names as full names.

* Update algorithm to find namespace delimiter.

* Redirect all `Type.GetType` overloads in Mono through `TypeNameResolver`.

* Update tests to account for Mono using the managed type parser in `Type.GetType`.

* Disallow getting the namespace of non-simple nested type names.

* Ignore ambiguous match exceptions in non-extensible `Type.GetType` overloads.

This matches the behavior of CoreCLR and Native AOT.

* Use alternative strategy to provide a `(message, typeName)` overload in Mono, while still avoiding changes to the Mono runtime code.

---------

Co-authored-by: Adam Sitnik <adam.sitnik@gmail.com>
Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-02-10 22:18:46+00:00,Theodore Tsirpanis,1,5854863b33ba57d45f9c25f38634e092687c49aa,"Fix failure in System.Reflection.Tests.GetTypeTests.GetType_InvalidAssemblyName (#114289)

Apply the fix to NativeAOT TypeNameResolver too

Fixes #114288",15,321,111,"add apis to simplify metadata lookup. (issue_ref)* add and tests.* add .* update reference assembly.* remove file with duplicate method.* reduce allocations when calling across a type name hierachy.* fix nested types with namespaces.* add tests for .* update to fail if a nested type has a namespace.* remove support for nested types and escaped dots in namespaces.* remove support for escaped dots in , and optimize it if the type is not nested.* simplify to avoid linear search of the full name in nested types.* [mono] do not treat nested type names as full names.* update algorithm to find namespace delimiter.* redirect all overloads in mono through .* update tests to account for mono using the managed type parser in .* disallow getting the namespace of non-simple nested type names.* ignore ambiguous match exceptions in non-extensible overloads.this matches the behavior of coreclr and native aot.* use alternative strategy to provide a overload in mono, while still avoiding changes to the mono runtime code.---------"
dotnet/runtime,b091d4da8bcb474d62c37fb4d008dfbc3600c0d7,"Update dependencies from https://github.com/dotnet/source-build-reference-packages build 20250204.2 (#112339)

Microsoft.SourceBuild.Intermediate.source-build-reference-packages
 From Version 10.0.608004 -> To Version 10.0.610402

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-02-11 01:16:04+00:00,dotnet-maestro[bot],0,,,1,2,2,update dependencies from build 20250204.2 (issue_ref)microsoft.sourcebuild.intermediate.source-build-reference-packages from version 10.0.608004 -> to version 10.0.610402
dotnet/runtime,ed8df422ccf406436b11edb1d6110c35207262b3,Code clean up in AP for NonNull* (#112027),2025-02-11 08:13:19+00:00,Egor Bogatov,1,a5f99c6f990ae7bcbde018232bafa93335afe1eb,"JIT: fix local assertion prop error for partial local comparisons (#112506)

If a JTRUE comparison only involves part of a local value we cannot make assertions
about the local as a whole.

Fixes #111352.

Restrict to TYP_LONG locals.",3,51,229,code clean up in ap for nonnull* (issue_ref)
dotnet/runtime,8ae8594b4f0730b7ba1b8a3a7d46069cfbbe5d7c,NativeAOT: Cover more opcodes in type preinitializer (#112073),2025-02-11 08:48:15+00:00,Steve,1,cd4f82e87bd5def1acee5d2c21e57ecb365630d7,"Differentiate `MethodTable`s that are/aren't visible to reflection (#112782)

Fixes #112029.

We use constructed/necessary `MethodTable`s to distinguish between MTs that are visible to user code vs those that aren't. We use unconstructed MTs for things like casts or `typeof` comparisons, and some of our data structures. We use constructed MTs for everything else. Necessary MT can skip generating some of the data such as GCDesc, vtable, or metadata.

The constructed/necessary `MethodTable`s get reconciled at object writing - if anything needed a constructed one, all references to necessary MTs gets rewritten to point to the constructed one (we never have two MTs for a single type).

Before this PR, we didn't have a ""constructed"" MT for uninstantiated generic type definitions. That's because those don't have GCDesc or vtable. But they still have metadata, so there is a possible saving.

This introduces a ""constructed""/necessary distinction for generic type definition MTs as well. The difference is in the availability of metadata.

It fixes cases like in the referenced bug where using a generic type definition in a typeof comparison (that we normally optimize) doesn't lead to the metadata being optimized away.",2,324,24,nativeaot: cover more opcodes in type preinitializer (issue_ref)
dotnet/runtime,8a22b878d004cfa55994af9672c7cfecd5357969,"JIT: Optimize struct parameter register accesses in the backend (#110819)

This PR adds an optimization in lowering to utilize the new parameter
register to local mappings added in #110795. The optimization detects IR
that is going to result in stack spills/loads and instead replaces them
with scalar locals that will be able to stay in registers.

Physical promotion benefits especially from this as it creates the kind
of IR that the optimization ends up kicking in for. The heuristics of
physical promotion are updated to account for the fact that the backend
is now able to do this optimization, making physical promotion more
likely to promote struct parameters.",2025-02-11 09:32:09+00:00,Jakob Botsch Nielsen,0,,,13,469,41,"jit: optimize struct parameter register accesses in the backend (issue_ref)this pr adds an optimization in lowering to utilize the new parameterregister to local mappings added in issue_ref. the optimization detects irthat is going to result in stack spills/loads and instead replaces themwith scalar locals that will be able to stay in registers.physical promotion benefits especially from this as it creates the kindof ir that the optimization ends up kicking in for. the heuristics ofphysical promotion are updated to account for the fact that the backendis now able to do this optimization, making physical promotion morelikely to promote struct parameters."
dotnet/runtime,6649e7f1f941d869498ecbf8710623ac86d9d115,"Guard members of MonoType union & fix related bugs (#111645)

* Guard members of MonoType union behind type check helpers
* Add _unchecked to call sites that are obviously guarded correctly
* Fix type confusion in bulk_type_log_single_type
* Fix genericinst fallthrough treating a MonoGenericClass ptr as a MonoClass ptr
* Fix type confusion in amd64 mini
* Fix type confusion in aot-runtime-wasm
* Prune a dead goto to make unchecked safe
* Fix two cases where we were partially initializing a stack-allocated MonoType instead of fully initializing it
* See https://github.com/dotnet/runtime/issues/112395 for detailed list of bugs fixed",2025-02-11 13:02:50+00:00,Katelyn Gadd,1,be1ef917b47413b6b66249e97066792a9fcb77ec,"Remove Assert in Method.MakeGeneric on Invalid Arg (#116788)

The call to mono_class_inflate_generic_method_checked will set error
when there are invalid types (e.g. typeof(void)/typeof(int*)) passed in.
This should not be an assert, it should fall to the ""Invalid generic
arguments"" message below.   This does lose the error returned by
mono_class_inflate_generic_method_checked but that error isn't user
friendly.  It would report be something like: ""MVAR 1 cannot be expanded
with type 0x1"" Instead report the more readable error to the user.

Fix: 71339",32,709,562,guard members of monotype union & fix related bugs (issue_ref)* guard members of monotype union behind type check helpers* add _unchecked to call sites that are obviously guarded correctly* fix type confusion in bulk_type_log_single_type* fix genericinst fallthrough treating a monogenericclass ptr as a monoclass ptr* fix type confusion in amd64 mini* fix type confusion in aot-runtime-wasm* prune a dead goto to make unchecked safe* fix two cases where we were partially initializing a stack-allocated monotype instead of fully initializing it* see for detailed list of bugs fixed
dotnet/runtime,ec118c7e798862fd69dc7fa6544c0d9849d32488,"Enable AltJits build for LoongArch64 and RiscV64 (#110282)

* Build LoongArch64 and RiscV64 AltJit

* Add a new target for alljitscommunity",2025-02-11 15:09:01+00:00,Steve,1,b61c07c1436b5057f2d658f232211c0032202a95,"Expose StressLog via CDAC and port StressLogAnalyzer to managed code (#104999)

* Start a StressLog contract for CDAC

Start on the data parsing and fill out the contract more

Implement stress message payload parsing and thread stress log iteration

Implement everything except for printing the string output

Implement output string formatting for stress log messages

Move all StressMsg logic into the contract and out of the data type.

Split the stress log contract into different versions and refactor out the StressLogHeader to be entirely a StressLogAnalyzer concern (not used in the cDAC implementation at all)

Expose the module table directly to avoid going through the StressLog object to read the module table (which isn't present in the memory-mapped log)

Give a nicer error message for an easy-to-fall-in special case in the data descriptor scraping.

Fix a few datadescriptor problems

* Start on StressLogAnalyzer port.

Move stress message formatting out of the contract.

* Load in and read the thread stress logs and the stress messages.

* Add support for Ix, I64 specifiers

* Refactor into src/test directories and add tests for basic format strings

* Add more tests and extend the signed integer test case to test a ton more cases (including the alignment scenarios).

* Add special pointer formatting hook and a default implementation for StressLogAnalyzer

* Write the command line and start work on porting over logic (first one is format string matching).

* Add GC heap map memory and default string handling

* Implement GC heap map association

* Fill in more processing and start on sketching out the output handling.

* Port over remaining features

* Remove native StressLogAnalyzer

* Get 'dump all messages' working correctly

* Fix format offset calculation and update contract md to include references to the used data descriptors.

* Add a conceptual description of how to format a StressLog message

* Implement escape sequence interpretation

* Redefine maxMsgSize to make it C++11 constexpr-compliant even with our debug return logging (make it a const instead of a function)

* Add ""is pointer in stresslog"" contract function for SOS's GCHandleLeaks functionality

* Add some additional members to the contract to allow implementing all SOS StressLog introspection

* Wire up ISOSDacInterface::GetStressLogAddress while I'm here

* Update the StressLog contract to better describe and cross-link the custom format specifiers

* Start adjusting output to match StressLogAnalyzer

* Fix discovering the first message of a new chunk

* Fix remaining output nits that would cause the most confusion.

* Lots of perf improvements and some fixes

* Rewrite GC time index searching for better perf

* Make GC thread filtering more aggressive and fix non-GC thread filtering.

Add support for %f because GC uses it.

* Hook into clr.tools and clr.toolstests subsets

* Remove uncessary cast

* Correctly implement the quit/retry commands

* Use string helpers from Target

* Remove dead code now that StressLogAnalyzer is in C#

* Update StressLogAnalyzer (not the tests) to the new refactoring.

* Fix tets and use Moq to mock the target instead of constructing a fake memory space

* Add support for padded strings as they're apparently used by the GC.

* PR feedback and allow a module table to be present or absent in v1/v2 (and remove v0) to support NativeAOT with no changes to the contract

* Fix typo

* Update IStressLog.cs

* Fix body and accessibility

* Make the message filter internal

* Move the formatter for stress messages into the Contracts assembly as the same logic will be used from any StressLog reader.

The implementation of the formatter will not be part of the contract itself, but the description of the format string's structure is part of the contract (this is already the case in this branch).

* Remove trailing references to StressLogAnalyzer.Tests

* Use composition instead of inheritance",19,81,47,enable altjits build for loongarch64 and riscv64 (issue_ref)* build loongarch64 and riscv64 altjit* add a new target for alljitscommunity
dotnet/runtime,44b7251f94772c69c2efb9daa7b69979d7ddd001,"Use enum for frametype not v table (#112166)

This change refactors the frame identification mechanism in the runtime by replacing the use of the VTable with an enum FrameIdentifier. The VTable-based approach more suited to C++ code, but presented challenges for assembly code and out-of-process inspections. By using FrameIdentifier, polymorphic dispatch is now handled via if-statements. This change also eliminates the need for GS cookies on Frame objects, as it is no longer necessary to protect the VTable.

Key changes include:

Renaming FrameType to FrameIdentifier
Introducing a GetFrameIdentifier method
This update streamlines frame management while improving performance and flexibility for various platforms.",2025-02-11 18:05:08+00:00,David Wrighton,1,48b566c7426ed6c6f73e621ac1283711d927bfd7,[LoongArch64] Fix a typo within PR#112166. (#112672),76,1286,1698,"use enum for frametype not v table (issue_ref)this change refactors the frame identification mechanism in the runtime by replacing the use of the vtable with an enum frameidentifier. the vtable-based approach more suited to c++ code, but presented challenges for assembly code and out-of-process inspections. by using frameidentifier, polymorphic dispatch is now handled via if-statements. this change also eliminates the need for gs cookies on frame objects, as it is no longer necessary to protect the vtable.key changes include:renaming frametype to frameidentifierintroducing a getframeidentifier methodthis update streamlines frame management while improving performance and flexibility for various platforms."
dotnet/runtime,108c5154f55423f7b369891f61a6223777de3d25,Update the exception message to reflect current behavior. (#112355),2025-02-11 18:54:21+00:00,Eirik Tsarpalis,0,,,1,2,2,update the exception message to reflect current behavior. (issue_ref)
dotnet/runtime,6626fca7f9f25f57c0f70c1e04fe5490113b6ae3,Remove duplicate definition of CORECLR_HOSTING_API_LINKAGE (#112096),2025-02-11 18:57:03+00:00,Filip Navara,0,,,1,0,6,remove duplicate definition of coreclr_hosting_api_linkage (issue_ref)
dotnet/runtime,4da708a7060d238354d79823e58839c1d92f7fd1,Fingerprint dotnet.js if writing import map to html is enabled (#112407),2025-02-11 19:00:03+00:00,Marek Fišera,0,,,1,1,0,fingerprint dotnet.js if writing import map to html is enabled (issue_ref)
dotnet/runtime,7e82ad9a9888b4b637faf6e420f50ac4f09383a3,"Wait to complete the test before releasing the agile reference. (#112387)

Otherwise we can end up with a use-after-free",2025-02-11 22:01:25+00:00,Jeremy Koritzinsky,0,,,1,1,2,wait to complete the test before releasing the agile reference. (issue_ref)otherwise we can end up with a use-after-free
dotnet/runtime,b1ab309161278d3bb81efe2718399cf9f0dfad41,"Never use heap for return buffers (#112060)

Co-authored-by: jakobbotsch <Jakob.botsch.nielsen@gmail.com>",2025-02-11 23:31:56+00:00,Egor Bogatov,1,abe6b9e3f61b3a093140574b168fc1e2afed9a41,"JIT: generalize ParseArrayAddress a bit more (#112527)

Now that we are stack allocating arrays, the array reference may be either TYP_BYREF
or TYP_I_IMPL, so try and recognize those cases when possible. In particular for OSR
methods the array allocation may ""disappear"" once we redirect flow to the OSR entry,
so relying on VN is insufficient.

Fixes #112429 (benchmark regression where we're measuring OSR code)",14,130,51,never use heap for return buffers (issue_ref)
dotnet/runtime,08b488a711682ea254d4046d0d20e910e413b53e,"Bring up android+coreclr windows build.  (#112256)

This pull request includes various changes to improve the build process for Android and cross-compiling on Windows. The most important changes include updates to build scripts, configuration files, and the addition of new scripts.

A side benefit of this change is that it sets the table for being able to cross compile other non-Windows configurations on Windows.

Contributes to https://github.com/dotnet/runtime/issues/111491

---------

Co-authored-by: Jeremy Koritzinsky <jkoritzinsky@gmail.com>",2025-02-12 00:39:57+00:00,Steve Pfister,1,d00aa729c27dabc443b6083956e82bcfe1a954cc,"[android] Fix android-x64 build on Windows (#114342)

Fixes incorrect arch check when using x64.",33,585,198,"bring up android+coreclr windows build. (issue_ref)this pull request includes various changes to improve the build process for android and cross-compiling on windows. the most important changes include updates to build scripts, configuration files, and the addition of new scripts.a side benefit of this change is that it sets the table for being able to cross compile other non-windows configurations on windows.contributes to ---------"
dotnet/runtime,8c92ae710024f0cfa5c5cdd5bf3f6ccaec3ff98a,Update SVE instructions that writes to GC regs (#112389),2025-02-12 00:56:48+00:00,Kunal Pathak,0,,,1,16,0,update sve instructions that writes to gc regs (issue_ref)
dotnet/runtime,93dd79997031a32e4034825bd671990dbc1e4ceb,"[main] Update dependencies from dotnet/roslyn (#112314)

* Update dependencies from https://github.com/dotnet/roslyn build 20250208.3

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.14.0-2.25107.8 -> To Version 4.14.0-2.25108.3

* Update dependencies from https://github.com/dotnet/roslyn build 20250210.8

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.14.0-2.25107.8 -> To Version 4.14.0-2.25110.8

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-02-12 03:02:09+00:00,dotnet-maestro[bot],0,,,2,11,11,"[main] update dependencies from dotnet/roslyn (issue_ref)* update dependencies from build 20250208.3microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.14.0-2.25107.8 -> to version 4.14.0-2.25108.3* update dependencies from build 20250210.8microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.14.0-2.25107.8 -> to version 4.14.0-2.25110.8---------"
dotnet/runtime,bc72823bcf425a6e31f770c4eade7e3c674cab09,Native DLLs: only load imported DLLs from System32 (#112359),2025-02-12 05:07:25+00:00,Austin Wise,0,,,2,7,0,native dlls: only load imported dlls from system32 (issue_ref)
dotnet/runtime,07f8ebdf5a703dc7f63b96202792dda6d05b1808,"`__ComObject` doesn't support dynamic interface map (#112375)

* __ComObject doesn't support dynamic interface map

In https://github.com/dotnet/runtime/pull/105965, an interface
was added to __ComObject. This made some previous checks
fail as they were written assuming __ComObject didn't have
any interfaces.",2025-02-12 05:26:00+00:00,Aaron Robinson,1,74be414d84c84f353ae2e471e63e431703efd398,"Address COM interop case involving legacy `wCode` usage. (#117596)

* Address COM interop case involving legacy wCode usage.

The wCode field in the EXCEPINFO is a 16-bit signed integer. This
is a legacy field for 16-bit Windows, but is still used in many COM
servers. The current implementation assumed it would result in an
Exception using Marshal.GetExceptionForHR(), but converting a
short to an int, will rarely result in a negative value which means
null will almost always be returned. This change checks if the
exception is null and if so, creates a simple COMException with the
error code.",7,122,4,doesn't support dynamic interface map (issue_ref)* __comobject doesn't support dynamic interface mapin an interfacewas added to __comobject. this made some previous checksfail as they were written assuming __comobject didn't haveany interfaces.
dotnet/runtime,7be653ff888c486469bad07c3affb38644f19fac,"[Android] Run CoreCLR functional tests on Android (#112283)

* Setup a new job to run CoreCLR functional tests on Android 

---------

Co-authored-by: Ivan Povazan <55002338+ivanpovazan@users.noreply.github.com>",2025-02-12 09:23:21+00:00,Milos Kotlar,0,,,3,79,1,[android] run coreclr functional tests on android (issue_ref)* setup a new job to run coreclr functional tests on android ---------
dotnet/runtime,06037f8de67097d216ab82c080b41a4094c45183,Merge store/loads for return buffers (#112459),2025-02-12 14:02:55+00:00,Egor Bogatov,0,,,1,8,1,merge store/loads for return buffers (issue_ref)
dotnet/runtime,7bb850f5f660e815aefe5a0937c6c29635820af8,"Don't build host tools when building the cross-os DACs (#112454)

* Don't build host tools when building the cross-os DACs

* Update Microsoft.CrossOsDiag.Private.CoreCLR.proj",2025-02-12 15:23:40+00:00,Jeremy Koritzinsky,0,,,1,2,1,don't build host tools when building the cross-os dacs (issue_ref)* don't build host tools when building the cross-os dacs* update microsoft.crossosdiag.private.coreclr.proj
dotnet/runtime,70a577cde59b500c5da40b36b44e3250395d39db,"Move generation of SuggestedBindingRedirects.targets to inner build (#112379)

* Move generation of SuggestedBindingRedirects.targets to inner build

These targets depend on the AssemblyVersion of the library which is
specific to the inner-build of the library.  Generate them in the inner-build.

* Update src/libraries/System.Resources.Extensions/src/System.Resources.Extensions.csproj",2025-02-12 16:22:15+00:00,Eric StJohn,0,,,1,7,6,move generation of suggestedbindingredirects.targets to inner build (issue_ref)* move generation of suggestedbindingredirects.targets to inner buildthese targets depend on the assemblyversion of the library which isspecific to the inner-build of the library. generate them in the inner-build.* update src/libraries/system.resources.extensions/src/system.resources.extensions.csproj
dotnet/runtime,14c4743ba6bc2b401944feec690fd564f1e0f497,"assert for not null XmlNode (#112412)

* assert for not null XmlNode

---------

Co-authored-by: KL\Bochkarev_d <Dmitry.Bochkarev@kaspersky.com>",2025-02-12 17:00:44+00:00,dmitr1ibo4kar3v,0,,,1,2,1,assert for not null xmlnode (issue_ref)* assert for not null xmlnode---------
dotnet/runtime,a4f9ec2720b744bb66fd71ecad5f6c08e86376eb,JIT: Move passed-by-reference argument information to new ABI info (#112449),2025-02-12 17:01:23+00:00,Jakob Botsch Nielsen,0,,,14,144,101,jit: move passed-by-reference argument information to new abi info (issue_ref)
dotnet/runtime,f922c4341b7ed8887bf6389da13decd7826e1b62,Add X509CertificateLoader Security Design doc,2025-02-12 19:30:34+00:00,Jeremy Barton,0,,,1,363,0,add x509certificateloader security design doc
dotnet/runtime,5cae5184860690eeba52510856a36fb1d070e772,"[android] Update internal documentation on CoreCLR on Android experimental support (#112034)

First version of CoreCLR on Android internal docs

---------

Co-authored-by: Elinor Fung <elfung@microsoft.com>",2025-02-12 19:41:00+00:00,Ivan Povazan,0,,,5,171,59,[android] update internal documentation on coreclr on android experimental support (issue_ref)first version of coreclr on android internal docs---------
dotnet/runtime,fcd9339f16500a4954d84e9d0d93a99e84b08987,"Localized file check-in by OneLocBuild Task: Build definition ID 679: Build ID 2641321 (#112439)

* Localized file check-in by OneLocBuild Task: Build definition ID 679: Build ID 2640338

* Localized file check-in by OneLocBuild Task: Build definition ID 679: Build ID 2640338

* Localized file check-in by OneLocBuild Task: Build definition ID 679: Build ID 2640352

* Localized file check-in by OneLocBuild Task: Build definition ID 679: Build ID 2640352

* Localized file check-in by OneLocBuild Task: Build definition ID 679: Build ID 2640520

* Localized file check-in by OneLocBuild Task: Build definition ID 679: Build ID 2640520

* Localized file check-in by OneLocBuild Task: Build definition ID 679: Build ID 2640711

* Localized file check-in by OneLocBuild Task: Build definition ID 679: Build ID 2640711

* Localized file check-in by OneLocBuild Task: Build definition ID 679: Build ID 2641250

* Localized file check-in by OneLocBuild Task: Build definition ID 679: Build ID 2641250

* Localized file check-in by OneLocBuild Task: Build definition ID 679: Build ID 2641321

* Localized file check-in by OneLocBuild Task: Build definition ID 679: Build ID 2641321",2025-02-12 19:44:16+00:00,dotnet bot,1,f592992e1c0d2b6766c547f1f73eae32a9b13eaf,"Create error on LibraryImport of generic delegate (#114827)

Fixes #113590",13,14,14,localized file check-in by onelocbuild task: build definition id 679: build id 2641321 (issue_ref)* localized file check-in by onelocbuild task: build definition id 679: build id 2640338* localized file check-in by onelocbuild task: build definition id 679: build id 2640338* localized file check-in by onelocbuild task: build definition id 679: build id 2640352* localized file check-in by onelocbuild task: build definition id 679: build id 2640352* localized file check-in by onelocbuild task: build definition id 679: build id 2640520* localized file check-in by onelocbuild task: build definition id 679: build id 2640520* localized file check-in by onelocbuild task: build definition id 679: build id 2640711* localized file check-in by onelocbuild task: build definition id 679: build id 2640711* localized file check-in by onelocbuild task: build definition id 679: build id 2641250* localized file check-in by onelocbuild task: build definition id 679: build id 2641250* localized file check-in by onelocbuild task: build definition id 679: build id 2641321* localized file check-in by onelocbuild task: build definition id 679: build id 2641321
dotnet/runtime,751acdef8e947ab5bd602721ea0cd7884c5a3e4a,Simplify `AssemblyName.EscapeCodeBase` and remove `unsafe`. (#111095),2025-02-12 20:35:54+00:00,Theodore Tsirpanis,0,,,1,58,140,simplify and remove . (issue_ref)
dotnet/runtime,a38dfa4b0fc03e94a4177ad0fdb82eebfd968517,"Revert ""Fix exception handling in the prestub worker (#111937)"" (#112466)

This reverts commit 12fa8646917828c72903eb85827407095ad97f0e.",2025-02-12 21:27:29+00:00,Jan Kotas,1,8192afac7d6b71af67599429137a57f1472b1d90,"Fix new EH hang on DebugBreak (#112640)

* Fix new EH hang on DebugBreak

The new exception handling doesn't work well with the DebugBreak in some
cases. E.g. when it is invoked from FATAL_GC_ERROR. The new EH attempts
to handle the STATUS_BREAKPOINT stemming from the DebugBreak, allocate a
managed exception object and hangs since it cannot do that when the GC
is running.

The cause is a missing check for the breakpoint exception in the
ProcessCLRExceptionNew that is present in the old ProcessCLRException.
To fix it, I've copied that code to the ProcessCLRExceptionNew.

Close #112599

* Never process breakpoints via the new EH",12,62,270,"revert ""fix exception handling in the prestub worker (issue_ref)"" (issue_ref)this reverts commit 12fa8646917828c72903eb85827407095ad97f0e."
dotnet/runtime,92b4704ce4f2f9403d0e020b4c253c51202a1a50,"TypeName.FullName: reduce allocations (#112350)

* reduce the number of allocations

* apply similar optimizations to Name and AssemblyQualifiedName

---------

Co-authored-by: Steve Harter <steveharter@users.noreply.github.com>",2025-02-12 21:28:38+00:00,Adam Sitnik,0,,,5,161,117,typename.fullname: reduce allocations (issue_ref)* reduce the number of allocations* apply similar optimizations to name and assemblyqualifiedname---------
dotnet/runtime,1df5a5b75974001c9aaf59348f6b3627b9917a7d,"Add chromedriver support to simple-server (#112484)

* add option to open URL through the selenium/chromedriver
 * add option to detect line in the chromedriver output and exit",2025-02-12 21:35:17+00:00,Radek Doulik,0,,,3,99,1,add chromedriver support to simple-server (issue_ref)* add option to open url through the selenium/chromedriver * add option to detect line in the chromedriver output and exit
dotnet/runtime,e417d2bbce348b5f06b2bfe9ed3ab0b190379f24,"Simplify TypeBuilderImpl.MatchesTheFilter (#112464)

Fixes number of corner cases

Contributes to #112344",2025-02-12 22:18:24+00:00,Jan Kotas,1,bb418ada05fce96c5d576119d3234e9c80ca371a,"Propagate `Type.GetInterfaces` through dataflow analysis (#114149)

Fixes dotnet/linker#1731

We currently maintain two invariants:

1. The types returned by the API will have `.Interfaces` annotations at minimum
2. If the parent type was annotated `.All`, the types returned by the API will also be `.All`

We do this in the logic that keeps things, but we don't do this in terms of dataflow analysis warnings (the types retrieved from the array are not annotated as such, as far as the analysis is concerned). Because of the lacking annotation, we have warning suppressions in multiple places within the framework.

This fixes it.",1,1,17,simplify typebuilderimpl.matchesthefilter (issue_ref)fixes number of corner casescontributes to issue_ref
dotnet/runtime,6fe852a43152e45dc2e98bb747187d5bfe9f19e3,Do not overwrite gcrefs masks present in reg1/reg2 fields (#112469),2025-02-13 00:40:20+00:00,Kunal Pathak,0,,,1,18,7,do not overwrite gcrefs masks present in reg1/reg2 fields (issue_ref)
dotnet/runtime,e694cf4a9c1990ff7550a5003d50a35b4a6db73a,Delete area-CrossGen/NGEN-coreclr (#112508),2025-02-13 01:18:07+00:00,Jan Kotas,0,,,1,0,1,delete area-crossgen/ngen-coreclr (issue_ref)
dotnet/runtime,92e7ab035acfb04f57df85324785c7acab2a1040,"[mono][wasm] AOT more methods containing EH clauses (#111318)

WASM aot supports the `deopt` mode for a method, in which case the method will be aot compiled but the exception handlers are later invoked via the interpreter, if an exception is thrown. This is an alternative to fully interpreting the method in question. A problem can arise if an exception is caught inside a finally handler, because the start of the finally handler will be executed with AOT and then, once the exception is caught, the rest of the handler would be executed with the interprer. This is because the implementation of ENDFINALLY in the interpreter requires some information to have been initialized when the handler is called, initialization which is missing since the handler was called by AOT.

The original code referenced this issue, but the condition to detect this situation was very relaxed, including common cases like `try { try {} catch {} } finally { }`. This commit changes the check so it is only hit for scenarios like `try { } finally { try { } catch { } }`.

Co-authored-by: Larry Ewing <lewing@microsoft.com>",2025-02-13 02:06:09+00:00,Vlad Brezae,0,,,1,2,2,"[mono][wasm] aot more methods containing eh clauses (issue_ref)wasm aot supports the mode for a method, in which case the method will be aot compiled but the exception handlers are later invoked via the interpreter, if an exception is thrown. this is an alternative to fully interpreting the method in question. a problem can arise if an exception is caught inside a finally handler, because the start of the finally handler will be executed with aot and then, once the exception is caught, the rest of the handler would be executed with the interprer. this is because the implementation of endfinally in the interpreter requires some information to have been initialized when the handler is called, initialization which is missing since the handler was called by aot.the original code referenced this issue, but the condition to detect this situation was very relaxed, including common cases like . this commit changes the check so it is only hit for scenarios like ."
dotnet/runtime,61d250c185beeff442b1abdda259c086e8682646,"[main] Update dependencies from dotnet/hotreload-utils, dotnet/icu, dotnet/runtime-assets, dotnet/sdk (#112337)

* Update dependencies from https://github.com/dotnet/hotreload-utils build 20250203.1

Microsoft.DotNet.HotReload.Utils.Generator.BuildTool
 From Version 10.0.0-alpha.0.25077.1 -> To Version 10.0.0-alpha.0.25103.1

* Update dependencies from https://github.com/dotnet/sdk build 20250208.4

Microsoft.DotNet.ApiCompat.Task
 From Version 10.0.100-alpha.1.25077.2 -> To Version 10.0.100-preview.2.25108.4

* Update dependencies from https://github.com/dotnet/icu build 20250209.1

Microsoft.NETCore.Runtime.ICU.Transport
 From Version 10.0.0-preview.2.25102.3 -> To Version 10.0.0-preview.2.25109.1

* Update dependencies from https://github.com/dotnet/runtime-assets build 20250210.1

Microsoft.DotNet.CilStrip.Sources , Microsoft.NET.HostModel.TestData , System.ComponentModel.TypeConverter.TestData , System.Data.Common.TestData , System.Drawing.Common.TestData , System.Formats.Tar.TestData , System.IO.Compression.TestData , System.IO.Packaging.TestData , System.Net.TestData , System.Private.Runtime.UnicodeData , System.Runtime.Numerics.TestData , System.Runtime.TimeZoneData , System.Security.Cryptography.X509Certificates.TestData , System.Text.RegularExpressions.TestData , System.Windows.Extensions.TestData
 From Version 10.0.0-beta.25103.1 -> To Version 10.0.0-beta.25110.1

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-02-13 03:25:50+00:00,dotnet-maestro[bot],0,,,2,54,54,"[main] update dependencies from dotnet/hotreload-utils, dotnet/icu, dotnet/runtime-assets, dotnet/sdk (issue_ref)* update dependencies from build 20250203.1microsoft.dotnet.hotreload.utils.generator.buildtool from version 10.0.0-alpha.0.25077.1 -> to version 10.0.0-alpha.0.25103.1* update dependencies from build 20250208.4microsoft.dotnet.apicompat.task from version 10.0.100-alpha.1.25077.2 -> to version 10.0.100-preview.2.25108.4* update dependencies from build 20250209.1microsoft.netcore.runtime.icu.transport from version 10.0.0-preview.2.25102.3 -> to version 10.0.0-preview.2.25109.1* update dependencies from build 20250210.1microsoft.dotnet.cilstrip.sources , microsoft.net.hostmodel.testdata , system.componentmodel.typeconverter.testdata , system.data.common.testdata , system.drawing.common.testdata , system.formats.tar.testdata , system.io.compression.testdata , system.io.packaging.testdata , system.net.testdata , system.private.runtime.unicodedata , system.runtime.numerics.testdata , system.runtime.timezonedata , system.security.cryptography.x509certificates.testdata , system.text.regularexpressions.testdata , system.windows.extensions.testdata from version 10.0.0-beta.25103.1 -> to version 10.0.0-beta.25110.1---------"
dotnet/runtime,9c20ee0f022cc5a7b32d7e20fbfad0e7fdd6a846,"Update dependencies from https://github.com/dotnet/xharness build 20250203.1 (#112335)

Microsoft.DotNet.XHarness.CLI , Microsoft.DotNet.XHarness.TestRunners.Common , Microsoft.DotNet.XHarness.TestRunners.Xunit
 From Version 10.0.0-prerelease.25077.1 -> To Version 10.0.0-prerelease.25103.1

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-02-13 03:26:57+00:00,dotnet-maestro[bot],0,,,3,10,10,"update dependencies from build 20250203.1 (issue_ref)microsoft.dotnet.xharness.cli , microsoft.dotnet.xharness.testrunners.common , microsoft.dotnet.xharness.testrunners.xunit from version 10.0.0-prerelease.25077.1 -> to version 10.0.0-prerelease.25103.1"
dotnet/runtime,34844943716a6f9795636a4352151231905f108b,"Update dependencies from https://dev.azure.com/dnceng/internal/_git/dotnet-optimization build 20250204.10 (#112336)

optimization.linux-arm64.MIBC.Runtime , optimization.linux-x64.MIBC.Runtime , optimization.windows_nt-arm64.MIBC.Runtime , optimization.windows_nt-x64.MIBC.Runtime , optimization.windows_nt-x86.MIBC.Runtime , optimization.PGO.CoreCLR
 From Version 1.0.0-prerelease.25079.10 -> To Version 1.0.0-prerelease.25104.10

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-02-13 03:28:22+00:00,dotnet-maestro[bot],0,,,2,18,18,"update dependencies from build 20250204.10 (issue_ref)optimization.linux-arm64.mibc.runtime , optimization.linux-x64.mibc.runtime , optimization.windows_nt-arm64.mibc.runtime , optimization.windows_nt-x64.mibc.runtime , optimization.windows_nt-x86.mibc.runtime , optimization.pgo.coreclr from version 1.0.0-prerelease.25079.10 -> to version 1.0.0-prerelease.25104.10"
dotnet/runtime,505e3171007810999a7f56672b9f70332609273f,"Ensure Loader tests create deps file (#112500)

Fixes #112471",2025-02-13 05:59:15+00:00,Eric StJohn,1,2c5b3eed583278d858f06773e91449f92f1fd8dd,"[mono] [hotreload] Adjust row_size and size_bitfield  from the baseline based on the delta sizes (#113995)

* Fix applying hot reload changes when the delta table has a bigger len than the baseline table.",2,0,4,ensure loader tests create deps file (issue_ref)fixes issue_ref
dotnet/runtime,91e90555042fc4ff122dfc61807384885af63e99,"Add owners of the new area-CodeGen-interpreter-coreclr (#112483)

This area will be used to track issues and work items for the interpreter on CoreCLR",2025-02-13 08:45:58+00:00,Vitek Karas,0,,,1,1,0,add owners of the new area-codegen-interpreter-coreclr (issue_ref)this area will be used to track issues and work items for the interpreter on coreclr
dotnet/runtime,8cec9e0b25b28813dd03a00dbdfdf5d4fa7dd0e3,"Pin web assembly server 2025 docker image (#112509)

Latest builds of docker images are broken with latest VMs.",2025-02-13 10:00:21+00:00,Eric StJohn,0,,,1,1,1,pin web assembly server 2025 docker image (issue_ref)latest builds of docker images are broken with latest vms.
dotnet/runtime,e9a91f90b84e79a2d21f480778e5d4850579b594,"JIT: Skip parameter register preferencing in OSR methods (#112452)

Parameters are not passed in registers for OSR methods, so preferencing
to certain registers based on this information does not make sense.",2025-02-13 10:06:37+00:00,Jakob Botsch Nielsen,0,,,4,10,8,"jit: skip parameter register preferencing in osr methods (issue_ref)parameters are not passed in registers for osr methods, so preferencingto certain registers based on this information does not make sense."
dotnet/runtime,953bc61ba9fc14dd1031ce83fc2700c7129042ac,Enabled TestSelfIsFrozenNonEnregisteredStructWithExtraArgs on mono (#112482),2025-02-13 10:27:26+00:00,Jeremi Kurdek,0,,,1,0,1,enabled testselfisfrozennonenregisteredstructwithextraargs on mono (issue_ref)
dotnet/runtime,d4f570d331e533b47c6cb50a1fc97953778785f1,"Add tests for add/sub (extended-register) combinations on ARM64 (#112408)

Contributes to #68028",2025-02-13 16:00:19+00:00,snickolls-arm,0,,,2,140,0,add tests for add/sub (extended-register) combinations on arm64 (issue_ref)contributes to issue_ref
dotnet/runtime,66b39df953abe04aeb3aafefef09fd5fd4737152,Remove unnecessary Unsafe.As call from StringValues (#112507),2025-02-13 16:11:02+00:00,Levi Broderick,0,,,1,1,1,remove unnecessary unsafe.as call from stringvalues (issue_ref)
dotnet/runtime,45caaf85faa654114f7a3744910df86d8e92882f,"Improve Enumerable.Skip and Enumerable.Take performance (#112401)

* improve Enumerable.Skip and Enumerable.Take performance

* use TryGetSpan

* use TryGetSpan at IndexOf in IListSkipTakeIterator",2025-02-13 16:45:22+00:00,miyaji255,1,3232b4407f1ea18195cbfe13422b31b174f01a38,"Fix LINQ handling of iterator.Take(...).Last(...) (#112680)

When the Take amount is larger than the number of elements in the source `Iterator<T>`, Last ends up throwing an exception and LastOrDefault ends up returning the default value, rather than returning the last value in the taken region.

As part of fixing this, I sured up the tests to try to cover more such sequences of operations. In doing so, the tests got a lot slower, so I tracked down and fixed places where we were doing a lot of unnecessary work.",1,11,0,improve enumerable.skip and enumerable.take performance (issue_ref)* improve enumerable.skip and enumerable.take performance* use trygetspan* use trygetspan at indexof in ilistskiptakeiterator
dotnet/runtime,98e0bbebad35f64e5ba8396fc5d03d68808068d5,Use attribute constructor signature with optional parameter (#112476),2025-02-13 17:26:16+00:00,Milos Kotlar,0,,,1,2,1,use attribute constructor signature with optional parameter (issue_ref)
dotnet/runtime,4058c09bc224b9ee13a0c65312f562af262d8da1,"[Android] Remove CoreCLR functional tests on Android from extra-platforms (#112496)

* Remove coreclr android job from extra-platforms
---------

Co-authored-by: Matous Kozak <55735845+matouskozak@users.noreply.github.com>",2025-02-13 19:33:10+00:00,Milos Kotlar,0,,,2,3,34,[android] remove coreclr functional tests on android from extra-platforms (issue_ref)* remove coreclr android job from extra-platforms---------
dotnet/runtime,3aaffd0b93c13731cbf85e0174bfb228339a4f34,Disable Shake Read tests on Azure Linux.,2025-02-13 20:19:25+00:00,Kevin Jones,0,,,1,5,1,disable shake read tests on azure linux.
dotnet/runtime,77ccd7b81e81627c8cb1ab124adc3c98f6ee388b,Remove broken link of Reflection In AOT (#112536),2025-02-13 21:12:03+00:00,Hamed Naeemaei,1,dc3cec8abfd5f54b2a6ac8141fa74a04357e346f,"Remove orphaned limitations.md file and fix broken link in NativeAOT docs (#117390)

* Add link to official Native AOT documentation at top of README

* Remove orphaned limitations.md file and update README.md

* Remove links to compiling and debugging docs to focus on developer docs and advanced scenarios as requested by @agocke

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: agocke <515774+agocke@users.noreply.github.com>
Co-authored-by: jkotas <6668460+jkotas@users.noreply.github.com>",1,0,1,remove broken link of reflection in aot (issue_ref)
dotnet/runtime,87959c65405e8dabb736a9f1123c4f8848a1bbd6,Don't run RangeCheck if no GT_BOUNDS_CHECK were seen (#112512),2025-02-14 04:09:11+00:00,Egor Bogatov,0,,,5,22,11,don't run rangecheck if no gt_bounds_check were seen (issue_ref)
dotnet/runtime,42423ef91c9f23381d99dee708fa55336318debc,"Run TypeIntrinsics tests with native AOT (#112477)

I don't think the `CreateDynamic` flavors test anything interesting from codegen perspective. The `IsValueType` and `IsValueTypeObj` methods are going to be called using reflection, but nothing interesting will happen in the method body (it's a very regular method body). All the `dynamic` keyword is doing there is that a ton of reflection is going to happen before we execute the regular method body.",2025-02-14 07:10:31+00:00,Michal Strehovský,0,,,5,24,28,"run typeintrinsics tests with native aot (issue_ref)i don't think the flavors test anything interesting from codegen perspective. the and methods are going to be called using reflection, but nothing interesting will happen in the method body (it's a very regular method body). all the keyword is doing there is that a ton of reflection is going to happen before we execute the regular method body."
dotnet/runtime,02127c782adbf0cded3ed0778d4bf694e5e75996,"JIT: Don't put cold blocks in RPO during layout (#112448)

Split off from #112004. Excluding cold blocks from the loop-aware RPO simplifies how we compute the initial layout to feed into 3-opt, as it eliminates the need to manually move cold blocks out-of-line, instead allowing them to sink to the end of the method. This has the consequence of changing -- most likely worsening -- the layout of cold sections. However, our current threshold for ""cold"" is low enough that I don't think this churn matters: While BB_COLD_WEIGHT is 0.01, we compare this to normalized weights scaled by BB_UNITY_WEIGHT (100), so normalized weights must be below 0.0001 to be considered cold. In other words, profile data must suggest a block executes less than 0.01% (not 1%) of the time to be excluded from reordering.",2025-02-14 17:16:23+00:00,Aman Khalid,0,,,1,3,3,"jit: don't put cold blocks in rpo during layout (issue_ref)split off from issue_ref. excluding cold blocks from the loop-aware rpo simplifies how we compute the initial layout to feed into 3-opt, as it eliminates the need to manually move cold blocks out-of-line, instead allowing them to sink to the end of the method. this has the consequence of changing -- most likely worsening -- the layout of cold sections. however, our current threshold for ""cold"" is low enough that i don't think this churn matters: while bb_cold_weight is 0.01, we compare this to normalized weights scaled by bb_unity_weight (100), so normalized weights must be below 0.0001 to be considered cold. in other words, profile data must suggest a block executes less than 0.01% (not 1%) of the time to be excluded from reordering."
dotnet/runtime,ad90a0bb6db5870bc68b2275788bb73ccc99d87e,Fix AV in DBI under Watson when no metadata locator is supplied by debugger (#112537),2025-02-14 17:41:00+00:00,Mike McLaughlin,1,ef7ee5d6b0749d93917b944e7f5ccfcea36addca,"[debugger] Fix debugging a x86 app in mixed mode (#114075)

* Fixing get incomplete context information and assigning invalid information to the context later.",1,7,1,fix av in dbi under watson when no metadata locator is supplied by debugger (issue_ref)
dotnet/runtime,79eed94e0686048605ab531ef75cf9da3d324cc9,Support disabling event tracing (#110622),2025-02-14 19:06:07+00:00,Andrew Au,1,5bfc0bec9d627c946f154dd99103a393d278f841,Fix verify_free_list (#114540),16,127,9,support disabling event tracing (issue_ref)
dotnet/runtime,b93a9812c10c7fed681c663de17a499141f45eb4,"JIT: Switch remainder of lowering to new ABI info (#112544)

This required introducing some new information in `ABIPassingSegment`
for stack-passed segments about whether they own the full stack slot or
not. Apple arm64 notoriously has cases where multiple parameters are
packed in the same stack slot.",2025-02-14 19:52:27+00:00,Jakob Botsch Nielsen,1,01e4d44bcbd6604f3bb869a114d7c3f9bbe6960a,"Adds `ccmp` logic into emitter backend. (#112153)

* Adds `ccmp` logic into emitter backend.

* Review edits

* Small fix.",8,120,158,jit: switch remainder of lowering to new abi info (issue_ref)this required introducing some new information in for stack-passed segments about whether they own the full stack slot ornot. apple arm64 notoriously has cases where multiple parameters arepacked in the same stack slot.
dotnet/runtime,10532bf68fdc01cd859870bdaef60f26891ddba4,"Make test `IUnknown` conforming (#112566)

* Actually allocate the test type.

* Use existing utilities to implement IUnknown.",2025-02-14 20:07:17+00:00,Aaron Robinson,0,,,1,21,23,make test conforming (issue_ref)* actually allocate the test type.* use existing utilities to implement iunknown.
dotnet/runtime,09c5809d37be5bee37b08e534aec02b57955c67e,Outbox AesGcm in to Microsoft.Bcl.Cryptography,2025-02-14 21:44:08+00:00,Kevin Jones,0,,,21,550,227,outbox aesgcm in to microsoft.bcl.cryptography
dotnet/runtime,5608cd9578bc9d6b370cbc871c2a241b764e26ca,Disable AVX10.2 by default (#112572),2025-02-14 22:59:19+00:00,Aman Khalid,0,,,1,1,1,disable avx10.2 by default (issue_ref)
dotnet/runtime,da6c473ae237e63cdac671e3bda45300859ecf88,"R2RDump: normalize GC info totalInterruptibleLength (#112003)

* R2RDump: normalize totalInterruptibleLength

* Early exit from GetTransitions like in gcinfodecoder.cpp",2025-02-15 01:46:01+00:00,Tomasz Sowiński,0,,,1,9,2,r2rdump: normalize gc info totalinterruptiblelength (issue_ref)* r2rdump: normalize totalinterruptiblelength* early exit from gettransitions like in gcinfodecoder.cpp
dotnet/runtime,58b068bea2c150d19ff642d751e6111a50f05c33,Simplify `ShuffleTakeIterator.GetCount` (#112593),2025-02-15 12:06:10+00:00,skyoxZ,0,,,1,1,1,simplify (issue_ref)
dotnet/runtime,c332820b42e467b870b9f0c1e8d7daf689daee60,Avoid `Unsafe.As` in `RangeCharSearchValues` (#112606),2025-02-16 17:12:12+00:00,xtqqczze,0,,,1,4,4,avoid in (issue_ref)
dotnet/runtime,c69456b63934835d3a62fbec8c89b3cf390bd53f,"[main] Update dependencies from dotnet/emsdk (#112393)

* Update dependencies from https://github.com/dotnet/emsdk build 20250210.1

Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport , Microsoft.SourceBuild.Intermediate.emsdk
 From Version 10.0.0-preview.2.25105.3 -> To Version 10.0.0-preview.2.25110.1

Dependency coherency updates

runtime.linux-arm64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.linux-x64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.win-arm64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.win-x64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.osx-arm64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.osx-x64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.linux-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.linux-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.linux-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.linux-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.linux-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.linux-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.win-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.win-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.win-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.osx-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.osx-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.osx-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.osx-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.osx-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.osx-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools
 From Version 19.1.0-alpha.1.25077.1 -> To Version 19.1.0-alpha.1.25103.1 (parent: Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport

* Update dependencies from https://github.com/dotnet/emsdk build 20250211.2

Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport , Microsoft.SourceBuild.Intermediate.emsdk
 From Version 10.0.0-preview.2.25105.3 -> To Version 10.0.0-preview.2.25111.2

* Update dependencies from https://github.com/dotnet/emsdk build 20250212.1

Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport , Microsoft.SourceBuild.Intermediate.emsdk
 From Version 10.0.0-preview.2.25105.3 -> To Version 10.0.0-preview.2.25112.1

Dependency coherency updates

runtime.linux-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.linux-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.osx-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.osx-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.win-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.win-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport
 From Version 10.0.0-alpha.1.25103.1 -> To Version 10.0.0-alpha.1.25110.1 (parent: Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Larry Ewing <lewing@microsoft.com>",2025-02-16 17:44:29+00:00,dotnet-maestro[bot],0,,,2,109,109,"[main] update dependencies from dotnet/emsdk (issue_ref)* update dependencies from build 20250210.1microsoft.net.workload.emscripten.current.manifest-10.0.100.transport , microsoft.sourcebuild.intermediate.emsdk from version 10.0.0-preview.2.25105.3 -> to version 10.0.0-preview.2.25110.1dependency coherency updatesruntime.linux-arm64.microsoft.netcore.runtime.jit.tools,runtime.linux-x64.microsoft.netcore.runtime.jit.tools,runtime.linux-musl-arm64.microsoft.netcore.runtime.jit.tools,runtime.linux-musl-x64.microsoft.netcore.runtime.jit.tools,runtime.win-arm64.microsoft.netcore.runtime.jit.tools,runtime.win-x64.microsoft.netcore.runtime.jit.tools,runtime.osx-arm64.microsoft.netcore.runtime.jit.tools,runtime.osx-x64.microsoft.netcore.runtime.jit.tools,runtime.linux-arm64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.linux-arm64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.linux-arm64.microsoft.netcore.runtime.mono.llvm.tools,runtime.linux-musl-arm64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.linux-musl-arm64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.linux-musl-arm64.microsoft.netcore.runtime.mono.llvm.tools,runtime.linux-x64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.linux-x64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.linux-x64.microsoft.netcore.runtime.mono.llvm.tools,runtime.linux-musl-x64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.linux-musl-x64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.linux-musl-x64.microsoft.netcore.runtime.mono.llvm.tools,runtime.win-x64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.win-x64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.win-x64.microsoft.netcore.runtime.mono.llvm.tools,runtime.osx-arm64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.osx-arm64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.osx-arm64.microsoft.netcore.runtime.mono.llvm.tools,runtime.osx-x64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.osx-x64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.osx-x64.microsoft.netcore.runtime.mono.llvm.tools from version 19.1.0-alpha.1.25077.1 -> to version 19.1.0-alpha.1.25103.1 (parent: microsoft.net.workload.emscripten.current.manifest-10.0.100.transport* update dependencies from build 20250211.2microsoft.net.workload.emscripten.current.manifest-10.0.100.transport , microsoft.sourcebuild.intermediate.emsdk from version 10.0.0-preview.2.25105.3 -> to version 10.0.0-preview.2.25111.2* update dependencies from build 20250212.1microsoft.net.workload.emscripten.current.manifest-10.0.100.transport , microsoft.sourcebuild.intermediate.emsdk from version 10.0.0-preview.2.25105.3 -> to version 10.0.0-preview.2.25112.1dependency coherency updatesruntime.linux-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.linux-musl-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.linux-x64.microsoft.netcore.runtime.wasm.node.transport,runtime.linux-musl-x64.microsoft.netcore.runtime.wasm.node.transport,runtime.osx-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.osx-x64.microsoft.netcore.runtime.wasm.node.transport,runtime.win-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.win-x64.microsoft.netcore.runtime.wasm.node.transport from version 10.0.0-alpha.1.25103.1 -> to version 10.0.0-alpha.1.25110.1 (parent: microsoft.net.workload.emscripten.current.manifest-10.0.100.transport---------"
dotnet/runtime,4cd39487f6a2d710c0d32272695bef60f3ae5260,"Remove incompatible API from PKCS netstandard2.0 lib

The package used to contain a reference assembly that did not describe
these members.  When the reference assemblies were removed from
the package, these members became visible; but they aren't present on
.NET Framework, so a netstandard 2.0 build that runs on .NET Framework
gets a lot of missing member exceptions.",2025-02-16 22:51:25+00:00,Jeremy Barton,0,,,8,114,131,"remove incompatible api from pkcs netstandard2.0 libthe package used to contain a reference assembly that did not describethese members. when the reference assemblies were removed fromthe package, these members became visible; but they aren't present on.net framework, so a netstandard 2.0 build that runs on .net frameworkgets a lot of missing member exceptions."
dotnet/runtime,5bc9041fa4bc2ce2f1bd6353e2b33f2fb6acf84e,Quote --version-scripts path (#112603),2025-02-17 06:09:21+00:00,Miles D.,1,a6d142146cdbda922f4c9278aaeb46b48cf426f1,"[nativeaot] fix `Exists()` checks (#112995)

Context: https://github.com/dotnet/android/pull/9846

Trying to build our `Mono.Android-Tests` suite for NativeAOT, it fails
with:

    EXEC Failed to load assembly 'System.IO'

Which is caused by passing:

    --root:System.IO

I couldn't find anything in the Android workload that would cause this.

It appears the `Microsoft.NETCore.Native.targets` have an issue caused
by this specific project:

* When adding to `@(_IlcRootedAssemblies)` it does an `Exists()` check

* So `Exists('System.IO.Compression')` is called. This is *true*
  because there is a folder in the working directory named
  `System.IO.Compression`!

https://github.com/dotnet/android/tree/main/tests/Mono.Android-Tests/Mono.Android-Tests/System.IO.Compression

* `%(FileName)` is then `System.IO` as `.Compression` is stripped as
  the `%(Extension)` metadata.

I believe the fix here is to use `System.IO.File.Exists()` instead of
MSBuild's `Exists()` as it returns `true` for files *and* folders.",1,1,1,quote --version-scripts path (issue_ref)
dotnet/runtime,d6cfa2039309c1d5cef630e95eb5274a556dc726,"SPMI: Ensure proper zero extension for isObjectImmutable and friends (#112617)

Whether pointers are signed or unsigned is implementation defined,
meaning that casts from a pointer to a 64-bit integer on 32-bit targets
can be either zero or sign extended. SPMI provides `CastHandle` to
handle this, but a couple of recording helpers were not using these.",2025-02-17 09:03:00+00:00,Jakob Botsch Nielsen,0,,,1,6,6,"spmi: ensure proper zero extension for isobjectimmutable and friends (issue_ref)whether pointers are signed or unsigned is implementation defined,meaning that casts from a pointer to a 64-bit integer on 32-bit targetscan be either zero or sign extended. spmi provides tohandle this, but a couple of recording helpers were not using these."
dotnet/runtime,8de6e0100dcd1b9e9a58ef3f3f877a8d5a0183db,Clean up normalizeLocale for mono browser target (#112575),2025-02-17 10:14:26+00:00,Marc Brooks,0,,,1,5,5,clean up normalizelocale for mono browser target (issue_ref)
dotnet/runtime,36fbf4d57e7755150af3bf8abeaf61d643442d87,"JIT: Unify struct arg morphing (#112612)

This PR unifies the multi-reg and single-reg struct arg morphing into a
single path. It combines the optimizations from either path to apply to
both cases. It also deletes `FEATURE_PUT_STRUCT_ARG_STK`; this define
was defined everywhere except win-x64, and win-x64 now benefits from it
by supporting `FIELD_LIST` stack arguments.

Another difference is that multi-reg arguments were morphed after args
were evaluated into temps before. Now we instead morph multi-reg args at
the same time as single-reg args; this means the temp-evaluation step
may see field lists, but physical promotion also produces those
nowadays, so it knows how to handle them. The main difference here ends
up being that we sometimes will save an argument to a temp as multiple
field-wise stores instead of a block store, which improves CQ.",2025-02-17 21:03:44+00:00,Jakob Botsch Nielsen,1,ad0600cd06eb8aa0bf8d7b118fcc60a48ad1b6cc,fix BMI peephole asserts (#111837),12,259,661,"jit: unify struct arg morphing (issue_ref)this pr unifies the multi-reg and single-reg struct arg morphing into asingle path. it combines the optimizations from either path to apply toboth cases. it also deletes ; this definewas defined everywhere except win-x64, and win-x64 now benefits from itby supporting stack arguments.another difference is that multi-reg arguments were morphed after argswere evaluated into temps before. now we instead morph multi-reg args atthe same time as single-reg args; this means the temp-evaluation stepmay see field lists, but physical promotion also produces thosenowadays, so it knows how to handle them. the main difference here endsup being that we sometimes will save an argument to a temp as multiplefield-wise stores instead of a block store, which improves cq."
dotnet/runtime,0004083b20a30dbb030aeb7e977feca0187c856c,"Update dependencies from https://github.com/dotnet/source-build-reference-packages build 20250212.3 (#112626)

Microsoft.SourceBuild.Intermediate.source-build-reference-packages
 From Version 10.0.610402 -> To Version 10.0.611203

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-02-17 22:56:00+00:00,dotnet-maestro[bot],0,,,1,2,2,update dependencies from build 20250212.3 (issue_ref)microsoft.sourcebuild.intermediate.source-build-reference-packages from version 10.0.610402 -> to version 10.0.611203
dotnet/runtime,d086ec6d86a850830874b6ca7599239152b208e3,[System.DirectoryServices.Protocols] Fix ProtocolVersion Overflow on Big Endian Systems (#112391),2025-02-18 15:53:34+00:00,Medha Tiwari,1,1d4ccdd86b23f9aa567208163d38cc3a916af71a,Fix doc typo (#112875),3,6,12,[system.directoryservices.protocols] fix protocolversion overflow on big endian systems (issue_ref)
dotnet/runtime,c37cfcc6459605e7cd1e1311c6dc74ee087ec08c,"JIT: Use fgCalledCount in inlinee weight computation (#112499)

I noticed that tweaking the computation of the entry weight for OSR methods (in service of #111915) incurred large inlining diffs. This is due to the fact that we use the entry block's weight to compute the normalized weight of a call site. This means we will get the wrong normalized weight for call sites when the entry block's weight diverges from the method's call count. This is currently possible only when the entry block is part of a loop, or when we compute a weight for the OSR entry fixup block that differs from fgCalledCount (which we almost always do). The correct thing to do is to use the root method's call count to normalize the call site's weight.",2025-02-18 17:26:52+00:00,Aman Khalid,0,,,1,1,1,"jit: use fgcalledcount in inlinee weight computation (issue_ref)i noticed that tweaking the computation of the entry weight for osr methods (in service of issue_ref) incurred large inlining diffs. this is due to the fact that we use the entry block's weight to compute the normalized weight of a call site. this means we will get the wrong normalized weight for call sites when the entry block's weight diverges from the method's call count. this is currently possible only when the entry block is part of a loop, or when we compute a weight for the osr entry fixup block that differs from fgcalledcount (which we almost always do). the correct thing to do is to use the root method's call count to normalize the call site's weight."
dotnet/runtime,5486a2664e7fdc2ae0d639d01dd59b7a39560f9b,"Clone blocks with bounds checks (#112595)



Co-authored-by: Jakob Botsch Nielsen <Jakob.botsch.nielsen@gmail.com>",2025-02-18 17:37:48+00:00,Egor Bogatov,1,fb6b045f15929cefc86e605750a6c91898217aae,"Fix winarm64 crossdac build (#112594)

https://github.com/dotnet/runtime/pull/112256 added the ability to cross compile android on windows. This
regressed the win-arm64 crossdac build because it stopped passing CMAKE_TARGET_ARCH and CMAKE_TARGET_OS for
cross component builds where the host and target os's match.

This change makes sure the cmake variables are passed in all cases.",12,754,8,clone blocks with bounds checks (issue_ref)
dotnet/runtime,13e15b1f03a341d476421b92e63e6df183476912,"Allow publishing AndroidSampleApp with R2R using in-build crossgen2 (#112547)

Use the in-build crossgen2 to publish `AndroidSampleApp` if `PublishReadyToRun` is set to `true`. I left it off in the project, but it can now be enabled. Makefile can be used to set it via `R2R` and `R2R_COMPOSITE`. Also remove `corerun` from the Android local runtime pack.",2025-02-18 18:47:57+00:00,Elinor Fung,1,457e3eb93e35f60f9b0515ee6a4b75e76a64ce8c,"Fix path to `dotnet` in `AndroidSampleApp` project (#112590)

Non-Windows path was missing a `..`. This switches to using `DotNetTool`, which is set by the Arcade SDK (RepoLayout.props).",4,27,5,"allow publishing androidsampleapp with r2r using in-build crossgen2 (issue_ref)use the in-build crossgen2 to publish if is set to . i left it off in the project, but it can now be enabled. makefile can be used to set it via and . also remove from the android local runtime pack."
dotnet/runtime,3511af8bb9d97b1e8e2deca45fe4a2809cdd1399,"JIT: Support `FIELD_LIST` for returns (#112308)

* Add support for returned `FIELD_LIST` nodes in the backend. Until
  lowering these are supported with arbitrary fields; unlike call
  arguments the fields are not required to map cleanly to registers.
  After lowering the fields must map cleanly to the return registers.
  Lowering is responsible for ensuring this property.

* Teach physical promotion to produce `FIELD_LIST` nodes for returned
  promoted struct locals.

Currently lowering ensures the property simply by spilling when the
fields do not already map cleanly to registers. In the future it can be
taught more efficient ways to recombine the fields to the returned
registers.

Another step towards supporting the same cases as old promotion with
physical promotion.",2025-02-18 19:06:55+00:00,Jakob Botsch Nielsen,0,,,14,445,46,jit: support for returns (issue_ref)* add support for returned nodes in the backend. until lowering these are supported with arbitrary fields; unlike call arguments the fields are not required to map cleanly to registers. after lowering the fields must map cleanly to the return registers. lowering is responsible for ensuring this property.* teach physical promotion to produce nodes for returned promoted struct locals.currently lowering ensures the property simply by spilling when thefields do not already map cleanly to registers. in the future it can betaught more efficient ways to recombine the fields to the returnedregisters.another step towards supporting the same cases as old promotion withphysical promotion.
dotnet/runtime,b8298f6f3c9c63e826f5b28d2c2487a335c1a718,"Update dependencies from https://github.com/dotnet/emsdk build 20250217.1 (#112645)

Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport , Microsoft.SourceBuild.Intermediate.emsdk
 From Version 10.0.0-preview.2.25112.1 -> To Version 10.0.0-preview.2.25117.1

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-02-18 19:40:25+00:00,dotnet-maestro[bot],0,,,2,5,5,"update dependencies from build 20250217.1 (issue_ref)microsoft.net.workload.emscripten.current.manifest-10.0.100.transport , microsoft.sourcebuild.intermediate.emsdk from version 10.0.0-preview.2.25112.1 -> to version 10.0.0-preview.2.25117.1"
dotnet/runtime,b567c5be3c1c494fc7fba03aba389b84f61c2023,"JIT: Clean up and optimize call arg lowering (#112639)

* Simplify the logic to be based purely off of new ABI info
* Consistently insert bitcast nodes for register file mismatches when
  creating `PUTARG_REG` nodes and for `PUTARG_SPLIT`
* Add a lowering optimization that removes `BITCAST` by changing the
  operand (by changing constants to other constants or the type of
  indirections)
* Stop DNER'ing for register file mismatches in physical promotion and
  morph",2025-02-18 20:03:46+00:00,Jakob Botsch Nielsen,1,9283581f414305c4b829d91d6313ae54e73060cc,"Use Avx10.2 Instructions in Floating Point Conversions (#111775)

* Add support for AVX10.2. Add AVX10.2 API surface and template tests. Lower Avx10.2 nodes accordingly.

* Add support and template tests for AVX10v2_V512

* Add new coredistools.dll build from latest llvm repo

* Limit JIT unit suite within the subsets which are stable in SDE.

* Rename API as per latest API proposal discussions

* fix sample tests in handwritten project

* Revert ""Limit JIT unit suite within the subsets which are stable in SDE.""

This reverts commit 067e31e0b7b55fc3c70d69592e4fed9dd577f462.

* Limit JIT unit suite within the subsets which are stable in SDE.

* Allow a prefix of 0x00 for AVX10.2 instructions.

* Revert ""Limit JIT unit suite within the subsets which are stable in SDE.""

This reverts commit 067e31e0b7b55fc3c70d69592e4fed9dd577f462.

* Limit JIT unit suite within the subsets which are stable in SDE.

* remove developer comments from files

* Enable all template tests and enable ymm embedded rounding

* Make emitter independent of ISa and based on insOpts for ymm embedded rounding

* Enable ymm embedded rounding based on architecture

* Revert ""Make emitter independent of ISa and based on insOpts for ymm embedded rounding""

This reverts commit 493572f098e1390a11fa1523b03fcd2833a98173.

* Separate Avx10.2 unit testing framework from APX framework

* Revert ""Limit JIT unit suite within the subsets which are stable in SDE.""

This reverts commit 067e31e0b7b55fc3c70d69592e4fed9dd577f462.

* Revert ""Add new coredistools.dll build from latest llvm repo""

This reverts commit 61719f8b1ec9867514323d8f2322915f1de448a8.

* Fix formatting

* Use new keyword for class V512 to hide Avx10v1.V512 and correct CI errors

* Remove MinMax APis from lowering for numargs=2

* Add docstrings for APIs

* revert changes for sde execution of tests

* Add appropriate comments from reviews

* Apply suggestions from code review

Co-authored-by: Bruce Forstall <brucefo@microsoft.com>

* Add emitter tests for XMM9/16 to make sure special handling does not interfere.

* Format code

* Handle sizePrefix = 0 case when decoding evex instruction

* Add assert in appropriate places

* Club similar instructions together in perf calculation in emitxarch

* Run formatting

* Add assembly prints for debug assembly capturing for Avx10.2

* Use correct size when running emitter tests

* Ad appropriate comments and make review changes

* Use AVX10.2 instructions in conversions

* Run formatting

* Update comment

Co-authored-by: Michał Petryka <35800402+MichalPetryka@users.noreply.github.com>

* Optimize the need for compIsa checks and edit comments

* Run formatting

---------

Co-authored-by: Ruihan-Yin <ruihan.yin@intel.com>
Co-authored-by: Bruce Forstall <brucefo@microsoft.com>
Co-authored-by: Michał Petryka <35800402+MichalPetryka@users.noreply.github.com>",7,245,369,jit: clean up and optimize call arg lowering (issue_ref)* simplify the logic to be based purely off of new abi info* consistently insert bitcast nodes for register file mismatches when creating nodes and for * add a lowering optimization that removes by changing the operand (by changing constants to other constants or the type of indirections)* stop dner'ing for register file mismatches in physical promotion and morph
dotnet/runtime,00b4fa7644fb601e8e9db051b3bee4bf0401ae2e,"Update dependencies from https://github.com/dotnet/arcade build 20250213.2 (#112625)

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.25106.4 -> To Version 10.0.0-beta.25113.2

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-02-18 20:04:21+00:00,dotnet-maestro[bot],0,,,4,62,62,"update dependencies from build 20250213.2 (issue_ref)microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.versiontools.tasks , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.25106.4 -> to version 10.0.0-beta.25113.2"
dotnet/runtime,230fea182b53e10e036b5319b2701cdb43e7c30c,"JIT: Use linear block order for MinOpts in LSRA (#108147)

Follow-up from #108086 (comment). Since LSRA shouldn't create cross-block live registers in MinOpts, LSRA's block ordering shouldn't matter, so just use the lexical order we have on-hand.",2025-02-18 20:10:21+00:00,Aman Khalid,0,,,2,47,41,"jit: use linear block order for minopts in lsra (issue_ref)follow-up from issue_ref (comment). since lsra shouldn't create cross-block live registers in minopts, lsra's block ordering shouldn't matter, so just use the lexical order we have on-hand."
dotnet/runtime,b61c07c1436b5057f2d658f232211c0032202a95,"Expose StressLog via CDAC and port StressLogAnalyzer to managed code (#104999)

* Start a StressLog contract for CDAC

Start on the data parsing and fill out the contract more

Implement stress message payload parsing and thread stress log iteration

Implement everything except for printing the string output

Implement output string formatting for stress log messages

Move all StressMsg logic into the contract and out of the data type.

Split the stress log contract into different versions and refactor out the StressLogHeader to be entirely a StressLogAnalyzer concern (not used in the cDAC implementation at all)

Expose the module table directly to avoid going through the StressLog object to read the module table (which isn't present in the memory-mapped log)

Give a nicer error message for an easy-to-fall-in special case in the data descriptor scraping.

Fix a few datadescriptor problems

* Start on StressLogAnalyzer port.

Move stress message formatting out of the contract.

* Load in and read the thread stress logs and the stress messages.

* Add support for Ix, I64 specifiers

* Refactor into src/test directories and add tests for basic format strings

* Add more tests and extend the signed integer test case to test a ton more cases (including the alignment scenarios).

* Add special pointer formatting hook and a default implementation for StressLogAnalyzer

* Write the command line and start work on porting over logic (first one is format string matching).

* Add GC heap map memory and default string handling

* Implement GC heap map association

* Fill in more processing and start on sketching out the output handling.

* Port over remaining features

* Remove native StressLogAnalyzer

* Get 'dump all messages' working correctly

* Fix format offset calculation and update contract md to include references to the used data descriptors.

* Add a conceptual description of how to format a StressLog message

* Implement escape sequence interpretation

* Redefine maxMsgSize to make it C++11 constexpr-compliant even with our debug return logging (make it a const instead of a function)

* Add ""is pointer in stresslog"" contract function for SOS's GCHandleLeaks functionality

* Add some additional members to the contract to allow implementing all SOS StressLog introspection

* Wire up ISOSDacInterface::GetStressLogAddress while I'm here

* Update the StressLog contract to better describe and cross-link the custom format specifiers

* Start adjusting output to match StressLogAnalyzer

* Fix discovering the first message of a new chunk

* Fix remaining output nits that would cause the most confusion.

* Lots of perf improvements and some fixes

* Rewrite GC time index searching for better perf

* Make GC thread filtering more aggressive and fix non-GC thread filtering.

Add support for %f because GC uses it.

* Hook into clr.tools and clr.toolstests subsets

* Remove uncessary cast

* Correctly implement the quit/retry commands

* Use string helpers from Target

* Remove dead code now that StressLogAnalyzer is in C#

* Update StressLogAnalyzer (not the tests) to the new refactoring.

* Fix tets and use Moq to mock the target instead of constructing a fake memory space

* Add support for padded strings as they're apparently used by the GC.

* PR feedback and allow a module table to be present or absent in v1/v2 (and remove v0) to support NativeAOT with no changes to the contract

* Fix typo

* Update IStressLog.cs

* Fix body and accessibility

* Make the message filter internal

* Move the formatter for stress messages into the Contracts assembly as the same logic will be used from any StressLog reader.

The implementation of the formatter will not be part of the contract itself, but the description of the format string's structure is part of the contract (this is already the case in this branch).

* Remove trailing references to StressLogAnalyzer.Tests

* Use composition instead of inheritance",2025-02-18 21:18:32+00:00,Jeremy Koritzinsky,1,cb8737994e6009881578518a95d7e727d26739e9,"Fix stresslog facility and log level mix-up. (#116467)

As part of commit:

https://github.com/dotnet/runtime/commit/6bd555eefd41282282da4c5dfe28b8600946b744

some stress log macro implementations got changed, but the call to
StressLog::LogMsg in gcenv.h and stresslog.h got level and facility arguments
switched, leading to no logging when these macros are used.

Fix restore the order of the level and facility arguments in call to
StressLog::LogMsg.",54,3585,2711,"expose stresslog via cdac and port stressloganalyzer to managed code (issue_ref)* start a stresslog contract for cdacstart on the data parsing and fill out the contract moreimplement stress message payload parsing and thread stress log iterationimplement everything except for printing the string outputimplement output string formatting for stress log messagesmove all stressmsg logic into the contract and out of the data type.split the stress log contract into different versions and refactor out the stresslogheader to be entirely a stressloganalyzer concern (not used in the cdac implementation at all)expose the module table directly to avoid going through the stresslog object to read the module table (which isn't present in the memory-mapped log)give a nicer error message for an easy-to-fall-in special case in the data descriptor scraping.fix a few datadescriptor problems* start on stressloganalyzer port.move stress message formatting out of the contract.* load in and read the thread stress logs and the stress messages.* add support for ix, i64 specifiers* refactor into src/test directories and add tests for basic format strings* add more tests and extend the signed integer test case to test a ton more cases (including the alignment scenarios).* add special pointer formatting hook and a default implementation for stressloganalyzer* write the command line and start work on porting over logic (first one is format string matching).* add gc heap map memory and default string handling* implement gc heap map association* fill in more processing and start on sketching out the output handling.* port over remaining features* remove native stressloganalyzer* get 'dump all messages' working correctly* fix format offset calculation and update contract md to include references to the used data descriptors.* add a conceptual description of how to format a stresslog message* implement escape sequence interpretation* redefine maxmsgsize to make it c++11 constexpr-compliant even with our debug return logging (make it a const instead of a function)* add ""is pointer in stresslog"" contract function for sos's gchandleleaks functionality* add some additional members to the contract to allow implementing all sos stresslog introspection* wire up isosdacinterface::getstresslogaddress while i'm here* update the stresslog contract to better describe and cross-link the custom format specifiers* start adjusting output to match stressloganalyzer* fix discovering the first message of a new chunk* fix remaining output nits that would cause the most confusion.* lots of perf improvements and some fixes* rewrite gc time index searching for better perf* make gc thread filtering more aggressive and fix non-gc thread filtering.add support for %f because gc uses it.* hook into clr.tools and clr.toolstests subsets* remove uncessary cast* correctly implement the quit/retry commands* use string helpers from target* remove dead code now that stressloganalyzer is in c#* update stressloganalyzer (not the tests) to the new refactoring.* fix tets and use moq to mock the target instead of constructing a fake memory space* add support for padded strings as they're apparently used by the gc.* pr feedback and allow a module table to be present or absent in v1/v2 (and remove v0) to support nativeaot with no changes to the contract* fix typo* update istresslog.cs* fix body and accessibility* make the message filter internal* move the formatter for stress messages into the contracts assembly as the same logic will be used from any stresslog reader.the implementation of the formatter will not be part of the contract itself, but the description of the format string's structure is part of the contract (this is already the case in this branch).* remove trailing references to stressloganalyzer.tests* use composition instead of inheritance"
dotnet/runtime,9283581f414305c4b829d91d6313ae54e73060cc,"Use Avx10.2 Instructions in Floating Point Conversions (#111775)

* Add support for AVX10.2. Add AVX10.2 API surface and template tests. Lower Avx10.2 nodes accordingly.

* Add support and template tests for AVX10v2_V512

* Add new coredistools.dll build from latest llvm repo

* Limit JIT unit suite within the subsets which are stable in SDE.

* Rename API as per latest API proposal discussions

* fix sample tests in handwritten project

* Revert ""Limit JIT unit suite within the subsets which are stable in SDE.""

This reverts commit 067e31e0b7b55fc3c70d69592e4fed9dd577f462.

* Limit JIT unit suite within the subsets which are stable in SDE.

* Allow a prefix of 0x00 for AVX10.2 instructions.

* Revert ""Limit JIT unit suite within the subsets which are stable in SDE.""

This reverts commit 067e31e0b7b55fc3c70d69592e4fed9dd577f462.

* Limit JIT unit suite within the subsets which are stable in SDE.

* remove developer comments from files

* Enable all template tests and enable ymm embedded rounding

* Make emitter independent of ISa and based on insOpts for ymm embedded rounding

* Enable ymm embedded rounding based on architecture

* Revert ""Make emitter independent of ISa and based on insOpts for ymm embedded rounding""

This reverts commit 493572f098e1390a11fa1523b03fcd2833a98173.

* Separate Avx10.2 unit testing framework from APX framework

* Revert ""Limit JIT unit suite within the subsets which are stable in SDE.""

This reverts commit 067e31e0b7b55fc3c70d69592e4fed9dd577f462.

* Revert ""Add new coredistools.dll build from latest llvm repo""

This reverts commit 61719f8b1ec9867514323d8f2322915f1de448a8.

* Fix formatting

* Use new keyword for class V512 to hide Avx10v1.V512 and correct CI errors

* Remove MinMax APis from lowering for numargs=2

* Add docstrings for APIs

* revert changes for sde execution of tests

* Add appropriate comments from reviews

* Apply suggestions from code review

Co-authored-by: Bruce Forstall <brucefo@microsoft.com>

* Add emitter tests for XMM9/16 to make sure special handling does not interfere.

* Format code

* Handle sizePrefix = 0 case when decoding evex instruction

* Add assert in appropriate places

* Club similar instructions together in perf calculation in emitxarch

* Run formatting

* Add assembly prints for debug assembly capturing for Avx10.2

* Use correct size when running emitter tests

* Ad appropriate comments and make review changes

* Use AVX10.2 instructions in conversions

* Run formatting

* Update comment

Co-authored-by: Michał Petryka <35800402+MichalPetryka@users.noreply.github.com>

* Optimize the need for compIsa checks and edit comments

* Run formatting

---------

Co-authored-by: Ruihan-Yin <ruihan.yin@intel.com>
Co-authored-by: Bruce Forstall <brucefo@microsoft.com>
Co-authored-by: Michał Petryka <35800402+MichalPetryka@users.noreply.github.com>",2025-02-18 23:04:31+00:00,Khushal Modi,1,54e55db6a3b6b0277016eb015ff62a2d02e61c76,"JIT: Always track the context for late devirt (#112396)

* Track InlinersContext in LateDevirtualizationInfo

* Rework fix

* Update inline context for statement as well

* Use IL offset from call

* Always set DebugInfo

* Track InlineContext

* Cleanup

* Always record late devirt info

* Always record late devirt info

* Copy gtLateDevirtualizationInfo

* Refactor to take InlineContext explicitly

* Set inlinersContext to nullptr

* Late devirt info always available

* Oops

* Remove the reduandant flag",6,83,19,"use avx10.2 instructions in floating point conversions (issue_ref)* add support for avx10.2. add avx10.2 api surface and template tests. lower avx10.2 nodes accordingly.* add support and template tests for avx10v2_v512* add new coredistools.dll build from latest llvm repo* limit jit unit suite within the subsets which are stable in sde.* rename api as per latest api proposal discussions* fix sample tests in handwritten project* revert ""limit jit unit suite within the subsets which are stable in sde.""this reverts commit 067e31e0b7b55fc3c70d69592e4fed9dd577f462.* limit jit unit suite within the subsets which are stable in sde.* allow a prefix of 0x00 for avx10.2 instructions.* revert ""limit jit unit suite within the subsets which are stable in sde.""this reverts commit 067e31e0b7b55fc3c70d69592e4fed9dd577f462.* limit jit unit suite within the subsets which are stable in sde.* remove developer comments from files* enable all template tests and enable ymm embedded rounding* make emitter independent of isa and based on insopts for ymm embedded rounding* enable ymm embedded rounding based on architecture* revert ""make emitter independent of isa and based on insopts for ymm embedded rounding""this reverts commit 493572f098e1390a11fa1523b03fcd2833a98173.* separate avx10.2 unit testing framework from apx framework* revert ""limit jit unit suite within the subsets which are stable in sde.""this reverts commit 067e31e0b7b55fc3c70d69592e4fed9dd577f462.* revert ""add new coredistools.dll build from latest llvm repo""this reverts commit 61719f8b1ec9867514323d8f2322915f1de448a8.* fix formatting* use new keyword for class v512 to hide avx10v1.v512 and correct ci errors* remove minmax apis from lowering for numargs=2* add docstrings for apis* revert changes for sde execution of tests* add appropriate comments from reviews* apply suggestions from code review"
dotnet/runtime,8b6071e387a448fe66b950c3360ec1a367efa18a,"JIT: Use `fgCalledCount` for OSR method entry weight (#112662)

Follow-up to #112499. By ensuring OSR method entry blocks' weights match fgCalledCount during entry canonicalization, we can guarantee that later runs of profile synthesis won't modify fgCalledCount. This should unblock #111915 (comment).",2025-02-19 00:09:49+00:00,Aman Khalid,0,,,1,7,12,"jit: use for osr method entry weight (issue_ref)follow-up to issue_ref. by ensuring osr method entry blocks' weights match fgcalledcount during entry canonicalization, we can guarantee that later runs of profile synthesis won't modify fgcalledcount. this should unblock issue_ref (comment)."
dotnet/runtime,e0e787046634ebcd7c420efc743df72c149fe944,Move some links to other doc (#112574),2025-02-19 01:15:14+00:00,Rich Lander,0,,,2,7,9,move some links to other doc (issue_ref)
dotnet/runtime,e75eb9c27dcb951766d9691d8a4e745c4df93255,Use encode callback instead of renting a buffer to write to in DSAKeyFormatHelper,2025-02-19 01:59:46+00:00,Kevin Jones,0,,,1,4,9,use encode callback instead of renting a buffer to write to in dsakeyformathelper
dotnet/runtime,8192afac7d6b71af67599429137a57f1472b1d90,"Fix new EH hang on DebugBreak (#112640)

* Fix new EH hang on DebugBreak

The new exception handling doesn't work well with the DebugBreak in some
cases. E.g. when it is invoked from FATAL_GC_ERROR. The new EH attempts
to handle the STATUS_BREAKPOINT stemming from the DebugBreak, allocate a
managed exception object and hangs since it cannot do that when the GC
is running.

The cause is a missing check for the breakpoint exception in the
ProcessCLRExceptionNew that is present in the old ProcessCLRException.
To fix it, I've copied that code to the ProcessCLRExceptionNew.

Close #112599

* Never process breakpoints via the new EH",2025-02-19 03:59:34+00:00,Jan Vorlicek,1,6e2274c87c699f6749473b83969f12949e48ec7d,"Fix exception propagation from managed to native on Unix (#112957)

* Fix exception propagation from managed to native on Unix

The new exception handling on Unix doesn't prevent propagation of exceptions
from managed to external native code like the old one did. Instead of
reporting an unhandled exception, it rethrows the PAL_SEHException that
later ends up being reported as C++ unhandled exception.

This change fixes that behavior by enabling exception propagation from managed
to native code only for the case when the native caller is CallDescrWorkerInternal.

* Fix condition polarity

When doing final rebasing on main where the IsCallDescrWorkerInternalReturnAddress
was added in the meanwhile, I've acidentally caused the condition to be reverse
for the added check. That caused the CI test failures.

* Fix case of exception in filter

The exception in filter was incorrectly rejected as coming from external native code",1,8,0,"fix new eh hang on debugbreak (issue_ref)* fix new eh hang on debugbreakthe new exception handling doesn't work well with the debugbreak in somecases. e.g. when it is invoked from fatal_gc_error. the new eh attemptsto handle the status_breakpoint stemming from the debugbreak, allocate amanaged exception object and hangs since it cannot do that when the gcis running.the cause is a missing check for the breakpoint exception in theprocessclrexceptionnew that is present in the old processclrexception.to fix it, i've copied that code to the processclrexceptionnew.close issue_ref* never process breakpoints via the new eh"
dotnet/runtime,995b6de7533b0baae6f93b003e6d9560d448eb30,"JIT: Don't use `Compiler::compFloatingPointUsed` to check if FP kills are needed (#112668)

Follow-up to #108147 (comment). Add a flag for determining if `LinearScan::getKillSetForCall` can skip killing floating-point registers so that we can reduce dependencies on global `Compiler` state.",2025-02-19 12:45:56+00:00,Aman Khalid,0,,,2,8,5,jit: don't use to check if fp kills are needed (issue_ref)follow-up to issue_ref (comment). add a flag for determining if can skip killing floating-point registers so that we can reduce dependencies on global state.
dotnet/runtime,3c97a9040833ab190961e37a86ce5073a932ed9b,[browser][MT] move wasm MT CI legs to extra-platforms (#112690),2025-02-19 14:37:58+00:00,Pavel Savara,0,,,3,17,27,[browser][mt] move wasm mt ci legs to extra-platforms (issue_ref)
dotnet/runtime,1e38de06ac7952604fad761fb59696ad9bcd8bbf,"[H/3] Fix test closing connection too fast (#112691)

* Fix test closing connection too fast

* Same fix for similar test",2025-02-19 14:39:56+00:00,Marie Píchová,1,513ff1acc981118e4b981e965dce614c3b8770f5,"[H/3] Fix large header tests (#117412)

* Replace HandleRequestAsync with read request, send response to avoid GO_AWAY.

* Apply suggestion from @Copilot

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",1,12,0,[h/3] fix test closing connection too fast (issue_ref)* fix test closing connection too fast* same fix for similar test
dotnet/runtime,f1b8d5a4448d072c9d390744777a87921e45bf2f,Fold null checks against known non-null values (#109164),2025-02-19 16:12:26+00:00,Michał Petryka,0,,,2,41,35,fold null checks against known non-null values (issue_ref)
dotnet/runtime,5587e2f8733141efdffa19e2fae1dde8c4c7bb4b,Update a few stresslogs for the frame identifiers (#112555),2025-02-19 17:17:13+00:00,Jan Kotas,1,2cb402c6eb169fa875a9b4875bedc4a82a5e28a2,"Fix exception handling in the prestub worker - take 2 (#112666)

* Fix exception handling in the prestub worker

There is a bug in the new exception handling when ThePreStub is called
from CallDescrWorkerInternal and the exception is propagated through
that. One of such cases is when a managed class is being initialized
during JITting and the constructor is in an assembly that's not found.
The bug results in skipping all the native frames upto a managed frame
that called that native chain that lead to the exception. In the
specific case I've mentioned, a lock in the native code is left in
locked state. That later leads to a hang. This was case was observed
with Roslyn invoking an analyzer where one of the dependencies was
missing.

The fix is to ensure that when ThePreStub is called by
CallDescrWorkerInternal, the exception is not caught in the
PreStubWorker. It is left flowing into the native calling code instead.

The same treatment is applied to ExternalMethodFixupWorker and
VSD_ResolveWorker too.

On Windows, we also need to prevent the ProcessCLRException invocation
to call into the managed exception handling code.

* Fix missing ContextFlags setting

I was hitting intermittent crashes in the unhandled exception test
with GC stress C enabled due to this when GetSSP tried to access the
SSP in the extended part of the context.

* Fix couple of issues

* The previous set of changes removed popping of ExInfos too. That's not
  correct though. But it should be done in a different place than the
  ProcessCLRExceptionNew.
* There was a problem (even before the fix) that an exception caught in
  DispatchInfo::InvokeMember was reported (via console log and to the
  debugger) as unhandled.

This change also adds a new flavor of the unhandled exception test that
throws an unhandled exception on a secondary thread to exercise the
related code path.

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",8,29,43,update a few stresslogs for the frame identifiers (issue_ref)
dotnet/runtime,4dde4717d9768b23c87205f423e5a7468211c94f,"Reduce allocations in XmlWriterApiTests.TCFullEndElement (#112688)

* Reduce allocations in XmlWriterApiTests

* Apply code review improvements",2025-02-19 17:35:49+00:00,Ondřej Roztočil,0,,,1,20,13,reduce allocations in xmlwriterapitests.tcfullendelement (issue_ref)* reduce allocations in xmlwriterapitests* apply code review improvements
dotnet/runtime,0ddd0c4062471fc3623b5963a8f9461c5308a82b,"JIT: Remove `LclVarDsc::GetArgReg` and `LclVarDsc::GetOtherArgReg` uses (#112652)

Switch these to use new ABI info.

The only uses left are in logging and in the old ABI classification
happening during `lvaInitUserArgs`. Once we remove uses of all the
information stored there we can get rid of the fields entirely.",2025-02-19 19:00:56+00:00,Jakob Botsch Nielsen,0,,,6,87,116,jit: remove and uses (issue_ref)switch these to use new abi info.the only uses left are in logging and in the old abi classificationhappening during . once we remove uses of all theinformation stored there we can get rid of the fields entirely.
dotnet/runtime,610ece3717804c69771bafa79a0b1fbd3d2db789,"arm64: Change EQ/NE node to SETCC if the operand supports the zero flag (#112235)

* arm64: Change EQ/NE node to SETCC if the operand supports the zero flag
* Add one line tests for adds, ands, bics & subs
* Add tests for negs",2025-02-19 19:39:08+00:00,Jonathan Davies,1,a015e486837d38f6e4cd3050709c78da88cebed6,"JIT: fix missing morphed flag (#112888)

Fixes #112867.",7,399,37,"arm64: change eq/ne node to setcc if the operand supports the zero flag (issue_ref)* arm64: change eq/ne node to setcc if the operand supports the zero flag* add one line tests for adds, ands, bics & subs* add tests for negs"
dotnet/runtime,33160cc375504e20b113ea79e08aa04e0e83d135,fixed conversion test (#112703),2025-02-19 21:07:01+00:00,Michael Sharp,1,12e0ad688a34b7dfb6e662f39ddf1516f5627d73,Fix TensorPrimitives.MultiplyAddEstimate for integers (#113047),1,1,1,fixed conversion test (issue_ref)
dotnet/runtime,e30fd97288f01b806301a0902e873ce66b46b355,"More clean up to debugger attribute tests (#112450)

I missed a few places with
```
	[SetupLinkerKeepDebugMembers (""true"")]
```

back when I landed https://github.com/dotnet/runtime/pull/89011",2025-02-19 21:07:33+00:00,Mike Voorhees,0,,,6,0,19,more clean up to debugger attribute tests (issue_ref)i missed a few places withback when i landed
dotnet/runtime,d6b62982cf0c9e1d2eb420c943d584a6a3636d6e,"Revert ""[browser][MT] move wasm MT CI legs to extra-platforms (#112690)"" (#112712)

This reverts commit 3c97a9040833ab190961e37a86ce5073a932ed9b.",2025-02-19 21:30:33+00:00,Larry Ewing,0,,,3,27,17,"revert ""[browser][mt] move wasm mt ci legs to extra-platforms (issue_ref)"" (issue_ref)this reverts commit 3c97a9040833ab190961e37a86ce5073a932ed9b."
dotnet/runtime,7391c6963abc2484f5a42fb7e20b27b923a22a53,Implement ExportPkcs12,2025-02-20 02:19:36+00:00,Kevin Jones,1,1ce05d333c47d20ee02fc20c907fa8b893afd003,"Fix providers EC export and key derivation with newer OpenSSL and add TLS with TPM keys tests (#113229)

* Fix providers EC export with newer OpenSSL and add TLS with TPM keys tests

* Address PR feedback

* Fix some build errors when OSSL 3.0 is not available

* change EC_METHOD_get_field_type -> EC_GROUP_get_field_type in ossl 3.0 shim

* add OSSL_PKEY_PARAM_* to ossl 3.0 shim",62,1406,185,implement exportpkcs12
dotnet/runtime,b606aa3d9646285f638d1dfafbd1df6239a3b3c1,Bump main to preview3 (#112718),2025-02-20 03:16:42+00:00,Carlos Sánchez López,0,,,1,1,1,bump main to preview3 (issue_ref)
dotnet/runtime,93ebf52cdd9b196a795610a901939b4b86fee284,"JIT: Replace `fgMoveHotJumps` with 3-opt utility (#112016)

Part of #107749. Based on the plans outlined in #111989 (comment), we want to remove phases that prematurely tweak the initial layout fed into 3-opt; fgMoveHotJumps is one such phase. However, initial attempts to remove it incurred large size increases on x86/x64, suggesting there was some utility in moving blocks closer to their hottest successors to keep the layout compact. To avoid derailing my consolidation plan, I've decided to refactor fgMoveHotJumps into a utility for 3-opt to use. For now, we will continue to use this pass to try to keep the layout compact. In the future, this functionality may be useful for churning the initial layout into 3-opt to discover new local-optimal layouts.",2025-02-20 04:33:33+00:00,Aman Khalid,0,,,2,189,235,"jit: replace with 3-opt utility (issue_ref)part of issue_ref. based on the plans outlined in issue_ref (comment), we want to remove phases that prematurely tweak the initial layout fed into 3-opt; fgmovehotjumps is one such phase. however, initial attempts to remove it incurred large size increases on x86/x64, suggesting there was some utility in moving blocks closer to their hottest successors to keep the layout compact. to avoid derailing my consolidation plan, i've decided to refactor fgmovehotjumps into a utility for 3-opt to use. for now, we will continue to use this pass to try to keep the layout compact. in the future, this functionality may be useful for churning the initial layout into 3-opt to discover new local-optimal layouts."
dotnet/runtime,b71cad19a7d23cfd19f916a35c9c32db235fe0e8,"JIT: Clean up and optimize `StackLevelSetter` (#112561)

The stack levels computed are not actually used for anything outside
x86, so avoid computing them in that case. Also, the max stack level
does not actually get used by the backend, even for x86, so no need to
save it in `Compiler`.",2025-02-20 07:49:33+00:00,Jakob Botsch Nielsen,1,ea43e17c953a1230667c684a9f57d241e8a95171,"JIT: Run profile repair after frontend phases (#111915)

Part of #107749. Introduce a repair phase that runs profile synthesis if the profile was marked inconsistent at some point, and call it at the end of the JIT frontend. LSRA and block layout are likely to benefit from profile consistency, and this is late enough in the JIT that the sources of diffs should be relatively obvious.",11,87,81,"jit: clean up and optimize (issue_ref)the stack levels computed are not actually used for anything outsidex86, so avoid computing them in that case. also, the max stack leveldoes not actually get used by the backend, even for x86, so no need tosave it in ."
dotnet/runtime,451a41d8c706a9ba0fb42fd4075c9debac567fed,Don't emit unchecked write barrier for stack-allocated arrays (#112711),2025-02-20 09:18:35+00:00,Egor Bogatov,0,,,3,51,2,don't emit unchecked write barrier for stack-allocated arrays (issue_ref)
dotnet/runtime,482e5b1d6fd547e9211eea90af03c98036e0e0e6,JIT: Delete old `GenTreeCall` ABI information (#112665),2025-02-20 09:49:03+00:00,Jakob Botsch Nielsen,1,8017079073fa09d29e8a560b835d0e3120efdeb3,JIT: Fix small->float casts with AVX-512 (#112892),17,212,658,jit: delete old abi information (issue_ref)
dotnet/runtime,3f71cde7d2a6cdb0e88de935fcb1cd7421f795ae,[browser] single threaded diagnostic server -part 1 (#111910),2025-02-20 10:07:33+00:00,Pavel Savara,1,0ce54a5269102f8e587ec1f6569d7049a5da3af8,"[wasm][AOT] fix codegen for small structs on stack (#118355)

* fix

* testing Larry's feedback

* another attempt

* more

* Update src/mono/mono/mini/mini-wasm.c

Co-authored-by: Larry Ewing <lewing@microsoft.com>

---------

Co-authored-by: Larry Ewing <lewing@microsoft.com>",35,1209,77,[browser] single threaded diagnostic server -part 1 (issue_ref)
dotnet/runtime,da4f0a33ecec67908327138bfa0f153c3821fa78,[browser] remove EXPORT_EXCEPTION_HANDLING_HELPERS (#111033),2025-02-20 10:08:05+00:00,Pavel Savara,0,,,2,4,3,[browser] remove export_exception_handling_helpers (issue_ref)
dotnet/runtime,ca710ec13119380380dc388943b12b1c35915ee7,"Reapply ""[browser][MT] move wasm MT CI legs to extra-platforms (#112712)"" (#112716)

* Revert ""Revert ""[browser][MT] move wasm MT CI legs to extra-platforms (#11269…""

This reverts commit d6b62982cf0c9e1d2eb420c943d584a6a3636d6e.

* Only include multithreaded job dependency when we have it

* Fixup

* Keep MT build for WBT

* Remove WASI from runtime.yml too, keep it only in extra-platforms

* Keep build-only WBT in runtime.yml",2025-02-20 14:06:06+00:00,Alexander Köplinger,0,,,3,17,28,"reapply ""[browser][mt] move wasm mt ci legs to extra-platforms (issue_ref)"" (issue_ref)* revert ""revert ""[browser][mt] move wasm mt ci legs to extra-platforms (issue_ref…""this reverts commit d6b62982cf0c9e1d2eb420c943d584a6a3636d6e.* only include multithreaded job dependency when we have it* fixup* keep mt build for wbt* remove wasi from runtime.yml too, keep it only in extra-platforms* keep build-only wbt in runtime.yml"
dotnet/runtime,03324cdb4ad5f408129ef203bc179caf55dbb642,"Handle overlapped groups of bounds checks (#112660)

Co-authored-by: Jakob Botsch Nielsen <Jakob.botsch.nielsen@gmail.com>",2025-02-20 14:47:30+00:00,Egor Bogatov,0,,,2,84,30,handle overlapped groups of bounds checks (issue_ref)
dotnet/runtime,59414b52dbe58b2cdd07be9430dfd78b9f0677d3,"Specialize Contains for Iterators in LINQ (#112684)

* Specialize Contains for Iterators in LINQ

It appears that Contains ends up being reasonably common after a series of LINQ operations, whether explicitly at the call site or because a method that returns an enumerable uses LINQ internally and then the call site does Contains.

We can optimize Contains for a bunch of operators, just as we can for First/Last. In some cases, we can skip the operator completely, e.g. Contains on a Shuffle or OrderBy is no different from one on the underlying source, in other cases we can optimize by processing the source directly, e.g. a Contains on a Concat can end up doing a Contains on each source, which can in turn pick up vectorized implementations if those individual sources support them. Some of the operators actually already provided Contains implementations as part of implementing IList, and this just makes those implementations accessible. In other cases, new overrides of a new virtual Contains on Iterator are added.",2025-02-20 15:14:24+00:00,Stephen Toub,1,08298b48fd98df648d90c73e058522e4ac2eb008,"Fix Contains for Distinct/Union with custom comparer (#112815)

* Fix Contains for Distinct/Union with custom comparer

The recently-added optimization needs to factor in a non-default comparer.

* Address feedback

---------

Co-authored-by: Eirik Tsarpalis <eirik.tsarpalis@gmail.com>",19,570,26,"specialize contains for iterators in linq (issue_ref)* specialize contains for iterators in linqit appears that contains ends up being reasonably common after a series of linq operations, whether explicitly at the call site or because a method that returns an enumerable uses linq internally and then the call site does contains.we can optimize contains for a bunch of operators, just as we can for first/last. in some cases, we can skip the operator completely, e.g. contains on a shuffle or orderby is no different from one on the underlying source, in other cases we can optimize by processing the source directly, e.g. a contains on a concat can end up doing a contains on each source, which can in turn pick up vectorized implementations if those individual sources support them. some of the operators actually already provided contains implementations as part of implementing ilist, and this just makes those implementations accessible. in other cases, new overrides of a new virtual contains on iterator are added."
dotnet/runtime,7e9343be8e693f23d8a7a5c00d6f668668dc7769,"MemoryCache: Add TryGetValue(ReadOnlySpan<char>) API (#112695)

* M.E.C.M. Add TryGetValue(ReadOnlySpan<char>) API

fix #110504",2025-02-20 15:57:18+00:00,Marc Gravell,1,840fc4a5c7ea831490573391ed5ef5a7d346dc2f,"Optimize Microsoft.Extensions.Caching.Memory (#111050)

* Optimize Microsoft.Extensions.Caching.Memory

* AbsoluteExpiration opts

* Address PR feedback

* Fix merge conflicts

* Address PR feedback",3,157,4,memorycache: add trygetvalue(readonlyspan<char>) api (issue_ref)* m.e.c.m. add trygetvalue(readonlyspan<char>) apifix issue_ref
dotnet/runtime,6211fe46faef014ca31dcd90808a2012d01a017c,Flow DotNetBuildTests (#112732),2025-02-20 17:30:24+00:00,Viktor Hofer,0,,,1,1,0,flow dotnetbuildtests (issue_ref)
dotnet/runtime,b098f24c681f8943cdb1815392ef075f6b9e1141,Host: log exception if a service factory fails (#112534),2025-02-20 17:56:39+00:00,mus65,1,273dbb9fc5b3e8ada0471c912bc5a37b003b4416,Host: fix Cancellation not aborting Start in some cases (#113442),2,41,15,host: log exception if a service factory fails (issue_ref)
dotnet/runtime,fa494644343910cb9931e5ca0bd6857ea74e1c07,Update the folder used for the runtime HelloAndroid app and update the perfBDN app dotnet-install.sh version retrieval. (#112720),2025-02-20 18:04:16+00:00,Parker Bibus,0,,,2,3,4,update the folder used for the runtime helloandroid app and update the perfbdn app dotnet-install.sh version retrieval. (issue_ref)
dotnet/runtime,fb6b045f15929cefc86e605750a6c91898217aae,"Fix winarm64 crossdac build (#112594)

https://github.com/dotnet/runtime/pull/112256 added the ability to cross compile android on windows. This
regressed the win-arm64 crossdac build because it stopped passing CMAKE_TARGET_ARCH and CMAKE_TARGET_OS for
cross component builds where the host and target os's match.

This change makes sure the cmake variables are passed in all cases.",2025-02-20 18:17:38+00:00,Steve Pfister,1,2129f3f9ff0c9a797456163e879ea7a5af72992b,"Make linux-riscv nativeaot port robust (#112736)

* Fix AOT exception handling on linux-riscv64

* Apply more suggestions

Co-authored-by: Filip Navara <filip.navara@gmail.com>

* Fix unwind information for allocation helpers

* Restore correct FP registers in StackFrameIterator::UnwindFuncletInvokeThunk

* Fix register addressing in GcInfoDecoder::GetRegisterSlot

* Fix and enable software write watch

* Fix COOP frames layout

* Fix indirections, comparison and other assembly for write barrier checks

* Fix cross-build on Risc-V host

* Disable R2R in stage2 build

* Fix uninitialized value in RhpPInvoke

* Fix register in RhpPInvokeReturn

* Initialize FP/RA pointers when creating StackFrameIterator from native context

* Fix sign on PROLOG_SAVE_REG_PAIR_INDEXED

* Fix more of the logic in write barriers. Needs further audit.

* Fix incorrect unwinding information generated for methods with frame size > PAGE_SIZE

* Fix emitting jump to bad slot helper

* Fix unwind info for universal transitions

* Fix comment

* Fix flipped RA/FP in universal transition unwinding

* WIP: Rewrite thunk code generation

* WIP: Fix RhCommonStub

* Fix layout of universal translation for unwinding

* WIP: Add memory barriers to native AOT asm helpers (https://github.com/dotnet/runtime/issues/106219)

* WIP: Add fences to RhpCheckedLockCmpXchg/RhpCheckedXchg and fix atomicity guarantees of RhpCheckedXchg

* Preserve registers in INLINE_GET_TLS_VAR

* Preserve a7 as well

* WIP: Attempt to fix masks in IsInProlog/TrailingEpilogueInstructionsCount (to be reviewed)

* WIP: Fix GC hijacking flags and possible return value trashing

* Fix return value trashing

* Actually fix the PTFF_THREAD_HIJACK_HI flag in correct file

* Apply suggestions from code review

Co-authored-by: Tomek Sowiński <tomeksowi@gmail.com>

* Update src/coreclr/nativeaot/Runtime/ThunksMapping.cpp

Co-authored-by: Filip Navara <filip.navara@gmail.com>

* Make style consistent

* Flip the sign of PROLOG_SAVE_REG_PAIR_INDEXED to match CoreCLR definition and PROLOG_SAVE_REG_PAIR_NO_FP_INDEXED

* Fix the last change to sign

* Save one mv instruction

* Relax FENCE in R2R helpers

* Apply suggestiosn from CR review

Co-authored-by: Tomek Sowiński <tomeksowi@gmail.com>

* Update managed defintion of TransitionBlock too

* Update TLSDESC comments

* Update src/coreclr/nativeaot/Runtime/riscv64/WriteBarriers.S

Co-authored-by: Tomasz Sowiński <tomeksowi@gmail.com>

* Relax semantics of a fence in R2R helper to match ARM64

* Add missing fence in RhpAssignRefRiscV64 (matches ARM code and CoreCLR/Risc-V code)

* Match barriers emitted by PalInterlockedOperationBarrier in NativeAOT and equivalent code in CoreCLR in ExchangeObject/CompareExchangeObject

---------

Co-authored-by: Filip Navara <filip.navara@gmail.com>
Co-authored-by: Tomek Sowiński <tomeksowi@gmail.com>
Co-authored-by: Jan Kotas <jkotas@microsoft.com>",3,13,5,fix winarm64 crossdac build (issue_ref) added the ability to cross compile android on windows. thisregressed the win-arm64 crossdac build because it stopped passing cmake_target_arch and cmake_target_os forcross component builds where the host and target os's match.this change makes sure the cmake variables are passed in all cases.
dotnet/runtime,9e2afd19bf43d7e2820afc06191b075a98670f2a,"Clean up our runtime-deps packages and enable ARM64 Debs (#112671)

* Update our signing logic to sign the azl.3 prereqs package with the correct cert

* Delete the CBL-Mariner prereqs packages now that we aren't publishing the special Mariner package copies

* Remove runtime-deps packages for distros Microsoft doesn't publish packages for any more. These distros publish .NET RPMs themselves.

* Remove unused zlib1g dependency from the deb/ubuntu package

* Remove old Debian support (pre-Bookworm) and all Ubuntu support from the deb package. We don't publish packages for Ubuntu any more

* Update our opensuse/sles packages for Leap 15.6

* Build Deb packages for ARM64

* Update installers.proj

* Restore logic for supporting multiple libicu versions, but only include the version that we know any debian distro has.",2025-02-20 18:24:13+00:00,Jeremy Koritzinsky,0,,,13,24,101,"clean up our runtime-deps packages and enable arm64 debs (issue_ref)* update our signing logic to sign the azl.3 prereqs package with the correct cert* delete the cbl-mariner prereqs packages now that we aren't publishing the special mariner package copies* remove runtime-deps packages for distros microsoft doesn't publish packages for any more. these distros publish .net rpms themselves.* remove unused zlib1g dependency from the deb/ubuntu package* remove old debian support (pre-bookworm) and all ubuntu support from the deb package. we don't publish packages for ubuntu any more* update our opensuse/sles packages for leap 15.6* build deb packages for arm64* update installers.proj* restore logic for supporting multiple libicu versions, but only include the version that we know any debian distro has."
dotnet/runtime,7e5e573dd32990beedee8b2749a0ffe5af784d3c,"Bump the minimum ICU version to 60 (#112713)

* Bump the minimum ICU version to 60

As ICU approaches version 80, we need to consider what to do about our ICU version ranges. Our system currently supports a min version of 50 and a max of ""min + 30"", so 80.

ICU60 is the version that shipped with Ubuntu 18.04, which is the distro that we base our libc version on. For Alpine, the version of ICU in the distro we base our libc on (3.17) ships with ICU 72.

I recommend that we bump our min to ICU60, which will by our current rules bump our max to ICU90, which will give us more runway.

I'd recommend holding off on merging this until https://github.com/dotnet/runtime/pull/112671 is merged, as that PR changes our deps packages to better describe scenarios where we actually ship packages today.

* Remove old optional definition",2025-02-20 18:30:18+00:00,Jeremy Koritzinsky,0,,,6,13,105,"bump the minimum icu version to 60 (issue_ref)* bump the minimum icu version to 60as icu approaches version 80, we need to consider what to do about our icu version ranges. our system currently supports a min version of 50 and a max of ""min + 30"", so 80.icu60 is the version that shipped with ubuntu 18.04, which is the distro that we base our libc version on. for alpine, the version of icu in the distro we base our libc on (3.17) ships with icu 72.i recommend that we bump our min to icu60, which will by our current rules bump our max to icu90, which will give us more runway.i'd recommend holding off on merging this until is merged, as that pr changes our deps packages to better describe scenarios where we actually ship packages today.* remove old optional definition"
dotnet/runtime,306ced22985b4f9a7941d5c516f175805a2dd47b,Relax encrypted cert requirement for Windows with Pkcs12Export tests,2025-02-20 22:01:30+00:00,Kevin Jones,0,,,1,10,2,relax encrypted cert requirement for windows with pkcs12export tests
dotnet/runtime,2cb402c6eb169fa875a9b4875bedc4a82a5e28a2,"Fix exception handling in the prestub worker - take 2 (#112666)

* Fix exception handling in the prestub worker

There is a bug in the new exception handling when ThePreStub is called
from CallDescrWorkerInternal and the exception is propagated through
that. One of such cases is when a managed class is being initialized
during JITting and the constructor is in an assembly that's not found.
The bug results in skipping all the native frames upto a managed frame
that called that native chain that lead to the exception. In the
specific case I've mentioned, a lock in the native code is left in
locked state. That later leads to a hang. This was case was observed
with Roslyn invoking an analyzer where one of the dependencies was
missing.

The fix is to ensure that when ThePreStub is called by
CallDescrWorkerInternal, the exception is not caught in the
PreStubWorker. It is left flowing into the native calling code instead.

The same treatment is applied to ExternalMethodFixupWorker and
VSD_ResolveWorker too.

On Windows, we also need to prevent the ProcessCLRException invocation
to call into the managed exception handling code.

* Fix missing ContextFlags setting

I was hitting intermittent crashes in the unhandled exception test
with GC stress C enabled due to this when GetSSP tried to access the
SSP in the extended part of the context.

* Fix couple of issues

* The previous set of changes removed popping of ExInfos too. That's not
  correct though. But it should be done in a different place than the
  ProcessCLRExceptionNew.
* There was a problem (even before the fix) that an exception caught in
  DispatchInfo::InvokeMember was reported (via console log and to the
  debugger) as unhandled.

This change also adds a new flavor of the unhandled exception test that
throws an unhandled exception on a secondary thread to exercise the
related code path.

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-02-20 23:25:02+00:00,Jan Vorlicek,1,8381f2af90a4246de9b3c538895c32b803291a1d,"Prevent OS core dump creation for intentionally crashing tests (#113732)

* Prevent OS core dump creation for intentionally crashing tests

There are three coreclr tests that intentionally run a crashing secondary
process. While the CreateDump invocation on crash for these tests was
already disabled, the OS core dump creation was still happening.
In the CI this was causing test machines getting out of disk space.
This change disables OS core dump creation for those tests.

Close #113652

* Reflect PR

* call the setrlimit explicitly on Linux / macOS only
* fix missing reference to the CoreCLRTestLibrary.csproj in the ParallelCrash.csproj.
  I have accidentally put it into ParallelCrashTester.csproj instead.

* Update src/tests/Common/CoreCLRTestLibrary/Utilities.cs

Co-authored-by: Aaron Robinson <arobins@microsoft.com>

---------

Co-authored-by: Aaron Robinson <arobins@microsoft.com>",17,318,77,"fix exception handling in the prestub worker - take 2 (issue_ref)* fix exception handling in the prestub workerthere is a bug in the new exception handling when theprestub is calledfrom calldescrworkerinternal and the exception is propagated throughthat. one of such cases is when a managed class is being initializedduring jitting and the constructor is in an assembly that's not found.the bug results in skipping all the native frames upto a managed framethat called that native chain that lead to the exception. in thespecific case i've mentioned, a lock in the native code is left inlocked state. that later leads to a hang. this was case was observedwith roslyn invoking an analyzer where one of the dependencies wasmissing.the fix is to ensure that when theprestub is called bycalldescrworkerinternal, the exception is not caught in theprestubworker. it is left flowing into the native calling code instead.the same treatment is applied to externalmethodfixupworker andvsd_resolveworker too.on windows, we also need to prevent the processclrexception invocationto call into the managed exception handling code.* fix missing contextflags settingi was hitting intermittent crashes in the unhandled exception testwith gc stress c enabled due to this when getssp tried to access thessp in the extended part of the context.* fix couple of issues* the previous set of changes removed popping of exinfos too. that's not correct though. but it should be done in a different place than the processclrexceptionnew.* there was a problem (even before the fix) that an exception caught in dispatchinfo::invokemember was reported (via console log and to the debugger) as unhandled.this change also adds a new flavor of the unhandled exception test thatthrows an unhandled exception on a secondary thread to exercise therelated code path.---------"
dotnet/runtime,8d3b24598a268ae00664a7dbeb792791ecde5231,Change the Unix cert store to store certificates with AES256+SHA256 PBES2,2025-02-21 00:32:41+00:00,Kevin Jones,0,,,2,54,1,change the unix cert store to store certificates with aes256+sha256 pbes2
dotnet/runtime,69facbcb90211a903ffe16f62b9cc4af3528cbb0,"[android][coreclr] Make coreclr build specify `HOST_ANDROID` and include Android logging APIs (#112677)

- Define `HOST_ANDROID` for coreclr builds and link to Android logging APIs
- Make `jitprintf` use [Android logging APIs](https://developer.android.com/ndk/reference/group/logging) if printing to stdout
  - This allows us to get [JIT disassembly output](https://github.com/dotnet/runtime/blob/main/docs/design/coreclr/jit/viewing-jit-dumps.md#disassembly-output) via logcat",2025-02-21 02:39:11+00:00,Elinor Fung,0,,,4,21,0,[android][coreclr] make coreclr build specify and include android logging apis (issue_ref)- define for coreclr builds and link to android logging apis- make use [android logging apis]( if printing to stdout - this allows us to get [jit disassembly output](#disassembly-output) via logcat
dotnet/runtime,0517b169151e8d5904da780282eb6a41662d9b05,"Clarify comments for `ClrRestoreNonvolatileContextWorker`. (#112758)

* Clarify comments for `ClrRestoreNonvolatileContextWorker`.

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-02-21 03:03:32+00:00,anthonycanino,0,,,1,2,0,clarify comments for . (issue_ref)* clarify comments for .---------
dotnet/runtime,51316c2e7ba876b00f9500d4fce02103bac99241,"Implement 'ConditionalWeakTable<TKey,TValue>.Remove' API (#112263)",2025-02-21 03:41:59+00:00,Sergio Pedri,0,,,3,104,20,"implement 'conditionalweaktable<tkey,tvalue>.remove' api (issue_ref)"
dotnet/runtime,24b8f3c0f668a8e5dd6bf80ff94cdfdbaf1fbedf,Add Random.Get{Hex}String (#112162),2025-02-21 03:42:55+00:00,Stephen Toub,0,,,3,124,0,add random.get{hex}string (issue_ref)
dotnet/runtime,c1fe87ad88532f0e80de3739fe7b215e6e1f8b90,"Coretestlib: Add information of parent process id during test failure for Windows (#112724)

* Print process and parent process using wmic

* Do it for windows only",2025-02-21 06:04:37+00:00,Kunal Pathak,1,0ee8cba090f1934a8af3992e70d9bdd50e7d8fa7,"Fix CoreclrTestWrapperLib to be robust against existed processes (#113937)

Fixes #112846",1,28,0,coretestlib: add information of parent process id during test failure for windows (issue_ref)* print process and parent process using wmic* do it for windows only
dotnet/runtime,6e3e19372595f57327ad9679c3d9019916c94335,"Use pooled Utf8JsonWriter when doing sync streaming serialization. (#112745)

Co-authored-by: Stephen Toub <stoub@microsoft.com>",2025-02-21 09:49:31+00:00,Eirik Tsarpalis,0,,,1,24,19,use pooled utf8jsonwriter when doing sync streaming serialization. (issue_ref)
dotnet/runtime,09e29b6fda5e985a4980b6697268fe4a7499f1f6,"[main] Update dependencies from dotnet/cecil, dotnet/hotreload-utils, dotnet/icu, dotnet/runtime-assets (#112624)

* Update dependencies from https://github.com/dotnet/hotreload-utils build 20250210.1

Microsoft.DotNet.HotReload.Utils.Generator.BuildTool
 From Version 10.0.0-alpha.0.25103.1 -> To Version 10.0.0-alpha.0.25110.1

* Update dependencies from https://github.com/dotnet/cecil build 20250209.3

Microsoft.SourceBuild.Intermediate.cecil , Microsoft.DotNet.Cecil
 From Version 0.11.5-alpha.25078.1 -> To Version 0.11.5-alpha.25109.3

* Update dependencies from https://github.com/dotnet/icu build 20250216.1

Microsoft.NETCore.Runtime.ICU.Transport
 From Version 10.0.0-preview.2.25109.1 -> To Version 10.0.0-preview.2.25116.1

* Update dependencies from https://github.com/dotnet/runtime-assets build 20250217.1

Microsoft.DotNet.CilStrip.Sources , Microsoft.NET.HostModel.TestData , System.ComponentModel.TypeConverter.TestData , System.Data.Common.TestData , System.Drawing.Common.TestData , System.Formats.Tar.TestData , System.IO.Compression.TestData , System.IO.Packaging.TestData , System.Net.TestData , System.Private.Runtime.UnicodeData , System.Runtime.Numerics.TestData , System.Runtime.TimeZoneData , System.Security.Cryptography.X509Certificates.TestData , System.Text.RegularExpressions.TestData , System.Windows.Extensions.TestData
 From Version 10.0.0-beta.25110.1 -> To Version 10.0.0-beta.25117.1

* Update dependencies from https://github.com/dotnet/icu build 20250219.1

Microsoft.NETCore.Runtime.ICU.Transport
 From Version 10.0.0-preview.2.25109.1 -> To Version 10.0.0-preview.3.25119.1

* Update dependencies from https://github.com/dotnet/runtime-assets build 20250220.1

Microsoft.DotNet.CilStrip.Sources , Microsoft.NET.HostModel.TestData , System.ComponentModel.TypeConverter.TestData , System.Data.Common.TestData , System.Drawing.Common.TestData , System.Formats.Tar.TestData , System.IO.Compression.TestData , System.IO.Packaging.TestData , System.Net.TestData , System.Private.Runtime.UnicodeData , System.Runtime.Numerics.TestData , System.Runtime.TimeZoneData , System.Security.Cryptography.X509Certificates.TestData , System.Text.RegularExpressions.TestData , System.Windows.Extensions.TestData
 From Version 10.0.0-beta.25110.1 -> To Version 10.0.0-beta.25120.1

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-02-21 09:50:46+00:00,dotnet-maestro[bot],0,,,2,56,56,"[main] update dependencies from dotnet/cecil, dotnet/hotreload-utils, dotnet/icu, dotnet/runtime-assets (issue_ref)* update dependencies from build 20250210.1microsoft.dotnet.hotreload.utils.generator.buildtool from version 10.0.0-alpha.0.25103.1 -> to version 10.0.0-alpha.0.25110.1* update dependencies from build 20250209.3microsoft.sourcebuild.intermediate.cecil , microsoft.dotnet.cecil from version 0.11.5-alpha.25078.1 -> to version 0.11.5-alpha.25109.3* update dependencies from build 20250216.1microsoft.netcore.runtime.icu.transport from version 10.0.0-preview.2.25109.1 -> to version 10.0.0-preview.2.25116.1* update dependencies from build 20250217.1microsoft.dotnet.cilstrip.sources , microsoft.net.hostmodel.testdata , system.componentmodel.typeconverter.testdata , system.data.common.testdata , system.drawing.common.testdata , system.formats.tar.testdata , system.io.compression.testdata , system.io.packaging.testdata , system.net.testdata , system.private.runtime.unicodedata , system.runtime.numerics.testdata , system.runtime.timezonedata , system.security.cryptography.x509certificates.testdata , system.text.regularexpressions.testdata , system.windows.extensions.testdata from version 10.0.0-beta.25110.1 -> to version 10.0.0-beta.25117.1* update dependencies from build 20250219.1microsoft.netcore.runtime.icu.transport from version 10.0.0-preview.2.25109.1 -> to version 10.0.0-preview.3.25119.1* update dependencies from build 20250220.1microsoft.dotnet.cilstrip.sources , microsoft.net.hostmodel.testdata , system.componentmodel.typeconverter.testdata , system.data.common.testdata , system.drawing.common.testdata , system.formats.tar.testdata , system.io.compression.testdata , system.io.packaging.testdata , system.net.testdata , system.private.runtime.unicodedata , system.runtime.numerics.testdata , system.runtime.timezonedata , system.security.cryptography.x509certificates.testdata , system.text.regularexpressions.testdata , system.windows.extensions.testdata from version 10.0.0-beta.25110.1 -> to version 10.0.0-beta.25120.1---------"
dotnet/runtime,36fb5c9db703866aad23f4ec948357c33b4b2a73,"[main] Update dependencies from dotnet/emsdk (#112682)

* Update dependencies from https://github.com/dotnet/emsdk build 20250218.1

Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport , Microsoft.SourceBuild.Intermediate.emsdk
 From Version 10.0.0-preview.2.25117.1 -> To Version 10.0.0-preview.2.25118.1

* Update dependencies from https://github.com/dotnet/emsdk build 20250219.2

Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport , Microsoft.SourceBuild.Intermediate.emsdk
 From Version 10.0.0-preview.2.25117.1 -> To Version 10.0.0-preview.3.25119.2

Dependency coherency updates

runtime.linux-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.linux-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.osx-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.osx-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.win-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.win-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport
 From Version 10.0.0-alpha.1.25110.1 -> To Version 10.0.0-alpha.1.25116.1 (parent: Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Larry Ewing <lewing@microsoft.com>",2025-02-21 09:53:36+00:00,dotnet-maestro[bot],0,,,2,22,22,"[main] update dependencies from dotnet/emsdk (issue_ref)* update dependencies from build 20250218.1microsoft.net.workload.emscripten.current.manifest-10.0.100.transport , microsoft.sourcebuild.intermediate.emsdk from version 10.0.0-preview.2.25117.1 -> to version 10.0.0-preview.2.25118.1* update dependencies from build 20250219.2microsoft.net.workload.emscripten.current.manifest-10.0.100.transport , microsoft.sourcebuild.intermediate.emsdk from version 10.0.0-preview.2.25117.1 -> to version 10.0.0-preview.3.25119.2dependency coherency updatesruntime.linux-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.linux-musl-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.linux-x64.microsoft.netcore.runtime.wasm.node.transport,runtime.linux-musl-x64.microsoft.netcore.runtime.wasm.node.transport,runtime.osx-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.osx-x64.microsoft.netcore.runtime.wasm.node.transport,runtime.win-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.win-x64.microsoft.netcore.runtime.wasm.node.transport from version 10.0.0-alpha.1.25110.1 -> to version 10.0.0-alpha.1.25116.1 (parent: microsoft.net.workload.emscripten.current.manifest-10.0.100.transport---------"
dotnet/runtime,931d75f05d3e719ed5847398d936cd60f27d58ed,Support generic type parameter when created with TypeBuilder (#112372),2025-02-21 10:47:27+00:00,Steve Harter,0,,,10,131,44,support generic type parameter when created with typebuilder (issue_ref)
dotnet/runtime,1eadeffb7cece368101e225e391fd518976279fa,"JIT: Read back parameter register replacements eagerly (#112501)

Have physical promotion read replacements that map to parameter
registers back eagerly in the entry basic block. Reading these back
initially makes it more likely that the backend will be able to
substitute directly for registers.",2025-02-21 20:33:05+00:00,Jakob Botsch Nielsen,0,,,2,84,54,jit: read back parameter register replacements eagerly (issue_ref)have physical promotion read replacements that map to parameterregisters back eagerly in the entry basic block. reading these backinitially makes it more likely that the backend will be able tosubstitute directly for registers.
dotnet/runtime,57ed25449ab954595130997679807a471ef85aef,"CoreCLR interpreter basic compilation and execution (#112369)

* Interpreter wire up

This commit adds a new library for the interpreter. This library is meant to be used as an alt jit compiler, exporting the `getJit` method that returns an interface for method compilation. This library also exports the `getInterpreter` method that returns a separate interface to be used for obtaining any other data from the interpreter library. Method compilation has the following responsability:
        - create an InterpMethod* for the MethodDesc that it flags as compiled. On mono, InterpMethod serves as reference to the method to be called (which is embedded throughout the code) and later on, following compilation, it is filled with additional information relevant for execution, mainly the code pointer and size of the frame. On CoreCLR, this structure will likely lose some of its relevance, we will end up referencing MethodDesc's directly in interpreter instructions. In the future, it will probably make more sense to have a few common fields of the InterpMethod (like the frame size) stored as a code header to the interpreter IR, with a InterpMethod pointer to be stored as well in the code header for less frequent data.
        - set the CORINFO_FLG_INTERPRETER flag in the MethodDesc. This sets up the method to be called through the InterpreterStub.
        - some dummy data that is necessary by the runtime is being generated, mainly the code

The interpreter execution is included in the main coreclr library for convenience and speed. It will be contained in interpexec.h and interpexec.cpp while also including the interpretershared.h header from the interpreter library. This header will contain any defines and types that are relevant both during compilation as well as execution (for example the InterpMethod data or the opcode values). For the execution, InterpFrame is a structure on the native stack that is created for each interpreter frame. It will reference the method being executed as well as pointers to the interpreter stack. InterpThreadContext is a thread local structure that contains execution relevant information for the interpreter, for now it just maintains the position of the interpreter stack pointer.

* Add support for compilation and execution of a simple method

This commit ports over some of the compilation machinery from mono. Method compilation takes place in GenerateCode. It allocates a basic block, goes over the IL code and emits code as it goes, while updating the IL stack state. Method code is kept as a linked list of basic blocks. Each basic block keeps a linked list of instructions. The instruction information is represented by an opcode, source and destination vars and additional instruction data. Once the IL code is imported, the var offset allocator needs to kick in in order to allocate an offset for each variable referenced in the code. Once offsets are allocated the final interpreter IR can be generated, writing the opcode and instruction data linearly in the code, while replacing variable indexes with the actual variable offset.

Unlike the mono interpreter, that maintains the code as an uint16_t stream, we chose to use from the start an int32_t based stream. The mono interpreter runs into limitations when executing very large methods, where some offsets don't fit in the uint16_t space. There will be a performance penalty for this that will be addressed in the distant future, by adding short versions for common opcodes.

* Add interpreter test

The test contains one application that contains a method named `RunInterpreterTests` serving as the interpreter entry point. This application is built only, as it is not the test itself. This application is executed with corerun by the actual test, which waits for the corerun exit code to determine success.

* Stop using a mapping table between MethodDesc and InterpMethod

InterpMethod* is used to handle interpreted method execution on mono, but it is not really needed. For CoreCLR we will turn this structure in a header to the compiled IR code, and identify other methods directly by the IR code pointer. The first pointer slot in the IR code will contain a pointer to the InterpMethod containing any other relevant information needed in the method execution.",2025-02-21 22:01:34+00:00,Vlad Brezae,1,d939793d993ad2bede8eb9a3e8f9a0ca41592af4,"Hotfix interpreter crash (#112920)

The fake unwind info generation in the interpreter was broken and caused
write after an end of the allocated space.

I am working on a change to add a interpreter specific code manager that
gets rid of the need for fake unwind info creation, but to prevent CI
failures for now, I have created this intermediate hotfix.",22,1410,6,"coreclr interpreter basic compilation and execution (issue_ref)* interpreter wire upthis commit adds a new library for the interpreter. this library is meant to be used as an alt jit compiler, exporting the method that returns an interface for method compilation. this library also exports the method that returns a separate interface to be used for obtaining any other data from the interpreter library. method compilation has the following responsability: - create an interpmethod* for the methoddesc that it flags as compiled. on mono, interpmethod serves as reference to the method to be called (which is embedded throughout the code) and later on, following compilation, it is filled with additional information relevant for execution, mainly the code pointer and size of the frame. on coreclr, this structure will likely lose some of its relevance, we will end up referencing methoddesc's directly in interpreter instructions. in the future, it will probably make more sense to have a few common fields of the interpmethod (like the frame size) stored as a code header to the interpreter ir, with a interpmethod pointer to be stored as well in the code header for less frequent data. - set the corinfo_flg_interpreter flag in the methoddesc. this sets up the method to be called through the interpreterstub. - some dummy data that is necessary by the runtime is being generated, mainly the codethe interpreter execution is included in the main coreclr library for convenience and speed. it will be contained in interpexec.h and interpexec.cpp while also including the interpretershared.h header from the interpreter library. this header will contain any defines and types that are relevant both during compilation as well as execution (for example the interpmethod data or the opcode values). for the execution, interpframe is a structure on the native stack that is created for each interpreter frame. it will reference the method being executed as well as pointers to the interpreter stack. interpthreadcontext is a thread local structure that contains execution relevant information for the interpreter, for now it just maintains the position of the interpreter stack pointer.* add support for compilation and execution of a simple methodthis commit ports over some of the compilation machinery from mono. method compilation takes place in generatecode. it allocates a basic block, goes over the il code and emits code as it goes, while updating the il stack state. method code is kept as a linked list of basic blocks. each basic block keeps a linked list of instructions. the instruction information is represented by an opcode, source and destination vars and additional instruction data. once the il code is imported, the var offset allocator needs to kick in in order to allocate an offset for each variable referenced in the code. once offsets are allocated the final interpreter ir can be generated, writing the opcode and instruction data linearly in the code, while replacing variable indexes with the actual variable offset.unlike the mono interpreter, that maintains the code as an uint16_t stream, we chose to use from the start an int32_t based stream. the mono interpreter runs into limitations when executing very large methods, where some offsets don't fit in the uint16_t space. there will be a performance penalty for this that will be addressed in the distant future, by adding short versions for common opcodes.* add interpreter testthe test contains one application that contains a method named serving as the interpreter entry point. this application is built only, as it is not the test itself. this application is executed with corerun by the actual test, which waits for the corerun exit code to determine success.* stop using a mapping table between methoddesc and interpmethodinterpmethod* is used to handle interpreted method execution on mono, but it is not really needed. for coreclr we will turn this structure in a header to the compiled ir code, and identify other methods directly by the ir code pointer. the first pointer slot in the ir code will contain a pointer to the interpmethod containing any other relevant information needed in the method execution."
dotnet/runtime,0205063ee6f87c4ac3bc22a48b71d930a03cbe5b,MemoryCache: use net9.cs file rather than #if for TFM limits (#112786),2025-02-22 04:57:39+00:00,Marc Gravell,0,,,3,21,8,memorycache: use net9.cs file rather than #if for tfm limits (issue_ref)
dotnet/runtime,4112020149a2d421d46729c74378c974fa20f21f,Ensure 3DES Exports are actually 3DES on all versions of Windows,2025-02-22 13:29:50+00:00,Kevin Jones,0,,,1,35,36,ensure 3des exports are actually 3des on all versions of windows
dotnet/runtime,fb67dbab4f50402a92a0a42a6c4254df304b4bbb,SPMI: Record and replay `notifyInstructionSetUsage` properly (#112764),2025-02-22 16:31:24+00:00,Jakob Botsch Nielsen,0,,,7,49,15,spmi: record and replay properly (issue_ref)
dotnet/runtime,6022adf92c35ce77ba75d32ebddb8ef64b48a635,Use rangecheck in assertprop (#112766),2025-02-22 17:52:34+00:00,Egor Bogatov,0,,,3,129,38,use rangecheck in assertprop (issue_ref)
dotnet/runtime,2a51ee3fd10c2a5af5d44e710ef804813f73bf75,"JIT: Don't show code bytes for loongarch64 disasm unless it was told to do so (#112486)

* Use the correct knob

* Add disDiffable check before printing disasm",2025-02-23 14:54:07+00:00,Steve,0,,,1,5,1,jit: don't show code bytes for loongarch64 disasm unless it was told to do so (issue_ref)* use the correct knob* add disdiffable check before printing disasm
dotnet/runtime,1d817566ba1c7e90309cb2037d253a97ab68bf34,"Use a unified cache for SSL_CTX objects (#112567)

* Use the same cache for client and server SSL_CTX objects

* Feedback

* Minor improvements",2025-02-24 08:45:43+00:00,Radek Zikmund,0,,,4,43,66,use a unified cache for ssl_ctx objects (issue_ref)* use the same cache for client and server ssl_ctx objects* feedback* minor improvements
dotnet/runtime,9b7b0323fb6d7616c3e5a860079fb552543e8b17,"JIT: Check ISA directly when printing `JitDisasm` (#112828)

`compOpportunisticallyDependsOn` does a JIT-EE call that can otherwise
make the compilation miss when `JitDisasm` is enabled.",2025-02-24 09:38:59+00:00,Jakob Botsch Nielsen,0,,,1,15,12,jit: check isa directly when printing (issue_ref) does a jit-ee call that can otherwisemake the compilation miss when is enabled.
dotnet/runtime,5f97ddfff8074355964e6d13a690c236dd818050,"[main] Update dependencies from dotnet/roslyn (#112513)

* Update dependencies from https://github.com/dotnet/roslyn build 20250212.6

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.14.0-2.25110.8 -> To Version 4.14.0-2.25112.6

* Update dependencies from https://github.com/dotnet/roslyn build 20250213.11

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.14.0-2.25110.8 -> To Version 4.14.0-2.25113.11

* Update dependencies from https://github.com/dotnet/roslyn build 20250214.10

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.14.0-2.25110.8 -> To Version 4.14.0-2.25114.10

* Update dependencies from https://github.com/dotnet/roslyn build 20250215.2

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.14.0-2.25110.8 -> To Version 4.14.0-2.25115.2

* Update dependencies from https://github.com/dotnet/roslyn build 20250217.2

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.14.0-2.25110.8 -> To Version 4.14.0-2.25117.2

* Update dependencies from https://github.com/dotnet/roslyn build 20250218.2

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.14.0-2.25110.8 -> To Version 4.14.0-2.25118.2

* Update dependencies from https://github.com/dotnet/roslyn build 20250219.7

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.14.0-2.25110.8 -> To Version 4.14.0-2.25119.7

* Update dependencies from https://github.com/dotnet/roslyn build 20250220.12

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.14.0-2.25110.8 -> To Version 4.14.0-2.25120.12

* Update dependencies from https://github.com/dotnet/roslyn build 20250221.3

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.14.0-2.25110.8 -> To Version 4.14.0-2.25121.3

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Larry Ewing <lewing@microsoft.com>",2025-02-24 09:45:15+00:00,dotnet-maestro[bot],0,,,2,11,11,"[main] update dependencies from dotnet/roslyn (issue_ref)* update dependencies from build 20250212.6microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.14.0-2.25110.8 -> to version 4.14.0-2.25112.6* update dependencies from build 20250213.11microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.14.0-2.25110.8 -> to version 4.14.0-2.25113.11* update dependencies from build 20250214.10microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.14.0-2.25110.8 -> to version 4.14.0-2.25114.10* update dependencies from build 20250215.2microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.14.0-2.25110.8 -> to version 4.14.0-2.25115.2* update dependencies from build 20250217.2microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.14.0-2.25110.8 -> to version 4.14.0-2.25117.2* update dependencies from build 20250218.2microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.14.0-2.25110.8 -> to version 4.14.0-2.25118.2* update dependencies from build 20250219.7microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.14.0-2.25110.8 -> to version 4.14.0-2.25119.7* update dependencies from build 20250220.12microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.14.0-2.25110.8 -> to version 4.14.0-2.25120.12* update dependencies from build 20250221.3microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.14.0-2.25110.8 -> to version 4.14.0-2.25121.3---------"
dotnet/runtime,9be0be09ef925c6bc398df69f5d0efd4f8fa6662,"JIT: Remove uses of old ABI information (#112818)

- Remove uses of `compArgSize`. This value is computed by the old LclVarDsc ABI
  classification code and used to derive the amount of stack spaced consumed for
  parameters. Replace it with the value from the new ABI information instead.
- Remove `LclVarDsc::lvSize` and `LclVarDsc::lvArgStackSize`. Generally
  `LclVarDsc::lvExactSize` is the right replacement, unless specifically the
  stack home size is needed, in which case the replacement is
  `Compiler::lvaLclStackHomeSize`.
- Remove uses of `LclVarDsc` HFA information. This was the primary motivation
  for removing `LclVarDsc::lvSize` since it was querying HFA information.",2025-02-24 16:18:22+00:00,Jakob Botsch Nielsen,1,09b99bf91361a388ddeff97a79215bc08007276f,"JIT: Handle `FIELD_LIST` as a user of calls in lowering (#112904)

Fix #112890",19,163,226,"jit: remove uses of old abi information (issue_ref)- remove uses of . this value is computed by the old lclvardsc abi classification code and used to derive the amount of stack spaced consumed for parameters. replace it with the value from the new abi information instead.- remove and . generally is the right replacement, unless specifically the stack home size is needed, in which case the replacement is .- remove uses of hfa information. this was the primary motivation for removing since it was querying hfa information."
dotnet/runtime,9ccb9dee75d4cb54897bd874b8e1c555c4f5d779,"Update dependencies from https://github.com/dotnet/source-build-reference-packages build 20250219.1 (#112834)

Microsoft.SourceBuild.Intermediate.source-build-reference-packages
 From Version 10.0.611203 -> To Version 10.0.611901

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-02-24 18:38:00+00:00,dotnet-maestro[bot],0,,,1,2,2,update dependencies from build 20250219.1 (issue_ref)microsoft.sourcebuild.intermediate.source-build-reference-packages from version 10.0.611203 -> to version 10.0.611901
dotnet/runtime,050c506b1629466f3ccd8cc0f0aa18c0e682a219,Remove thread pointer from AwareLock (#112715),2025-02-24 19:08:05+00:00,Eduardo Velarde,1,fa3beb9521adb450863f3460d0e71bc0c5498d02,"Use FLS detach callback as a thread termination notification. Another try. (#112809)

* Use FLS detach as thread termination notification on windows.

* use _ASSERTE_ALL_BUILDS

* one more case

* InitFlsSlot throws per convention used in threading initialization

* OsDetachThread could be void

* Update src/coreclr/vm/ceemain.cpp

* ensure CoInitialize

* Asserts to fail deterministically.

* comments

* scope the failfast to Windows and tweak the comments a bit.

* better assert

* Apply suggestions from code review

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Undo unnecessary finalizer thread changes

* reverse the failfast condition

* handle destruction of unattached threads

* PR feedback

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Update src/coreclr/vm/ceemain.cpp

* set g_fComStarted as soon as we call CoInitialize

* Naming nit

* fix a typpo + better comment

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",4,33,53,remove thread pointer from awarelock (issue_ref)
dotnet/runtime,5aacdc4f73ca781c686ef19860a470eafb897dc7,"Update ZLibNative comments (#112585)

Replace most instances of <code> with <c>, or <see> where relevant.
Replace <p> with <para> to maintain paragraph structure.
Update reference to current version number.",2025-02-24 20:04:19+00:00,Edward Neal,0,,,3,92,80,"update zlibnative comments (issue_ref)replace most instances of <code> with <c>, or <see> where relevant.replace <p> with <para> to maintain paragraph structure.update reference to current version number."
dotnet/runtime,bbc02a5878c4292457b78c53de5ac50c43552bf4,Disable interpreter test on native AOT (#112857),2025-02-24 22:03:10+00:00,Michal Strehovský,1,38b7d037bbf5129e025119524b571d28042987ed,"Disable GC stress tests for the interpreter test (#112906)

* Disable GC stress tests for the interpreter test

There is a problem with the interpreter codegen and GC stress. The
runtime is attempting to sprinkle breakpoints in the interpreter IR.

Temporarily disable the GC stress for the test until it is fixed.

* Update src/tests/JIT/interpreter/InterpreterTester.csproj

Co-authored-by: Larry Ewing <lewing@microsoft.com>

---------

Co-authored-by: Larry Ewing <lewing@microsoft.com>",1,2,0,disable interpreter test on native aot (issue_ref)
dotnet/runtime,db681fb307d754c3746ffb40e0634e4c4e0caa9e,"Revert ""Use rangecheck in assertprop (#112766)"" (#112872)

This reverts commit 6022adf92c35ce77ba75d32ebddb8ef64b48a635.",2025-02-24 23:48:23+00:00,Andy Ayers,0,,,3,38,129,"revert ""use rangecheck in assertprop (issue_ref)"" (issue_ref)this reverts commit 6022adf92c35ce77ba75d32ebddb8ef64b48a635."
dotnet/runtime,d343214884fe3f8d7e5f4487945a92b60b540a08,"Use certificate thumbprints from entire chain in SSL_CTX cache (#112858)

* Use  certificate thumbprints from entire chain in SSL_CTX cache.

* Feedback",2025-02-25 11:27:42+00:00,Radek Zikmund,1,4b16dce6097aa70e09bb82e27c5055421cf74ded,"Support overriding MsQuic.dll in the application directory on Windows. (#103351)

* Support overriding MsQuic.dll in the application directory on Windows.

* Hide functionality behind appctx switch

* Prioritize appctx switch, deduplicate usage

* Change method name

* No envvar, no fallback

* Run tests on older windows.

* Fix tests, log msquic load path

* Make sure the msquic.dll is included in the helix package

* Don't run on Win 8

* Simplify support condition

* Fix log

* Code review feedback",2,51,28,use certificate thumbprints from entire chain in ssl_ctx cache (issue_ref)* use certificate thumbprints from entire chain in ssl_ctx cache.* feedback
dotnet/runtime,22fc451835ac826b51ae19412a99fddbb2f8b75f,"[Android] Add callback to host-runtime contract for getting assembly data (#112705)

Add a new callback to `host_runtime_contract` that is called default assembly resolution:
```c++
// Probe the host for `path`. Sets pointer to data start and its size, if found.
// Returns true if found, false otherwise. If false, out parameter values are ignored by the runtime.
bool(HOST_CONTRACT_CALLTYPE* external_assembly_probe)(
    const char* path,
    /*out*/ void** data
    /*out*/ int64_t* size);
```

Contributes to https://github.com/dotnet/runtime/issues/112706

This is a set of minimal changes required to make https://github.com/dotnet/android/pull/9572 (the `.NET for Android` CoreCLR host) work with standard .NET for Android applications.",2025-02-25 11:52:07+00:00,Marek Habersack,0,,,16,130,70,[android] add callback to host-runtime contract for getting assembly data (issue_ref)add a new callback to that is called default assembly resolution:contributes to this is a set of minimal changes required to make (the coreclr host) work with standard .net for android applications.
dotnet/runtime,e6c5bb4437948d6e8f2d582d670967a4a6e2e1da,"JIT: Use precise multireg arg check for old promotion (#112883)

`lvaIsMultiregStruct` does not account for whether the argument was
_actually_ passed in multiple regs, it just checks if the type is a type
that could sometimes be passed in multiple registers. Change this to a
precise check.",2025-02-25 12:01:54+00:00,Jakob Botsch Nielsen,0,,,2,27,2,"jit: use precise multireg arg check for old promotion (issue_ref) does not account for whether the argument was_actually_ passed in multiple regs, it just checks if the type is a typethat could sometimes be passed in multiple registers. change this to aprecise check."
dotnet/runtime,d0fe41c99061b945f5fb38c4d8e4cbf21209d8e5,JIT: Introduce O1K_VN (#112889),2025-02-25 12:12:54+00:00,Egor Bogatov,0,,,2,47,43,jit: introduce o1k_vn (issue_ref)
dotnet/runtime,0473604548af392de993dc772a3938ae50436231,[browser] samplepoint instrumentation into Mono profiler (#112352),2025-02-25 13:47:29+00:00,Pavel Savara,1,d34ef7e2d3f41f85d35d23ec484f7af566fd0d2f,"[Mono]: Additional support for signal async safe stack-walks. (#113645)

* [Mono]: Fix additional stack-walks to be async safe.

Mono's stack-walker can be signal/async safe when needed,
making sure it won't allocate additional memory or taking internal
runtime locks. It is however up to the caller of the stack walking API's
to decide if it should be signal and/or async safe. Currently this is
controlled using two different flags, the MONO_UNWIND_SIGNAL_SAFE as well
as mono_thread_info_is_async_context.

This is problematic since callers wants signal safe stack-walking but
since not both are set, it will not behave fully signal safe.

https://github.com/dotnet/android/issues/9365 hit a couple of scenarios
described here:

https://github.com/dotnet/android/issues/9365#issuecomment-2725069793

that ends up deadlocking due to the fact that they did stack-walking
from within a signal handler and deadlocked or dumping stack on suspended
thread holding runtime loader lock, but without making the stack-walk async safe.

Fix makes sure that calls to stack-walk API's can be made signal and/or
async safe and that identified areas uses the correct set of flags given
state of threads when stack-walking.

* Add signal async safe stack unwind option.

* Assert that walk_stack_full_llvm_only is only called in llvm only mode.

* Correct some bool usage.

* Make signal safe unwind option, signal async safe.

Mono's current MONO_UNWIND_SIGNAL_SAFE was not fully signal safe since
it was not async safe, that could lead to taking loader lock. This
will fix MONO_UNWIND_SIGNAL_SAFE to be signal asycn safe, it will also
change current use of MONO_UNWIND_SIGNAL_SAFE to MONO_UNWIND_NONE since
they where equal before this fix, meaning old calls using
MONO_UNWIND_SIGNAL_SAFE will behave identical using MONO_UNWIND_NONE
so no regression.",30,724,149,[browser] samplepoint instrumentation into mono profiler (issue_ref)
dotnet/runtime,1d4ccdd86b23f9aa567208163d38cc3a916af71a,Fix doc typo (#112875),2025-02-25 14:52:38+00:00,Steve Harter,1,b7cc717e86ca563af7915e0cb4116a95b7557154,Fix empty LdapException.ServerErrorMessage (#115192),1,1,1,fix doc typo (issue_ref)
dotnet/runtime,16bc09756fa585340cc65488ab853beb0a18477b,Remove useless assertions (#110171),2025-02-25 17:46:00+00:00,Egor Bogatov,0,,,2,42,8,remove useless assertions (issue_ref)
dotnet/runtime,c4f89bd8b0f0d853b16695a15627d53ea1de79bc,"Make CPU utilization checks in the thread pool configurable (#112789)

- On Windows, checking CPU utilization seems to involve a small amount of overhead, which can become noticeable or even significant in some scenarios. This change makes the intervals of time over which CPU utilization is computed configurable. Increasing the interval increases the period at which CPU utilization is updated. The same config var can also be used to disable CPU utilization checks and have features that use it behave as though CPU utilization is low.
- CPU utilization is used by the starvation heuristic and hill climbing. When CPU utilization is very high, the starvation heuristic reduces the rate of thread injection in starved cases. When CPU utilization is high, hill climbing avoids settling on higher thread count control values.
- CPU utilization is currently updated when the gate thread performs periodic activities, which happens typically every 500 ms when a worker thread is active. There is one gate thread per .NET process.
- In scenarios where there are many .NET processes running, and where many of them frequently but lightly use the thread pool, overall CPU usage may be relatively low, but the overhead from CPU utilization checks can bubble up to a noticeable portion of overall CPU usage. In a scenario involving 100s of .NET processes, it was seen that CPU utilization checks amount to 0.5-1% of overall CPU usage on the machine, which was considered significant.",2025-02-25 18:18:33+00:00,Koundinya Veluri,0,,,1,28,3,"make cpu utilization checks in the thread pool configurable (issue_ref)- on windows, checking cpu utilization seems to involve a small amount of overhead, which can become noticeable or even significant in some scenarios. this change makes the intervals of time over which cpu utilization is computed configurable. increasing the interval increases the period at which cpu utilization is updated. the same config var can also be used to disable cpu utilization checks and have features that use it behave as though cpu utilization is low.- cpu utilization is used by the starvation heuristic and hill climbing. when cpu utilization is very high, the starvation heuristic reduces the rate of thread injection in starved cases. when cpu utilization is high, hill climbing avoids settling on higher thread count control values.- cpu utilization is currently updated when the gate thread performs periodic activities, which happens typically every 500 ms when a worker thread is active. there is one gate thread per .net process.- in scenarios where there are many .net processes running, and where many of them frequently but lightly use the thread pool, overall cpu usage may be relatively low, but the overhead from cpu utilization checks can bubble up to a noticeable portion of overall cpu usage. in a scenario involving 100s of .net processes, it was seen that cpu utilization checks amount to 0.5-1% of overall cpu usage on the machine, which was considered significant."
dotnet/runtime,aca5f6bdd995919411448379aea3651eb1f68133,"Update dependencies from https://github.com/dotnet/emsdk build 20250224.1 (#112895)

Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport , Microsoft.SourceBuild.Intermediate.emsdk
 From Version 10.0.0-preview.3.25119.2 -> To Version 10.0.0-preview.3.25124.1

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-02-25 18:43:06+00:00,dotnet-maestro[bot],0,,,2,5,5,"update dependencies from build 20250224.1 (issue_ref)microsoft.net.workload.emscripten.current.manifest-10.0.100.transport , microsoft.sourcebuild.intermediate.emsdk from version 10.0.0-preview.3.25119.2 -> to version 10.0.0-preview.3.25124.1"
dotnet/runtime,c7a2924dbcb33a857771d9f2d7fdf45c344374f9,"[PERF] Disable PerfBDN tests. (#112886)

Disable PerfBDN tests.",2025-02-25 19:20:09+00:00,Parker Bibus,0,,,2,54,51,[perf] disable perfbdn tests. (issue_ref)disable perfbdn tests.
dotnet/runtime,e2eb8c4145719f1315f0614f908d2a8873950449,"Instructions for adding a native external library dependency (#105045)

* Instructions for adding a native external library dependency.

* Apply suggestions from code review

Co-authored-by: Jeremy Koritzinsky <jkoritzinsky@gmail.com>

* Address suggestions

* Link to vendored libraries doc

* Update src/native/external/README.md

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

---------

Co-authored-by: Jeremy Koritzinsky <jkoritzinsky@gmail.com>
Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-02-25 21:00:21+00:00,Carlos Sánchez López,0,,,1,79,0,instructions for adding a native external library dependency (issue_ref)* instructions for adding a native external library dependency.* apply suggestions from code review
dotnet/runtime,80b0e1765a95f0aec81f11fcb13d8e13ab2ab40f,"Revert gen-buildsys.sh cmake command echo (#112929)

Suspect it broke the wasi official build somehow.",2025-02-25 22:57:31+00:00,Steve Pfister,0,,,1,10,4,revert gen-buildsys.sh cmake command echo (issue_ref)suspect it broke the wasi official build somehow.
dotnet/runtime,5e4834ea20ae6852c3d9b04e33c35c5f2363a215,"Consolidate guid definitions (#112826)

* Consolidate guid definitions

* Replace minipal_guid_t with GUID",2025-02-26 05:03:17+00:00,Adeel Mujahid,0,,,31,140,217,consolidate guid definitions (issue_ref)* consolidate guid definitions* replace minipal_guid_t with guid
dotnet/runtime,94f06fab56327726e6c23b2f018d788a6a34e621,"SPMI: Add fallback for `notifyInstructionSetUsage` (#112925)

I noticed that `notifyInstructionSetUsage` misses are pretty common,
particularly because we query for instruction sets for some very basic
instructions (e.g. `GT_RSZ/`GT_RSH`). So changes that introduce new
kinds of nodes now seem to be much more likely to miss.

The best solution would probably be to add another set of ISAs that is
passed to the JIT so that `notifyInstructionSetUsage` can be purely a
""result"" type of JIT-EE call, but this change at least gets us back to
what we had before with an improvement to when we actually know the
answer.",2025-02-26 06:21:07+00:00,Jakob Botsch Nielsen,0,,,1,15,3,"spmi: add fallback for (issue_ref)i noticed that misses are pretty common,particularly because we query for instruction sets for some very basicinstructions (e.g. gt_rshnotifyinstructionsetusage` can be purely a""result"" type of jit-ee call, but this change at least gets us back towhat we had before with an improvement to when we actually know theanswer."
dotnet/runtime,d939793d993ad2bede8eb9a3e8f9a0ca41592af4,"Hotfix interpreter crash (#112920)

The fake unwind info generation in the interpreter was broken and caused
write after an end of the allocated space.

I am working on a change to add a interpreter specific code manager that
gets rid of the need for fake unwind info creation, but to prevent CI
failures for now, I have created this intermediate hotfix.",2025-02-26 09:24:59+00:00,Jan Vorlicek,1,9fc26e0d97205141806274c248cf4a55f830e468,"Expand capability of CoreCLR Interpreter (#113292)

* Add util code for working with IL opcodes

The opcode name, its argument type and a method for decoding the opcode enum value from IL byte stream.

* Implement move opcodes

These will be used for arg/local loads/stores and various other move operations.

* Implement conv opcodes

With some floating point exceptions that require special handling

* Traverse IL and build the initial set of basic blocks

This is done as an initial iteration over the IL code, with the main objective of creating the initial set of basic blocks and mapping from il offset to basic block. In future changes, when we compile the code, these basic blocks will be linked together, according to the control flow resulting from IL instructions.

* Add simple array data structure

The interpreter will require additional data structures in the future: linked list, hashtable, bitset.

* Finish basic block support and implement branches

From the initial set of basic blocks we will start generating code for the current method. Each basic block has a stack state, representing the state of the IL stack at the moment when we enter. Codegen starts from a dummy entry bblock which has an empty stack state. As we iterate over instructions, we check if a new bblock starts at this offset (this is determined based on the m_ppOffsetToBB mapping created in a previous commit). If we are starting generating code inside a new bblock, various things need to be done. We need to check if the basic block is a fall through from the previous bblock (in which case we initialize the stack state of this new bblock). Also if the bblock is not fall through, we can only generate code into it if the stack state is initialized. Otherwise, we will skip through its instructions and, once the traverse the entire IL, we will do a reiteration generating code only in the bblocks that haven't yet been emitted.

When emitting the final code, one basic block at a time, we update the real native offset of each basic block. When we need to emit a branch, in case we know the offset of the target bblock, we emit it directly in the code. Otherwise we add a relocation record in an array. Once we finish generating code for all basic blocks, we traverse the relocation array and patch all recorded instruction slots with the now known branch offset.

* Add support for ldarg + ldloc

Add a new InterpTypeByRef, to be used to precisely track vars that might contain interior pointers and need to be reported to the GC. We didn't have this type on mono.

* Add binary and unary operators

* branch floating point comparisons

squash into branches

* Add support for direct calls

Unlike other instructions, INTOP_CALL doesn't have a fixed number of sVars, since the method to be called can have any signature. Instead it will hold a -1 terminated array of sVars. The arguments will be placed one after the other, at an offset referred to as callArgsOffset, representing the only source offset for the call instruction. Vars that are sources for a call will be allocated in this sequential position by the var offset allocator, which is not yet included as part of this commit.

INTOP_CALL instruction receives an additional fixed argument, which is a tagged `MethodDesc*`. Rather than embedding the pointer into the instruction stream, this is passed as an index into a table. This will both reduce code memory use, since identical data will be stored at the same index, as well as provide us with an unique slot to atomically patch the data. During first execution of a call, we would observe that the data item is a tagged pointer, suggesting this is a MethodDesc*, in which case we try to obtain the actual method code, triggering method compilation if necessary. Once this is done, the MethodDesc pointer will be replaced with the actual code pointer. In the future, this pointer can be either interpreter IR or jit compiled code.

Given we currently only have support to specify a single method to be interpreted, in order to expand on this, this commit introduces a temporary hack behavior where once we enter the interpreter, we don't exit it for methods from the same module. In the future we might want to switch this to passing an env var specifying which assembly to be interpreted and which to be jitted.

* Add the offset allocator for vars

The var offset allocator allocates for each var a positive offset. All instructions will end up referencing this offset instead of the var index. During execution, these offsets are added to the frame's stack pointer to obtain the actual location on the interpreter stack for the value.

We have three logical areas on the interpreter stack where vars reside. The global vars space, the local vars space followed at last by the param area space. In the global vars space, each global var will have an offset allocated to it, that its constant throughout method execution. This space is first filled by the argument vars (which must be at the beginning of the stack, according to the interpreter ccall convention). Then we allocate each IL local in this space. Once we finish generating code for the method, we enter the actual var offset allocator.

First we detect which vars are used in multiple basic blocks, these vars will be marked as global and have an unique offset allocated. The space following the global vars will be used for allocating vars used in a single basic block. We will traverse each bblock and, as a local var is defined, we will allocate it at the current offset. We have liveStart and liveEnd computed for each local var (measured as instruction indexes in the corresponding basic block). Based on these liveness markers, we determine when to pop vars from the set of active vars (vars that are currently live).

Variables that are arguments to a call will be allocated instead in the param area. Given we don't know the exact offset of the param area during bblock iteration (because it follows the local vars space, which is determined only after traversing all bblocks), these vars will be initially allocated with an offset relative within the param area. At the very end, we will offset these with the param area offset. Vars passed to calls have to die immediately following the call. If the call arg var can't satisify this constraint (for example the var is global, or a local var that could be referenced following the call), we will create a new temporary var that we copy the arg into, and this new var will serve as the call arg instead.

* Add verbose compilation logging

This will have to be enabled via an env var, rather than statically in code.

* Add a temporary intrinsic for Environment.FailFast

Because we currently don't have support for interoping between interpreter and jit, in order to signal test failure in interpreter test we will just crash instead.

* Add a few sanity tests to ensure new interp functionality mostly works

Minor fixes to ensure tests work. Add support for returns of any type. Add opcode for loading full I4.

* Address PR feedback

* Add gc state transition",1,3,2,"hotfix interpreter crash (issue_ref)the fake unwind info generation in the interpreter was broken and causedwrite after an end of the allocated space.i am working on a change to add a interpreter specific code manager thatgets rid of the need for fake unwind info creation, but to prevent cifailures for now, i have created this intermediate hotfix."
dotnet/runtime,f1756e63bfce2a09f1eb45bc5e3c9056f7a86b98,Pass SourceBuiltPdbArtifactsDir parameteres to runtime build (#112788),2025-02-26 10:33:10+00:00,Matt Mitchell,1,891ff91ca2f12c69e619d1035ace6c41a9ff5329,"Publish dotnet/runtime using standard Arcade Publish tooling (#111934)

* Remove prepare-signed-artifacts and publish from each leg directly.

* Publish in a separate stage to make dependency tracking easy

* Set _SignType so we can pass -sign

* Remove old validation target

* !drop remove -sign so we can figure out publishing first

* Remove InitialTargets

* Only generate product version files once. Fix asset manifest extension. Don't copy workloads packages as they're already in the right format now.

* Completely restructure how we publish to be more explicit that specific jobs publish specific packages

* Move ""non-RID-specific"" special packages logic into Publishing.props

* Make sure we build the list of skipped packages after we add the RID-specific packages

* Arcade now handles TargetOS/TargetArchitecture for asset manifest names. Use that when possible for unique names and produce our own names when necessary.

* Extract handling hostOS and hostArch into another props file

* Fix import and adjust condition for SB

* Fix asset manifest name uniqueness to ensue we don't overwrite asset manifests.

* Set AssetManifestFilePath again

* Fix PublishAllPackages condition and make sure to publish the VS redist packages

* Explicitly look up packages as we add zips and other blob artifacts to the Artifacts items in Signing.props

* Search in the right folder.

* Look up zips in VSSetup for workloads

* Add missing semicolon

* Include VSSetup artifacts separately

* Re-enable signing (depends on Microbuild signing on Linux/Mac)

* PR feedback

* Specify Apple file signing info on macOS and simplify the macOS jobs in the official build.

* In a VMR-style build, produce the product version file in either the win-x64 leg (for UB) or in all legs (for SB)

* Change where we set PublishAllPackages to make things automatically work when this change flows to the VMR.

* Update eng/Publishing.props

Co-authored-by: Viktor Hofer <viktor.hofer@microsoft.com>

* Change the control property to be EnableDefaultArtifacts and Include instead of Update for these scenarios.

* Avoid global-property confusion within the VMR scenarios

* Collapse more jobs together in the YAML

* Remove unused items

* Move logic into Signing.props.

This solves problems around specifying EnableDefaultArtifacts=false in some VMR legs

* Only publish the LLVM runtime packs from LLVM legs

* Add the package artifacts to the right item group

* Fix package name format

* Fix handling host-targeting assets as NETCoreSdkRuntimeIdentifier is not available.

* Item updates for default artifacts must happen in Publishing.props

* Use Arcade's RID-specific publish feature in dotnet/runtime

* Fix dependencies

* Update host asset publishing

* Set TargetRid

* Adjust for Azure Linux package names and use artifact kinds

* Restore a final join job for signing so we can merge this in and stop having to update the patch.

* Remove unused parameter

* The build stage shouldn't be a list

* Add variable for artifact name

* Try another variant

* Try to simplify

* Another try

* Add the target path

* Define the artifact name like how we define the build job names for simplicity

* Make some items a list

* Rewrite how we insert the ""other"" stages

* Remove duplicate pool

* Fix stage name

* Fix conditions

* Fix expected pipeline artifact names

* Always put a templateContext into global-build-job even if one isn't provided

* Fix typo and adjust publishing to handle PDBs

* Set blob artifact kind

* Fix item name for AzureLinux RPM signing

* Put the VSSetup blobs in the VSSetup folder and adjust the relative blob paths to make that work

* Fix crossdac and workloads downloads

* inputs happen before clone. Don't download into the sources directory

* Fix paths

* Skip extracting packages that don't match so we can see the whole list.

* Add arm32 downloads for crossdac

* Publish crossos dac packages

* Don't use RID-specific artifacts for the cross-dac build

* Fix source-build and deps

* Fix join-job signing

* Add back split macos job to the official build. These files need to be signed coming out of runtime and otherwise we'd miss signing them

* Remove duplicate jobs

* Adjust commands for macos split job

* Use the right property for the signing items base directory

* Update Signing.props

Co-authored-by: Viktor Hofer <viktor.hofer@microsoft.com>

* Remove duplicate signing inputs

---------

Co-authored-by: Viktor Hofer <viktor.hofer@microsoft.com>",1,1,0,pass sourcebuiltpdbartifactsdir parameteres to runtime build (issue_ref)
dotnet/runtime,58209bb20f8fb896cbf658c978e34caed524d24c,JIT: Delete old parameter ABI classification (#112884),2025-02-26 13:36:27+00:00,Jakob Botsch Nielsen,1,11408abe8f6049a38f8af91676863c07df294d28,"[wasm] build paltests (#112404)

* Make configure pass for wasm and paltests component

Disable few parts, some might need closer look later.

* Fix compilation and linking on wasm

* Ignore limits and dlopen(nullptr, ...) on wasm

* Do not return 0 for minipal_get_current_thread_id on wasm

* Add simple index.html to run paltests on wasm in browser

* Forward console log and error to http server

* Enable debug output temporarily

* Do not create synchronization manager worker thread on wasm

And also skip creating pipe to communicate with it

* Temporarily override main args on wasm to simplify testing

* Prototype pal test suite runner

* Reload between tests to work around stack exhaustion

* Shorter delay between tests; logging of exit code specifies which test it was so you can pull the test statuses out of a log file

* Add mechanism for disabling tests and disable the debug_api tests

* Disable another set of tests

* Disable more tests and reduce run delay

* Full test run completes now

* Use exit runtime option

To avoid error messages at the end of each run

* Add summary with counts of passed, failed and disabled tests

* Trap on assert to stop

* Filter the tests, use paltestlist.txt as runpaltests.sh

Also write missing tests

* Don't output when capturing tests

Also fix disabled tests count

* Add notes to failing tests

* Make flush instruction cache no-op on wasm, disable few MT tests

* Reenable debug_api test, which is not failing

Add few more notes to failing memory related tests

* Do not call mmap to re-set memory protection

Emscripten's mmap doesn't support that and because we don't have virtual memory
in wasm, it doesn't make sense to call it there

* Disable 3 exception_handling/RaiseException tests

Also re-enable debug test, which works and disable few MT tests

* Disable paltest_probememory_probememory_neg1

* Disable dll tests on wasm

* Fix cmake warnings

* Install the additional files for wasm

* Use onExit instead of quit

This fixes issue with newer emscripten, where Module['quit'] handling is removed.
Also fix single test runs.

* Add mono.emsdk subset

* Remove forgotten check

* Update msbuild targets to allow build of wasm paltests

* Add CI build and temporarily disable all other runtime builds to save resources

* Fix remaining conflict

* Fix build afer merge with main

* Make membarrier noop on wasm

* Change subsets build order

* Disable fs test which fails with chromedriver

* Fix InternalCanonicalizeRealPath corner case that affects wasm pal tests

* Zero memory for MEM_DECOMMIT on WASM instead of just doing nothing, to at least get slightly closer to intended behavior

* Removed notes about the failing tests

* Fix few new cmake warnings

* Put runtime runs back

* Remove unwanted changes

* List disabled and failed tests when the run completed

* Fix mono wasm/MT build

* Remove unwanted fields

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Fix mono wasm/MT build once more

* Fix windows build

* Fix windows build

* Feedback

* More feedback

* More feedback

* More feedback

* Feedback

* Fix cmake warning

* Update src/coreclr/pal/src/CMakeLists.txt

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Update src/coreclr/pal/src/CMakeLists.txt

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Update src/coreclr/pal/src/CMakeLists.txt

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Update src/coreclr/pal/src/CMakeLists.txt

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Feedback

---------

Co-authored-by: Katelyn Gadd <kg@luminance.org>
Co-authored-by: Larry Ewing <lewing@microsoft.com>
Co-authored-by: Jan Kotas <jkotas@microsoft.com>",17,270,2037,jit: delete old parameter abi classification (issue_ref)
dotnet/runtime,0580a0c982bdec8b950f9cd24d9f3bd0c53b0953,Only count DwarfDump warnings produced by managed code (#112813),2025-02-26 14:48:15+00:00,Filip Navara,0,,,1,22,8,only count dwarfdump warnings produced by managed code (issue_ref)
dotnet/runtime,d8a7c7b40fdd7601183f9a62bc40384f89565f03,"[workloads] Bump net10 downlevel versions to n-1 (#112805)

* Bump net10 downlevel versions to n-1

* Bump targetframework on wasi librarymode test

* Update PackageVersionNet8 to use PackageVersionNet9",2025-02-26 15:45:13+00:00,Larry Ewing,1,3d9e01490d40808be8f7a3e6317bf3f288443dff,"[main] Update dependencies from dotnet/arcade (#112730)

* Update dependencies from https://github.com/dotnet/arcade build 20250219.2

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.25113.2 -> To Version 10.0.0-beta.25119.2

* Address some of the NU1510 and NU1511 warnings

* Address more NU1511 warnings

* Fix build break

* workload sdk to >= darc sdk

* Temporarily remove WasmFingerprintDotnetJs=true test data from blazor test

* Update dependencies from https://github.com/dotnet/arcade build 20250220.6

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.25113.2 -> To Version 10.0.0-beta.25120.6

* Update dependencies from https://github.com/dotnet/arcade build 20250224.2

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.25113.2 -> To Version 10.0.0-beta.25124.2

* Bump MicrosoftDotNetApiCompatTaskVersion

* Update dependencies from https://github.com/dotnet/arcade build 20250225.2

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.25113.2 -> To Version 10.0.0-beta.25125.2

* Bump MicrosoftDotNetApiCompatTaskVersion

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Viktor Hofer <viktor.hofer@microsoft.com>
Co-authored-by: Larry Ewing <lewing@microsoft.com>
Co-authored-by: Marek Fišera <mara@neptuo.com>
Co-authored-by: Alexander Köplinger <alex.koeplinger@outlook.com>",2,4,4,[workloads] bump net10 downlevel versions to n-1 (issue_ref)* bump net10 downlevel versions to n-1* bump targetframework on wasi librarymode test* update packageversionnet8 to use packageversionnet9
dotnet/runtime,39c94e0333ce367d5491e99705dc8014c30004e0,"add follow-up assert during unwinding (#112817)

* add follow-up assert during unwinding

* review feedback

* add a comment",2025-02-26 17:51:32+00:00,Kunal Pathak,0,,,1,16,1,add follow-up assert during unwinding (issue_ref)* add follow-up assert during unwinding* review feedback* add a comment
dotnet/runtime,3d9e01490d40808be8f7a3e6317bf3f288443dff,"[main] Update dependencies from dotnet/arcade (#112730)

* Update dependencies from https://github.com/dotnet/arcade build 20250219.2

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.25113.2 -> To Version 10.0.0-beta.25119.2

* Address some of the NU1510 and NU1511 warnings

* Address more NU1511 warnings

* Fix build break

* workload sdk to >= darc sdk

* Temporarily remove WasmFingerprintDotnetJs=true test data from blazor test

* Update dependencies from https://github.com/dotnet/arcade build 20250220.6

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.25113.2 -> To Version 10.0.0-beta.25120.6

* Update dependencies from https://github.com/dotnet/arcade build 20250224.2

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.25113.2 -> To Version 10.0.0-beta.25124.2

* Bump MicrosoftDotNetApiCompatTaskVersion

* Update dependencies from https://github.com/dotnet/arcade build 20250225.2

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.25113.2 -> To Version 10.0.0-beta.25125.2

* Bump MicrosoftDotNetApiCompatTaskVersion

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Viktor Hofer <viktor.hofer@microsoft.com>
Co-authored-by: Larry Ewing <lewing@microsoft.com>
Co-authored-by: Marek Fišera <mara@neptuo.com>
Co-authored-by: Alexander Köplinger <alex.koeplinger@outlook.com>",2025-02-26 18:53:39+00:00,dotnet-maestro[bot],1,de8005b4712b8089f928d40794f9d66227715178,"Port RE2 regex tests to improve test coverage (#120845)

This PR ports functional regex tests from the <a
href=""https://github.com/google/re2/tree/main/re2/testing"">RE2 test
suite</a> to improve .NET's regex test coverage, as requested in
#120756.

## Changes

### Test Suite Additions
- **Added `RegexRe2Tests.cs`**: New test file containing 85 unique test
cases ported from RE2's `re2_test.cc` and `search_test.cc`
- **Test coverage**: The ported tests execute ~340 times across all
available regex engines (Interpreter, Compiled, NonBacktracking,
SourceGenerated)
- **Removed duplicates**: Analyzed overlap with existing PCRE, Rust, and
core regex tests; removed 57 duplicative test cases to avoid redundancy

### Test Categories Covered
The ported tests validate:
- Complex matching patterns and alternations
- Anchors (`^`, `$`) in single-line and multiline modes with non-trivial
cases
- Word boundaries (`\b`, `\B`) with ASCII and special characters
- UTF-8/Unicode character handling
- Escape sequences (octal `\141`, hexadecimal `\x61`, unicode `\u0061`)
- Case-insensitive matching (`(?i)`)
- Non-trivial quantifier combinations (`{n}`, `{n,}`, `{n,m}`)
- Backreferences (excluded for NonBacktracking engine)
- Edge cases and historical bug patterns from RE2

### Compatibility Adjustments
Several RE2-specific patterns were excluded or adapted for .NET
compatibility:
- **Removed `\C` patterns**: RE2's byte-matching construct is not
supported in .NET
- **Removed `\Q...\E` patterns**: Quote meta syntax is not supported in
.NET
- **Converted `\x{...}` escapes**: Changed to .NET-compatible `\x` (2
digits) or `\u` (4 digits) format
- **Excluded backreferences for NonBacktracking**: Uses
`RegexHelpers.IsNonBacktracking()` check
- **Removed Unicode word boundary test**: .NET treats Unicode letters as
word characters (unlike RE2/PCRE which use ASCII-only)
- **Removed duplicative tests**: Excluded basic patterns like ""a"", ""a*"",
""a+"", ""a?"", ""^$"" that are already well-covered in existing test files

### License Attribution
- **Updated `THIRD-PARTY-NOTICES.TXT`**: Added RE2 BSD 3-Clause license
to properly attribute the ported tests
- **Updated `.csproj`**: Added `RegexRe2Tests.cs` to the compilation

## Testing
All 29,621 tests pass successfully, including the newly ported RE2 tests
across all regex engines.

Fixes #120756

<!-- START COPILOT CODING AGENT SUFFIX -->



<details>

<summary>Original prompt</summary>

> 
> ----
> 
> *This section details on the original issue you should resolve*
> 
> <issue_title>Port re2 regex tests</issue_title>
> <issue_description>re2 has lots of regex functional tests we should
port over to improve our coverage:
>
https://github.com/google/re2/blob/d826d9fcb68c62996c1b7c0a45d604e22d814952/re2/testing/</issue_description>
> 
> <agent_instructions>You can see in
https://github.com/dotnet/runtime/tree/main/src/libraries/System.Text.RegularExpressions/tests/FunctionalTests
we have a file of tests ported from PCRE and a file of tests ported from
Rust. Please similarly port the cited RE2 tests (or a newer version if
there is one); any that don't pass but should need to be marked as
[ActiveIssue(...)]... any that don't pass but that's expected should be
removed.</agent_instructions>
> 
> ## Comments on the Issue (you are @copilot in this section)
> 
> <comments>
> <comment_new><author>@</author><body>
> Tagging subscribers to this area: @eerhardt,
@dotnet/area-system-text-regularexpressions
> See info in
[area-owners.md](https://github.com/dotnet/runtime/blob/main/docs/area-owners.md)
if you want to be subscribed.
> <details>
> <summary>Issue Details</summary>
> <hr />
> 
> re2 has lots of regex functional tests we should port over to improve
our coverage:
>
https://github.com/google/re2/blob/d826d9fcb68c62996c1b7c0a45d604e22d814952/re2/testing/
> 
> <table>
>   <tr>
>     <th align=""left"">Author:</th>
>     <td>stephentoub</td>
>   </tr>
>   <tr>
>     <th align=""left"">Assignees:</th>
>     <td>-</td>
>   </tr>
>   <tr>
>     <th align=""left"">Labels:</th>
>     <td>
> 
> `area-System.Text.RegularExpressions`
> 
> </td>
>   </tr>
>   <tr>
>     <th align=""left"">Milestone:</th>
>     <td>.NET 7.0</td>
>   </tr>
> </table>
> </details></body></comment_new>
> <comment_new><author>@joperezr</author><body>
> This will likely miss ZBB but will still make it before 7.0. Adjusting
the milestone just because this is not technically a blocker for
7.0.</body></comment_new>
> </comments>
> 


</details>

Fixes dotnet/runtime#61896

<!-- START COPILOT CODING AGENT TIPS -->
---

💡 You can make Copilot smarter by setting up custom instructions,
customizing its development environment and configuring Model Context
Protocol (MCP) servers. Learn more [Copilot coding agent
tips](https://gh.io/copilot-coding-agent-tips) in the docs.

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>",40,224,211,"[main] update dependencies from dotnet/arcade (issue_ref)* update dependencies from build 20250219.2microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.versiontools.tasks , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.25113.2 -> to version 10.0.0-beta.25119.2* address some of the nu1510 and nu1511 warnings* address more nu1511 warnings* fix build break* workload sdk to >= darc sdk* temporarily remove wasmfingerprintdotnetjs=true test data from blazor test* update dependencies from build 20250220.6microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.versiontools.tasks , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.25113.2 -> to version 10.0.0-beta.25120.6* update dependencies from build 20250224.2microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.versiontools.tasks , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.25113.2 -> to version 10.0.0-beta.25124.2* bump microsoftdotnetapicompattaskversion* update dependencies from build 20250225.2microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.versiontools.tasks , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.25113.2 -> to version 10.0.0-beta.25125.2* bump microsoftdotnetapicompattaskversion---------"
dotnet/runtime,6b8fb08de97908fba148f648b9fe0ba6ed16944f,"Update dependencies from https://github.com/dotnet/emsdk build 20250225.1 (#112935)

Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport , Microsoft.SourceBuild.Intermediate.emsdk
 From Version 10.0.0-preview.3.25124.1 -> To Version 10.0.0-preview.3.25125.1

Dependency coherency updates

runtime.linux-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.linux-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.osx-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.osx-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.win-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.win-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport
 From Version 10.0.0-alpha.1.25116.1 -> To Version 10.0.0-alpha.1.25123.1 (parent: Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-02-26 19:11:48+00:00,dotnet-maestro[bot],0,,,2,22,22,"update dependencies from build 20250225.1 (issue_ref)microsoft.net.workload.emscripten.current.manifest-10.0.100.transport , microsoft.sourcebuild.intermediate.emsdk from version 10.0.0-preview.3.25124.1 -> to version 10.0.0-preview.3.25125.1dependency coherency updatesruntime.linux-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.linux-musl-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.linux-x64.microsoft.netcore.runtime.wasm.node.transport,runtime.linux-musl-x64.microsoft.netcore.runtime.wasm.node.transport,runtime.osx-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.osx-x64.microsoft.netcore.runtime.wasm.node.transport,runtime.win-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.win-x64.microsoft.netcore.runtime.wasm.node.transport from version 10.0.0-alpha.1.25116.1 -> to version 10.0.0-alpha.1.25123.1 (parent: microsoft.net.workload.emscripten.current.manifest-10.0.100.transport"
dotnet/runtime,212d7dea3c8e5bd1583259ce61d954262e90a34e,"[Android] Use lowered runtime flavor in Android sample app MakeFile #112940

Use lowered runtime flavor in Android sample app MakeFile and abort for unrecognized RUNTIME_FLAVOR.

The previous behavior only accepted ""Mono"" as a RUNTIME_FLAVOR for building the runtimepack. This could cause unwanted behavior where passing RUNTIME_FLAVOR=mono would lead to building CoreCLR packs instead.",2025-02-26 19:15:49+00:00,Matous Kozak,0,,,1,8,3,"[android] use lowered runtime flavor in android sample app makefile issue_refuse lowered runtime flavor in android sample app makefile and abort for unrecognized runtime_flavor.the previous behavior only accepted ""mono"" as a runtime_flavor for building the runtimepack. this could cause unwanted behavior where passing runtime_flavor=mono would lead to building coreclr packs instead."
dotnet/runtime,f99e58b8e033c7d6657c401cbb9f9e0ae18261a8,"Reapply ""Use rangecheck in assertprop (#112766)"" (#112872) (#112907)",2025-02-26 20:13:18+00:00,Egor Bogatov,0,,,3,129,38,"reapply ""use rangecheck in assertprop (issue_ref)"" (issue_ref) (issue_ref)"
dotnet/runtime,38f7ca12a37acab44f02a192fdc26f896c534756,Add DefaultInterpolatedStringHandler.Text/Clear (#112171),2025-02-26 20:17:29+00:00,Stephen Toub,0,,,3,40,8,add defaultinterpolatedstringhandler.text/clear (issue_ref)
dotnet/runtime,f5c73447ca9dcb3407d0143829bbf708c04170c1,"Move local thread pool work items to global by default when blocking on a task (#112796)

* Move local thread pool work items to global by default when blocking on a task

- Enables the change in https://github.com/dotnet/runtime/pull/109841 by default
- A worker thread blocking on a task while having pending local work items can lead to priority inversion and deadlock-like issues, as local work items are stolen with the lowest priority by other threads. In a situation where all worker threads are blocked on tasks and new ones continue to block on tasks similarly, the global queues may not deplete for a long time and any local work items of blocked threads may not run meanwhile. There have been some reports of issues like this occurring while coinciding with other external issues that aggravate the problem.
- When a worker thread blocks on a task, the change moves any local work items to the high-priority global queue. Using the normal-priority queues can lead to other priority inversion issues in worst-case scenarios like above, where the normal-priority queues may consist of a number of new requests, and local work items typically represent already in-flight work.",2025-02-26 20:50:59+00:00,Koundinya Veluri,0,,,2,46,25,"move local thread pool work items to global by default when blocking on a task (issue_ref)* move local thread pool work items to global by default when blocking on a task- enables the change in by default- a worker thread blocking on a task while having pending local work items can lead to priority inversion and deadlock-like issues, as local work items are stolen with the lowest priority by other threads. in a situation where all worker threads are blocked on tasks and new ones continue to block on tasks similarly, the global queues may not deplete for a long time and any local work items of blocked threads may not run meanwhile. there have been some reports of issues like this occurring while coinciding with other external issues that aggravate the problem.- when a worker thread blocks on a task, the change moves any local work items to the high-priority global queue. using the normal-priority queues can lead to other priority inversion issues in worst-case scenarios like above, where the normal-priority queues may consist of a number of new requests, and local work items typically represent already in-flight work."
dotnet/runtime,2fef8277b701cfa6636d8ab55c14da6e001b9218,"Add MemoryExtensions.CountAny/ReplaceAny (#112951)

* Add MemoryExtensions.CountAny/ReplaceAny

* Apply suggestions from code review

Co-authored-by: Miha Zupan <mihazupan.zupan1@gmail.com>

---------

Co-authored-by: Miha Zupan <mihazupan.zupan1@gmail.com>",2025-02-26 23:05:50+00:00,Stephen Toub,0,,,5,342,0,add memoryextensions.countany/replaceany (issue_ref)* add memoryextensions.countany/replaceany* apply suggestions from code review
dotnet/runtime,e22d62a88b1b07f11f4bc405fc9e63a91c67bb39,"The test 'System.Buffers.ArrayPool.Tests.ArrayPoolUnitTests.ReturnBufferWhenFullFiresDroppedDiagnosticEvent' fails on systems with cpu cores >= 32. (#112849)

The test begins by renting from a SharedArrayPool 1 byte using the 'Rent' function for 1000 iterations and returning the bytes rented using the 'Return' function back to the SharedArrayPool. The test expects
that returning a large number of bytes(in this case 1000) overflows the SharedArrayPool hence dropping it. The test case fails in machines that have cpu cores greater than 32 because the capacity of the SharedArrayPool is dependent on the number
of processors. It happens to be 'number of processors' * 32. Clearly the size of the SharedArrayPool in case of 32 cpu cores would be 32*32=1024 which is greater than 1000 and hence doesn't overflow the
SharedArrayPool and hence failing test case. We actualy need ('number of processors' * 32 + 2) iterations because ('number of processors' * 32 + 1) bytes would be required to overflow the buffer and the ith
iteration actually caches the byte to TLA and push the (i-1)th byte to the pool. Hence ('number of processors + 32' + 1)th byte would be returned on the ('number of processors + 32' + 2)nd iterations.

Co-authored-by: Stephen Toub <stoub@microsoft.com>",2025-02-27 04:59:43+00:00,Venkad000,0,,,1,1,1,the test 'system.buffers.arraypool.tests.arraypoolunittests.returnbufferwhenfullfiresdroppeddiagnosticevent' fails on systems with cpu cores >= 32. (issue_ref)the test begins by renting from a sharedarraypool 1 byte using the 'rent' function for 1000 iterations and returning the bytes rented using the 'return' function back to the sharedarraypool. the test expectsthat returning a large number of bytes(in this case 1000) overflows the sharedarraypool hence dropping it. the test case fails in machines that have cpu cores greater than 32 because the capacity of the sharedarraypool is dependent on the numberof processors. it happens to be 'number of processors' * 32. clearly the size of the sharedarraypool in case of 32 cpu cores would be 32*32=1024 which is greater than 1000 and hence doesn't overflow thesharedarraypool and hence failing test case. we actualy need ('number of processors' * 32 + 2) iterations because ('number of processors' * 32 + 1) bytes would be required to overflow the buffer and the ithiteration actually caches the byte to tla and push the (i-1)th byte to the pool. hence ('number of processors + 32' + 1)th byte would be returned on the ('number of processors + 32' + 2)nd iterations.
dotnet/runtime,2129f3f9ff0c9a797456163e879ea7a5af72992b,"Make linux-riscv nativeaot port robust (#112736)

* Fix AOT exception handling on linux-riscv64

* Apply more suggestions

Co-authored-by: Filip Navara <filip.navara@gmail.com>

* Fix unwind information for allocation helpers

* Restore correct FP registers in StackFrameIterator::UnwindFuncletInvokeThunk

* Fix register addressing in GcInfoDecoder::GetRegisterSlot

* Fix and enable software write watch

* Fix COOP frames layout

* Fix indirections, comparison and other assembly for write barrier checks

* Fix cross-build on Risc-V host

* Disable R2R in stage2 build

* Fix uninitialized value in RhpPInvoke

* Fix register in RhpPInvokeReturn

* Initialize FP/RA pointers when creating StackFrameIterator from native context

* Fix sign on PROLOG_SAVE_REG_PAIR_INDEXED

* Fix more of the logic in write barriers. Needs further audit.

* Fix incorrect unwinding information generated for methods with frame size > PAGE_SIZE

* Fix emitting jump to bad slot helper

* Fix unwind info for universal transitions

* Fix comment

* Fix flipped RA/FP in universal transition unwinding

* WIP: Rewrite thunk code generation

* WIP: Fix RhCommonStub

* Fix layout of universal translation for unwinding

* WIP: Add memory barriers to native AOT asm helpers (https://github.com/dotnet/runtime/issues/106219)

* WIP: Add fences to RhpCheckedLockCmpXchg/RhpCheckedXchg and fix atomicity guarantees of RhpCheckedXchg

* Preserve registers in INLINE_GET_TLS_VAR

* Preserve a7 as well

* WIP: Attempt to fix masks in IsInProlog/TrailingEpilogueInstructionsCount (to be reviewed)

* WIP: Fix GC hijacking flags and possible return value trashing

* Fix return value trashing

* Actually fix the PTFF_THREAD_HIJACK_HI flag in correct file

* Apply suggestions from code review

Co-authored-by: Tomek Sowiński <tomeksowi@gmail.com>

* Update src/coreclr/nativeaot/Runtime/ThunksMapping.cpp

Co-authored-by: Filip Navara <filip.navara@gmail.com>

* Make style consistent

* Flip the sign of PROLOG_SAVE_REG_PAIR_INDEXED to match CoreCLR definition and PROLOG_SAVE_REG_PAIR_NO_FP_INDEXED

* Fix the last change to sign

* Save one mv instruction

* Relax FENCE in R2R helpers

* Apply suggestiosn from CR review

Co-authored-by: Tomek Sowiński <tomeksowi@gmail.com>

* Update managed defintion of TransitionBlock too

* Update TLSDESC comments

* Update src/coreclr/nativeaot/Runtime/riscv64/WriteBarriers.S

Co-authored-by: Tomasz Sowiński <tomeksowi@gmail.com>

* Relax semantics of a fence in R2R helper to match ARM64

* Add missing fence in RhpAssignRefRiscV64 (matches ARM code and CoreCLR/Risc-V code)

* Match barriers emitted by PalInterlockedOperationBarrier in NativeAOT and equivalent code in CoreCLR in ExchangeObject/CompareExchangeObject

---------

Co-authored-by: Filip Navara <filip.navara@gmail.com>
Co-authored-by: Tomek Sowiński <tomeksowi@gmail.com>
Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-02-27 05:17:45+00:00,Adeel Mujahid,1,b658cd25af266afbde9f83f77d13519de9f533f0,[NativeAOT/RiscV64] Fix unwinding FSx registers (#113039),20,214,156,make linux-riscv nativeaot port robust (issue_ref)* fix aot exception handling on linux-riscv64* apply more suggestions
dotnet/runtime,74929843a9f2569b1eb8bd31f5ac163394f29c45,"[browser] add and load empty ES6 module dotnet.diag.js when FeaturePerfTracing (#112787)

Co-authored-by: Marek Fišera <mara@neptuo.com>",2025-02-27 06:58:35+00:00,Pavel Savara,0,,,42,377,107,[browser] add and load empty es6 module dotnet.diag.js when featureperftracing (issue_ref)
dotnet/runtime,035d2686771a79ee8b8f1b976f6ccc6dec427611,[infra] Add runtime-extra-platforms pipeline to build analysis (#112851),2025-02-27 07:35:40+00:00,Matous Kozak,0,,,1,4,0,[infra] add runtime-extra-platforms pipeline to build analysis (issue_ref)
dotnet/runtime,205abfb8e0ece0f0613aa3174342881df46d9db0,Implement void AsnWriter.Encode,2025-02-27 11:32:35+00:00,Kevin Jones,0,,,9,70,25,implement void asnwriter.encode
dotnet/runtime,42c31905fbd4dc61bd5321a08f2448cd14bacfdc,"Allow loading side-by-side dependent DLLs in the PGO-instrumented build (#112977)

This is needed to enable loading pgort140.dll from coreclr.dll in our PGO-instrumented runtime build.",2025-02-27 12:56:01+00:00,Jeremy Koritzinsky,0,,,1,5,2,allow loading side-by-side dependent dlls in the pgo-instrumented build (issue_ref)this is needed to enable loading pgort140.dll from coreclr.dll in our pgo-instrumented runtime build.
dotnet/runtime,60bb7cbbca3511f5a57f06cb552beedbf289317c,Remove HexConverter (#112979),2025-02-27 12:56:48+00:00,kzrnm,0,,,1,0,2,remove hexconverter (issue_ref)
dotnet/runtime,478cfe2f79dd6b33d678685f87b6c37e1a460191,Add System.Net.ServerSentEvents to runtime shared framework (#112930),2025-02-27 13:26:59+00:00,Safia Abdalla,0,,,3,15,0,add system.net.serversentevents to runtime shared framework (issue_ref)
dotnet/runtime,b54529f75e266d72c6df8568719fe8fb10df12ed,"JIT: give inlinees their own EH table (#112968)

For a long time now inlinees have ""inherited"" the root method EH table. Looks like
the only reason we were doing this was to make certain pinvoke inlining checks simpler.

Rework those to handle the inline case directly. Quirk one bit of profitability logic
for now to avoid diffs.

Part of #108900.",2025-02-27 15:37:33+00:00,Andy Ayers,0,,,2,51,64,"jit: give inlinees their own eh table (issue_ref)for a long time now inlinees have ""inherited"" the root method eh table. looks likethe only reason we were doing this was to make certain pinvoke inlining checks simpler.rework those to handle the inline case directly. quirk one bit of profitability logicfor now to avoid diffs.part of issue_ref."
dotnet/runtime,2959612eb37b02d968316e3f1492989d92eb62af,"Fix `BigInteger.Rotate{Left,Right}` for backport (#112878)

* Add BigInteger.Rotate* tests

* Fix BigInteger.Rotate*

* avoid stackalloc

* Add comment",2025-02-27 15:41:10+00:00,kzrnm,1,3e38bd83aecf16bb7ae711f0120a1d6eafeaeb18," Fix the unsigned right shift operator of BigInteger (#112879)

* Add tests for the shift operator of BigInteger

* Fix the unsigned right shift operator of BigInteger

* avoid stackalloc

* external sign element",5,799,30,fix for backport (issue_ref)* add biginteger.rotate* tests* fix biginteger.rotate** avoid stackalloc* add comment
dotnet/runtime,bfc881417c984ee23c8903b2bd7aa42e75cbc800,"[cDAC] Implement core stackwalking (#111759)

* Adds IStackWalk contract
* Implements core of cDAC stackwalking mechanics
* Support for targeting amd64 and arm64 architectures
* Support Windows amd64 host",2025-02-27 16:12:40+00:00,Max Charlamb,1,1c54b1328d864f3fd30748facf14be726ad998fc,Improve error handling of unknown arch (#114046),55,2375,114,[cdac] implement core stackwalking (issue_ref)* adds istackwalk contract* implements core of cdac stackwalking mechanics* support for targeting amd64 and arm64 architectures* support windows amd64 host
dotnet/runtime,ead9efe65818300ceb11663e622ab8b0a3b2f90e,"Remove extra test of comparer (#112973)

Make the behavior of Union.Contains use the same logic as Distinct.Contains and only test if the `_comparer is null`",2025-02-27 18:42:04+00:00,Marc Brooks,0,,,1,1,1,remove extra test of comparer (issue_ref)make the behavior of union.contains use the same logic as distinct.contains and only test if the
dotnet/runtime,dfa71ee0fdff7b0d6d09fa6295397bfe6b24a0ca,"Use osx.13.arm64.open queue for osx testing (#112647)

* Use osx.13.arm64.open queue for osx testing

* Update tests.proj",2025-02-27 22:22:54+00:00,Michal Strehovský,0,,,3,7,2,use osx.13.arm64.open queue for osx testing (issue_ref)* use osx.13.arm64.open queue for osx testing* update tests.proj
dotnet/runtime,64222865fc0a2f8da1b43913bab08e1c5c17212a,Further improve ProbabilisticMap on Avx512 (#107798),2025-02-28 01:12:00+00:00,Miha Zupan,0,,,1,28,28,further improve probabilisticmap on avx512 (issue_ref)
dotnet/runtime,a1e1eaa5a166d5190f14eb52c642dc2ece8a4b44,Improve TeddyHelper.RightShift helpers for AVX512 (#107819),2025-02-28 01:13:13+00:00,Miha Zupan,0,,,2,16,23,improve teddyhelper.rightshift helpers for avx512 (issue_ref)
dotnet/runtime,e5753973313ddfddbaa2f299df75421f811b869c,"Combine cast => negate => compare on ARM64 (#112944)

For example `a == -(sbyte)b`,
```
sxtb w0, w0
neg w0, w0
cmp w1, w0
```
becomes
```
cmn w1, w0, SXTB
```

Contributes towards #68028",2025-02-28 02:16:38+00:00,snickolls-arm,1,4c6a7068e9024696cb0bb0f996b89cb0f03adb32,"Fix test failure from #113051 (#113128)

* Fix test failure from #113051

Ensures GT_NEG -> GT_CAST contained by a comparison node forces
the node being casted into a register during lowering, to avoid trying
to generate code for an incompatible memory operation.

* add curley brace

---------

Co-authored-by: Kunal Pathak <Kunal.Pathak@microsoft.com>",4,121,6,"combine cast => negate => compare on arm64 (issue_ref)for example ,becomescontributes towards issue_ref"
dotnet/runtime,e52cfdbea428e65307c40586e3e308aeed385e86,"Emit `cmp (extended register)` on ARM64 to simplify cast-then-compare expressions (#112411)

* Emit `cmp (extended register)` on ARM64 to simplify cast-then-compare expressions

Working towards #68028

* Move mutating logic into callers",2025-02-28 02:28:21+00:00,snickolls-arm,1,daa964520d912ac5b4531ac46b5b252d1d442f28,"Fix compare immediate and branch helper for 2^n (#113523)

The helper function should not generate `tbz`, as it is not sufficient
for a test for inequality.

Also adds documentation for the helper function.",5,509,71,emit on arm64 to simplify cast-then-compare expressions (issue_ref)* emit on arm64 to simplify cast-then-compare expressionsworking towards issue_ref* move mutating logic into callers
dotnet/runtime,9022f3a9b63b56234726606bc5547378b2d08f6b,"all build jobs used for performance testing are now possible to run individually (#112902)

added possibility to configure maui framework to use
perf-build-jobs splitted to multiple templates
perf-arm64-builds moved to a different yml and yml files reorganized

Co-authored-by: Jakub Dražka <kubadrazka@microsoft.com>",2025-02-28 09:34:53+00:00,KubaD,0,,,6,300,247,all build jobs used for performance testing are now possible to run individually (issue_ref)added possibility to configure maui framework to useperf-build-jobs splitted to multiple templatesperf-arm64-builds moved to a different yml and yml files reorganized
dotnet/runtime,577c36cee56480dec4d4610b35605b5d5836888b,"Remove unnecessary _DARWIN_C_SOURCE definition in CMake files, we define it globally (#112141)

We define this globally:
https://github.com/dotnet/runtime/blob/d44116e0dc18ffd94b910bd03cdcf2c8219a59bd/eng/native/configurecompiler.cmake#L301-L304",2025-02-28 11:24:57+00:00,Filip Navara,0,,,4,0,20,"remove unnecessary _darwin_c_source definition in cmake files, we define it globally (issue_ref)we define this globally:#l301-l304"
dotnet/runtime,f9da6cd71734311b5057af498da6b3db59666a8e,"Remove ValidationContext.MemberType (#112996)

This property is unused, and is only ever set. It has an UnconditionalSuppressMessage suppression, which makes it hard to tell if there is a trimming issue here or not.

Since this code isn't used, it is better to just remove it to make the trim analysis of this class easier.",2025-02-28 15:20:12+00:00,Eric Erhardt,0,,,2,0,22,"remove validationcontext.membertype (issue_ref)this property is unused, and is only ever set. it has an unconditionalsuppressmessage suppression, which makes it hard to tell if there is a trimming issue here or not.since this code isn't used, it is better to just remove it to make the trim analysis of this class easier."
dotnet/runtime,949ad0fc5997fc4a118b9b71381b023c1e372e8d,"Zero-diff part of ""Use SSA-based ComputeRange"" (#112853)",2025-02-28 18:00:47+00:00,Egor Bogatov,1,1b1e94d2b6cf896d6407e5512f046c62fa9fedc3,JIT: Fix icon and vn mismatch in an assertion (#113072),4,252,264,"zero-diff part of ""use ssa-based computerange"" (issue_ref)"
dotnet/runtime,77115c33ec4fb8688e4803cd8f76cd0fa4bff7d7,"Allow R2R for images provided via external_assembly_probe (#112934)

Allow R2R for images provided via `external_assembly_probe` This re-uses the existing mechanism from single-file with R2R, where we load the image by copying it. This is obviously inefficient, but allows a first version of functioning R2R for Android.",2025-02-28 18:21:34+00:00,Elinor Fung,1,04538da4fc4dca4a5f1184708fe95a16dd947d17,Fix double closing of handle when loading compressed assembly in single-file (#113002),1,20,5,"allow r2r for images provided via external_assembly_probe (issue_ref)allow r2r for images provided via this re-uses the existing mechanism from single-file with r2r, where we load the image by copying it. this is obviously inefficient, but allows a first version of functioning r2r for android."
dotnet/runtime,12bf86445455b562d66fa8275f1a6b438baea86b,"JIT: more inlining with EH prep work (#113023)

Don't try an inline managed methods with unmanaged calling conventions.
This mainly copes with x86 where unmanaged calling conventions use reversed
arg order, but I've disabled it in general. No diffs as these methods seem
to always include EH.

Remove uses of `compXcptnsCount` as this goes stale whenever we clone or
remove EH, or (eventually) inline methods with EH. Instead, rely on
`compHndBBtabCount`.

Defer allocating x86's shadow SP var and area until later in jitting,
so this reflects any changes in EH table structure. In particular we
often are able to eliminate EH in part or all together and this saves
a low-offset allocation and so leads to some nice code size savings on
x86.

Also on x86 remove the runtime-dependent catch class case from the
computation for keeping this alive, as we now transform such into
runtime lookups in filters (that may well keep this alive).",2025-03-01 17:10:52+00:00,Andy Ayers,0,,,7,110,52,"jit: more inlining with eh prep work (issue_ref)don't try an inline managed methods with unmanaged calling conventions.this mainly copes with x86 where unmanaged calling conventions use reversedarg order, but i've disabled it in general. no diffs as these methods seemto always include eh.remove uses of as this goes stale whenever we clone orremove eh, or (eventually) inline methods with eh. instead, rely on.defer allocating x86's shadow sp var and area until later in jitting,so this reflects any changes in eh table structure. in particular weoften are able to eliminate eh in part or all together and this savesa low-offset allocation and so leads to some nice code size savings onx86.also on x86 remove the runtime-dependent catch class case from thecomputation for keeping this alive, as we now transform such intoruntime lookups in filters (that may well keep this alive)."
dotnet/runtime,da089b43b2ef287b32f15c397f6c273238fb91e0,"[main] Update dependencies from dotnet/emsdk (#112976)

* Update dependencies from https://github.com/dotnet/emsdk build 20250226.1

Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport , Microsoft.SourceBuild.Intermediate.emsdk
 From Version 10.0.0-preview.3.25125.1 -> To Version 10.0.0-preview.3.25126.1

Dependency coherency updates

runtime.linux-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.linux-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.osx-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.osx-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.win-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.win-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport
 From Version 10.0.0-alpha.1.25123.1 -> To Version 10.0.0-alpha.1.25125.1 (parent: Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport

* Update dependencies from https://github.com/dotnet/emsdk build 20250301.2

Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport , Microsoft.SourceBuild.Intermediate.emsdk
 From Version 10.0.0-preview.3.25125.1 -> To Version 10.0.0-preview.3.25151.2

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-03-02 11:04:20+00:00,dotnet-maestro[bot],0,,,2,22,22,"[main] update dependencies from dotnet/emsdk (issue_ref)* update dependencies from build 20250226.1microsoft.net.workload.emscripten.current.manifest-10.0.100.transport , microsoft.sourcebuild.intermediate.emsdk from version 10.0.0-preview.3.25125.1 -> to version 10.0.0-preview.3.25126.1dependency coherency updatesruntime.linux-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.linux-musl-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.linux-x64.microsoft.netcore.runtime.wasm.node.transport,runtime.linux-musl-x64.microsoft.netcore.runtime.wasm.node.transport,runtime.osx-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.osx-x64.microsoft.netcore.runtime.wasm.node.transport,runtime.win-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.win-x64.microsoft.netcore.runtime.wasm.node.transport from version 10.0.0-alpha.1.25123.1 -> to version 10.0.0-alpha.1.25125.1 (parent: microsoft.net.workload.emscripten.current.manifest-10.0.100.transport* update dependencies from build 20250301.2microsoft.net.workload.emscripten.current.manifest-10.0.100.transport , microsoft.sourcebuild.intermediate.emsdk from version 10.0.0-preview.3.25125.1 -> to version 10.0.0-preview.3.25151.2---------"
dotnet/runtime,088d199063dd1bf7fa00a445d23f93f915f84b31,Add benchmarks.run_pgo_optrepeat collection (#112750),2025-03-02 19:38:55+00:00,Egor Bogatov,1,337ffbd38750ae845f8ecb5b125ebcf36bb6ace2,"Fix SPMI realworld collection output file naming (#114937)

The `OutputFileName` was defined using `%(HelixWorkItem.Index)`, but
`Index` wasn't defined. It didn't really matter, since multiple
partition file uploads end up in separate directories on the machine
doing the merging (directories named for the partition), but it looked
odd.",6,27,6,add benchmarks.run_pgo_optrepeat collection (issue_ref)
dotnet/runtime,ecee26528ca9c6e46a6da39ed291bd441511a177,"Update dependencies from https://github.com/dotnet/source-build-reference-packages build 20250228.4 (#113057)

Microsoft.SourceBuild.Intermediate.source-build-reference-packages
 From Version 10.0.611901 -> To Version 10.0.612804

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-03-03 06:19:10+00:00,dotnet-maestro[bot],0,,,1,2,2,update dependencies from build 20250228.4 (issue_ref)microsoft.sourcebuild.intermediate.source-build-reference-packages from version 10.0.611901 -> to version 10.0.612804
dotnet/runtime,367cf39652b1193d04ce3ac345a6384ecba53382,"Automated bump of chrome version (#113036)

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>",2025-03-03 09:28:52+00:00,github-actions[bot],0,,,1,4,4,automated bump of chrome version (issue_ref)
dotnet/runtime,c40c261a4219dd47690e70319b495fa9b1c36d0e,[wasm] Stop hardcoding TFM in Wasm.Build.Tests (#112955),2025-03-03 14:19:56+00:00,kasperk81,1,cc2c0976900d9838ea26a8db698b1eca11e094e3,"[wasm][bench] Fix the template dir creation (#114482)

The path was wrong, not updated after copy/paste?",15,47,412,[wasm] stop hardcoding tfm in wasm.build.tests (issue_ref)
dotnet/runtime,71772d1adc7e5830b4d0f286a4e68c89324f4076,"JIT: Consolidate layout passes into one phase (#112004)

Part of #107749. This replaces our RPO layout and cold code motion phases with a single loop-aware RPO computation (with cold blocks ignored) that we feed into 3-opt as its initial layout. This has the nice property of needing to reorder the block list only once, and never leaving it in a temporarily invalid state (i.e. with EH regions broken up).

My initial plan was for this PR to be zero-diff since I split out all the invariant changes (like not reordering cold/handler blocks at all) into separate PRs, but I found it necessary to implement moving try regions around to avoid regressing layout quality. Suppose we have some initial layout that looks like this:

[BB01 (hot)]
[BB02 (cold)]
[BB03 (hot, try entry)]
[BB04 (hot, try exit)]
[BB05 (hot)]
When reordering the block list, we want to only reorder within try regions to avoid breaking their contiguity. Suppose 3-opt wants the block list to look like BB01 -> BB03 -> BB04 -> BB05 -> BB02. If we only reorder within regions, we cannot place BB03 after BB01, so the layout remains as-is, with the cold block inline. And if BB05 were somewhere else in the initial layout, we wouldn't be able to move it after BB04 because they're in different regions.

We can be a bit clever and remember the last hot block in each region, so that EH region boundaries don't trip us up. However, this only enables better movement within regions, and nested regions end up sinking down the method. We end up with the following layout:

[BB01 (hot)]
[BB05 (hot)]
[BB02 (cold)]
[BB03 (hot, try entry)]
[BB04 (hot, try exit)]
The hot part of the main method body is compact, but the try region is interleaved with cold code. After adding support for try region movement, we can now move try regions up to their ideal successors, when doing so doesn't break EH nesting invariants:

[BB01 (hot)]
[BB03 (hot, try entry)]
[BB04 (hot, try exit)]
[BB05 (hot)]
[BB02 (cold)]
Thus, this change has some churn, but it looks mostly like a PerfScore win.",2025-03-03 17:59:43+00:00,Aman Khalid,0,,,4,279,427,"jit: consolidate layout passes into one phase (issue_ref)part of issue_ref. this replaces our rpo layout and cold code motion phases with a single loop-aware rpo computation (with cold blocks ignored) that we feed into 3-opt as its initial layout. this has the nice property of needing to reorder the block list only once, and never leaving it in a temporarily invalid state (i.e. with eh regions broken up).my initial plan was for this pr to be zero-diff since i split out all the invariant changes (like not reordering cold/handler blocks at all) into separate prs, but i found it necessary to implement moving try regions around to avoid regressing layout quality. suppose we have some initial layout that looks like this:[bb01 (hot)][bb02 (cold)][bb03 (hot, try entry)][bb04 (hot, try exit)][bb05 (hot)]when reordering the block list, we want to only reorder within try regions to avoid breaking their contiguity. suppose 3-opt wants the block list to look like bb01 -> bb03 -> bb04 -> bb05 -> bb02. if we only reorder within regions, we cannot place bb03 after bb01, so the layout remains as-is, with the cold block inline. and if bb05 were somewhere else in the initial layout, we wouldn't be able to move it after bb04 because they're in different regions.we can be a bit clever and remember the last hot block in each region, so that eh region boundaries don't trip us up. however, this only enables better movement within regions, and nested regions end up sinking down the method. we end up with the following layout:[bb01 (hot)][bb05 (hot)][bb02 (cold)][bb03 (hot, try entry)][bb04 (hot, try exit)]the hot part of the main method body is compact, but the try region is interleaved with cold code. after adding support for try region movement, we can now move try regions up to their ideal successors, when doing so doesn't break eh nesting invariants:[bb01 (hot)][bb03 (hot, try entry)][bb04 (hot, try exit)][bb05 (hot)][bb02 (cold)]thus, this change has some churn, but it looks mostly like a perfscore win."
dotnet/runtime,b75f5cbd1bd2a275ab91012c2feae4e0e6f9f948,"Tensor primitives divide int32 (#111505)

* Add vectorized path for Int32 type in TensorPrimitives.Divide

* Add ISA guards and Debug.Assert

* Simplify vectorizable check, simplify preprocessor guard

* Use XPlat intrinsics, use x86 intrinsics just for conversion

* Get Vector128<int> operator/ working

* Working for Vector256<int> operator/

* Works for operator/ where op2 is scalar int

* Consolidate to one path

* Move logic from importer to gentree

* Add support to vectorize Vector512<int> operator /

* Working GenTreeSIMDDivByZeroCheck node

* Make GenTreeSIMDDivByZeroCheck a unary op

* Remove empty lower functions, remove leftover gtGetOp2

* JIT formatting

* Only use low SIMD registers for ptest

* Use gtNewSimdCmpOpAnyNode for div-by-zero check

* Add spill for op1

* Jit formatting

* Rework to use NI_Vector*_op_Division

* Remove GT_SIMD_DIV_BY_ZERO_CHECK and related class/functions

* Re-use tmp reg for converts

* Comments, jit formatting

* Remove leftover SIMDDivByZero

* Don't flag with GTF_OVERFLOW since it conflicts with GTF_HW_EM_OP

* Use correct INT_MIN / -1, simplify vec const generation, add assert to verify base type is TYP_INT

---------

Co-authored-by: Alex Covington (Advanced Micro Devices <b-alexco@microsoft.com>",2025-03-03 18:05:44+00:00,Alex Covington,1,ded5f59e8de2b7e3fb5f11d1aa4b14ce6cf55e77,"JIT: fix arm64 issue around flags and neg with contained operand (#113391)

If `neg` has a contained operand (`mul`) it cannot set flags.

Fixes #113320",10,193,20,"tensor primitives divide int32 (issue_ref)* add vectorized path for int32 type in tensorprimitives.divide* add isa guards and debug.assert* simplify vectorizable check, simplify preprocessor guard* use xplat intrinsics, use x86 intrinsics just for conversion* get vector128<int> operator/ working* working for vector256<int> operator/* works for operator/ where op2 is scalar int* consolidate to one path* move logic from importer to gentree* add support to vectorize vector512<int> operator /* working gentreesimddivbyzerocheck node* make gentreesimddivbyzerocheck a unary op* remove empty lower functions, remove leftover gtgetop2* jit formatting* only use low simd registers for ptest* use gtnewsimdcmpopanynode for div-by-zero check* add spill for op1* jit formatting* rework to use ni_vector*_op_division* remove gt_simd_div_by_zero_check and related class/functions* re-use tmp reg for converts* comments, jit formatting* remove leftover simddivbyzero* don't flag with gtf_overflow since it conflicts with gtf_hw_em_op* use correct int_min / -1, simplify vec const generation, add assert to verify base type is typ_int---------"
dotnet/runtime,9c8ec9c255c546985dab84f55f189202a92637e3,"[android] Make Android app on coreclr use host-runtime contract and provide external assembly probe (#112938)

- Update app builder targets / tasks to allow specifying multiple runtime header directories
- Make Android app on coreclr use `host_runtime_contract::external_assembly_probe`",2025-03-03 18:15:14+00:00,Elinor Fung,1,adcc7eba7a9c907fa0ce863ca1f600a731429e52,"[android][coreclr] Fix lifetime of host_runtime_contract in template (#113341)

The host-runtime contract needs to live for the app, not just initialization.",16,123,103,[android] make android app on coreclr use host-runtime contract and provide external assembly probe (issue_ref)- update app builder targets / tasks to allow specifying multiple runtime header directories- make android app on coreclr use
dotnet/runtime,1d44636d5d51cec9b44e3ffe739a01a9ecc4ffee,"Add test for external assembly probe mechanism (#113007)

- Only try to convert to a loaded layout by file mapping for images that are files
- Add test that uses corerun with external assembly probe",2025-03-03 20:29:56+00:00,Elinor Fung,0,,,5,164,4,add test for external assembly probe mechanism (issue_ref)- only try to convert to a loaded layout by file mapping for images that are files- add test that uses corerun with external assembly probe
dotnet/runtime,dfac0232858ad19cf54116c0c1735b8b6736783e,Add approved TensorPrimitives surface area (#112933),2025-03-03 21:00:15+00:00,Stephen Toub,1,f0f145744b846dbbfec594d3c242eb3768068ccb,"Added in non-generic interfaces for Tensors (#113401)

* base tensor updated, need to update ref

* ref files updated

* added tests

* fixed return comment",49,5356,916,add approved tensorprimitives surface area (issue_ref)
dotnet/runtime,3d275542626ac6420269168ecbebe2bcb8e6ae54,Add NonCryptographicHashAlgorithm Clone methods (#113087),2025-03-03 21:01:29+00:00,Stephen Toub,0,,,18,164,0,add noncryptographichashalgorithm clone methods (issue_ref)
dotnet/runtime,3cf22b78d833dbac3d7e32f32406419bcb7511c0,"JIT: Template EH-specific checks in 3-opt layout (#111437)

3-opt performs various checks within hot loops to maintain EH invariants. Since we know beforehand if the method has EH regions or not, we can save a bit of throughput in the latter case by skipping these checks. Also, relax an invariant around considering edges out of call-finally pairs.",2025-03-03 23:36:04+00:00,Aman Khalid,1,343b0349fae8d2a32aefd058cc779e9b3647a646,"JIT: Fix edge likelihoods in `fgOptimizeBranch` (#113235)

Part of #113108. When converting an unconditional jump to a test block into a duplicate test block, fgOptimizeBranch flips the condition (unnecessarily -- I plan to fix this someday), which means we need to derive the new true edge's likelihood from the cloned false edge, and vice versa. Now that late profile repair is enabled, if we get this wrong, the flipped edge likelihoods will flatten loop weights, and inflate non-loop weights. I suspect fixing this will also revert some of the regressions from late profile repair.",2,99,69,"jit: template eh-specific checks in 3-opt layout (issue_ref)3-opt performs various checks within hot loops to maintain eh invariants. since we know beforehand if the method has eh regions or not, we can save a bit of throughput in the latter case by skipping these checks. also, relax an invariant around considering edges out of call-finally pairs."
dotnet/runtime,2b3b2d66afc10e5456f77be4daa30e47b273227f,"Added RuntimeType/RuntimeFlavor as a concept for building the Android HelloWorld app and updated android_scenarios to only run the BDN app tests for Mono RuntimeType. Also cleaned up the sample apps build file, removing the unnecessary parameters. (#112939)

Remove unneeded xharness setup code.

Updated per feedback. Removed the noanimation device startup test, added binlog upload to android build steps, and split mono and coreclr build steps.

Rename the mobile sample app build parameter from flavor to runtimeType to better match up with it's downstream connections.",2025-03-04 00:05:06+00:00,Parker Bibus,0,,,6,89,69,"added runtimetype/runtimeflavor as a concept for building the android helloworld app and updated android_scenarios to only run the bdn app tests for mono runtimetype. also cleaned up the sample apps build file, removing the unnecessary parameters. (issue_ref)remove unneeded xharness setup code.updated per feedback. removed the noanimation device startup test, added binlog upload to android build steps, and split mono and coreclr build steps.rename the mobile sample app build parameter from flavor to runtimetype to better match up with it's downstream connections."
dotnet/runtime,4fb40206e16efb0b43ef68d40b4bbf9abf873b8c,"Optimize Min/Max paths with AVX10.2 intrinsics (#112535)

Co-authored-by: Ruihan-Yin <ruihan.yin@intel.com>",2025-03-04 00:16:38+00:00,Khushal Modi,1,ee74dc90ce71168a92b669c36fa197c50a1fe08d,"ISimdVector vector intrinsics fixes (#113288)

* Add SN Vector interpreter intrinsics

* Fix explicit implict implementation filtering

* try something else

* split up the prefix parsing

* remove superfluous check

* fix namespace in importer

* Fixup coreclr checks too

* Fix the formatting

* Fix typo

* Copilot... sigh

* reduce repeat compares

* On arm don't try to create an sri Vector<T>",2,48,0,optimize min/max paths with avx10.2 intrinsics (issue_ref)
dotnet/runtime,5c4ccef2ad6d902cb253c803868ada79a1cb7675,"[main] Update dependencies from dotnet/cecil, dotnet/hotreload-utils, dotnet/icu, dotnet/runtime, dotnet/runtime-assets (#112833)

* Update dependencies from https://github.com/dotnet/hotreload-utils build 20250217.2

Microsoft.DotNet.HotReload.Utils.Generator.BuildTool
 From Version 10.0.0-alpha.0.25110.1 -> To Version 10.0.0-alpha.0.25117.2

* Update dependencies from https://github.com/dotnet/cecil build 20250216.3

Microsoft.SourceBuild.Intermediate.cecil , Microsoft.DotNet.Cecil
 From Version 0.11.5-alpha.25109.3 -> To Version 0.11.5-alpha.25116.3

* Update dependencies from https://github.com/dotnet/icu build 20250223.1

Microsoft.NETCore.Runtime.ICU.Transport
 From Version 10.0.0-preview.3.25119.1 -> To Version 10.0.0-preview.3.25123.1

* Update dependencies from https://github.com/dotnet/runtime-assets build 20250224.1

Microsoft.DotNet.CilStrip.Sources , Microsoft.NET.HostModel.TestData , System.ComponentModel.TypeConverter.TestData , System.Data.Common.TestData , System.Drawing.Common.TestData , System.Formats.Tar.TestData , System.IO.Compression.TestData , System.IO.Packaging.TestData , System.Net.TestData , System.Private.Runtime.UnicodeData , System.Runtime.Numerics.TestData , System.Runtime.TimeZoneData , System.Security.Cryptography.X509Certificates.TestData , System.Text.RegularExpressions.TestData , System.Windows.Extensions.TestData
 From Version 10.0.0-beta.25120.1 -> To Version 10.0.0-beta.25124.1

* Update dependencies from https://github.com/dotnet/icu build 20250225.1

Microsoft.NETCore.Runtime.ICU.Transport
 From Version 10.0.0-preview.3.25119.1 -> To Version 10.0.0-preview.3.25125.1

* Update dependencies from https://github.com/dotnet/runtime-assets build 20250226.1

Microsoft.DotNet.CilStrip.Sources , Microsoft.NET.HostModel.TestData , System.ComponentModel.TypeConverter.TestData , System.Data.Common.TestData , System.Drawing.Common.TestData , System.Formats.Tar.TestData , System.IO.Compression.TestData , System.IO.Packaging.TestData , System.Net.TestData , System.Private.Runtime.UnicodeData , System.Runtime.Numerics.TestData , System.Runtime.TimeZoneData , System.Security.Cryptography.X509Certificates.TestData , System.Text.RegularExpressions.TestData , System.Windows.Extensions.TestData
 From Version 10.0.0-beta.25120.1 -> To Version 10.0.0-beta.25126.1

* Update dependencies from https://github.com/dotnet/hotreload-utils build 20250226.1

Microsoft.DotNet.HotReload.Utils.Generator.BuildTool
 From Version 10.0.0-alpha.0.25110.1 -> To Version 10.0.0-alpha.0.25126.1

* Update dependencies from https://github.com/dotnet/runtime build 20250302.4

Microsoft.NET.Sdk.IL , Microsoft.NETCore.App.Runtime.win-x64 , Microsoft.NETCore.ILAsm , runtime.native.System.IO.Ports , System.Reflection.Metadata , System.Reflection.MetadataLoadContext , System.Text.Json , Microsoft.SourceBuild.Intermediate.runtime.linux-x64
 From Version 10.0.0-alpha.1.25068.1 -> To Version 10.0.0-preview.3.25152.4

* Update dependencies from https://github.com/dotnet/cecil build 20250225.1

Microsoft.SourceBuild.Intermediate.cecil , Microsoft.DotNet.Cecil
 From Version 0.11.5-alpha.25109.3 -> To Version 0.11.5-alpha.25125.1

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-03-04 01:56:51+00:00,dotnet-maestro[bot],0,,,3,79,79,"[main] update dependencies from dotnet/cecil, dotnet/hotreload-utils, dotnet/icu, dotnet/runtime, dotnet/runtime-assets (issue_ref)* update dependencies from build 20250217.2microsoft.dotnet.hotreload.utils.generator.buildtool from version 10.0.0-alpha.0.25110.1 -> to version 10.0.0-alpha.0.25117.2* update dependencies from build 20250216.3microsoft.sourcebuild.intermediate.cecil , microsoft.dotnet.cecil from version 0.11.5-alpha.25109.3 -> to version 0.11.5-alpha.25116.3* update dependencies from build 20250223.1microsoft.netcore.runtime.icu.transport from version 10.0.0-preview.3.25119.1 -> to version 10.0.0-preview.3.25123.1* update dependencies from build 20250224.1microsoft.dotnet.cilstrip.sources , microsoft.net.hostmodel.testdata , system.componentmodel.typeconverter.testdata , system.data.common.testdata , system.drawing.common.testdata , system.formats.tar.testdata , system.io.compression.testdata , system.io.packaging.testdata , system.net.testdata , system.private.runtime.unicodedata , system.runtime.numerics.testdata , system.runtime.timezonedata , system.security.cryptography.x509certificates.testdata , system.text.regularexpressions.testdata , system.windows.extensions.testdata from version 10.0.0-beta.25120.1 -> to version 10.0.0-beta.25124.1* update dependencies from build 20250225.1microsoft.netcore.runtime.icu.transport from version 10.0.0-preview.3.25119.1 -> to version 10.0.0-preview.3.25125.1* update dependencies from build 20250226.1microsoft.dotnet.cilstrip.sources , microsoft.net.hostmodel.testdata , system.componentmodel.typeconverter.testdata , system.data.common.testdata , system.drawing.common.testdata , system.formats.tar.testdata , system.io.compression.testdata , system.io.packaging.testdata , system.net.testdata , system.private.runtime.unicodedata , system.runtime.numerics.testdata , system.runtime.timezonedata , system.security.cryptography.x509certificates.testdata , system.text.regularexpressions.testdata , system.windows.extensions.testdata from version 10.0.0-beta.25120.1 -> to version 10.0.0-beta.25126.1* update dependencies from build 20250226.1microsoft.dotnet.hotreload.utils.generator.buildtool from version 10.0.0-alpha.0.25110.1 -> to version 10.0.0-alpha.0.25126.1* update dependencies from build 20250302.4microsoft.net.sdk.il , microsoft.netcore.app.runtime.win-x64 , microsoft.netcore.ilasm , runtime.native.system.io.ports , system.reflection.metadata , system.reflection.metadataloadcontext , system.text.json , microsoft.sourcebuild.intermediate.runtime.linux-x64 from version 10.0.0-alpha.1.25068.1 -> to version 10.0.0-preview.3.25152.4* update dependencies from build 20250225.1microsoft.sourcebuild.intermediate.cecil , microsoft.dotnet.cecil from version 0.11.5-alpha.25109.3 -> to version 0.11.5-alpha.25125.1---------"
dotnet/runtime,9aa8d958e5aecbf8fea863369033aaa6b52986b9,"[main] Update dependencies from dotnet/roslyn-analyzers (#112936)

* Update dependencies from https://github.com/dotnet/roslyn-analyzers build 20250225.1

Microsoft.CodeAnalysis.Analyzers , Microsoft.CodeAnalysis.NetAnalyzers
 From Version 3.12.0-beta1.25081.1 -> To Version 3.12.0-beta1.25125.1

* Update dependencies from https://github.com/dotnet/roslyn-analyzers build 20250226.1

Microsoft.CodeAnalysis.Analyzers , Microsoft.CodeAnalysis.NetAnalyzers
 From Version 3.12.0-beta1.25081.1 -> To Version 3.12.0-beta1.25126.1

* Update dependencies from https://github.com/dotnet/roslyn-analyzers build 20250227.1

Microsoft.CodeAnalysis.Analyzers , Microsoft.CodeAnalysis.NetAnalyzers
 From Version 3.12.0-beta1.25081.1 -> To Version 3.12.0-beta1.25127.1

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-03-04 02:03:56+00:00,dotnet-maestro[bot],0,,,2,6,6,"[main] update dependencies from dotnet/roslyn-analyzers (issue_ref)* update dependencies from build 20250225.1microsoft.codeanalysis.analyzers , microsoft.codeanalysis.netanalyzers from version 3.12.0-beta1.25081.1 -> to version 3.12.0-beta1.25125.1* update dependencies from build 20250226.1microsoft.codeanalysis.analyzers , microsoft.codeanalysis.netanalyzers from version 3.12.0-beta1.25081.1 -> to version 3.12.0-beta1.25126.1* update dependencies from build 20250227.1microsoft.codeanalysis.analyzers , microsoft.codeanalysis.netanalyzers from version 3.12.0-beta1.25081.1 -> to version 3.12.0-beta1.25127.1---------"
dotnet/runtime,6d344b35ff02e416304d7d25a8afb51b25d56c38,Use minipal_getcpufeatures to detect for AVX (#113032),2025-03-04 02:20:19+00:00,Andrew Au,0,,,3,9,77,use minipal_getcpufeatures to detect for avx (issue_ref)
dotnet/runtime,1895e057cfddc0d538ee52fb7c578565640b6079,"JIT: Simplify internal GC tracking structures (#113071)

Track all integer registers for calls in `regPtrDsc`. This does not cost
any extra memory and it saves us from going back and forth between an
intermediate format. It also unblocks proper GC reporting for helper
calls that are GC reported with non-standard calling convention.",2025-03-04 08:16:15+00:00,Jakob Botsch Nielsen,0,,,9,44,86,jit: simplify internal gc tracking structures (issue_ref)track all integer registers for calls in . this does not costany extra memory and it saves us from going back and forth between anintermediate format. it also unblocks proper gc reporting for helpercalls that are gc reported with non-standard calling convention.
dotnet/runtime,574c48c3dc28b6374ed38ab945c535dac519b3f4,"Remove unnecessary `GcInfoEncoder::DoNotTrackInPartiallyInterruptible` (#113078)

Also run superpmi-asmdiffs on gcinfo source changes",2025-03-04 08:16:46+00:00,Jakob Botsch Nielsen,0,,,4,6,102,remove unnecessary (issue_ref)also run superpmi-asmdiffs on gcinfo source changes
dotnet/runtime,e975cfeac52a5ab8f18646bc5de03cf476a1c8a2,"[RISC-V] Clean up code gen for floating comparisons (#111626)

* Clean up code gen for floating comparisons

* Don't allocate temp reg for floating comparisons",2025-03-04 08:19:12+00:00,Tomasz Sowiński,0,,,2,8,47,[risc-v] clean up code gen for floating comparisons (issue_ref)* clean up code gen for floating comparisons* don't allocate temp reg for floating comparisons
dotnet/runtime,eb30fcf4a34768382713267fab3c217635870bc2,"[RISC-V] Eliminate unnecessary add instruction in array indirection (#112978)

* [RISC-V] Enable constant extraction in genCreateAddrMode for RISC-V",2025-03-04 08:23:36+00:00,Fuad Ismail,0,,,1,12,4,[risc-v] eliminate unnecessary add instruction in array indirection (issue_ref)* [risc-v] enable constant extraction in gencreateaddrmode for risc-v
dotnet/runtime,c6a398442db682b94d6eb75a638232ee40ed0e43,"Document exceptions in OrderedDictionary (#113091)

* Document exceptions in OrderedDictionary

* tweak SetAt param doc",2025-03-04 08:37:01+00:00,Rob Hague,0,,,1,34,25,document exceptions in ordereddictionary (issue_ref)* document exceptions in ordereddictionary* tweak setat param doc
dotnet/runtime,11408abe8f6049a38f8af91676863c07df294d28,"[wasm] build paltests (#112404)

* Make configure pass for wasm and paltests component

Disable few parts, some might need closer look later.

* Fix compilation and linking on wasm

* Ignore limits and dlopen(nullptr, ...) on wasm

* Do not return 0 for minipal_get_current_thread_id on wasm

* Add simple index.html to run paltests on wasm in browser

* Forward console log and error to http server

* Enable debug output temporarily

* Do not create synchronization manager worker thread on wasm

And also skip creating pipe to communicate with it

* Temporarily override main args on wasm to simplify testing

* Prototype pal test suite runner

* Reload between tests to work around stack exhaustion

* Shorter delay between tests; logging of exit code specifies which test it was so you can pull the test statuses out of a log file

* Add mechanism for disabling tests and disable the debug_api tests

* Disable another set of tests

* Disable more tests and reduce run delay

* Full test run completes now

* Use exit runtime option

To avoid error messages at the end of each run

* Add summary with counts of passed, failed and disabled tests

* Trap on assert to stop

* Filter the tests, use paltestlist.txt as runpaltests.sh

Also write missing tests

* Don't output when capturing tests

Also fix disabled tests count

* Add notes to failing tests

* Make flush instruction cache no-op on wasm, disable few MT tests

* Reenable debug_api test, which is not failing

Add few more notes to failing memory related tests

* Do not call mmap to re-set memory protection

Emscripten's mmap doesn't support that and because we don't have virtual memory
in wasm, it doesn't make sense to call it there

* Disable 3 exception_handling/RaiseException tests

Also re-enable debug test, which works and disable few MT tests

* Disable paltest_probememory_probememory_neg1

* Disable dll tests on wasm

* Fix cmake warnings

* Install the additional files for wasm

* Use onExit instead of quit

This fixes issue with newer emscripten, where Module['quit'] handling is removed.
Also fix single test runs.

* Add mono.emsdk subset

* Remove forgotten check

* Update msbuild targets to allow build of wasm paltests

* Add CI build and temporarily disable all other runtime builds to save resources

* Fix remaining conflict

* Fix build afer merge with main

* Make membarrier noop on wasm

* Change subsets build order

* Disable fs test which fails with chromedriver

* Fix InternalCanonicalizeRealPath corner case that affects wasm pal tests

* Zero memory for MEM_DECOMMIT on WASM instead of just doing nothing, to at least get slightly closer to intended behavior

* Removed notes about the failing tests

* Fix few new cmake warnings

* Put runtime runs back

* Remove unwanted changes

* List disabled and failed tests when the run completed

* Fix mono wasm/MT build

* Remove unwanted fields

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Fix mono wasm/MT build once more

* Fix windows build

* Fix windows build

* Feedback

* More feedback

* More feedback

* More feedback

* Feedback

* Fix cmake warning

* Update src/coreclr/pal/src/CMakeLists.txt

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Update src/coreclr/pal/src/CMakeLists.txt

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Update src/coreclr/pal/src/CMakeLists.txt

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Update src/coreclr/pal/src/CMakeLists.txt

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Feedback

---------

Co-authored-by: Katelyn Gadd <kg@luminance.org>
Co-authored-by: Larry Ewing <lewing@microsoft.com>
Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-03-04 09:47:32+00:00,Radek Doulik,1,258b1ee5a8b25f06606e5794dd91a96eafbdaaf0,"Haiku: Fix context register name (#114518)

This fixes CoreCLR builds after the changes in
haiku/haiku@317307ff469e3ac310099d8eb4823c9711a677ea.",38,475,38,"[wasm] build paltests (issue_ref)* make configure pass for wasm and paltests componentdisable few parts, some might need closer look later.* fix compilation and linking on wasm* ignore limits and dlopen(nullptr, ...) on wasm* do not return 0 for minipal_get_current_thread_id on wasm* add simple index.html to run paltests on wasm in browser* forward console log and error to http server* enable debug output temporarily* do not create synchronization manager worker thread on wasmand also skip creating pipe to communicate with it* temporarily override main args on wasm to simplify testing* prototype pal test suite runner* reload between tests to work around stack exhaustion* shorter delay between tests; logging of exit code specifies which test it was so you can pull the test statuses out of a log file* add mechanism for disabling tests and disable the debug_api tests* disable another set of tests* disable more tests and reduce run delay* full test run completes now* use exit runtime optionto avoid error messages at the end of each run* add summary with counts of passed, failed and disabled tests* trap on assert to stop* filter the tests, use paltestlist.txt as runpaltests.shalso write missing tests* don't output when capturing testsalso fix disabled tests count* add notes to failing tests* make flush instruction cache no-op on wasm, disable few mt tests* reenable debug_api test, which is not failingadd few more notes to failing memory related tests* do not call mmap to re-set memory protectionemscripten's mmap doesn't support that and because we don't have virtual memoryin wasm, it doesn't make sense to call it there* disable 3 exception_handling/raiseexception testsalso re-enable debug test, which works and disable few mt tests* disable paltest_probememory_probememory_neg1* disable dll tests on wasm* fix cmake warnings* install the additional files for wasm* use onexit instead of quitthis fixes issue with newer emscripten, where module['quit'] handling is removed.also fix single test runs.* add mono.emsdk subset* remove forgotten check* update msbuild targets to allow build of wasm paltests* add ci build and temporarily disable all other runtime builds to save resources* fix remaining conflict* fix build afer merge with main* make membarrier noop on wasm* change subsets build order* disable fs test which fails with chromedriver* fix internalcanonicalizerealpath corner case that affects wasm pal tests* zero memory for mem_decommit on wasm instead of just doing nothing, to at least get slightly closer to intended behavior* removed notes about the failing tests* fix few new cmake warnings* put runtime runs back* remove unwanted changes* list disabled and failed tests when the run completed* fix mono wasm/mt build* remove unwanted fields"
dotnet/runtime,40ef15c27a94b2ddaecd7d0a03a34b61aebfc479,[infra] Add runtime-llvm pipeline to Build Analysis (#113086),2025-03-04 11:45:24+00:00,Matous Kozak,0,,,1,4,0,[infra] add runtime-llvm pipeline to build analysis (issue_ref)
dotnet/runtime,52fbf3e85fdd3a6e450cf8468c7ee388798cb864,"Allow `MakeGenericType`/`MakeArrayType` of arbitrary types (#112986)

When we worked on .NET Native, we didn't have static analysis but at least wanted to have some predictability in how dynamic code fails with AOT. We decided we want `MakeGenericType` & co. to be the thing that fails instead of subsequent operations that try to obtain a type handle (one needs a type handle to do ""interesting"" reflection operations).

As we refined the model and introduced static analysis, we decided it's fine if trim/AOT unsafe code can get at things that are in ""undefined"" state [^1] (named types that might not have type handles, MethodInfos that don't have parameter names, etc.). The static analysis warning is always at the problematic operation and what happens next can be anything.

But `MakeGenericType` failing early sometimes got in the way. For example xUnit uses `MakeGenericType` to create a new interface at runtime and check `IsAssignableFrom` with it. We don't actually need a usable type handle for this. We had an opt-out switch that we only enabled for testing to get xUnit working. But that also means we were not testing the shipping configuration whenever xUnit was involved.

This PR makes it so `MakeGeneric`/`MakeArray` can actually succeed even if we don't have the code/data structures for the type. Trying to do ""interesting"" reflection with it is going to throw the good old MissingMetadata-like exception - the difference is just in the timing.

I'm also changing things to allow obtaining `TypeHandle` on generic types even if they're in the ""necessary"" form only. This will only bring us to parity with what already happens for non-generic types. We already have blocks in places to make sure such `TypeHandle` cannot be used for much more than casting (e.g. `GetUninitializedObject` has a preexisting block for this).

Cc @dotnet/ilc-contrib 

[^1]: We say we're fine with undefined behavior for trim-unsafe code, but that does not include GC holes.",2025-03-04 13:15:12+00:00,Michal Strehovský,1,7cfe5e3fa50b64facce76cc537ff8c78c8c8623b,"Set AppContext.BaseDirectory and the lookup path for AssemblyDirectory to the directory containing the NativeAOT module (#112457)

* Set AppContext.BaseDirectory and the lookup path for AssemblyDirectory to the directory containing the NativeAOT module

* Fix calling convention

* Fix missing using

* Rewrite an add comment

* Add test

* Make TryGetFullPathToApplicationModule nullable

* Don't use relative paths to load dependencies on Linux/macos. Those are relative to the current working directory.

* Add test for AppContext.BaseDirectory

* Fix test on Windows",14,116,107,"allow / of arbitrary types (issue_ref)when we worked on .net native, we didn't have static analysis but at least wanted to have some predictability in how dynamic code fails with aot. we decided we want & co. to be the thing that fails instead of subsequent operations that try to obtain a type handle (one needs a type handle to do ""interesting"" reflection operations).as we refined the model and introduced static analysis, we decided it's fine if trim/aot unsafe code can get at things that are in ""undefined"" state [^1] (named types that might not have type handles, methodinfos that don't have parameter names, etc.). the static analysis warning is always at the problematic operation and what happens next can be anything.but failing early sometimes got in the way. for example xunit uses to create a new interface at runtime and check with it. we don't actually need a usable type handle for this. we had an opt-out switch that we only enabled for testing to get xunit working. but that also means we were not testing the shipping configuration whenever xunit was involved.this pr makes it so / can actually succeed even if we don't have the code/data structures for the type. trying to do ""interesting"" reflection with it is going to throw the good old missingmetadata-like exception - the difference is just in the timing.i'm also changing things to allow obtaining on generic types even if they're in the ""necessary"" form only. this will only bring us to parity with what already happens for non-generic types. we already have blocks in places to make sure such cannot be used for much more than casting (e.g. has a preexisting block for this).cc @dotnet/ilc-contrib [^1]: we say we're fine with undefined behavior for trim-unsafe code, but that does not include gc holes."
dotnet/runtime,75e78003b9ff5981f78b05ce6cfb624b7b7aa087,JIT: Mark certain intrinsics as non-escaping (#113093),2025-03-04 13:22:40+00:00,Egor Bogatov,1,65f01395f6af3131b9480e91671c8c96062bca11,"Fix trivial typo (#113130)

s/is/if in comment

Co-authored-by: Julie Lee <63486087+JulieLeeMSFT@users.noreply.github.com>",2,26,0,jit: mark certain intrinsics as non-escaping (issue_ref)
dotnet/runtime,9f3c32da22035d6146b9083e1e3207df256c18ef,Use `WriteDoubleLittleEndian` in `NumericGraphemeInfo` (#112611),2025-03-04 13:36:01+00:00,xtqqczze,0,,,1,1,2,use in (issue_ref)
dotnet/runtime,bb146adb3f0a0a5c67037ba93b1fcf6fab5c3747,[browser] Generate boot config as javascript module (#112947),2025-03-04 13:55:50+00:00,Marek Fišera,0,,,19,159,63,[browser] generate boot config as javascript module (issue_ref)
dotnet/runtime,f8f5125f0fb73fa80cb9dd9d6e8493fb48a0c076,"JIT: stop using ehTrueEnclosingTryIndexIL outside of importation (#113102)

Once we can inline methods with EH, IL ranges are no longer a reliable indicator
of a mutual-protect try regions. Instead, after importation, we can rely on
mutual-protect trys having the same start and end blocks.

Also update other case where we were using `info.compXcptnsCount` in morph
to decide if we needed a frame pointer. This lets us simplify the logic around
frame pointers and EH (though I still think we're making up our minds too early).

Contributes to #108900.",2025-03-04 14:35:34+00:00,Andy Ayers,0,,,7,81,46,"jit: stop using ehtrueenclosingtryindexil outside of importation (issue_ref)once we can inline methods with eh, il ranges are no longer a reliable indicatorof a mutual-protect try regions. instead, after importation, we can rely onmutual-protect trys having the same start and end blocks.also update other case where we were using in morphto decide if we needed a frame pointer. this lets us simplify the logic aroundframe pointers and eh (though i still think we're making up our minds too early).contributes to issue_ref."
dotnet/runtime,f0aa3abca0e52afdae7b2e804529529f9d3aaee9,"Use invariant culture when formatting transfer capture in regex source generator (#113081)

A balancing group can result in TransferCapture being emitted with a negative ""capnum"". If the compiler is running under a culture that uses something other than '-' as the negative sign, the resulting generated code will fail to compile.",2025-03-04 15:56:18+00:00,Stephen Toub,1,ab105b51f8b50ec5567d7cfe9001ca54dd6f64c3,"Fix regex description emitted by generator for switched branches (#115136)

* Fix regex description emitted by generator for switched branches

The emitter is mutating the regex tree, under the assumption that no one subsequently looks at the tree... but the XML comment generator does. Make sure the mutations are undone.

* Update src/libraries/System.Text.RegularExpressions/gen/RegexGenerator.Emitter.cs

---------

Co-authored-by: Dan Moseley <danmose@microsoft.com>",2,24,7,"use invariant culture when formatting transfer capture in regex source generator (issue_ref)a balancing group can result in transfercapture being emitted with a negative ""capnum"". if the compiler is running under a culture that uses something other than '-' as the negative sign, the resulting generated code will fail to compile."
dotnet/runtime,1f6b690378ba4adf9567746acb3d213ef0bc40bf,"Move UMEntryThunk to StubPrecode infrastructure (#112460)

* Move UMEntryThunk to StubPrecode infrastructure
- Use the StubPrecode logic to create UMEntryThunk instances
- Allocate them all on the Global LoaderAllocator
- Unify the creation of UMEntryThunks between the C++/CLI fixup generation path and the delegate creation path
- Remove ThunkHeapStubManager as it is now subsumed by RangeSectionStubManager
- Tweak code paths around all of this so that we don't have unnecessary indirections (This change will add 2 memory loads to the UMEntryThunk path on x86/x64, but that should be fairly immaterial compared to the cost of an actual reverse p/invoke)",2025-03-04 19:06:10+00:00,David Wrighton,1,cdb3549951286c9d0eadd20326a211e2bc3dc88d,Create error message when `UnmanagedCallersOnly` is used with `DllImport`. (#114240),53,401,1064,"move umentrythunk to stubprecode infrastructure (issue_ref)* move umentrythunk to stubprecode infrastructure- use the stubprecode logic to create umentrythunk instances- allocate them all on the global loaderallocator- unify the creation of umentrythunks between the c++/cli fixup generation path and the delegate creation path- remove thunkheapstubmanager as it is now subsumed by rangesectionstubmanager- tweak code paths around all of this so that we don't have unnecessary indirections (this change will add 2 memory loads to the umentrythunk path on x86/x64, but that should be fairly immaterial compared to the cost of an actual reverse p/invoke)"
dotnet/runtime,b4f8d4f1b694dda221ea46620339900d5be33f73,Harden some reflection invoke tests (#113000),2025-03-04 20:10:30+00:00,Steve Harter,0,,,9,32,112,harden some reflection invoke tests (issue_ref)
dotnet/runtime,76209ca399516a5dfeeba9081a5730fc42cbb5cb,"Temporarily disable ARM NEON path in simdhash due to performance issues (#113092)

Currently on ARM Mac the ARM NEON path in simdhash is very slow; scalar search path is fast. Follow-up PR will re-enable ARM NEON with a new implementation that's fast enough to use.",2025-03-04 21:29:21+00:00,Katelyn Gadd,0,,,1,10,0,temporarily disable arm neon path in simdhash due to performance issues (issue_ref)currently on arm mac the arm neon path in simdhash is very slow; scalar search path is fast. follow-up pr will re-enable arm neon with a new implementation that's fast enough to use.
dotnet/runtime,621bddcb2ac420a35395b96ffd354fe70580656a,Remove unused file Interop.PFXExportCertStore.cs,2025-03-04 22:09:13+00:00,Kevin Jones,0,,,1,0,15,remove unused file interop.pfxexportcertstore.cs
dotnet/runtime,9208fb63af0eb96aa7d3670b9b8f5cd2fb2097e7,Switch Ubuntu 24.04 testing to use Ubuntu 22.04 temporarily (#113138),2025-03-04 23:48:31+00:00,Jakob Botsch Nielsen,0,,,2,4,4,switch ubuntu 24.04 testing to use ubuntu 22.04 temporarily (issue_ref)
dotnet/runtime,4729bf98a4baed7dafa10c3871bf22d25c25c8b3,Use TryGetRangeFromAssertions to fold more relops in global assert prop (#112824),2025-03-05 10:42:21+00:00,Egor Bogatov,1,850c0ab4519b904a28f2d67abdaba1ac78c955ff,Fix a debug-assert in assertionprop.cpp (#113147),3,128,0,use trygetrangefromassertions to fold more relops in global assert prop (issue_ref)
dotnet/runtime,4eff254880789bf59bab922763446161b1f80640,"[NRBF] Remove [Experimental] (#113021)

* Revert ""Mark the System.Formats.Nrbf assembly as [Experimental] with SYSLIB5005 (#107905)""

This reverts commit b08181bdd3742887534c719b030dc264e78e97ee.

# Conflicts:
#	docs/project/list-of-diagnostics.md
#	src/libraries/Common/src/System/Experimentals.cs
#	src/libraries/System.Formats.Nrbf/src/System.Formats.Nrbf.csproj

* this should stay",2025-03-05 17:31:53+00:00,Adam Sitnik,0,,,10,3,40,"[nrbf] remove [experimental] (issue_ref)* revert ""mark the system.formats.nrbf assembly as [experimental] with syslib5005 (issue_ref)""this reverts commit b08181bdd3742887534c719b030dc264e78e97ee.# conflicts:#docs/project/list-of-diagnostics.md#src/libraries/common/src/system/experimentals.cs#src/libraries/system.formats.nrbf/src/system.formats.nrbf.csproj* this should stay"
dotnet/runtime,9296e04980b95cffbacadb6900f350f45a5f3595,"Cached interface dispatch for coreclr (#111771)

Enabling cached interface dispatch as an options for CoreCLR (should reduce memory usage/remove RWX pages, at the cost of reducing performance)
- Current implementation is only enabled in release builds for Apple platforms with restrictions on code generation
- On Debug/Checked builds of X64/Arm64 platforms it is possible to enable the feature by setting the `DOTNET_UseCachedInterfaceDispatch` environment variable to 1. (NOTE: Enabling this feature requires running on a processor which supports 128 bit compare and swap, which has implications on Linux X64 builds, and would have implications for Loongarch/RiscV if we enable the code there.)
- The strategy is to re-use the existing `VirtualCallStubManager` infrastructure for all non-code-generation driven lookups, but to replace the stub generation logic with the CachedInterfaceDispatch paths from NativeAOT.
- In addition, to support this, we need to extend the size of a Dispatch cell embedded in R2R images, so various parts of that logic are now capable of generating double pointer aligned dispatch cells when commanded. Infrastructure to set the right behavior for targetting apple platforms has not yet been implemented although the general purpose support is in place.",2025-03-05 20:05:15+00:00,David Wrighton,1,a015c51ac55ae530979ef8b8f1e9268ae746fa2a,Fix build breaks (#113179),91,2238,500,"cached interface dispatch for coreclr (issue_ref)enabling cached interface dispatch as an options for coreclr (should reduce memory usage/remove rwx pages, at the cost of reducing performance)- current implementation is only enabled in release builds for apple platforms with restrictions on code generation- on debug/checked builds of x64/arm64 platforms it is possible to enable the feature by setting the environment variable to 1. (note: enabling this feature requires running on a processor which supports 128 bit compare and swap, which has implications on linux x64 builds, and would have implications for loongarch/riscv if we enable the code there.)- the strategy is to re-use the existing infrastructure for all non-code-generation driven lookups, but to replace the stub generation logic with the cachedinterfacedispatch paths from nativeaot.- in addition, to support this, we need to extend the size of a dispatch cell embedded in r2r images, so various parts of that logic are now capable of generating double pointer aligned dispatch cells when commanded. infrastructure to set the right behavior for targetting apple platforms has not yet been implemented although the general purpose support is in place."
dotnet/runtime,7dd74fc403dda02fdccc541b306b8267c9a22aa9,"Check for an empty string for the TimeZoneDirectory environment variable (#112831)

* Check for an empty string for the TimeZoneDirectory environment variable

* Code feedback",2025-03-05 20:32:23+00:00,JongHeonChoi,0,,,1,1,1,check for an empty string for the timezonedirectory environment variable (issue_ref)* check for an empty string for the timezonedirectory environment variable* code feedback
dotnet/runtime,87954fa04e4d08355cd38d920ccc346be28eaa7b,"Establish runtime-diagnostics pipeline (#113169)

The idea behind this pipeline is to pull in dotnet/diagnostics in order to supply live runtimes to diagnostics test runs. Although it will run on a schedule, the primary reason to have this is for PR validation when making changes we know could impact the diagnostics repo.

Note that this change is bare bones in order to establish the pipeline in AzDo.",2025-03-06 00:10:32+00:00,Steve Pfister,0,,,1,34,0,"establish runtime-diagnostics pipeline (issue_ref)the idea behind this pipeline is to pull in dotnet/diagnostics in order to supply live runtimes to diagnostics test runs. although it will run on a schedule, the primary reason to have this is for pr validation when making changes we know could impact the diagnostics repo.note that this change is bare bones in order to establish the pipeline in azdo."
dotnet/runtime,24e42230240a3df0b63f83750e10393c2dbfd64d,Add missing ScenarioArgs to the android device startup test runs for performance tests. (#113182),2025-03-06 01:34:42+00:00,Parker Bibus,0,,,1,1,1,add missing scenarioargs to the android device startup test runs for performance tests. (issue_ref)
dotnet/runtime,a8d5fb81b3b9742e6c2585978707c1be36700d76,"Update dependencies from https://github.com/dotnet/emsdk build 20250305.1 (#113175)

Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport , Microsoft.SourceBuild.Intermediate.emsdk
 From Version 10.0.0-preview.3.25151.2 -> To Version 10.0.0-preview.3.25155.1

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-03-06 01:48:50+00:00,dotnet-maestro[bot],0,,,2,5,5,"update dependencies from build 20250305.1 (issue_ref)microsoft.net.workload.emscripten.current.manifest-10.0.100.transport , microsoft.sourcebuild.intermediate.emsdk from version 10.0.0-preview.3.25151.2 -> to version 10.0.0-preview.3.25155.1"
dotnet/runtime,666e9188f5e11f4a59708b5f18ff611aa950d965,"Downgrade MethodTables used in reflection invoke (#111610)

When we make a method reflection-callable, we have to make sure the reflection stack can get type handles of types within the method signature. The type handles are used as part of reflection activation to do castability checks (is it valid to call the method with this parameter?) and to do boxing of return values.

In the past, what we did:

* If the type has a canonical form, generate type loader template for it.
* Otherwise, generate a constructed MethodTable.

This was too much, so we restricted it in #92994 into:

* If the type is a GC pointer, don't generate anything. Update reflection stack to be able to deal with a null type handle if and only if this is a reference type and nobody actually allocated such reference type.
* Otherwise do what we did above.

This is still a bit too much, as demonstrated in https://github.com/dotnet/runtime/issues/111544#issuecomment-2601660738.

In this PR, I'm restricting this further to:

* If the type is in the canonical form (not just ""has canonical form"" - ""_is_ canonical form""), generate type loader template.
* If the type is an out valuetype parameter, generate constructed method table (since reflection stack is going to end up boxing)
* Generate necessary (unconstructed) method table otherwise (since we're only going to do castability checks and necessary method tables are exactly for that)

I'm deleting the ""GC pointer could have null methodtable"" complication since it doesn't help much in practice once we downgraded to necessary method tables (that revert is in https://github.com/dotnet/runtime/pull/111610/commits/dc34018ec09e337b8cd6924c0b71ebac9033e369 and rt-sz measurements show it really doesn't affect much).

Cc @dotnet/ilc-contrib",2025-03-06 05:35:16+00:00,Michal Strehovský,0,,,9,105,87,"downgrade methodtables used in reflection invoke (issue_ref)when we make a method reflection-callable, we have to make sure the reflection stack can get type handles of types within the method signature. the type handles are used as part of reflection activation to do castability checks (is it valid to call the method with this parameter?) and to do boxing of return values.in the past, what we did:* if the type has a canonical form, generate type loader template for it.* otherwise, generate a constructed methodtable.this was too much, so we restricted it in issue_ref into:* if the type is a gc pointer, don't generate anything. update reflection stack to be able to deal with a null type handle if and only if this is a reference type and nobody actually allocated such reference type.* otherwise do what we did above.this is still a bit too much, as demonstrated in #issuecomment-2601660738.in this pr, i'm restricting this further to:* if the type is in the canonical form (not just ""has canonical form"" - ""_is_ canonical form""), generate type loader template.* if the type is an out valuetype parameter, generate constructed method table (since reflection stack is going to end up boxing)* generate necessary (unconstructed) method table otherwise (since we're only going to do castability checks and necessary method tables are exactly for that)i'm deleting the ""gc pointer could have null methodtable"" complication since it doesn't help much in practice once we downgraded to necessary method tables (that revert is in and rt-sz measurements show it really doesn't affect much).cc @dotnet/ilc-contrib"
dotnet/runtime,78142b0e78681a3be581040c7b988bc91d5a8169,Update MsQuic library version (#113159),2025-03-06 09:43:10+00:00,Marie Píchová,0,,,1,1,1,update msquic library version (issue_ref)
dotnet/runtime,7efd356b9f965eaf5f40715418cee79b952b09bd,[browser] Pass configured config name to loadBootResource (#113210),2025-03-06 13:50:26+00:00,Marek Fišera,0,,,1,7,6,[browser] pass configured config name to loadbootresource (issue_ref)
dotnet/runtime,d5925b6567fb0b605ef324e76c75f89a6d823f53,"Reduce memory footprint of HTTP/2 connections (#112719)

* Reduce initial memory footprint of HTTP/2 connections

* Improve settings buffer length calculation

* Extract maxCapacity in buffer resizing

* Swap mod with branch

* Rename Resize to UpdateMaxSize",2025-03-06 14:04:35+00:00,Miha Zupan,0,,,4,79,31,reduce memory footprint of http/2 connections (issue_ref)* reduce initial memory footprint of http/2 connections* improve settings buffer length calculation* extract maxcapacity in buffer resizing* swap mod with branch* rename resize to updatemaxsize
dotnet/runtime,e9303d3a0f1e3839c8d8c3084062da2e3caee516,"Speed up single-value SearchValues<string> candidate verification (#108365)

* Speed up single-value SearchValues<string> candidate verification

* Improve comment, add extra assert

* Add path for Vector128

* Add test stress for smaller vector sizes

* Print type of SearchValues<string> on fuzzer failure

* Expand SimpleIndexOfAnyValues test a bit more",2025-03-06 14:14:44+00:00,Miha Zupan,1,4090180ec26cf3ab890523b3e59c87f5c4949068,"Add a helper utility to clear the environment variables for tests (#115752)

This preserves most ambient variables other than LANG and anything prefixed with DOTNET_SYSTEM_GLOBALIZATION.

Fixes #100505

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",9,290,105,"speed up single-value searchvalues<string> candidate verification (issue_ref)* speed up single-value searchvalues<string> candidate verification* improve comment, add extra assert* add path for vector128* add test stress for smaller vector sizes* print type of searchvalues<string> on fuzzer failure* expand simpleindexofanyvalues test a bit more"
dotnet/runtime,7b627edbbb5fb8af35c7a3fcc5c8acb2294aef37,[browser] avoid locks in ST interop (#113046),2025-03-06 14:55:24+00:00,Pavel Savara,1,53924485e03b81f0ae87651e19b89d2a71c136fe,Fix typo in SpinOnceCore comment (#116980),7,38,1,[browser] avoid locks in st interop (issue_ref)
dotnet/runtime,f6948fca8fb88491f1c938169140736fc85c4d11,"Opt labels out of automated issue cleanup (#113170)

* Opt the area-codegen-coreclr label out of automated issue cleanup

* Also opt area-tools-ilverification and area-iltools-coreclr out of issue cleanup",2025-03-06 16:17:35+00:00,Jeff Handley,0,,,1,6,0,opt labels out of automated issue cleanup (issue_ref)* opt the area-codegen-coreclr label out of automated issue cleanup* also opt area-tools-ilverification and area-iltools-coreclr out of issue cleanup
dotnet/runtime,f63d96e434576ae81a105a7e52634a877058b978,"Revert ""Switch Ubuntu 24.04 testing to use Ubuntu 22.04 temporarily (#113138)"" (#113207)

This reverts commit 9208fb63af0eb96aa7d3670b9b8f5cd2fb2097e7.",2025-03-06 18:14:44+00:00,Jakob Botsch Nielsen,1,6b264e85ea20db2ab7a895073e9595896cb6edb1,"Update to Ubuntu 25.04 (#113405)

* Update to Ubuntu 25.04

* Update the IDNA test data to Unicode 16

* Fix failing system net test

---------

Co-authored-by: Tarek Mahmoud Sayed <tarekms@microsoft.com>",2,4,4,"revert ""switch ubuntu 24.04 testing to use ubuntu 22.04 temporarily (issue_ref)"" (issue_ref)this reverts commit 9208fb63af0eb96aa7d3670b9b8f5cd2fb2097e7."
dotnet/runtime,d09a42b9149e14a37c8ef8363cdb7e17bb922c37,"Seed in the skeleton of ML-DSA based on current prototyping



This seeds a lot of untested boilerplate code as non-public types in System.Security.Cryptography.

When we start work on ML-DSA, we can take this, make MLDsa and MLDsaAlgorithm public, start to write tests, and wire up an implementation. We can also take this and clone+customize it for the other PQC algorithms.

It does not define all span-vs-array overloads for all spanified members, just one candidate per method group.

As the PQC experiment needs to make it further before we can commit to the shape, it is both starting without API Review, and pre-emptively applying the Experimental attribute.",2025-03-06 18:40:29+00:00,Jeremy Barton,1,fbb0f14b33394bc55f90de7c2b75c99ce1f9eea6,"Fix declared type of custom comparer for MaxBy and MinBy (#113944)

* Fix declared type of custom comparer for MaxBy and MinBy

Use the `TKey` output of the keySelector (not the input `TSource`) for the the custom `IComparer` since that's what the keySelector will emit.

Fixes #113878

This is a semi-**BREAKING CHANGE** but is justifiable in that the only code that could have worked before was when `TKey` and `TSource` were the same type (e.g. both `int` as in the test cases)... and that code will continue to compile correctly.

* Update to keep the old MinBy and MaxBy around as Obsolete

Ensures the binary and source compatibility in case anyone was using the broken overloads.

* PR Feedback: Fixed missing markdown escaping for < and >",12,1765,0,"seed in the skeleton of ml-dsa based on current prototypingthis seeds a lot of untested boilerplate code as non-public types in system.security.cryptography.when we start work on ml-dsa, we can take this, make mldsa and mldsaalgorithm public, start to write tests, and wire up an implementation. we can also take this and clone+customize it for the other pqc algorithms.it does not define all span-vs-array overloads for all spanified members, just one candidate per method group.as the pqc experiment needs to make it further before we can commit to the shape, it is both starting without api review, and pre-emptively applying the experimental attribute."
dotnet/runtime,9e7b302c93039126d2f22887bc80e29b926ec12d,"Generate `.comment` section for ELF executables (#113218)

This is the standard way to emit compiler version info on ELF. No standard way for other formats.",2025-03-06 21:18:48+00:00,Michal Strehovský,0,,,1,10,0,generate section for elf executables (issue_ref)this is the standard way to emit compiler version info on elf. no standard way for other formats.
dotnet/runtime,0f45fea69a043648b72c897adbd4c74f8d55a4d6,Pin SHAs for container images (#113185),2025-03-06 21:26:41+00:00,Rich Lander,0,,,1,26,26,pin shas for container images (issue_ref)
dotnet/runtime,94593b13cf6f653b2baceb626dbd91e78fb455f7,Delete `ObjectNodeSection.IsStandardSection` (#113217),2025-03-06 21:34:07+00:00,Michal Strehovský,0,,,2,0,20,delete (issue_ref)
dotnet/runtime,9e3776ebbdaa21fdfa2e887fec7c5b4d1fea7329,"Revert ""Set AppContext.BaseDirectory and the lookup path for AssemblyDirector…"" (#113211)

This reverts commit 7cfe5e3fa50b64facce76cc537ff8c78c8c8623b.",2025-03-06 21:36:31+00:00,Michal Strehovský,0,,,9,3,218,"revert ""set appcontext.basedirectory and the lookup path for assemblydirector…"" (issue_ref)this reverts commit 7cfe5e3fa50b64facce76cc537ff8c78c8c8623b."
dotnet/runtime,3258163f8e889febe06817e8828a929cf6815272,Add SymmetricAlgorithm.SetKey(ROSpan),2025-03-07 02:46:32+00:00,Jeremy Barton,0,,,28,630,77,add symmetricalgorithm.setkey(rospan)
dotnet/runtime,5a0ea7c73840f2b5acfc7fcee0af84e2c28e192c,"Better ARM intrinsics implementation for dn_simdhash (#113095)

* New ARM NEON implementation of find_first_matching_suffix_simd
* Restrict neon implementation to arm64 because arm32 neon doesn't have wide vector registers
* Cleanup simdhash arch header and remove redundant assert",2025-03-07 04:28:10+00:00,Katelyn Gadd,0,,,2,52,47,better arm intrinsics implementation for dn_simdhash (issue_ref)* new arm neon implementation of find_first_matching_suffix_simd* restrict neon implementation to arm64 because arm32 neon doesn't have wide vector registers* cleanup simdhash arch header and remove redundant assert
dotnet/runtime,81dff0439effb8dabb62421904cdcea8f26c8f0f,Add CreateChained to RateLimiter (#107230),2025-03-07 07:13:35+00:00,Emmanuel André,0,,,10,2089,807,add createchained to ratelimiter (issue_ref)
dotnet/runtime,7e5ca51841275b72e60dca8eed1b97bd72251180,[browser] rename WasmPerfTracing (#113222),2025-03-07 09:50:28+00:00,Pavel Savara,0,,,16,42,43,[browser] rename wasmperftracing (issue_ref)
dotnet/runtime,3161a2947b9551ea05b44d4e4365aaa2b6799648,"[browser][http] mute JS exceptions about network errors + HEAD verb (#113014)

Co-authored-by: campersau <buchholz.bastian@googlemail.com>
Co-authored-by: Larry Ewing <lewing@microsoft.com>
Co-authored-by: Alexander Köplinger <alex.koeplinger@outlook.com>",2025-03-07 16:51:53+00:00,Pavel Savara,0,,,3,162,36,[browser][http] mute js exceptions about network errors + head verb (issue_ref)
dotnet/runtime,8a9d492444f06df20fcc5dfdcf7a6395af18361f,"Bump rollup from 4.18.0 to 4.34.9 in /src/mono/browser/runtime (#113129)

Bumps [rollup](https://github.com/rollup/rollup) from 4.18.0 to 4.34.9.
- [Release notes](https://github.com/rollup/rollup/releases)
- [Changelog](https://github.com/rollup/rollup/blob/master/CHANGELOG.md)
- [Commits](https://github.com/rollup/rollup/compare/v4.18.0...v4.34.9)

---
updated-dependencies:
- dependency-name: rollup
  dependency-type: direct:development
...

Signed-off-by: dependabot[bot] <support@github.com>
Co-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>",2025-03-07 17:15:16+00:00,dependabot[bot],0,,,2,118,73,bump rollup from 4.18.0 to 4.34.9 in /src/mono/browser/runtime (issue_ref)bumps [rollup]( from 4.18.0 to 4.34.9.- [release notes](- [changelog](- [commits](---updated-dependencies:- dependency-name: rollup dependency-type: direct:development...
dotnet/runtime,7cf676fedb25d7d03f603f3f5d4e4ad0f1ba71a9,Bounds checks: make MergeEdgeAssertions more precise (#113233),2025-03-07 22:10:05+00:00,Egor Bogatov,0,,,2,88,103,bounds checks: make mergeedgeassertions more precise (issue_ref)
dotnet/runtime,496824c97b9cf072682dea1a789cac6ca1875692,Avoid `Unsafe.As` in `BitConverter` (#112616),2025-03-07 22:10:27+00:00,xtqqczze,1,3f240cafeeb5cdcdd77c678966cb2470ed441eda,"Fix BitConverter.ToUInt128 documentation inconsistency (#117365)

* Initial plan

* Fix BitConverter.ToUInt128 documentation - change ""four bytes"" to ""sixteen bytes""

Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>

* Fix all remaining BitConverter documentation ""four bytes"" inconsistencies

Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>
Co-authored-by: Stephen Toub <stoub@microsoft.com>",1,25,12,avoid in (issue_ref)
dotnet/runtime,3f404275a7b24c4d25bcbcffc7d1f5f4a4aeab5e,Fixup null annotations on ClaimsPrincipal,2025-03-08 00:08:45+00:00,Kevin Jones,0,,,3,27,19,fixup null annotations on claimsprincipal
dotnet/runtime,2ec50bd31322da4c261e541a3db209a38be1ca81,"JIT: Switch optOptimizeLayout to pre-layout optimization phase (#113224)

Part of #107749. This is part of my broader goal of phasing out fgReorderBlocks entirely, but there are a few transformations we may want to do right before block layout. In particular, I noticed in #113108 (comment) that some regressed benchmarks have loops with unconditional backedges; in the absence of better loop inversion, we might want to run our unconditional-to-conditional branch duplication optimization right before layout to improve branch behavior in loops. We can put such optimizations in this pre-layout phase.",2025-03-08 00:17:48+00:00,Aman Khalid,0,,,5,32,32,"jit: switch optoptimizelayout to pre-layout optimization phase (issue_ref)part of issue_ref. this is part of my broader goal of phasing out fgreorderblocks entirely, but there are a few transformations we may want to do right before block layout. in particular, i noticed in issue_ref (comment) that some regressed benchmarks have loops with unconditional backedges; in the absence of better loop inversion, we might want to run our unconditional-to-conditional branch duplication optimization right before layout to improve branch behavior in loops. we can put such optimizations in this pre-layout phase."
dotnet/runtime,7eb07dde40933cace91d57aae0a3e569fd042def,Remove use of --no-lock with Homebrew. (#113277),2025-03-08 01:49:40+00:00,Kevin Jones,0,,,3,3,8,remove use of --no-lock with homebrew. (issue_ref)
dotnet/runtime,7f000274572f96eea8083ae723dd81f634443fc4,[browser] Coalesce ifdef blocks (#113284),2025-03-08 15:46:02+00:00,Marc Brooks,0,,,1,0,3,[browser] coalesce ifdef blocks (issue_ref)
dotnet/runtime,84ffa0f02297a8380079cd4df4ee1801ea7cc7a2,"JIT: Support bitwise field insertions for return registers (#113178)

Based on the new `FIELD_LIST` support for returns this PR adds support for the
JIT to combine smaller fields via bitwise operations when returned, instead of
spilling these to stack.

win-x64 examples:
```csharp
static int? Test()
{
    return Environment.TickCount;
}
```

```diff
        call     System.Environment:get_TickCount():int
-       mov      dword ptr [rsp+0x24], eax
-       mov      byte  ptr [rsp+0x20], 1
-       mov      rax, qword ptr [rsp+0x20]
-						;; size=19 bbWeight=1 PerfScore 4.00
+       mov      eax, eax
+       shl      rax, 32
+       or       rax, 1
+						;; size=15 bbWeight=1 PerfScore 2.00
```
(the `mov eax, eax` is unnecessary, but not that simple to get rid of)

 ```csharp
static (int x, float y) Test(int x, float y)
{
    return (x, y);
}
```

```diff
-       mov      dword ptr [rsp], ecx
-       vmovss   dword ptr [rsp+0x04], xmm1
-       mov      rax, qword ptr [rsp]
+       vmovd    eax, xmm1
+       shl      rax, 32
+       mov      ecx, ecx
+       or       rax, rcx
 						;; size=13 bbWeight=1 PerfScore 3.00
```

An arm64 example:
```csharp
static Memory<int> ToMemory(int[] arr)
{
    return arr.AsMemory();
}
```

```diff
 G_M45070_IG01:  ;; offset=0x0000
-            stp     fp, lr, [sp, #-0x20]!
+            stp     fp, lr, [sp, #-0x10]!
             mov     fp, sp
-            str     xzr, [fp, #0x10]	// [V03 tmp2]
-						;; size=12 bbWeight=1 PerfScore 2.50
-G_M45070_IG02:  ;; offset=0x000C
+						;; size=8 bbWeight=1 PerfScore 1.50
+G_M45070_IG02:  ;; offset=0x0008
             cbz     x0, G_M45070_IG06
 						;; size=4 bbWeight=1 PerfScore 1.00
-G_M45070_IG03:  ;; offset=0x0010
-            str     x0, [fp, #0x10]	// [V07 tmp6]
-            str     wzr, [fp, #0x18]	// [V08 tmp7]
-            ldr     x0, [fp, #0x10]	// [V07 tmp6]
-            ldr     w0, [x0, #0x08]
-            str     w0, [fp, #0x1C]	// [V09 tmp8]
-						;; size=20 bbWeight=0.80 PerfScore 6.40
-G_M45070_IG04:  ;; offset=0x0024
-            ldp     x0, x1, [fp, #0x10]	// [V03 tmp2], [V03 tmp2+0x08]
-						;; size=4 bbWeight=1 PerfScore 3.00
-G_M45070_IG05:  ;; offset=0x0028
-            ldp     fp, lr, [sp], #0x20
+G_M45070_IG03:  ;; offset=0x000C
+            ldr     w1, [x0, #0x08]
+						;; size=4 bbWeight=0.80 PerfScore 2.40
+G_M45070_IG04:  ;; offset=0x0010
+            mov     w1, w1
+            mov     x2, xzr
+            orr     x1, x2, x1,  LSL #32
+						;; size=12 bbWeight=1 PerfScore 2.00
+G_M45070_IG05:  ;; offset=0x001C
+            ldp     fp, lr, [sp], #0x10
             ret     lr
 						;; size=8 bbWeight=1 PerfScore 2.00
-G_M45070_IG06:  ;; offset=0x0030
-            str     xzr, [fp, #0x10]	// [V07 tmp6]
-            str     xzr, [fp, #0x18]
+G_M45070_IG06:  ;; offset=0x0024
+            mov     x0, xzr
+            mov     w1, wzr
             b       G_M45070_IG04
-						;; size=12 bbWeight=0.20 PerfScore 0.60
+						;; size=12 bbWeight=0.20 PerfScore 0.40
```
(sneak peek -- this codegen requires some supplementary changes, and there's
additional opportunities here)

This is the return counterpart to #112740. That PR has a bunch of regressions
that makes it look like we need to support returns/call arguments first, before
we try to support parameters.

There's a few follow-ups here:
- Support for float->float insertions (when a float value needs to be returned
  as the 1st, 2nd, .... field of a SIMD register)
- Support for coalescing memory loads, particularly because the fields of the
  `FIELD_LIST` come from a promoted struct that ended up DNER. In those cases we
  should be able to recombine the fields back to a single large field, instead
  of combining them with bitwise operations.
- Support for constant folding the bitwise insertions. This requires some more
  constant folding support in lowering.
- The JIT has lots of (now outdated) restrictions based around multi-reg returns
  that get in the way. Lifting these should improve things considerably.",2025-03-08 19:47:21+00:00,Jakob Botsch Nielsen,1,ff6474ae489f70cd930335781780a269d102f5a6,"[RISC-V] Use zero register as argument for atomics (#112693)

* zero register in simple atomics

* Use zero register for CAS comparand

* Use zero register for CAS data node

* Fix unextended CAS comparand

* Address previous nit

* Remove unnecessary diff",8,259,160,"jit: support bitwise field insertions for return registers (issue_ref)based on the new support for returns this pr adds support for thejit to combine smaller fields via bitwise operations when returned, instead ofspilling these to stack.win-x64 examples:(the is unnecessary, but not that simple to get rid of) an arm64 example:(sneak peek -- this codegen requires some supplementary changes, and there'sadditional opportunities here)this is the return counterpart to issue_ref. that pr has a bunch of regressionsthat makes it look like we need to support returns/call arguments first, beforewe try to support parameters.there's a few follow-ups here:- support for float->float insertions (when a float value needs to be returned as the 1st, 2nd, .... field of a simd register)- support for coalescing memory loads, particularly because the fields of the come from a promoted struct that ended up dner. in those cases we should be able to recombine the fields back to a single large field, instead of combining them with bitwise operations.- support for constant folding the bitwise insertions. this requires some more constant folding support in lowering.- the jit has lots of (now outdated) restrictions based around multi-reg returns that get in the way. lifting these should improve things considerably."
dotnet/runtime,d17420560540e4184a78f431de8341f747068c4f,Update `.comment` section (#113255),2025-03-09 05:47:55+00:00,Michal Strehovský,0,,,1,1,1,update section (issue_ref)
dotnet/runtime,c8f32e59fc505f54f3ef12377eedfb711a18c450,"Update dependencies from https://github.com/dotnet/source-build-reference-packages build 20250306.1 (#113310)

Microsoft.SourceBuild.Intermediate.source-build-reference-packages
 From Version 10.0.612804 -> To Version 10.0.615601

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-03-10 06:42:24+00:00,dotnet-maestro[bot],0,,,1,2,2,update dependencies from build 20250306.1 (issue_ref)microsoft.sourcebuild.intermediate.source-build-reference-packages from version 10.0.612804 -> to version 10.0.615601
dotnet/runtime,2de7609e10dfd200461666d8155ceddf824cf5b5,"[RISC-V] PerfScore (#113011)

* PerfScore

* Use MajorOpcode in disasm",2025-03-10 10:16:43+00:00,Tomasz Sowiński,1,c66d444ec407b49baeeb8415c7c350c6bc89bd0f,"[RISC-V] Fix JitDisasmDiffable (#113161)

* Fix JitDisasmDiffable

* Match param name in header

* Meaningful assert msg",3,261,66,[risc-v] perfscore (issue_ref)* perfscore* use majoropcode in disasm
dotnet/runtime,3af3f94457e8dd61f87d173f69b3d41996d3c503,[RISC-V] Replace load local address with load global (#113125),2025-03-10 10:17:43+00:00,Tomasz Sowiński,0,,,1,23,49,[risc-v] replace load local address with load global (issue_ref)
dotnet/runtime,1c9d5e3da59d763f0d6ded3f80708005436f4bf1,"JIT: Introduce `LclVarDsc::lvIsMultiRegDest` (#113294)

With recent work to expand returned promoted locals into `FIELD_LIST`
the only ""whole references"" of promoted locals we should see is when
stored from a multi-reg node. This is the only knowledge the backend
should need for correctness purposes, so introduce a bit to track this
property, and switch the backend to check this instead.

The existing `lvIsMultiRegRet` is essentially this + whether the local
is returned. We should be able to remove this, but it is currently used
for some heuristics in old promotion, so keep it around for now.",2025-03-10 11:57:23+00:00,Jakob Botsch Nielsen,1,aa6866598175c1f5ee43f3e0789cdb2418d546df,"JIT: Avoid dual ""parameter"" assignments (#113324)

* Add some debug validation

* JIT: Avoid dual ""parameter"" assignments

Lowering was creating parameter register target assignments that mapped
a register from a parameter to another parameter. This would end up with
multiple parameter registers being assigned to the same register:

```
3 registers in register parameter interference graph
  r0
  r4
    <- r1
    <- r0
  r1

```

This would cause silent bad codegen depending on which register was
picked by register homing.

Fix #113321

* Add test

* Fix test

* Update src/tests/JIT/Regression/JitBlue/Runtime_113321/Runtime_113321.csproj",10,34,17,"jit: introduce (issue_ref)with recent work to expand returned promoted locals into the only ""whole references"" of promoted locals we should see is whenstored from a multi-reg node. this is the only knowledge the backendshould need for correctness purposes, so introduce a bit to track thisproperty, and switch the backend to check this instead.the existing is essentially this + whether the localis returned. we should be able to remove this, but it is currently usedfor some heuristics in old promotion, so keep it around for now."
dotnet/runtime,9d9bbcc450bdf7643c9c75faff6fae9a1276f832,Add test that AppContext.BaseDirectory is rooted (#113232),2025-03-10 13:58:41+00:00,Michal Strehovský,0,,,1,7,0,add test that appcontext.basedirectory is rooted (issue_ref)
dotnet/runtime,fbbe2c214f72fb430d16858de52885ae22a7d1ad,Support disassembling single file bundle for ILSpy (#112541),2025-03-10 15:16:13+00:00,Andrew Au,0,,,1,51,10,support disassembling single file bundle for ilspy (issue_ref)
dotnet/runtime,d737b226536cfa5e7a8db08fa3412cda9466aedc,OSDescription: Returns a user-friendly name instead of kernel info on Android & Apple platforms (#113041),2025-03-10 16:16:06+00:00,Makazeu,0,,,2,43,12,osdescription: returns a user-friendly name instead of kernel info on android & apple platforms (issue_ref)
dotnet/runtime,fc9d374779ca32039e4b11dd34107f22712513db,"Add API compat instructions to libraries building README (#113088)

* Add API compat instructions to libraries building README

* Update docs

* Update docs/workflow/building/libraries/README.md

---------

Co-authored-by: Viktor Hofer <viktor.hofer@microsoft.com>",2025-03-10 18:03:18+00:00,Stephen Toub,0,,,1,8,0,add api compat instructions to libraries building readme (issue_ref)* add api compat instructions to libraries building readme* update docs* update docs/workflow/building/libraries/readme.md---------
dotnet/runtime,c42cb27561c0c5fa37c1ff56cad44c7f5ab7dd10,"Update README.md (#113329)

* Update README.md

* Apply suggestions from code review

Co-authored-by: Stephen Toub <stoub@microsoft.com>

---------

Co-authored-by: Stephen Toub <stoub@microsoft.com>",2025-03-10 18:17:25+00:00,Viktor Hofer,0,,,1,3,3,update readme.md (issue_ref)* update readme.md* apply suggestions from code review
dotnet/runtime,aa5c785a7a6a74e26188a464ff5ed352f3f3e4a5,Publish all assets and allow more stages to run in parallel. (#113327),2025-03-10 18:18:37+00:00,Jeremy Koritzinsky,1,d15a82e479b5e6d2b98924f79d24a3b4736c82bd,"Fix blob and symbol package publishing (#113377)

* Fix metadata updating for symbol packages to ensure we still publish them

* Fix symbol package folders and publish VSSetup as shipping (as requested by upstack folks)

* Don't process symbol packages for the manifest packages. They're just duplicates.

* Fix publishing the asset manifest for source build (needed for SB intermediates)

* Fix input job for some artifacts",2,5,0,publish all assets and allow more stages to run in parallel. (issue_ref)
dotnet/runtime,a91d8206547fef0e3c06e0b9662dea87f24c92c5,"Skip inbuild projects in stage2 (built by stage1) (#113243)

* Skip inbuild projects in stage2 (built by stage1)

* Update comment",2025-03-10 18:46:44+00:00,Adeel Mujahid,0,,,1,6,3,skip inbuild projects in stage2 (built by stage1) (issue_ref)* skip inbuild projects in stage2 (built by stage1)* update comment
dotnet/runtime,cc803458ab4dabf020b462873be5bf56f1640b1e,[browser] Add application environment to boot config (#113164),2025-03-10 19:11:26+00:00,Marek Fišera,0,,,8,73,17,[browser] add application environment to boot config (issue_ref)
dotnet/runtime,017db9bb0c54343b12c2ca8283ee98f0b2402cde,"JIT: Add some more constant folding in lowering (#113301)

* JIT: Introduce `LclVarDsc::lvIsMultiRegDest`

With recent work to expand returned promoted locals into `FIELD_LIST`
the only ""whole references"" of promoted locals we should see is when
stored from a multi-reg node. This is the only knowledge the backend
should need for correctness purposes, so introduce a bit to track this
property, and switch the backend to check this instead.

The existing `lvIsMultiRegRet` is essentially this + whether the local
is returned. We should be able to remove this, but it is currently used
for some heuristics in old promotion, so keep it around for now.

* JIT: Add some more constant folding in lowering

Add folding for shifts and certain binops that are now getting produced
late due to returned `FIELD_LIST` nodes.

win-arm64 example:
```csharp
[MethodImpl(MethodImplOptions.NoInlining)]
static ValueTask<byte> Foo()
{
    return new ValueTask<byte>(123);
}
```

```diff
 G_M17084_IG02:  ;; offset=0x0008
             mov     x0, xzr
-            mov     w1, #1
-            mov     w2, wzr
-            mov     w3, #123
-            orr     w2, w2, w3,  LSL #16
-            orr     w1, w2, w1,  LSL #24
-						;; size=24 bbWeight=1 PerfScore 4.00
+            mov     w1, #0x17B0000
+						;; size=8 bbWeight=1 PerfScore 1.00
```

* Feedback",2025-03-10 23:07:43+00:00,Jakob Botsch Nielsen,1,e4da0a1ae94aa3bde65de06ff3a2e1e9f6ea0d43,JIT: Fix bad constant folding of (0 shift x) => x (#113493),2,93,9,"jit: add some more constant folding in lowering (issue_ref)* jit: introduce with recent work to expand returned promoted locals into the only ""whole references"" of promoted locals we should see is whenstored from a multi-reg node. this is the only knowledge the backendshould need for correctness purposes, so introduce a bit to track thisproperty, and switch the backend to check this instead.the existing is essentially this + whether the localis returned. we should be able to remove this, but it is currently usedfor some heuristics in old promotion, so keep it around for now.* jit: add some more constant folding in loweringadd folding for shifts and certain binops that are now getting producedlate due to returned nodes.win-arm64 example:* feedback"
dotnet/runtime,a73d19711b4753b6e0f47f2fa681876810afff37,Remove AreVNsEquivalent (#113304),2025-03-10 23:13:47+00:00,Egor Bogatov,0,,,3,3,138,remove arevnsequivalent (issue_ref)
dotnet/runtime,a49ed697037bad503e32daa23f4339ebfb8962ea,"Assertprop: Remove more useless assertions + cleanup (#113298)

* Clean up

* clean up

* cleanup",2025-03-10 23:14:08+00:00,Egor Bogatov,0,,,2,134,200,assertprop: remove more useless assertions + cleanup (issue_ref)* clean up* clean up* cleanup
dotnet/runtime,b593db556b3d300cb2e768ab88e20455170d4755,Make sure FEATURE_STANDALONE_GC is defined for the usual VM build (#113347),2025-03-11 04:36:44+00:00,Andrew Au,0,,,1,4,0,make sure feature_standalone_gc is defined for the usual vm build (issue_ref)
dotnet/runtime,aa6866598175c1f5ee43f3e0789cdb2418d546df,"JIT: Avoid dual ""parameter"" assignments (#113324)

* Add some debug validation

* JIT: Avoid dual ""parameter"" assignments

Lowering was creating parameter register target assignments that mapped
a register from a parameter to another parameter. This would end up with
multiple parameter registers being assigned to the same register:

```
3 registers in register parameter interference graph
  r0
  r4
    <- r1
    <- r0
  r1

```

This would cause silent bad codegen depending on which register was
picked by register homing.

Fix #113321

* Add test

* Fix test

* Update src/tests/JIT/Regression/JitBlue/Runtime_113321/Runtime_113321.csproj",2025-03-11 10:52:39+00:00,Jakob Botsch Nielsen,1,365dde344601cc5310493133cfc1ee7588be1c6f,"JIT/x86: Fix reported kill regs for varargs prologs (#113793)

* x86: Fix reported kill regs for varargs prologs",4,97,1,"jit: avoid dual ""parameter"" assignments (issue_ref)* add some debug validation* jit: avoid dual ""parameter"" assignmentslowering was creating parameter register target assignments that mappeda register from a parameter to another parameter. this would end up withmultiple parameter registers being assigned to the same register:this would cause silent bad codegen depending on which register waspicked by register homing.fix issue_ref* add test* fix test* update src/tests/jit/regression/jitblue/runtime_113321/runtime_113321.csproj"
dotnet/runtime,dda99ceed4765391976ff3ef905e5e81a2f40903,"[wasm] Bump chrome for testing - linux: 134.0.6998.35, windows: 134.0.6998.36 (#113297)

* Automated bump of chrome version

* Version update to match the published packages.

---------

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>
Co-authored-by: Ilona Tomkowicz <32700855+ilonatommy@users.noreply.github.com>",2025-03-11 12:28:12+00:00,github-actions[bot],0,,,1,5,5,"[wasm] bump chrome for testing - linux: 134.0.6998.35, windows: 134.0.6998.36 (issue_ref)* automated bump of chrome version* version update to match the published packages.---------"
dotnet/runtime,b9adf8d90c10d77ecc5db513e133f634536719dc,Reword HostAbortedException docs (#113336),2025-03-11 13:31:07+00:00,Eric StJohn,0,,,1,1,1,reword hostabortedexception docs (issue_ref)
dotnet/runtime,8fad985ec9cc418827ff0203d200b5fe54f91aca,"JIT: Run switch peeling only once (#113326)

Part of #107749. fgReorderBlocks runs switch peeling, which means we have both an early and a late pass of it; the former pass seems unnecessary. I've refactored our switch peeling pass to make it easier to incorporate into the switch recognition loop so that we only loop the block list once. I expected the refactor part of this PR to be no-diff, but it turns out we don't propagate the fgHasSwitch member of inlinee compilers to the root compiler, which pessimized the old switch peeling pass. These changes unlock switch peeling in a few more cases.",2025-03-11 15:00:25+00:00,Aman Khalid,0,,,4,122,143,"jit: run switch peeling only once (issue_ref)part of issue_ref. fgreorderblocks runs switch peeling, which means we have both an early and a late pass of it; the former pass seems unnecessary. i've refactored our switch peeling pass to make it easier to incorporate into the switch recognition loop so that we only loop the block list once. i expected the refactor part of this pr to be no-diff, but it turns out we don't propagate the fghasswitch member of inlinee compilers to the root compiler, which pessimized the old switch peeling pass. these changes unlock switch peeling in a few more cases."
dotnet/runtime,ac04fa31b17b14910c54924e583d80eae56970a9,"JIT: Remove `fgRelocateEHRegions` (#113330)

Part of #107749. Block layout will now ensure cold EH regions are moved out of the hot part of the method, so fgRelocateEHRegions is no longer necessary.",2025-03-11 17:55:06+00:00,Aman Khalid,1,2a0747c6a914050af20b739e39194437bf10967d,"JIT: Don't skip non-funclet try regions with handlers in `fgFindTryRegionEnds` (#113424)

Fixes #113417.",3,0,128,"jit: remove (issue_ref)part of issue_ref. block layout will now ensure cold eh regions are moved out of the hot part of the method, so fgrelocateehregions is no longer necessary."
dotnet/runtime,5ed086c8ae9d8c07c7c57dca468c41c0a1055e5d,"Add another set of debugging prints for stack overflow issue (#112284)

* Add another set of debugging prints for stack overflow issue

This adds more debugging output to help figure out the mysterious failure
of the stack overflow tests that occur regularly in the lab, but that
I am unable to repro locally.

* Another set of prints",2025-03-11 17:59:12+00:00,Jan Vorlicek,1,04aa3ef683c224a190545615ffdf612c88d6dece,"Initial CoreClr Android logcat log integration. (#113416)

Initial CoreClr Android logcat integration was removed from cf2aae6. This PR adds a unified approach re-routing runtime console logging though a central log API defined in native/minipal/log.h potential shared between components as well as runtimes.

This initial PR starts out defining a new header under native/minipal/log.h that includes a straightforward API to log formatted and raw output using different priority. It includes regular printf/vprintf style functions as well as low level none crt direct write capabilities, usable in high speed or async safe logging.

API closely mimics Mono's logging API defined in glib.h and the idea is to potentially rewire Mono's logging to use this new API going forward potentially adding more capabilities into native/minipal/log.h

Ability to log different log message using different priority is inherited from Mono and maps close to logcat priority levels, where different priorities can be filtered directly in logcat, creating virtual log streams. API includes a way to log directly to virtual standard error/output streams in case no specific need for fine grained priority-based logging exists. On platforms supporting stderr/stdout this will be a 1:1 mapping, but on platforms like logcat, stderr/stdout will be mapped to similar priority levels (error, info).

There is no buffering when calling logcat log functions, each log call will end up as a new log entry. Code that relies on ability to do multiple logging calls and expect to get a new line only when writing \n into the log buffer, won't behave as expected when using logcat. This PR adjust a couple of places where such assumptions are made, appending logging into a string buffer before passed to minipal_log_write API's. Logcat has an internal buffer limitation of 4068 bytes, buffers larger than that will be truncated. To mitigate this logging targeting Android includes a mechanism splitting up the bigger buffer into smaller chunks based on \n in log message, if there is no \n in bigger log message, message will still be logged in chunks, but each chunk ending up as a separate logcat message. Internal chunk size has been defined to 4000 bytes, making room for future internal logcat buffer reduction. Regular console logging enforces a buffer size limit as well on low level write calls, this limitation was directly inherited from previous implementation in src/coreclr/vm/util.cpp into native/minipal/log.c, if buffer exceeds chunk size, it will be split into multiple chunks where each chunk is written ""as is"" to underlying write function.

On Mono, formatted print style logcat implementation uses dynamic memory allocation + vsnprintf and low level __android_log_write. Current implementation in native/minipal/log.h adapt a similar schema but tries to first use a smaller stack buffer, inline with Androids internal implementation of __android_log_vprint use of 1024 bytes buffer. If log message is below 1024, implementation will match __android_log_vprint and use stack memory, but if exceeding 1024, implementation fallbacks to dynamic memory allocation, format message into dynamic memory buffer and then pass it through minipal_log_write to correctly handle max payload limitations as described above.

This initial PR adapts a smaller set of source files under src/coreclr to use the new logging API as a first step adaption. It makes sure the LOG macro as well as exception handling gets emitted through the new log API ending up in logcat. PR also adapts jit logging as well as diagnostic servers pause message, currently written directly to console.

This PR will be followed by an additional PR adapting more sources under src/coreclr/vm to use the new logging API enabling more log messages to end up in logcat on Android. Once the initial pass is done, adaption to new logging API will probably happen on a case-by-case basis.",3,42,3,"add another set of debugging prints for stack overflow issue (issue_ref)* add another set of debugging prints for stack overflow issuethis adds more debugging output to help figure out the mysterious failureof the stack overflow tests that occur regularly in the lab, but thati am unable to repro locally.* another set of prints"
dotnet/runtime,f5657119cac095a046c57b2488be6386c8c32a2b,JIT: Accelerate Vector.Dot for all base types (#111853),2025-03-11 20:57:22+00:00,Clinton Ingram,1,cf4f6be8a38fd264f39b550cce53a278bb8b29c5,Fix alignment of whitespace from ShuffleNative PR (#113745),3,57,102,jit: accelerate vector.dot for all base types (issue_ref)
dotnet/runtime,bf6cfefbdc2510270fa2fb285e6d0fbda9a3f192,Don't update side-effects in a statement that doesn't exist (#113351),2025-03-11 21:54:40+00:00,Egor Bogatov,0,,,3,46,2,don't update side-effects in a statement that doesn't exist (issue_ref)
dotnet/runtime,1b16860e628a7245b65c825bba2641496a135be5,"[main] Update dependencies from dotnet/arcade (#113056)

* Update dependencies from https://github.com/dotnet/arcade build 20250226.4

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.25125.2 -> To Version 10.0.0-beta.25126.4

* Update dependencies from https://github.com/dotnet/arcade build 20250307.1

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.25125.2 -> To Version 10.0.0-beta.25157.1

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Larry Ewing <lewing@microsoft.com>",2025-03-11 22:32:45+00:00,dotnet-maestro[bot],0,,,12,91,86,"[main] update dependencies from dotnet/arcade (issue_ref)* update dependencies from build 20250226.4microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.versiontools.tasks , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.25125.2 -> to version 10.0.0-beta.25126.4* update dependencies from build 20250307.1microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.versiontools.tasks , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.25125.2 -> to version 10.0.0-beta.25157.1---------"
dotnet/runtime,a29a02eb8d0e4f8f21130064bdd12800c458a900,"Correct Invariant Globalization docs (#113392)

* Update globalization-invariant-mode.md

Correct documentation on the expected behavior when using Invariant Globalization. See dotnet/runtime#113097

* Update docs/design/features/globalization-invariant-mode.md

---------

Co-authored-by: Tarek Mahmoud Sayed <10833894+tarekgh@users.noreply.github.com>",2025-03-11 23:05:45+00:00,Kenneth Cochran,0,,,1,1,1,correct invariant globalization docs (issue_ref)* update globalization-invariant-mode.mdcorrect documentation on the expected behavior when using invariant globalization. see dotnet/runtimeissue_ref* update docs/design/features/globalization-invariant-mode.md---------
dotnet/runtime,3da53bf569b7275ac4775115a19836dd1cdbf6ae,"[NativeAOT] Initialize COM before initializing FLS slot. (#113194)

* simplify detaching

* minor cleanups

* init COM + FLS in finalizer thread.

* remove managed finalizer+COM stuff

* Unify assert message with CoreCLR

* Treat failure to allocate FLS slot similar to OOM.

* Exit from finalizer thread if FLS or COM failed to initialize.

* Apply suggestions from code review

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-03-11 23:23:46+00:00,Vladimir Sadov,1,e3ffa2c3cf2001edf816dad7f4be1f9332a62ade,"Fix misaligned reads in NativeAOT code manager (#113637)

The fix replaces the native implementation of the native format decoder with the clone of the managed implementation.

Fixes #113609",19,96,161,[nativeaot] initialize com before initializing fls slot. (issue_ref)* simplify detaching* minor cleanups* init com + fls in finalizer thread.* remove managed finalizer+com stuff* unify assert message with coreclr* treat failure to allocate fls slot similar to oom.* exit from finalizer thread if fls or com failed to initialize.* apply suggestions from code review---------
dotnet/runtime,f50e71c240110a639722000311a537a20e680057,"Delete unused legacy hosting flags (#112975)

* Delete unused legacy hosting flags

* Delete unused AppDomain code

* Delete isTerminating arg",2025-03-12 01:51:19+00:00,Jan Kotas,1,37151aa041faa4170b8659df195b5aef8bced666,"Fix ThrowControlForThread on x86 funclet platforms (#113872)

* Fix ThrowControlForThread on x86 funclet platforms

* Update src/coreclr/vm/threadsuspend.cpp

* Fix header file too",14,24,407,delete unused legacy hosting flags (issue_ref)* delete unused legacy hosting flags* delete unused appdomain code* delete isterminating arg
dotnet/runtime,ff1383c722dc3f65e25f4978343a4179009edea2,"JIT: avoid fp divide by zero in profile synthesis (#113396)

This can trip up users that have enabled floating point exceptions.

While we don't generally support changing the exception modes we also
can easily avoid dividing by zero here.

Addresses #113369",2025-03-12 02:21:03+00:00,Andy Ayers,0,,,1,9,2,jit: avoid fp divide by zero in profile synthesis (issue_ref)this can trip up users that have enabled floating point exceptions.while we don't generally support changing the exception modes we alsocan easily avoid dividing by zero here.addresses issue_ref
dotnet/runtime,ded5f59e8de2b7e3fb5f11d1aa4b14ce6cf55e77,"JIT: fix arm64 issue around flags and neg with contained operand (#113391)

If `neg` has a contained operand (`mul`) it cannot set flags.

Fixes #113320",2025-03-12 02:21:38+00:00,Andy Ayers,1,12e176d26ee25066d3559ff11ae5207c11605071,Fix OperExceptions for SIMD Divide (#113394),3,50,1,jit: fix arm64 issue around flags and neg with contained operand (issue_ref)if has a contained operand () it cannot set flags.fixes issue_ref
dotnet/runtime,d15a82e479b5e6d2b98924f79d24a3b4736c82bd,"Fix blob and symbol package publishing (#113377)

* Fix metadata updating for symbol packages to ensure we still publish them

* Fix symbol package folders and publish VSSetup as shipping (as requested by upstack folks)

* Don't process symbol packages for the manifest packages. They're just duplicates.

* Fix publishing the asset manifest for source build (needed for SB intermediates)

* Fix input job for some artifacts",2025-03-12 04:14:43+00:00,Jeremy Koritzinsky,1,42bbfebfd80ff2a0a88aaf3976501845c5397279,"Don't set PreserveRepoOrigin (#113422)

This only works when artifacts have a repo origin specified.

Fixes the runtime official build",4,22,20,fix blob and symbol package publishing (issue_ref)* fix metadata updating for symbol packages to ensure we still publish them* fix symbol package folders and publish vssetup as shipping (as requested by upstack folks)* don't process symbol packages for the manifest packages. they're just duplicates.* fix publishing the asset manifest for source build (needed for sb intermediates)* fix input job for some artifacts
dotnet/runtime,890de13b9d38739f28ca6437ce89046830507cf8,"Add InlineArrayX types (#113403)

* Add InlineArrayX types

Closes https://github.com/dotnet/runtime/issues/111973. Implements the API as proposed.

* PR feedback",2025-03-12 11:17:34+00:00,Fred Silberberg,0,,,4,341,1,add inlinearrayx types (issue_ref)* add inlinearrayx typescloses implements the api as proposed.* pr feedback
dotnet/runtime,6cfbc7da6233f9e174a9e611cc8f7e02c40d01b7,"Enable `UseSizeOptimizedLinq` by default on native AOT (#113214)

The motivation is:

* This has been enabled by default on mobile platforms for several releases and it wasn't a source of issues
* It is easy to opt out of it. (That cannot be said about mobile platforms in the past that hardcoded it at repo build).
* Doesn't have measurable throughput impact on any ASP.NET scenarios we measure perf of.
* It is a meaningful size saving (seen 5+%).",2025-03-12 13:35:21+00:00,Michal Strehovský,1,9b091dc777f4e1f341eeaa1c3128374c0584f423,"Fix targets for using the NativeAOT runtime pack as the ""target ILC"" pack (#113902)",1,1,0,enable by default on native aot (issue_ref)the motivation is:* this has been enabled by default on mobile platforms for several releases and it wasn't a source of issues* it is easy to opt out of it. (that cannot be said about mobile platforms in the past that hardcoded it at repo build).* doesn't have measurable throughput impact on any asp.net scenarios we measure perf of.* it is a meaningful size saving (seen 5+%).
dotnet/runtime,82c916f423fdbb3bc7a2425a253f961363078f8b,Switch to Azure Linux queues (#112024),2025-03-12 14:45:29+00:00,Rich Lander,0,,,1,4,4,switch to azure linux queues (issue_ref)
dotnet/runtime,3eb245d857ff4f14e4144d46cad82cefd853e624,"Add the `CurrentUserOnly` and `CurrentSessionOnly` options for named `Mutex`, `Semaphore`, and `EventWaitHandle` (#112213)

- In `Mutex`, `Semaphore`, and `EventWaitHandle`, added overloads for methods with a `name` argument to also include a `NamedWaitHandleOptions options` argument. The `CurrentUserOnly` option indicates whether the object should be limited in access to the current user. The `CurrentSessionOnly` option indicates whether the object object is intended to be used only within the current session (an alternative to the name prefixes, such as `Global\`). The default value for `NamedWaitHandleOptions` has `CurrentUserOnly=true` and `CurrentSessionOnly=true`.
- On Unixes, named semaphores and events are not supported. Named mutexes are have a functional implementation on Unixes in CoreCLR. NativeAOT and Mono on Unixes use an incomplete/temporary implementation where named mutexes are just process-local mutexes stored in a dictionary keyed by the name and can't be used to synchronize between processes. This change only briefly extends the NativeAOT/Mono implementation to add another prefix to the name when `CurrentUserOnly=true`. Sharing the CoreCLR Unix named mutex implementation with NativeAOT/Mono is left to a separate change. Most of what is described below when `CurrentUserOnly=true` on Unixes refers to the CoreCLR implementation.
- The plan is to also deprecate the APIs with a `name` argument but without an `options` argument in a separate change
- API review: https://github.com/dotnet/runtime/issues/102682#issuecomment-2176700064

### Windows with `CurrentUserOnly=true`

When creating a named mutex, a security descriptor is created and assigned to the object.

- The owner and group are set to the current user
- The DACL has two ACEs:
  - One ACE allows the current user the relevant access rights
  - Another ACE allows the `BUILTIN\Administrators` group the `READ_CONTROL` access right to enable reading the security info for diagnostic purposes
- The SACL has a mandatory label ACE
  - The access policy prevents principals with an integrity level lower than the object from opening the object
  - The integrity level assigned to the object is the same as what would be assigned by the system by default
- When opening a named mutex, the owner and DACL are verified to see if they are as expected, and if not, a `WaitHandleCannotBeOpenedException` is thrown
- Access controls are set when creating an object and checked when opening an object. Once a handle to the object is obtained, typical synchronization operations may not do further access checks. It's up to the caller to be careful about how the handle to the object is passed around.

### Unixes with `CurrentUserOnly=true`

- Files relevant to named mutexes (shared memory and lock files) go under `/tmp/.dotnet-uidN/` where `N` is the effective user ID
  - `/tmp/` (or equivalent) was chosen mainly for the automatic cleanup, as the number of files can add up in cases where mutexes are not disposed, particularly when randomly generated names are used upon each invocation of a process. Due to the use of a global location `/tmp/` or equivalent, it would be possible for a user to deny access to the `.dotnet-uidN` directory of a different user if the directory hadn't been created yet. An alternative considered was to use the home directory and introduce some kind of periodic cleanup strategy, but there are also other tradeoffs.
- `/tmp/` or equivalent must either have the sticky bit, or it must be owned by the current user and without write access for any other user. Otherwise, an exception is thrown.
- Permissions of the `/tmp/.dotnet-uidN/` directory and files/directories under it are limited in access to the current user
- When opening a named mutex, the owner and permissions of relevant files/directories are verified to see if they are as expected, and if not, an exception is thrown
- Access controls are set when creating an object and checked when opening an object. Once a handle to the object is obtained, typical synchronization operations may not do further access checks. It's up to the caller to be careful about how the handle to the object is passed around.

### Namespaces

  - On Windows, there is no namespace for kernel objects for each user. `CurrentSessionOnly=true` is close, but it is possible for multiple users to be running code simultaneously in the same session. There is a global namespace, and a namespace per session. When `CurrentUserOnly=true`, callers may need to ensure that the name used is distinguished for different users.
  - On Unixes, a different directory tree is used when `CurrentUserOnly=true`, so each user has a separate namespace for objects, including for session-scoped and session-unscoped objects.",2025-03-12 16:11:02+00:00,Koundinya Veluri,1,fb6e68da4d0f3efed56f370b58f8d38f3cb045ac,"Add ERROR_NETNAME_DELETED to IsPathUnreachableError for Windows localhost removal (#121569)

Windows removed localhost support in recent updates, causing
`ERROR_NETNAME_DELETED` (0x40/64) when accessing UNC paths like
`\\LOCALHOST\share\path`. This triggers a `Debug.Assert` failure in
`FillAttributeInfo` because the error code isn't recognized as a path
unreachable condition.

### Changes

- **Interop.Errors.cs**: Added `ERROR_NETNAME_DELETED = 0x40` constant
- **FileSystem.Attributes.Windows.cs**: Added `ERROR_NETNAME_DELETED` to
`IsPathUnreachableError` pattern match

This aligns handling with other network path errors
(`ERROR_BAD_NETPATH`, `ERROR_BAD_NET_NAME`, etc.) already in the
unreachable path list.

### Context

```csharp
if (!IsPathUnreachableError(errorCode))
{
    Debug.Assert(errorCode == ERROR_ACCESS_DENIED || errorCode == ERROR_SHARING_VIOLATION || errorCode == ERROR_SEM_TIMEOUT,
        $""Unexpected error code getting attributes {errorCode} from path {path}"");
    // ...
}
```

Previously, `ERROR_NETNAME_DELETED` fell through to the assertion. Now
it's handled as unreachable.

Fixes #120380 (possibly same root cause)

<!-- START COPILOT CODING AGENT SUFFIX -->



<details>

<summary>Original prompt</summary>


----

*This section details on the original issue you should resolve*

<issue_title>System.IO.Tests fails with ""Unexpected error code getting
attributes 64 from path \\LOCALHOST""</issue_title>
<issue_description>## Build Information
Build:
https://dev.azure.com/dnceng-public/cbb18261-c48f-4abb-8651-8cdcb5474649/_build/results?buildId=1181840
Build error leg or test failing:
System.IO.FileSystem.Tests.WorkItemExecution
Pull request: https://github.com/dotnet/runtime/pull/119878
<!-- Error message template  -->
## Error Message

Fill the error message using [step by step known issues
guidance](https://github.com/dotnet/arcade/blob/main/Documentation/Projects/Build%20Analysis/KnownIssueJsonStepByStep.md).

<!-- Use ErrorMessage for String.Contains matches. Use ErrorPattern for
regex matches (single line/no backtracking). Set BuildRetry to `true` to
retry builds with this error. Set ExcludeConsoleLog to `true` to skip
helix logs analysis. -->

```json
{
  ""ErrorMessage"": ""Unexpected error code getting attributes 64 from path \\\\LOCALHOST"",
  ""ErrorPattern"": """",
  ""BuildRetry"": false,
  ""ExcludeConsoleLog"": false
}
```


<!-- Known issue validation start -->
 ### Known issue validation
**Build: :mag_right:**
https://dev.azure.com/dnceng-public/public/_build/results?buildId=1181840
**Error message validated:** `[Unexpected error code getting attributes
64 from path \LOCALHOST`]
**Result validation:** :x: Known issue did not match with the provided
build.
**Validation performed at:** 10/22/2025 2:11:40 PM UTC
<!-- Known issue validation end -->
<!-- Known issue validation start -->
 ### Known issue validation
**Build: :mag_right:**
https://dev.azure.com/dnceng-public/public/_build/results?buildId=1181840
**Error message validated:** `[Unexpected error code getting attributes
64 from path \\LOCALHOST`]
**Result validation:** :white_check_mark: Known issue matched with the
provided build.
**Validation performed at:** 10/22/2025 2:17:17 PM UTC
<!-- Known issue validation end -->
<!--Known issue error report start -->

### Report

|Build|Definition|Test|Pull Request|
|---|---|---|---|

|[1200811](https://dev.azure.com/dnceng-public/public/_build/results?buildId=1200811)|dotnet/runtime|[System.IO.FileSystem.Tests.WorkItemExecution](https://dev.azure.com/dnceng-public/public/_build/results?buildId=1200811&view=ms.vss-test-web.build-test-results-tab&runId=33235252&resultId=172656)||

|[1200758](https://dev.azure.com/dnceng-public/public/_build/results?buildId=1200758)|dotnet/runtime|[System.IO.FileSystem.Tests.WorkItemExecution](https://dev.azure.com/dnceng-public/public/_build/results?buildId=1200758&view=ms.vss-test-web.build-test-results-tab&runId=33234124&resultId=173264)|dotnet/runtime#121524|

|[1200347](https://dev.azure.com/dnceng-public/public/_build/results?buildId=1200347)|dotnet/runtime|[System.IO.FileSystem.Tests.WorkItemExecution](https://dev.azure.com/dnceng-public/public/_build/results?buildId=1200347&view=ms.vss-test-web.build-test-results-tab&runId=33216846&resultId=173285)|dotnet/runtime#121524|

|[1200222](https://dev.azure.com/dnceng-public/public/_build/results?buildId=1200222)|dotnet/runtime|[System.IO.FileSystem.Tests.WorkItemExecution](https://dev.azure.com/dnceng-public/public/_build/results?buildId=1200222&view=ms.vss-test-web.build-test-results-tab&runId=33212640&resultId=172656)||

|[1199457](https://dev.azure.com/dnceng-public/public/_build/results?buildId=1199457)|dotnet/runtime|[System.IO.FileSystem.Tests.WorkItemExecution](https://dev.azure.com/dnceng-public/public/_build/results?buildId=1199457&view=ms.vss-test-web.build-test-results-tab&runId=33191298&resultId=172173)||

|[1199150](https://dev.azure.com/dnceng-public/public/_build/results?buildId=1199150)|dotnet/runtime|[System.IO.FileSystem.Tests.WorkItemExecution](https://dev.azure.com/dnceng-public/public/_build/results?buildId=1199150&view=ms.vss-test-web.build-test-results-tab&runId=33185540&resultId=172656)||

|[1198822](https://dev.azure.com/dnceng-public/public/_build/results?buildId=1198822)|dotnet/runtime|[System.IO.FileSystem.Tests.WorkItemExecution](https://dev.azure.com/dnceng-public/public/_build/results?buildId=1198822&view=ms.vss-test-web.build-test-results-tab&runId=33177786&resultId=172656)||

|[1197942](https://dev.azure.com/dnceng-public/public/_build/results?buildId=1197942)|dotnet/runtime|[System.IO.FileSystem.Tests.WorkItemExecution](https://dev.azure.com/dnceng-public/public/_build/results?buildId=1197942&view=ms.vss-test-web.build-test-results-tab&runId=33151894&resultId=173290)||

|[1197801](https://dev.azure.com/dnceng-public/public/_build/results?buildId=1197801)|dotnet/runtime|[System.IO.FileSystem.Tests.WorkItemExecution](https://dev.azure.com/dnceng-public/public/_build/results?buildId=1197801&view=ms.vss-test-web.build-test-results-tab&runId=33149392&resultId=170860)||

|[1197409](https://dev.azure.com/dnceng-public/public/_build/results?buildId=1197409)|dotnet/runtime|[System.IO.FileSys...

</details>

- Fixes dotnet/runtime#120974

<!-- START COPILOT CODING AGENT TIPS -->
---

💬 We'd love your input! Share your thoughts on Copilot coding agent in
our [2 minute survey](https://gh.io/copilot-coding-agent-survey).

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: jkotas <6668460+jkotas@users.noreply.github.com>",39,3154,638,"add the and options for named , , and (issue_ref)- in , , and , added overloads for methods with a argument to also include a argument. the option indicates whether the object should be limited in access to the current user. the option indicates whether the object object is intended to be used only within the current session (an alternative to the name prefixes, such as ). the default value for has and .- on unixes, named semaphores and events are not supported. named mutexes are have a functional implementation on unixes in coreclr. nativeaot and mono on unixes use an incomplete/temporary implementation where named mutexes are just process-local mutexes stored in a dictionary keyed by the name and can't be used to synchronize between processes. this change only briefly extends the nativeaot/mono implementation to add another prefix to the name when . sharing the coreclr unix named mutex implementation with nativeaot/mono is left to a separate change. most of what is described below when on unixes refers to the coreclr implementation.- the plan is to also deprecate the apis with a argument but without an argument in a separate change- api review: #issuecomment-2176700064### windows with when creating a named mutex, a security descriptor is created and assigned to the object.- the owner and group are set to the current user- the dacl has two aces: - one ace allows the current user the relevant access rights - another ace allows the group the access right to enable reading the security info for diagnostic purposes- the sacl has a mandatory label ace - the access policy prevents principals with an integrity level lower than the object from opening the object - the integrity level assigned to the object is the same as what would be assigned by the system by default- when opening a named mutex, the owner and dacl are verified to see if they are as expected, and if not, a is thrown- access controls are set when creating an object and checked when opening an object. once a handle to the object is obtained, typical synchronization operations may not do further access checks. it's up to the caller to be careful about how the handle to the object is passed around.### unixes with - files relevant to named mutexes (shared memory and lock files) go under where is the effective user id - (or equivalent) was chosen mainly for the automatic cleanup, as the number of files can add up in cases where mutexes are not disposed, particularly when randomly generated names are used upon each invocation of a process. due to the use of a global location or equivalent, it would be possible for a user to deny access to the directory of a different user if the directory hadn't been created yet. an alternative considered was to use the home directory and introduce some kind of periodic cleanup strategy, but there are also other tradeoffs.- or equivalent must either have the sticky bit, or it must be owned by the current user and without write access for any other user. otherwise, an exception is thrown.- permissions of the directory and files/directories under it are limited in access to the current user- when opening a named mutex, the owner and permissions of relevant files/directories are verified to see if they are as expected, and if not, an exception is thrown- access controls are set when creating an object and checked when opening an object. once a handle to the object is obtained, typical synchronization operations may not do further access checks. it's up to the caller to be careful about how the handle to the object is passed around.### namespaces - on windows, there is no namespace for kernel objects for each user. is close, but it is possible for multiple users to be running code simultaneously in the same session. there is a global namespace, and a namespace per session. when , callers may need to ensure that the name used is distinguished for different users. - on unixes, a different directory tree is used when , so each user has a separate namespace for objects, including for session-scoped and session-unscoped objects."
dotnet/runtime,2b394aec0a6da4fa57821103d72afbb6b1620a58,[browser] profiler setup and env variables (#113339),2025-03-12 16:16:57+00:00,Pavel Savara,0,,,23,236,88,[browser] profiler setup and env variables (issue_ref)
dotnet/runtime,43236f86acc7c2d1027a3023deb12d7ab396186c,Small TP improvement in assertprop (#113360),2025-03-12 19:34:06+00:00,Egor Bogatov,0,,,1,29,58,small tp improvement in assertprop (issue_ref)
dotnet/runtime,5ff417fd7fbff9bbd3c66f35a1721ddaa37840eb,"Allow null key parameters for public keys and certificates

If an X.509 certificate or PublicKey contained a subject public key info that lacked key parameters entirely, this would be represented as an empty array. A number of places incorrectly handled empty key parameters, and assumed key parameters would always be supplied. This changes the key parameters to be nullable, and return null instead. The places that were incorrectly handling missing parameters now correctly handle ""null"".",2025-03-12 23:32:22+00:00,Kevin Jones,1,c32f8d014854c006a8c35a5a4ab4839cfb053ccc,"Fix non-portable build for < OpenSSL 3.4.

The build was checking to see if HAVE_OPENSSL_EVP_PKEY_SIGN_MESSAGE_INIT was defined, however because we use cmakedefine01 in the build, it is always defined. We care about the value of the define, not if it is defined or not.",29,278,95,"allow null key parameters for public keys and certificatesif an x.509 certificate or publickey contained a subject public key info that lacked key parameters entirely, this would be represented as an empty array. a number of places incorrectly handled empty key parameters, and assumed key parameters would always be supplied. this changes the key parameters to be nullable, and return null instead. the places that were incorrectly handling missing parameters now correctly handle ""null""."
dotnet/runtime,ee74dc90ce71168a92b669c36fa197c50a1fe08d,"ISimdVector vector intrinsics fixes (#113288)

* Add SN Vector interpreter intrinsics

* Fix explicit implict implementation filtering

* try something else

* split up the prefix parsing

* remove superfluous check

* fix namespace in importer

* Fixup coreclr checks too

* Fix the formatting

* Fix typo

* Copilot... sigh

* reduce repeat compares

* On arm don't try to create an sri Vector<T>",2025-03-13 14:59:33+00:00,Larry Ewing,1,55863073ee388e4d172aa64e0045e0ed3be79f20,"[wasm][aot] Fix op_OnesComplement on wasm and enable ceil/floor (#115151)

Fix the Wasm AOT implementations of  Vector128 ~/Ceil/Floor",5,84,65,isimdvector vector intrinsics fixes (issue_ref)* add sn vector interpreter intrinsics* fix explicit implict implementation filtering* try something else* split up the prefix parsing* remove superfluous check* fix namespace in importer* fixup coreclr checks too* fix the formatting* fix typo* copilot... sigh* reduce repeat compares* on arm don't try to create an sri vector<t>
dotnet/runtime,721686ed840e8d2609b1f7e32e7f1d6419a5b655,"Remove FileExtensionSignInfos for .deb, .rpm, & .pkg (#113451)",2025-03-13 15:41:26+00:00,Ella Hathaway,0,,,1,0,10,"remove fileextensionsigninfos for .deb, .rpm, & .pkg (issue_ref)"
dotnet/runtime,e1e7a87dace609b799aea82f398f9620deb3d907,Add SN Vector intrinsics (#113456),2025-03-13 15:57:23+00:00,Larry Ewing,0,,,1,9,2,add sn vector intrinsics (issue_ref)
dotnet/runtime,9c9178f37155eae923db9b686538297bd3afcfc8,"run stress tests nightly against staging branches (#113432)

This PR is the first step to address #113372:
- `always: true` should ensure that the nightly run will happen even if there were no recent commits
- The runs should happen against staging branches to make sure changes impact stress runs early",2025-03-13 15:58:14+00:00,Anton Firszov,1,4c301c701aefd80952ab70747c801b899f857cd8,"[HTTP] Stress fix for docker compose (#119274)

* Wind down docker compose between individual runs in HTTP stress

* Experiment 2",2,4,4,run stress tests nightly against staging branches (issue_ref)this pr is the first step to address issue_ref:- should ensure that the nightly run will happen even if there were no recent commits- the runs should happen against staging branches to make sure changes impact stress runs early
dotnet/runtime,035ee5cfe3e3bd1d5039cb82f580cef30a335c3b,"Refactor `external_assembly_probe` to be separate from single-file bundle probing (#113356)

External assembly probing is not inherently tied to the idea of a bundle. This separates having an external assembly probe callback from the bundle / bundle file location idea and refactors the hooks into assembly loading into an AssemblyProbeExtension helper that handles both bundle and external assembly probing.",2025-03-13 17:33:13+00:00,Elinor Fung,0,,,21,264,141,refactor to be separate from single-file bundle probing (issue_ref)external assembly probing is not inherently tied to the idea of a bundle. this separates having an external assembly probe callback from the bundle / bundle file location idea and refactors the hooks into assembly loading into an assemblyprobeextension helper that handles both bundle and external assembly probing.
dotnet/runtime,cc0129876e6d88e79232536553ebc93b59a950aa,"Include xmmintrin.h early on x86 as well (#113279)

* Include xmmintrin.h early on X86 as well

* Don't extern ""C"" main",2025-03-13 17:48:01+00:00,Jeremy Koritzinsky,0,,,2,2,2,"include xmmintrin.h early on x86 as well (issue_ref)* include xmmintrin.h early on x86 as well* don't extern ""c"" main"
dotnet/runtime,c3d95b4305e17ebe8dbda8efde3144a1c693499c,"Revert ""Pin SHAs for container images (#113185)"" (#113248)

This reverts commit 0f45fea69a043648b72c897adbd4c74f8d55a4d6.",2025-03-13 23:49:13+00:00,Rich Lander,0,,,1,26,26,"revert ""pin shas for container images (issue_ref)"" (issue_ref)this reverts commit 0f45fea69a043648b72c897adbd4c74f8d55a4d6."
dotnet/runtime,b29cdbfb8ce1a614f078a904d41b3eff1719278f,Extract libunwind from llvm 20.1.0 archive,2025-03-14 01:54:04+00:00,Adeel,0,,,44,838,852,extract libunwind from llvm 20.1.0 archive
dotnet/runtime,d03d1ba7835fdf9e2a6bb537d49fb5ff6584697b,Apply patches,2025-03-14 02:21:43+00:00,Adeel,0,,,13,571,237,apply patches
dotnet/runtime,a9b700a1f6f3f524595393433bda6115b39afd71,Disable some named synchronization object tests on Windows Server Core (#113482),2025-03-14 05:26:49+00:00,Koundinya Veluri,1,a131d0b6cc15c177b99ad5e49d3b0aadb89adf70,"Cleanup named mutex tests (#117128)

Deduplicate issues for missing cross-process named mutex support on NativeAOT and Mono

Closes #70127",3,3,3,disable some named synchronization object tests on windows server core (issue_ref)
dotnet/runtime,4f2bcbc7e8ece299be6e8dfa3961bca817ecfc0b,"Fix obsoletion message for SslStream properties (#113375)

* Fix SYSLIB0058 obsoletion message.

* Revert unwanted whitespace changes",2025-03-14 12:14:27+00:00,Radek Zikmund,1,09e6ddd5aae72dda15200e0d7dc1a9c25ad0bc47,"[API Proposal]: Implement IParsable<TSelf> et cetera on IPEndPoint (#118095)

* [API Proposal]: Implement IParsable<TSelf> et cetera on IPEndPoint

* fix remarks

* fix xunit analyzer error

* fix remarks 3

* add comments

* Update src/libraries/System.Net.Primitives/src/System/Net/IPEndPoint.cs

---------

Co-authored-by: Marie Píchová <11718369+ManickaP@users.noreply.github.com>",5,17,17,fix obsoletion message for sslstream properties (issue_ref)* fix syslib0058 obsoletion message.* revert unwanted whitespace changes
dotnet/runtime,5ec0661c63d1804054825355009cba71f53d69ef,"Add runtime-nativeaot-outerloop to build analysis (#113520)

We don't collect stats on these pipelines so the hit count on issues like https://github.com/dotnet/runtime/issues/29383 don't get updated with hits in nativeaot runs.

At this point `runtime-nativeaot-outerloop` is more reliable than e.g. `runtime-libraries-coreclr outerloop` that hasn't seen a successful run in years.",2025-03-14 13:01:13+00:00,Michal Strehovský,0,,,1,4,0,add runtime-nativeaot-outerloop to build analysis (issue_ref)we don't collect stats on these pipelines so the hit count on issues like don't get updated with hits in nativeaot runs.at this point is more reliable than e.g. that hasn't seen a successful run in years.
dotnet/runtime,deee462fc8421a7e18b8916eb5a5eacb9d09169d,Fix issues in GetKeyedService() and GetKeyedServices() with AnyKey (#113137),2025-03-14 14:30:29+00:00,Steve Harter,1,7d247ddb1bb4b9114fda05d4b9958a8eebc29363,Improve error message when GetRequiredKeyedService() fails (#114796),5,230,30,fix issues in getkeyedservice() and getkeyedservices() with anykey (issue_ref)
dotnet/runtime,b5a85e183b5695902f75ce47de1dfc8be3377287,Perform additional checks in `PEHeaders`. (#113048),2025-03-14 14:38:53+00:00,Theodore Tsirpanis,0,,,3,45,28,perform additional checks in . (issue_ref)
dotnet/runtime,b5bc93bb7c0a8ca5570e387333d4d2dec2e85579,"new perf-build pipeline added (#113221)

* new perf-build pipeline added

* naming unified + buildConfiguration renamed to buildType as buildConfiguration is already a well known term that refers to whether it is compiled in Release or Debug

* testing branch reference removed

---------

Co-authored-by: Jakub Dražka <kubadrazka@microsoft.com>",2025-03-14 16:04:56+00:00,KubaD,1,212c79dff712ea321bfd0e241dae78fdaafdb317,"dotnet-runtime-perf-build pipeline triggering fix (#113545)

* private jobs are now run for automatically triggered individualCI build reason

* Display name of runPrivateJobs updated so it is more descriptive

---------

Co-authored-by: Jakub Dražka <kubadrazka@microsoft.com>",5,243,7,new perf-build pipeline added (issue_ref)* new perf-build pipeline added* naming unified + buildconfiguration renamed to buildtype as buildconfiguration is already a well known term that refers to whether it is compiled in release or debug* testing branch reference removed---------
dotnet/runtime,273dbb9fc5b3e8ada0471c912bc5a37b003b4416,Host: fix Cancellation not aborting Start in some cases (#113442),2025-03-14 16:20:44+00:00,mus65,1,72d1f3da4db31cca75ec1c6109cfc08f2bab7fa4,"Make BackgroundService run ExecuteAsync as task (#116283)

* Make BackgroundService run ExecuteAsync as task

* Simplify BackGroundService.StartAsync, fix tests

* Never return ExecuteAsync task from StartAsync

It's possible the ExecuteAsync task completes in the time between it was
started and StartAsync returns.  If so, we were returning it's task.
This leads to non-deterministic error behavior of the StartAsync API as
well as inconsistently honoring `BackgroundServiceExceptionBehavior`
based on this race.

Instead always return a completed task.

* Address feedback

* Address feedback

* Expose cancellation async

* Update src/libraries/Microsoft.Extensions.Hosting.Abstractions/src/BackgroundService.cs

Co-authored-by: Stephen Toub <stoub@microsoft.com>

---------

Co-authored-by: Stephen Toub <stoub@microsoft.com>",2,32,0,host: fix cancellation not aborting start in some cases (issue_ref)
dotnet/runtime,528dc0f2bb82669b4d555e2b5253211c204bd131,"Clear diagnostic headers on request reuse (#113342)

As noted in https://github.com/dotnet/runtime/issues/86094#issuecomment-1553131803, `DiagnosticsHandler` does not clear manually configured diagnostics headers on a request to avoid interfering with existing user logic. Because of this, if a request is being reused (eg. in Polly retries), `DiagnosticsHandler` will produce incorrect traces because it reuses the trace state of the first request span for subsequent sends.

However, there is an existing escape mechnism to this rule: in case we detect a redirect we will clear the headers. The presence of redirections is indicated by a flag in `HttpRequestMessage`.

This PR repurposes the mentioned flag to make sure that headers are also cleared when a request is being reused in a user-supplied handler. This is done by moving the location of flag flipping from `RedirectHandler` to `DiagnosticsHandler` while ensuring that user-defined headers are not cleared at the first send attempt.",2025-03-14 17:35:49+00:00,Anton Firszov,1,04330b6a406070d47a3cfc35826cf613c6947140,"Disable SendAsync_ReuseRequestInHandler_ResetsHeadersForEachReuse on browser (#113543)

Fixes #113580",4,81,8,"clear diagnostic headers on request reuse (issue_ref)as noted in #issuecomment-1553131803, does not clear manually configured diagnostics headers on a request to avoid interfering with existing user logic. because of this, if a request is being reused (eg. in polly retries), will produce incorrect traces because it reuses the trace state of the first request span for subsequent sends.however, there is an existing escape mechnism to this rule: in case we detect a redirect we will clear the headers. the presence of redirections is indicated by a flag in .this pr repurposes the mentioned flag to make sure that headers are also cleared when a request is being reused in a user-supplied handler. this is done by moving the location of flag flipping from to while ensuring that user-defined headers are not cleared at the first send attempt."
dotnet/runtime,6b264e85ea20db2ab7a895073e9595896cb6edb1,"Update to Ubuntu 25.04 (#113405)

* Update to Ubuntu 25.04

* Update the IDNA test data to Unicode 16

* Fix failing system net test

---------

Co-authored-by: Tarek Mahmoud Sayed <tarekms@microsoft.com>",2025-03-14 17:53:09+00:00,Rich Lander,1,5e48524725e71d61938b520c5ce9c4b8c7ab80e3,"Fix Idn failing tests (#115018)

* Fix Idn failing tests

* Minor fix",11,6716,9,update to ubuntu 25.04 (issue_ref)* update to ubuntu 25.04* update the idna test data to unicode 16* fix failing system net test---------
dotnet/runtime,520feeb22db923fafca90b571d57b592dfd14022,"Add trim-safe ValidationContext constructor (#113426)

* Add trim-safe ValidationContext constructor

* Avoid calling into trim-unfriendly constructors

* Update options generator and RUC messages

* Update RUC attributes in ref

* Update netfx baselines

* Bring back unformatted baseline",2025-03-14 18:01:49+00:00,Safia Abdalla,0,,,17,788,10,add trim-safe validationcontext constructor (issue_ref)* add trim-safe validationcontext constructor* avoid calling into trim-unfriendly constructors* update options generator and ruc messages* update ruc attributes in ref* update netfx baselines* bring back unformatted baseline
dotnet/runtime,229f6accdff18371f7d4b9b7f8b5dfa2ec4c2588,"JIT: introduce durable EH region ID (#113497)

Give each EH clause a permanent ID unique to that clause. Use this
to revise how we model GT_END_LFIN's nesting depth -- the node now
refers to a region ID, and we use that plus a lookup table built
during `FinalizeEH` to figure out the nesting depth.

Contributes to #108900.",2025-03-14 19:45:04+00:00,Andy Ayers,0,,,11,107,37,"jit: introduce durable eh region id (issue_ref)give each eh clause a permanent id unique to that clause. use thisto revise how we model gt_end_lfin's nesting depth -- the node nowrefers to a region id, and we use that plus a lookup table builtduring to figure out the nesting depth.contributes to issue_ref."
dotnet/runtime,b9beefa9abcd22f2244058a807cd6348c7ce6594,Update llvm-libunwind-version.txt,2025-03-14 20:08:18+00:00,Adeel,0,,,1,3,4,update llvm-libunwind-version.txt
dotnet/runtime,7bffa54a5b90385b5302e78661df6e747b27dedf,Implement software write watch for GC heap feature for arm32. (#113017),2025-03-14 21:02:06+00:00,Mikhail Kurinnoi,1,86701f60ea4b04338c5bbf93970b10193e8826f4,"[wasm] initial build of coreclr.runtime (#113429)

* First round of changes to build on wasm

* More changes to build on wasm

* Next round of changes

It builds now

* Fix debug build

* Fix paste typo

* Feedback

* Feedback

It is not needed anymore

* Feedback

This is not needed anymore as FEATURE_METADATA_UPDATER is now disabled on wasm

* Feedback

UMEntryThunkCode was removed from main recently

* Feedback

Disable FEATURE_VIRTUAL_STUB_DISPATCH and enable FEATURE_CACHED_INTERFACE_DISPATCH

* Feedback

Remove old host changes

* Build runtime on CI

* Inline few functions in header files

* Feedback

Forgot to remove this as well

* Add missing file

* Feedback

Add assert to Thread::VirtualUnwindCallFrame

* Remove unwanted change

* Remove unwanted change",4,69,5,implement software write watch for gc heap feature for arm32. (issue_ref)
dotnet/runtime,f059761a21212b578fd0940a7e3c8150188e176c,"JIT: Remove `fgReorderBlocks` (#113335)

Part of #107749.",2025-03-14 21:46:36+00:00,Aman Khalid,1,544cf0ccbc744015001933658c04f4bf364abb07,"JIT: fix issue in cloning loops with trys in handlers (#113586)

Loop cloning with EH had a bug when:
* the loop contained a try T0 that was within a handler H1
* the associated try T1 was also within the loop
* the entire loop was within another try T2

Here T0's containing try is T2, and its enclosing try index was properly
adjusted when the EH table expands as part of cloning. We were doing another
index adjustment later which lead to an out of bounds index.

Also cleaned up the code that detects which try regions need cloning as in the
above we only need to consider T1. When we go to clone it we also will clone H1
 and hence T2.

Also fixed/added some more dumping, and some new test cases.

This fix addresses a problem that came up stress testing #112998. Since the
underlying bug does not require inlining to create the EH setup above,
I am fixing it separately.",7,32,1206,jit: remove (issue_ref)part of issue_ref.
dotnet/runtime,17d6d52193c83e1d188ba81553a4e15451c8866d,"Tensor.Slice No Longer Copies (#113166)

* Tensor Slice No Longer Copies

* updates from pr comments",2025-03-14 22:42:25+00:00,Michael Sharp,1,7a4839bed8d3581a363c1d2e050d8e1eec7ae2f5,"Tensor<T> - Fixed missing memory offset from ReadOnlyTensorSpan (#113618)

* fixed missing memory offset

* comments from pr

* more offset testing

* fixed new offset check",3,78,41,tensor.slice no longer copies (issue_ref)* tensor slice no longer copies* updates from pr comments
dotnet/runtime,a20555176966c83a39e305c850975fecb9323cb4,Make naot's lastDwarfRegNum constexpr,2025-03-15 02:26:19+00:00,Adeel,0,,,1,6,6,make naot's lastdwarfregnum constexpr
dotnet/runtime,2a285183279c03aed4546d9ad8626131e4b0b4e0,"[main] Update dependencies from dotnet/xharness (#113309)

* Update dependencies from https://github.com/dotnet/xharness build 20250302.1

Microsoft.DotNet.XHarness.CLI , Microsoft.DotNet.XHarness.TestRunners.Common , Microsoft.DotNet.XHarness.TestRunners.Xunit
 From Version 10.0.0-prerelease.25103.1 -> To Version 10.0.0-prerelease.25152.1

* Update dependencies from https://github.com/dotnet/xharness build 20250314.1

Microsoft.DotNet.XHarness.CLI , Microsoft.DotNet.XHarness.TestRunners.Common , Microsoft.DotNet.XHarness.TestRunners.Xunit
 From Version 10.0.0-prerelease.25103.1 -> To Version 10.0.0-prerelease.25164.1

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-03-15 08:38:56+00:00,dotnet-maestro[bot],0,,,3,10,10,"[main] update dependencies from dotnet/xharness (issue_ref)* update dependencies from build 20250302.1microsoft.dotnet.xharness.cli , microsoft.dotnet.xharness.testrunners.common , microsoft.dotnet.xharness.testrunners.xunit from version 10.0.0-prerelease.25103.1 -> to version 10.0.0-prerelease.25152.1* update dependencies from build 20250314.1microsoft.dotnet.xharness.cli , microsoft.dotnet.xharness.testrunners.common , microsoft.dotnet.xharness.testrunners.xunit from version 10.0.0-prerelease.25103.1 -> to version 10.0.0-prerelease.25164.1---------"
dotnet/runtime,36ca267b3e501a1f49d89dc344380a77a76916c6,[browser] test that Task.Yield yields to browser event loop (#113531),2025-03-15 10:06:00+00:00,Pavel Savara,0,,,4,89,0,[browser] test that task.yield yields to browser event loop (issue_ref)
dotnet/runtime,4ca1691e9861e5d0c7dd8f4356b825f27c8dc8f5,Don't call fgMorphBlockStmt in LoopClonning (#113558),2025-03-15 14:59:11+00:00,Egor Bogatov,0,,,1,17,70,don't call fgmorphblockstmt in loopclonning (issue_ref)
dotnet/runtime,7b0fbc8e971aac12b77bbf6ed8f7e198b089a6ee,"Merge pull request #113513 from am11/feature/vendor/llvm-libunwind

Update llvm-libunwind to 20.1.0",2025-03-16 16:30:49+00:00,Jan Kotas,1,05e00fc911c01de2a3f85e4e2b4d37f8c75dfdc8,"Fix llvm-libunwind context sizes (#114105)

* Fix llvm-libunwind context sizes

* Update __libunwind_config.h

* Revert riscv (we need to do it differently for 32 bit)",39,612,293,merge pull request issue_ref from am11/feature/vendor/llvm-libunwindupdate llvm-libunwind to 20.1.0
dotnet/runtime,5c4a80e53a43beb6c10410277de5802749f5fa49,"JIT: Ensure `fgTryMorphStructArg` morphs created trees (#113496)

In particular we could create `LCL_FLD` or `LCL_VAR` nodes for address
exposed locals without marking them with `GTF_GLOB_REF`. This would
result in not creating some necessary copies.",2025-03-16 22:54:17+00:00,Jakob Botsch Nielsen,0,,,4,68,11,jit: ensure morphs created trees (issue_ref)in particular we could create or nodes for addressexposed locals without marking them with . this wouldresult in not creating some necessary copies.
dotnet/runtime,acc910a921c0d298b009d27d801b8cd835b30ddc,"Update dependencies from https://github.com/dotnet/source-build-reference-packages build 20250314.1 (#113593)

Microsoft.SourceBuild.Intermediate.source-build-reference-packages
 From Version 10.0.615601 -> To Version 10.0.616401

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-03-17 07:30:54+00:00,dotnet-maestro[bot],0,,,1,2,2,update dependencies from build 20250314.1 (issue_ref)microsoft.sourcebuild.intermediate.source-build-reference-packages from version 10.0.615601 -> to version 10.0.616401
dotnet/runtime,1110cfbff6f82351cad602e01de8187eca977623,"[wasm] Bump chrome for testing - linux: 134.0.6998.88, windows: 134.0.6998.89 (#113577)

* Automated bump of chrome version

* Update V8 version in BrowserVersions.props

Revert v8 version update (V8 for Linux is still not available and a newer stable version was not published yet).

---------

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>
Co-authored-by: Ilona Tomkowicz <32700855+ilonatommy@users.noreply.github.com>",2025-03-17 08:32:01+00:00,github-actions[bot],0,,,1,2,2,"[wasm] bump chrome for testing - linux: 134.0.6998.88, windows: 134.0.6998.89 (issue_ref)* automated bump of chrome version* update v8 version in browserversions.propsrevert v8 version update (v8 for linux is still not available and a newer stable version was not published yet).---------"
dotnet/runtime,474a1af260c13cb27c550501bb21568d67593cde,[android][tests] Do not package unused CoreCLR libs when building test apks (#113209),2025-03-17 08:42:07+00:00,Ivan Povazan,0,,,1,14,1,[android][tests] do not package unused coreclr libs when building test apks (issue_ref)
dotnet/runtime,c392a6c8676b91795774b1584c140fe9c2ed4a99,"Use `GetUninitializedObject` to marshal LayoutClass (#113529)

The marshalling rule is that `Marshal.PtrToStructure` will use the parameterless constructor to create instance and refuse working if there isn't one, but p/invoke will use `GetUninitializedObject` and ignore any constructors.",2025-03-17 09:28:04+00:00,Michal Strehovský,0,,,2,16,11,"use to marshal layoutclass (issue_ref)the marshalling rule is that will use the parameterless constructor to create instance and refuse working if there isn't one, but p/invoke will use and ignore any constructors."
dotnet/runtime,20be601eb0b7055d9c8b7242e8ee5f06d886e248,"pipelines triggers unified (#113556)

Co-authored-by: Jakub Dražka <kubadrazka@microsoft.com>",2025-03-17 11:20:46+00:00,KubaD,0,,,3,2,4,pipelines triggers unified (issue_ref)
dotnet/runtime,5a54b6dbe8dca1751f6b2d1bb53a88c19fe941ee,[browser] Change default boot config to dotnet.boot.js (#113374),2025-03-17 14:13:30+00:00,Marek Fišera,0,,,21,90,93,[browser] change default boot config to dotnet.boot.js (issue_ref)
dotnet/runtime,e12a75319bb2523176b2669ebc8e0a60cad252e1,"[browser][wasm] Make response streaming opt-out (#111680)

Co-authored-by: campersau <buchholz.bastian@googlemail.com>
Co-authored-by: pavelsavara <pavel.savara@gmail.com>",2025-03-17 16:39:48+00:00,campersau,0,,,14,145,62,[browser][wasm] make response streaming opt-out (issue_ref)
dotnet/runtime,b79583cf15b9542670a9809709de8d234dd63f8f,"JIT: Properly handle param reg targets with multiple register assignments (#113499)

LSRA can assign different registers to the same local over its lifetime.
When this happens for a parameter, there is special logic to ensure that
the parameter gets its right initial register assignment. This handling
was missing for mapped parameter register targets.",2025-03-17 18:24:47+00:00,Jakob Botsch Nielsen,1,bb5c6c3425acf6f48d4d13521e6da1f5efe71b05,"Reduce TP for targets with more than 64 Registers Part 1 (#112704)

* Reduce tpdiff when regMaskTP has more than 64 registers by working on SingleTypeRegSet instead.

* Handle liveRegs locally as SingleTypeRegSet.

* Addressing review comments.

* Revert ""Handle liveRegs locally as SingleTypeRegSet.""

This reverts commit 65acca3c9d3a39d8e1836b60cac6281e1a756d0c.

* Fix formatting.",4,91,13,"jit: properly handle param reg targets with multiple register assignments (issue_ref)lsra can assign different registers to the same local over its lifetime.when this happens for a parameter, there is special logic to ensure thatthe parameter gets its right initial register assignment. this handlingwas missing for mapped parameter register targets."
dotnet/runtime,c6586edaad22867db7086e95abeeff51b274bf80,"JIT: Remove `LclVarDsc::_lvArgReg` and `LclVarDsc::_lvOtherArgReg` (#113501)

No longer used with recent work to switch to new ABI info.",2025-03-17 18:25:54+00:00,Jakob Botsch Nielsen,1,cee9527dc42b304e4dea11a5cc4f18c703456522,"[APX] Complete EGPR encoding in X64 backend (#113237)

* EGPR-encoding-part-1

* EGPR-encoding-part-2

* bug fix

* revert LSRA changes.

* formatting.

* Make sure KMOV does not use EVEX under X86",1,1,21,jit: remove and (issue_ref)no longer used with recent work to switch to new abi info.
dotnet/runtime,066ee9764c5acd29226c54b06ed78e892256d685,"[WinHTTP] Let OS chose SSL/TLS protocol if not set to `WinHttpHandler` (#113525)

* Do not set SSL/TLS protocols to WinHTTP and let the OS chose.

* Remove SecurityProtocol.cs.

* Feedback",2025-03-17 19:01:04+00:00,Marie Píchová,0,,,15,23,88,[winhttp] let os chose ssl/tls protocol if not set to (issue_ref)* do not set ssl/tls protocols to winhttp and let the os chose.* remove securityprotocol.cs.* feedback
dotnet/runtime,96b80da6e1847743e6de3ef9c111727b18d1ad8d,"Switch to AwesomeAssertions (#113425)

* Switch to AwesomeAssertions

* React to brekaing API changes",2025-03-17 20:18:04+00:00,Eric StJohn,1,5379704c791f6e38da6cd6d8dd5fc831728c2f3d,"Target NetFrameworkCurrent in tests and remove old mentions (#113667)

* Target NetFrameworkCurrent in tests and remove old mentions

... of previous .NET Framework versions in docs / tests.

NetFrameworkMinimum (net462) -> NetFrameworkCurrent (net481) so that we can
start consuming xunit v3 which requires at least net472. Use
NetFrameworkCurrent as the actual runtime that is then used is
.NET Framework 4.8.1 anyway (innerloop & CI).

* Revert source-generator ref assembly change

* Try to fix VoidMainWithExitCodeApp test

* Fix typo

---------

Co-authored-by: Alexander Köplinger <alex.koeplinger@outlook.com>",9,55,44,switch to awesomeassertions (issue_ref)* switch to awesomeassertions* react to brekaing api changes
dotnet/runtime,49bbc440c83eb5bab30524512bc2d5287e25487c,"Allow specifying SDK search paths in global.json (#113512)

- Parse optional properties in global.json:
  ```
  {
      ""sdk"": {
          ""paths"": [ ""path/to/sdk/root"", ""$host$"" ],
          ""errorMessage"": ""<message>""
      }
  }
  ```
  - `paths` can be absolute or relative to the global.json. `$host$` is a special value indicating the running `dotnet` path
  - `errorMessage` is shown on SDK resolution failure (instead of the host's default SDK resolution error message).
- Make `hostfxr` search for SDKs with custom paths if specified and error out with custom message if specified
  - `dotnet <command>` - global.json based on process working directory, runs command using resolved SDK respecting global.json paths
  - `hostfxr_resolve_sdk2` - global.json based on working directory argument, returns resolved SDK respecting global.json paths
  - `--info` and `--list-sdks` - global.json based on process working directory, prints found SDKs respecting global.json paths
  - `hostfxr_get_available_sdks` and `hostfxr_get_dotnet_environment_info` - global.json based on process working directory, returns found SDKs respecting global.json paths
- Update error and tracing messages to include information about configured search paths",2025-03-17 21:44:36+00:00,Elinor Fung,1,664ac25dcc16cb1531f90765295ececf5b45a0e3,"Fix parsing of json with UTF 8 BOM in the host (#115967)

There are two bugs in this line:
https://github.com/dotnet/runtime/blob/d896e8518a6ddba11bb58634a19a6bcb2a001927/src/native/corehost/json_parser.cpp#L126

A typo where the last comparison should compare the 3rd byte.
Comparing chars to numbers. Chars are treated as signed, so the comparison will actually never succeed because the constant numbers are treated as positive numbers, but the effective value of the BOM will be treated as negative numbers.

This change fixes it and adds tests for both runtimeconfig anf deps.json.

Fixes https://github.com/dotnet/runtime/issues/115915",15,445,70,"allow specifying sdk search paths in global.json (issue_ref)- parse optional properties in global.json: - can be absolute or relative to the global.json. is a special value indicating the running path - is shown on sdk resolution failure (instead of the host's default sdk resolution error message).- make search for sdks with custom paths if specified and error out with custom message if specified - - global.json based on process working directory, runs command using resolved sdk respecting global.json paths - - global.json based on working directory argument, returns resolved sdk respecting global.json paths - and - global.json based on process working directory, prints found sdks respecting global.json paths - and - global.json based on process working directory, returns found sdks respecting global.json paths- update error and tracing messages to include information about configured search paths"
dotnet/runtime,afc3e25d19f043cb2e3bca88a3e045b6f4cf9724,"Revert ""Revert ""Pin SHAs for container images (#113185)"" (#113248)"" (#113598)

This reverts commit c3d95b4305e17ebe8dbda8efde3144a1c693499c.",2025-03-17 21:48:17+00:00,Michal Strehovský,0,,,1,26,26,"revert ""revert ""pin shas for container images (issue_ref)"" (issue_ref)"" (issue_ref)this reverts commit c3d95b4305e17ebe8dbda8efde3144a1c693499c."
dotnet/runtime,555d2ef4f3fc3cf36f71e02a6c3968309000b27c,"JIT: Remove `jitoldlayout` test configs (#113621)

Follow-up to #113335. There is no longer any old layout implementation to test.",2025-03-17 22:01:41+00:00,Aman Khalid,1,67c10c87d4700c49211b2c5ce56c0dd670ca0db4,"Improve support for 512-bit Vector<T> (#111472)

* improve support for 512-bit Vector<T>

* fix size check

* add MaxVectorTBitWidth configs to jitstress-isas-x86 pipeline

* clamp Vector<T> size to largest accelerated fixed-sized vector

* move PreferredVectorBitWidth logic to VM

* tidying

* tidying2",3,0,4,jit: remove test configs (issue_ref)follow-up to issue_ref. there is no longer any old layout implementation to test.
dotnet/runtime,7a4839bed8d3581a363c1d2e050d8e1eec7ae2f5,"Tensor<T> - Fixed missing memory offset from ReadOnlyTensorSpan (#113618)

* fixed missing memory offset

* comments from pr

* more offset testing

* fixed new offset check",2025-03-17 22:05:20+00:00,Michael Sharp,1,8628d398ccb51c208e8d87f0c8a00952e68f4ed3,"Rewrite of System.Numerics.Tensors to allow for more code sharing, various correctness fixes, and stability improvements (#114927)

* Refactor Tensor to be more reusable and validate appropriate state

* Handle Equals, GreaterThan, GreaterThanOrEqual, LessThan, LessThanOrEqual, and the *All/*Any variants

* Many implementations correctly swapped to new form. (#25)

* Refactor Tensor to be more reusable and validate appropriate state

* finishing tensor primitives work

---------

Co-authored-by: Tanner Gooding <tagoo@outlook.com>

* more tensors updates (#26)

* Resolve a few build failures

* Ensure SetSlice and ToString are working as expected

* Tensors lastfew (#27)

* only couple left

* pausing for food

* fixed rented buffer

* squeeze/unsqueeze

* set slice/ split

* only 2 left

* Minor cleanup of the Tensor files

* Ensure that tensor tests are building

* Resolving various build failures due to API compatibility

* Ensure flattendLength is adjusted after the stride is set for that dimension

* Ensure that we set linearLength if -1 is passed in when strides is empty

* Ensure that the first index is correct

* Cleanup to ensure iteration and construction initializes correctly

* Ensure that broadcasting is allowed to be in any stride position

* Have AreCompatible handle empty shapes

* Ensure IndexOutOfRangeException is thrown for invalid indexes

* Ensure that the stride is set to 0 when the length of a dimension is 1, so embedded broadcasting works

* Fixing Broadcasting Loop (#29)

* Fixing Broadcasting Loop

* fixes from pr coments

* squeeze fixed

* unsqueeze

* set slice

* more tensor fies

* Ensure that minimumLinearLength is actually the minimum

* Ensure the rented buffer is cleared

* Fix the AreCompatible checks

* Tensor finishing (#30)

* stack working

* more tensor tests working

* fix factory create tests

* only2 tests left

* Update src/libraries/System.Numerics.Tensors/src/System/Numerics/Tensors/netcore/TensorShape.cs

* Update compatibility suppressions

* transpose working

* reverse working

* Revert the unnecessary sln changes

* Remove an unnecessary using

---------

Co-authored-by: Michael Sharp <51342856+michaelgsharp@users.noreply.github.com>
Co-authored-by: Michael Sharp <misharp@microsoft.com>",4,76,33,tensor<t> - fixed missing memory offset from readonlytensorspan (issue_ref)* fixed missing memory offset* comments from pr* more offset testing* fixed new offset check
dotnet/runtime,97db32fc4c21e8793ccaceb7fa52dc2ce46409c9,"Use reflection metadata to represent methods/fields in native layout (#113413)

Native layout is a parallel form of metadata that was introduced in .NET Native mostly because in the structuring of that compiler, the decisions about reflection metadata and decisions about native layout happened in different components written in different languages (reflection metadata in C# during IL2IL transforms, native layout in C++ in NUTC).

Native layout has its own representation of methods and fields. There is a bunch of code to read and reconcile those two formats at runtime. This then introduces problems such as in #91381 where updating one format necessitates updating the other one.

Instead of adding more code to native layout generation/reading/reconciliation to account for custom modifiers, I'm just deleting ~2000 lines of code responsible for native layout metadata from the product instead.

One thing I needed to adjust was that native layout metadata is more compact than reflection metadata - so I added a new way of emitting reflection metadata for methods where the generated method won't have any custom attributes or parameter names. This hobbled method is not reachable with trim safe code. If someone gets a hold of it, more things will be broken than just the ability to invoke it.",2025-03-17 22:18:03+00:00,Michal Strehovský,1,7e69df08348a5bea7247995fa3e92266254720e7,"Fix dynamic static generic virtual method dispatch on generic types (#113684)

Fixes #113664.

When we resolve dispatch for a static generic virtual method dynamically (e.g. after `MakeGenericType` or another generic virtual method call) we run the runtime type loader logic to do the resolution. The resolution was incorrectly returning an open version of the containing type and that was resulting in a failed dispatch. The version of the resolution algorithm in the compiler (handling the non-dynamic cases) didn't have the bug.

This behavior dates back to .NET Native times. It was never a problem in .NET Native because for instance generic virtual methods, we paper over the open version of the type as we resolve the slot on the implementing class (the interface method resolution happens in two phases: first we resolve the interface method to a virtual slot on the implementing class, and then we resolve the virtual slot to an actual implementation). It is a problem for static virtual methods since the second phase doesn't happen (the static virtual implementations need to be `sealed` in IL so there's no point to do the second pass).",58,713,2244,"use reflection metadata to represent methods/fields in native layout (issue_ref)native layout is a parallel form of metadata that was introduced in .net native mostly because in the structuring of that compiler, the decisions about reflection metadata and decisions about native layout happened in different components written in different languages (reflection metadata in c# during il2il transforms, native layout in c++ in nutc).native layout has its own representation of methods and fields. there is a bunch of code to read and reconcile those two formats at runtime. this then introduces problems such as in issue_ref where updating one format necessitates updating the other one.instead of adding more code to native layout generation/reading/reconciliation to account for custom modifiers, i'm just deleting ~2000 lines of code responsible for native layout metadata from the product instead.one thing i needed to adjust was that native layout metadata is more compact than reflection metadata - so i added a new way of emitting reflection metadata for methods where the generated method won't have any custom attributes or parameter names. this hobbled method is not reachable with trim safe code. if someone gets a hold of it, more things will be broken than just the ability to invoke it."
dotnet/runtime,ec77954012aef336e83072ae75abd3170ed3bf99,"LoongArch is a NEW ISA which is different from MIPS (#113564)

* LoongArch is a NEW ISA which is different from MIPS

reference:https://docs.kernel.org/arch/loongarch/introduction.html
Introduction to LoongArch

* Update src/coreclr/jit/codegenlinear.cpp

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>
Co-authored-by: Adeel Mujahid <3840695+am11@users.noreply.github.com>",2025-03-17 23:28:55+00:00,東雲なの,0,,,1,5,2,loongarch is a new isa which is different from mips (issue_ref)* loongarch is a new isa which is different from mipsreference:introduction to loongarch* update src/coreclr/jit/codegenlinear.cpp---------
dotnet/runtime,4ff64a03e5c31fa824c4bc9377ef1ae8134d3f7a,"Recognize ""Span.Length"" during physical promotion and set IsNeverNegative flag (#113615)",2025-03-17 23:56:07+00:00,Egor Bogatov,0,,,1,7,0,"recognize ""span.length"" during physical promotion and set isnevernegative flag (issue_ref)"
dotnet/runtime,3d5015eb902a40e008fc0f2293bc0ef2654e1ecc,"JIT: Handle containment for shift instructions with EVEX encoding (#111644)

* handle containment for EVEX-encoded shift instructions

* use tuple type instead of instruction list",2025-03-18 01:31:11+00:00,Clinton Ingram,0,,,3,21,15,jit: handle containment for shift instructions with evex encoding (issue_ref)* handle containment for evex-encoded shift instructions* use tuple type instead of instruction list
dotnet/runtime,4f9ecbf78bc71b72b153c26a50babf1b99304782,"Disable LongProcessNamesAreSupported on OSX (#113600)

This is consistently failing on osx after updating Helix to osx13.",2025-03-18 03:59:12+00:00,Michal Strehovský,1,02ac51e80f8dc9c769052652a29102742842d612,"Fix MaxWorkingSet_GetNotStarted_ThrowsInvalidOperationException (#105424)

Fixes issue #105422

On MacOS, FreeBSD, SunOS (the ports that share ProcessBSD.c)
the get/set WorkingSet methods only work on the current process.
Skip the parts of tests that operate on other processes.

Remove now redundant MacOS-speicifc tests.",1,1,0,disable longprocessnamesaresupported on osx (issue_ref)this is consistently failing on osx after updating helix to osx13.
dotnet/runtime,9d742b6666e896f261cf3b62c5dfbeb7a94e8097,Do not throw for `Marshal.SizeOf(typeof(delegate*<void>))` (#113603),2025-03-18 04:11:12+00:00,Michal Strehovský,0,,,2,7,1,do not throw for (issue_ref)
dotnet/runtime,5512a46dcbfdf40c192171d6e817c4609271a2f4,Treat Char/Bool as requiring marshalling (#113602),2025-03-18 05:51:33+00:00,Michal Strehovský,0,,,2,8,2,treat char/bool as requiring marshalling (issue_ref)
dotnet/runtime,e3ffa2c3cf2001edf816dad7f4be1f9332a62ade,"Fix misaligned reads in NativeAOT code manager (#113637)

The fix replaces the native implementation of the native format decoder with the clone of the managed implementation.

Fixes #113609",2025-03-18 06:13:34+00:00,Jan Kotas,1,09cb359c749d54177897eafb7bc770f0f1f6b629,"Emit an error message if the runtime fails to initialize, instead of just silently aborting (#116171)

Emit an error message if the runtime fails to initialize, instead of just silently aborting",22,82,120,fix misaligned reads in nativeaot code manager (issue_ref)the fix replaces the native implementation of the native format decoder with the clone of the managed implementation.fixes issue_ref
dotnet/runtime,f5f69df303e517e2f1a7b2a72f8acf97f9504b5e, skip MonoLLVMSDKDebugSuffix for local build (#113536),2025-03-18 08:37:07+00:00,Pavel Savara,0,,,1,1,1,skip monollvmsdkdebugsuffix for local build (issue_ref)
dotnet/runtime,9d6a5a51f8fb0d01627bbb72a1e5d3c8e9d97c79,Bump main to preview4 (#113631),2025-03-18 09:40:25+00:00,Carlos Sánchez López,0,,,1,1,1,bump main to preview4 (issue_ref)
dotnet/runtime,86701f60ea4b04338c5bbf93970b10193e8826f4,"[wasm] initial build of coreclr.runtime (#113429)

* First round of changes to build on wasm

* More changes to build on wasm

* Next round of changes

It builds now

* Fix debug build

* Fix paste typo

* Feedback

* Feedback

It is not needed anymore

* Feedback

This is not needed anymore as FEATURE_METADATA_UPDATER is now disabled on wasm

* Feedback

UMEntryThunkCode was removed from main recently

* Feedback

Disable FEATURE_VIRTUAL_STUB_DISPATCH and enable FEATURE_CACHED_INTERFACE_DISPATCH

* Feedback

Remove old host changes

* Build runtime on CI

* Inline few functions in header files

* Feedback

Forgot to remove this as well

* Add missing file

* Feedback

Add assert to Thread::VirtualUnwindCallFrame

* Remove unwanted change

* Remove unwanted change",2025-03-18 09:46:14+00:00,Radek Doulik,1,83d1100e55116ae6789498528433d66d9de95dab,"Fix x86 exception handling edge case (#113760)

When a NULL reference exception occurs in a JIT helper or a VSD stub,
runtime pretends the exception occured in the managed caller. There is a
bug on x86 Windows where the COMPlusThrowCallback considers that frame
to be the frame where the exception actually occurred (based on the
m_crawl.isFirst). In case the call to the helper is the last instruction
in a try region, the exception handler lookup would reject that address
and the exception may not get handled at the right place or at all.

This change fixes it by ensuring that the m_crawl.isFirst is not set
when the frame is not the frame of the failure.

Close #113106",37,568,36,[wasm] initial build of coreclr.runtime (issue_ref)* first round of changes to build on wasm* more changes to build on wasm* next round of changesit builds now* fix debug build* fix paste typo* feedback* feedbackit is not needed anymore* feedbackthis is not needed anymore as feature_metadata_updater is now disabled on wasm* feedbackumentrythunkcode was removed from main recently* feedbackdisable feature_virtual_stub_dispatch and enable feature_cached_interface_dispatch* feedbackremove old host changes* build runtime on ci* inline few functions in header files* feedbackforgot to remove this as well* add missing file* feedbackadd assert to thread::virtualunwindcallframe* remove unwanted change* remove unwanted change
dotnet/runtime,295338c823ba1422b2b9d74cc0e2d26e0f3fe4bc,[browser] disable HttpStreamingDisabledBy_WasmEnableStreamingResponse_InProject (#113639),2025-03-18 10:15:15+00:00,Pavel Savara,1,4fd5d1b98876a50ee060a0f7960d5512fa23022b,"Fix discrepancy between HttpRequest/ResponseMessage.ToString and HttpHeaders.ToString (#114101)

Reuse `HttpHeaders.ToString()` logic in `HeaderUtilities.DumpHeaders()` so the outputs are similar. Values for the same key will be shown in the same line.",1,1,0,[browser] disable httpstreamingdisabledby_wasmenablestreamingresponse_inproject (issue_ref)
dotnet/runtime,a4dd239dfdce28fe151dc2e7c1ff1e41a3667101,"JIT: Disable recursive tailcall to loop opt in OSR methods (#113625)

OSR is meant to be used when we can't escape, but these tailcalls are
natural points where we're actually able to escape. So prefer call
counting + tiering + potential transition into the tier 1 code in these
situations.",2025-03-18 10:54:40+00:00,Jakob Botsch Nielsen,0,,,1,12,18,"jit: disable recursive tailcall to loop opt in osr methods (issue_ref)osr is meant to be used when we can't escape, but these tailcalls arenatural points where we're actually able to escape. so prefer callcounting + tiering + potential transition into the tier 1 code in thesesituations."
dotnet/runtime,0d3a4369f5d336958a1866e6eb860d392925a69f,"Link peer's X509 stack handle to parent SSL safe handle (#113124)

* Link peer's X509 stack handle to parent SSL safe handle

* Update src/libraries/Common/src/Interop/Unix/System.Security.Cryptography.Native/Interop.Ssl.cs

Co-authored-by: Kevin Jones <vcsjones@github.com>

* Add test for dispose parallel with handshake.

---------

Co-authored-by: Kevin Jones <vcsjones@github.com>",2025-03-18 12:57:50+00:00,Radek Zikmund,1,8be8425ce2a3e236bb647b59e29577e95cf571a3,"Fix SslStreamDisposeTest failures during parallel handshake (#113834)

* Fix SslStreamDisposeTest.Dispose_ParallelWithHandshake_ThrowsODE test failures

* Fix build",2,60,1,link peer's x509 stack handle to parent ssl safe handle (issue_ref)* link peer's x509 stack handle to parent ssl safe handle* update src/libraries/common/src/interop/unix/system.security.cryptography.native/interop.ssl.cs
dotnet/runtime,9c2f285092a371feeec02f5806fb50c6a69c385d,"Don't repeat 'QueryInterface' calls for 'IReferenceTracker' when possible (#113632)

* Skip QIs for 'IReferenceTracker' when possible

* Use 'try/finally' and just 'IntPtr'",2025-03-18 14:23:18+00:00,Sergio Pedri,1,5266e7d30d2daa478470ae537496f1d54bd1cd5b,"Implement the ""compact dispatch sections"" optimization from CoreCLR's ComWrappers implementation in NativeAOT's implementation (#112461)

* Implement the ""compact dispatch sections"" optimization from CoreCLR's ComWrappers implementation in NativeAOT's implementation

* Various fixes to get tests passing",1,106,65,don't repeat 'queryinterface' calls for 'ireferencetracker' when possible (issue_ref)* skip qis for 'ireferencetracker' when possible* use 'try/finally' and just 'intptr'
dotnet/runtime,11519252b061f007691c5c5e491911caac581926,Update unmanaged signatures to match managed QCall signatures. (#113578),2025-03-18 15:42:26+00:00,Aaron Robinson,1,a0878687d02b42034f4ea433ddd7a72b741510b8,"Fix foreign exception handling on Windows (#113323)

* Fix foreign exception handling on Windows

There is a problem in a special case with the new
exception handling:

* A managed code calls a 3rd party native C++ code
* then a C++ exception is thrown in that code
* then it is propagated through managed code
* then it is caught in a 3rd party native C++ code
* then a managed callback is called from the catch handler
* then the exception is rethrown using C++ ""throw""
* then it propagates back to the initial managed caller

The problem is as follows:
* When a native exception passes through managed frames and it is
  rethrown once a native frame is encountered, the RaiseException
  doesn't use the original exception's `EXCEPTION_RECORD`, but creates a
  new CLR exception instead.
* When a managed callback called from the native C++ catch handler throws
  and catches another exception, the LastThrownObject is cleared.
* When the C++ code in the catch handler rethrows the exception and it
  is propagated to managed code, the ProcessCLRException personality
  routine is invoked for the first managed frame. It can see that the
  exception is a CLR exception, but the LastThrownObject is NULL. It
  asserts in debug builds and crashes a bit later in release builds
  attempting to dereference the NULL.

The fix is to pass the original `EXCEPTION_RECORD` to the `RaiseException`
in case an external exception is propagated. And use just
`RaiseException` instead of the machinery for regular managed exceptions.

The issue was discovered in Autodesk Revit 2025 that does this kind of
exception propagation.

Close #113158

* Disable the test on Mono

* Fix the problem with C++ exception object in reclaimed stack

* Fix jongjmp accidentally handled as foreign",3,27,27,update unmanaged signatures to match managed qcall signatures. (issue_ref)
dotnet/runtime,a45130eb8019ca923ad58e7dd0c6378c1a88a555,"JIT: Enable containment for BMI2 shift and rotate instructions (#111778)

* enable containment for rorx/sarx/shlx/shrx

* update emitExtractEvexPrefix",2025-03-18 16:15:54+00:00,Clinton Ingram,1,122e7014d2cbca93c300ed22de526bfe4092b673,"JIT: Fix asserts from #112728 (#113845)

* fix cast asserts

* fix containment of CreateScalar

* add tests",5,114,87,jit: enable containment for bmi2 shift and rotate instructions (issue_ref)* enable containment for rorx/sarx/shlx/shrx* update emitextractevexprefix
dotnet/runtime,728df8c063e6dd36cb0db01eacda21f7af9b319d,Disable checked bounds for assertprop (#113638),2025-03-18 16:35:35+00:00,Egor Bogatov,0,,,2,22,13,disable checked bounds for assertprop (issue_ref)
dotnet/runtime,a80c62faef4d36859020520039492b292d5d7652,Move macro definition to give better out-of-the-box VSCode experience on Windows (#113557),2025-03-18 17:00:21+00:00,Jeremy Koritzinsky,0,,,4,9,10,move macro definition to give better out-of-the-box vscode experience on windows (issue_ref)
dotnet/runtime,b37f820552ae9f8ebcc78b620bd6e1923167b846,Update area owners for hosting (#112966),2025-03-18 18:36:09+00:00,Andy Gocke,0,,,1,3,3,update area owners for hosting (issue_ref)
dotnet/runtime,79edb640661c29fc3917eac0a6f06e908f4cf617,"Additional Tar tests for filled in size when data is empty (#107815)

* Additional Tar tests for filled in size when data is empty.

* Remove deleted test

* Apply suggestion for archiveStream contents.

* Fix paste error

---------

Co-authored-by: Stephen Toub <stoub@microsoft.com>",2025-03-18 20:10:10+00:00,Carlos Sánchez López,1,8c3a2e15a63d1a7b2b54312b79f8a725ccdc2d4d,"Tar: Write unused GNU tar entry size, ctime and atime bytes in the expected format (#114868)

* In the GNU tar entry format, the unused bytes of the size metadata field should be filled with ""0"" characters. The bug was that we were filling them with nulls like in the other formats.
Added sync and async tests to validate directly in the memory stream that the unused bytes in the size field are indeed written as ""0"" characters.

* In the GNU tar entry format, the atime and ctime fields (unique to this format) need to be written as null characters if their value is the Unix Epoch. The bug was that we were writing them as ""0"" characters as other GNU metadata fields. This was causing tools like 7-zip to show an extra unexpected folder with a name formed by just ""0"" characters. Other tools were unable to read these archives as they were considered corrupt.
Added sync and async tests to validate directly in the memory stream that when atime and ctime represent the Unix Epoch, they are indeed written as null characters.

* Create a separate timestamp writing method just for GNU timestamps. Regular timestamps (mtime) should not be affected by this.
Modify all the sync and async checksum shared code so that they reflect the changes in the expected values of size, atime and ctime.",1,72,15,additional tar tests for filled in size when data is empty (issue_ref)* additional tar tests for filled in size when data is empty.* remove deleted test* apply suggestion for archivestream contents.* fix paste error---------
dotnet/runtime,b71e09a5355f952448ecfb0dbe4d1f2bdd307740,"Add ThisptrRetbufPrecode to set of precodes handled by StubPrecode path (#112548)

This adds the ThisPtrRetBufPrecode to the set of codes handled by the StubPrecode stub pasting path.

Perf changes from about 2.35 ns per iteration of a minimal loop with a ThisPtrRetBufPrecode to about 3.03 ns per iteration on my computer (Windows X64). I expect the cost to be a little less on an Arm64 machine since the old ThisPtrRetBufPrecode was a bit more expensive there. However, this removes the previous scheme where we allocate and jit custom stubs for this, so I think the simplification is worth the runtime cost.

The overall change has a size increase though, as this work adds support for this type of precode to the cDAC, as well as some tests.",2025-03-18 20:27:52+00:00,David Wrighton,0,,,45,702,670,"add thisptrretbufprecode to set of precodes handled by stubprecode path (issue_ref)this adds the thisptrretbufprecode to the set of codes handled by the stubprecode stub pasting path.perf changes from about 2.35 ns per iteration of a minimal loop with a thisptrretbufprecode to about 3.03 ns per iteration on my computer (windows x64). i expect the cost to be a little less on an arm64 machine since the old thisptrretbufprecode was a bit more expensive there. however, this removes the previous scheme where we allocate and jit custom stubs for this, so i think the simplification is worth the runtime cost.the overall change has a size increase though, as this work adds support for this type of precode to the cdac, as well as some tests."
dotnet/runtime,052000b7e708a496d95a3ed6ba7e7de67baccd2c,"Change SuperPMI replay pipeline partitions (#113660)

Use one partition for each replay instead of one partition
for three replays, to improve pipeline throughput.",2025-03-18 20:56:44+00:00,Bruce Forstall,0,,,1,63,21,"change superpmi replay pipeline partitions (issue_ref)use one partition for each replay instead of one partitionfor three replays, to improve pipeline throughput."
dotnet/runtime,a1a3fb7188f322fbfdbf8c3fdac84b4d68c2964c,Change superpmi-replay pipeline from PR triggered to scheduled (#113661),2025-03-18 20:57:09+00:00,Bruce Forstall,0,,,1,4,12,change superpmi-replay pipeline from pr triggered to scheduled (issue_ref)
dotnet/runtime,5e7d6817767ec1e313a66ce2027cbe55828c7cce,Delete vestiges of universal shared code support (#113640),2025-03-18 22:49:18+00:00,Michal Strehovský,1,260d02b6405980ca2f27467fd336ed18451421a2,"Do not look at unboxing bit when looking up constructed generic methods (#118211)

Fixes #118072.

In the bug we were ending up in a situation where we remember generic dictionary for a `MethodDesc` with `UnboxingStub` bit set to true and then try to look up a generic dictionary for a `MethodDesc` with unboxing stub bit set to false (the false is hardcoded in the code I'm updating).

This is all sorts of wrong. The unboxing MethodDescs in the runtime type system were a mistake. We get by without them in the compiler.

This is really difficult to hit because the runtime type system is mutable (this is yet another mistake) and if we still have a cached version of this mutable type system around, this lookup is not used.

The regression test I added is really annoying and takes like 40 seconds to run in checked builds. I hate it, but this is not hittable in any other way. I'm not sure if this one is 100% reliable at triggering the type system flush either.",41,122,1021,delete vestiges of universal shared code support (issue_ref)
dotnet/runtime,289c443ea97de73b1b485bcaf9dc42e46ed8375a,Delete useless tests (#113633),2025-03-19 03:09:31+00:00,Jan Kotas,0,,,4,0,71,delete useless tests (issue_ref)
dotnet/runtime,522637540793a45275ac6a3136a0cd245264564c,"Remove CopyFile, GetTempFileName from PAL (#113490)

* CopyFileW

* CopyFileA

* GetTempFileNameW

* GetTempFileNameA

* PAL_GetUserTempDirectoryW

* Cleanup orphans

* Remove copyJit

* Delete JitInstance::reLoad",2025-03-19 07:52:08+00:00,Huo Yaoyuan,1,ce6d6d4fbec79dfb9dafb4858fe6e0b91445c39e,"[APX] Follow up on #104637: rename extended registers and bug fixes. (#114713)

* revert the raw byte in context2.S

* bug fix

* bug fix

* use ASSERT not assert.

* revert changes in context.cpp

* revert back to raw byte code in context2.S

* make sure context copy correctly handle the APX&AVX512 XSTATE.

* Make sure pointer offset is correct.

* bug fix

* Update src/coreclr/pal/src/thread/context.cpp

make sure we APX registers are copied to the right memory location.

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",33,9,2844,"remove copyfile, gettempfilename from pal (issue_ref)* copyfilew* copyfilea* gettempfilenamew* gettempfilenamea* pal_getusertempdirectoryw* cleanup orphans* remove copyjit* delete jitinstance::reload"
dotnet/runtime,e377d6505ff83d59aad6cfea2827c43eba8c8253,"Delete vestiges of unused assembly formats (#113646)

* Vestigial support for loading assemblies in IL format
* Vestigial support for ""overflow scopes"" in native metadata, which is something we had in .NET Native at some point I guess (ability to split metadata for a single assembly into multiple native modules?)",2025-03-19 11:47:50+00:00,Michal Strehovský,0,,,11,103,332,"delete vestiges of unused assembly formats (issue_ref)* vestigial support for loading assemblies in il format* vestigial support for ""overflow scopes"" in native metadata, which is something we had in .net native at some point i guess (ability to split metadata for a single assembly into multiple native modules?)"
dotnet/runtime,8fffd57a81bbd6fafe62dc084d97e82a68301bac,Add SpanSplitEnumerator.Source (#113673),2025-03-19 12:28:38+00:00,Stephen Toub,0,,,3,24,17,add spansplitenumerator.source (issue_ref)
dotnet/runtime,694dd4f5dc66567b9cb31af64e54e4221e83ef25,"Compress SafeSocketHandle.Unix booleans (#112417)

Reduces the logical size of `SafeSocketHandle` by 6-7 bytes on Unix, crossing a treshold that lowers the number of words consumed by the type by 1 on 64bit",2025-03-19 12:46:07+00:00,Anton Firszov,0,,,1,64,14,"compress safesockethandle.unix booleans (issue_ref)reduces the logical size of by 6-7 bytes on unix, crossing a treshold that lowers the number of words consumed by the type by 1 on 64bit"
dotnet/runtime,230a4ce927e04c0223659218873239593ebf2dd4,Reenable SslStreamTlsResumeTests.ClientDisableTlsResume_Succeeds (#113604),2025-03-19 13:27:45+00:00,Radek Zikmund,0,,,1,0,1,reenable sslstreamtlsresumetests.clientdisabletlsresume_succeeds (issue_ref)
dotnet/runtime,5ab9dfe37993a15e1da8930df3aa65fcb9d83c4e,"Revert ""Revert ""Revert ""Pin SHAs for container images (#113185)"" (#113248)"" (…"" (#113659)

This reverts commit afc3e25d19f043cb2e3bca88a3e045b6f4cf9724.",2025-03-19 15:13:44+00:00,Rich Lander,0,,,1,26,26,"revert ""revert ""revert ""pin shas for container images (issue_ref)"" (issue_ref)"" (…"" (issue_ref)this reverts commit afc3e25d19f043cb2e3bca88a3e045b6f4cf9724."
dotnet/runtime,f94a27b8ff4b1ebe2c30fff2d367eb4cae7b25d2,reduce size of HWIntrinsic jump table fallbacks (#112556),2025-03-19 15:18:11+00:00,Clinton Ingram,1,16236fdcd417dcfc700e55dd7ae76365ceb7ff87,"JIT: Unblock Vector###<long> intrinsics on x86 (#112728)

* unblock long xplat intrinsics on x86

* tidying

* tidying2

* remove CreateScalarUnsafe opt for small loads

* skip more redundant casts for CreateScalar of small types

* use temp reg for CreateScalar float SSE fallback

* formatting patch

* simplify storeind containment of ToScalar

* don't use temp reg for CreateScalar float SSE fallback

* skip cast on other memory loads

* use proper containment check

* add more validation, remove CreateSequence restriction

* use appropriate helpers for decomposing ToScalar",2,283,18,reduce size of hwintrinsic jump table fallbacks (issue_ref)
dotnet/runtime,322735dd252ad2a5c9c840f07e412612a202dd61,"[Json] Avoid writing to PipeWriter if IAsyncEnumerable throws before first item (#113503)

* [Json] Avoid writing to PipeWriter if IAsyncEnumerable throws before first item

* update",2025-03-19 16:20:06+00:00,Brennan,0,,,2,97,2,[json] avoid writing to pipewriter if iasyncenumerable throws before first item (issue_ref)* [json] avoid writing to pipewriter if iasyncenumerable throws before first item* update
dotnet/runtime,48ace183c442e367738374671a86bd82ed60e7d9,"JIT: Re-introduce late `fgOptimizeBranch` pass (#113491)

Part of #107749. fgReorderBlocks runs fgOptimizeBranch when it decides not to reorder a particular block. Turning off the old layout in favor of RPO layout in .NET 9 had the unintended consequence of also disabling the later fgOptimizeBranch pass the JIT used to do. After finding cases in #113108 that benefit from cloning and hoisting loop tests, I decided to reintroduce this late pass. These regressions also highlight that fgOptimizeBranch can create compaction opportunities inside loop bodies that we don't currently take advantage of; I've added a check to handle this.",2025-03-19 16:21:55+00:00,Aman Khalid,0,,,2,35,18,"jit: re-introduce late pass (issue_ref)part of issue_ref. fgreorderblocks runs fgoptimizebranch when it decides not to reorder a particular block. turning off the old layout in favor of rpo layout in .net 9 had the unintended consequence of also disabling the later fgoptimizebranch pass the jit used to do. after finding cases in issue_ref that benefit from cloning and hoisting loop tests, i decided to reintroduce this late pass. these regressions also highlight that fgoptimizebranch can create compaction opportunities inside loop bodies that we don't currently take advantage of; i've added a check to handle this."
dotnet/runtime,0666ad42b1437452087c5812fa745e8d913e905d,"Stub Precode variant for DynamicHelpers (#113402)

Run DynamicHelpers logic with StubPrecodes instead of dynamically generating the stubs.

Performance measurements indicate that this path is about 1% faster than the current approach for startup of my powershell benchmark, and results seem similar between X64 and Arm64 which was a surprise to me. Throughput results look like roughly a wash. I'd like to merge this PR in with its current state of changing all Arm64 and X64 behavior to use the new path to get a full set of performance data, as it appears this might just be a better approach than generating stubs dynamically.",2025-03-19 17:29:28+00:00,David Wrighton,1,fa4c14e0d82447c25aa0fa4d9735c905e30836ac,"Reapply ""Refactor `external_assembly_probe` to be separate from single-file bundle probing"" (#113776)

Undo the revert in https://github.com/dotnet/runtime/pull/113738

Fix on top of the original: Make a copy of the host contract information on initialization instead of just operating on a pointer to the struct. This should address intermittent failures on shutdown where a thread is still running after coreclr_shutdown has completed and the actual contract struct provided by a host may be cleaned up. The assumption is that any function pointers provided on the host contract at initialization should remain valid for the process lifetime.",18,1636,14,"stub precode variant for dynamichelpers (issue_ref)run dynamichelpers logic with stubprecodes instead of dynamically generating the stubs.performance measurements indicate that this path is about 1% faster than the current approach for startup of my powershell benchmark, and results seem similar between x64 and arm64 which was a surprise to me. throughput results look like roughly a wash. i'd like to merge this pr in with its current state of changing all arm64 and x64 behavior to use the new path to get a full set of performance data, as it appears this might just be a better approach than generating stubs dynamically."
dotnet/runtime,8cab0b2780a7fbc4a386b26293cd117c1fc0ae8f,"[mono] Fix for issue 109410 (#113140)

* Speculative assertions for issue 109410
* Add memory barrier",2025-03-19 17:49:37+00:00,Katelyn Gadd,1,646fe2bba35938681d385b7f23a8375a5e082197,"[Mono]: Fix generic interface non-virtual method vt_slot issue in build_imt_slots. (#115306)

* Fix generic interface none-virtual method vt_slot issue.

In case of a generic interface, build_imt_slots calculate
the vt_slot to find the index in the vtable for the implementation.
Currently implementation assumed interface methods are either static
or virtual, but it's possible to have private/sealed methods that
won't end up as virtual. This is handled when building the vtable,
by not including these methods, but we didn't handle that scenario
when building the IMT slots, ending up with wrong vtable slot,
potentially outside of allocated memory.

Fixes https://github.com/dotnet/runtime/issues/113958.",3,9,1,[mono] fix for issue 109410 (issue_ref)* speculative assertions for issue 109410* add memory barrier
dotnet/runtime,4428ab114b214c5159bd2a929f0c1633b6ca71ad,Bump the downlevels in main to 9.0.3/8.0.14 (#113663),2025-03-19 17:58:02+00:00,Larry Ewing,0,,,1,1,1,bump the downlevels in main to 9.0.3/8.0.14 (issue_ref)
dotnet/runtime,7e69df08348a5bea7247995fa3e92266254720e7,"Fix dynamic static generic virtual method dispatch on generic types (#113684)

Fixes #113664.

When we resolve dispatch for a static generic virtual method dynamically (e.g. after `MakeGenericType` or another generic virtual method call) we run the runtime type loader logic to do the resolution. The resolution was incorrectly returning an open version of the containing type and that was resulting in a failed dispatch. The version of the resolution algorithm in the compiler (handling the non-dynamic cases) didn't have the bug.

This behavior dates back to .NET Native times. It was never a problem in .NET Native because for instance generic virtual methods, we paper over the open version of the type as we resolve the slot on the implementing class (the interface method resolution happens in two phases: first we resolve the interface method to a virtual slot on the implementing class, and then we resolve the virtual slot to an actual implementation). It is a problem for static virtual methods since the second phase doesn't happen (the static virtual implementations need to be `sealed` in IL so there's no point to do the second pass).",2025-03-19 18:05:41+00:00,Michal Strehovský,1,9c714ff298234940026ac48095f9523ef30a1fa0,"Fix building with GVM_RESOLUTION_TRACE defined (#118160)

`MethodNameAndSignature` no longer has the `string`-typed property.",2,83,3,"fix dynamic static generic virtual method dispatch on generic types (issue_ref)fixes issue_ref.when we resolve dispatch for a static generic virtual method dynamically (e.g. after or another generic virtual method call) we run the runtime type loader logic to do the resolution. the resolution was incorrectly returning an open version of the containing type and that was resulting in a failed dispatch. the version of the resolution algorithm in the compiler (handling the non-dynamic cases) didn't have the bug.this behavior dates back to .net native times. it was never a problem in .net native because for instance generic virtual methods, we paper over the open version of the type as we resolve the slot on the implementing class (the interface method resolution happens in two phases: first we resolve the interface method to a virtual slot on the implementing class, and then we resolve the virtual slot to an actual implementation). it is a problem for static virtual methods since the second phase doesn't happen (the static virtual implementations need to be in il so there's no point to do the second pass)."
dotnet/runtime,6a23f1caa3ed2baeda3d9962d2ffb983bf996bef,JIT: Changes from #113440 with diffs (#113559),2025-03-19 18:07:47+00:00,Egor Bogatov,0,,,2,43,162,jit: changes from issue_ref with diffs (issue_ref)
dotnet/runtime,316198ddcafd9a2e2d49c8d598dfacd95d74d17b,[browser] make in-tree samples work again (#113695),2025-03-19 19:49:57+00:00,Pavel Savara,0,,,1,23,20,[browser] make in-tree samples work again (issue_ref)
dotnet/runtime,a3d6c258c736a3fac3b1799a0ab9a6b8f9ce9289,Convert JitHelper `JIT_StrCns` to QCall (#113674),2025-03-19 21:19:20+00:00,Aaron Robinson,0,,,12,49,47,convert jithelper to qcall (issue_ref)
dotnet/runtime,67c10c87d4700c49211b2c5ce56c0dd670ca0db4,"Improve support for 512-bit Vector<T> (#111472)

* improve support for 512-bit Vector<T>

* fix size check

* add MaxVectorTBitWidth configs to jitstress-isas-x86 pipeline

* clamp Vector<T> size to largest accelerated fixed-sized vector

* move PreferredVectorBitWidth logic to VM

* tidying

* tidying2",2025-03-20 00:28:49+00:00,Clinton Ingram,1,e206974524754a1259318f4f0a022c1c7423ec47,"Separate code manager for the interpreter (#112985)

* Separate code manager for the interpreter

This change adds a separate code manager for the interpreted code. Here
is an overview of the changes:
* A base class EECodeGenManager is extracted from the EEJitManager
* A new class InterpreterJitManager derived from the EECodeGenManager is
  added and implemented.
* Similarly, a base class CEECodeGenInfo is extracted from the CEEJitInfo
* A new class CInterpreterJitInfo derived from the CEECodeGenInfo is added
  and implemented
* The CodeHeader and RealCodeHeader became base classes and
  JitCodeHeader, RealJitCodeHeader, InterpreterCodeHeader and
  RealInterpreterCodeHeader were added. The CodeHeader derivates don't
  add any extra data, the JitCodeHeader just provides the methods that
  are needed to access Jit specific members of the RealJitCodeHeader.
* The UnsafeJitFunction is refactored so that the interpreter (if
  enabled) is invoked first and then the AltJit / Jit ones are called.
* A new DOTNET_Interpreter, DOTNET_InterpreterPath and
  DOTNET_InterpreterName env vars are added to match the existing AltJit
  ones.

* Make the code headers independent

Make the jit and interpreter code headers independent

* Added missing #ifdef

* Fix MUSL build break

* Rework of the CodeHeader separation

The previous way was introducing 5% regression in all exception handling
microbenchmarks, this gets us back to the same perf as without any code
manager changes.

* PR feedback and some cleanup

* Fix Unix build failure

The clang doesn't do late parsing of the template code, so the helpers
cannot be in the .inl file as they reference some types that are not
defined yet at that point.

* Fix a bug

* Fix build break

* Add dummy ICodeManager derived InterpreterCodeManager

* Remove unused ICodeManager methods

* PR feedback

* PR feedback

* Refactored GC and EH info allocation
* Added Interpreter-TODO at some places
* Reverted some changes that were not needed anymore

* PR Feedback

* Get rid of some template usages by small refactoring

* Reflect feedback",40,391,596,improve support for 512-bit vector<t> (issue_ref)* improve support for 512-bit vector<t>* fix size check* add maxvectortbitwidth configs to jitstress-isas-x86 pipeline* clamp vector<t> size to largest accelerated fixed-sized vector* move preferredvectorbitwidth logic to vm* tidying* tidying2
dotnet/runtime,16236fdcd417dcfc700e55dd7ae76365ceb7ff87,"JIT: Unblock Vector###<long> intrinsics on x86 (#112728)

* unblock long xplat intrinsics on x86

* tidying

* tidying2

* remove CreateScalarUnsafe opt for small loads

* skip more redundant casts for CreateScalar of small types

* use temp reg for CreateScalar float SSE fallback

* formatting patch

* simplify storeind containment of ToScalar

* don't use temp reg for CreateScalar float SSE fallback

* skip cast on other memory loads

* use proper containment check

* add more validation, remove CreateSequence restriction

* use appropriate helpers for decomposing ToScalar",2025-03-20 00:50:39+00:00,Clinton Ingram,1,4c6e4e2f0d00b1214388ea7fb576e9ca0d7955d0,"Fix assertions related to combining `cmn (extended-register)` (#113337) (#113376)

Fixes issues highlighted by Fuzzlyn, related to erroneously combining
cast=>negate=>compare into `cmn (extended-register)` when the second
operand is an integral constant.",16,667,807,"jit: unblock vector###<long> intrinsics on x86 (issue_ref)* unblock long xplat intrinsics on x86* tidying* tidying2* remove createscalarunsafe opt for small loads* skip more redundant casts for createscalar of small types* use temp reg for createscalar float sse fallback* formatting patch* simplify storeind containment of toscalar* don't use temp reg for createscalar float sse fallback* skip cast on other memory loads* use proper containment check* add more validation, remove createsequence restriction* use appropriate helpers for decomposing toscalar"
dotnet/runtime,bb841230b0c9ec71a8df992a087420b372998a94,Trigger superpmi-replay pipeline if LSRA files change (#113714),2025-03-20 00:51:59+00:00,Bruce Forstall,0,,,1,8,0,trigger superpmi-replay pipeline if lsra files change (issue_ref)
dotnet/runtime,254b55a49e04ef6c63b68174c0f11d96223136fb,Enable Loop Cloning for Spans (#113575),2025-03-20 01:07:06+00:00,Egor Bogatov,1,96ec4b9d0f8aefd9f48b3c1bf730b4f017c7dbb5,"Implement `ShuffleNative` methods and optimise `Shuffle` for non-constant `indices` (#99596)

* Squash into 1 commit

* Remove internal dependency on ShuffleUnsafe's behaviour wrt high bit

* Optimise some codegen

- Optimise comparison in `gtNewSimdShuffleNodeVariable` for xarch
- Optimise for constant vector in Vector256.Shuffle{Unsafe} when have AVX2 only

* jit format

* jit format

* Simplify logic for using Shuffle for ShuffleUnsafe

* Move `ShuffleUnsafeModified` out of `Base64Helper`

- This was requested feedback via Discord

* Remove unnecessary `CompExactlyDependsOn` and `using`s

* Update SearchValues.cs

* Support AVX-512/AVX-10.1 acceleration of Shuffle V128<ulong/long/double>

* Additional optimisation for V512 constant index shuffle

- When 128-bit lanes are not crossed, emit vpshufb instead of vperm*

* jit format & typo

* Fix operand order

* Changes to `IsValidForShuffle` & jit format

- Ensure we use IsValidForShuffle correctly (i.e., ensure all cases that could be emittet at some point, are able to be done)
- jit format changes

* jit format

* Update hwintrinsicxarch.cpp

* Update hwintrinsicxarch.cpp

* Update gentree.cpp

- Implement preferring `vshufpd`/`vpshufd`/`vshufps` (when same size & possible & no zeroing) over `vpshufb` (when no crossing lane) over `vpermd`/`vpermps`/`vpermpd`/the ushort & byte equivalents in constant index case

Update gentree.cpp

- Continuation of previous commit, for the variable index shuffle stuff

Update gentree.cpp

Update gentree.cpp

Fix typo

* Make `op2DupSafe` be consistently ordered

- Adjust code such that `op2DupSafe` is consistently ordered with respect to `retNode`(it happens to end up before now) - this is the likely cause of the test failures

* jit format

* Use `compIsEvexOpportunisticallySupported` instead of explicit AVX-10 in remaining places

* jit format

* Update gentree.cpp

- Ensure `op1` side effects are done before `op2` side effects

* Update Vector128.cs

* Use `BlockNonDeterministicIntrinsics` instead of `CompExactlyDependsOn`

- As per feedback

* Ensure V128<byte> ShuffleUnsafe is not regressed on mono

* Update gentree.cpp

* Rename `ShuffleUnsafe` to `ShuffleNative`

- And do a full review of the logic & comments of all my code
- Fix 3 bugs (2 pre-existing)
- Simplify/improve some code

* jit format

* jit format again

* um

* Move assertion on arm64 to correct spot

* Normalize indices for `vpshufb` in all cases of constant indices Shuffle

- This is a nice-to-have, not a correctness issue - it matches what we're doing throughout the rest of the function, and keeps the asm more readable imo

* jit format

* Revert last pair of commits

- There's other places where they're not normalised. could be done, but not really worth the trouble probably

* Feedback

* Address some feedback & a bug fix

- Implement a bunch of feedback
- Fix an oversight in `IsValidForShuffle` where we don't treat something as variable indices that gets emitted as such

* Ensure ShuffleNative's behaviour with reflection/function pointers/etc. is the same as a normal call

- Not a particularly pretty solution to the problem, but it should work correctly at least

* jit format & compilation error

* jit format & fix buuld

* jit format & fix build

* jit format

* Update hwintrinsicxarch.cpp

* Update gentree.cpp

Missing `!= nullptr` & typo in comment & add additional comments in a few places.

* Fix mono code

* Mono: also cast arguments

* Move mono impl back into c#

- This should fix the mono issues (wasm impl assumes indices are constant)
- Additionally ensure V128.Shuffle(byte/sbyte) is vectorised for all mono platforms with ssse3 or arm64 advsimd or packedsimd, when given variable indices

* Update Vector128.cs

* um

---------

Co-authored-by: Tanner Gooding <tagoo@outlook.com>
Co-authored-by: Egor Bogatov <egorbo@gmail.com>",6,250,11,enable loop cloning for spans (issue_ref)
dotnet/runtime,f28528958c15a3b6a6d75970e09ec8d15322586a,Do not report inlining decision to runtime in DEBUG mode (#113700),2025-03-20 04:50:58+00:00,Kunal Pathak,0,,,1,1,1,do not report inlining decision to runtime in debug mode (issue_ref)
dotnet/runtime,e9ebf41c520ed3a78d08733a54b254d12b5527a1,Move unsupported target conditions to IL in mcc tests (#112399),2025-03-20 14:16:23+00:00,Tomasz Sowiński,0,,,112,895,55,move unsupported target conditions to il in mcc tests (issue_ref)
dotnet/runtime,96ec4b9d0f8aefd9f48b3c1bf730b4f017c7dbb5,"Implement `ShuffleNative` methods and optimise `Shuffle` for non-constant `indices` (#99596)

* Squash into 1 commit

* Remove internal dependency on ShuffleUnsafe's behaviour wrt high bit

* Optimise some codegen

- Optimise comparison in `gtNewSimdShuffleNodeVariable` for xarch
- Optimise for constant vector in Vector256.Shuffle{Unsafe} when have AVX2 only

* jit format

* jit format

* Simplify logic for using Shuffle for ShuffleUnsafe

* Move `ShuffleUnsafeModified` out of `Base64Helper`

- This was requested feedback via Discord

* Remove unnecessary `CompExactlyDependsOn` and `using`s

* Update SearchValues.cs

* Support AVX-512/AVX-10.1 acceleration of Shuffle V128<ulong/long/double>

* Additional optimisation for V512 constant index shuffle

- When 128-bit lanes are not crossed, emit vpshufb instead of vperm*

* jit format & typo

* Fix operand order

* Changes to `IsValidForShuffle` & jit format

- Ensure we use IsValidForShuffle correctly (i.e., ensure all cases that could be emittet at some point, are able to be done)
- jit format changes

* jit format

* Update hwintrinsicxarch.cpp

* Update hwintrinsicxarch.cpp

* Update gentree.cpp

- Implement preferring `vshufpd`/`vpshufd`/`vshufps` (when same size & possible & no zeroing) over `vpshufb` (when no crossing lane) over `vpermd`/`vpermps`/`vpermpd`/the ushort & byte equivalents in constant index case

Update gentree.cpp

- Continuation of previous commit, for the variable index shuffle stuff

Update gentree.cpp

Update gentree.cpp

Fix typo

* Make `op2DupSafe` be consistently ordered

- Adjust code such that `op2DupSafe` is consistently ordered with respect to `retNode`(it happens to end up before now) - this is the likely cause of the test failures

* jit format

* Use `compIsEvexOpportunisticallySupported` instead of explicit AVX-10 in remaining places

* jit format

* Update gentree.cpp

- Ensure `op1` side effects are done before `op2` side effects

* Update Vector128.cs

* Use `BlockNonDeterministicIntrinsics` instead of `CompExactlyDependsOn`

- As per feedback

* Ensure V128<byte> ShuffleUnsafe is not regressed on mono

* Update gentree.cpp

* Rename `ShuffleUnsafe` to `ShuffleNative`

- And do a full review of the logic & comments of all my code
- Fix 3 bugs (2 pre-existing)
- Simplify/improve some code

* jit format

* jit format again

* um

* Move assertion on arm64 to correct spot

* Normalize indices for `vpshufb` in all cases of constant indices Shuffle

- This is a nice-to-have, not a correctness issue - it matches what we're doing throughout the rest of the function, and keeps the asm more readable imo

* jit format

* Revert last pair of commits

- There's other places where they're not normalised. could be done, but not really worth the trouble probably

* Feedback

* Address some feedback & a bug fix

- Implement a bunch of feedback
- Fix an oversight in `IsValidForShuffle` where we don't treat something as variable indices that gets emitted as such

* Ensure ShuffleNative's behaviour with reflection/function pointers/etc. is the same as a normal call

- Not a particularly pretty solution to the problem, but it should work correctly at least

* jit format & compilation error

* jit format & fix buuld

* jit format & fix build

* jit format

* Update hwintrinsicxarch.cpp

* Update gentree.cpp

Missing `!= nullptr` & typo in comment & add additional comments in a few places.

* Fix mono code

* Mono: also cast arguments

* Move mono impl back into c#

- This should fix the mono issues (wasm impl assumes indices are constant)
- Additionally ensure V128.Shuffle(byte/sbyte) is vectorised for all mono platforms with ssse3 or arm64 advsimd or packedsimd, when given variable indices

* Update Vector128.cs

* um

---------

Co-authored-by: Tanner Gooding <tagoo@outlook.com>
Co-authored-by: Egor Bogatov <egorbo@gmail.com>",2025-03-20 15:04:51+00:00,Hamish Arblaster,1,a1997d442644a8bb8a483d3f9f36aab2c0f377c9,Fix bug in hwintrinsicxarch.cpp for Shuffle methods on xarch (#114125),23,4694,253,"implement methods and optimise for non-constant (issue_ref)* squash into 1 commit* remove internal dependency on shuffleunsafe's behaviour wrt high bit* optimise some codegen- optimise comparison in for xarch- optimise for constant vector in vector256.shuffle{unsafe} when have avx2 only* jit format* jit format* simplify logic for using shuffle for shuffleunsafe* move out of - this was requested feedback via discord* remove unnecessary and s* update searchvalues.cs* support avx-512/avx-10.1 acceleration of shuffle v128<ulong/long/double>* additional optimisation for v512 constant index shuffle- when 128-bit lanes are not crossed, emit vpshufb instead of vperm** jit format & typo* fix operand order* changes to & jit format- ensure we use isvalidforshuffle correctly (i.e., ensure all cases that could be emittet at some point, are able to be done)- jit format changes* jit format* update hwintrinsicxarch.cpp* update hwintrinsicxarch.cpp* update gentree.cpp- implement preferring // (when same size & possible & no zeroing) over (when no crossing lane) over ///the ushort & byte equivalents in constant index caseupdate gentree.cpp- continuation of previous commit, for the variable index shuffle stuffupdate gentree.cppupdate gentree.cppfix typo* make be consistently ordered- adjust code such that is consistently ordered with respect to (it happens to end up before now) - this is the likely cause of the test failures* jit format* use instead of explicit avx-10 in remaining places* jit format* update gentree.cpp- ensure side effects are done before side effects* update vector128.cs* use instead of - as per feedback* ensure v128<byte> shuffleunsafe is not regressed on mono* update gentree.cpp* rename to - and do a full review of the logic & comments of all my code- fix 3 bugs (2 pre-existing)- simplify/improve some code* jit format* jit format again* um* move assertion on arm64 to correct spot* normalize indices for in all cases of constant indices shuffle- this is a nice-to-have, not a correctness issue - it matches what we're doing throughout the rest of the function, and keeps the asm more readable imo* jit format* revert last pair of commits- there's other places where they're not normalised. could be done, but not really worth the trouble probably* feedback* address some feedback & a bug fix- implement a bunch of feedback- fix an oversight in where we don't treat something as variable indices that gets emitted as such* ensure shufflenative's behaviour with reflection/function pointers/etc. is the same as a normal call- not a particularly pretty solution to the problem, but it should work correctly at least* jit format & compilation error* jit format & fix buuld* jit format & fix build* jit format* update hwintrinsicxarch.cpp* update gentree.cppmissing & typo in comment & add additional comments in a few places.* fix mono code* mono: also cast arguments* move mono impl back into c#- this should fix the mono issues (wasm impl assumes indices are constant)- additionally ensure v128.shuffle(byte/sbyte) is vectorised for all mono platforms with ssse3 or arm64 advsimd or packedsimd, when given variable indices* update vector128.cs* um---------"
dotnet/runtime,f5652e45a61569dc2b729a0916116b54e700583a,"[Apple mobile] Run `System.Runtime.Serialization.Xml.ExporterTypesTests.TypesTest` when `DataSetXmlSerializationIsSupported` is set (#113084)

* Conditionally run the test",2025-03-20 15:23:02+00:00,Milos Kotlar,1,718c776b82a8c33061ad8f07269a55c41bf595ad,"Serialization reenable tests (#118507)

* Turn 'em on - lets see what is still a problem.

* Remove commented 'ActiveIssues' for tests that are confirmed passing now.

* Re-disable one WASM test that still fails.

* Cleanup more commented [ActiveIssue] attributes.

* Disable on wasm

* Fix platform detection for skipping test.

* Remove commented [ActiveIssue] attributes.",1,2,2,[apple mobile] run when is set (issue_ref)* conditionally run the test
dotnet/runtime,a95c2317d882fdabcec7ef3a22a4ebbe02672ed6,"JIT: Optimize BSWAP16 and emit revb instructions for BSWAP on LoongArch (#112479)

* Import ReverseEndianness for LA64

* Eliminate cast under bswap16",2025-03-20 17:34:54+00:00,Huo Yaoyuan,0,,,5,95,2,jit: optimize bswap16 and emit revb instructions for bswap on loongarch (issue_ref)* import reverseendianness for la64* eliminate cast under bswap16
dotnet/runtime,dc88476f102123edebd6b2d2efe5a56146f60094,"JIT: enable inlining methods with EH (#112998)

Enable inlining of method with EH. Inlinee EH clauses are integrated
into the root method EH table at the appropriate point (mid-table if
the call site is in an EH region; at table end otherwise).

Don't try an inline managed methods with unmanaged calling conventions.
This mainly copes with x86 where unmanaged calling conventions use reversed
arg order, but I've disabled it in general. No diffs as these methods seem
to always include EH.

Remove uses of `compXcptnsCount` as this goes stale whenever we clone or
remove EH, or (eventually) inline methods with EH. Instead, rely on
`compHndBBtabCount`.

Defer allocating x86's shadow SP var and area until later in jitting,
so this reflects any changes in EH table structure. In particular we
often are able to eliminate EH in part or all together and this saves
a low-offset allocation and so leads to some nice code size savings on
x86.

Also on x86 remove the runtime-dependent catch class case from the
computation for keeping this alive, as we now transform such into
runtime lookups in filters (that may well keep this alive).

Once we can inline methods with EH, IL ranges are no longer a reliable indicator
of a mutual-protect try regions. Instead, after importation, we can rely on
mutual-protect trys having the same start and end blocks.

Also update other case where we were using `info.compXcptnsCount` in morph
to decide if we needed a frame pointer. This lets us simplify the logic around
frame pointers and EH (though I still think we're making up our minds too early).

Contributes to #108900.",2025-03-20 19:52:01+00:00,Andy Ayers,1,454673e1d6da4067750646523ee67e066a388cd7,"JIT: fix case where importer can lose type information (#114033)

If the IL has branches with non-empty stack, the importer will spill the stack to temps. TYP_REF spill temps will never have any detailed type information. So if on the other side of the branch the IL immediately makes a call, the importer may direct sub the spill temp instead of creating a new arg temp that at least captures the declared argument type.

This can (among other things) inhibit cloning based on loop-invariant delegate GDV.

Partially addresses regressions in #113913.",12,281,78,"jit: enable inlining methods with eh (issue_ref)enable inlining of method with eh. inlinee eh clauses are integratedinto the root method eh table at the appropriate point (mid-table ifthe call site is in an eh region; at table end otherwise).don't try an inline managed methods with unmanaged calling conventions.this mainly copes with x86 where unmanaged calling conventions use reversedarg order, but i've disabled it in general. no diffs as these methods seemto always include eh.remove uses of as this goes stale whenever we clone orremove eh, or (eventually) inline methods with eh. instead, rely on.defer allocating x86's shadow sp var and area until later in jitting,so this reflects any changes in eh table structure. in particular weoften are able to eliminate eh in part or all together and this savesa low-offset allocation and so leads to some nice code size savings onx86.also on x86 remove the runtime-dependent catch class case from thecomputation for keeping this alive, as we now transform such intoruntime lookups in filters (that may well keep this alive).once we can inline methods with eh, il ranges are no longer a reliable indicatorof a mutual-protect try regions. instead, after importation, we can rely onmutual-protect trys having the same start and end blocks.also update other case where we were using in morphto decide if we needed a frame pointer. this lets us simplify the logic aroundframe pointers and eh (though i still think we're making up our minds too early).contributes to issue_ref."
dotnet/runtime,13ec54f489b114684a44245716d95b92c429182c,"JIT: revise escape analysis bit vector usage (#113711)

This change decouples the ""bv"" space (used for the connection graph
and related data) from the ""lclnum"" space, so that the graph nodes can
represent other entities that are not locals.

Conditional escape analysis introduced pseudo-locals, so we already had
this notion, but it was implicit, and extending it further (for say
fields) was proving awkward. So now it is explicit.

The one tricky aspect is that as the analysis proceeds we may introduce
new locals that we want to track, so we need to anticipate this and
leave bv space for them, since our bv length must be known in advance.

Only a subset of locals need to be analyzed, so in some (many?) cases
the overall BV lengths should decrease, though there is now a bit more
work to interpret what the bits mean.

We reuse the tracked var concept and data structures for locals, eg to
map from bv index to local num; for other entities the mappings are
one-to-one so reverse mapping doesn't require table lookups.",2025-03-20 20:04:55+00:00,Andy Ayers,0,,,2,607,289,"jit: revise escape analysis bit vector usage (issue_ref)this change decouples the ""bv"" space (used for the connection graphand related data) from the ""lclnum"" space, so that the graph nodes canrepresent other entities that are not locals.conditional escape analysis introduced pseudo-locals, so we already hadthis notion, but it was implicit, and extending it further (for sayfields) was proving awkward. so now it is explicit.the one tricky aspect is that as the analysis proceeds we may introducenew locals that we want to track, so we need to anticipate this andleave bv space for them, since our bv length must be known in advance.only a subset of locals need to be analyzed, so in some (many?) casesthe overall bv lengths should decrease, though there is now a bit morework to interpret what the bits mean.we reuse the tracked var concept and data structures for locals, eg tomap from bv index to local num; for other entities the mappings areone-to-one so reverse mapping doesn't require table lookups."
dotnet/runtime,5379704c791f6e38da6cd6d8dd5fc831728c2f3d,"Target NetFrameworkCurrent in tests and remove old mentions (#113667)

* Target NetFrameworkCurrent in tests and remove old mentions

... of previous .NET Framework versions in docs / tests.

NetFrameworkMinimum (net462) -> NetFrameworkCurrent (net481) so that we can
start consuming xunit v3 which requires at least net472. Use
NetFrameworkCurrent as the actual runtime that is then used is
.NET Framework 4.8.1 anyway (innerloop & CI).

* Revert source-generator ref assembly change

* Try to fix VoidMainWithExitCodeApp test

* Fix typo

---------

Co-authored-by: Alexander Köplinger <alex.koeplinger@outlook.com>",2025-03-20 20:30:24+00:00,Viktor Hofer,1,e5adc39fbd4cb27af365f2469f3fbad34d075fb6,"Add test coverage for issue #99193 (#119384)

* Add test coverage for issue #99193

* Make two-digit year boundary test more resilient to changes in DateTimeFormat.Calendar.TwoDigitYearMax",135,242,225,target netframeworkcurrent in tests and remove old mentions (issue_ref)* target netframeworkcurrent in tests and remove old mentions... of previous .net framework versions in docs / tests.netframeworkminimum (net462) -> netframeworkcurrent (net481) so that we canstart consuming xunit v3 which requires at least net472. usenetframeworkcurrent as the actual runtime that is then used is.net framework 4.8.1 anyway (innerloop & ci).* revert source-generator ref assembly change* try to fix voidmainwithexitcodeapp test* fix typo---------
dotnet/runtime,bce01a69c0067068130f389aaf45a4d87dbc6f8f,"Remove `CryptoConfigForwarder` et al. 

This class does not seem to be necessary after the unification of the crypto assemblies.",2025-03-20 21:48:55+00:00,Theodore Tsirpanis,0,,,9,34,90,remove et al. this class does not seem to be necessary after the unification of the crypto assemblies.
dotnet/runtime,15118117f2c9273ab545157225dd0c8b3bdb5824,"Revert ""Refactor `external_assembly_probe` to be separate from single-file bu…"" (#113738)

This reverts commit 035ee5cfe3e3bd1d5039cb82f580cef30a335c3b.",2025-03-20 21:49:11+00:00,Andy Gocke,1,492f6f7edb1a33c2d87b6072c1243cfb531f8656,"Fix handling of empty RUNTIME_FUNCTIONs sections in R2R (#114091)

- Do not set RVA for empty RUNTIME_FUNCTION section in crossgen2
- Do not register empty RUNTIME_FUNCTIONs section at runtime

Fixes #113117",21,141,264,"revert ""refactor to be separate from single-file bu…"" (issue_ref)this reverts commit 035ee5cfe3e3bd1d5039cb82f580cef30a335c3b."
dotnet/runtime,97facd085021b4923c9f4deeb7b775181a244511,Scaffold SLH-DSA based on ML-DSA,2025-03-20 21:49:56+00:00,Pranav Senthilnathan,0,,,8,1703,2,scaffold slh-dsa based on ml-dsa
dotnet/runtime,aa8f4a3c8e5737485edd6575c7493011a07b2c66,Handle missing Vector<double>.One case in interp (#113739),2025-03-20 23:01:51+00:00,Larry Ewing,0,,,1,6,0,handle missing vector<double>.one case in interp (issue_ref)
dotnet/runtime,630de838aca00a7d7af635ca00312bd7a5d75c5d,"Interpreter GC info stage 1: Use templates to specialize gc info encoder/decoder (#113223)

Turn GcInfoEncoder, GcInfoDecoder, and GcSlotDecoder into templates that accept a type argument that provides encoding traits
Give each target's GcInfoEncoding a unique name so that you can see which one is being used in the debugger
Remove no-op normalization of safe point counts and interruptible range counts
Remove (DE)NORMALIZE_REGISTER since it's a no-op",2025-03-20 23:14:52+00:00,Katelyn Gadd,1,3dbeb51ac384b4bf571026e3e97d8e186b2debb2,"Parallel change to the diagnostic update for GC Info decoder. (#113888)

* parallel change to diagnostic update

* decoder does not need to worry about parsing GCInfo V1

* fix for unix

* clarified a comment",6,626,592,"interpreter gc info stage 1: use templates to specialize gc info encoder/decoder (issue_ref)turn gcinfoencoder, gcinfodecoder, and gcslotdecoder into templates that accept a type argument that provides encoding traitsgive each target's gcinfoencoding a unique name so that you can see which one is being used in the debuggerremove no-op normalization of safe point counts and interruptible range countsremove (de)normalize_register since it's a no-op"
dotnet/runtime,8cd8921a5f49c32e1aaafccf13c85c07b453534c,"[cDAC] Stack walk support more Frame types (#112997)

Adds cDAC support for runtime Frame types:
* `TransitionFrame` (and subclasses)
* `FuncEvalFrame`
* `ResumableFrame` (and subclasses)
* `FaultingExceptionFrame`
* `HijackFrame`",2025-03-20 23:39:26+00:00,Max Charlamb,0,,,31,922,123,[cdac] stack walk support more frame types (issue_ref)adds cdac support for runtime frame types:* (and subclasses)* * (and subclasses)* *
dotnet/runtime,f6fc3fb0de12b4b707e8f0bc953bce5e74f8bfff,"ML-KEM: OpenSSL Part 1

This partially implements ML-KEM for Linux on top of OpenSSL 3.5. The current supported operations are key generation, key import and export, and key encapsulation and decapsulation.",2025-03-21 01:02:12+00:00,Kevin Jones,0,,,31,3052,4,"ml-kem: openssl part 1this partially implements ml-kem for linux on top of openssl 3.5. the current supported operations are key generation, key import and export, and key encapsulation and decapsulation."
dotnet/runtime,cb651397404f19a8b75ae5719e4d738ddf80afef,"Add Await overloads for configured task awaitables. (#113675)

Add Await overloads for configured task awaitables.",2025-03-21 04:31:35+00:00,Vladimir Sadov,1,4e047615d115bb6396d36fcdf35d0774a2420619,Fix the value of MethodImplOptions.Async in spec (#115126),1,9,0,add await overloads for configured task awaitables. (issue_ref)add await overloads for configured task awaitables.
dotnet/runtime,81f20570dd6a7ff15e3937e66a8bb80b77fd6d64,[browser] memory pressure for MSBuild (#113696),2025-03-21 07:12:22+00:00,Pavel Savara,1,d4b08f96ee0368867be579c03181a2f58b9e01a4,Fix no-argument ./build.sh invocation (#116315),4,10,2,[browser] memory pressure for msbuild (issue_ref)
dotnet/runtime,1f067293272ab6d42e329782798bc2f7398d1907,"Revert ""Reenable SslStreamTlsResumeTests.ClientDisableTlsResume_Succeeds (#11…"" (#113730)

This reverts commit 230a4ce927e04c0223659218873239593ebf2dd4.",2025-03-21 07:26:52+00:00,Radek Zikmund,0,,,1,1,0,"revert ""reenable sslstreamtlsresumetests.clientdisabletlsresume_succeeds (issue_ref…"" (issue_ref)this reverts commit 230a4ce927e04c0223659218873239593ebf2dd4."
dotnet/runtime,5c4e7b0875c81b53bbbe1fa4d9f83b9cabe64206,"Doc comment improvements (mostly System.Formats.Nrbf) (#113705)

* doc comment improvements

* couple more",2025-03-21 08:58:03+00:00,Genevieve Warren,1,56ce9bd28dfd46b3b99d64825cea94b7bacbf4f3,"Fix NullReferenceException and InvalidCastException in SystemClassWithMembersAndTypesRecord (#121409)

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>
Co-authored-by: adamsitnik <6011991+adamsitnik@users.noreply.github.com>",14,28,29,doc comment improvements (mostly system.formats.nrbf) (issue_ref)* doc comment improvements* couple more
dotnet/runtime,b422772cc0cd367bade499fbd7dd746e995a5a4e,[RISC-V] Simplify stack probing on riscv64 (#112697),2025-03-21 10:10:31+00:00,Tymoteusz Wenerski,1,129820a012ce8f362d671f10a32f60e161b8a5ae,Fix Windows build (#114062),3,21,235,[risc-v] simplify stack probing on riscv64 (issue_ref)
dotnet/runtime,f9ca627aae29e836cc3646733c212a4c74ff6115,[browser] Conditional access to DOM when searching for hotreload script (#113754),2025-03-21 11:23:26+00:00,Marek Fišera,0,,,1,1,1,[browser] conditional access to dom when searching for hotreload script (issue_ref)
dotnet/runtime,97a8af91e8d005216624528fe7ef501a6c95f25c,[browser] avoid AOT OOM SIGKILL (#113755),2025-03-21 12:02:16+00:00,Pavel Savara,0,,,1,1,0,[browser] avoid aot oom sigkill (issue_ref)
dotnet/runtime,04aa3ef683c224a190545615ffdf612c88d6dece,"Initial CoreClr Android logcat log integration. (#113416)

Initial CoreClr Android logcat integration was removed from cf2aae6. This PR adds a unified approach re-routing runtime console logging though a central log API defined in native/minipal/log.h potential shared between components as well as runtimes.

This initial PR starts out defining a new header under native/minipal/log.h that includes a straightforward API to log formatted and raw output using different priority. It includes regular printf/vprintf style functions as well as low level none crt direct write capabilities, usable in high speed or async safe logging.

API closely mimics Mono's logging API defined in glib.h and the idea is to potentially rewire Mono's logging to use this new API going forward potentially adding more capabilities into native/minipal/log.h

Ability to log different log message using different priority is inherited from Mono and maps close to logcat priority levels, where different priorities can be filtered directly in logcat, creating virtual log streams. API includes a way to log directly to virtual standard error/output streams in case no specific need for fine grained priority-based logging exists. On platforms supporting stderr/stdout this will be a 1:1 mapping, but on platforms like logcat, stderr/stdout will be mapped to similar priority levels (error, info).

There is no buffering when calling logcat log functions, each log call will end up as a new log entry. Code that relies on ability to do multiple logging calls and expect to get a new line only when writing \n into the log buffer, won't behave as expected when using logcat. This PR adjust a couple of places where such assumptions are made, appending logging into a string buffer before passed to minipal_log_write API's. Logcat has an internal buffer limitation of 4068 bytes, buffers larger than that will be truncated. To mitigate this logging targeting Android includes a mechanism splitting up the bigger buffer into smaller chunks based on \n in log message, if there is no \n in bigger log message, message will still be logged in chunks, but each chunk ending up as a separate logcat message. Internal chunk size has been defined to 4000 bytes, making room for future internal logcat buffer reduction. Regular console logging enforces a buffer size limit as well on low level write calls, this limitation was directly inherited from previous implementation in src/coreclr/vm/util.cpp into native/minipal/log.c, if buffer exceeds chunk size, it will be split into multiple chunks where each chunk is written ""as is"" to underlying write function.

On Mono, formatted print style logcat implementation uses dynamic memory allocation + vsnprintf and low level __android_log_write. Current implementation in native/minipal/log.h adapt a similar schema but tries to first use a smaller stack buffer, inline with Androids internal implementation of __android_log_vprint use of 1024 bytes buffer. If log message is below 1024, implementation will match __android_log_vprint and use stack memory, but if exceeding 1024, implementation fallbacks to dynamic memory allocation, format message into dynamic memory buffer and then pass it through minipal_log_write to correctly handle max payload limitations as described above.

This initial PR adapts a smaller set of source files under src/coreclr to use the new logging API as a first step adaption. It makes sure the LOG macro as well as exception handling gets emitted through the new log API ending up in logcat. PR also adapts jit logging as well as diagnostic servers pause message, currently written directly to console.

This PR will be followed by an additional PR adapting more sources under src/coreclr/vm to use the new logging API enabling more log messages to end up in logcat on Android. Once the initial pass is done, adaption to new logging API will probably happen on a case-by-case basis.",2025-03-21 15:46:06+00:00,Johan Lorensson,1,4bfdd53a625de820396d5476a84aafa9f19a7a96,"Fix issue when logging stack overflow in WinForm apps. (#114432)

* Fix issue when logging stack overflow in WinForm apps.

WinForm apps doesn't have a console and apparently, Windows implementation
of fileno doesn't have same behaviour as POSIX implementation where a
return of -1 means error. On Windows, fileno will return
-2 when there is no console attached to the app. This bypass the check
in write_file that should have return 0, instead it will call_write that
will return an error that was not fully accounted for leading to a
infinite loop.

Fix makes sure Windows implementation sees -1 and -2 as invalid file
descriptors. Fix also account for errors returned by _write breaking
out of the loop.

Fixes https://github.com/dotnet/runtime/issues/114412.

* According to POSIX and Win32 documentation of fileno/_fileno there
is no real error return, so as long as it gets called with a valid
stream, it should return something that write/_write should handle
and since we handle error returns from calls to write/_write, in
minipal_log_write it might be better to let underlying API's
decode the meaning of file descriptors returned by fileno/_fileno.

minipal_log_write will only pass stdout/stderr to fileno/_fileno
and they should always be valid file streams, even if there is no
console attached. On a Windows app running without console, it will
return back a file descriptor of -2 in that case that _write will
see as a unavailable console and return -1 that minipal_log_write
will handle.",18,487,105,"initial coreclr android logcat log integration. (issue_ref)initial coreclr android logcat integration was removed from cf2aae6. this pr adds a unified approach re-routing runtime console logging though a central log api defined in native/minipal/log.h potential shared between components as well as runtimes.this initial pr starts out defining a new header under native/minipal/log.h that includes a straightforward api to log formatted and raw output using different priority. it includes regular printf/vprintf style functions as well as low level none crt direct write capabilities, usable in high speed or async safe logging.api closely mimics mono's logging api defined in glib.h and the idea is to potentially rewire mono's logging to use this new api going forward potentially adding more capabilities into native/minipal/log.hability to log different log message using different priority is inherited from mono and maps close to logcat priority levels, where different priorities can be filtered directly in logcat, creating virtual log streams. api includes a way to log directly to virtual standard error/output streams in case no specific need for fine grained priority-based logging exists. on platforms supporting stderr/stdout this will be a 1:1 mapping, but on platforms like logcat, stderr/stdout will be mapped to similar priority levels (error, info).there is no buffering when calling logcat log functions, each log call will end up as a new log entry. code that relies on ability to do multiple logging calls and expect to get a new line only when writing \n into the log buffer, won't behave as expected when using logcat. this pr adjust a couple of places where such assumptions are made, appending logging into a string buffer before passed to minipal_log_write api's. logcat has an internal buffer limitation of 4068 bytes, buffers larger than that will be truncated. to mitigate this logging targeting android includes a mechanism splitting up the bigger buffer into smaller chunks based on \n in log message, if there is no \n in bigger log message, message will still be logged in chunks, but each chunk ending up as a separate logcat message. internal chunk size has been defined to 4000 bytes, making room for future internal logcat buffer reduction. regular console logging enforces a buffer size limit as well on low level write calls, this limitation was directly inherited from previous implementation in src/coreclr/vm/util.cpp into native/minipal/log.c, if buffer exceeds chunk size, it will be split into multiple chunks where each chunk is written ""as is"" to underlying write function.on mono, formatted print style logcat implementation uses dynamic memory allocation + vsnprintf and low level __android_log_write. current implementation in native/minipal/log.h adapt a similar schema but tries to first use a smaller stack buffer, inline with androids internal implementation of __android_log_vprint use of 1024 bytes buffer. if log message is below 1024, implementation will match __android_log_vprint and use stack memory, but if exceeding 1024, implementation fallbacks to dynamic memory allocation, format message into dynamic memory buffer and then pass it through minipal_log_write to correctly handle max payload limitations as described above.this initial pr adapts a smaller set of source files under src/coreclr to use the new logging api as a first step adaption. it makes sure the log macro as well as exception handling gets emitted through the new log api ending up in logcat. pr also adapts jit logging as well as diagnostic servers pause message, currently written directly to console.this pr will be followed by an additional pr adapting more sources under src/coreclr/vm to use the new logging api enabling more log messages to end up in logcat on android. once the initial pass is done, adaption to new logging api will probably happen on a case-by-case basis."
dotnet/runtime,22183356ccdedbe4cbc0394e162bda8fbf163b1f,[browser] managed Diagnostics.Metrics and Diagnostics.Tracing single-threaded (#113524),2025-03-21 16:24:57+00:00,Pavel Savara,0,,,26,542,332,[browser] managed diagnostics.metrics and diagnostics.tracing single-threaded (issue_ref)
dotnet/runtime,44c08b874792487f81c546ea112b7d4a677c911e,"Change ZipBlocks structs to classes (#113453)

* Change ZipBlocks structs to classes. Update the places where they're used and adjust their nullability rules.",2025-03-21 21:30:55+00:00,Carlos Sánchez López,0,,,5,117,109,change zipblocks structs to classes (issue_ref)* change zipblocks structs to classes. update the places where they're used and adjust their nullability rules.
dotnet/runtime,e206974524754a1259318f4f0a022c1c7423ec47,"Separate code manager for the interpreter (#112985)

* Separate code manager for the interpreter

This change adds a separate code manager for the interpreted code. Here
is an overview of the changes:
* A base class EECodeGenManager is extracted from the EEJitManager
* A new class InterpreterJitManager derived from the EECodeGenManager is
  added and implemented.
* Similarly, a base class CEECodeGenInfo is extracted from the CEEJitInfo
* A new class CInterpreterJitInfo derived from the CEECodeGenInfo is added
  and implemented
* The CodeHeader and RealCodeHeader became base classes and
  JitCodeHeader, RealJitCodeHeader, InterpreterCodeHeader and
  RealInterpreterCodeHeader were added. The CodeHeader derivates don't
  add any extra data, the JitCodeHeader just provides the methods that
  are needed to access Jit specific members of the RealJitCodeHeader.
* The UnsafeJitFunction is refactored so that the interpreter (if
  enabled) is invoked first and then the AltJit / Jit ones are called.
* A new DOTNET_Interpreter, DOTNET_InterpreterPath and
  DOTNET_InterpreterName env vars are added to match the existing AltJit
  ones.

* Make the code headers independent

Make the jit and interpreter code headers independent

* Added missing #ifdef

* Fix MUSL build break

* Rework of the CodeHeader separation

The previous way was introducing 5% regression in all exception handling
microbenchmarks, this gets us back to the same perf as without any code
manager changes.

* PR feedback and some cleanup

* Fix Unix build failure

The clang doesn't do late parsing of the template code, so the helpers
cannot be in the .inl file as they reference some types that are not
defined yet at that point.

* Fix a bug

* Fix build break

* Add dummy ICodeManager derived InterpreterCodeManager

* Remove unused ICodeManager methods

* PR feedback

* PR feedback

* Refactored GC and EH info allocation
* Added Interpreter-TODO at some places
* Reverted some changes that were not needed anymore

* PR Feedback

* Get rid of some template usages by small refactoring

* Reflect feedback",2025-03-22 01:57:36+00:00,Jan Vorlicek,1,143bd05597043509045a01d5e47533b8cbdec7ec,"Fix minidump generation - missing IP for exception stack frames (#115025)

This was caused by changes in PR https://github.com/dotnet/runtime/pull/114582 where
Exception::GetStackTrace called GetThread() which throws an error exception in the
DAC. Changed the enummem.cpp code in ClrDataAccess::DumpManagedExcepObject() to call
the GetStackTrace overload that allows a NULL pCurrentThread parameter to be passed.",18,2321,1039,"separate code manager for the interpreter (issue_ref)* separate code manager for the interpreterthis change adds a separate code manager for the interpreted code. hereis an overview of the changes:* a base class eecodegenmanager is extracted from the eejitmanager* a new class interpreterjitmanager derived from the eecodegenmanager is added and implemented.* similarly, a base class ceecodegeninfo is extracted from the ceejitinfo* a new class cinterpreterjitinfo derived from the ceecodegeninfo is added and implemented* the codeheader and realcodeheader became base classes and jitcodeheader, realjitcodeheader, interpretercodeheader and realinterpretercodeheader were added. the codeheader derivates don't add any extra data, the jitcodeheader just provides the methods that are needed to access jit specific members of the realjitcodeheader.* the unsafejitfunction is refactored so that the interpreter (if enabled) is invoked first and then the altjit / jit ones are called.* a new dotnet_interpreter, dotnet_interpreterpath and dotnet_interpretername env vars are added to match the existing altjit ones.* make the code headers independentmake the jit and interpreter code headers independent* added missing #ifdef* fix musl build break* rework of the codeheader separationthe previous way was introducing 5% regression in all exception handlingmicrobenchmarks, this gets us back to the same perf as without any codemanager changes.* pr feedback and some cleanup* fix unix build failurethe clang doesn't do late parsing of the template code, so the helperscannot be in the .inl file as they reference some types that are notdefined yet at that point.* fix a bug* fix build break* add dummy icodemanager derived interpretercodemanager* remove unused icodemanager methods* pr feedback* pr feedback* refactored gc and eh info allocation* added interpreter-todo at some places* reverted some changes that were not needed anymore* pr feedback* get rid of some template usages by small refactoring* reflect feedback"
dotnet/runtime,1f76c1f47b6a635ceb39f2735f84b0eba8a4bf5c,"Ensure we keep metadata for fields (#113759)

We already do this for methods but `FieldMetadataNode` was missing the matching logic (we'd only keep metadata for custom modifiers in the lines above those I'm touching).",2025-03-22 07:58:21+00:00,Michal Strehovský,0,,,2,26,1,ensure we keep metadata for fields (issue_ref)we already do this for methods but was missing the matching logic (we'd only keep metadata for custom modifiers in the lines above those i'm touching).
dotnet/runtime,b3788239f221a29fa58ffeec54b3639458113a4c,"JIT: make non-null assertions about all indir addr types (#113772)

Instead of just GC types. This removes some gratuitous diffs
when escape analysis can retype a ref or byref to long.

Also remove obsolete (?) block for TYP_LONG assertions.",2025-03-22 16:13:15+00:00,Andy Ayers,0,,,1,1,13,jit: make non-null assertions about all indir addr types (issue_ref)instead of just gc types. this removes some gratuitous diffswhen escape analysis can retype a ref or byref to long.also remove obsolete (?) block for typ_long assertions.
dotnet/runtime,ae64202c529bac2eb08e6d8ff3c3f530f97cc8c8,Allow embedded ICU data with StaticICULinking (#113761),2025-03-23 20:55:32+00:00,Adeel Mujahid,0,,,4,49,2,allow embedded icu data with staticiculinking (issue_ref)
dotnet/runtime,db03493769728d6b7e02981b432d5136144c4fd0,"Optimize compression of embedded PDB file. (#113803)

* Optimize compression of embedded PDB file.
Instead of buffering the compressed bytes to a `MemoryStream`, we directly write them to the `BlobBuilder`. This is achieved by defining a write-only stream type that wraps a `BlobBuilder`.

* Simplify writing blob builder to stream.",2025-03-23 21:01:09+00:00,Theodore Tsirpanis,0,,,1,22,9,"optimize compression of embedded pdb file. (issue_ref)* optimize compression of embedded pdb file.instead of buffering the compressed bytes to a , we directly write them to the . this is achieved by defining a write-only stream type that wraps a .* simplify writing blob builder to stream."
dotnet/runtime,a50b4a078439c518d1074c43ff4740f528d37fea,Move JIT_InitPInvokeFrame implementation to assembler on x86 and ARM32 (#113791),2025-03-23 22:18:28+00:00,Filip Navara,1,25cb3869a735ce3de7e1514fd7196d05fb68ee15,"linux-x86: Implement R2R P/Invoke helpers (#114142)

Fixes #68411",14,110,214,move jit_initpinvokeframe implementation to assembler on x86 and arm32 (issue_ref)
dotnet/runtime,8ece1f09ee333fed75df48305255ec9543d46ab6,"Disable FEATURE_STUBPRECODE_DYNAMIC_HELPERS (#113811)

It is causing rare intermittent crashes across all tests. Workaround #113810.",2025-03-24 00:49:36+00:00,Jan Kotas,0,,,1,0,4,disable feature_stubprecode_dynamic_helpers (issue_ref)it is causing rare intermittent crashes across all tests. workaround issue_ref.
dotnet/runtime,28c417f605ba0f04af980847695ec9de470743a0,"[mono] Implement `AssemblyExtensions.TryGetRawMetadata`. (#111642)

---------

Co-authored-by: Larry Ewing <lewing@microsoft.com>
Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-03-24 01:35:29+00:00,Theodore Tsirpanis,0,,,7,30,1,[mono] implement . (issue_ref)---------
dotnet/runtime,a28dd826d93b01ea36514af5eab3aebd5f9dc681,Passthorugh publishing and sourcelink from the outer build (#113712),2025-03-24 09:56:31+00:00,Matt Mitchell,1,a430a1e2bcdf38461664633ecaeecafc5367cd3b,"Build Mono's Framework libs in unified builds (#113897)

Fixes https://github.com/dotnet/source-build/issues/4945",1,2,0,passthorugh publishing and sourcelink from the outer build (issue_ref)
dotnet/runtime,496612c3839e819a3f61e3df4eafbc1d2aa9d067,"[wasm] Bump chrome for testing - linux: 134.0.6998.165, windows: 134.0.6998.166 (#113802)

* Automated bump of chrome version

* Update V8 version in BrowserVersions.props

---------

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>
Co-authored-by: Ilona Tomkowicz <32700855+ilonatommy@users.noreply.github.com>",2025-03-24 10:28:27+00:00,github-actions[bot],0,,,1,2,2,"[wasm] bump chrome for testing - linux: 134.0.6998.165, windows: 134.0.6998.166 (issue_ref)* automated bump of chrome version* update v8 version in browserversions.props---------"
dotnet/runtime,1f42ca3b30224ff2a927f227639ff64d22d232a3,Remove duplicate define,2025-03-24 12:44:28+00:00,Kevin Jones,0,,,1,0,2,remove duplicate define
dotnet/runtime,ed32992a5f087c475009547bf936fbfb6995dba0,"Set Range header correctly in AddRange. (#113720)

Fixes https://github.com/dotnet/runtime/issues/113690.",2025-03-24 13:16:23+00:00,Bradley Grainger,1,bbc50e511150368fd10f56783c48aa3a04f1f5d3,"Fix Hang on when GetRequestStreamAsync (#113409)

* Fix Hang on GetRequestStreamAsync in case underlying HttpClient.SendAsync throws for Non-Buffering Write case

* Update src/libraries/System.Net.Requests/src/System/Net/HttpWebRequest.cs

* Linux returns UnknownError for exception

* Fix edge case

* Update src/libraries/System.Net.Requests/src/System/Net/HttpWebRequest.cs

Co-authored-by: Anton Firszov <antonfir@gmail.com>

* Fix unintentional changes

* Handle exception

* Review feedback

---------

Co-authored-by: Anton Firszov <antonfir@gmail.com>",2,21,1,set range header correctly in addrange. (issue_ref)fixes
dotnet/runtime,e0f1b2188f0f33b0708eff9d32597c50fb2f06d1,"[mono] Add a few bridge tests (#113703)

* [mono][sgen] Fix DUMP_GRAPH debug option build for tarjan bridge

* [mono][sgen] Don't create ScanData* during debug dumping of SCCs

It serves no purpose and it would later crash the runtime since we didn't patch the lockword back in place.

* [mono][sgen] Fix some null deref crashes in DUMP_GRAPH debug option

* [mono][tests] Add bridge tests

These are ported from some of the bridge tests we had on mono/mono. In order to test them we compare between the output of the new and the tarjan bridge.",2025-03-24 14:39:42+00:00,Vlad Brezae,1,659321ff5db13026f52aec70cf2a6692bd4be454,"Fix an edge case in the Tarjan GC bridge that leads to losing xref information (#112825)

* Fix an edge case in the Tarjan SCC that lead to losing xref information

In the Tarjan SCC bridge processing there's a color graph used to find out
connections between SCCs. There was a rare case which only manifested when
a cycle in the object graph points to another cycle that points to a bridge
object. We only recognized direct bridge pointers but not pointers to other
non-bridge SCCs that in turn point to bridges and where we already calculated
the xrefs. These xrefs were then lost.

* Add test case to sgen-bridge-pathologies and add an assert to catch the original bug

* Add review

---------

Co-authored-by: Vlad Brezae <brezaevlad@gmail.com>",5,472,21,[mono] add a few bridge tests (issue_ref)* [mono][sgen] fix dump_graph debug option build for tarjan bridge* [mono][sgen] don't create scandata* during debug dumping of sccsit serves no purpose and it would later crash the runtime since we didn't patch the lockword back in place.* [mono][sgen] fix some null deref crashes in dump_graph debug option* [mono][tests] add bridge teststhese are ported from some of the bridge tests we had on mono/mono. in order to test them we compare between the output of the new and the tarjan bridge.
dotnet/runtime,8b1111d5e557c1280c964705c4254280e5f71e3e,"Update dependencies from https://github.com/dotnet/xharness build 20250317.4 (#113819)

Microsoft.DotNet.XHarness.CLI , Microsoft.DotNet.XHarness.TestRunners.Common , Microsoft.DotNet.XHarness.TestRunners.Xunit
 From Version 10.0.0-prerelease.25164.1 -> To Version 10.0.0-prerelease.25167.4

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-03-24 14:49:40+00:00,dotnet-maestro[bot],0,,,3,10,10,"update dependencies from build 20250317.4 (issue_ref)microsoft.dotnet.xharness.cli , microsoft.dotnet.xharness.testrunners.common , microsoft.dotnet.xharness.testrunners.xunit from version 10.0.0-prerelease.25164.1 -> to version 10.0.0-prerelease.25167.4"
dotnet/runtime,83d1100e55116ae6789498528433d66d9de95dab,"Fix x86 exception handling edge case (#113760)

When a NULL reference exception occurs in a JIT helper or a VSD stub,
runtime pretends the exception occured in the managed caller. There is a
bug on x86 Windows where the COMPlusThrowCallback considers that frame
to be the frame where the exception actually occurred (based on the
m_crawl.isFirst). In case the call to the helper is the last instruction
in a try region, the exception handler lookup would reject that address
and the exception may not get handled at the right place or at all.

This change fixes it by ensuring that the m_crawl.isFirst is not set
when the frame is not the frame of the failure.

Close #113106",2025-03-24 14:55:43+00:00,Jan Vorlicek,1,fa004fb5ce5ec9f99d1c3ba3adc48c9473cc8eaa,"Fix issue where wrong message was added to EventReporter. (#113969)

https://github.com/dotnet/runtime/pull/113416 used a shared SString buffer when building the log message written to console when hitting an unhandled managed exception. It appears that the same buffer was used when passing data over to EventReporter, but it would then include more information than expected. This will fix so we only pass over the exception message, inline with previous beharior.

Fixes issue found in https://github.com/dotnet/aspnetcore/pull/61011.",2,12,5,"fix x86 exception handling edge case (issue_ref)when a null reference exception occurs in a jit helper or a vsd stub,runtime pretends the exception occured in the managed caller. there is abug on x86 windows where the complusthrowcallback considers that frameto be the frame where the exception actually occurred (based on them_crawl.isfirst). in case the call to the helper is the last instructionin a try region, the exception handler lookup would reject that addressand the exception may not get handled at the right place or at all.this change fixes it by ensuring that the m_crawl.isfirst is not setwhen the frame is not the frame of the failure.close issue_ref"
dotnet/runtime,2846fb4bd4e5afc0908891ff728f2afb9900f4c3,"Remove all explicit GC Poll calls in unmanaged code. (#113715)

Remove explicit GC Poll from GC.SuppressFinalize().
Remove GC Poll from FCall and move it to managed, Buffer.__BulkMoveWithWriteBarrier().
Remove unneccessary explicit FC_GC_POLL() calls.
Remove unneccessary explicit FC_GC_POLL_RET() calls.
Remove unmanaged GCPoll implementation.
Implement JIT intrinsic for GC Poll, Thread.FastGCPoll.",2025-03-24 14:58:52+00:00,Aaron Robinson,1,eb3219911c0bbe2ec460b04be7e8e842ec45e06f,Fix regression caused by overload resolution. (#115164),28,130,158,"remove all explicit gc poll calls in unmanaged code. (issue_ref)remove explicit gc poll from gc.suppressfinalize().remove gc poll from fcall and move it to managed, buffer.__bulkmovewithwritebarrier().remove unneccessary explicit fc_gc_poll() calls.remove unneccessary explicit fc_gc_poll_ret() calls.remove unmanaged gcpoll implementation.implement jit intrinsic for gc poll, thread.fastgcpoll."
dotnet/runtime,f81d5dc7610a535625622ddf74c69e2c5264391c,[browser] Soft fingerprint for boot config (#113762),2025-03-24 15:57:40+00:00,Marek Fišera,0,,,1,9,4,[browser] soft fingerprint for boot config (issue_ref)
dotnet/runtime,6b176b209eee5d91bdeb456ac1de7097bd787337,Ensure RegistryKey.CreateSubKey passes RegistrySecurity (#113768),2025-03-24 16:04:18+00:00,Eric StJohn,0,,,3,122,33,ensure registrykey.createsubkey passes registrysecurity (issue_ref)
dotnet/runtime,b914836b6a86a1c3766cbd05b7c7f5fc199cbc3b,"ML-KEM: Overloads

Add ease-of-use overloads for MLKem API where appropriate.",2025-03-24 16:33:08+00:00,Kevin Jones,0,,,6,840,56,ml-kem: overloadsadd ease-of-use overloads for mlkem api where appropriate.
dotnet/runtime,d843d2df6325ad2ef46dd61c0976783ca8ad43ce,"JIT: Avoid rare self-edge in register homing (#113796)

Only the secret stub parameter goes through this path to create an edge
in the graph, and it was missing a check for whether it was going into
the same register as it was in. This would cause register homing to
generate unnecessary moves into a temporary register because it thought
there was a conflict.

Usually the secret stub parameter has to be allocated to a callee saved
variable, so we typically do not see this inefficiency.",2025-03-24 16:34:04+00:00,Jakob Botsch Nielsen,0,,,1,4,1,"jit: avoid rare self-edge in register homing (issue_ref)only the secret stub parameter goes through this path to create an edgein the graph, and it was missing a check for whether it was going intothe same register as it was in. this would cause register homing togenerate unnecessary moves into a temporary register because it thoughtthere was a conflict.usually the secret stub parameter has to be allocated to a callee savedvariable, so we typically do not see this inefficiency."
dotnet/runtime,2fe5b1bb5d4c5bd73767ac656b8094a60cf7028c,Support HasThis and ExplicitThis calling conventions in AssemblyBuilder and DynamicMethod (#113666),2025-03-24 17:17:42+00:00,Steve Harter,0,,,10,197,14,support hasthis and explicitthis calling conventions in assemblybuilder and dynamicmethod (issue_ref)
dotnet/runtime,dc03c5efe0314b2563cb8a5937b515d44f2457de,Allow using P/Invoke helpers for IL stubs (#113824),2025-03-24 17:43:25+00:00,Filip Navara,0,,,1,8,1,allow using p/invoke helpers for il stubs (issue_ref)
dotnet/runtime,45a0e10e4cf2018f8f3ea677d1d784de63a28a81,"[RISC-V] Detect Zba & Zbb extensions (#113676)

* [RISC-V] Detect Zba & Zbb extensions

* [RISC-V] Reflect constants in cpufeatures.h to HardwareIntrinsicHelpers.cs

* [RISC-V] Use hwprobe syscall directly

* [RISC-V] Check syscall return value and use baseline support on failure

* [RISC-V] Regenerate JIT version GUID

* [RISC-V] Add Zba Zbb extension configuration variables",2025-03-24 17:43:59+00:00,Fuad Ismail,1,06074165996fc51e7f65da0b507f02faaa58c1d1,"Fix AltJit and VectorT ISA specification (#113901)

* Fix AltJit and VectorT ISA specification

When running as an AltJit when the generated code will not be used
(either because of a mismatched VM, or because RunAltJitCode=0),
the JIT overwrites the passed in ISAs. When it does so, it zeros
out the VectorT* ISA flags.

Instead of this, carry over the existing ISA flags. This should work
for same-architecture SPMI replays.

I'm not sure if additional logic for specifically setting the VectorT*
ISA is required for other scenarios, or if incorporating similar logic
to `EEJitManager::SetCpuInfo()` into `Compiler::compCompile()` is
required.

Adds new JIT debugging helpers `dIsa()` and `dIsaFlags()` to dump out
string representations of `CORINFO_InstructionSet` and
`CORINFO_InstructionSetFlags`.

Fixes #113869

* Only copy over VectorT ISAs for matching VM case

That is, AltJit on same architecture (matching VM) with RunAltJitCode=0.",18,242,14,[risc-v] detect zba & zbb extensions (issue_ref)* [risc-v] detect zba & zbb extensions* [risc-v] reflect constants in cpufeatures.h to hardwareintrinsichelpers.cs* [risc-v] use hwprobe syscall directly* [risc-v] check syscall return value and use baseline support on failure* [risc-v] regenerate jit version guid* [risc-v] add zba zbb extension configuration variables
dotnet/runtime,de72cb81bcd7a14d4bcbb5cf3ffe07ef85dc82a4,"Enable SuperPMI replay for APX ISA testing (#113843)

* Don't fail altjit compiles when RunAltJitCode=0

With RunAltJitCode=0, the JIT returns CORJIT_SKIPPED. We don't want
superpmi to fail these compiles.

* Enable SuperPMI replay for APX ISA testing

Create a new `runtime-coreclr superpmi-replay-apx` pipeline that
does SuperPMI replay an AltJit with various APX enabling configuration
options set. This enables some amount of APX testing even without
hardware available to run the generated code.

Notes:
1. Create a new jit-replay-pipeline.yml template to share the
   superpmi-replay pipeline implementation with the existing pipeline.
2. The existing pipeline is designated the ""standard"" replay type and
   the new pipeline the ""apx"" replay type.
3. The APX pipeline does replays for Windows x64 and Linux x64.
4. The configurations tested are:
```
a. ""RunAltJitCode=0"", ""EnableAPX=1"", ""EnableApxNDD=1""
b. ""RunAltJitCode=0"", ""EnableAPX=1"", ""JitStressRex2Encoding=1""
c. ""RunAltJitCode=0"", ""EnableAPX=1"", ""JitStressPromotedEvexEncoding=1""
d. ""RunAltJitCode=0"", ""EnableAPX=1"", ""JitStressRegs=4000""
e. ""RunAltJitCode=0"", ""EnableAPX=1"", ""EnableApxNDD=1"", ""JitStressRex2Encoding=1"", ""JitStressPromotedEvexEncoding=1"", ""JitStressRegs=4000""
```",2025-03-24 18:02:40+00:00,Bruce Forstall,0,,,14,234,110,"enable superpmi replay for apx isa testing (issue_ref)* don't fail altjit compiles when runaltjitcode=0with runaltjitcode=0, the jit returns corjit_skipped. we don't wantsuperpmi to fail these compiles.* enable superpmi replay for apx isa testingcreate a new pipeline thatdoes superpmi replay an altjit with various apx enabling configurationoptions set. this enables some amount of apx testing even withouthardware available to run the generated code.notes:1. create a new jit-replay-pipeline.yml template to share the superpmi-replay pipeline implementation with the existing pipeline.2. the existing pipeline is designated the ""standard"" replay type and the new pipeline the ""apx"" replay type.3. the apx pipeline does replays for windows x64 and linux x64.4. the configurations tested are:"
dotnet/runtime,f17c21c1d1d4dd8825bfc378858b5fdb9375c6a5,"Update dependencies from https://github.com/dotnet/source-build-reference-packages build 20250320.2 (#113820)

Microsoft.SourceBuild.Intermediate.source-build-reference-packages
 From Version 10.0.616401 -> To Version 10.0.617002

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-03-24 18:13:31+00:00,dotnet-maestro[bot],0,,,1,2,2,update dependencies from build 20250320.2 (issue_ref)microsoft.sourcebuild.intermediate.source-build-reference-packages from version 10.0.616401 -> to version 10.0.617002
dotnet/runtime,551379a185a011789e29a9d326804eb15995f2c7,"Expand ""return condition"" into ""return condition ? true : false"" (#107499)",2025-03-24 20:38:37+00:00,Egor Bogatov,1,ef1a8ab967065da279479f7dfe67d9b778a50d29,"JIT: Don't compact away block in cond-to-return folding (#113931)

Fixes #113923. If we are considering folding a conditional block with successors that loop back to it, don't try to compact the successors, as that will quietly remove the conditional block from the flowgraph. Instead, skip compaction, and let the cond-to-return shape check fail.",5,252,378,"expand ""return condition"" into ""return condition ? true : false"" (issue_ref)"
dotnet/runtime,ac13edc2df258639b106edfe88147520d0ff3247,"Change CORJIT_FLAG_READYTORUN and CORJIT_FLAG_PREJIT to CORJIT_FLAG_AOT (#113850)

CORJIT_FLAG_READYTORUN and CORJIT_FLAG_PREJIT were always both set
together. Introduce a new name to be more explicit of a concept
that includes both ReadyToRun and NativeAOT (AOT == Ahead Of Time).

Introduce new JIT helpers `IsAot` (for either NativeAOT or R2R),
`IsNativeAot`, and `IsReadyToRun`.

Remove the name ""ngen"" in a bunch of places in the JIT code.",2025-03-24 21:07:59+00:00,Bruce Forstall,1,c446706e99a71ba4d54dc8f321d010309bcf6194,"JIT: arrays are now not always TYP_REF (#115801)

Remove some asserts saying otherwise.

Fixes #115495.",36,173,188,"change corjit_flag_readytorun and corjit_flag_prejit to corjit_flag_aot (issue_ref)corjit_flag_readytorun and corjit_flag_prejit were always both settogether. introduce a new name to be more explicit of a conceptthat includes both readytorun and nativeaot (aot == ahead of time).introduce new jit helpers (for either nativeaot or r2r),, and .remove the name ""ngen"" in a bunch of places in the jit code."
dotnet/runtime,76750df493f2692c13459fc77c065594ea1f628e,"Remove helper method frames from Monitors (#113242)

- Convert to the FCALL fast path/QCALL slow path approach
- Make EnterHelperResult/LeaveHelperAction into enum class so that they can safely be silently marshaled between native and managed
- Move the lockTaken flag handling to managed code so we can share more helpers

Benchmarking indicates this may actually be faster than the previous approach. I'm a bit skeptical, but its not out of the question.",2025-03-24 21:36:23+00:00,David Wrighton,1,c200ad6b74932cd6c5c42bd4581478882c0508b6,"Fix resetting for JIT retry (#113842)

I've made a mistake in my recent PR where the `ResetForJitRetry` method
on a new base class was not marked as virtual by accident. So the JIT
specific version was not executed and part of the state was not reset.

Close #113840",16,399,437,"remove helper method frames from monitors (issue_ref)- convert to the fcall fast path/qcall slow path approach- make enterhelperresult/leavehelperaction into enum class so that they can safely be silently marshaled between native and managed- move the locktaken flag handling to managed code so we can share more helpersbenchmarking indicates this may actually be faster than the previous approach. i'm a bit skeptical, but its not out of the question."
dotnet/runtime,659321ff5db13026f52aec70cf2a6692bd4be454,"Fix an edge case in the Tarjan GC bridge that leads to losing xref information (#112825)

* Fix an edge case in the Tarjan SCC that lead to losing xref information

In the Tarjan SCC bridge processing there's a color graph used to find out
connections between SCCs. There was a rare case which only manifested when
a cycle in the object graph points to another cycle that points to a bridge
object. We only recognized direct bridge pointers but not pointers to other
non-bridge SCCs that in turn point to bridges and where we already calculated
the xrefs. These xrefs were then lost.

* Add test case to sgen-bridge-pathologies and add an assert to catch the original bug

* Add review

---------

Co-authored-by: Vlad Brezae <brezaevlad@gmail.com>",2025-03-24 21:53:02+00:00,Filip Navara,1,8f94d2e7b0a15fed4845d85ff8d987bd2f664dff,"[SGen/Tarjan] Handle edge case with node heaviness changing due to deduplication (#113044)

* [SGen/Tarjan] Handle edge case with node heaviness changing due to deduplication

Do early deduplication

Fix Windows build

Add test cases to sgen-bridge-pathologies

* Move test code

* Remove old code

* Add extra check (no change to functionality)",2,14,3,fix an edge case in the tarjan gc bridge that leads to losing xref information (issue_ref)* fix an edge case in the tarjan scc that lead to losing xref informationin the tarjan scc bridge processing there's a color graph used to find outconnections between sccs. there was a rare case which only manifested whena cycle in the object graph points to another cycle that points to a bridgeobject. we only recognized direct bridge pointers but not pointers to othernon-bridge sccs that in turn point to bridges and where we already calculatedthe xrefs. these xrefs were then lost.* add test case to sgen-bridge-pathologies and add an assert to catch the original bug* add review---------
dotnet/runtime,ec0a902183834367dd93b280b5a46bf9a00dab98,ML-KEM: SubjectPublicKeyInfo import and export,2025-03-25 01:30:42+00:00,Kevin Jones,0,,,14,641,48,ml-kem: subjectpublickeyinfo import and export
dotnet/runtime,fa4c14e0d82447c25aa0fa4d9735c905e30836ac,"Reapply ""Refactor `external_assembly_probe` to be separate from single-file bundle probing"" (#113776)

Undo the revert in https://github.com/dotnet/runtime/pull/113738

Fix on top of the original: Make a copy of the host contract information on initialization instead of just operating on a pointer to the struct. This should address intermittent failures on shutdown where a thread is still running after coreclr_shutdown has completed and the actual contract struct provided by a host may be cleaned up. The assumption is that any function pointers provided on the host contract at initialization should remain valid for the process lifetime.",2025-03-25 03:00:00+00:00,Elinor Fung,1,6f0ce34f58223d8c6fca2587a66bff0fb188ccf8,"Fix check for `host_runtime_contract` having `external_assembly_probe` (#118792)

We should check the size of the contract to determine if it can have `external_assembly_probe`. In practice, we probably haven't hit this since `hostpolicy` ships next to `coreclr` - but any sort of patching such that `coreclr` is newer than `hostpolicy` could result in incorrectly determining that `external_assembly_probe` is set.",22,273,147,"reapply ""refactor to be separate from single-file bundle probing"" (issue_ref)undo the revert in fix on top of the original: make a copy of the host contract information on initialization instead of just operating on a pointer to the struct. this should address intermittent failures on shutdown where a thread is still running after coreclr_shutdown has completed and the actual contract struct provided by a host may be cleaned up. the assumption is that any function pointers provided on the host contract at initialization should remain valid for the process lifetime."
dotnet/runtime,8be8425ce2a3e236bb647b59e29577e95cf571a3,"Fix SslStreamDisposeTest failures during parallel handshake (#113834)

* Fix SslStreamDisposeTest.Dispose_ParallelWithHandshake_ThrowsODE test failures

* Fix build",2025-03-25 07:44:43+00:00,Radek Zikmund,1,9b024f61e11796550382d9293bf57642e2e7f0cb,"Fix SslStreamDisposeTest for parallel handshake on Unix (#114100)

* [Test Failure] SslStreamDisposeTest.Dispose_ParallelWithHandshake_ThrowsODE on Unix
Fixes #113833

* fixup! [Test Failure] SslStreamDisposeTest.Dispose_ParallelWithHandshake_ThrowsODE on Unix Fixes #113833

* fixup! fixup! [Test Failure] SslStreamDisposeTest.Dispose_ParallelWithHandshake_ThrowsODE on Unix Fixes #113833

* Update src/libraries/System.Net.Security/tests/FunctionalTests/SslStreamDisposeTest.cs

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>

* Fix build

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",1,29,24,fix sslstreamdisposetest failures during parallel handshake (issue_ref)* fix sslstreamdisposetest.dispose_parallelwithhandshake_throwsode test failures* fix build
dotnet/runtime,98b365dc69ab4fc945b968b6ae916e8d3b3261fa,"Use dotnet-install script directly from CDN instead of dot.net (#113847)

The dot.net redirector is currently having issues, we should be using the script directly from the CDN anyway.",2025-03-25 08:20:07+00:00,Alexander Köplinger,0,,,5,5,5,"use dotnet-install script directly from cdn instead of dot.net (issue_ref)the dot.net redirector is currently having issues, we should be using the script directly from the cdn anyway."
dotnet/runtime,122e7014d2cbca93c300ed22de526bfe4092b673,"JIT: Fix asserts from #112728 (#113845)

* fix cast asserts

* fix containment of CreateScalar

* add tests",2025-03-25 11:53:21+00:00,Clinton Ingram,1,cd115dd8d39c9ef50279eb653f98c1bcbceca135,"JIT: Fix improperly contained BroadcastScalarToVector(CreateScalar(GT_LONG)) (#113994)

* fix improperly contained CreateScalar

* add check for BroadcastScalarToVector(CreateScalar())",5,105,8,jit: fix asserts from issue_ref (issue_ref)* fix cast asserts* fix containment of createscalar* add tests
dotnet/runtime,32299f4b6aa148fd6ee0da222b01334a88414a25,"Cut off deep recursion over arrays (#113825)

When we hit a generic recursion over arrays, we detect it, but there was no cutoff logic to cut off the expansion. The result is a compile time OOM. This adds a cutoff, using the same cutoff number we use to look for deep generics.",2025-03-25 13:29:45+00:00,Michal Strehovský,1,8ea21688f92b2b9063c75f00b95adc2e0a0f2694,"Add targeted regression test for #115442 (#115817)

Resolves #115442.",2,21,1,"cut off deep recursion over arrays (issue_ref)when we hit a generic recursion over arrays, we detect it, but there was no cutoff logic to cut off the expansion. the result is a compile time oom. this adds a cutoff, using the same cutoff number we use to look for deep generics."
dotnet/runtime,71cd23bbb81e94f5d865dd79544b6e1fc6bd412b,"[HttpStress] Re-enable ASAN for msquic (#113669)

* re-enable ASAN for msquic

* bump gcc version in LD_PRELOAD path

* use same asan options as CoreCLR",2025-03-25 15:05:04+00:00,Anton Firszov,1,c6566fb0bcc539c523be9796ba5af681bf65a904,"[QUIC] Consume main MsQuic in stress (#119278)

* Consume main MsQuic in stress

* Fix msquic build",1,5,5,[httpstress] re-enable asan for msquic (issue_ref)* re-enable asan for msquic* bump gcc version in ld_preload path* use same asan options as coreclr
dotnet/runtime,a92f65202a01ea90a1593a690961de00e9840f42,[Bounds Checks] Make union/intersect operations more precise (#113862),2025-03-25 15:33:58+00:00,Egor Bogatov,1,ac7f8e0329cf998efa5d5e9387ec6d0583757524,Fix BCE regression (#115980),2,41,11,[bounds checks] make union/intersect operations more precise (issue_ref)
dotnet/runtime,1f4482cefee83222c9ec72ed7f7a71b5bcf3e436,Cleanup #ifdefs around FindFirstInterruptiblePoint (#113873),2025-03-25 15:46:28+00:00,Filip Navara,0,,,1,2,7,cleanup #ifdefs around findfirstinterruptiblepoint (issue_ref)
dotnet/runtime,5f2182685983c6300d91624692b6342c134c8a2c,JIT: Initialize matrix for enumerators in object stack allocation (#113879),2025-03-25 16:07:53+00:00,Jakob Botsch Nielsen,0,,,1,2,1,jit: initialize matrix for enumerators in object stack allocation (issue_ref)
dotnet/runtime,12fc2d2ff39e7ccc79a7d76c43cb476f4a77ec4c,"Update maintenance-packages dependencies (#112152)

* Update maintenance-packages dependencies
* Update to latest in nuget.org",2025-03-25 16:42:10+00:00,Carlos Sánchez López,1,7efe7f79cf5f1c1788bb56c98dc399f6a0ea1fb5,"Bump System.Text.Json toolset version (#113384)

Resolves CG alert",1,9,8,update maintenance-packages dependencies (issue_ref)* update maintenance-packages dependencies* update to latest in nuget.org
dotnet/runtime,889d514aace75eac9ed88bc9c155a82eb9dac78a,"[cDAC] Statically link in native dependencies (#113627)

* Statically link cDAC unwinder libraries
* Revert INSTALL_ALL_ARTIFACTS implementation
* Creates cdac CMAKEcomponent for native cdac dependencies which is built with tools.cdacreader",2025-03-25 17:51:52+00:00,Max Charlamb,1,6331d44dae54e259a9ccb461d57661b98f249781,"Fix inadvertently upgrading compiler warnings to errors (#114323)

I noticed this while looking at an issue in the 9.0 branch with latest clang which runs into a couple warnings fixed in main with https://github.com/dotnet/runtime/pull/108888.

We intentionally don't set `-Werror` in release branches to avoid breaking the build when newer compilers add warnings via https://github.com/dotnet/runtime/blob/37e4d45236e68946db9d264593aa31a9c00534bc/eng/native/configurecompiler.cmake#L564-L567

However this didn't work because msbuild's WarnAsError was still reading the console output of the native build and upgrading any line with ""warning: "" to an msbuild error and breaking the build.

Suppress this by setting IgnoreStandardErrorWarningFormat=""true"" on the Exec call. We already did this in the coreclr and mono runtime builds, we just missed it in libs.native.",12,89,56,[cdac] statically link in native dependencies (issue_ref)* statically link cdac unwinder libraries* revert install_all_artifacts implementation* creates cdac cmakecomponent for native cdac dependencies which is built with tools.cdacreader
dotnet/runtime,3d04883901d21ad58dfad0d146be189596ced05c,"Remove unnecessary bool check in ZipArchive ReadCentralDirectory (#113784)

Co-authored-by: Carlos Sánchez López <1175054+carlossanlop@users.noreply.github.com>",2025-03-25 20:35:39+00:00,Marc Brooks,1,3ba8279f7b754d1e6fadb5292a959bf097b86776,"Fix loop condition for reading central directory headers (#114023)

Updated the `while` loop condition in `ReadCentralDirectory` to use `<=` instead of `<` for the buffer length. This change allows the loop to quickly throw if the expected number of entries is found to be incorrect due to the central directory data being malformed.

Add test to verify this case by malforming the archive in a way that the while loop condition that checks for the buffer length being smaller or equal than current position + block constant section size becomes false and exits immediately.",1,1,2,remove unnecessary bool check in ziparchive readcentraldirectory (issue_ref)
dotnet/runtime,d7347b5bbb5f174d6261952205661eda752c84b7,"Some SVE fixes for code generation (#113860)

* standalone fix to generate sve mov instead of NEON mov

* standalone fix to generate ldr/str when emit_RR is called

* Remove unwanted change

* Do not do sve_mov for scalar variant

* jit format fix",2025-03-25 21:48:59+00:00,Kunal Pathak,1,14fb8d69a68522667a76d6fd78b9522fb05eebff,"Fix the encoding for sve_mov (#114244)

My #113860 exposed a bug in encoding of sve_mov, where we were wrongly skipping the encoding the Zm field and giving wrong instruction.

Fixes: #113939",2,10,3,some sve fixes for code generation (issue_ref)* standalone fix to generate sve mov instead of neon mov* standalone fix to generate ldr/str when emit_rr is called* remove unwanted change* do not do sve_mov for scalar variant* jit format fix
dotnet/runtime,ac5f93030ba0c3d2bc47fa0c51079ef8c9c00165,"JIT: remove single-def restriction from escape analysis type refinement (#113808)

Instead, model all assignments to unescaped locals in the connection graph,
and deduce the new type via graph analysis.

Update the INDEX_ADDR expansion to handle cases where the array is stack
allocated (interior pointers are now TYP_I_IMPL, not TYP_BYREF).

Also use the new ""unknown source"" to do a more accurate analysis with OSR;
only OSR locals have unknown values.",2025-03-25 21:51:45+00:00,Andy Ayers,0,,,5,324,240,"jit: remove single-def restriction from escape analysis type refinement (issue_ref)instead, model all assignments to unescaped locals in the connection graph,and deduce the new type via graph analysis.update the index_addr expansion to handle cases where the array is stackallocated (interior pointers are now typ_i_impl, not typ_byref).also use the new ""unknown source"" to do a more accurate analysis with osr;only osr locals have unknown values."
dotnet/runtime,671559e930d95f6d1da73de74389a82de35c76b5,"Two superpmi.py tweaks (#113890)

* Two superpmi.py tweaks

1. Add superpmi.py command line to the log file. This makes it easier to
   reproduce the run when you only have a log file (such as from the
   CI).
2. When outputting assertions in replay, prefix each assertion with a
   string that makes it easier to find in a large log file, and
   number the assertions that are output.

* Code review feedback

1. Add more detail about the assert, including how many instances
2. Limit the number of instances summarized to an arbitrary number of 25",2025-03-26 02:19:44+00:00,Bruce Forstall,0,,,1,16,2,"two superpmi.py tweaks (issue_ref)* two superpmi.py tweaks1. add superpmi.py command line to the log file. this makes it easier to reproduce the run when you only have a log file (such as from the ci).2. when outputting assertions in replay, prefix each assertion with a string that makes it easier to find in a large log file, and number the assertions that are output.* code review feedback1. add more detail about the assert, including how many instances2. limit the number of instances summarized to an arbitrary number of 25"
dotnet/runtime,37151aa041faa4170b8659df195b5aef8bced666,"Fix ThrowControlForThread on x86 funclet platforms (#113872)

* Fix ThrowControlForThread on x86 funclet platforms

* Update src/coreclr/vm/threadsuspend.cpp

* Fix header file too",2025-03-26 02:59:57+00:00,Filip Navara,1,379af99ab7dacd5daa924f6b7df9907af3bf93d9,"Remove most usages of the macro-based ""don't return in this block"" hack (#113856)

* Remove unused frame type

* Remove ""debug noreturn"" from GCPROTECT. GCFrame instances set up through those macros are automatically removed by the constructor

* Actually check for if we have an exception in flight instead of requiring that we don't do a return to ensure we call a function in the success case.

* Create a separate ""preserve last error"" holder type to allow removing a no-return scope

* Allow returning from within an (UN)INSTALL_UNWIND_AND_CONTINUE_HANDLER scope as nothing in the uninstall requires manual unwinding.

* Don't block ""return"" in contracts at compile time, just rely on PR review to not allow people to return out of a contract block.

* Adjust one usage of BEGIN/END_PRESERVE_LAST_ERROR to not use the holder as it shouldn't happen in that case for unwinding.

* Add assert that CoopTransitionHolder isn't being used in a function called while a C++ exception is in flight

* Remove PRESERVE_LAST_ERROR macros and enforce correct usage of CoopTransitionHolder by a runtime assert instead of a compile-time error.

* Remove some now-unneeded ASSURE_NO_RETURN_END macros and remove the last of the OK_TO_RETURN macros

* PR feedback",2,25,22,fix throwcontrolforthread on x86 funclet platforms (issue_ref)* fix throwcontrolforthread on x86 funclet platforms* update src/coreclr/vm/threadsuspend.cpp* fix header file too
dotnet/runtime,b43c8529df76ddff2b788ce98fa7ebe8dd413b2a,"Disable `this` variable deoptimization on x86/funclets (#113882)

We already get the necessary semantics with existing checks in LinearScan::allocateRegisters and Compiler::lvaSetVarLiveInOutOfHandler. They both specifically handle JIT32_GCENCODER and lvaKeepAliveAndReportThis() case.",2025-03-26 03:10:03+00:00,Filip Navara,0,,,1,0,9,disable variable deoptimization on x86/funclets (issue_ref)we already get the necessary semantics with existing checks in linearscan::allocateregisters and compiler::lvasetvarliveinoutofhandler. they both specifically handle jit32_gcencoder and lvakeepaliveandreportthis() case.
dotnet/runtime,ed56fe6a8cf8d620d2b5a2e3a00518e38598e506,"Templatize the two SuperPMI collection specifications (#113886)

* Commonize the two SuperPMI collection specifications

* Remove unused collection upload specifications",2025-03-26 04:41:02+00:00,Bruce Forstall,0,,,3,366,725,templatize the two superpmi collection specifications (issue_ref)* commonize the two superpmi collection specifications* remove unused collection upload specifications
dotnet/runtime,ead91c58a213dada09809886ebdc2c8b6a25ae29,"Move assembler code from virtualcallstubcpu.hpp to asmhelpers.asm (#113828)

* Move assembler code from virtualcallstubcpu.hpp to asmhelpers.asm

* Address PR feedback",2025-03-26 05:59:32+00:00,Filip Navara,0,,,10,227,228,move assembler code from virtualcallstubcpu.hpp to asmhelpers.asm (issue_ref)* move assembler code from virtualcallstubcpu.hpp to asmhelpers.asm* address pr feedback
dotnet/runtime,707dc2daf6e1fe707ccc1cbf25b58d4cef3b1fa2,"[main] Update dependencies from dotnet/emsdk (#113190)

* Update dependencies from https://github.com/dotnet/emsdk build 20250305.2

Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport , Microsoft.SourceBuild.Intermediate.emsdk
 From Version 10.0.0-preview.3.25155.1 -> To Version 10.0.0-preview.3.25155.2

Dependency coherency updates

runtime.linux-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.linux-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.osx-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.osx-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.win-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.win-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport
 From Version 10.0.0-alpha.1.25125.1 -> To Version 10.0.0-alpha.1.25152.1 (parent: Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport

* Update dependencies from https://github.com/dotnet/emsdk build 20250313.1

Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport , Microsoft.SourceBuild.Intermediate.emsdk
 From Version 10.0.0-preview.3.25155.1 -> To Version 10.0.0-preview.3.25163.1

Dependency coherency updates

runtime.linux-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.linux-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.osx-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.osx-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.win-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.win-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport
 From Version 10.0.0-alpha.1.25125.1 -> To Version 10.0.0-alpha.1.25160.1 (parent: Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport

* Update dependencies from https://github.com/dotnet/emsdk build 20250317.3

Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport , Microsoft.SourceBuild.Intermediate.emsdk
 From Version 10.0.0-preview.3.25155.1 -> To Version 10.0.0-preview.4.25167.3

* Update dependencies from https://github.com/dotnet/emsdk build 20250318.3

Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport , Microsoft.SourceBuild.Intermediate.emsdk
 From Version 10.0.0-preview.3.25155.1 -> To Version 10.0.0-preview.4.25168.3

Dependency coherency updates

runtime.linux-arm64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.linux-x64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.win-arm64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.win-x64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.osx-arm64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.osx-x64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.linux-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.linux-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.linux-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.linux-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.linux-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.linux-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.win-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.win-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.win-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.osx-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.osx-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.osx-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.osx-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.osx-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.osx-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools
 From Version 19.1.0-alpha.1.25103.1 -> To Version 19.1.0-alpha.1.25160.1 (parent: Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport

* Update dependencies from https://github.com/dotnet/emsdk build 20250324.2

Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport , Microsoft.SourceBuild.Intermediate.emsdk
 From Version 10.0.0-preview.3.25155.1 -> To Version 10.0.0-preview.4.25174.2

Dependency coherency updates

runtime.linux-arm64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.linux-x64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.win-arm64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.win-x64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.osx-arm64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.osx-x64.Microsoft.NETCore.Runtime.JIT.Tools,runtime.linux-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.linux-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.linux-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.linux-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.linux-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.linux-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.win-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.win-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.win-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.osx-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.osx-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.osx-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.osx-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang,runtime.osx-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk,runtime.osx-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools,runtime.linux-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.linux-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.osx-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.osx-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.win-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport,runtime.win-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport
 From Version 19.1.0-alpha.1.25103.1 -> To Version 19.1.0-alpha.1.25167.1 (parent: Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport

* Update dependencies from https://github.com/dotnet/emsdk build 20250325.1

Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport , Microsoft.SourceBuild.Intermediate.emsdk
 From Version 10.0.0-preview.3.25155.1 -> To Version 10.0.0-preview.4.25175.1

* Update dependencies from https://github.com/dotnet/emsdk build 20250325.2

Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport , Microsoft.SourceBuild.Intermediate.emsdk
 From Version 10.0.0-preview.3.25155.1 -> To Version 10.0.0-preview.4.25175.2

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-03-26 10:45:39+00:00,dotnet-maestro[bot],0,,,2,109,109,"[main] update dependencies from dotnet/emsdk (issue_ref)* update dependencies from build 20250305.2microsoft.net.workload.emscripten.current.manifest-10.0.100.transport , microsoft.sourcebuild.intermediate.emsdk from version 10.0.0-preview.3.25155.1 -> to version 10.0.0-preview.3.25155.2dependency coherency updatesruntime.linux-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.linux-musl-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.linux-x64.microsoft.netcore.runtime.wasm.node.transport,runtime.linux-musl-x64.microsoft.netcore.runtime.wasm.node.transport,runtime.osx-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.osx-x64.microsoft.netcore.runtime.wasm.node.transport,runtime.win-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.win-x64.microsoft.netcore.runtime.wasm.node.transport from version 10.0.0-alpha.1.25125.1 -> to version 10.0.0-alpha.1.25152.1 (parent: microsoft.net.workload.emscripten.current.manifest-10.0.100.transport* update dependencies from build 20250313.1microsoft.net.workload.emscripten.current.manifest-10.0.100.transport , microsoft.sourcebuild.intermediate.emsdk from version 10.0.0-preview.3.25155.1 -> to version 10.0.0-preview.3.25163.1dependency coherency updatesruntime.linux-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.linux-musl-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.linux-x64.microsoft.netcore.runtime.wasm.node.transport,runtime.linux-musl-x64.microsoft.netcore.runtime.wasm.node.transport,runtime.osx-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.osx-x64.microsoft.netcore.runtime.wasm.node.transport,runtime.win-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.win-x64.microsoft.netcore.runtime.wasm.node.transport from version 10.0.0-alpha.1.25125.1 -> to version 10.0.0-alpha.1.25160.1 (parent: microsoft.net.workload.emscripten.current.manifest-10.0.100.transport* update dependencies from build 20250317.3microsoft.net.workload.emscripten.current.manifest-10.0.100.transport , microsoft.sourcebuild.intermediate.emsdk from version 10.0.0-preview.3.25155.1 -> to version 10.0.0-preview.4.25167.3* update dependencies from build 20250318.3microsoft.net.workload.emscripten.current.manifest-10.0.100.transport , microsoft.sourcebuild.intermediate.emsdk from version 10.0.0-preview.3.25155.1 -> to version 10.0.0-preview.4.25168.3dependency coherency updatesruntime.linux-arm64.microsoft.netcore.runtime.jit.tools,runtime.linux-x64.microsoft.netcore.runtime.jit.tools,runtime.linux-musl-arm64.microsoft.netcore.runtime.jit.tools,runtime.linux-musl-x64.microsoft.netcore.runtime.jit.tools,runtime.win-arm64.microsoft.netcore.runtime.jit.tools,runtime.win-x64.microsoft.netcore.runtime.jit.tools,runtime.osx-arm64.microsoft.netcore.runtime.jit.tools,runtime.osx-x64.microsoft.netcore.runtime.jit.tools,runtime.linux-arm64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.linux-arm64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.linux-arm64.microsoft.netcore.runtime.mono.llvm.tools,runtime.linux-musl-arm64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.linux-musl-arm64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.linux-musl-arm64.microsoft.netcore.runtime.mono.llvm.tools,runtime.linux-x64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.linux-x64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.linux-x64.microsoft.netcore.runtime.mono.llvm.tools,runtime.linux-musl-x64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.linux-musl-x64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.linux-musl-x64.microsoft.netcore.runtime.mono.llvm.tools,runtime.win-x64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.win-x64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.win-x64.microsoft.netcore.runtime.mono.llvm.tools,runtime.osx-arm64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.osx-arm64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.osx-arm64.microsoft.netcore.runtime.mono.llvm.tools,runtime.osx-x64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.osx-x64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.osx-x64.microsoft.netcore.runtime.mono.llvm.tools from version 19.1.0-alpha.1.25103.1 -> to version 19.1.0-alpha.1.25160.1 (parent: microsoft.net.workload.emscripten.current.manifest-10.0.100.transport* update dependencies from build 20250324.2microsoft.net.workload.emscripten.current.manifest-10.0.100.transport , microsoft.sourcebuild.intermediate.emsdk from version 10.0.0-preview.3.25155.1 -> to version 10.0.0-preview.4.25174.2dependency coherency updatesruntime.linux-arm64.microsoft.netcore.runtime.jit.tools,runtime.linux-x64.microsoft.netcore.runtime.jit.tools,runtime.linux-musl-arm64.microsoft.netcore.runtime.jit.tools,runtime.linux-musl-x64.microsoft.netcore.runtime.jit.tools,runtime.win-arm64.microsoft.netcore.runtime.jit.tools,runtime.win-x64.microsoft.netcore.runtime.jit.tools,runtime.osx-arm64.microsoft.netcore.runtime.jit.tools,runtime.osx-x64.microsoft.netcore.runtime.jit.tools,runtime.linux-arm64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.linux-arm64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.linux-arm64.microsoft.netcore.runtime.mono.llvm.tools,runtime.linux-musl-arm64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.linux-musl-arm64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.linux-musl-arm64.microsoft.netcore.runtime.mono.llvm.tools,runtime.linux-x64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.linux-x64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.linux-x64.microsoft.netcore.runtime.mono.llvm.tools,runtime.linux-musl-x64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.linux-musl-x64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.linux-musl-x64.microsoft.netcore.runtime.mono.llvm.tools,runtime.win-x64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.win-x64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.win-x64.microsoft.netcore.runtime.mono.llvm.tools,runtime.osx-arm64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.osx-arm64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.osx-arm64.microsoft.netcore.runtime.mono.llvm.tools,runtime.osx-x64.microsoft.netcore.runtime.mono.llvm.libclang,runtime.osx-x64.microsoft.netcore.runtime.mono.llvm.sdk,runtime.osx-x64.microsoft.netcore.runtime.mono.llvm.tools,runtime.linux-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.linux-musl-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.linux-x64.microsoft.netcore.runtime.wasm.node.transport,runtime.linux-musl-x64.microsoft.netcore.runtime.wasm.node.transport,runtime.osx-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.osx-x64.microsoft.netcore.runtime.wasm.node.transport,runtime.win-arm64.microsoft.netcore.runtime.wasm.node.transport,runtime.win-x64.microsoft.netcore.runtime.wasm.node.transport from version 19.1.0-alpha.1.25103.1 -> to version 19.1.0-alpha.1.25167.1 (parent: microsoft.net.workload.emscripten.current.manifest-10.0.100.transport* update dependencies from build 20250325.1microsoft.net.workload.emscripten.current.manifest-10.0.100.transport , microsoft.sourcebuild.intermediate.emsdk from version 10.0.0-preview.3.25155.1 -> to version 10.0.0-preview.4.25175.1* update dependencies from build 20250325.2microsoft.net.workload.emscripten.current.manifest-10.0.100.transport , microsoft.sourcebuild.intermediate.emsdk from version 10.0.0-preview.3.25155.1 -> to version 10.0.0-preview.4.25175.2---------"
dotnet/runtime,472c3b042ba8426daab014d61ff2de26055bec3f,"[main] Update dependencies from dotnet/arcade (#113592)

* Update dependencies from https://github.com/dotnet/arcade build 20250314.6

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.25157.1 -> To Version 10.0.0-beta.25164.6

* Update dependencies from https://github.com/dotnet/arcade build 20250321.1

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.25157.1 -> To Version 10.0.0-beta.25171.1

* Update Microsoft.DotNet.ApiCompat.Task

* Remove duplicate .msi FileExtensionSignInfo

* Update dependencies from https://github.com/dotnet/arcade build 20250325.2

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.25157.1 -> To Version 10.0.0-beta.25175.2

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Larry Ewing <lewing@microsoft.com>
Co-authored-by: Alexander Köplinger <alex.koeplinger@outlook.com>",2025-03-26 10:49:19+00:00,dotnet-maestro[bot],1,e2424d0b988a620f039b6380499ad0f66d1b79ef,"Sign and harden pkgs (#114027)

* Sign and harden pkgs

* Fix missing closing quote in MacOSPkg element

* Add singlefilehost to MacOS signing list

* Add new executables to MacOS signing list

* Add 'Mono' to MacOS signing list

* Remove inadvertently added lines

---------

Co-authored-by: Alexander Köplinger <alex.koeplinger@outlook.com>",17,147,164,"[main] update dependencies from dotnet/arcade (issue_ref)* update dependencies from build 20250314.6microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.versiontools.tasks , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.25157.1 -> to version 10.0.0-beta.25164.6* update dependencies from build 20250321.1microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.versiontools.tasks , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.25157.1 -> to version 10.0.0-beta.25171.1* update microsoft.dotnet.apicompat.task* remove duplicate .msi fileextensionsigninfo* update dependencies from build 20250325.2microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.versiontools.tasks , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.25157.1 -> to version 10.0.0-beta.25175.2---------"
dotnet/runtime,f9fc62ab41d53d331544b4da5a187b036df8c1bb,"[main] Update dependencies from dnceng/internal/dotnet-optimization (#112832)

* Update dependencies from https://dev.azure.com/dnceng/internal/_git/dotnet-optimization build 20250220.9

optimization.linux-arm64.MIBC.Runtime , optimization.linux-x64.MIBC.Runtime , optimization.windows_nt-arm64.MIBC.Runtime , optimization.windows_nt-x64.MIBC.Runtime , optimization.windows_nt-x86.MIBC.Runtime , optimization.PGO.CoreCLR
 From Version 1.0.0-prerelease.25104.10 -> To Version 1.0.0-prerelease.25120.9

* Update dependencies from https://dev.azure.com/dnceng/internal/_git/dotnet-optimization build 20250305.2

optimization.linux-arm64.MIBC.Runtime , optimization.linux-x64.MIBC.Runtime , optimization.windows_nt-arm64.MIBC.Runtime , optimization.windows_nt-x64.MIBC.Runtime , optimization.windows_nt-x86.MIBC.Runtime , optimization.PGO.CoreCLR
 From Version 1.0.0-prerelease.25104.10 -> To Version 1.0.0-prerelease.25155.2

* Update dependencies from https://dev.azure.com/dnceng/internal/_git/dotnet-optimization build 20250321.2

optimization.linux-arm64.MIBC.Runtime , optimization.linux-x64.MIBC.Runtime , optimization.windows_nt-arm64.MIBC.Runtime , optimization.windows_nt-x64.MIBC.Runtime , optimization.windows_nt-x86.MIBC.Runtime , optimization.PGO.CoreCLR
 From Version 1.0.0-prerelease.25104.10 -> To Version 1.0.0-prerelease.25171.2

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-03-26 11:50:18+00:00,dotnet-maestro[bot],0,,,2,18,18,"[main] update dependencies from dnceng/internal/dotnet-optimization (issue_ref)* update dependencies from build 20250220.9optimization.linux-arm64.mibc.runtime , optimization.linux-x64.mibc.runtime , optimization.windows_nt-arm64.mibc.runtime , optimization.windows_nt-x64.mibc.runtime , optimization.windows_nt-x86.mibc.runtime , optimization.pgo.coreclr from version 1.0.0-prerelease.25104.10 -> to version 1.0.0-prerelease.25120.9* update dependencies from build 20250305.2optimization.linux-arm64.mibc.runtime , optimization.linux-x64.mibc.runtime , optimization.windows_nt-arm64.mibc.runtime , optimization.windows_nt-x64.mibc.runtime , optimization.windows_nt-x86.mibc.runtime , optimization.pgo.coreclr from version 1.0.0-prerelease.25104.10 -> to version 1.0.0-prerelease.25155.2* update dependencies from build 20250321.2optimization.linux-arm64.mibc.runtime , optimization.linux-x64.mibc.runtime , optimization.windows_nt-arm64.mibc.runtime , optimization.windows_nt-x64.mibc.runtime , optimization.windows_nt-x86.mibc.runtime , optimization.pgo.coreclr from version 1.0.0-prerelease.25104.10 -> to version 1.0.0-prerelease.25171.2---------"
dotnet/runtime,b4a1d5e0433093d5f84b0717f1e03f853b412866,"Bring up runtime-diagnostics pipeline (#113257)

The goal of this change is to allow any runtime PR that may impact diagnostics to manually trigger a pipeline that runs the runtime->diagnostics build / test.

This is the first stage to get something working and will be followed up with https://github.com/dotnet/runtime/issues/113909",2025-03-26 12:01:19+00:00,Steve Pfister,0,,,2,320,9,bring up runtime-diagnostics pipeline (issue_ref)the goal of this change is to allow any runtime pr that may impact diagnostics to manually trigger a pipeline that runs the runtime->diagnostics build / test.this is the first stage to get something working and will be followed up with
dotnet/runtime,62bd39ab5f51465776fd74666fcf0f8000bcfb2a,Remove ConfigureAwait(false) from AsyncEnumerable LINQ (#113911),2025-03-26 13:33:10+00:00,Stephen Toub,0,,,77,1579,1746,remove configureawait(false) from asyncenumerable linq (issue_ref)
dotnet/runtime,a37ae11d7406e2642c4a6b16675bb4ef59669c02,"Build Mono .frameworks by default on iOS/tvOS/MacCatalyst (#113918)

Remove the BuildDarwinFrameworks option. Follow-up to https://github.com/dotnet/runtime/pull/113897#discussion_r2014003039",2025-03-26 15:59:04+00:00,Alexander Köplinger,0,,,8,10,17,build mono .frameworks by default on ios/tvos/maccatalyst (issue_ref)remove the builddarwinframeworks option. follow-up to #discussion_r2014003039
dotnet/runtime,e0332f31b8398561d5b42252372300be490e4461,arm64: Add tests for return cases into optimise bools (#113914),2025-03-26 16:23:26+00:00,Jonathan Davies,0,,,1,79,0,arm64: add tests for return cases into optimise bools (issue_ref)
dotnet/runtime,86ca6e3c18e121d9bfcf71caf43416338958c41f,"Update SuperPMI collection helix queues (#113884)

Match what is in eng\pipelines\coreclr\templates\helix-queues-setup.yml",2025-03-26 17:23:38+00:00,Bruce Forstall,0,,,1,28,16,update superpmi collection helix queues (issue_ref)match what is in eng\pipelines\coreclr\templates\helix-queues-setup.yml
dotnet/runtime,0a827c42e3212b5dd46aa3c8b98990346b083ce2,Refactoring in AssertrionDesc (#113440),2025-03-26 17:50:30+00:00,Egor Bogatov,1,cb29b0864583d70718d13c6679ff32608d2ca8e9,JIT: Fix fgDebugCheckTypes assert + small clean up (#113920),4,61,260,refactoring in assertriondesc (issue_ref)
dotnet/runtime,379af99ab7dacd5daa924f6b7df9907af3bf93d9,"Remove most usages of the macro-based ""don't return in this block"" hack (#113856)

* Remove unused frame type

* Remove ""debug noreturn"" from GCPROTECT. GCFrame instances set up through those macros are automatically removed by the constructor

* Actually check for if we have an exception in flight instead of requiring that we don't do a return to ensure we call a function in the success case.

* Create a separate ""preserve last error"" holder type to allow removing a no-return scope

* Allow returning from within an (UN)INSTALL_UNWIND_AND_CONTINUE_HANDLER scope as nothing in the uninstall requires manual unwinding.

* Don't block ""return"" in contracts at compile time, just rely on PR review to not allow people to return out of a contract block.

* Adjust one usage of BEGIN/END_PRESERVE_LAST_ERROR to not use the holder as it shouldn't happen in that case for unwinding.

* Add assert that CoopTransitionHolder isn't being used in a function called while a C++ exception is in flight

* Remove PRESERVE_LAST_ERROR macros and enforce correct usage of CoopTransitionHolder by a runtime assert instead of a compile-time error.

* Remove some now-unneeded ASSURE_NO_RETURN_END macros and remove the last of the OK_TO_RETURN macros

* PR feedback",2025-03-26 18:08:52+00:00,Jeremy Koritzinsky,1,e7baf9101c5d9c93d99aaf95888c0d039e5735ad,"Fix contract violations for OLE scenario. (#114609)

Rework the logic so the FCall doesn't do any
allocations and defers any non-fast scenario
to the slow path.",16,62,183,"remove most usages of the macro-based ""don't return in this block"" hack (issue_ref)* remove unused frame type* remove ""debug noreturn"" from gcprotect. gcframe instances set up through those macros are automatically removed by the constructor* actually check for if we have an exception in flight instead of requiring that we don't do a return to ensure we call a function in the success case.* create a separate ""preserve last error"" holder type to allow removing a no-return scope* allow returning from within an (un)install_unwind_and_continue_handler scope as nothing in the uninstall requires manual unwinding.* don't block ""return"" in contracts at compile time, just rely on pr review to not allow people to return out of a contract block.* adjust one usage of begin/end_preserve_last_error to not use the holder as it shouldn't happen in that case for unwinding.* add assert that cooptransitionholder isn't being used in a function called while a c++ exception is in flight* remove preserve_last_error macros and enforce correct usage of cooptransitionholder by a runtime assert instead of a compile-time error.* remove some now-unneeded assure_no_return_end macros and remove the last of the ok_to_return macros* pr feedback"
dotnet/runtime,4c6e4e2f0d00b1214388ea7fb576e9ca0d7955d0,"Fix assertions related to combining `cmn (extended-register)` (#113337) (#113376)

Fixes issues highlighted by Fuzzlyn, related to erroneously combining
cast=>negate=>compare into `cmn (extended-register)` when the second
operand is an integral constant.",2025-03-26 19:18:30+00:00,snickolls-arm,1,9559b2a8c2961fd72d2e687a2b3f8f148aa33eb5,"Remove CreateFalse node during lowering, if MaskToVector is getting removed (#114272)

* Remove CreateFalse node during lowering, if MaskToVector is getting deleted

* fix SVE.experimental warning

* review feedback",3,105,2,"fix assertions related to combining (issue_ref) (issue_ref)fixes issues highlighted by fuzzlyn, related to erroneously combiningcast=>negate=>compare into when the secondoperand is an integral constant."
dotnet/runtime,a9dcd70f312b97e8e0b558dd3df2ffbccc720319,"JIT: layout compatibility vs assignability (#113938)

Introduce a new `CanAssignFrom` method on `ClassLayout` that will ultimately
do more relaxed (and asymmetric) checking for cases that can arise from escape
analysis. For now it just defers to `AreCompatible`, which is and will remain
an equivalence relation (hence symmetric).

Split off some callers of `AreCompatible` to call `CanAssignFrom` instead.
Generally methods invoked after we run escape analysis will need to start
using `CanAssignFrom` as it will introduce new layouts.",2025-03-26 22:01:08+00:00,Andy Ayers,0,,,5,30,7,"jit: layout compatibility vs assignability (issue_ref)introduce a new method on that will ultimatelydo more relaxed (and asymmetric) checking for cases that can arise from escapeanalysis. for now it just defers to , which is and will remainan equivalence relation (hence symmetric).split off some callers of to call instead.generally methods invoked after we run escape analysis will need to startusing as it will introduce new layouts."
dotnet/runtime,4957991138b2e2f629178e3318165f819cba41c0,Make sure BMI instructions get correct displacement size. (#113903),2025-03-26 22:39:05+00:00,Ruihan-Yin,0,,,1,8,5,make sure bmi instructions get correct displacement size. (issue_ref)
dotnet/runtime,2adab656464e9823f345d8504b035ad46cea7aa4,"MLDsa initial OpenSSL based implementation


Co-authored-by: Jeremy Barton <jbarton@microsoft.com>",2025-03-27 00:40:44+00:00,Krzysztof Wicher,1,9716a63de7818b31b74e2843862ecb326716a737,"Fix CodeQL detecting EVP_chacha20_poly1305 during cmake configure (#119887)

Some internal CodeQL rules are picking up this instance but since CMake generates a random directory path for the function detection it results in a lot of duplicate bugs.

Use the CodeQL comment syntax to suppress it. We need to use check_source_compiles() instead of check_function_exists() so that we can inject the suppression comment.",28,1169,353,mldsa initial openssl based implementation
dotnet/runtime,251e6bec0fcff471df3fb895675ba20909e4583c,"[APX] Make sure KMOV is not encoded in EVEX when JitStressEvexEncoding is set. (#113854)

* Make sure KMOV is not encoded in EVEX when JitStressEvexEncoding is set.

* correct comment text.",2025-03-27 03:37:44+00:00,Ruihan-Yin,0,,,2,52,3,[apx] make sure kmov is not encoded in evex when jitstressevexencoding is set. (issue_ref)* make sure kmov is not encoded in evex when jitstressevexencoding is set.* correct comment text.
dotnet/runtime,b21c93c1cfb576323f4e2cb174d8ea99cc298d1c,"ML-KEM: MLKemOpenSsl

Implements `MLKemOpenSsl` and restructures tests to support testing multiple MLKem implementations.",2025-03-27 03:52:17+00:00,Kevin Jones,1,12e5d2e8becc8527e881242f43948db5e2dfd032,"Add some basic tests for SLH-DSA (#113766)

* Scaffold SLH-DSA based on ML-DSA

* Update APIs to match shape from GH issue

* Fix file name capitalization

* Revert to old structure

* fix csproj style

* WIP

* Add tests

* Add more tests and change plaform support checks

* Fix exception ordering and some other PR feedback

* Comments in test

Co-authored-by: Jeremy Barton <jbarton@microsoft.com>

* Make assert message clearer

* Get SLH-DSA components building with Microsoft.Bcl.Cryptography

* Apply suggestions from code review

Co-authored-by: Jeremy Barton <jbarton@microsoft.com>

* PR suggestions

* type forwarding

---------

Co-authored-by: Jeremy Barton <jbarton@microsoft.com>",30,1415,912,ml-kem: mlkemopensslimplements and restructures tests to support testing multiple mlkem implementations.
dotnet/runtime,be6d8d01a848a1de0674e51c6d243b65404f2e0f,"Update dependencies from https://github.com/dotnet/emsdk build 20250326.1 (#113957)

Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport , Microsoft.SourceBuild.Intermediate.emsdk
 From Version 10.0.0-preview.4.25175.2 -> To Version 10.0.0-preview.4.25176.1

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-03-27 09:12:40+00:00,dotnet-maestro[bot],0,,,2,8,8,"update dependencies from build 20250326.1 (issue_ref)microsoft.net.workload.emscripten.current.manifest-10.0.100.transport , microsoft.sourcebuild.intermediate.emsdk from version 10.0.0-preview.4.25175.2 -> to version 10.0.0-preview.4.25176.1"
dotnet/runtime,eff415bfd667125c1565680615a6f19152645fbf,[browser] EventPipe - CPU sampling - single thread (#113758),2025-03-27 14:53:18+00:00,Pavel Savara,1,5e6ffbe0f0fc5ed143b92cd59795337dd1e60acc,"Make sure interpreter gc_transitions on managed exceptions gets balanced. (#115052)

Interpreters do_icall_wrapper and ves_pinvoke_method uses a frame
variable called gc_transitions that can put thread in GC SAFE mode
before calling native code and switch back on return. When interpreter
calls native code it also push a LMF frame with context and unwind
label so in case of managed exception it will continue execution at
label, but in that case it would also miss to reset the gc_transitions
flag. That could then lead to future errors since other icalls would
run under incorrect GC state due to incorrect GC switch.

This issue was observed in https://github.com/dotnet/runtime/issues/114840.
In that case a custom icall could call mono_raise_exception that would
hit this scenario, leaving the gc_transitions set to TRUE that would then
cause issues since next icall would run in wrong GC mode causing
undefined behaviour.

Fix adds a mechanism to abort a GC safe region making sure thread gets
back to GC unsafe mode and also make sure the cookie stack gets
rebalanced on checked builds. It also makes sure gc_transitions gets
reset to FALSE, if its still TRUE reaching the exit label.

Fix makes sure we correctly restore the interpreter GC state in case of a
managed exception in native code.",23,251,85,[browser] eventpipe - cpu sampling - single thread (issue_ref)
dotnet/runtime,68db36feedae1c308e810d28a6fb148679eeabfd,"Make the eager-enumerator a sealed class (#113927)

Per [review feedback from @stephentoub](https://github.com/dotnet/runtime/pull/113775#discussion_r2014543804) post-merge",2025-03-27 16:00:56+00:00,Marc Brooks,0,,,1,1,1,make the eager-enumerator a sealed class (issue_ref)per [review feedback from @stephentoub](#discussion_r2014543804) post-merge
dotnet/runtime,2d54736561b06e9c50fd742572d59d6d4997d935,don't assert when validation is skipped (#111596),2025-03-27 17:36:52+00:00,Pranav Senthilnathan,0,,,2,4,4,don't assert when validation is skipped (issue_ref)
dotnet/runtime,0b6e62e8343697ad31cdbe8f84f8b9e594973b97,"[cDAC] Implement ISOSDacInterface::GetFrameName (#113769)

* implement GetFrameName in cDAC",2025-03-27 18:20:48+00:00,Max Charlamb,0,,,5,76,7,[cdac] implement isosdacinterface::getframename (issue_ref)* implement getframename in cdac
dotnet/runtime,0ff4bf2f7b9980c9ad81300546e43472a5e25eaf,Reduce cost of working on fixedRegs by making it `SingleTypeRegSet`. (#113713),2025-03-27 19:39:23+00:00,DeepakRajendrakumaran,0,,,2,111,27,reduce cost of working on fixedregs by making it . (issue_ref)
dotnet/runtime,fce42d34cfdb2e4ffa1cbbe8ab61162fb7e84339,"Use the shipping version in PackageOverrides.txt (#113981)

This allows the consumption of newer packages in the same release band when an SDK with package pruning enabled is used.",2025-03-28 06:31:31+00:00,Viktor Hofer,0,,,1,1,1,use the shipping version in packageoverrides.txt (issue_ref)this allows the consumption of newer packages in the same release band when an sdk with package pruning enabled is used.
dotnet/runtime,156b92daa566f927c4a3e329123a334cebda26a6,"Do not generate unconstructed EEType for arrays that have a template (#113951)

When `CanonFormTypeMayExist` was written, it was okay for arrays to return false since arrays were always compared structurally (it was allowed to have multiple `MethodTable`s for a single array type).

We stopped allowing this some time ago and we now have to maintain the same invariant as for any other `MethodTable` - the address of the `MethodTable` is the unique identity. We cannot allow the
compiler to generate unconstructed `MethodTable` for something that can be template-constructed at runtime.",2025-03-28 07:42:07+00:00,Michal Strehovský,1,db78cad057076f34e753ef566def83ca51b66eb4,"Ensure no-trim-aot-warning uses of types from signatures work (#117194)

I was helping a customer make a pattern trim safe and found a solution that has no warnings but still doesn't work due to this bug.

This is a size regression. But correctness >> size.",2,18,1,"do not generate unconstructed eetype for arrays that have a template (issue_ref)when was written, it was okay for arrays to return false since arrays were always compared structurally (it was allowed to have multiple s for a single array type).we stopped allowing this some time ago and we now have to maintain the same invariant as for any other - the address of the is the unique identity. we cannot allow thecompiler to generate unconstructed for something that can be template-constructed at runtime."
dotnet/runtime,4f5c6938d09e935830492c006aa8381611b65ad8,"[WinHTTP] Remove legacy (Win 8.1-) WinInet proxy handling (#113915)

* Remove legacy (Win 8.1-) WinInet proxy handling

* Move WinInetProxyHelper to S.N.Http, the only place of usage.

* Removed unnecessary assert

* Remove tests and fakes for ""no automatic proxy""",2025-03-28 08:44:10+00:00,Marie Píchová,1,18c525d5041d6f971f78ec12e6b7fe26e40e27b2,"[WinHTTP] Certificate caching on WinHttpHandler to eliminate extra call to Custom Certificate Validation (#111791)

* Certificate caching on WinHttpHandler to eliminate extra call to Custom Certificate Validation

* Review feedback

* Review feedback

* Framework compat + Review Feedback

* Implement Timer to clear cache

* Review feedback

* Review Feedback

* Review feedback

* Fix RemoteExecutor issue and change delay to ms

* Review feedback

* Apply suggestions from code review

Co-authored-by: Miha Zupan <mihazupan.zupan1@gmail.com>

* Add ExecutionContext SuppressFlow

* Fix alignment issues

* Add offset docs for IPAddress parsing

* Use RawDataMemory for lookup in Modern .NET

---------

Co-authored-by: Miha Zupan <mihazupan.zupan1@gmail.com>",11,93,266,"[winhttp] remove legacy (win 8.1-) wininet proxy handling (issue_ref)* remove legacy (win 8.1-) wininet proxy handling* move wininetproxyhelper to s.n.http, the only place of usage.* removed unnecessary assert* remove tests and fakes for ""no automatic proxy"""
dotnet/runtime,a12e429f10e694989ee20ca4d6c3ad487a9ccb7b,"Add some logging for the new EH (#113891)

I have realized that the new EH doesn't log much information about the
exception handling progress as the legacy one did. This change rectifies
that.",2025-03-28 09:56:19+00:00,Jan Vorlicek,1,de1e6a431d20ffd110bc6c8ae39dd69176a2182b,"Fix EH and stack walking on linux-x86 (#113972)

* Fix EH and stack walking on linux-x86

On x86 we don't have mechnism for unwinding of native code, so we have
to handle IL_Throw/IL_Rethrow initial context for new exception handling
differently.

Stack walking on x86 is also significantly different because we don't
produce unwind codes and rely solely on GC info produced by JIT. In
order to unwind this efficiently we always need EECodeInfo. The previous
implementation used a custom reimplementation of RtlVirtualUnwind method
which meant that we did the lookup multiple times. Another problem was
that it inconsistently treated the the ""caller SP"" and ""return address
location"". On x86 we have calling conventions that use ""ret N"" opcode
which pops the return adress from stack and then pops an additional
number of bytes from the stack pointer to skip over pushed arguments.
This distinction is important and most of the runtime code expects
unwound SP to point to the caller SP (ie. as if the RET N instruction
was executed). An exception is the return address hijacking which needs
the return address location instead. We now treat the SP and PCTAddr
fields of REGDISPLAY the same as on non-funclet runtime to make this
distinction respected in a consistent way.

* Update src/coreclr/vm/i386/cgenx86.cpp

* Address PR feedback

* Update src/coreclr/vm/exceptionhandling.cpp",2,57,2,add some logging for the new eh (issue_ref)i have realized that the new eh doesn't log much information about theexception handling progress as the legacy one did. this change rectifiesthat.
dotnet/runtime,fbb0f14b33394bc55f90de7c2b75c99ce1f9eea6,"Fix declared type of custom comparer for MaxBy and MinBy (#113944)

* Fix declared type of custom comparer for MaxBy and MinBy

Use the `TKey` output of the keySelector (not the input `TSource`) for the the custom `IComparer` since that's what the keySelector will emit.

Fixes #113878

This is a semi-**BREAKING CHANGE** but is justifiable in that the only code that could have worked before was when `TKey` and `TSource` were the same type (e.g. both `int` as in the test cases)... and that code will continue to compile correctly.

* Update to keep the old MinBy and MaxBy around as Obsolete

Ensures the binary and source compatibility in case anyone was using the broken overloads.

* PR Feedback: Fixed missing markdown escaping for < and >",2025-03-28 12:04:42+00:00,Marc Brooks,1,40e90f34c472c7e0326dc8c9cefab6f15a415082,"Obsolete XsltSettings.EnableScript with SYSLIB0062 (#117701)

* Initial plan

* Add SYSLIB0062 obsoletion for XsltSettings.EnableScript

Co-authored-by: jeffhandley <1031940+jeffhandley@users.noreply.github.com>

* Update SYSLIB0062 message to be more concise and fix test warnings

Co-authored-by: jeffhandley <1031940+jeffhandley@users.noreply.github.com>

* Remove SYSLIB0062 from blanket NoWarn list for partial facade assemblies

Co-authored-by: tannergooding <10487869+tannergooding@users.noreply.github.com>

* Move pragma warning restore to encompass entire obsolete API usage blocks

Co-authored-by: jeffhandley <1031940+jeffhandley@users.noreply.github.com>

* Obsolete Scripts field and move pragma warnings to encompass entire obsolete API usage blocks

Co-authored-by: jeffhandley <1031940+jeffhandley@users.noreply.github.com>

* Use Obsoletions constants

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: jeffhandley <1031940+jeffhandley@users.noreply.github.com>
Co-authored-by: tannergooding <10487869+tannergooding@users.noreply.github.com>
Co-authored-by: Jeff Handley <jeffhandley@users.noreply.github.com>",8,121,6,fix declared type of custom comparer for maxby and minby (issue_ref)* fix declared type of custom comparer for maxby and minbyuse the output of the keyselector (not the input ) for the the custom since that's what the keyselector will emit.fixes issue_refthis is a semi-**breaking change** but is justifiable in that the only code that could have worked before was when and were the same type (e.g. both as in the test cases)... and that code will continue to compile correctly.* update to keep the old minby and maxby around as obsoleteensures the binary and source compatibility in case anyone was using the broken overloads.* pr feedback: fixed missing markdown escaping for < and >
dotnet/runtime,cef21d2e86df4b7a1d2815a6471eaea7e2c1719d,Only use PGO data if clang can read it (#114005),2025-03-28 18:04:44+00:00,Alexander Köplinger,0,,,1,12,13,only use pgo data if clang can read it (issue_ref)
dotnet/runtime,3e22ac1d3b6e61a2fa5ea0a1eb30c4eaa284a264,"Outbox PbeParameters and PbeEncryptionAlgorithm to Microsoft.Bcl.Cryptography

To support the PQC out-boxed types's ability to expose APIs for encrypted PKCS#8, we need to provide PbeParameters and PbeEncryptionAlgorithm to down level targets as well.",2025-03-28 21:56:27+00:00,Kevin Jones,0,,,13,139,98,"outbox pbeparameters and pbeencryptionalgorithm to microsoft.bcl.cryptographyto support the pqc out-boxed types's ability to expose apis for encrypted pkcsissue_ref, we need to provide pbeparameters and pbeencryptionalgorithm to down level targets as well."
dotnet/runtime,ccc379bfa4e9f95b5afc59872cd2cbf46de87573,"Delete eng/pipelines/runtime-richnav.yml (#114010)

The richnav service doesn't exist anymore.",2025-03-29 00:02:14+00:00,Alexander Köplinger,0,,,1,0,61,delete eng/pipelines/runtime-richnav.yml (issue_ref)the richnav service doesn't exist anymore.
dotnet/runtime,50e6f48056845e327b00709f26cb37deda9dd1a1,"Extract `UnsafeAccessorAttribute` generation code. (#113989)

* This extracts the UnsafeAccessor generator code
and places it in its compilation unit.",2025-03-29 02:11:00+00:00,Aaron Robinson,0,,,3,801,797,extract generation code. (issue_ref)* this extracts the unsafeaccessor generator codeand places it in its compilation unit.
dotnet/runtime,914ce6f442676b723f3e7634309a1192cad3ab9d,"Avoid all compiler optimization on embedded apphost hash (#110554)

* Avoid all compiler optimization on embedded apphost hash

We assume that there is a single copy of the apphost hash in the apphost
binary. And that it hasn't been modified by the compiler. However, the
compiler can optimize the hash multiple ways, including re-ordering
elements of the hash  or duplicating the contents of the hash. This can
currently happen under certain compiler versions and optimization flags.

Try and avoid that by marking the hash as a volatile string and
implementing comparisons that respects that.

---------

Co-authored-by: Aaron R Robinson <arobins@microsoft.com>",2025-03-29 17:19:35+00:00,Omair Majid,0,,,1,20,7,"avoid all compiler optimization on embedded apphost hash (issue_ref)* avoid all compiler optimization on embedded apphost hashwe assume that there is a single copy of the apphost hash in the apphostbinary. and that it hasn't been modified by the compiler. however, thecompiler can optimize the hash multiple ways, including re-orderingelements of the hash or duplicating the contents of the hash. this cancurrently happen under certain compiler versions and optimization flags.try and avoid that by marking the hash as a volatile string andimplementing comparisons that respects that.---------"
dotnet/runtime,7cc32192cbb4894bfebbb09a903215993207a3c0,"[mono][interp] Check packedsimd first on browser (#113743)

In the Wasm interpreter, start using the PackedSimd intrinsics directly where they match the Vector intrinsics, Translate the names where appropriate.",2025-03-30 19:54:05+00:00,Larry Ewing,0,,,2,117,9,"[mono][interp] check packedsimd first on browser (issue_ref)in the wasm interpreter, start using the packedsimd intrinsics directly where they match the vector intrinsics, translate the names where appropriate."
dotnet/runtime,de1e6a431d20ffd110bc6c8ae39dd69176a2182b,"Fix EH and stack walking on linux-x86 (#113972)

* Fix EH and stack walking on linux-x86

On x86 we don't have mechnism for unwinding of native code, so we have
to handle IL_Throw/IL_Rethrow initial context for new exception handling
differently.

Stack walking on x86 is also significantly different because we don't
produce unwind codes and rely solely on GC info produced by JIT. In
order to unwind this efficiently we always need EECodeInfo. The previous
implementation used a custom reimplementation of RtlVirtualUnwind method
which meant that we did the lookup multiple times. Another problem was
that it inconsistently treated the the ""caller SP"" and ""return address
location"". On x86 we have calling conventions that use ""ret N"" opcode
which pops the return adress from stack and then pops an additional
number of bytes from the stack pointer to skip over pushed arguments.
This distinction is important and most of the runtime code expects
unwound SP to point to the caller SP (ie. as if the RET N instruction
was executed). An exception is the return address hijacking which needs
the return address location instead. We now treat the SP and PCTAddr
fields of REGDISPLAY the same as on non-funclet runtime to make this
distinction respected in a consistent way.

* Update src/coreclr/vm/i386/cgenx86.cpp

* Address PR feedback

* Update src/coreclr/vm/exceptionhandling.cpp",2025-03-31 09:22:06+00:00,Filip Navara,1,5b367349156f61411484202746933ca332d05da2,"Fix propagating of unhandled exception to native caller (#113980)

* Fix propagating of unhandled exception to native caller

The final propagation of unhandled exception into topmost native frames
on foreign threads has a bug that hits when the native caller catches
the exception and then calls into managed code again.
The problem is that we weren't popping out the explicit frames and
ExInfos. So when the managed code is entered again, the `Thread::m_pFrame`
points to a garbage. The same is true for the `ExInfo` chain.

This is causing crashes in a 3rd party application where a foreign
thread runs some MFC code that calls to some managed functions regularly
and swallows exceptions stemming from it.

While investigating the issue, I have found that there is a secondary
related problem. When we mark the thread by setting the
TSNC_ProcessedUnhandledException flag, the ProcessCLRException
intentionally starts ignoring managed frames, because we try to let the
exception bubble out to the 3rd party code. But if it catches the
exception and calls back to managed code, the
TSNC_ProcessedUnhandledException flag stays set and thus when the
exception would need to propagate through native frames, all the managed
frames would be ignored.

This change fixes both of the problems and adds a test that crashes
without the fix in both of the cases.

Close #113751

* Make the test Windows only and fix comment spelling

* Fix Windows build of the test

* Disable the added testing for Mono

* Move the frames popping to 2nd pass

The SOS tests that examine crash dump of an unhandled exception were
failing with this change due to the fact that the explicit frames and
ExInfos were popped before the RaiseException. The Watson / crash dump
generation kicks in at the end of the first pass of the RaiseException,
so the frames need to be popped in the 2nd pass. I have changed it so
that they are popped at the first call to the ProcessCLRException on the
2nd pass.",13,230,20,"fix eh and stack walking on linux-x86 (issue_ref)* fix eh and stack walking on linux-x86on x86 we don't have mechnism for unwinding of native code, so we haveto handle il_throw/il_rethrow initial context for new exception handlingdifferently.stack walking on x86 is also significantly different because we don'tproduce unwind codes and rely solely on gc info produced by jit. inorder to unwind this efficiently we always need eecodeinfo. the previousimplementation used a custom reimplementation of rtlvirtualunwind methodwhich meant that we did the lookup multiple times. another problem wasthat it inconsistently treated the the ""caller sp"" and ""return addresslocation"". on x86 we have calling conventions that use ""ret n"" opcodewhich pops the return adress from stack and then pops an additionalnumber of bytes from the stack pointer to skip over pushed arguments.this distinction is important and most of the runtime code expectsunwound sp to point to the caller sp (ie. as if the ret n instructionwas executed). an exception is the return address hijacking which needsthe return address location instead. we now treat the sp and pctaddrfields of regdisplay the same as on non-funclet runtime to make thisdistinction respected in a consistent way.* update src/coreclr/vm/i386/cgenx86.cpp* address pr feedback* update src/coreclr/vm/exceptionhandling.cpp"
dotnet/runtime,3e9ed113fbce776590e0599577e1dbad2e40cb42,Enable more constant foldings for switch ops using assertions (#113998),2025-03-31 09:39:18+00:00,Egor Bogatov,0,,,2,161,2,enable more constant foldings for switch ops using assertions (issue_ref)
dotnet/runtime,1bdf1a2766597b031e258f2022537502ef69b90b,"Update dependencies from https://github.com/dotnet/source-build-reference-packages build 20250326.1 (#114059)

Microsoft.SourceBuild.Intermediate.source-build-reference-packages
 From Version 10.0.617002 -> To Version 10.0.617601

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-03-31 11:04:01+00:00,dotnet-maestro[bot],1,45fa758135d23191d6a1bcf5301777f9c74036ad,"[main] Update dependencies from dotnet/roslyn (#112937)

* Update dependencies from https://github.com/dotnet/roslyn build 20250225.8

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.14.0-2.25121.3 -> To Version 4.14.0-3.25125.8

* Update dependencies from https://github.com/dotnet/roslyn build 20250226.5

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.14.0-2.25121.3 -> To Version 4.14.0-3.25126.5

* Update dependencies from https://github.com/dotnet/roslyn build 20250303.7

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.14.0-2.25121.3 -> To Version 4.14.0-3.25153.7

* Update dependencies from https://github.com/dotnet/roslyn build 20250304.7

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.14.0-2.25121.3 -> To Version 4.14.0-3.25154.7

* Update dependencies from https://github.com/dotnet/roslyn build 20250305.15

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.14.0-2.25121.3 -> To Version 4.14.0-3.25155.15

* Update dependencies from https://github.com/dotnet/roslyn build 20250307.4

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.14.0-2.25121.3 -> To Version 4.14.0-3.25157.4

* Update dependencies from https://github.com/dotnet/roslyn build 20250310.11

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.14.0-2.25121.3 -> To Version 4.14.0-3.25160.11

* Update dependencies from https://github.com/dotnet/roslyn build 20250311.7

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.14.0-2.25121.3 -> To Version 4.14.0-3.25161.7

* Update dependencies from https://github.com/dotnet/roslyn build 20250312.12

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.14.0-2.25121.3 -> To Version 4.14.0-3.25162.12

* Update dependencies from https://github.com/dotnet/roslyn build 20250313.9

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.14.0-2.25121.3 -> To Version 4.14.0-3.25163.9

* Update dependencies from https://github.com/dotnet/roslyn build 20250314.6

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.14.0-2.25121.3 -> To Version 4.14.0-3.25164.6

* Update dependencies from https://github.com/dotnet/roslyn build 20250314.10

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.14.0-2.25121.3 -> To Version 4.14.0-3.25164.10

* Update dependencies from https://github.com/dotnet/roslyn build 20250317.7

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.14.0-2.25121.3 -> To Version 4.14.0-3.25167.7

* Update dependencies from https://github.com/dotnet/roslyn build 20250318.15

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.14.0-2.25121.3 -> To Version 4.14.0-3.25168.15

* Update dependencies from https://github.com/dotnet/roslyn build 20250319.7

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.14.0-2.25121.3 -> To Version 4.14.0-3.25169.7

* Update dependencies from https://github.com/dotnet/roslyn build 20250320.13

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.14.0-2.25121.3 -> To Version 4.14.0-3.25170.13

* Update dependencies from https://github.com/dotnet/roslyn build 20250321.23

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.14.0-2.25121.3 -> To Version 4.14.0-3.25171.23

* Update dependencies from https://github.com/dotnet/roslyn build 20250321.27

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.14.0-2.25121.3 -> To Version 4.14.0-3.25171.27

* Update dependencies from https://github.com/dotnet/roslyn build 20250324.10

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.14.0-2.25121.3 -> To Version 4.14.0-3.25174.10

* Update dependencies from https://github.com/dotnet/roslyn build 20250325.12

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.14.0-2.25121.3 -> To Version 4.14.0-3.25175.12

* Update dependencies from https://github.com/dotnet/roslyn build 20250326.10

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.14.0-2.25121.3 -> To Version 4.14.0-3.25176.10

* Update dependencies from https://github.com/dotnet/roslyn build 20250327.9

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.14.0-2.25121.3 -> To Version 4.14.0-3.25177.9

* Update dependencies from https://github.com/dotnet/roslyn build 20250328.1

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.14.0-2.25121.3 -> To Version 4.14.0-3.25178.1

* Update dependencies from https://github.com/dotnet/roslyn build 20250329.1

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.14.0-2.25121.3 -> To Version 4.14.0-3.25179.1

* Fix compiler warning around unused fields - needed for Unsafe.

* Allow prebuilts for roslyn's dependencies

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Larry Ewing <lewing@microsoft.com>
Co-authored-by: Eric StJohn <ericstj@microsoft.com>",1,2,2,update dependencies from build 20250326.1 (issue_ref)microsoft.sourcebuild.intermediate.source-build-reference-packages from version 10.0.617002 -> to version 10.0.617601
dotnet/runtime,bee9dd2a65c25e3f3088cd546c71c40b8fa0c71e,"JIT: Remove `BBF_FUNCLET_BEG` (#113975)

BBF_FUNCLET_BEG is set for the first block in each filter/handler region when we have funclets; this state can already be checked with Compiler::bbIsHandlerBeg. This PR replaces BBF_FUNCLET_BEG with a new helper method Compiler::bbIsFuncletBeg, which is identical in behavior to bbIsHandlerBeg when we have funclets, and (what should be) a const-evaluated return false when we don't use funclets at all.

This was a no-diff change locally, though it does enable compaction of the first block in a handler region -- I don't see why such a transformation should be illegal.",2025-03-31 13:25:34+00:00,Aman Khalid,1,888312b6df4f09ae6d8c01406b4a169c314a598a,"JIT: Always set block weight during method entry canonicalization (#114076)

When the current method entry block doesn't have a profile-derived weight, just inherit whatever weight it has for the canonical entry block. This way, cold inlinees will always have zero-weight entries. Fixes #114073.",17,90,144,"jit: remove (issue_ref)bbf_funclet_beg is set for the first block in each filter/handler region when we have funclets; this state can already be checked with compiler::bbishandlerbeg. this pr replaces bbf_funclet_beg with a new helper method compiler::bbisfuncletbeg, which is identical in behavior to bbishandlerbeg when we have funclets, and (what should be) a const-evaluated return false when we don't use funclets at all.this was a no-diff change locally, though it does enable compaction of the first block in a handler region -- i don't see why such a transformation should be illegal."
dotnet/runtime,2bb2434a0f7ac8e051762cd4453177448879cd10,Remove dead code (#113852),2025-03-31 17:19:14+00:00,Filip Navara,1,65f0718c28e2f591965c51b47b39a87ddbf2ebfd,"remove the switch to fallback to old EH (#114018)

* remove the switch to fallback to old EH

* more cleanup

* fix build break after merge.

* CR feedback",2,0,43,remove dead code (issue_ref)
dotnet/runtime,129820a012ce8f362d671f10a32f60e161b8a5ae,Fix Windows build (#114062),2025-03-31 17:22:18+00:00,Tomasz Sowiński,1,4b2fe3c0fa1bf47d37419dcefd1ad6d7b7bcf569,"[RISC-V] Optimize loading 64 bit constant with new algorithm implementation and using `emitDataConst` (#113250)

* [RISC-V] Optimize loading 64 bit constant with emitDataConst

* [RISC-V] Implement an algorithm for loading immediate that yields fewer instructions

* [RISC-V] Handle corner case where high32 is 0x7FFFFFFF

* [RISC-V] Optimize further: move chunk window for as many as leading zeros

* [RISC-V] Optimize load immidiate with SRLI instruction

* [RISC-V] Clean up helper functions

* [RISC-V] Bug fix: restore original imm prior to emitDataConst

* [RISC-V] Correct maximum additional shift

* [RISC-V] Handle all ones and all zeros as corner case

* [RISC-V] Add and edit comments

* [RISC-V] Return early on ValidSimm12(imm) and remove all zeros / ones check

* [RISC-V] Address comments: use BitOperations, remove redundant size check, apply coding conventions

* [RISC-V] Use pcrel for loading constant unless loading from cold section

* [RISC-V] Make sure to not use emitDataConst + emitIns_R_C when generating prolog

* [RISC-V] Don't generate emitDataConst + emitIns_R_C in epilog",1,4,5,fix windows build (issue_ref)
dotnet/runtime,ddd44f25d422502600e45f75224162d793778ab6,Include in WaitingWriteCount the thread that may be waiting in upgradable mode (#113982),2025-03-31 17:53:05+00:00,Eduardo Velarde,0,,,1,2,1,include in waitingwritecount the thread that may be waiting in upgradable mode (issue_ref)
dotnet/runtime,f30fb1576d0dd584e8343ba7610cc9fa31828b7b,ML-KEM: Contract Tests,2025-03-31 20:24:36+00:00,Kevin Jones,0,,,6,971,223,ml-kem: contract tests
dotnet/runtime,4ec72ec3c0639a7e3697fa94c3844e178a1088f5,Address issues noted in Aaron's code review (#113857),2025-03-31 22:28:17+00:00,David Wrighton,0,,,2,7,14,address issues noted in aaron's code review (issue_ref)
dotnet/runtime,77e5aa50020b83a7bbde4af05100dc01d24c5ed6,"[wasm] Bump chrome for testing - linux: 134.0.6998.165, windows: 135.0.7049.41 (#114042)

* Automated bump of chrome version

* Update linux_V8Version in BrowserVersions.props

---------

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>
Co-authored-by: Ilona Tomkowicz <32700855+ilonatommy@users.noreply.github.com>",2025-04-01 09:38:22+00:00,github-actions[bot],0,,,1,5,5,"[wasm] bump chrome for testing - linux: 134.0.6998.165, windows: 135.0.7049.41 (issue_ref)* automated bump of chrome version* update linux_v8version in browserversions.props---------"
dotnet/runtime,20d6554e60bb4967f5e9919a2ea2d04e997a8a84,ML-KEM: PKCS#8 Import,2025-04-01 10:34:51+00:00,Kevin Jones,0,,,12,1359,21,ml-kem: pkcsissue_ref import
dotnet/runtime,bbc50e511150368fd10f56783c48aa3a04f1f5d3,"Fix Hang on when GetRequestStreamAsync (#113409)

* Fix Hang on GetRequestStreamAsync in case underlying HttpClient.SendAsync throws for Non-Buffering Write case

* Update src/libraries/System.Net.Requests/src/System/Net/HttpWebRequest.cs

* Linux returns UnknownError for exception

* Fix edge case

* Update src/libraries/System.Net.Requests/src/System/Net/HttpWebRequest.cs

Co-authored-by: Anton Firszov <antonfir@gmail.com>

* Fix unintentional changes

* Handle exception

* Review feedback

---------

Co-authored-by: Anton Firszov <antonfir@gmail.com>",2025-04-01 14:04:05+00:00,Ahmet Ibrahim Aksoy,1,2e24b814524ff59937173eb07ab0c736a89fc162,"Make HttpWebRequest.GetRequestStream return same instance (fixes #41403) (#116757)

* Fix HttpWebRequest.GetRequestStream to return same stream instance on repeated calls

* Replace null-coalescing assignment with explicit if-statement in the beginning of InternalGetRequestStream

* Clean up: removed unnecessary newlines inside InternalGetRequestStream

* Fixed GetRequestStreamAsync path to match sync version and added GetRequestStream_ReturnsSameInstanceWithoutLoopback_Async test

* Make _beginGetRequestStreamCalled and _endGetRequestStreamCalled thread safe",2,26,1,fix hang on when getrequeststreamasync (issue_ref)* fix hang on getrequeststreamasync in case underlying httpclient.sendasync throws for non-buffering write case* update src/libraries/system.net.requests/src/system/net/httpwebrequest.cs* linux returns unknownerror for exception* fix edge case* update src/libraries/system.net.requests/src/system/net/httpwebrequest.cs
dotnet/runtime,baaad1e0d6fc75ebacc4910cf8eac0f08e3044ae,"[cDAC] Remove superfluous modifiers from contract interfaces (#113983)

* remove superfluous modifiers `public virtual` from contract interfaces",2025-04-01 16:05:54+00:00,Max Charlamb,0,,,9,71,71,[cdac] remove superfluous modifiers from contract interfaces (issue_ref)* remove superfluous modifiers from contract interfaces
dotnet/runtime,65f0718c28e2f591965c51b47b39a87ddbf2ebfd,"remove the switch to fallback to old EH (#114018)

* remove the switch to fallback to old EH

* more cleanup

* fix build break after merge.

* CR feedback",2025-04-01 16:41:58+00:00,Manish Godse,1,556f4dd4ccac35cea1302545b8a51fa65ad0defa,"Adjust additional source under utilcode and vm to use minipal_log API. (#113916)

* Adjust sources under utilcode and vm to use minipal_log API.

* Review feedback.

* Review feedback, convert some more info -> error logging.

* Log OOM as a warning instead of info.

* Fix typo.",21,192,1291,remove the switch to fallback to old eh (issue_ref)* remove the switch to fallback to old eh* more cleanup* fix build break after merge.* cr feedback
dotnet/runtime,35f9139cd1017ad7500348f399e0fc2c47cee597,revert some unexpected code removal. (#113898),2025-04-01 17:20:08+00:00,Ruihan-Yin,1,970070e3b78b8cf604dabfe114e1f609c38c555d,"Fill out more SuperPMI cases for LoongArch64 and RISCV64 (#114136)

* Fill out more SuperPMI cases for LoongArch64 and RISCV64

With these changes, SuperPMI can be used with a LoongArch64 or RISCV64
cross-targeting altjit and x64 MCH files to generate and view some code.
There are lots of ""missing data"" cases; for RISCV64 about half of x64
contexts replay successfully.

More work is required for asmdiffs to work, such as updating
coredistools and implementing Loongarch64/RISCV64 relocation handling.

* Fix Release build",1,2,2,revert some unexpected code removal. (issue_ref)
dotnet/runtime,c15177a90cdf0c1e80686222b725f9954446d87c,"Support Activity Events and Links trace out of proc output (#113905)

* Support Activity Events and Links trace out of proc output

* Replace normal space with the none-printable space \u200B",2025-04-01 17:47:04+00:00,Tarek Mahmoud Sayed,1,76b41d39387925b7f2283ff01cbb32415e1be0b2,"Support W3C Propagator (#114583)

* Support W3C Propagator

* Fix the comment

* Remove wrong assert

* try fix tracestate in http tests

* fix failure cases in the http tests

* More http test fixes

* fix typo in test

* Address the feedback

* Swap the comments

* Add baggage extraction test with correlation-context

* Address Miha's feedback

* Feedback

* Add the new exposed APIs",6,222,15,support activity events and links trace out of proc output (issue_ref)* support activity events and links trace out of proc output* replace normal space with the none-printable space \u200b
dotnet/runtime,492f6f7edb1a33c2d87b6072c1243cfb531f8656,"Fix handling of empty RUNTIME_FUNCTIONs sections in R2R (#114091)

- Do not set RVA for empty RUNTIME_FUNCTION section in crossgen2
- Do not register empty RUNTIME_FUNCTIONs section at runtime

Fixes #113117",2025-04-01 19:06:14+00:00,Jan Kotas,1,2ba0c4d9440366366328a37ea1f2a6616564c849,Fix build with enabled FEATURE_ENABLE_NO_ADDRESS_SPACE_RANDOMIZATION (#112689),2,7,4,fix handling of empty runtime_functions sections in r2r (issue_ref)- do not set rva for empty runtime_function section in crossgen2- do not register empty runtime_functions section at runtimefixes issue_ref
dotnet/runtime,556f4dd4ccac35cea1302545b8a51fa65ad0defa,"Adjust additional source under utilcode and vm to use minipal_log API. (#113916)

* Adjust sources under utilcode and vm to use minipal_log API.

* Review feedback.

* Review feedback, convert some more info -> error logging.

* Log OOM as a warning instead of info.

* Fix typo.",2025-04-01 19:12:53+00:00,Johan Lorensson,1,fa45aa56df8044d486f955c14477aa0945b473e1,"Stackwalk support for interpreted frames (#113900)

* Stackwalk support for interpreted frames

This change adds support for walking stack with interpreter frames
present. The StackFrameIterator now considers the interpreter frames to
be frameless frames like regular JITted / crossgened folder.
This is a basis for GC, EH and debugger stack walking. The SOS
`clrstack` and `clrstack -i` both display correct stack trace with
interpreter frames on the stack with this change.

I have added some extra handling of the case when the interpreter frames
are on top of the stack so that the clrstack can dump them.

* Fix VirtualUnwindInterpreterCallFrame

In case we were generating the caller context, the SP and ContextFlags
were missing.

* Move to single InterpreterFrame and few fixes

* Fix Unix build break

* Prevent missing override errors on Unix build

* Improve top frame lookup

* Reflect PR feedback

* Change the GET_CALLER_SP to assert and return NULL
* Remove extra assert at the call to GET_CALLER_SP
* Revert some changes removing ""virtual"" keyword that were not
  intentional

* Few missing virtual keywords reverts

* Revert the GetCallerSP changes

* Fix MUSL build break

* Add comment on top frame seeking",23,141,135,"adjust additional source under utilcode and vm to use minipal_log api. (issue_ref)* adjust sources under utilcode and vm to use minipal_log api.* review feedback.* review feedback, convert some more info -> error logging.* log oom as a warning instead of info.* fix typo."
dotnet/runtime,fa45aa56df8044d486f955c14477aa0945b473e1,"Stackwalk support for interpreted frames (#113900)

* Stackwalk support for interpreted frames

This change adds support for walking stack with interpreter frames
present. The StackFrameIterator now considers the interpreter frames to
be frameless frames like regular JITted / crossgened folder.
This is a basis for GC, EH and debugger stack walking. The SOS
`clrstack` and `clrstack -i` both display correct stack trace with
interpreter frames on the stack with this change.

I have added some extra handling of the case when the interpreter frames
are on top of the stack so that the clrstack can dump them.

* Fix VirtualUnwindInterpreterCallFrame

In case we were generating the caller context, the SP and ContextFlags
were missing.

* Move to single InterpreterFrame and few fixes

* Fix Unix build break

* Prevent missing override errors on Unix build

* Improve top frame lookup

* Reflect PR feedback

* Change the GET_CALLER_SP to assert and return NULL
* Remove extra assert at the call to GET_CALLER_SP
* Revert some changes removing ""virtual"" keyword that were not
  intentional

* Few missing virtual keywords reverts

* Revert the GetCallerSP changes

* Fix MUSL build break

* Add comment on top frame seeking",2025-04-01 19:14:44+00:00,Jan Vorlicek,1,bec2519e10dc996adc2dcfcc65a53637421ebcfd,"Fix several messages mistreated as format strings (#114970)

556f4dd4ccac35cea1302545b8a51fa65ad0defa started treating several
messages as format strings. For example, we saw failing JIT asserts like

```
assert(m_size % TARGET_POINTER_SIZE == 0);
```

printed as

```
Assert failure(PID 38272 [0x00009580], Thread: 16904 [0x4208]): Assertion failed 'm_size  0X0.0027A801C8C01P-1022RGET_POINTER_SIZE == 0'
```

This fixes that case and others introduced in that PR found by audit.",19,306,57,"stackwalk support for interpreted frames (issue_ref)* stackwalk support for interpreted framesthis change adds support for walking stack with interpreter framespresent. the stackframeiterator now considers the interpreter frames tobe frameless frames like regular jitted / crossgened folder.this is a basis for gc, eh and debugger stack walking. the sos and both display correct stack trace withinterpreter frames on the stack with this change.i have added some extra handling of the case when the interpreter framesare on top of the stack so that the clrstack can dump them.* fix virtualunwindinterpretercallframein case we were generating the caller context, the sp and contextflagswere missing.* move to single interpreterframe and few fixes* fix unix build break* prevent missing override errors on unix build* improve top frame lookup* reflect pr feedback* change the get_caller_sp to assert and return null* remove extra assert at the call to get_caller_sp* revert some changes removing ""virtual"" keyword that were not intentional* few missing virtual keywords reverts* revert the getcallersp changes* fix musl build break* add comment on top frame seeking"
dotnet/runtime,327c2629a1536c8199c9783d4a587b23cf780f72,Don't pass stack pointer in ECX on x86 funclet ABI (#113792),2025-04-01 19:45:58+00:00,Filip Navara,0,,,1,4,2,don't pass stack pointer in ecx on x86 funclet abi (issue_ref)
dotnet/runtime,89c2e1574960101e1e591525196cf2069515399d,"JIT: expose inline budget as a jit config option (#114103)

Also, rename some related configs to use ""Jit"" and not ""JIT"".",2025-04-01 20:39:30+00:00,Andy Ayers,1,9e8a9e94ef298098d2a53a5335409dbb606663c6,"[JIT] Enable conditional chaining for Intel APX (#111072)

* Enable conditional compare chaining for AMD64.

* Reduce duplication from `optSwitchDetectLikely`.

* Update src/coreclr/jit/lsrabuild.cpp

Co-authored-by: Bruce Forstall <brucefo@microsoft.com>

* Update src/coreclr/jit/lowerxarch.cpp

Co-authored-by: Bruce Forstall <brucefo@microsoft.com>

* Update src/coreclr/jit/lowerxarch.cpp

Co-authored-by: Bruce Forstall <brucefo@microsoft.com>

* Widen the potential candidates for ccmp folding.

Also lifts GenConditionDesc into CodeGenInterface to better check which
flag lowerings will produce multiple instructions.

* Refactor some common code into lower.cpp.

Some code will conflict with latest changes. I've squashed so we
can discuss how to merge in properly.

* Refactored common code out.

* Review edits.

* Fix build errors.

* Formatting.

---------

Co-authored-by: Bruce Forstall <brucefo@microsoft.com>",5,16,14,"jit: expose inline budget as a jit config option (issue_ref)also, rename some related configs to use ""jit"" and not ""jit""."
dotnet/runtime,11de52a1237145eddddeb170ff695398ac5f6d7b,"[wasm][interp] Match more Vector intrinsics to PackedSimd intrinsics (#114070)

Match more of the Vector* intrinsics to the PackSimd interpreter intrinsics",2025-04-01 21:00:29+00:00,Larry Ewing,1,233826c88d2100263fb9e9535d96f75824ba0aea,"[mono][interpreter] Make nint and nuint work for interpreter simd intrinsics (#114087)

Fix the interpreter intrinsics to handle nint and nuint.  Also add PackedSimd tests and fix some failures to lookup PackedSimd intrinsics.",2,17,4,[wasm][interp] match more vector intrinsics to packedsimd intrinsics (issue_ref)match more of the vector* intrinsics to the packsimd interpreter intrinsics
dotnet/runtime,7ba135a883ac032287676299ebe890086970c58a,"[cDAC] Change FrameIdentifiers to be contract literals (#113953)

* change FrameIdentifiers to be contract literals instead of indirect pointers
* add 'TryReadGlobal' and 'TryReadGlobalPointer'",2025-04-01 21:16:54+00:00,Max Charlamb,0,,,5,79,9,[cdac] change frameidentifiers to be contract literals (issue_ref)* change frameidentifiers to be contract literals instead of indirect pointers* add 'tryreadglobal' and 'tryreadglobalpointer'
dotnet/runtime,ce930c26e484762a25f3f94d7c8d687f989e685f,"Give more detail on RyuJIT porting (#108080)

Add more detail on ""the new platform-specific files"" referenced in RyuJIT porting documentation. The delineation between files can be unclear to folks who aren't deeply involved with runtime internals, and outright imprenetrable to community contributors

Co-authored-by: Jo Shields <joshield@microsoft.com>",2025-04-01 22:31:46+00:00,Jo Shields,0,,,1,12,7,"give more detail on ryujit porting (issue_ref)add more detail on ""the new platform-specific files"" referenced in ryujit porting documentation. the delineation between files can be unclear to folks who aren't deeply involved with runtime internals, and outright imprenetrable to community contributors"
dotnet/runtime,c1ae86dc386a9851b0bd41d57a9c3a77497cd484,"Share some CEEJitInfo methods with the CInterpreterInfo (#114110)

Some of the methods that were left on the CEEJitInfo during the code
manager split are actually still useful for the interpreter, so I am
moving their implementation to the common CEECodeGenInfo.",2025-04-01 22:44:17+00:00,Jan Vorlicek,0,,,2,21,21,"share some ceejitinfo methods with the cinterpreterinfo (issue_ref)some of the methods that were left on the ceejitinfo during the codemanager split are actually still useful for the interpreter, so i ammoving their implementation to the common ceecodegeninfo."
dotnet/runtime,8512b2a0827cc9551731628cda46df6b650f5731,"TypeMap API (Dynamic implementation) (#113954)

Definition of TypeMaps APIs in BCL
CoreCLR implementation of TypeMap APIs",2025-04-02 01:03:00+00:00,Aaron Robinson,1,fc856a2e632349cbfe9a3ea0ba87dd02ca9bb4f2,"GetType: keep throwing same exceptions as .NET 8 (#114228)

When using Type.GetType, always throw FileLoadException for invalid assembly names no matter what throwOnError is set to.
When using Assembly.GetType, throw only when throwOnError is set, and ArgumentException (not FileLoadException)

Fixes #113534",34,1563,119,typemap api (dynamic implementation) (issue_ref)definition of typemaps apis in bclcoreclr implementation of typemap apis
dotnet/runtime,ae2875a4f9db7ea887ee520e56572074eb95c182,ML-KEM: Add support for importing encrypted PKCS#8 keys,2025-04-02 03:07:10+00:00,Kevin Jones,0,,,5,655,1,ml-kem: add support for importing encrypted pkcsissue_ref keys
dotnet/runtime,62f3b4dc5b846d05cbc422c4b6d3303d6d6f203d,"Delete dead code in ExceptionTracker and leftover old EH code (#114121)

* Delete dead code in ExceptionTracker

* Delete more

* Delete more

* Delete more

* Delete more

* Delete more",2025-04-02 10:58:13+00:00,Filip Navara,0,,,2,37,3583,delete dead code in exceptiontracker and leftover old eh code (issue_ref)* delete dead code in exceptiontracker* delete more* delete more* delete more* delete more* delete more
dotnet/runtime,2c5b3eed583278d858f06773e91449f92f1fd8dd,"[mono] [hotreload] Adjust row_size and size_bitfield  from the baseline based on the delta sizes (#113995)

* Fix applying hot reload changes when the delta table has a bigger len than the baseline table.",2025-04-02 13:03:06+00:00,Thays Grazia,1,5d516980ee64a95982799b9a2442d7626367db3b,"Fix line ending (#114171)

* Fix line ending

* commit empty file

* Readd the content",7,30149,41,[mono] [hotreload] adjust row_size and size_bitfield from the baseline based on the delta sizes (issue_ref)* fix applying hot reload changes when the delta table has a bigger len than the baseline table.
dotnet/runtime,edb0a06dcbfd4344805f1be969b67639c113b02b,"Use managed signer for bundles (#110417)

Updates the single-file bundler to use the managed Mach-O signer. Adds the SymbolTable load command to the MachObjectFile class and adds a method to extend the symbol table to include the bundled data. Adds validation when creating a MachObjectFile from a file on disk.
MacOS keeps a cache of signatures of inodes, so editing an existing file in place invalidates the cache and willl fail validation. The way to work around this is to create a new file with a new inode when modifying and resigning a file on disk. Basic host signing didn't run into this issue because it modifies and signs the executable in the same step, so no re-signing happened. For singlefile bundles, we previously would modify the apphost, close the file, then in a separate step, bundle the files and re-sign it. After this PR we create a new file every time we need to re-sign the host, then replace the old host with the new one.",2025-04-02 13:25:02+00:00,Jackson Schuster,0,,,15,300,306,"use managed signer for bundles (issue_ref)updates the single-file bundler to use the managed mach-o signer. adds the symboltable load command to the machobjectfile class and adds a method to extend the symbol table to include the bundled data. adds validation when creating a machobjectfile from a file on disk.macos keeps a cache of signatures of inodes, so editing an existing file in place invalidates the cache and willl fail validation. the way to work around this is to create a new file with a new inode when modifying and resigning a file on disk. basic host signing didn't run into this issue because it modifies and signs the executable in the same step, so no re-signing happened. for singlefile bundles, we previously would modify the apphost, close the file, then in a separate step, bundle the files and re-sign it. after this pr we create a new file every time we need to re-sign the host, then replace the old host with the new one."
dotnet/runtime,883f747c9fa544a20f7af7d8a3bf684a031a6728,"Add field access support to CoreCLR Interpreter (#114049)

* Add support for newobj

The newobj instruction receives the set of arguments and it needs to create the object in question, add it as the `this` argument to the constructor and return it as well. All this work is done by a single interpreter newobj instruction. Once handling the creation of the new object, the already existing call path is reused for executing the constructor. The newobj instruction thinks it receives the `this` pointer as an argument, so we can reuse the offset allocator to generate the exact offsets for each argument. We dummy initialize `this` via an intermediary opcode, so the offset allocator handles this pattern cleanly.

* Intrinsify Object ctor

We currently have limited control over what is interpreted and what is jitted. When creating a new object in the interpreter we have the problem of having to call to object ctor which is jitted. A simple work around, at least for now, is to ignore this call.

* Add support for fields

Loading and storing into instance and static fields, as well as loading the address of fields. For instance fields, this is achieved via ldind/stind opcodes, that have the offset embedded into the instruction. For static fields, we first compute the field address and then we reuse the same ldind/stind opcodes for the field access.

When loading a field from a valuetype from the interpreter stack, we use a separate opcode INTOP_MOV_SRC_OFF, which will be emitted as a normal move (with already existing opcodes), but the source offset that it operates on can point inside a VT var.

* Add support for ldloca

* Add support for ThreadStatic fields

Special static fields can have a bunch of accessors. This commit handles a few accessor types for thread static fields. In order to obtain the address of such a field, we emit an interpreter opcode that can call a helper of a certain signature, with the slot containing the helper code pointer and argument embedded in the code stream. It seems like the helpers can either point to native code or to jit compiled code.

* Zero IL locals at method entry, if initlocals flag is set

* Add support for ldind/stdind instructions

Reuse the instructions used for loading/storing into fields

* Emit memory barriers for volatile stores/writes

For simplicity we emit full memory barriers each time

* Add some more tests related to field access

Some of them are allocating objects so we disable them currently just to be safe on CI.",2025-04-02 15:23:56+00:00,Vlad Brezae,0,,,6,1020,19,"add field access support to coreclr interpreter (issue_ref)* add support for newobjthe newobj instruction receives the set of arguments and it needs to create the object in question, add it as the argument to the constructor and return it as well. all this work is done by a single interpreter newobj instruction. once handling the creation of the new object, the already existing call path is reused for executing the constructor. the newobj instruction thinks it receives the pointer as an argument, so we can reuse the offset allocator to generate the exact offsets for each argument. we dummy initialize via an intermediary opcode, so the offset allocator handles this pattern cleanly.* intrinsify object ctorwe currently have limited control over what is interpreted and what is jitted. when creating a new object in the interpreter we have the problem of having to call to object ctor which is jitted. a simple work around, at least for now, is to ignore this call.* add support for fieldsloading and storing into instance and static fields, as well as loading the address of fields. for instance fields, this is achieved via ldind/stind opcodes, that have the offset embedded into the instruction. for static fields, we first compute the field address and then we reuse the same ldind/stind opcodes for the field access.when loading a field from a valuetype from the interpreter stack, we use a separate opcode intop_mov_src_off, which will be emitted as a normal move (with already existing opcodes), but the source offset that it operates on can point inside a vt var.* add support for ldloca* add support for threadstatic fieldsspecial static fields can have a bunch of accessors. this commit handles a few accessor types for thread static fields. in order to obtain the address of such a field, we emit an interpreter opcode that can call a helper of a certain signature, with the slot containing the helper code pointer and argument embedded in the code stream. it seems like the helpers can either point to native code or to jit compiled code.* zero il locals at method entry, if initlocals flag is set* add support for ldind/stdind instructionsreuse the instructions used for loading/storing into fields* emit memory barriers for volatile stores/writesfor simplicity we emit full memory barriers each time* add some more tests related to field accesssome of them are allocating objects so we disable them currently just to be safe on ci."
dotnet/runtime,cabacfcdabf1f3fde00edd096dc7412c5e0ec2cf,"Update dependencies from https://github.com/dotnet/arcade build 20250328.2 (#114058)

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.VersionTools.Tasks , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.25175.2 -> To Version 10.0.0-beta.25178.2

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-04-02 15:47:45+00:00,dotnet-maestro[bot],0,,,5,65,63,"update dependencies from build 20250328.2 (issue_ref)microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.versiontools.tasks , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.25175.2 -> to version 10.0.0-beta.25178.2"
dotnet/runtime,a1997d442644a8bb8a483d3f9f36aab2c0f377c9,Fix bug in hwintrinsicxarch.cpp for Shuffle methods on xarch (#114125),2025-04-02 18:31:39+00:00,Hamish Arblaster,1,472a33b9bd4a1fd9cbb4b11801b244b625f3fa77,"Fix side effect handling for certain TernaryLogic cases (#114848)

There were a few cases of TernaryLogic with NOT/AND and NOT/OR that
swapped operands without considering side effects. Add some new logic to
hoist those side effects if necessary.

Fixes #114324",1,6,0,fix bug in hwintrinsicxarch.cpp for shuffle methods on xarch (issue_ref)
dotnet/runtime,ff749c3ca3e8a2b2194784bcb75bf82932b008d9,"Bring back yml necessary change types in label checkers (#114165)

There are some `on pull_request_target types` in the label checking yml files that were removed but they are actually necessary, so the labeler keeps working after for example: pushing new commits, pressing the update the branch, closing and opening the PR.",2025-04-02 20:20:27+00:00,Carlos Sánchez López,0,,,2,2,2,"bring back yml necessary change types in label checkers (issue_ref)there are some in the label checking yml files that were removed but they are actually necessary, so the labeler keeps working after for example: pushing new commits, pressing the update the branch, closing and opening the pr."
dotnet/runtime,8f94d2e7b0a15fed4845d85ff8d987bd2f664dff,"[SGen/Tarjan] Handle edge case with node heaviness changing due to deduplication (#113044)

* [SGen/Tarjan] Handle edge case with node heaviness changing due to deduplication

Do early deduplication

Fix Windows build

Add test cases to sgen-bridge-pathologies

* Move test code

* Remove old code

* Add extra check (no change to functionality)",2025-04-02 21:11:53+00:00,Filip Navara,1,46dddf167c32ff47af8e235d550f87e87f5ca092,"[mono][sgen] Fix initialization of can_reduce_color (#114637)

* [mono][sgen] Fix initialization of can_reduce_color

Mark it as true also in the case when the SCC contains bridge objects. Code populating other_colors for this SCC depends on it.

* Disable test on wasm and mobile

The test is meant to be run only on desktop.",2,59,8,[sgen/tarjan] handle edge case with node heaviness changing due to deduplication (issue_ref)* [sgen/tarjan] handle edge case with node heaviness changing due to deduplicationdo early deduplicationfix windows buildadd test cases to sgen-bridge-pathologies* move test code* remove old code* add extra check (no change to functionality)
dotnet/runtime,1b0647c746ec7e5365660938a34a8df8d0b2892a,"[RISC-V] 12-bit immediates in bit ops (#113366)

* 12-bit immediates in bit ops

* Show signed immediate in disasm also for bit ops",2025-04-02 21:39:46+00:00,Tomasz Sowiński,1,513c52b3aca8c6b505c8111df2dd932311a62d5d,"[RISC-V] Simple math intrinsics (#113689)

* fabs & fsqrt

* Min/MaxNumber

* Min/MaxMagnitudeNumber

* ReciprocalSqrtEstimate

* Min/Max, Min/MaxMagnitude

* Fix assert in lsrarisc64.cpp

* Improve Min/Max non-Number in IL

* name #endif

* minor cleanup

* Intrinsify LeadingZeroCount

* TrailingZeroCount

* PopCount

* Build fix

* Remove assertion from default case

* fabs comment

* CHECK_SPILL_ALL in mixn/max non-number operand clones

* Revert bit count intrinsics

* fix comment

Co-authored-by: Adeel Mujahid <3840695+am11@users.noreply.github.com>

---------

Co-authored-by: Adeel Mujahid <3840695+am11@users.noreply.github.com>",2,4,11,[risc-v] 12-bit immediates in bit ops (issue_ref)* 12-bit immediates in bit ops* show signed immediate in disasm also for bit ops
dotnet/runtime,a45396c2c03a67793ed482bcc8b54f4448c854ac,"Enhance logging of stubs through the PerfMap on Linux (#113943)

- Add reporting for all of the stub types that I am aware which are used on Linux
 - Unboxing stubs
 - Instantiating stubs
 - Delegate shuffle thunks
 - FixupPrecode
 - StubPrecode
 - DynamicHelpers for R2R
 - CallCounting stubs
 - Jump stubs
- Add support for a less granular stub reporting model (which is MUCH more suitable for the StubPrecode and FixupPrecode model). Its slightly less accurate on the type of stub, but it should make the impact of adding those stubs to the maps much less. Some stubs do not yet have reporting in fully granular mode, but I believe I've captured the critical ones there too.
- Add support for recording the location of the copy of the writer barriers into the heap. This enables support for good perfmap data in W^X mode",2025-04-02 22:07:46+00:00,David Wrighton,1,4d80feb730d751f7c72da22da828621ec3f0dd13,"Ensure proper interpreter frames ordering (#114418)

The stack walking over interpreter frames relies on the fact that the
`InterpreterFrame` is always at higher address than all the
`InterpMethodContextFrame` instances of the underlying interpreter frames.
In the `ExecuteInterpretedMethod`, there are instances of both of these
types and I haven't realized before that the compiler is free to pick
any order of storing them in the stack frame of the method. It actually
happens in Checked builds and results in an assert in the stack walker,
because the `InterpreterFrame` is then determined to be skipped.

This change fixes it by ensuring proper ordering of those instances
using a wrapper struct.",27,276,42,"enhance logging of stubs through the perfmap on linux (issue_ref)- add reporting for all of the stub types that i am aware which are used on linux - unboxing stubs - instantiating stubs - delegate shuffle thunks - fixupprecode - stubprecode - dynamichelpers for r2r - callcounting stubs - jump stubs- add support for a less granular stub reporting model (which is much more suitable for the stubprecode and fixupprecode model). its slightly less accurate on the type of stub, but it should make the impact of adding those stubs to the maps much less. some stubs do not yet have reporting in fully granular mode, but i believe i've captured the critical ones there too.- add support for recording the location of the copy of the writer barriers into the heap. this enables support for good perfmap data in w^x mode"
dotnet/runtime,7c05ef11cb244a195fea7164ecf427b940298c49,"JIT: stop tracking TYP_I_IMPL locals in escape analysis (#114130)

Abstractly a non-GC local can't cause escape. On 32 bit platforms tracking connections
to `TYP_I_IMPL` leads to confusion once we start struct field tracking, as we logically
""overlay"" GC and non-GC fields.

Contributes to #104936",2025-04-03 00:03:20+00:00,Andy Ayers,0,,,1,51,6,"jit: stop tracking typ_i_impl locals in escape analysis (issue_ref)abstractly a non-gc local can't cause escape. on 32 bit platforms tracking connectionsto leads to confusion once we start struct field tracking, as we logically""overlay"" gc and non-gc fields.contributes to issue_ref"
dotnet/runtime,970070e3b78b8cf604dabfe114e1f609c38c555d,"Fill out more SuperPMI cases for LoongArch64 and RISCV64 (#114136)

* Fill out more SuperPMI cases for LoongArch64 and RISCV64

With these changes, SuperPMI can be used with a LoongArch64 or RISCV64
cross-targeting altjit and x64 MCH files to generate and view some code.
There are lots of ""missing data"" cases; for RISCV64 about half of x64
contexts replay successfully.

More work is required for asmdiffs to work, such as updating
coredistools and implementing Loongarch64/RISCV64 relocation handling.

* Fix Release build",2025-04-03 00:10:37+00:00,Bruce Forstall,1,b3e1d4a8d508b710e736b81c5c3fddd67236fd4b,"JIT: Add post-morph profile repair phase (#113896)

Part of #107749. The latter half of the JIT frontend contains numerous optimizations that rely on block weights to compute the profitability of their transformations, and may benefit from more consistent profile data. Morph and flow opts frequently redirect flow out of blocks and into other ones, and the corresponding tweaks to the profile are usually too local to reduce/increase flow along affected paths. This gives downstream phases inaccurate ideas about which blocks are newly cold/hot, and other profile transformations (such as fgExpandRarelyRunBlocks) can further propagate inaccuracies. Thus, re-running synthesis shortly after morph seems like an opportune and cheap place to fix the profile. Like the late profile synthesis run, we aren't interested in changing edge likelihoods here -- we just want to propagate changes in block weights through the flowgraph.

I also included some dead code cleanup I meant to do in a previous PR.",10,79,17,"fill out more superpmi cases for loongarch64 and riscv64 (issue_ref)* fill out more superpmi cases for loongarch64 and riscv64with these changes, superpmi can be used with a loongarch64 or riscv64cross-targeting altjit and x64 mch files to generate and view some code.there are lots of ""missing data"" cases; for riscv64 about half of x64contexts replay successfully.more work is required for asmdiffs to work, such as updatingcoredistools and implementing loongarch64/riscv64 relocation handling.* fix release build"
dotnet/runtime,15872212c29cecc8d82da4548c3060f2614665f7,"Delete more of ExceptionTracker code (#114146)

* Delete more of ExceptionTracker code

* Remove m_OOMTracker",2025-04-03 05:45:01+00:00,Filip Navara,0,,,6,10,741,delete more of exceptiontracker code (issue_ref)* delete more of exceptiontracker code* remove m_oomtracker
dotnet/runtime,f6cafb9d24bd76a5b43ee049e1fa79a8117c2f87,"Revert disabling of tests for HTTP servers (#114196)

* Revert ""Disable tests using http://corefx-net-http11.azurewebsites.net (#111235)""

This reverts commit de8e1350ff32875098389bea212fcebc8d598b85.

* Revert ""Disable more tests dependent on http://corefx-net-http11.azurewebsites.net (#111354)""

This reverts commit 9fea44166064fb9ca6ef1bab9362f24c47512ae1.",2025-04-03 12:30:28+00:00,Radek Zikmund,1,3e5c258367977a21c30071e4f351bd9bd1213a24,"Ignore revocation checking failures on HTTPS tests on OSX (#116910)

* Log cert validation errors

* Add a test server

* Apply fix from https://github.com/dotnet/corefx/pull/22305

* Apply suggestions from code review",7,22,59,"revert disabling of tests for http servers (issue_ref)* revert ""disable tests using (issue_ref)""this reverts commit de8e1350ff32875098389bea212fcebc8d598b85.* revert ""disable more tests dependent on (issue_ref)""this reverts commit 9fea44166064fb9ca6ef1bab9362f24c47512ae1."
dotnet/runtime,a79768ed8b1a151d0daa002f92348ab4d47d73a0,"JIT: Propagate flow into finally regions correctly in synthesis (#114016)

Part of #107749. The first profile synthesis run happens before importation, so we don't model flow in and out of finally regions with flow edges yet. As a workaround, synthesis gives each finally region the same weight as its corresponding try region. When call-finally pairs are created, the tail inherits the weight of its head under the (faulty) assumption that all flow into a call-finally will return to the same pair. Once we have flow edges, we can compute the flow out of finally regions the same way as we compute flow elsewhere. It's important that synthesis models flow through finally regions via flow edges once we have them, or else flow through a loop that executes a finally might be lost, messing up the cyclic probability computation and flattening the loop's weight.",2025-04-03 14:37:57+00:00,Aman Khalid,1,45a4cc2e583af113b3a1f7e458c1dec7a06c25ba,"JIT: revised fix for fp division issue in profile synthesis (#115005)

The previous fix #113396 could still leave us trying to evaluate 0.0/0.0,
which causes an invalid FP operation exception.

Make sure the divisor is non-zero.",5,115,100,"jit: propagate flow into finally regions correctly in synthesis (issue_ref)part of issue_ref. the first profile synthesis run happens before importation, so we don't model flow in and out of finally regions with flow edges yet. as a workaround, synthesis gives each finally region the same weight as its corresponding try region. when call-finally pairs are created, the tail inherits the weight of its head under the (faulty) assumption that all flow into a call-finally will return to the same pair. once we have flow edges, we can compute the flow out of finally regions the same way as we compute flow elsewhere. it's important that synthesis models flow through finally regions via flow edges once we have them, or else flow through a loop that executes a finally might be lost, messing up the cyclic probability computation and flattening the loop's weight."
dotnet/runtime,43704746091afad3a3312ddb0f285d539db4b49b,"Notify profiler about unloads of all class instances when module is unloaded (#114107)

* Notify profiler about unloads of all class instances when module is unloaded

* Apply suggestions from code review

Co-authored-by: Noah Falk <noahfalk@users.noreply.github.com>

* Move NotifyUnload method

* Apply suggestions from code review

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Removed notification profiler code from the test

---------

Co-authored-by: Noah Falk <noahfalk@users.noreply.github.com>
Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-04-03 16:25:58+00:00,Alexey Zakharov,0,,,12,293,74,notify profiler about unloads of all class instances when module is unloaded (issue_ref)* notify profiler about unloads of all class instances when module is unloaded* apply suggestions from code review
dotnet/runtime,76093e04d74372e117cb79e480225946f5ce2fe4,Generating Debug Info for interpreted bytecode (#114139),2025-04-03 17:51:41+00:00,Andrew Au,0,,,6,212,102,generating debug info for interpreted bytecode (issue_ref)
dotnet/runtime,778427c4c7618a753f4d2afb75943590c3f2d8f3,"[clrinterp] Add support for ldc.r4, ldc.r8, ldc.i8 and ldstr (#114201)

* Add support for ldc.r4, ldc.r8 and ldc.i8

* Add support for ldstr

* Add test for basic float operations",2025-04-03 18:03:00+00:00,Vlad Brezae,1,6f23aafcad2110efc172e4bc74f9e028504867e1,"Fix bad merge of the interpreter code (#114233)

There were two changes merged after their ci runs completed where one
has renamed a variable used in the compiler.cpp and the other has added
few new usages of the variable with the old name.

This change fixes it.",5,107,1,"[clrinterp] add support for ldc.r4, ldc.r8, ldc.i8 and ldstr (issue_ref)* add support for ldc.r4, ldc.r8 and ldc.i8* add support for ldstr* add test for basic float operations"
dotnet/runtime,8b7cd7b975e8d62caee7360ec657637084b7fe48,"[PERF][Android] Setup Android sample app for AOT/R2R perf testing (#114117)

Setup Android sample app for AOT/R2R perf testing",2025-04-03 19:17:57+00:00,Matous Kozak,1,321868be017243bede6d6f7c8c7553811b5af144,"[Performance] Add static linking build for CoreCLR Android (#116093)

* Update performance repository reference in perf.yml

* Add CoreCLR JIT static linking build for Android sample app

* Remove reference to performance branch

* Fix formatting",1,48,0,[perf][android] setup android sample app for aot/r2r perf testing (issue_ref)setup android sample app for aot/r2r perf testing
dotnet/runtime,99a44c9047b0903acb8ac457bb2f6a3a54f0050d,"Update dependencies from https://github.com/dotnet/arcade build 20250403.1 (#114210)

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.25178.2 -> To Version 10.0.0-beta.25203.1

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-04-03 20:14:16+00:00,dotnet-maestro[bot],0,,,4,58,71,"update dependencies from build 20250403.1 (issue_ref)microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.25178.2 -> to version 10.0.0-beta.25203.1"
dotnet/runtime,ed755bb162438c0882e1fb1b0cd6bb2ff01ca6e4,"Remove specific AZL sign certs (#114131)

Replaced by arcade pattern:

https://github.com/dotnet/arcade/pull/15684",2025-04-03 20:15:19+00:00,Matt Mitchell,0,,,1,0,10,remove specific azl sign certs (issue_ref)replaced by arcade pattern:
dotnet/runtime,513c52b3aca8c6b505c8111df2dd932311a62d5d,"[RISC-V] Simple math intrinsics (#113689)

* fabs & fsqrt

* Min/MaxNumber

* Min/MaxMagnitudeNumber

* ReciprocalSqrtEstimate

* Min/Max, Min/MaxMagnitude

* Fix assert in lsrarisc64.cpp

* Improve Min/Max non-Number in IL

* name #endif

* minor cleanup

* Intrinsify LeadingZeroCount

* TrailingZeroCount

* PopCount

* Build fix

* Remove assertion from default case

* fabs comment

* CHECK_SPILL_ALL in mixn/max non-number operand clones

* Revert bit count intrinsics

* fix comment

Co-authored-by: Adeel Mujahid <3840695+am11@users.noreply.github.com>

---------

Co-authored-by: Adeel Mujahid <3840695+am11@users.noreply.github.com>",2025-04-03 21:20:35+00:00,Tomasz Sowiński,1,37e4d45236e68946db9d264593aa31a9c00534bc,"[RISC-V] Fix RISC-V Windows build (#114292)

* Fix RISC-V Windows build

Also, convert some asserts in `emitDispDataSec` to `printf`: we
generally don't want asserts in debug printing code, and I was hitting
some of these when disassembling some RISC-V code.

* Fix formatting",7,135,46,"[risc-v] simple math intrinsics (issue_ref)* fabs & fsqrt* min/maxnumber* min/maxmagnitudenumber* reciprocalsqrtestimate* min/max, min/maxmagnitude* fix assert in lsrarisc64.cpp* improve min/max non-number in il* name #endif* minor cleanup* intrinsify leadingzerocount* trailingzerocount* popcount* build fix* remove assertion from default case* fabs comment* check_spill_all in mixn/max non-number operand clones* revert bit count intrinsics* fix comment"
dotnet/runtime,9e8a9e94ef298098d2a53a5335409dbb606663c6,"[JIT] Enable conditional chaining for Intel APX (#111072)

* Enable conditional compare chaining for AMD64.

* Reduce duplication from `optSwitchDetectLikely`.

* Update src/coreclr/jit/lsrabuild.cpp

Co-authored-by: Bruce Forstall <brucefo@microsoft.com>

* Update src/coreclr/jit/lowerxarch.cpp

Co-authored-by: Bruce Forstall <brucefo@microsoft.com>

* Update src/coreclr/jit/lowerxarch.cpp

Co-authored-by: Bruce Forstall <brucefo@microsoft.com>

* Widen the potential candidates for ccmp folding.

Also lifts GenConditionDesc into CodeGenInterface to better check which
flag lowerings will produce multiple instructions.

* Refactor some common code into lower.cpp.

Some code will conflict with latest changes. I've squashed so we
can discuss how to merge in properly.

* Refactored common code out.

* Review edits.

* Fix build errors.

* Formatting.

---------

Co-authored-by: Bruce Forstall <brucefo@microsoft.com>",2025-04-03 21:24:58+00:00,anthonycanino,1,a9374b49e1df6607510d8468d1c8da6694788c97,"Fix GC hole with `rorx` instruction (#114467)

The `rorx` instruction uses format IF_RWR_ARD_CNS. This format was not
handled when killing GC refs in `emitOutputAM`.

I added other cases of register write ""ARD"" address mode formats
to the same case as ""defense in depth"" -- most or all of them are
probably SIMD instructions with SIMD destination registers, and won't go
down this code path.

Diffs include cases in the HardwareIntrinsics tests, but also in the
libraries code, for both x64 and x86.",19,463,193,[jit] enable conditional chaining for intel apx (issue_ref)* enable conditional compare chaining for amd64.* reduce duplication from .* update src/coreclr/jit/lsrabuild.cpp
dotnet/runtime,6f23aafcad2110efc172e4bc74f9e028504867e1,"Fix bad merge of the interpreter code (#114233)

There were two changes merged after their ci runs completed where one
has renamed a variable used in the compiler.cpp and the other has added
few new usages of the variable with the old name.

This change fixes it.",2025-04-03 21:52:45+00:00,Jan Vorlicek,1,0c012864be42d492e88b3437cb2dd4ec44a36595,"[clr-interp] Fix emit of bb end var moves (#114267)

This code makes the current stack state match the stack state expected by a bblock that we transition to. The code was accidentally offseting from the current stack pointer, rather than from the base of the stack.",1,10,10,fix bad merge of the interpreter code (issue_ref)there were two changes merged after their ci runs completed where onehas renamed a variable used in the compiler.cpp and the other has addedfew new usages of the variable with the old name.this change fixes it.
dotnet/runtime,720f517d064d394d6862d9e121ef4664ffaca040,"JIT: increase inline budget (#114191)

The current JIT inline strategy is prone to running out of budget at inopportune
times, deeply inlining at some top-level sites and not inlining at all at others.
This doesn't happen all that often, but when it does it has very adverse impact
on performance.

While we await a better strategy, we can at least reduce how often this happens
by increasing the budget.

Partially addresses regressions seen in #113913",2025-04-03 22:15:31+00:00,Andy Ayers,1,68a3c1e032f955984ab364cbc5bb69addd35d770,"JIT: remove dependence on GetThreadCycles (#114290)

Remove dependence on GetThreadCycles and hence on pal-provided QueryThreadCycleTime.

Use QueryPerformanceCounter/Frequency instead. This should be good enough
for this feature (considering it exists only under DEBUG).

Fixes #105472",1,1,1,"jit: increase inline budget (issue_ref)the current jit inline strategy is prone to running out of budget at inopportunetimes, deeply inlining at some top-level sites and not inlining at all at others.this doesn't happen all that often, but when it does it has very adverse impacton performance.while we await a better strategy, we can at least reduce how often this happensby increasing the budget.partially addresses regressions seen in issue_ref"
dotnet/runtime,bf7d30b9ecfbb502f055fef74190754e85ff7bda,"[wasm][interp] Add aliases for Vector128.Load and Vector128.LoadUnsafe (#114243)

* Add aliases Load and LoadUnsafe

* Actually add Load and LoadUnsafe to the alias set",2025-04-04 01:34:01+00:00,Larry Ewing,0,,,2,40,21,[wasm][interp] add aliases for vector128.load and vector128.loadunsafe (issue_ref)* add aliases load and loadunsafe* actually add load and loadunsafe to the alias set
dotnet/runtime,6dc03c26777f386444a0acb95ee3e03d406c26ce,ML-KEM: ImportFrom{Encrypted}Pem,2025-04-04 03:30:20+00:00,Kevin Jones,0,,,13,1530,11,ml-kem: importfrom{encrypted}pem
dotnet/runtime,39b1172f709d64bcbbf6da664e3bb7a543036943,"Add support for building runtime with FEATURE_EH_FUNCLETS on win-x86 (#114157)

This doesn't change the runtime configuration, but it enables the code paths necessary to support it in future if we decide to switch.",2025-04-04 03:42:41+00:00,Filip Navara,1,e72f3680fb2dec4d3f293e927fc0b878d78100d0,"Move funclets invocation to code managers (#114180)

* Move funclets invocation to code managers

This change moves exception handling funclets invocation to the
ICodeManager so that it can be done differently for JITted/crossgened
code and interpreted code.

* Fix m_csfEHClause - it needs to be SP of the direct funclet caller

* Fix build for platforms with USE_FUNCLET_CALL_HELPER

I've missed the fact that the macro is defined in the
exceptionhandling.cpp only, so the move to eetwain.cpp disabled this
feature.

* Fix WASM build

* Fix random crashes due to tail call optimization

* Fix build with GCC and reflect feedback

* Update src/coreclr/vm/eetwain.cpp

* Address feedback

* Another feedback

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",22,483,179,"add support for building runtime with feature_eh_funclets on win-x86 (issue_ref)this doesn't change the runtime configuration, but it enables the code paths necessary to support it in future if we decide to switch."
dotnet/runtime,b59dba67c6f32705d43be9cebb2a58466bc8c444,Flag regression as active issue for the moment (#114253),2025-04-04 05:40:14+00:00,Larry Ewing,0,,,1,1,0,flag regression as active issue for the moment (issue_ref)
dotnet/runtime,ebcbde19ae3d35893879bb0e4376d9dfb7d5b336,"[mono] Tweaks to bridge testing (#114203)

* Tweak disabled test for future investigation

Seems to pass with 50000 but fails with 100000.

* Run bridge tests also in tarjan only mode

Initially, we were running the bridge tests as comparison between tarjan and new bridge output. In order for the output to match, certain optimizations need to be disabled for the tarjan bridge and this configuration would be different from standard production configuration. Address this by also running the tests in tarjan only mode. While we don't verify the correctness of the generated SCCs in this configuration, we could still catch certain assertions in the implementation. For example, FauxHeavyNodeWithCycles would lead to crashes in tarjan only configuration.",2025-04-04 08:24:59+00:00,Vlad Brezae,1,2dc93921c98f940505e06c6fb072f5ab55318613,"Fix last issue with GC bridge comparison and enable all tests (#115049)

* Fix last issue with GC bridge comparison and enable all tests

* Remove obsolete comment

* Better fix",2,19,7,"[mono] tweaks to bridge testing (issue_ref)* tweak disabled test for future investigationseems to pass with 50000 but fails with 100000.* run bridge tests also in tarjan only modeinitially, we were running the bridge tests as comparison between tarjan and new bridge output. in order for the output to match, certain optimizations need to be disabled for the tarjan bridge and this configuration would be different from standard production configuration. address this by also running the tests in tarjan only mode. while we don't verify the correctness of the generated sccs in this configuration, we could still catch certain assertions in the implementation. for example, fauxheavynodewithcycles would lead to crashes in tarjan only configuration."
dotnet/runtime,ff18c306e5878215f9cefdd3c72e91e48826f4f0,Track unobserved exceptions in stress tests (#114225),2025-04-04 11:39:41+00:00,Anton Firszov,0,,,2,39,0,track unobserved exceptions in stress tests (issue_ref)
dotnet/runtime,f9cf3c81aaa89c1c21d3e0a169254684fb74cf82,"Make COR_PRF_DISABLE_OPTIMIZATIONS Allowable After Attach and non immutable (#113924)

* Make COR_PRF_DISABLE_OPTIMIZATIONS and COR_PRF_DISABLE_INLINING mutable flags

* On module initialization, capture the profiler JIT flags so they apply consistently on that module

* Change old macro usages and make them call Module::AreJITOptimizationsDisabled() instead

* Test for dynamic assignment of COR_PRF_DISABLE_OPTIMIZATIONS and COR_PRF_DISABLE_INLINING

* Update src/coreclr/vm/ceeload.cpp

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-04-04 13:51:32+00:00,Simon Ferquel,1,f6ecb6e98ff7b991f116a41b2811446ade773638,"[debugger] Fix crash during Async Break when APC and CET are enabled (#111408)

When we are running an APC Callback we are not allowed to SetIP because when APC Callback is resuming it will check if the IP is not changed if CET is enabled.
To avoid this problem we use the APC to suspend the thread, but then we enable the single step and continue the thread execution, this will exit the apc callback and pause in the single step, so we are allowed to SetIP to FuncEvalHijack to run FuncEvals.",21,469,78,"make cor_prf_disable_optimizations allowable after attach and non immutable (issue_ref)* make cor_prf_disable_optimizations and cor_prf_disable_inlining mutable flags* on module initialization, capture the profiler jit flags so they apply consistently on that module* change old macro usages and make them call module::arejitoptimizationsdisabled() instead* test for dynamic assignment of cor_prf_disable_optimizations and cor_prf_disable_inlining* update src/coreclr/vm/ceeload.cpp"
dotnet/runtime,39265ca7d7eac09fcc04b042a4161b8c20ab5191,"[browser] profilers linking and instrumentation in AOT (#114080)

Co-authored-by: Marek Fišera <mara@neptuo.com>",2025-04-04 14:12:49+00:00,Pavel Savara,0,,,34,272,205,[browser] profilers linking and instrumentation in aot (issue_ref)
dotnet/runtime,027916b0f7dc26ac905c32e32cfb7edb1a346111,Remove jitstress-isas-sve pipeline (#114245),2025-04-04 17:42:38+00:00,Kunal Pathak,0,,,4,2,45,remove jitstress-isas-sve pipeline (issue_ref)
dotnet/runtime,5b1ffb823b2312cc76f82c600327f0ade5c1a656,"[mono][interp] Group all the System.Runtime.Intrinsics logic together (#114270)

Remove nonexistent namespace check and avoid comparing the same 25 characters over and over for every System.Runtime.Intrinsics method.

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-04-04 19:32:27+00:00,Larry Ewing,0,,,1,35,34,[mono][interp] group all the system.runtime.intrinsics logic together (issue_ref)remove nonexistent namespace check and avoid comparing the same 25 characters over and over for every system.runtime.intrinsics method.---------
dotnet/runtime,e1cd060ae34187232e517954d857e3d7e00a876d,"Switch libraries testing to Ubuntu 22 temporarily (#114268)

Azure Linux has a regression in crypto stack that leads to intermittent hangs.

Workaround https://github.com/dotnet/dnceng/issues/5329",2025-04-04 20:07:16+00:00,Jan Kotas,0,,,1,2,2,switch libraries testing to ubuntu 22 temporarily (issue_ref)azure linux has a regression in crypto stack that leads to intermittent hangs.workaround
dotnet/runtime,2fe8937e44b36c29d44270d4173dd155453cb313,"JIT: Optimize ConditionalSelect with const zero when condition is not TYP_MASK (#113864)

* optimize ConditionalSelect with const zero

* remove superfluous LowerNode calls

* Revert ""remove superfluous LowerNode calls""

This reverts commit 6dae5989359c724cc56f4616a439e8fc1141db08.

* just remove one LowerNode call

* Revert ""just remove one LowerNode call""

This reverts commit 17886e7d35ecf40d1090d85263f1028bf63e82e1.",2025-04-04 20:38:50+00:00,Clinton Ingram,1,ce1978fbe766f28c4ee79bee55180bbb13c928a8,"JIT: Don't allow retyping of casts containing a memory load (#114602)

* don't allow retyping of casts containing a memory load

* fix NRE in test

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",1,31,0,"jit: optimize conditionalselect with const zero when condition is not typ_mask (issue_ref)* optimize conditionalselect with const zero* remove superfluous lowernode calls* revert ""remove superfluous lowernode calls""this reverts commit 6dae5989359c724cc56f4616a439e8fc1141db08.* just remove one lowernode call* revert ""just remove one lowernode call""this reverts commit 17886e7d35ecf40d1090d85263f1028bf63e82e1."
dotnet/runtime,0b47984160c51a16899307c7fcfaede6c53efd00,add outerloop to build-analysis. (#114164),2025-04-04 20:54:16+00:00,Manish Godse,0,,,1,4,0,add outerloop to build-analysis. (issue_ref)
dotnet/runtime,7aa08684e69617d75995044b7367ad202eb82354,"Alternate approach for HELPER_METHOD_FRAME removal for arithmetic div… (#113286)

This is a combination of @am11's work in PR #109087 and some work to just rewrite the Windows X86 helpers in assembly.
  - For non 64-bit platforms, remove the helpers
  - For Unix platforms, rely on an implementation which uses an FCall to native code to invoke the various operations.
  - For Windows X86 on CoreCLR, rewrite the helpers in assembly with a tail-call approach for throwing.
    - Also it was noted that the existing helpers do a fair bit of unnecessary stack manipulation, and the manual rewrite avoids all of that. Maybe this will actually be faster. (Turns out it is about the same on performance. The real win would come from re-ordering the argument order, but that's a much more invasive change in the JIT, which I judge to be too risky)",2025-04-04 21:41:41+00:00,David Wrighton,0,,,21,612,496,"alternate approach for helper_method_frame removal for arithmetic div… (issue_ref)this is a combination of @am11's work in pr issue_ref and some work to just rewrite the windows x86 helpers in assembly. - for non 64-bit platforms, remove the helpers - for unix platforms, rely on an implementation which uses an fcall to native code to invoke the various operations. - for windows x86 on coreclr, rewrite the helpers in assembly with a tail-call approach for throwing. - also it was noted that the existing helpers do a fair bit of unnecessary stack manipulation, and the manual rewrite avoids all of that. maybe this will actually be faster. (turns out it is about the same on performance. the real win would come from re-ordering the argument order, but that's a much more invasive change in the jit, which i judge to be too risky)"
dotnet/runtime,a7395348036093bc7638808dbae931547890d7fa,"ML-KEM: PKCS#8 Exports

Adds `ExportPkcs8PrivateKey`, `TryExportPkcs8PrivateKey`, and `TryExportPkcs8PrivateKeyCore` to `MLKem`.",2025-04-04 23:14:43+00:00,Kevin Jones,0,,,16,525,49,"ml-kem: pkcsissue_ref exportsadds , , and to ."
dotnet/runtime,861789b93f067584d53da2fd383ec25e4e0581c2,"Update dependencies from https://github.com/dotnet/source-build-reference-packages build 20250404.2 (#114283)

Microsoft.SourceBuild.Intermediate.source-build-reference-packages
 From Version 10.0.617601 -> To Version 10.0.620402

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-04-05 00:26:43+00:00,dotnet-maestro[bot],0,,,1,2,2,update dependencies from build 20250404.2 (issue_ref)microsoft.sourcebuild.intermediate.source-build-reference-packages from version 10.0.617601 -> to version 10.0.620402
dotnet/runtime,3564cb91c3ad3f5c32d7e6d3d7699d7be7564aaf,"Update maintenance-packages versions (#114281)

* Update maintenance-packages versions

* Update dependencies from https://github.com/dotnet/source-build-reference-packages build 20250404.2

Microsoft.SourceBuild.Intermediate.source-build-reference-packages
 From Version 10.0.617601 -> To Version 10.0.620402

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-04-05 00:37:58+00:00,Carlos Sánchez López,0,,,1,3,3,update maintenance-packages versions (issue_ref)* update maintenance-packages versions* update dependencies from build 20250404.2microsoft.sourcebuild.intermediate.source-build-reference-packages from version 10.0.617601 -> to version 10.0.620402---------
dotnet/runtime,b3e1d4a8d508b710e736b81c5c3fddd67236fd4b,"JIT: Add post-morph profile repair phase (#113896)

Part of #107749. The latter half of the JIT frontend contains numerous optimizations that rely on block weights to compute the profitability of their transformations, and may benefit from more consistent profile data. Morph and flow opts frequently redirect flow out of blocks and into other ones, and the corresponding tweaks to the profile are usually too local to reduce/increase flow along affected paths. This gives downstream phases inaccurate ideas about which blocks are newly cold/hot, and other profile transformations (such as fgExpandRarelyRunBlocks) can further propagate inaccuracies. Thus, re-running synthesis shortly after morph seems like an opportune and cheap place to fix the profile. Like the late profile synthesis run, we aren't interested in changing edge likelihoods here -- we just want to propagate changes in block weights through the flowgraph.

I also included some dead code cleanup I meant to do in a previous PR.",2025-04-05 00:48:28+00:00,Aman Khalid,1,006ad21887ac61bdf105197cd23539aa820a6aca,"JIT: boost inlining for methods that may return small arrays (#114806)

Look for inlinees that may be allocating and returning small fixed sized arrays.
When inlined, these array allocations may end up non-escaping and be stack allocated.

This analysis is approximate; we can't tell for sure in the IL scan what the array
size is, and we can't easily tell if the allocated array is actually returned.

Contributes to #113236",6,30,87,"jit: add post-morph profile repair phase (issue_ref)part of issue_ref. the latter half of the jit frontend contains numerous optimizations that rely on block weights to compute the profitability of their transformations, and may benefit from more consistent profile data. morph and flow opts frequently redirect flow out of blocks and into other ones, and the corresponding tweaks to the profile are usually too local to reduce/increase flow along affected paths. this gives downstream phases inaccurate ideas about which blocks are newly cold/hot, and other profile transformations (such as fgexpandrarelyrunblocks) can further propagate inaccuracies. thus, re-running synthesis shortly after morph seems like an opportune and cheap place to fix the profile. like the late profile synthesis run, we aren't interested in changing edge likelihoods here -- we just want to propagate changes in block weights through the flowgraph.i also included some dead code cleanup i meant to do in a previous pr."
dotnet/runtime,c08ef4b6262c62e5aa4e0400013e8a461dc380f9,Add FrozenDictionary.Create (#114192),2025-04-05 01:56:39+00:00,Stephen Toub,0,,,4,107,10,add frozendictionary.create (issue_ref)
dotnet/runtime,bc769e818eddd2a722e12ba15f7f3e04a855c4cb,"Enable RISC-V in coredistools (#114291)

Update the coredistools.h header file with the source copy
in dotnet/jitutils. A new coredistools binary will hopefully
soon be updated to match. Nonetheless, enabling the build enables
the new coredistools binaries but does not require it.

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-04-05 03:34:48+00:00,Bruce Forstall,0,,,3,3,4,"enable risc-v in coredistools (issue_ref)update the coredistools.h header file with the source copyin dotnet/jitutils. a new coredistools binary will hopefullysoon be updated to match. nonetheless, enabling the build enablesthe new coredistools binaries but does not require it."
dotnet/runtime,054949bb7bdffb590340930750da1825e633ae21,"Remove unused and unnecessary `CLRConfig`s. (#114282)

* Remove unused and unnecessary CLRConfigs.

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-04-05 04:43:37+00:00,Aaron Robinson,0,,,11,22,74,remove unused and unnecessary s. (issue_ref)* remove unused and unnecessary clrconfigs.
dotnet/runtime,819bff14702a6e488a54400f0381846eb5a0f5b7,Add System.Net.ServerSentEvents to PAckageOverrides.txt (#114294),2025-04-05 05:40:23+00:00,Stephen Toub,0,,,1,1,0,add system.net.serversentevents to packageoverrides.txt (issue_ref)
dotnet/runtime,5188b3de7d8919adbbff5be896e92f0ccf308e9b,"Don't use property for msbuild versions in Versions.props (#114298)

Avoids issues with source-build overwriting them.",2025-04-05 12:51:28+00:00,Alexander Köplinger,0,,,1,3,3,don't use property for msbuild versions in versions.props (issue_ref)avoids issues with source-build overwriting them.
dotnet/runtime,e2ec53616ab3374e91b1865895488ce1137a1ee5,"Removing unnecessary comments (#114190)

* Removing unnecessary comments

* Reducing more the number of the methods",2025-04-05 14:29:09+00:00,Thays Grazia,0,,,3,816,30031,removing unnecessary comments (issue_ref)* removing unnecessary comments* reducing more the number of the methods
dotnet/runtime,a2e1d21bb4faf914363968b812c990329ba92d8e,"Adjust for culture name normalization in AssemblyNameInfoFuzzer (#114231)

* add a test with comment that explains the unexpected behavior

* adjust the AssemblyNameInfoFuzzer

* mention normalization as well",2025-04-05 14:30:14+00:00,Adam Sitnik,0,,,2,24,1,adjust for culture name normalization in assemblynameinfofuzzer (issue_ref)* add a test with comment that explains the unexpected behavior* adjust the assemblynameinfofuzzer* mention normalization as well
dotnet/runtime,367e0a8a23e444a94c029fcb72dcb4ac66bd6717,"Revert ""Alternate approach for HELPER_METHOD_FRAME removal for arithmetic div…"" (#114308)

This reverts commit 7aa08684e69617d75995044b7367ad202eb82354.",2025-04-06 12:43:29+00:00,Alexander Köplinger,0,,,21,496,612,"revert ""alternate approach for helper_method_frame removal for arithmetic div…"" (issue_ref)this reverts commit 7aa08684e69617d75995044b7367ad202eb82354."
dotnet/runtime,37e4d45236e68946db9d264593aa31a9c00534bc,"[RISC-V] Fix RISC-V Windows build (#114292)

* Fix RISC-V Windows build

Also, convert some asserts in `emitDispDataSec` to `printf`: we
generally don't want asserts in debug printing code, and I was hitting
some of these when disassembling some RISC-V code.

* Fix formatting",2025-04-07 04:19:42+00:00,Bruce Forstall,1,f7bffcb6945ee8fb28fba7d09078be3b6cc1d4b3,fix build break of riscv (#114394),2,31,16,"[risc-v] fix risc-v windows build (issue_ref)* fix risc-v windows buildalso, convert some asserts in to : wegenerally don't want asserts in debug printing code, and i was hittingsome of these when disassembling some risc-v code.* fix formatting"
dotnet/runtime,64252fba0225d92164875824a70b40cc86b7b063,"[mono] Switch generic instance cache back to GHashTable; improve ginst hash function (#113287)

* Switch generic instance cache back to GHashTable
* Replace mono_metadata_generic_inst_hash with a MurmurHash3 variant",2025-04-07 13:36:33+00:00,Katelyn Gadd,1,ca451bfcbc2415d2d85f5dc51c6f577011f274f7,"[mono] Switch simdhash to prime bucket counts; increase load factor

Add some measurements for simdhash ght
Introduce scan data that's fetched once per bucket
Targeted simdhash optimizations via new dn_simdhash_ght_get_value_or_default
Switch to spaced prime bucket counts instead of power of two bucket counts for better collision resistance
Fix cache alignment of ght compatible and ptr ptr simdhash variants on 64-bit
Higher simdhash load factor (closer to ghashtable's; improves performance for bad hashes)
Add sequential keys measurements
Increase load factor to 30%",3,14,10,[mono] switch generic instance cache back to ghashtable; improve ginst hash function (issue_ref)* switch generic instance cache back to ghashtable* replace mono_metadata_generic_inst_hash with a murmurhash3 variant
dotnet/runtime,68a3c1e032f955984ab364cbc5bb69addd35d770,"JIT: remove dependence on GetThreadCycles (#114290)

Remove dependence on GetThreadCycles and hence on pal-provided QueryThreadCycleTime.

Use QueryPerformanceCounter/Frequency instead. This should be good enough
for this feature (considering it exists only under DEBUG).

Fixes #105472",2025-04-07 14:48:57+00:00,Andy Ayers,1,44dd8380ea4bd5cabc88b463cf1967948cfee6e3,"[RISC-V] Bit counting intrinsics (#114337)

* Intrinsify LeadingZeroCount

* TrailingZeroCount

* PopCount

* Build fix

* Remove assertion from default case

* cosmetics

* Separate bit counting from System.Math intrinsics

* Fix assert

* Revert unnecessary diffs",2,23,24,jit: remove dependence on getthreadcycles (issue_ref)remove dependence on getthreadcycles and hence on pal-provided querythreadcycletime.use queryperformancecounter/frequency instead. this should be good enoughfor this feature (considering it exists only under debug).fixes issue_ref
dotnet/runtime,a87fd8bc2fe1bfa3a96d85b05d20a8341c1eb895,"Enable alljitcommunity in CI (#114325)

* Enable alljitcommunity in CI

* Probe pipeline config path for trigger",2025-04-07 16:44:12+00:00,Adeel Mujahid,0,,,1,2,1,enable alljitcommunity in ci (issue_ref)* enable alljitcommunity in ci* probe pipeline config path for trigger
dotnet/runtime,f9afc71abf17cb880861c83a5c73866f0e0b8352,"[clr-interp] Implement a few minor opcodes (#114312)

* [clr-interp] Add div and rem support

We assert in cases where exception should be thrown due to missing exception support at this moment

* [clr-interp] Implement dup opcode

* [clr-interp] Implement initobj opcode

* [clr-interp] Minor tweaks to indirect loads/stores

Delete LDIND_O, it is identical to LDIND_I4/LDIND_I8. Make sure stind.ref actually uses STIND_O, which reports the store to the GC. STIND_I doesn't do write barriers.",2025-04-07 20:31:33+00:00,Vlad Brezae,0,,,4,198,10,"[clr-interp] implement a few minor opcodes (issue_ref)* [clr-interp] add div and rem supportwe assert in cases where exception should be thrown due to missing exception support at this moment* [clr-interp] implement dup opcode* [clr-interp] implement initobj opcode* [clr-interp] minor tweaks to indirect loads/storesdelete ldind_o, it is identical to ldind_i4/ldind_i8. make sure stind.ref actually uses stind_o, which reports the store to the gc. stind_i doesn't do write barriers."
dotnet/runtime,af39659c21fa82ea69fae46013d3bb62ef87b978,"Multi-target Microsoft.NET.HostModel (#114343)

* Multi-target Microsoft.NET.HostModel

Multi-targeting helps to use latest on .NETCoreApp and LKG (toolset)
on .NETFramework. Should partially unblock m-p packages dependency flow in dotnet/sdk:
https://github.com/dotnet/sdk/pull/48034

---------

Co-authored-by: Carlos Sánchez López <1175054+carlossanlop@users.noreply.github.com>",2025-04-07 21:41:23+00:00,Viktor Hofer,0,,,4,19,9,multi-target microsoft.net.hostmodel (issue_ref)* multi-target microsoft.net.hostmodelmulti-targeting helps to use latest on .netcoreapp and lkg (toolset)on .netframework. should partially unblock m-p packages dependency flow in dotnet/sdk:---------
dotnet/runtime,9559b2a8c2961fd72d2e687a2b3f8f148aa33eb5,"Remove CreateFalse node during lowering, if MaskToVector is getting removed (#114272)

* Remove CreateFalse node during lowering, if MaskToVector is getting deleted

* fix SVE.experimental warning

* review feedback",2025-04-07 23:02:43+00:00,Kunal Pathak,1,90a7381a07d5273771e75c4fa9eb683751dcbcf2,"Test build fix (#114375)

* Convert to [Fact]

* rename class

* Sve.IsSupported",3,47,16,"remove createfalse node during lowering, if masktovector is getting removed (issue_ref)* remove createfalse node during lowering, if masktovector is getting deleted* fix sve.experimental warning* review feedback"
dotnet/runtime,b28005dc17b4065d7086703f49e44b9876b68f8c,Disable wasm linux library tests which are failing due to infrastructure (#114347),2025-04-08 00:05:33+00:00,Larry Ewing,0,,,1,0,10,disable wasm linux library tests which are failing due to infrastructure (issue_ref)
dotnet/runtime,4ef4f90ba1dcb663fe7e9161659ca5b0a1f99dba,ML-KEM: EncryptedPrivateKeyInfo exports,2025-04-08 01:33:15+00:00,Kevin Jones,0,,,5,747,2,ml-kem: encryptedprivatekeyinfo exports
dotnet/runtime,4e9627e311806330be72b7f7d3660be699878ebd,[wasm][interp] alias Vector operators to PackedSimd (#114293),2025-04-08 02:49:36+00:00,Larry Ewing,0,,,1,99,42,[wasm][interp] alias vector operators to packedsimd (issue_ref)
dotnet/runtime,f3cc87946d2f8f6306aa056c311571fae01c868b,"Call build.cmd directly from build.sh (#114341)

* Call build.cmd directly from build.sh

* Remove cygpath

Windows style is available on MinGW, but not Cygwin",2025-04-08 07:47:35+00:00,kzrnm,0,,,1,2,3,"call build.cmd directly from build.sh (issue_ref)* call build.cmd directly from build.sh* remove cygpathwindows style is available on mingw, but not cygwin"
dotnet/runtime,548aadc94b8922da96294625c4dd4d9a4fd00872,"[clr-interp] Refactor passing of configuration environment variables (#114300)

* [clr-interp] Refactor consumation of configuration properties from environment

* [clr-interp] Verbose logging for method passed in DOTNET_InterpDump

* [clr-interp] Add support for DOTNET_InterpHalt

This flag adds a `INTOP_BREAKPOINT` instruction at the beginning of the method. This opcode calls the `InterpBreakpoint` method. In order to make use of this debug option, you need to add a breakpoint to this method.

An alternative would be to use special instructions to trigger a trap in the debugger, but there is no clean cross platform way to do this currently. Using `__builtin_debugtrap()` on arm64 doesn't allow for step/continue, you would need to set the PC register manually to the next instruction in order to exit the trap, making it a pain to use.",2025-04-08 12:37:24+00:00,Vlad Brezae,1,d874371be064b021fc0afda62b6341b436334d15,"[clr-interp] Add support for virtual method calls  (#114529)

* [clr-interp] Add support for virtual calls (including interface)

This follows a trivial approach where we resolve the MethodDesc of the target method by reusing existing functionality. Long term, virtual dispatching should go through slots continaing interpreter IR code pointer, in a similar fashion to JIT.

* Add test for virtual method dispatch

* Disable test for now

No gc support yet",10,129,11,"[clr-interp] refactor passing of configuration environment variables (issue_ref)* [clr-interp] refactor consumation of configuration properties from environment* [clr-interp] verbose logging for method passed in dotnet_interpdump* [clr-interp] add support for dotnet_interphaltthis flag adds a instruction at the beginning of the method. this opcode calls the method. in order to make use of this debug option, you need to add a breakpoint to this method.an alternative would be to use special instructions to trigger a trap in the debugger, but there is no clean cross platform way to do this currently. using on arm64 doesn't allow for step/continue, you would need to set the pc register manually to the next instruction in order to exit the trap, making it a pain to use."
dotnet/runtime,073fcb374c8786d61b6c000ca582149566f15076,[browser] event pipe - JavaScript part (#110818),2025-04-08 12:48:33+00:00,Pavel Savara,0,,,22,1349,15,[browser] event pipe - javascript part (issue_ref)
dotnet/runtime,04f49efacb7f8fcb667b2cb5815fdaa8cc641188,"Extend static constructor interpreter to support vtable-like structures (#114354)

This makes it possible to identify `struct`s that look like vtables (all fields are `delegate*` and some extras) and represents them differently within the interpreter. The different representation allows the interpreter to capture relocs within the data structure (the normal byte array approach wouldn't be able to represent these since the numerical value of a function pointer is only known at runtime).

I had to extend things so that we can allow byrefs to pass through as nint in places. Hopefully I found all the places where we would try to cast things to `ValueTypeValue` within the interpreter and we now allow `nint`-typed stack slots to also hold a byref.",2025-04-08 13:04:27+00:00,Michal Strehovský,1,c1a1eb66dff30372090d0bbd669cccabc912f8e4,"Fix cast in preinitialization test (#114422)

https://github.com/dotnet/runtime/pull/114374#discussion_r2034463301",5,408,71,extend static constructor interpreter to support vtable-like structures (issue_ref)this makes it possible to identify s that look like vtables (all fields are and some extras) and represents them differently within the interpreter. the different representation allows the interpreter to capture relocs within the data structure (the normal byte array approach wouldn't be able to represent these since the numerical value of a function pointer is only known at runtime).i had to extend things so that we can allow byrefs to pass through as nint in places. hopefully i found all the places where we would try to cast things to within the interpreter and we now allow -typed stack slots to also hold a byref.
dotnet/runtime,18c525d5041d6f971f78ec12e6b7fe26e40e27b2,"[WinHTTP] Certificate caching on WinHttpHandler to eliminate extra call to Custom Certificate Validation (#111791)

* Certificate caching on WinHttpHandler to eliminate extra call to Custom Certificate Validation

* Review feedback

* Review feedback

* Framework compat + Review Feedback

* Implement Timer to clear cache

* Review feedback

* Review Feedback

* Review feedback

* Fix RemoteExecutor issue and change delay to ms

* Review feedback

* Apply suggestions from code review

Co-authored-by: Miha Zupan <mihazupan.zupan1@gmail.com>

* Add ExecutionContext SuppressFlow

* Fix alignment issues

* Add offset docs for IPAddress parsing

* Use RawDataMemory for lookup in Modern .NET

---------

Co-authored-by: Miha Zupan <mihazupan.zupan1@gmail.com>",2025-04-08 13:15:05+00:00,Ahmet Ibrahim Aksoy,1,86f6fa91825cb9a52a2dd248a8a34d29ecabfa17,"Unify certificate chain building between SslStream and WinHttpHandler (#115761)

* Initial plan for issue

* Update WinHttpRequestCallback to use CertificateValidation

Co-authored-by: liveans <45091041+liveans@users.noreply.github.com>

* Remove unused WinHttpCertificateHelper.cs file

Co-authored-by: liveans <45091041+liveans@users.noreply.github.com>

* Fix formatting issues in WinHttpRequestCallback.cs

Co-authored-by: liveans <45091041+liveans@users.noreply.github.com>

* Fix compatibility with .NET Framework by using GetLastWin32Error

Co-authored-by: liveans <45091041+liveans@users.noreply.github.com>

* Fix FakeX509Certificates.cs to clarify empty namespace

Co-authored-by: krwq <660048+krwq@users.noreply.github.com>

* Remove unnecessary code per review comments

Co-authored-by: liveans <45091041+liveans@users.noreply.github.com>

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: liveans <45091041+liveans@users.noreply.github.com>
Co-authored-by: krwq <660048+krwq@users.noreply.github.com>",7,351,5,[winhttp] certificate caching on winhttphandler to eliminate extra call to custom certificate validation (issue_ref)* certificate caching on winhttphandler to eliminate extra call to custom certificate validation* review feedback* review feedback* framework compat + review feedback* implement timer to clear cache* review feedback* review feedback* review feedback* fix remoteexecutor issue and change delay to ms* review feedback* apply suggestions from code review
dotnet/runtime,0d176521e7e9945fc241b08607d3d3713201c7dc,"JIT: Count EXPLICITTHIS args correctly in tailcall stress (#114368)

The validation that checks if tailcall stress is allowed to kick in was
not handling EXPLICITTHIS correctly.",2025-04-08 14:04:34+00:00,Jakob Botsch Nielsen,0,,,1,3,10,jit: count explicitthis args correctly in tailcall stress (issue_ref)the validation that checks if tailcall stress is allowed to kick in wasnot handling explicitthis correctly.
dotnet/runtime,36bdd235a88b23dd0f92a62ff7c1ab29b96f9cd4,"[perf build] Added possibility to store metadata about latest built PERF build (#113978)

* pipelines triggers unified

* triggering for every commit
added possibility to register build as latest

* storing latest builds reverted

---------

Co-authored-by: Jakub Dražka <kubadrazka@microsoft.com>",2025-04-08 14:09:18+00:00,KubaD,0,,,1,2,8,[perf build] added possibility to store metadata about latest built perf build (issue_ref)* pipelines triggers unified* triggering for every commitadded possibility to register build as latest* storing latest builds reverted---------
dotnet/runtime,6c4f46b27f44d24bd36d0beb50635d266de5b520,Update HttpTelemetry.Redirect helper visibility (#114349),2025-04-08 14:39:30+00:00,Miha Zupan,0,,,1,1,1,update httptelemetry.redirect helper visibility (issue_ref)
dotnet/runtime,6eabb6012b619b50e402c6e06a1b11e239050921,JIT: Skip rarely-run block expansion during flow opts when we have profile data (#114311),2025-04-08 15:19:55+00:00,Aman Khalid,1,4dec73363fc3b0a3e853be0c2f32435f7f7a1825,"JIT: fix issue in redundant zero init opt (#115698)

If there is a redundant field zero def followed by a nonzero USEASG def in a block with
EH flow, redundant zero init will improperly mark the field as not def in the block, leading
to an SSA assert when it processes the USEASG def and can't find a PHI in the handler.

Treat USEASG defs as full defs. If analysis has reached this point then all fields are zero and so if the second def value is zero, a full and partial def have the same effect. If the second def value is not zero then accounting for the def (which will remain) prevents the optimization from removing any of the fields from the block def set.

Fixes #115123.",1,4,4,jit: skip rarely-run block expansion during flow opts when we have profile data (issue_ref)
dotnet/runtime,44dd8380ea4bd5cabc88b463cf1967948cfee6e3,"[RISC-V] Bit counting intrinsics (#114337)

* Intrinsify LeadingZeroCount

* TrailingZeroCount

* PopCount

* Build fix

* Remove assertion from default case

* cosmetics

* Separate bit counting from System.Math intrinsics

* Fix assert

* Revert unnecessary diffs",2025-04-08 16:25:30+00:00,Tomasz Sowiński,1,212b1202f36d21360d3a932a36478ab5b5eff711,"JIT: enhance escape analysis to understand local struct fields (#113977)

Continuation of #113141

Implement a very simplistic ""field sensitive"" analysis for gc structs where we model each struct as simply its gc field(s).

That is, given a gc struct `G` with GC field `f`, we model
```
G.f = ...
```
as an assignment to `G` and
```
   = G.f
```
as a read from `G`. Since we know `G` itself cannot escape, ""escaping"" of `G` means `G.f` can escape.

Note this conflates the fields of `G`: either they all escape or none of them do. We could make this more granular
but it's not clear that doing so is worthwhile, and it requires more up-front work to determine how to track each field's status.

If the struct or struct fields are only consumed locally, we may be able to prove the gc referents don't escape.

This is a subset/elaboration of #112543 that does not try and reason interprocedurally.

Contributes to #104936 / #108913
Fixes #113236 (once the right inlines happen)",9,204,41,[risc-v] bit counting intrinsics (issue_ref)* intrinsify leadingzerocount* trailingzerocount* popcount* build fix* remove assertion from default case* cosmetics* separate bit counting from system.math intrinsics* fix assert* revert unnecessary diffs
dotnet/runtime,967d860e1552bfa0952f871ab97b6ed7bdbf2765,"Disable workloads build, it happens in the sdk repo now (#114386)",2025-04-08 17:04:13+00:00,Alexander Köplinger,0,,,1,1,0,"disable workloads build, it happens in the sdk repo now (issue_ref)"
dotnet/runtime,2bd17019c1c01a6bf17a2de244ff92591fc3c334,"Annotate Microsoft.CSharp with RequiresDynamicCode (#114346)

The public API surface looks exactly like RequiresUnreferencedCode, but
the private implementation details vary slightly. I don't think there's a
meaningful difference in the annotations for RDC vs RUC.",2025-04-08 19:11:58+00:00,Andy Gocke,0,,,65,426,7,"annotate microsoft.csharp with requiresdynamiccode (issue_ref)the public api surface looks exactly like requiresunreferencedcode, butthe private implementation details vary slightly. i don't think there's ameaningful difference in the annotations for rdc vs ruc."
dotnet/runtime,aaa3dd86eb3d57347f97d8bc5b09347546375f41,Add the opcodes to the widening intrinsics (#114395),2025-04-08 22:12:47+00:00,Larry Ewing,0,,,1,12,12,add the opcodes to the widening intrinsics (issue_ref)
dotnet/runtime,a27c3cd8ba4166eb5ff54d8283f29a5a6ac54c08,"Comment out workloads job in runtime-official.yml (#114411)

prepare-signed-artifacts.yml tries to download artifacts from all items in the buildStages array, but since we disabled the workloads job it fails to find an artifact.

Comment out the entry in yml instead.",2025-04-08 22:23:41+00:00,Alexander Köplinger,0,,,1,153,153,"comment out workloads job in runtime-official.yml (issue_ref)prepare-signed-artifacts.yml tries to download artifacts from all items in the buildstages array, but since we disabled the workloads job it fails to find an artifact.comment out the entry in yml instead."
dotnet/runtime,66ca33f98ed2191314e1b9c2adf15a751be58835,"JIT: add note on stack security (GS) (#114356)

Describe current stack buffer overrun detection capabilities.",2025-04-09 00:34:05+00:00,Andy Ayers,0,,,1,67,0,jit: add note on stack security (gs) (issue_ref)describe current stack buffer overrun detection capabilities.
dotnet/runtime,b8b44c6cd0d7a5215373bf269ed610bcbbb4fb95,"Make host trace to `<exe_name>.<pid>.log` if `COREHOST_TRACEFILE` is set to a directory (#114362)

Currently, host tracing can output to a file specified by the `COREHOST_TRACEFILE` environment variable. With multiple concurrent processes, the tracing gets interleaved in the resulting log.

With this change, if `COREHOST_TRACEFILE` is set to a directory that exists, the host will trace to a file named `<exe_name>.<pid>.log` in that directory. If the specified path does not exist or is not a directory, the host uses the existing behavior of tracing to the file specified.",2025-04-09 01:03:08+00:00,Elinor Fung,1,91b725f2fae358edc599c1e97b4d99b944b9e2bb,Trace out error code when creating single-file bundle extraction directory fails (#116342),13,73,32,"make host trace to if is set to a directory (issue_ref)currently, host tracing can output to a file specified by the environment variable. with multiple concurrent processes, the tracing gets interleaved in the resulting log.with this change, if is set to a directory that exists, the host will trace to a file named in that directory. if the specified path does not exist or is not a directory, the host uses the existing behavior of tracing to the file specified."
dotnet/runtime,92b81d9cbeb15d8c84fd1172da90abf2aebd8952,"[wasm][interp] Add Round alias (#114399)

Implements Vector Round intrinsic in terms of PackedSimd.",2025-04-09 03:32:29+00:00,Larry Ewing,1,1d713037fc1f9fa6fe147c964f7fcad9b89da054,[wasm][interp] Fix PackedSimd.Splat intrinsic lookup (#114413),2,7,0,[wasm][interp] add round alias (issue_ref)implements vector round intrinsic in terms of packedsimd.
dotnet/runtime,1d713037fc1f9fa6fe147c964f7fcad9b89da054,[wasm][interp] Fix PackedSimd.Splat intrinsic lookup (#114413),2025-04-09 03:51:24+00:00,Larry Ewing,1,66b3606dbc0a49f6ada18c7eea04e56052a97755,"[wasm][interp] Filter out overmatched shift (#114492)

* Filter out overmatched shift

* Add arg checks to Multiply and Divide as well

* Revert accidental breakage

* Fix again

* Fix again",2,31,0,[wasm][interp] fix packedsimd.splat intrinsic lookup (issue_ref)
dotnet/runtime,376e4f99638ebced8e15605cae3f942417d00ec1,"SVE: Slightly better calculation of stack frame for ldr/str (#114284)

* slightly better calculation of stack frame for SVE ldr/str

* add comments

* review feedback",2025-04-09 03:55:38+00:00,Kunal Pathak,0,,,1,12,2,sve: slightly better calculation of stack frame for ldr/str (issue_ref)* slightly better calculation of stack frame for sve ldr/str* add comments* review feedback
dotnet/runtime,ee5183f35354048dc1b878af92af21e0267466ae,"Automated bump of chrome version (#114303)

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>
Co-authored-by: Ilona Tomkowicz <32700855+ilonatommy@users.noreply.github.com>",2025-04-09 06:54:21+00:00,github-actions[bot],0,,,1,3,3,automated bump of chrome version (issue_ref)
dotnet/runtime,b2335c5726db63cb4e5e2a7b840db200055c3582,"Switch patchpoint key to <func version, IL offset> (#114381)

This PR changes the patchpoint key to be a pair <function
version, IL offset> instead of by IP of the return address. This is in
preparation for runtime async changes where suspension inside OSR
methods have to be resumed via resumption stub -> tier 0 -> OSR method.
The latter step needs to retransition into the right OSR method from the
tier 0 resumption code. With the current key this is problematic
because the return address is not going to be the same as the original
patchpoint that induced the OSR transition.",2025-04-09 07:36:30+00:00,Jakob Botsch Nielsen,0,,,3,8,5,"switch patchpoint key to <func version, il offset> (issue_ref)this pr changes the patchpoint key to be a pair <functionversion, il offset> instead of by ip of the return address. this is inpreparation for runtime async changes where suspension inside osrmethods have to be resumed via resumption stub -> tier 0 -> osr method.the latter step needs to retransition into the right osr method from thetier 0 resumption code. with the current key this is problematicbecause the return address is not going to be the same as the originalpatchpoint that induced the osr transition."
dotnet/runtime,1b35348864ae9c79556534a2b1a5fff46c95bcf7,Delete dead code (#114419),2025-04-09 08:31:32+00:00,Jan Kotas,1,9c8f42801f39de679493f0047f9ef6c865e96363,"Alternate approach for HELPER_METHOD_FRAME removal for arithmetic divide (take2) (#114352)

This is a combination of @am11's work in PR https://github.com/dotnet/runtime/pull/109087 and some work to just rewrite the Windows X86 helpers in assembly.

For non 64-bit platforms, remove the helpers
For Unix platforms, rely on an implementation which uses an FCall to native code to invoke the various operations.
For Windows X86 on CoreCLR, rewrite the helpers in assembly with a tail-call approach for throwing.
Also it was noted that the existing helpers do a fair bit of unnecessary stack manipulation, and the manual rewrite avoids all of that. Maybe this will actually be faster. (Turns out it is about the same on performance. The real win would come from re-ordering the argument order, but that's a much more invasive change in the JIT, which I judge to be too risky)

Revert #114308  and fix the X86 NativeAOT build",10,22,236,delete dead code (issue_ref)
dotnet/runtime,0e94dca5b3203cdb9077dd543d87f1a69ff7eb40,"CultureName ""c"" and ""C"" get mapped to Invariant Culture (#114328)",2025-04-09 08:38:59+00:00,Adam Sitnik,0,,,2,26,2,"culturename ""c"" and ""c"" get mapped to invariant culture (issue_ref)"
dotnet/runtime,b22b813cc3b63fd5dd808c0f5e0c6635409e3478,Remove useless assert from assertprop (#114332),2025-04-09 09:11:43+00:00,Egor Bogatov,1,e9d9995f609e0025edb064c057b0f93425ec5e09,Fix IsVNConstantBound assert (#114486),1,1,8,remove useless assert from assertprop (issue_ref)
dotnet/runtime,2b922d05032e97cac95299602c1113d03f093c76,"Replace CodeManState with cache in EECodeInfo for x86. (#114170)

* Replace CodeManState with cache in EECodeInfo for x86.

On all other platforms CodeManState was unused and taking space in
StackFrameIterator.

Optimize some code paths to cache GC info early or decode the method
size without decoding the whole table.

Move PCTAddr (Eip pointer) into KNONVOLATILE_CONTEXT_POINTERS_EX to
avoid recomputing it when switching between callee and caller contexts.

* Revert the PCTAddr move into KNONVOLATILE_CONTEXT_POINTERS->Eip but keep the helpers

* Improve the GC info cache by caching the table pointer instead of size and thus avoid repeated GetGCInfoToken() calls",2025-04-09 11:49:23+00:00,Filip Navara,1,982912a31bf65ce80d6bfef09a493c27e554937d,"Block inlines with different exception wrapping behavior (#113849)

Fixes #113815",21,257,370,replace codemanstate with cache in eecodeinfo for x86. (issue_ref)* replace codemanstate with cache in eecodeinfo for x86.on all other platforms codemanstate was unused and taking space instackframeiterator.optimize some code paths to cache gc info early or decode the methodsize without decoding the whole table.move pctaddr (eip pointer) into knonvolatile_context_pointers_ex toavoid recomputing it when switching between callee and caller contexts.* revert the pctaddr move into knonvolatile_context_pointers->eip but keep the helpers* improve the gc info cache by caching the table pointer instead of size and thus avoid repeated getgcinfotoken() calls
dotnet/runtime,33959506aacc673077d7d815dd6f281468aea1ff,"[wasm coreclr] simplify build (#114111)

Add mono.emsdk subset for clr.runtime on browser",2025-04-09 11:59:38+00:00,Radek Doulik,0,,,2,2,1,[wasm coreclr] simplify build (issue_ref)add mono.emsdk subset for clr.runtime on browser
dotnet/runtime,1099560cded7f65e1f7b4200e94b3417fe7b4364,[browser] remove profiler from samples (#114428),2025-04-09 14:08:10+00:00,Pavel Savara,0,,,1,0,4,[browser] remove profiler from samples (issue_ref)
dotnet/runtime,f2090b4827718b43bf18a83edefec37c6a019fb3,Mark profiler\DynamicOptimization test JitOptimizationSensitive (#114417),2025-04-09 14:39:29+00:00,Bruce Forstall,0,,,1,4,0,mark profiler\dynamicoptimization test jitoptimizationsensitive (issue_ref)
dotnet/runtime,3beb125393916bb87ce0e6295d68f9be22a5128a,Add guard (#114435),2025-04-09 14:49:21+00:00,Tomasz Sowiński,0,,,1,2,1,add guard (issue_ref)
dotnet/runtime,fca992de2bce7a6bae0651933dce6131912afdc5,[browser] Rename WriteImportMapToHtml to OverrideHtmlAssetPlaceholders (#114434),2025-04-09 14:57:57+00:00,Marek Fišera,0,,,1,2,2,[browser] rename writeimportmaptohtml to overridehtmlassetplaceholders (issue_ref)
dotnet/runtime,2d1588d3a03f32064f71deb1ec32ed6590dae89c,XML documentation for `ProviderAliasAttribute` improved. (#114408),2025-04-09 16:06:54+00:00,Axel D.,0,,,1,7,1,xml documentation for improved. (issue_ref)
dotnet/runtime,4d14dc5b4c685eeca9de610298006f4552e43955,"Reenable workloads build temporarily, only publish workload msi nugets (#114452)",2025-04-09 17:31:59+00:00,Alexander Köplinger,0,,,3,160,153,"reenable workloads build temporarily, only publish workload msi nugets (issue_ref)"
dotnet/runtime,b12aa7c5533ebee71c6173a62df7d79e7bf2f53e,ML-KEM: PEM exports and more overloads,2025-04-09 18:26:13+00:00,Kevin Jones,1,464e5fe6fbe499012445cbd6371010748b89dba3,ML-KEM: Fix missing check for SubjectPublicKeyInfo size,10,1056,115,ml-kem: pem exports and more overloads
dotnet/runtime,8785241b0e326e34ca9e3a69a4cfbb899ad5f886,"Propagate exceptions in `GetAddressInfoExCallback` (#113444)

Unhandled OOM in `GetAddressInfoExCallback` may crash the process. We should catch and forward exceptions in the method.",2025-04-09 19:00:47+00:00,Anton Firszov,0,,,1,19,5,propagate exceptions in (issue_ref)unhandled oom in may crash the process. we should catch and forward exceptions in the method.
dotnet/runtime,2f858e085f2df39ba39d29f5cae9ec488d27423e,"Baseline new warning in trimming tests (#114424)

ToolsTests legs are failing: https://github.com/dotnet/runtime/pull/114406#issuecomment-2788504319
Psychic debugging (without actually trying to repro anything) tells me this is from #114346 that makes us emit more dynamic keyword warnings. That PR didn't trigger the ToolsTests leg since it's not a ILLink change.",2025-04-09 20:47:28+00:00,Michal Strehovský,0,,,1,7,0,baseline new warning in trimming tests (issue_ref)toolstests legs are failing: #issuecomment-2788504319psychic debugging (without actually trying to repro anything) tells me this is from issue_ref that makes us emit more dynamic keyword warnings. that pr didn't trigger the toolstests leg since it's not a illink change.
dotnet/runtime,a6553ac646aa190f716787dcdf1dcc157b5f280b,"Extend type preinitialization support (#114374)

Extends preinitialization support to cover scenario in https://github.com/dotnet/runtime/pull/114354#discussion_r2032200107.

* We only supported `ldsflda` instruction if the field was on the same type as we're preinitializing. This lifts the restriction to support loading addresses of readonly fields on other types, even if they have a static constructor, provided the cctor can be interpreted. One complication here is that this exposes us to correctness issues when address of the same field is loaded multiple times. We need to make sure nested preinit results are interned. The newly added `TestByRefFieldAddressEquality` test tests things that go wrong if we don't do interning.
* We didn't support calling methods on types that have a static constructor. This lifts the restriction if the static constructor is side effect free (approximated by ""can be interpreted"").
* We had limitations around `ldobj` that is used when dereferencing pointers. This lifts some of the restrictions and we can now `ldobj` many valuetypes, including the special vtable ones.",2025-04-09 20:48:25+00:00,Michal Strehovský,0,,,2,385,121,"extend type preinitialization support (issue_ref)extends preinitialization support to cover scenario in #discussion_r2032200107.* we only supported instruction if the field was on the same type as we're preinitializing. this lifts the restriction to support loading addresses of readonly fields on other types, even if they have a static constructor, provided the cctor can be interpreted. one complication here is that this exposes us to correctness issues when address of the same field is loaded multiple times. we need to make sure nested preinit results are interned. the newly added test tests things that go wrong if we don't do interning.* we didn't support calling methods on types that have a static constructor. this lifts the restriction if the static constructor is side effect free (approximated by ""can be interpreted"").* we had limitations around that is used when dereferencing pointers. this lifts some of the restrictions and we can now many valuetypes, including the special vtable ones."
dotnet/runtime,ccf8e7f15f65d63fc4d1d81139c981867e2c9185,"Don't use `Delegate.Method` in ServiceDescriptor (#114008)

The problem with this API is that in a trimmed app, accessing `Method` on a delegate type forces trimming to consider all delegate targets also targets of reflection (since we're grabbing a `MethodInfo` for whatever is the target). We do try to optimize this and only consider targets of the same delegate type, but in this case it means `Func<T, U>` and `Func<T,U,V>` which are very popular delegate types. Avoiding `Delegate.Method` is a 0.8% size saving for the Microsoft Store app.

The differences are:
* Originally this was calling `ToString` on the `MethodInfo`, which returns the name and signature of the method. I'm replacing this with `FullName` of the owning type and the name of the method. This is both more information and less information - we get owning type, we lose signature. It feels more useful nevertheless.
* When the app is trimmed and `StackTraceSupport` feature switch is set to false, this will return question marks.

The 0.8% size savings is present no matter the value of the `StackTraceSupport` switch.",2025-04-09 21:34:13+00:00,Michal Strehovský,0,,,2,26,5,"don't use in servicedescriptor (issue_ref)the problem with this api is that in a trimmed app, accessing on a delegate type forces trimming to consider all delegate targets also targets of reflection (since we're grabbing a for whatever is the target). we do try to optimize this and only consider targets of the same delegate type, but in this case it means and which are very popular delegate types. avoiding is a 0.8% size saving for the microsoft store app.the differences are:* originally this was calling on the , which returns the name and signature of the method. i'm replacing this with of the owning type and the name of the method. this is both more information and less information - we get owning type, we lose signature. it feels more useful nevertheless.* when the app is trimmed and feature switch is set to false, this will return question marks.the 0.8% size savings is present no matter the value of the switch."
dotnet/runtime,e231b754d3aa5da17571dc476c5a5f599841b5c6,JIT: Detect inconsistency in small profile weights for finally exits (#114447),2025-04-09 21:59:38+00:00,Aman Khalid,0,,,1,2,2,jit: detect inconsistency in small profile weights for finally exits (issue_ref)
dotnet/runtime,00b00500cc997a55f17ab50bd6104d50f3f4401c,"Prepare cert tests for new signing algorithms

* CertificateAuthority gains algorithm agility, varying across RSA and EC-DSA deterministically.
* CertificateRequestChainTests stops using AsymmetricAlgorithm in advance of the new, non-AA types.
* CertificateRequestLoadTests ensures that Load+Create yields the same as new+Create for all supported signature generator types.
* PrivateKeyAssociationTests ensures the relationship of CopyWithPrivateKey, Get{Alg}PublicKey, Get{Alg}PrivateKey for all existing asymmetric algorithm types (even ECDH!)",2025-04-10 01:54:24+00:00,Jeremy Barton,0,,,8,785,193,"prepare cert tests for new signing algorithms* certificateauthority gains algorithm agility, varying across rsa and ec-dsa deterministically.* certificaterequestchaintests stops using asymmetricalgorithm in advance of the new, non-aa types.* certificaterequestloadtests ensures that load+create yields the same as new+create for all supported signature generator types.* privatekeyassociationtests ensures the relationship of copywithprivatekey, get{alg}publickey, get{alg}privatekey for all existing asymmetric algorithm types (even ecdh!)"
dotnet/runtime,c272e344f9d01690eac4f5ff575242c354c20788,"Name native threads before start (macOS/Native AOT) (#114249)

* Name native threads before start on macOS

* Use Thread.CurrentThread",2025-04-10 03:17:15+00:00,Eduardo Velarde,0,,,1,12,0,name native threads before start (macos/native aot) (issue_ref)* name native threads before start on macos* use thread.currentthread
dotnet/runtime,8f4f9cf8c758d398d9407f1012eecc3048804a63,"Add ability to raise `AppDomain.UnhandledException` event. (#114392)

* ExceptionHandling.RaiseAppDomainUnhandledExceptionEvent()

Add new API for all runtimes.
Add tests for all runtimes.

---------

Co-authored-by: Stephen Toub <stoub@microsoft.com>",2025-04-10 04:18:55+00:00,Aaron Robinson,0,,,11,199,208,add ability to raise event. (issue_ref)* exceptionhandling.raiseappdomainunhandledexceptionevent()add new api for all runtimes.add tests for all runtimes.---------
dotnet/runtime,b1d93d078659f71068715b5fc5a1843d64395490,"httplistner linux memory leak (#114098)

* Cleanup connection after managed websocket dispose.
* Clean up in finalizer to avoid memory leak if user is not disposing properly.",2025-04-10 07:16:57+00:00,Roman Konecny,0,,,1,100,1,httplistner linux memory leak (issue_ref)* cleanup connection after managed websocket dispose.* clean up in finalizer to avoid memory leak if user is not disposing properly.
dotnet/runtime,44096c65c0e96e72b02073953c3b7e69a73db1e2,"[clr-interp] Add github notifications for code owners (#114367)

* Add code owners for interpreter source files

* Add owner notifications for coreclr interpreter label

* Add kg",2025-04-10 08:25:37+00:00,Vlad Brezae,0,,,2,18,0,[clr-interp] add github notifications for code owners (issue_ref)* add code owners for interpreter source files* add owner notifications for coreclr interpreter label* add kg
dotnet/runtime,e1d7398072966e20b01d2e3bd4af724f82a98f04,Exit with quick_exit when using debug UCRT (#109006),2025-04-10 09:19:43+00:00,Michal Strehovský,0,,,2,10,0,exit with quick_exit when using debug ucrt (issue_ref)
dotnet/runtime,aa458fa32f7839f9f89dd88bc80b5ad26356f5fb,Reduce unsafe from STJ (#114154),2025-04-10 12:33:57+00:00,Egor Bogatov,1,d55770ba49eab34a96a15466594c0a340fec88aa,"[STJ] Fix formatting of flag enums when values are overlapping. (#117730)

* [STJ] Fix formatting of flag enums when values are overlapping.

* Address feedback.",10,103,89,reduce unsafe from stj (issue_ref)
dotnet/runtime,b812080264ebe50d6d0d1647474c485af971601c,[browser] profiler cleanup (#114480),2025-04-10 13:22:27+00:00,Pavel Savara,0,,,1,6,1,[browser] profiler cleanup (issue_ref)
dotnet/runtime,334a4b43aeb539fbced2a1be8720ee060fb58f5e,Remove unsafe code from WinHttpHandler TryGetHeaderName helper (#114484),2025-04-10 15:04:03+00:00,Miha Zupan,0,,,5,40,177,remove unsafe code from winhttphandler trygetheadername helper (issue_ref)
dotnet/runtime,7618121e0f64098e2b81ed7c8cdf7024a1b87795,"[cDAC] Adds DAC like entrypoint with new COM interface (#113899)

* adds DAC like entrypoint
* adds support for passing cDAC contract globals as strings
* adds RuntimeInfo contract to fetch target OS/Arch
* adds portable RID to contract for future use, currently unused

Co-authored-by: Max Charlamb <maxcharlamb@microsoft.com>",2025-04-10 17:01:58+00:00,Max Charlamb,1,7ac6188452c416bde6730034a1d2f48afcd58fe9,"Make lttng-ust an optional dependency. (#113876)

* Make lttng-ust an optional dependency.

* Fix android build.

* Fix android build...

* Remove CLR_CMAKE_DISABLE_XPLAT_EVENTSOURCE=1.",36,1108,475,"[cdac] adds dac like entrypoint with new com interface (issue_ref)* adds dac like entrypoint* adds support for passing cdac contract globals as strings* adds runtimeinfo contract to fetch target os/arch* adds portable rid to contract for future use, currently unused"
dotnet/runtime,9596b486a52962e9370ee760128b8b1a6ff4e758,this is tested elsewhere (#114479),2025-04-10 18:34:52+00:00,Pavel Savara,0,,,130,0,24207,this is tested elsewhere (issue_ref)
dotnet/runtime,4bce635f39491195f83317edcc4990eed99bd47f,Share common Uri redaction logic in Http (#114483),2025-04-10 20:15:24+00:00,Miha Zupan,0,,,12,119,134,share common uri redaction logic in http (issue_ref)
dotnet/runtime,abd5e395fe684bed94241763f89ed2defaecdf22,Add Sqrt packedsimd alias (#114493),2025-04-10 20:34:16+00:00,Larry Ewing,0,,,2,3,0,add sqrt packedsimd alias (issue_ref)
dotnet/runtime,743d1792f3cf7ede9292eb2e8f501211f97c8e7d,"Make CertificateRequest et al work with ML-DSA

* Add ctors to CertificateRequest
* Enlighten CertificateRequest that future signing algorithms might not require a HashAlgorithmName
* Add support to CertificateRequestListBuilder
* Add cert.GetMLDsaPublicKey/GetMLDsaPrivateKey/CopyWithPrivateKey to power the above.",2025-04-10 21:28:43+00:00,Jeremy Barton,0,,,32,964,127,make certificaterequest et al work with ml-dsa* add ctors to certificaterequest* enlighten certificaterequest that future signing algorithms might not require a hashalgorithmname* add support to certificaterequestlistbuilder* add cert.getmldsapublickey/getmldsaprivatekey/copywithprivatekey to power the above.
dotnet/runtime,05cd31b4567906c5ae082b3a18dbdace4eb761d2,"Enable jit optimization in crossgen testing (#114464)

See  #113815 / #113849

Not enabled yet on linux.",2025-04-10 22:26:45+00:00,Andy Ayers,1,507f50e5e55ce5a8df2cbbd7084b2df5b65e4f03,"Fix issue #114504 by not emitting empty gcrefmaps in R2R (#118594)

* Add important comment so it's possible to find the source of AuxiliaryDataRva
* Skip emitting an RVA for the GCRefMap if it contains no methods",2,6,0,enable jit optimization in crossgen testing (issue_ref)see issue_ref / issue_refnot enabled yet on linux.
dotnet/runtime,cb5b3346d362ad051169f1a26be53e9676b6131b,Add missing referenced file (#114508),2025-04-10 22:45:30+00:00,Larry Ewing,0,,,2,86,1,add missing referenced file (issue_ref)
dotnet/runtime,8f8dad06cc369df51f4a447fe2b78d8bb27f91a3,"[mono][interp] Add convert aliases (#114501)

* Add ConvertToInt32 packedsimd alias

* Add ConvertToSingle alias",2025-04-10 22:52:07+00:00,Larry Ewing,0,,,2,7,0,[mono][interp] add convert aliases (issue_ref)* add converttoint32 packedsimd alias* add converttosingle alias
dotnet/runtime,5966995de27fd04c2f46aaf50c1c6f348a04fa60,"Remove setting `$ORIGIN/netcoredeps` rpath (#114512)

The original use case for setting the RPATH was self-contained Linux apps.

Some time between .NET 6 and .NET 8, we started using a newer linker, such that this setting sets RUNPATH instead of RPATH. This meant it only applied to the host executable, not the runtime libraries (like coreclr).

The netcoredeps behaviour was from a time when our dependencies were more complicated and even its intended use case has no support story.",2025-04-11 02:52:36+00:00,Elinor Fung,0,,,2,1,21,"remove setting rpath (issue_ref)the original use case for setting the rpath was self-contained linux apps.some time between .net 6 and .net 8, we started using a newer linker, such that this setting sets runpath instead of rpath. this meant it only applied to the host executable, not the runtime libraries (like coreclr).the netcoredeps behaviour was from a time when our dependencies were more complicated and even its intended use case has no support story."
dotnet/runtime,8c9b1f8e05dda2bc66949525d9b950e7aca3786f,"Add `InlineArray16<T>` (#114515)

* Add InlineArray16

* Add InlineArray16

* Update InlineArrayTests.cs

Adds tests for InlineArray16",2025-04-11 03:30:40+00:00,Hamish Arblaster,0,,,3,22,0,add (issue_ref)* add inlinearray16* add inlinearray16* update inlinearraytests.csadds tests for inlinearray16
dotnet/runtime,737a7d22aa0d7764ff5704e2691302ca1d363116,Use 'ref readonly' in 'Unsafe.AsPointer' (#114406),2025-04-11 03:31:10+00:00,Sergio Pedri,0,,,6,11,11,use 'ref readonly' in 'unsafe.aspointer' (issue_ref)
dotnet/runtime,83d57087b74198a3810fd60fc4e3f00cf25db8de,"Update Microsoft.NETCore.CoreDisTools nuget package from 1.4 to 1.5 (#114507)

Update coredistools.h to match dotnet/jitutils source version.",2025-04-11 03:50:11+00:00,Bruce Forstall,0,,,2,4,5,update microsoft.netcore.coredistools nuget package from 1.4 to 1.5 (issue_ref)update coredistools.h to match dotnet/jitutils source version.
dotnet/runtime,8f27783f76663b3c618a4b4275a004657f8b9784,"Remove useless argument from RedirectForThrowControl (#114444)

* Remove useless argument from RedirectForThrowControl

On Unix, this asm helper is passed two arguments, but both always have the same
value, the resume PC. This change removes the second argument.

* Remove the assert",2025-04-11 04:03:43+00:00,Jan Vorlicek,0,,,2,1,2,"remove useless argument from redirectforthrowcontrol (issue_ref)* remove useless argument from redirectforthrowcontrolon unix, this asm helper is passed two arguments, but both always have the samevalue, the resume pc. this change removes the second argument.* remove the assert"
dotnet/runtime,47797add59bca0b137255c054fdf219d30d3d1fc,"Force storing GC state until we see a labeled IG (#114475)

* Force storing GC state until we see a labelled IG

* review feedback",2025-04-11 06:01:59+00:00,Kunal Pathak,1,b8f318d458b20930ab6f0b138a3dc8ecb21afd7f,"[RISC-V] Print load immediate value in disassembly (#114470)

* [RISC-V] Group load immediate instructions into a single instrDesc and print imm value in disasm

* [RISC-V] Correct performance score for instrDescLoadImm

* [RISC-V] Fix typos",2,18,1,force storing gc state until we see a labeled ig (issue_ref)* force storing gc state until we see a labelled ig* review feedback
dotnet/runtime,265727cce09d422c9a4c322757e2e6629f83b25c,"Don't publish all workload manifest packages, not just the msi ones (#114527)",2025-04-11 08:19:46+00:00,Alexander Köplinger,0,,,1,2,2,"don't publish all workload manifest packages, not just the msi ones (issue_ref)"
dotnet/runtime,3c5daad855bbb0a2b298b6f44aec428177c7572d,Avoid doing extra work (#114517),2025-04-11 16:27:31+00:00,Larry Ewing,0,,,1,7,3,avoid doing extra work (issue_ref)
dotnet/runtime,94bf131f08e6f4d44c5dff8c125355820bd90484,"Update dependencies from https://github.com/dotnet/arcade build 20250406.1 (#114317)

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.25203.1 -> To Version 10.0.0-beta.25206.1

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-04-11 16:30:43+00:00,dotnet-maestro[bot],0,,,3,58,58,"update dependencies from build 20250406.1 (issue_ref)microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.25203.1 -> to version 10.0.0-beta.25206.1"
dotnet/runtime,0a447f8dfbe131600f7ef0a9af9c95add3770df0,"Sync shared code from aspnetcore (#114498)

Co-authored-by: BrennanConroy <BrennanConroy@users.noreply.github.com>",2025-04-11 16:42:13+00:00,github-actions[bot],0,,,2,15,16,sync shared code from aspnetcore (issue_ref)
dotnet/runtime,130f52fc589feab2e540d717dd086bc95e9dcb65,"Use regex to match version in MicroBuild workaround (#114549)

Co-authored-by: Ella Hathaway <ellahathaway@microsoft.com>",2025-04-11 16:49:48+00:00,Alexander Köplinger,0,,,1,12,2,use regex to match version in microbuild workaround (issue_ref)
dotnet/runtime,7647748be66be62b34140e09be4250a995fc8a25,Ignore CLR_DOTNET_RID when using stub cdac (#114541),2025-04-11 18:54:16+00:00,Adeel Mujahid,0,,,1,1,1,ignore clr_dotnet_rid when using stub cdac (issue_ref)
dotnet/runtime,8f4365ae47f6a89a382187d27a00218a2ef7163a,"Only remove publishing workload manifests in the runtime join job (#114558)

We still need it temporarily for the worklods build job.",2025-04-11 19:36:36+00:00,Alexander Köplinger,0,,,1,1,1,only remove publishing workload manifests in the runtime join job (issue_ref)we still need it temporarily for the worklods build job.
dotnet/runtime,43273482d7c150090bb044656871467a9ae5012c,"Haiku: Define `libroot.so` as the `libc` (#114522)

Make `SystemNative_LoadLibrary` look for `libroot.so` when `libc` is
requested.",2025-04-11 20:37:26+00:00,Trung Nguyen,0,,,1,3,0,haiku: define as the (issue_ref)make look for when isrequested.
dotnet/runtime,be6100ed084ced3b5803a6b998c112b85c1a6f64,"Use NOTIFY_ON_U2M_TRANSITIONS in SfiInit/SfiNext (#114496)

This removes the dependency on caller context lookup from SfiNext which had to do a method lookup under a lock. Instead we move the cost under pThis->GetFrameState() == StackFrameIterator::SFITER_NATIVE_MARKER_FRAME branch where the same native->managed transition was already identified by the underlying stack frame iterator logic.

On x86/funclets this reduces the number of instructions on the hot path by about 5.5%",2025-04-11 20:42:04+00:00,Filip Navara,0,,,1,54,49,use notify_on_u2m_transitions in sfiinit/sfinext (issue_ref)this removes the dependency on caller context lookup from sfinext which had to do a method lookup under a lock. instead we move the cost under pthis->getframestate() == stackframeiterator::sfiter_native_marker_frame branch where the same native->managed transition was already identified by the underlying stack frame iterator logic.on x86/funclets this reduces the number of instructions on the hot path by about 5.5%
dotnet/runtime,38e86ee317ea1d348440b01e1a5380ff4b5ca14e,Haiku: Add minipal_getexepath implementation (#114519),2025-04-11 23:10:58+00:00,Trung Nguyen,0,,,1,13,0,haiku: add minipal_getexepath implementation (issue_ref)
dotnet/runtime,f086bc379bc202682ec5182a9e574ea362e3cab7,"Disable JIT/opt/Devirtualization/Comparer_get_Default on osx-arm64 (#114554)

Tracking: #104927",2025-04-11 23:45:09+00:00,Bruce Forstall,1,41ffdd763715a7db5ee5404d178fef14c55097af,Fix HFA treatment of floating-point-based enums. (#115591),1,2,2,disable jit/opt/devirtualization/comparer_get_default on osx-arm64 (issue_ref)tracking: issue_ref
dotnet/runtime,850b0bab659223effc95765190392facf7aa2593,Configure digest before padding mode in OSSL RSA,2025-04-12 00:05:34+00:00,Raphael Catolino,0,,,1,9,8,configure digest before padding mode in ossl rsa
dotnet/runtime,a01a7d8e65def5ece79516e1ff4d18988a391328,"Prevent DynamicOptimization test from running with DOTNET_ForceRelocs=1 (#114578)

ForceRelocs causes the JIT to re-JIT every function on x64, which causes
the test to fail because it is counting JIT compilations.

Simply force `DOTNET_ForceRelocs=0`.",2025-04-12 03:47:31+00:00,Bruce Forstall,0,,,1,3,0,"prevent dynamicoptimization test from running with dotnet_forcerelocs=1 (issue_ref)forcerelocs causes the jit to re-jit every function on x64, which causesthe test to fail because it is counting jit compilations.simply force ."
dotnet/runtime,46c3ac39af79797ce3118a6ea582cdf8c50705d2,"Handle DelayFree for HW_Category_SIMDByIndexedElement intrinsics (#114525)

* Handle DelayFree for HW_Category_SIMDByIndexedElement intrinsics

* Add test case",2025-04-12 04:05:36+00:00,Kunal Pathak,1,8b0c4e15948ea7ccf02b5f571ab4fdacb0e6b1c8,Apply format patch in lsraarm64.cpp (#114603),3,94,0,handle delayfree for hw_category_simdbyindexedelement intrinsics (issue_ref)* handle delayfree for hw_category_simdbyindexedelement intrinsics* add test case
dotnet/runtime,e6f38d7160ec950a657eda1e21848d6b73bfad73,"Split up loader heap implementations (#114246)

We have long had 3 rather different heaps embedded in one structure called a LoaderHeap. They have shared ... some infrastructure, but there is a mess of confusing flags and code paths which only work for one or the other type of heap.

This PR changes that to supporting the 3 different types of heaps with separate codebases, and keeps as much of the shared infrastructure as I could manage. Its, not what I would call a pretty separation, as there is a bit of a mess around the way the DAC apis can access the heaps, but I think this is an improvement. Notably, in a followon PR I'm intending to provide a new mechanism for the interleaved heap to work off of contents of a file instead of creating unique pages per stub block. (This should slighly improve the cache locality of .NET programs, and is a prerequisite for running on some heavily locked down platforms.) This PR prepares for that by making the Interleaved heap its own thing, so adding new behavior variants is a reviewable piece of work.

The only functional change that happens with this PR is the newly added capability of the interleaved heaps to support freeing memory. (It was always possible to free, but for some reason the re-allocation behavior was not actually supported.)


Add support for a free list that actually works in the stub heaps.",2025-04-12 14:19:16+00:00,David Wrighton,0,,,18,2552,1631,"split up loader heap implementations (issue_ref)we have long had 3 rather different heaps embedded in one structure called a loaderheap. they have shared ... some infrastructure, but there is a mess of confusing flags and code paths which only work for one or the other type of heap.this pr changes that to supporting the 3 different types of heaps with separate codebases, and keeps as much of the shared infrastructure as i could manage. its, not what i would call a pretty separation, as there is a bit of a mess around the way the dac apis can access the heaps, but i think this is an improvement. notably, in a followon pr i'm intending to provide a new mechanism for the interleaved heap to work off of contents of a file instead of creating unique pages per stub block. (this should slighly improve the cache locality of .net programs, and is a prerequisite for running on some heavily locked down platforms.) this pr prepares for that by making the interleaved heap its own thing, so adding new behavior variants is a reviewable piece of work.the only functional change that happens with this pr is the newly added capability of the interleaved heaps to support freeing memory. (it was always possible to free, but for some reason the re-allocation behavior was not actually supported.)add support for a free list that actually works in the stub heaps."
dotnet/runtime,5bfc0bec9d627c946f154dd99103a393d278f841,Fix verify_free_list (#114540),2025-04-12 14:55:28+00:00,Andrew Au,1,bdd0daed0d8d8f5beff0534b6d07da412d1e1e71,"fix the regression in regions when handling heavily pinning scenarios (#112403)

this is to make regions behave very similarly to segments for heavily pinning scenarios. previously we observed regression in heap size due to regions not being aggressively demoted. changes included in this PR -

+ use the same policy for demotion of pinned plugs as much as possible for regions. since objects in a region can only belong to one generation, for pins observed skip_pins_in_alloc_region they will not use the same policy as they must belong to what's already allocated in that region. this policy is only applicable for regions with only pins left.

+ attribute the pins to the higher generation's generation_allocation_size when appropriate.

+ update data for events correctly for these pins.

with these changes I'm seeing a heavily pinned scenario be able to keep the heap size much lower and basically stable, vs without fix it goes up steadily. there can be some regression in % time in GC by design since we now leave more pins in gen0 which increases the amount of survived memory gen0 has to process.",1,4,2,fix verify_free_list (issue_ref)
dotnet/runtime,8f313fdf25f690dfa4a5acba307d3ebeed2101ef,"Revert ""Don't use incompatible LOAD_LIBRARY_SEARCH flags when using LOAD_WITH…"" (#114592)

This reverts commit 15d227ca48b689bf731b22d0346823b10adfd9a7.",2025-04-12 17:34:14+00:00,Jan Kotas,0,,,9,19,105,"revert ""don't use incompatible load_library_search flags when using load_with…"" (issue_ref)this reverts commit 15d227ca48b689bf731b22d0346823b10adfd9a7."
dotnet/runtime,c67a8ceb615501ef6dac79ee463fec3accb08807,Remove unused CLRConfigs (#114587),2025-04-12 17:40:52+00:00,Aaron Robinson,1,8237e86c192f255e85e4df4ad61560226b46015c,"Fix alignment in diagram in comment in clrconfigvalues (#115195)

Commit d2613848efd9 changed the macro invocation, but probably forgot to
fix the alignment in the diagram.",1,0,24,remove unused clrconfigs (issue_ref)
dotnet/runtime,36f59e838d4b58d4347552efac9842e306ef2353,"Fix ""MMM.yy"" date parsing in German culture. #114169 (#114194)

* Fix ""MMM.yy"" date parsing in German culture. #114169

* Fix ""MMM.yy"" date parsing in German culture. dotnet#114169

* Fix ""MMM.yy"" date parsing in German culture. #114169 v3

* Fix ""MMM.yy"" date parsing in German culture. #114169 [Testing]

* Fix ""MMM.yy"" date parsing in German culture. #114169 [Testing] v1

* Fix the test

---------

Co-authored-by: Tarek Mahmoud Sayed <tarekms@microsoft.com>",2025-04-12 23:29:45+00:00,Prashant Yadav,1,bca43fc4b417e02633035dc3e73bea54cf3433ba,"Fix DateTime fraction specifier parsing (#120518)

* Fix DateTime fraction specifier parsing

* Apply suggestions from code review

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>

* Add test using `.F` in the middle of the formatting  pattern

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2,102,9,"fix ""mmm.yy"" date parsing in german culture. issue_ref (issue_ref)* fix ""mmm.yy"" date parsing in german culture. issue_ref* fix ""mmm.yy"" date parsing in german culture. dotnetissue_ref* fix ""mmm.yy"" date parsing in german culture. issue_ref v3* fix ""mmm.yy"" date parsing in german culture. issue_ref [testing]* fix ""mmm.yy"" date parsing in german culture. issue_ref [testing] v1* fix the test---------"
dotnet/runtime,27b25483e06a14af2aaf6f6b6b9b6e527a3b69bf,Remove a few more instances of unsafe code in STJ (#114490),2025-04-13 06:59:35+00:00,Egor Bogatov,0,,,5,21,42,remove a few more instances of unsafe code in stj (issue_ref)
dotnet/runtime,d57c352fb4ddd44d53933e95e8b125cd58b30f42,"Mark InlineArrays as NonVersionable (#114590)

It is safe to assume that the field layout of the recently introduced InlineArray helper types is never going to change. Marking the types as NonVersionable allows crossgen2 to omit CHECK_TYPE_LAYOUT fixup for these types.",2025-04-13 12:58:11+00:00,Jan Kotas,0,,,1,17,0,mark inlinearrays as nonversionable (issue_ref)it is safe to assume that the field layout of the recently introduced inlinearray helper types is never going to change. marking the types as nonversionable allows crossgen2 to omit check_type_layout fixup for these types.
dotnet/runtime,e220a94d842524b408c35b381fc326c4159005f0,"[main] Update dependencies from dotnet/roslyn (#114137)

* Update dependencies from https://github.com/dotnet/roslyn build 20250401.23

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.Analyzers , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.14.0-3.25179.1 -> To Version 5.0.0-1.25201.23

* Update dependencies from https://github.com/dotnet/roslyn build 20250403.5

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.Analyzers , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.14.0-3.25179.1 -> To Version 5.0.0-1.25203.5

* Update dependencies from https://github.com/dotnet/roslyn build 20250404.7

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.Analyzers , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.14.0-3.25179.1 -> To Version 5.0.0-1.25204.7

* Update dependencies from https://github.com/dotnet/roslyn build 20250406.1

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.Analyzers , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.14.0-3.25179.1 -> To Version 5.0.0-1.25206.1

* Update dependencies from https://github.com/dotnet/roslyn build 20250407.8

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.Analyzers , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.14.0-3.25179.1 -> To Version 5.0.0-1.25207.8

* Update dependencies from https://github.com/dotnet/roslyn build 20250409.6

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.Analyzers , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.14.0-3.25179.1 -> To Version 5.0.0-1.25209.6

* Update dependencies from https://github.com/dotnet/roslyn build 20250410.7

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.Analyzers , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.14.0-3.25179.1 -> To Version 5.0.0-1.25210.7

* Update dependencies from https://github.com/dotnet/roslyn build 20250411.5

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.Analyzers , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.14.0-3.25179.1 -> To Version 5.0.0-1.25211.5

* Update dependencies from https://github.com/dotnet/roslyn build 20250412.1

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.Analyzers , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 4.14.0-3.25179.1 -> To Version 5.0.0-1.25212.1

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Stephen Toub <stoub@microsoft.com>",2025-04-13 14:30:56+00:00,dotnet-maestro[bot],1,a58e9239e3dbe2259621507df51f7dcbfd849ae4,"System.CommandLine update (#111864)

* Update dependencies from https://github.com/dotnet/command-line-api build 20250122.1

Microsoft.SourceBuild.Intermediate.command-line-api , System.CommandLine
 From Version 0.1.552801 -> To Version 0.1.607201

* adopt to breaking changes in System.CommandLine

* stop using System.CommandLine.Experimental

* fix the build by keeping the versions hardcoded, as stress test projects do not import the repo infrastructure intentionally",2,15,15,"[main] update dependencies from dotnet/roslyn (issue_ref)* update dependencies from build 20250401.23microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.analyzers , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.14.0-3.25179.1 -> to version 5.0.0-1.25201.23* update dependencies from build 20250403.5microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.analyzers , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.14.0-3.25179.1 -> to version 5.0.0-1.25203.5* update dependencies from build 20250404.7microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.analyzers , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.14.0-3.25179.1 -> to version 5.0.0-1.25204.7* update dependencies from build 20250406.1microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.analyzers , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.14.0-3.25179.1 -> to version 5.0.0-1.25206.1* update dependencies from build 20250407.8microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.analyzers , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.14.0-3.25179.1 -> to version 5.0.0-1.25207.8* update dependencies from build 20250409.6microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.analyzers , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.14.0-3.25179.1 -> to version 5.0.0-1.25209.6* update dependencies from build 20250410.7microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.analyzers , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.14.0-3.25179.1 -> to version 5.0.0-1.25210.7* update dependencies from build 20250411.5microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.analyzers , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.14.0-3.25179.1 -> to version 5.0.0-1.25211.5* update dependencies from build 20250412.1microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.analyzers , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 4.14.0-3.25179.1 -> to version 5.0.0-1.25212.1---------"
dotnet/runtime,0676e1cec52e894b9b1b13c918d955431def5a1e,Use [UN]INSTALL_MANAGED_EXCEPTION_DISPATCHER_EX to backpatch CallDescrWorkerInternal SEH record on x86/funclets (#114600),2025-04-14 01:07:12+00:00,Filip Navara,1,4daefaeffa309af1152a43c82cbe117fe56de4c8,"Reunification of ExInfo (#114591)

* Reunification of ExInfo

- Move the static methods from the ExceptionTracker to the ExInfo
- Remove the ExceptionTracker completely
- Merge the ExceptionTrackerBase into the ExInfo

* win-x64 build fix",3,41,22,use [un]install_managed_exception_dispatcher_ex to backpatch calldescrworkerinternal seh record on x86/funclets (issue_ref)
dotnet/runtime,2f5c61c78c05825665c76da423e9c648bfd1e407,Use PME identity for DAC signing (#113997),2025-04-14 01:15:06+00:00,Juan Hoyos,0,,,4,37,23,use pme identity for dac signing (issue_ref)
dotnet/runtime,0321ec21ae5d8c29fd1b983d3fb471699391687b,"Place read-only non-GC static bases into read-only section (#114477)

If all fields that contribute to the base are effectively read only, place the base into read-only section.

This only takes effect if data dehydration is turned off.",2025-04-14 05:58:13+00:00,Michal Strehovský,0,,,2,34,5,"place read-only non-gc static bases into read-only section (issue_ref)if all fields that contribute to the base are effectively read only, place the base into read-only section.this only takes effect if data dehydration is turned off."
dotnet/runtime,81efbf101bacdea6942e105871a3787b575b98af,"Simplify handling `Span` in the cctor interpreter (#114487)

This is two things:

* Now that we allow byrefs in more places, we can simplify handling spans (less special casing since more things just naturally fall out).
* Handle RVA statics within the interpreter. They can be naturally used with Spans now.",2025-04-14 07:01:49+00:00,Michal Strehovský,1,d9c4c3e73dcf09435a3cc1cabb23584c9f24b504,"Make it possible to preinitialize `ComInterfaceEntry` (#114459)

Fixes #114355.

Special case `ComWrappers.ComInterfaceEntry` and types that only consist of these fields to achieve this.",2,177,161,"simplify handling in the cctor interpreter (issue_ref)this is two things:* now that we allow byrefs in more places, we can simplify handling spans (less special casing since more things just naturally fall out).* handle rva statics within the interpreter. they can be naturally used with spans now."
dotnet/runtime,159f40e850839050ac09cb419d9830adeab22e2b,"[infra][apple-mobile] Migrate MacCatalyst and iOS/tvOS simulator jobs to `osx.14.arm64.open` and `osx.15.amd64.open` queues (#113313)

iOSSimulator, tvOSSimulator, MacCatalyst pipelines are migrated to:
- `osx.15.amd64.open`
- `osx.14.arm64.open` (until `osx.15.arm64.open` has enough machines)

## Newly failing test scenarios
Some new failures were discovered during the migration. The tests were disabled and tracking issues were open to monitor progress for enablement.
- System.Net.Sockets.Tests.SocketOptionNameTest.MulticastInterface_Set_AnyInterface_Succeeds
- System.IO.IsolatedStorage
- System.IO. MemoryMappedFiles
- System.Net.Sockets.Tests.SendTo_.*.Datagram_UDP_AccessDenied_Throws_DoesNotBind",2025-04-14 07:11:11+00:00,Matous Kozak,0,,,9,70,50,"[infra][apple-mobile] migrate maccatalyst and ios/tvos simulator jobs to and queues (issue_ref)iossimulator, tvossimulator, maccatalyst pipelines are migrated to:- - (until has enough machines)## newly failing test scenariossome new failures were discovered during the migration. the tests were disabled and tracking issues were open to monitor progress for enablement.- system.net.sockets.tests.socketoptionnametest.multicastinterface_set_anyinterface_succeeds- system.io.isolatedstorage- system.io. memorymappedfiles- system.net.sockets.tests.sendto_.*.datagram_udp_accessdenied_throws_doesnotbind"
dotnet/runtime,4daefaeffa309af1152a43c82cbe117fe56de4c8,"Reunification of ExInfo (#114591)

* Reunification of ExInfo

- Move the static methods from the ExceptionTracker to the ExInfo
- Remove the ExceptionTracker completely
- Merge the ExceptionTrackerBase into the ExInfo

* win-x64 build fix",2025-04-14 11:40:19+00:00,Filip Navara,1,a5d647300db77359cbbf13c4f6c767ebe52853d1,"Fix the amd64 cross-DAC stack unwinding  (#114836)

* Move m_Context to the end of SoftwareExceptionFrame to fix cross-DAC

* Add comments and fix FaultingExceptionFrame on amd64

* Fix debug assert in DBI

* Back out FaultingExceptionFrame changes",30,361,412,reunification of exinfo (issue_ref)* reunification of exinfo- move the static methods from the exceptiontracker to the exinfo- remove the exceptiontracker completely- merge the exceptiontrackerbase into the exinfo* win-x64 build fix
dotnet/runtime,d6cd5777ad238107d66503fb834abbaab849f440,"[H/3] Clean up and fix Alt-Svc handling (#114528)

* Alt-Svc allow empty ALPN

* Fix Alt-Svc handling of clear and authority equality.

* Test alt-svc clear

* Update src/libraries/System.Net.Http/src/System/Net/Http/Headers/AltSvcHeaderValue.cs

Co-authored-by: Miha Zupan <mihazupan.zupan1@gmail.com>

---------

Co-authored-by: Miha Zupan <mihazupan.zupan1@gmail.com>",2025-04-14 13:02:52+00:00,Marie Píchová,1,f34e78fb4046550955365ae1bfa6e9671a3a5ffa,"Fix various HTTP header parsing issues (#116323)

Co-authored-by: Miha Zupan <mizupan@microsoft.com>",8,106,27,[h/3] clean up and fix alt-svc handling (issue_ref)* alt-svc allow empty alpn* fix alt-svc handling of clear and authority equality.* test alt-svc clear* update src/libraries/system.net.http/src/system/net/http/headers/altsvcheadervalue.cs
dotnet/runtime,9d2b23b3a00c3796ba9e8af45d7427894a72e2f9,"Reset ZLibStreamHandle when parsing concatenated GZip streams (#113587)

* Reset ZLib inflater state where possible
* Add CompressionNative_InflateReset2_ to Unix exports
---------
Co-authored-by: Carlos Sánchez López <1175054+carlossanlop@users.noreply.github.com>",2025-04-14 16:32:39+00:00,Edward Neal,0,,,8,41,11,reset zlibstreamhandle when parsing concatenated gzip streams (issue_ref)* reset zlib inflater state where possible* add compressionnative_inflatereset2_ to unix exports---------
dotnet/runtime,e9d9995f609e0025edb064c057b0f93425ec5e09,Fix IsVNConstantBound assert (#114486),2025-04-14 16:41:33+00:00,Egor Bogatov,1,01108e862d8ec94f61fb68e59fa21e4a66961b03,"[RISC-V] Integer min/max intrinsics (#114687)

* Intrinsify integer min/max

* Implement integer min/max

* Cleanup assert

* Fix windows build

* Add tests

* Different VNFunc for unsigned

* Min/Max is commutative

* Different intrinsic name for unsigned",2,10,3,fix isvnconstantbound assert (issue_ref)
dotnet/runtime,19b0dc9b175f34ff58b2f175c2b7c749501169a3,"Simplify RID model and handle Linux libc flavors in orchestrated builds (#113765)

Co-authored-by: Viktor Hofer <viktor.hofer@microsoft.com>",2025-04-14 17:13:12+00:00,Jeremy Koritzinsky,1,7d07f9a39fbf1314bf81940ee4eecad4084b07f2,"Remove test project dir after test finished in trimmingTests.targets (#114819)

* Remove test project dir in trimmingTests.targets

Should help with the out of disk space errors we've been seeing in the dotnet-linker-tests pipeline.

* Improve test project cleanup logic

* Fix comment",21,85,139,simplify rid model and handle linux libc flavors in orchestrated builds (issue_ref)
dotnet/runtime,b044b2035752799f0fd8bd83f4bbdab3111079f8,`Microsoft.Extensions.Logging.ProviderAliasAttribute` moved to `Microsoft.Extensions.Logging.Abstractions` solution. (#114606),2025-04-14 19:19:15+00:00,Axel D.,0,,,5,8,6,moved to solution. (issue_ref)
dotnet/runtime,a58e9239e3dbe2259621507df51f7dcbfd849ae4,"System.CommandLine update (#111864)

* Update dependencies from https://github.com/dotnet/command-line-api build 20250122.1

Microsoft.SourceBuild.Intermediate.command-line-api , System.CommandLine
 From Version 0.1.552801 -> To Version 0.1.607201

* adopt to breaking changes in System.CommandLine

* stop using System.CommandLine.Experimental

* fix the build by keeping the versions hardcoded, as stress test projects do not import the repo infrastructure intentionally",2025-04-14 20:12:39+00:00,Adam Sitnik,1,ca72cdf4fc66ced0c046f3598ceed6646f48989a,"Report error if dotnet-pgo trace contains multiple processes (#114962)

Fixes a logic error. When the trace file has multiple processes and no PID or process name was specified, we're supposed to instruct the user to provide it. Instead, we instruct user to provide it only if `--pid` is actually specified.",22,462,446,"system.commandline update (issue_ref)* update dependencies from build 20250122.1microsoft.sourcebuild.intermediate.command-line-api , system.commandline from version 0.1.552801 -> to version 0.1.607201* adopt to breaking changes in system.commandline* stop using system.commandline.experimental* fix the build by keeping the versions hardcoded, as stress test projects do not import the repo infrastructure intentionally"
dotnet/runtime,9f7bc7e952b92df3fd2608168a0151cc4089e5a6,Update GenericLookupResult.cs (#114624),2025-04-14 21:12:29+00:00,Alex4414,0,,,1,1,1,update genericlookupresult.cs (issue_ref)
dotnet/runtime,ed3081ffe8dd52207def7a6020aa9c78c9a70d4c,Never inline AllocateInstances in COM lifetime test (#114648),2025-04-14 21:59:59+00:00,Jeremy Koritzinsky,0,,,1,2,0,never inline allocateinstances in com lifetime test (issue_ref)
dotnet/runtime,ce1978fbe766f28c4ee79bee55180bbb13c928a8,"JIT: Don't allow retyping of casts containing a memory load (#114602)

* don't allow retyping of casts containing a memory load

* fix NRE in test

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-04-14 22:47:20+00:00,Clinton Ingram,1,248d6f422e777219e11762a330405234cbcee156,"JIT: Fix containment check for decomposed long halves in CreateScalar (#114654)

* fix containment check for decomposed long halves in CreateScalar

* add IsSupported check to test",3,48,2,jit: don't allow retyping of casts containing a memory load (issue_ref)* don't allow retyping of casts containing a memory load* fix nre in test---------
dotnet/runtime,1b090a983e590275cccd92a127a07b4b80e80365,"Use `Stream.ReadAtLeast` when loading ZipArchives (#114256)

* Initial test to confirm failure on partial reads
* Replace use of Stream.Read with ReadAtLeast or helper method
---------
Co-authored-by: Carlos Sánchez López <1175054+carlossanlop@users.noreply.github.com>",2025-04-15 00:23:59+00:00,Edward Neal,0,,,5,146,10,use when loading ziparchives (issue_ref)* initial test to confirm failure on partial reads* replace use of stream.read with readatleast or helper method---------
dotnet/runtime,f93aa8a3d74304ea3bc58a1127afdbed1e2398dc,"Preserve trailing extra data when updating ZIP files (#113306)

* Reimplement PR 112032
* Permit trailing malformed extra field data. This data is generated by zipalign. It needs to be accounted for and preserved.
* Update test, adding test cases
Prove functionality where there are 3, 4, 7, 8 and 15 bytes of padding. This covers zero, one and multiple well-formed extra fields, with and without subsequent trailing data.
---------
Co-authored-by: Carlos Sánchez López <1175054+carlossanlop@users.noreply.github.com>",2025-04-15 01:11:26+00:00,Edward Neal,1,1a51788af474a14cd8708a9a958fce93a47837e6,"Zip async implementation follow-up: Fix failures in wasm and add extra tests (#114798)

* Remove `.Result` calls in async tests failing in wasm.

* Uncomment the async tests for the latest bug fixes, make sure they count the Async write calls, not the sync ones, and add the rest of the async methods.

* Revert skip on wasm platform

* Modify NoSyncCallsStream to throw also on BeginRead, EndRead, BeginWrite and EndWrite.

* Remove .Result from ZipTestHelper methods and propagate proper async usage.

* spacing

* Simplify object[] enumerables returning lists of ints.",4,507,38,"preserve trailing extra data when updating zip files (issue_ref)* reimplement pr 112032* permit trailing malformed extra field data. this data is generated by zipalign. it needs to be accounted for and preserved.* update test, adding test casesprove functionality where there are 3, 4, 7, 8 and 15 bytes of padding. this covers zero, one and multiple well-formed extra fields, with and without subsequent trailing data.---------"
dotnet/runtime,74a0958220f0ffbe71014e32b60819959df5f8ab,Remove exclusion of WindowsRuntime attribute instantation in NativeAOT (#114658),2025-04-15 02:26:43+00:00,Jeremy Koritzinsky,1,f4f3be6002be53856a055642d4f105a76e16698f,"Fix System.Object.GetCustomAttributes() returning extra internal attributes on Mono (#117864)

* Fix System.Object GetCustomAttributes inherit parameter inconsistency

* Use do-while loop to include System.Object attributes",2,1,18,remove exclusion of windowsruntime attribute instantation in nativeaot (issue_ref)
dotnet/runtime,9cdb28b00ff5324f924162d8b63e828b5f134e3c,Disable operator overloads while we investigate (#114659),2025-04-15 02:28:54+00:00,Larry Ewing,1,91d74fc33d1522c0463c59fff0040cb2ae005243,"[wasm][interp] Jiterp packedsimd shifts (#114669)

* Teach the jiterpreter about the PackedSimd opcodes directly

* Teach jiterp about Bitmask directly and add alias

* Fix the overmatching on Load*

* Add more tests

* Add some PackedSimd.Bitmask tests

* fix missed edit

* Add another missing URIGHT match",1,2,0,disable operator overloads while we investigate (issue_ref)
dotnet/runtime,99a0bd2b94e2ea0fe98e73a72a54033b1213f61d,ML-KEM: X509Certificate2.GetMLKemPublicKey,2025-04-15 08:39:01+00:00,Kevin Jones,0,,,5,495,6,ml-kem: x509certificate2.getmlkempublickey
dotnet/runtime,46c3e85efdc6d5f45c872241fd891b1f48261967,"MLDsaOpenSsl + tests (#114485)

* MLDsaOpenSsl + tests

* Address feedback

* Changes w.r.t. ML-DSA CertificateRequest PR

* Address feedback: Test & doc improvements",2025-04-15 08:43:48+00:00,Krzysztof Wicher,0,,,20,2982,170,mldsaopenssl + tests (issue_ref)* mldsaopenssl + tests* address feedback* changes w.r.t. ml-dsa certificaterequest pr* address feedback: test & doc improvements
dotnet/runtime,c893f68dfef36c1c51ac98b220c4f93ed259f392,"Revert 114347 + MSBuild tasks leak workaround + HotReload workaround (#114643)

Co-authored-by: Marek Fišera <mara@neptuo.com>",2025-04-15 11:58:49+00:00,Pavel Savara,1,41796ff0fd2a4a3f2f282563ee35cb5386c9f0f9,Fix non-portable CI builds. (#114949),7,40,7,revert 114347 + msbuild tasks leak workaround + hotreload workaround (issue_ref)
dotnet/runtime,d0e6ce8332a514d70b635ca4829bf863157256fe,"disable/trim MetricsHandler when System.Diagnostics.Metrics.Meter.IsSupported is false (#114326)

Co-authored-by: Anton Firszov <antonfir@gmail.com>",2025-04-15 12:07:40+00:00,Pavel Savara,1,87bf42dc36e3eb97530d6bd7be1ce1ac17f8667c,"HTTP/3: Eliminate near-zero ""wait for connection"" telemetry signals (#114083)

* HTTP/3: Eliminate near-zero ""wait for connection"" telemetry signals

* undo unintentional change

* rename variable

* improve language

* Whether to start an activity or not should be decided when reserving a stream.

* tests

* allow _availableRequestStreamsCount to go below zero when EnableMultipleHttp3Connections is false

* H3ConnectionFailure_TimeInQueueRecorded

* simplify code

* revert method rename

* fix after merge

* make the trimmer happy

---------

Co-authored-by: Marie Píchová <11718369+ManickaP@users.noreply.github.com>",19,196,64,disable/trim metricshandler when system.diagnostics.metrics.meter.issupported is false (issue_ref)
dotnet/runtime,f79c09818ad2cf449cfb05a95e5b41d11f8f7d3e,"[S.N.Quic] Observe exceptions in ResettableValueTaskSource (#114226)

* Observe exceptions in ResettableValueTaskSource

* Update src/libraries/System.Net.Quic/src/System/Net/Quic/Internal/ResettableValueTaskSource.cs

Co-authored-by: Marie Píchová <11718369+ManickaP@users.noreply.github.com>

---------

Co-authored-by: Marie Píchová <11718369+ManickaP@users.noreply.github.com>",2025-04-15 14:11:07+00:00,Anton Firszov,0,,,2,31,26,[s.n.quic] observe exceptions in resettablevaluetasksource (issue_ref)* observe exceptions in resettablevaluetasksource* update src/libraries/system.net.quic/src/system/net/quic/internal/resettablevaluetasksource.cs
dotnet/runtime,9fd6a57e74714fbb37662ec23e30863c1abc2255,"Add an IsFuncletCache to the EECodeInfo (#114580)

* Add an IsFuncletCache to the EECodeInfo, and do a cheap computation at EECodeInfo::Init time to fill it in if there aren't any funclets in the method
- This avoids the fairly complex IsFunclet logic on the JitManager, as well as the virtual call to get there in some cases.

* Code review feedback to make this a bit more like the other optimized cases in EECodeInfo

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-04-15 16:06:05+00:00,David Wrighton,1,27d23218a56d484638692d56b3abd27e0b21b591,"Remove getTypeForBoxOnStack from jit interface (#114754)

Along with the `StackAllocatedBox` type. The JIT can now represent on-stack
boxes directly via class layouts.

Closes #114204",4,79,18,"add an isfuncletcache to the eecodeinfo (issue_ref)* add an isfuncletcache to the eecodeinfo, and do a cheap computation at eecodeinfo::init time to fill it in if there aren't any funclets in the method- this avoids the fairly complex isfunclet logic on the jitmanager, as well as the virtual call to get there in some cases.* code review feedback to make this a bit more like the other optimized cases in eecodeinfo---------"
dotnet/runtime,581bc255fd5a48723265e0231e9a062d59cd2584,"Update dependencies from https://github.com/dotnet/source-build-reference-packages build 20250410.1 (#114611)

Microsoft.SourceBuild.Intermediate.source-build-reference-packages
 From Version 10.0.620402 -> To Version 10.0.621001

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-04-15 17:12:22+00:00,dotnet-maestro[bot],0,,,1,2,2,update dependencies from build 20250410.1 (issue_ref)microsoft.sourcebuild.intermediate.source-build-reference-packages from version 10.0.620402 -> to version 10.0.621001
dotnet/runtime,a3f4cbe337c448ddd6366922e5f448647f9220e9,"Reapply ""Don't use incompatible LOAD_LIBRARY_SEARCH flags when using LOAD_WITH_ALTERED_SEARCH_PATH"" (#114651)

Undo the revert in #114592.

Additional changes:
- Removes setting /DEPENDENTLOADFLAG:0x800 in test
- Ignore empty paths when looking in the p/invoke assembly directory
- Adds a test in DllImportSearchPathsTests that uses an in-memory assembly",2025-04-15 17:29:09+00:00,Elinor Fung,0,,,9,125,20,"reapply ""don't use incompatible load_library_search flags when using load_with_altered_search_path"" (issue_ref)undo the revert in issue_ref.additional changes:- removes setting /dependentloadflag:0x800 in test- ignore empty paths when looking in the p/invoke assembly directory- adds a test in dllimportsearchpathstests that uses an in-memory assembly"
dotnet/runtime,56d8a633c6134310033b12d77e6178ca240e51e1,"[main] Update dependencies from dotnet/roslyn (#114614)

* Update dependencies from https://github.com/dotnet/roslyn build 20250413.1

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.Analyzers , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 5.0.0-1.25212.1 -> To Version 5.0.0-1.25213.1

* Update dependencies from https://github.com/dotnet/roslyn build 20250414.5

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.Analyzers , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 5.0.0-1.25212.1 -> To Version 5.0.0-1.25214.5

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-04-15 17:54:14+00:00,dotnet-maestro[bot],0,,,2,14,14,"[main] update dependencies from dotnet/roslyn (issue_ref)* update dependencies from build 20250413.1microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.analyzers , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 5.0.0-1.25212.1 -> to version 5.0.0-1.25213.1* update dependencies from build 20250414.5microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.analyzers , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 5.0.0-1.25212.1 -> to version 5.0.0-1.25214.5---------"
dotnet/runtime,b0c2d75c8c56e98a245f25d4000dd31752318fdf,"[cDAC] Implement IXCLRDataModule APIs SOS uses to read line numbers (#114491)

* Implement cDAC support for the following IXCLRDataModule APIs: GetFlags, StartEnumExtents, EnumExtents, EndEnumExtents, and Request(DACDATAMODULEPRIV_REQUEST_GET_MODULEDATA…)",2025-04-15 18:58:26+00:00,Max Charlamb,0,,,23,642,11,"[cdac] implement ixclrdatamodule apis sos uses to read line numbers (issue_ref)* implement cdac support for the following ixclrdatamodule apis: getflags, startenumextents, enumextents, endenumextents, and request(dacdatamodulepriv_request_get_moduledata…)"
dotnet/runtime,522cf16428cc23c71cf3ceb7a644c305003b8870,"Produce the productVersion.txt files in runtime in the ""final publish"" step so we don't need to munge them through the different runtime jobs (#114706)",2025-04-15 22:52:02+00:00,Jeremy Koritzinsky,0,,,2,4,1,"produce the productversion.txt files in runtime in the ""final publish"" step so we don't need to munge them through the different runtime jobs (issue_ref)"
dotnet/runtime,a3fe5b1e50d55ba7e568c562b8e33b63463757ae,Add guidelines for source generators in `dotnet/runtime` (#114709),2025-04-15 23:42:57+00:00,Aaron Robinson,0,,,1,31,0,add guidelines for source generators in (issue_ref)
dotnet/runtime,d06c2f6ec8228addc77cb7b7856c3fe07c3d1f02,"[wasm][interp] Add Store intrinsics (#114711)

* Add alias for SN SquareRoot as well

* Add store alias

* Add Store intrinsics",2025-04-16 00:52:13+00:00,Larry Ewing,0,,,3,17,2,[wasm][interp] add store intrinsics (issue_ref)* add alias for sn squareroot as well* add store alias* add store intrinsics
dotnet/runtime,170c1b97c0c6d11a391479fef381add87e3df495,Change ML-KEM public API surface with API review feedback,2025-04-16 03:05:00+00:00,Kevin Jones,0,,,4,26,531,change ml-kem public api surface with api review feedback
dotnet/runtime,fdd3d3591c59a1ba72b00c1baab6737f0a7fba08,Only run runtime-diagnostics pipeline on a subset of file changes (#114718),2025-04-16 03:37:05+00:00,Jeremy Koritzinsky,0,,,1,13,3,only run runtime-diagnostics pipeline on a subset of file changes (issue_ref)
dotnet/runtime,4f44fde5622a6c094e463a4b3bd5a0199c7a64d7,Make sure we add the System.Private.* assemblies when using the NativeAOT runtime pack as the runtime package. (#114556),2025-04-16 03:38:42+00:00,Jeremy Koritzinsky,1,aa902b7848418b6937fe5a88178e7b9e959d3845,Fix conditions mismatch for gc-sections with lld (#115964),1,2,0,make sure we add the system.private.* assemblies when using the nativeaot runtime pack as the runtime package. (issue_ref)
dotnet/runtime,d97ad2328fcde667b17f2af0b3fb6edc03cc8dc8,"[main] Update dependencies from dotnet/arcade (#114610)

* Update dependencies from https://github.com/dotnet/arcade build 20250412.1

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.25206.1 -> To Version 10.0.0-beta.25212.1

* Update dependencies from https://github.com/dotnet/arcade build 20250414.8

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.25206.1 -> To Version 10.0.0-beta.25214.8

* Update sdk dependency

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Alexander Köplinger <alex.koeplinger@outlook.com>",2025-04-16 08:56:10+00:00,dotnet-maestro[bot],0,,,7,91,74,"[main] update dependencies from dotnet/arcade (issue_ref)* update dependencies from build 20250412.1microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.25206.1 -> to version 10.0.0-beta.25212.1* update dependencies from build 20250414.8microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.25206.1 -> to version 10.0.0-beta.25214.8* update sdk dependency---------"
dotnet/runtime,e30a309886e8c791c45080abb317f23f0b2204fb,"[main] Update dependencies from dotnet/roslyn-analyzers (#113191)

* Update dependencies from https://github.com/dotnet/roslyn-analyzers build 20250305.1

Microsoft.CodeAnalysis.Analyzers , Microsoft.CodeAnalysis.NetAnalyzers
 From Version 3.12.0-beta1.25127.1 -> To Version 3.12.0-beta1.25155.1

* Update dependencies from https://github.com/dotnet/roslyn-analyzers build 20250323.4

Microsoft.CodeAnalysis.Analyzers , Microsoft.CodeAnalysis.NetAnalyzers
 From Version 3.12.0-beta1.25127.1 -> To Version 3.12.0-beta1.25173.4

* Update dependencies from https://github.com/dotnet/roslyn-analyzers build 20250326.1

Microsoft.CodeAnalysis.Analyzers , Microsoft.CodeAnalysis.NetAnalyzers
 From Version 3.12.0-beta1.25127.1 -> To Version 3.12.0-beta1.25176.1

* Update dependencies from https://github.com/dotnet/roslyn-analyzers build 20250327.1

Microsoft.CodeAnalysis.Analyzers , Microsoft.CodeAnalysis.NetAnalyzers
 From Version 3.12.0-beta1.25127.1 -> To Version 3.12.0-beta1.25177.1

* Update dependencies from https://github.com/dotnet/roslyn-analyzers build 20250328.1

Microsoft.CodeAnalysis.NetAnalyzers
 From Version 10.0.0-preview.25127.1 -> To Version 10.0.0-preview.25178.1

* Update dependencies from https://github.com/dotnet/roslyn-analyzers build 20250331.1

Microsoft.CodeAnalysis.NetAnalyzers
 From Version 10.0.0-preview.25127.1 -> To Version 10.0.0-preview.25181.1

* Update dependencies from https://github.com/dotnet/roslyn-analyzers build 20250414.1

Microsoft.CodeAnalysis.NetAnalyzers
 From Version 10.0.0-preview.25127.1 -> To Version 10.0.0-preview.25214.1

* Update dependencies from https://github.com/dotnet/roslyn-analyzers build 20250415.1

Microsoft.CodeAnalysis.NetAnalyzers
 From Version 10.0.0-preview.25127.1 -> To Version 10.0.0-preview.25215.1

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Larry Ewing <lewing@microsoft.com>
Co-authored-by: Alexander Köplinger <alex.koeplinger@outlook.com>",2025-04-16 11:55:41+00:00,dotnet-maestro[bot],0,,,2,3,3,"[main] update dependencies from dotnet/roslyn-analyzers (issue_ref)* update dependencies from build 20250305.1microsoft.codeanalysis.analyzers , microsoft.codeanalysis.netanalyzers from version 3.12.0-beta1.25127.1 -> to version 3.12.0-beta1.25155.1* update dependencies from build 20250323.4microsoft.codeanalysis.analyzers , microsoft.codeanalysis.netanalyzers from version 3.12.0-beta1.25127.1 -> to version 3.12.0-beta1.25173.4* update dependencies from build 20250326.1microsoft.codeanalysis.analyzers , microsoft.codeanalysis.netanalyzers from version 3.12.0-beta1.25127.1 -> to version 3.12.0-beta1.25176.1* update dependencies from build 20250327.1microsoft.codeanalysis.analyzers , microsoft.codeanalysis.netanalyzers from version 3.12.0-beta1.25127.1 -> to version 3.12.0-beta1.25177.1* update dependencies from build 20250328.1microsoft.codeanalysis.netanalyzers from version 10.0.0-preview.25127.1 -> to version 10.0.0-preview.25178.1* update dependencies from build 20250331.1microsoft.codeanalysis.netanalyzers from version 10.0.0-preview.25127.1 -> to version 10.0.0-preview.25181.1* update dependencies from build 20250414.1microsoft.codeanalysis.netanalyzers from version 10.0.0-preview.25127.1 -> to version 10.0.0-preview.25214.1* update dependencies from build 20250415.1microsoft.codeanalysis.netanalyzers from version 10.0.0-preview.25127.1 -> to version 10.0.0-preview.25215.1---------"
dotnet/runtime,d4628a63b9bd3f6ef1806aca439e7aeb7a407941,Don't pass -os twice for windows in DotNetBuild.props (#114732),2025-04-16 11:56:46+00:00,Alexander Köplinger,0,,,1,1,1,don't pass -os twice for windows in dotnetbuild.props (issue_ref)
dotnet/runtime,f0729886f8efb3d351c630289d63fc7996d9858d,"[main] Update dependencies from dotnet/xharness (#114057)

* Update dependencies from https://github.com/dotnet/xharness build 20250326.1

Microsoft.DotNet.XHarness.CLI , Microsoft.DotNet.XHarness.TestRunners.Common , Microsoft.DotNet.XHarness.TestRunners.Xunit
 From Version 10.0.0-prerelease.25167.4 -> To Version 10.0.0-prerelease.25176.1

* Update dependencies from https://github.com/dotnet/xharness build 20250402.1

Microsoft.DotNet.XHarness.CLI , Microsoft.DotNet.XHarness.TestRunners.Common , Microsoft.DotNet.XHarness.TestRunners.Xunit
 From Version 10.0.0-prerelease.25167.4 -> To Version 10.0.0-prerelease.25202.1

* Update dependencies from https://github.com/dotnet/xharness build 20250411.1

Microsoft.DotNet.XHarness.CLI , Microsoft.DotNet.XHarness.TestRunners.Common , Microsoft.DotNet.XHarness.TestRunners.Xunit
 From Version 10.0.0-prerelease.25167.4 -> To Version 10.0.0-prerelease.25211.1

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Larry Ewing <lewing@microsoft.com>",2025-04-16 11:59:22+00:00,dotnet-maestro[bot],0,,,3,10,10,"[main] update dependencies from dotnet/xharness (issue_ref)* update dependencies from build 20250326.1microsoft.dotnet.xharness.cli , microsoft.dotnet.xharness.testrunners.common , microsoft.dotnet.xharness.testrunners.xunit from version 10.0.0-prerelease.25167.4 -> to version 10.0.0-prerelease.25176.1* update dependencies from build 20250402.1microsoft.dotnet.xharness.cli , microsoft.dotnet.xharness.testrunners.common , microsoft.dotnet.xharness.testrunners.xunit from version 10.0.0-prerelease.25167.4 -> to version 10.0.0-prerelease.25202.1* update dependencies from build 20250411.1microsoft.dotnet.xharness.cli , microsoft.dotnet.xharness.testrunners.common , microsoft.dotnet.xharness.testrunners.xunit from version 10.0.0-prerelease.25167.4 -> to version 10.0.0-prerelease.25211.1---------"
dotnet/runtime,8d0a87c2380f661b4415a558c948e6d8a2c710c4,"[main] Update dependencies from dnceng/internal/dotnet-optimization (#114056)

* Update dependencies from https://dev.azure.com/dnceng/internal/_git/dotnet-optimization build 20250329.2

optimization.linux-arm64.MIBC.Runtime , optimization.linux-x64.MIBC.Runtime , optimization.windows_nt-arm64.MIBC.Runtime , optimization.windows_nt-x64.MIBC.Runtime , optimization.windows_nt-x86.MIBC.Runtime , optimization.PGO.CoreCLR
 From Version 1.0.0-prerelease.25171.2 -> To Version 1.0.0-prerelease.25179.2

* Update dependencies from https://dev.azure.com/dnceng/internal/_git/dotnet-optimization build 20250404.2

optimization.linux-arm64.MIBC.Runtime , optimization.linux-x64.MIBC.Runtime , optimization.windows_nt-arm64.MIBC.Runtime , optimization.windows_nt-x64.MIBC.Runtime , optimization.windows_nt-x86.MIBC.Runtime , optimization.PGO.CoreCLR
 From Version 1.0.0-prerelease.25171.2 -> To Version 1.0.0-prerelease.25204.2

* Update dependencies from https://dev.azure.com/dnceng/internal/_git/dotnet-optimization build 20250412.3

optimization.linux-arm64.MIBC.Runtime , optimization.linux-x64.MIBC.Runtime , optimization.windows_nt-arm64.MIBC.Runtime , optimization.windows_nt-x64.MIBC.Runtime , optimization.windows_nt-x86.MIBC.Runtime , optimization.PGO.CoreCLR
 From Version 1.0.0-prerelease.25171.2 -> To Version 1.0.0-prerelease.25212.3

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Alexander Köplinger <alex.koeplinger@outlook.com>",2025-04-16 12:01:44+00:00,dotnet-maestro[bot],0,,,2,18,18,"[main] update dependencies from dnceng/internal/dotnet-optimization (issue_ref)* update dependencies from build 20250329.2optimization.linux-arm64.mibc.runtime , optimization.linux-x64.mibc.runtime , optimization.windows_nt-arm64.mibc.runtime , optimization.windows_nt-x64.mibc.runtime , optimization.windows_nt-x86.mibc.runtime , optimization.pgo.coreclr from version 1.0.0-prerelease.25171.2 -> to version 1.0.0-prerelease.25179.2* update dependencies from build 20250404.2optimization.linux-arm64.mibc.runtime , optimization.linux-x64.mibc.runtime , optimization.windows_nt-arm64.mibc.runtime , optimization.windows_nt-x64.mibc.runtime , optimization.windows_nt-x86.mibc.runtime , optimization.pgo.coreclr from version 1.0.0-prerelease.25171.2 -> to version 1.0.0-prerelease.25204.2* update dependencies from build 20250412.3optimization.linux-arm64.mibc.runtime , optimization.linux-x64.mibc.runtime , optimization.windows_nt-arm64.mibc.runtime , optimization.windows_nt-x64.mibc.runtime , optimization.windows_nt-x86.mibc.runtime , optimization.pgo.coreclr from version 1.0.0-prerelease.25171.2 -> to version 1.0.0-prerelease.25212.3---------"
dotnet/runtime,24d87073054240c3b7bc3d53e3a33d4bbf8b0ac2,Add internal intrinsics for instance-based calli (#114495),2025-04-16 14:14:00+00:00,Steve Harter,1,29acb2fd71a363053f1fbe67dc4bc06c555f7b94,"Reuse crossgen2 logic to lay out methods using PGO data (#114736)

Fixes #114093.",13,597,3,add internal intrinsics for instance-based calli (issue_ref)
dotnet/runtime,65cda8b953ae658ef7e5858ec67af2773b989772,"[coreclr][android] Don't build/ship unused GC variants for Android (#114448)

* Do not build or ship standalone GC libs for coreclr android

* Do not build server GC into the coreCLR runtime lib on Android

* Properly guard server GC specific defines

* Remove unnecesarry exclusion",2025-04-16 14:34:08+00:00,Ivan Povazan,0,,,4,8,5,[coreclr][android] don't build/ship unused gc variants for android (issue_ref)* do not build or ship standalone gc libs for coreclr android* do not build server gc into the coreclr runtime lib on android* properly guard server gc specific defines* remove unnecesarry exclusion
dotnet/runtime,76b41d39387925b7f2283ff01cbb32415e1be0b2,"Support W3C Propagator (#114583)

* Support W3C Propagator

* Fix the comment

* Remove wrong assert

* try fix tracestate in http tests

* fix failure cases in the http tests

* More http test fixes

* fix typo in test

* Address the feedback

* Swap the comments

* Add baggage extraction test with correlation-context

* Address Miha's feedback

* Feedback

* Add the new exposed APIs",2025-04-16 16:43:50+00:00,Tarek Mahmoud Sayed,1,0e06c21cc94d74108f602c31d2e309e732fcf276,"Convert Sync RemoteExecutors to Async on Http Tests (#115422)

* Convert Sync RemoteExecutors to Async

* Fix build",8,1156,41,support w3c propagator (issue_ref)* support w3c propagator* fix the comment* remove wrong assert* try fix tracestate in http tests* fix failure cases in the http tests* more http test fixes* fix typo in test* address the feedback* swap the comments* add baggage extraction test with correlation-context* address miha's feedback* feedback* add the new exposed apis
dotnet/runtime,267465c7e4c732a16f7a34a87ed12aece51cec96,"Increase libraries run timeouts from default 150 to 300 minutes. (#114722)

osx-arm64 queues have been timing out due to too many jobs sent to too
few machines, by the superpmi-collect pipeline.",2025-04-16 17:38:19+00:00,Bruce Forstall,0,,,1,4,0,"increase libraries run timeouts from default 150 to 300 minutes. (issue_ref)osx-arm64 queues have been timing out due to too many jobs sent to toofew machines, by the superpmi-collect pipeline."
dotnet/runtime,40f209caa4322089805ec73d38c85bedc50cca6f,"Add support to add new FieldRVAs to EnC (#114463)

Add testing.",2025-04-16 18:08:51+00:00,Aaron Robinson,0,,,20,395,148,add support to add new fieldrvas to enc (issue_ref)add testing.
dotnet/runtime,4ea3cb1f9919ee6b16e3767d0026592535f95f1b,"JIT: Escape analysis cleanup (#114716)

* use `printfAlloc` in a few places
* move escape-analysis specific layout code to objectalloc.cpp
* use custom layout for stack allocated boxes
* use layout a bit more broadly in objectalloc.cpp",2025-04-16 18:53:21+00:00,Andy Ayers,1,5a0865c7c2ff6b7310d619a0aff376f3b45cb57c,"JIT: fix issues in field-wise escape analysis (#114974)

Two fixes:
* we can't retype implicit byref gc struct params, as their GC info is reported by the caller.
Instead we must mark them as escaping.
* when retyping GT_STOREIND we should always use the stored data's new type

Fixes #111922.",5,126,113,jit: escape analysis cleanup (issue_ref)* use in a few places* move escape-analysis specific layout code to objectalloc.cpp* use custom layout for stack allocated boxes* use layout a bit more broadly in objectalloc.cpp
dotnet/runtime,bdd0daed0d8d8f5beff0534b6d07da412d1e1e71,"fix the regression in regions when handling heavily pinning scenarios (#112403)

this is to make regions behave very similarly to segments for heavily pinning scenarios. previously we observed regression in heap size due to regions not being aggressively demoted. changes included in this PR -

+ use the same policy for demotion of pinned plugs as much as possible for regions. since objects in a region can only belong to one generation, for pins observed skip_pins_in_alloc_region they will not use the same policy as they must belong to what's already allocated in that region. this policy is only applicable for regions with only pins left.

+ attribute the pins to the higher generation's generation_allocation_size when appropriate.

+ update data for events correctly for these pins.

with these changes I'm seeing a heavily pinned scenario be able to keep the heap size much lower and basically stable, vs without fix it goes up steadily. there can be some regression in % time in GC by design since we now leave more pins in gen0 which increases the amount of survived memory gen0 has to process.",2025-04-16 19:41:01+00:00,Maoni Stephens,1,9a879d3980bdf7c5e859ffa37e95ffcec695fe87,"changes to help diag init failure related to regions and expose more region size related configs in runtimeconfig (#114944)

lately I've seen a couple of customer reports where the GC initialization failed to reserve the default 256GB of virtual memory for the regions range, to make this easier to diagnose I've added this as an error communicated to host. so you would see something like this 

C:\temp>dotnet GCPerfSim.dll -tc 28 -tagb 50 -tlgb 2 -lohar 0 -sohsi 50 -lohsi 0 -pohsi 0 -sohpi 100 -lohpi 0 -sohfi 0 -lohfi 0 -pohfi 0 -allocType reference -testKind time
GC: Reserving 274877906944 bytes (256 GiB) for the regions range failed, do you have a virtual memory limit set on this process?
GC heap initialization failed with error 0x8007000E
Failed to create CoreCLR, HRESULT: 0x8007000E

also added a few other places where we might hit and got rid of some that are only for private testing. I'm not adding this for every single case where it could fail as they are really unlikely to be hit. 

since the solution is to adjust some region configs I also exposed them to the runtimeconfig. 

and fixed a typo I had for a config for private testing.",2,188,82,"fix the regression in regions when handling heavily pinning scenarios (issue_ref)this is to make regions behave very similarly to segments for heavily pinning scenarios. previously we observed regression in heap size due to regions not being aggressively demoted. changes included in this pr -+ use the same policy for demotion of pinned plugs as much as possible for regions. since objects in a region can only belong to one generation, for pins observed skip_pins_in_alloc_region they will not use the same policy as they must belong to what's already allocated in that region. this policy is only applicable for regions with only pins left.+ attribute the pins to the higher generation's generation_allocation_size when appropriate.+ update data for events correctly for these pins.with these changes i'm seeing a heavily pinned scenario be able to keep the heap size much lower and basically stable, vs without fix it goes up steadily. there can be some regression in % time in gc by design since we now leave more pins in gen0 which increases the amount of survived memory gen0 has to process."
dotnet/runtime,0012f6c5a6211e10e0f9069f7b4a657bcde2fd18,"Update DllImportSearchPathTests to avoid relying on any previous cached load (#114719)

- Use different copies (library names) for p/invokes in the `DllImportSearchPathTests` so that we don't end up using the runtime cached of loaded unmanaged libraries
- Add a test for default search flags",2025-04-16 21:32:59+00:00,Elinor Fung,0,,,2,52,11,update dllimportsearchpathtests to avoid relying on any previous cached load (issue_ref)- use different copies (library names) for p/invokes in the so that we don't end up using the runtime cached of loaded unmanaged libraries- add a test for default search flags
dotnet/runtime,0fa747abd5224373adbbece9a5ddc0325e373d7a,Replace OptimizedInboxTextEncoder vectorization with SearchValues (#114494),2025-04-16 21:36:38+00:00,Miha Zupan,0,,,7,52,673,replace optimizedinboxtextencoder vectorization with searchvalues (issue_ref)
dotnet/runtime,e901a033180dea3b66284f0ce8561c49ec672c16,JIT: Add a type for call emission parameters (#114542),2025-04-16 22:02:39+00:00,Jakob Botsch Nielsen,1,ff61917ee4141385bc063be9eccef9f66bf8ec92,[LoongArch64] Fix ld.lld relocation 'R_LARCH_PCALA_LO12' error when building NAOT testcases. (#114616),20,628,1170,jit: add a type for call emission parameters (issue_ref)
dotnet/runtime,01108e862d8ec94f61fb68e59fa21e4a66961b03,"[RISC-V] Integer min/max intrinsics (#114687)

* Intrinsify integer min/max

* Implement integer min/max

* Cleanup assert

* Fix windows build

* Add tests

* Different VNFunc for unsigned

* Min/Max is commutative

* Different intrinsic name for unsigned",2025-04-16 22:40:06+00:00,Tomasz Sowiński,1,e1702c393a1ef71b211f51d00beedec0151c9f25,"[RISC-V] Introduce Zbb (#114150)

* Rotations

* ReverseEndianness

* Don't temp register for Zbb rotations

* (and|or|xor)-not

* Handle both negated operands of and, or, and xor

* Add 'not' pseudo to disasm

* Extend small ints

* Small cleanup

* slli for small swaps

* Fix slli disasm

* TryGetUse in LowerBinaryArithmetic

* Fix disasm

* Fix windows build",13,928,429,[risc-v] integer min/max intrinsics (issue_ref)* intrinsify integer min/max* implement integer min/max* cleanup assert* fix windows build* add tests* different vnfunc for unsigned* min/max is commutative* different intrinsic name for unsigned
dotnet/runtime,248d6f422e777219e11762a330405234cbcee156,"JIT: Fix containment check for decomposed long halves in CreateScalar (#114654)

* fix containment check for decomposed long halves in CreateScalar

* add IsSupported check to test",2025-04-16 22:55:00+00:00,Clinton Ingram,1,9df77ee4c0f640c76519b0bf5bf02f7dff965a9b,"Fix typing of BlendVariableMask condition when optimizing TernaryLogic (#114837)

* Fix typing of BlendVariableMask condition when optimizing TernaryLogic

TernaryLogic nodes normalize small types to large types. When optimizing
a TernaryLogic node to a BlendVariableMask, if we leave the normalized
type, then the Blend uses the wrong instruction.

To fix this, change the Blend node to use the mask simd base type.
We only do this for mask base types that are small, which is
unsatisfying: there exists codegen today for double->int casts,
for example, that uses a 'double' type mask but an 'int' sized
TernaryLogic node. This works because we end up only using lane '0', as
the vector is converted to scalar. I didn't find any other case like
this, so hopefully if the mask type is small we can safely use it.

Fixes #114572

* Unconditionally set the base element type to the condition base element type

But only if the condition is a HW intrinsic.",3,63,1,jit: fix containment check for decomposed long halves in createscalar (issue_ref)* fix containment check for decomposed long halves in createscalar* add issupported check to test
dotnet/runtime,ce3c9df327ec04161baf0064310cd5b370af9c53,Disable the UTFStringConversionFailures test on CI runs (#114747),2025-04-17 05:11:39+00:00,Jeremy Koritzinsky,0,,,1,2,1,disable the utfstringconversionfailures test on ci runs (issue_ref)
dotnet/runtime,b281500fa1f42732455f8d4f06bcb376d88cdfdd,Don't use BaseOS as the RID for publishing NativeAOT'd assets when OutputRID is the SDK's RID (#114755),2025-04-17 06:03:38+00:00,Jeremy Koritzinsky,0,,,2,10,2,don't use baseos as the rid for publishing nativeaot'd assets when outputrid is the sdk's rid (issue_ref)
dotnet/runtime,b40903fbdbe2263db101a6cf7ae4bcc3d4471af9,"Zip async implementation (#114421)

Added new public async APIs for System.IO.Compression and System.IO.Compression.ZipFile.
Modified existing unit tests to validate both sync and async depending on an async argument.
Added fuzzing tests for ZipArchive.
Added new tests to confirm that no sync API is calling async APIs internally and viceversa.",2025-04-17 10:00:16+00:00,Carlos Sánchez López,1,1c82b73bb7b1452695647cac2ee07aa1cd307365,"Add stream checks before returning it (#119243)

* Add checks to see if the stream is disposed before returning them

* Fix the test since the functions throw ObjectDisposedException now",58,7396,2620,zip async implementation (issue_ref)added new public async apis for system.io.compression and system.io.compression.zipfile.modified existing unit tests to validate both sync and async depending on an async argument.added fuzzing tests for ziparchive.added new tests to confirm that no sync api is calling async apis internally and viceversa.
dotnet/runtime,2e8ea867980da8331e821c0e1cb1c6cf89656ede,[browser] Inline boot config (#114686),2025-04-17 11:38:01+00:00,Marek Fišera,0,,,11,57,26,[browser] inline boot config (issue_ref)
dotnet/runtime,b951b3d262f974e528e60e7283aec36d7e0183b0,Use regular casts for dictionary fallback in HttpHeaders (#114759),2025-04-17 12:59:27+00:00,Miha Zupan,0,,,1,2,2,use regular casts for dictionary fallback in httpheaders (issue_ref)
dotnet/runtime,d0e28e1c83d24ea41f7965d13dc01842ba1cf05a,"Remove quotes from Content-Disposition string properties, same way as ASP does it (#114771)",2025-04-17 13:57:46+00:00,Marie Píchová,1,a6974932e49393a81269f260e254e0cfbff04865,Fix ContentDisposition test on FW (#114892),3,28,29,"remove quotes from content-disposition string properties, same way as asp does it (issue_ref)"
dotnet/runtime,6ccb061aa76cf31b966bc87079ecc0d53d2a73d3,"JIT: teach local assertion prop about non-null helpers (#114749)

If we see `lcl = newobj` we can assert `lcl` is not null in local assertion prop.
This sometimes lets us clean up control flow in morph.",2025-04-17 14:33:06+00:00,Andy Ayers,0,,,1,16,0,jit: teach local assertion prop about non-null helpers (issue_ref)if we see we can assert is not null in local assertion prop.this sometimes lets us clean up control flow in morph.
dotnet/runtime,f2821e1c391ac04c83a37cfc98437f0a4af30cf4,Build ILCompiler.Build.Tasks when NativeAOT is supported for the target even if the target can't run ILC (as we may run ILC on the host) (#114752),2025-04-17 14:37:05+00:00,Jeremy Koritzinsky,0,,,1,3,3,build ilcompiler.build.tasks when nativeaot is supported for the target even if the target can't run ilc (as we may run ilc on the host) (issue_ref)
dotnet/runtime,9a666a1b1edabd13776f3d43cbac722abd48d94d,Skip failing zip tests on wasm (#114801),2025-04-17 19:39:02+00:00,Carlos Sánchez López,1,1dd74ea505761b657a7dafa3577c42d752514d5c,"Fix reading Zip64 end of central directory locator (#118239)

* Fix reading Zip64 end of central directory locator

* Update src/libraries/System.IO.Compression/src/System/IO/Compression/ZipHelper.Async.cs

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>

* Fix build

* Add test

* Update src/libraries/System.IO.Compression/src/System/IO/Compression/ZipArchive.cs

* Handle another offset out of bounds case.

* Improve ZipArchiveFuzzer

* Add another test case

* Add a comment

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",3,3,0,skip failing zip tests on wasm (issue_ref)
dotnet/runtime,7dcd892a2d800834ca714b54d91f3a557ac20fd1,Don't consider linux-bionic as a cross-build in UB builds (#114787),2025-04-17 20:07:45+00:00,Jeremy Koritzinsky,1,4786752485572580bb51ee5afa2d3999e79153a5,"Fix source-build validation leg (#115272)

* Fix source-build validation leg

* Enable Source Build Validation leg

* Rename _portableOS -> PortableOS

* Update src/coreclr/tools/aot/ILCompiler/ILCompiler_publish.csproj

Co-authored-by: Adeel Mujahid <3840695+am11@users.noreply.github.com>

* Update eng/pipelines/runtime.yml

Co-authored-by: Adeel Mujahid <3840695+am11@users.noreply.github.com>

* Update src/coreclr/tools/aot/crossgen2/crossgen2_publish.csproj

---------

Co-authored-by: Jeremy Koritzinsky <jkoritzinsky@gmail.com>",1,1,1,don't consider linux-bionic as a cross-build in ub builds (issue_ref)
dotnet/runtime,760e8e916736606306c97cccb28934128745cd64,ML-KEM: X.509 private keys and PEM loader,2025-04-17 21:03:53+00:00,Kevin Jones,0,,,15,627,51,ml-kem: x.509 private keys and pem loader
dotnet/runtime,15bcd62bb240635f8f5ce4b7a4b3a07bb65e5ac3,"SLH-DSA implementation for OpenSSL (#114060)

Co-authored-by: Jeremy Barton <jbarton@microsoft.com>",2025-04-18 04:13:33+00:00,Pranav Senthilnathan,0,,,53,2349,660,slh-dsa implementation for openssl (issue_ref)
dotnet/runtime,585057e47c33631e340fb042a203703e05f687ae,"Update dependencies from https://github.com/dotnet/roslyn-analyzers build 20250417.1 (#114814)

Microsoft.CodeAnalysis.NetAnalyzers
 From Version 10.0.0-preview.25215.1 -> To Version 10.0.0-preview.25217.1

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-04-18 15:42:47+00:00,dotnet-maestro[bot],0,,,2,3,3,update dependencies from build 20250417.1 (issue_ref)microsoft.codeanalysis.netanalyzers from version 10.0.0-preview.25215.1 -> to version 10.0.0-preview.25217.1
dotnet/runtime,2459e3f4c2d2719998d219d7f16c5ba68608118f,Allow 'object' as arg type when [ServiceKey] is used (#114785),2025-04-18 15:49:19+00:00,Steve Harter,0,,,2,135,2,allow 'object' as arg type when [servicekey] is used (issue_ref)
dotnet/runtime,7d247ddb1bb4b9114fda05d4b9958a8eebc29363,Improve error message when GetRequiredKeyedService() fails (#114796),2025-04-18 15:52:30+00:00,Steve Harter,1,75aee17dec39f3d2b9919d24b0e23374149e5d99,Fix AnyKey query issues with service identity (#114972),4,48,1,improve error message when getrequiredkeyedservice() fails (issue_ref)
dotnet/runtime,e824da73000080566a6b8400ccbd076f1cd1bfea,Strip trailing slash from source dir for cmake4 (#114779),2025-04-18 15:53:34+00:00,Adeel Mujahid,0,,,1,1,1,strip trailing slash from source dir for cmake4 (issue_ref)
dotnet/runtime,ae6a038ee5d80e4859a8f0fd96a83723c6854af9,"[RISC-V] Move lower 12 bits of indirection address to load / store offset (#114488)

* [RISC-V] Move lower 11 bits of indirection address to load / store offset

* [RISC-V] Move all lower 12-bits to offset

Co-authored-by: Tomasz Sowiński <tomeksowi@gmail.com>

---------

Co-authored-by: Tomasz Sowiński <tomeksowi@gmail.com>
Co-authored-by: Bruce Forstall <brucefo@microsoft.com>",2025-04-18 16:01:48+00:00,Fuad Ismail,0,,,3,20,1,[risc-v] move lower 12 bits of indirection address to load / store offset (issue_ref)* [risc-v] move lower 11 bits of indirection address to load / store offset* [risc-v] move all lower 12-bits to offset
dotnet/runtime,1e3c79879f3b475a9e134a7779f44b5e89230d44,"[RISC-V] Contain `GT_CALL` constant `controlExpr` to move lower 12 bits to JALR offset (#114728)

* Contain GT_CALL constant controlExpr to move lower 12 bits to JALR offset

* Remove duplicate assertion

Co-authored-by: Tomasz Sowiński <tomeksowi@gmail.com>

* Correct typo in comment

Co-authored-by: Bruce Forstall <brucefo@microsoft.com>

---------

Co-authored-by: Tomasz Sowiński <tomeksowi@gmail.com>
Co-authored-by: Bruce Forstall <brucefo@microsoft.com>",2025-04-18 16:03:28+00:00,Fuad Ismail,1,7e297e6e860552cee759e15260535f59cc2a791f,"[RISC-V] Utilize `Zba` extension instructions (#113999)

* [RISC-V] Group arrRef with index

* [RISC-V] Add Zba instructions

* [RISC-V] Create Shxadd GenTree

* [RISC-V] Lower ADD(LSH) node to SH(X)ADD(.UW) node

* [RISC-V] Utilize SH(X)ADD instruction for GT_INDEX_ADDR

* [RISC-V] Fix build error: correct format & add preprocessor directives

* [RISC-V] Update conditions for transforming ADD(LSH) into SHXADD

* [RISC-V] Update GT_SHXADD* register liveliness

* [RISC-V] Guard SHXADD instruction usage with extension check

* [RISC-V] Add description comments to SHXADD node and struct

* [RISC-V] Add more JIT dumps

* [RISC-V] Remove GenTreeShxadd and create separate nodes (SH1ADD, SH1ADD_UW, etc.)

* [RISC-V] Only use SH(X)ADD when ADD is expected, not ADDW.

* [RISC-V] Support add.uw instruction.

* [RISC-V] Utilize ADD.UW for zero extension

* [RISC-V] Support slli.uw instruction

* [RISC-V] Refactor

* [RISC-V] Fix missed optimization: contain slli.uw into sh(x)add.uw

* [RISC-V] Remove repeated directive condition

Co-authored-by: Bruce Forstall <brucefo@microsoft.com>

* [RISC-V] Update comment to reflect changes

---------

Co-authored-by: Bruce Forstall <brucefo@microsoft.com>",4,49,7,[risc-v] contain constant to move lower 12 bits to jalr offset (issue_ref)* contain gt_call constant controlexpr to move lower 12 bits to jalr offset* remove duplicate assertion
dotnet/runtime,7e297e6e860552cee759e15260535f59cc2a791f,"[RISC-V] Utilize `Zba` extension instructions (#113999)

* [RISC-V] Group arrRef with index

* [RISC-V] Add Zba instructions

* [RISC-V] Create Shxadd GenTree

* [RISC-V] Lower ADD(LSH) node to SH(X)ADD(.UW) node

* [RISC-V] Utilize SH(X)ADD instruction for GT_INDEX_ADDR

* [RISC-V] Fix build error: correct format & add preprocessor directives

* [RISC-V] Update conditions for transforming ADD(LSH) into SHXADD

* [RISC-V] Update GT_SHXADD* register liveliness

* [RISC-V] Guard SHXADD instruction usage with extension check

* [RISC-V] Add description comments to SHXADD node and struct

* [RISC-V] Add more JIT dumps

* [RISC-V] Remove GenTreeShxadd and create separate nodes (SH1ADD, SH1ADD_UW, etc.)

* [RISC-V] Only use SH(X)ADD when ADD is expected, not ADDW.

* [RISC-V] Support add.uw instruction.

* [RISC-V] Utilize ADD.UW for zero extension

* [RISC-V] Support slli.uw instruction

* [RISC-V] Refactor

* [RISC-V] Fix missed optimization: contain slli.uw into sh(x)add.uw

* [RISC-V] Remove repeated directive condition

Co-authored-by: Bruce Forstall <brucefo@microsoft.com>

* [RISC-V] Update comment to reflect changes

---------

Co-authored-by: Bruce Forstall <brucefo@microsoft.com>",2025-04-18 16:15:12+00:00,Fuad Ismail,1,a37502bc5f33765413118a4f1b888c79c403a809,"JIT: Optimize bit-wise and operation and compare with same constant value (#111933)

* JIT: Optimize bit-wise and operation and compare with same constant value

This change optimizes bit-wise and with compare patterns like '(x & <constant>) == <constant>'

Fix #101000

* JIT: Apply 'jit-format' to 'lower.cpp'

* JIT: Add comment to explain bitwise AND transformation

---------

Co-authored-by: Egor Bogatov <egorbo@gmail.com>",11,637,31,"[risc-v] utilize extension instructions (issue_ref)* [risc-v] group arrref with index* [risc-v] add zba instructions* [risc-v] create shxadd gentree* [risc-v] lower add(lsh) node to sh(x)add(.uw) node* [risc-v] utilize sh(x)add instruction for gt_index_addr* [risc-v] fix build error: correct format & add preprocessor directives* [risc-v] update conditions for transforming add(lsh) into shxadd* [risc-v] update gt_shxadd* register liveliness* [risc-v] guard shxadd instruction usage with extension check* [risc-v] add description comments to shxadd node and struct* [risc-v] add more jit dumps* [risc-v] remove gentreeshxadd and create separate nodes (sh1add, sh1add_uw, etc.)* [risc-v] only use sh(x)add when add is expected, not addw.* [risc-v] support add.uw instruction.* [risc-v] utilize add.uw for zero extension* [risc-v] support slli.uw instruction* [risc-v] refactor* [risc-v] fix missed optimization: contain slli.uw into sh(x)add.uw* [risc-v] remove repeated directive condition"
dotnet/runtime,1a51788af474a14cd8708a9a958fce93a47837e6,"Zip async implementation follow-up: Fix failures in wasm and add extra tests (#114798)

* Remove `.Result` calls in async tests failing in wasm.

* Uncomment the async tests for the latest bug fixes, make sure they count the Async write calls, not the sync ones, and add the rest of the async methods.

* Revert skip on wasm platform

* Modify NoSyncCallsStream to throw also on BeginRead, EndRead, BeginWrite and EndWrite.

* Remove .Result from ZipTestHelper methods and propagate proper async usage.

* spacing

* Simplify object[] enumerables returning lists of ints.",2025-04-18 17:10:21+00:00,Carlos Sánchez López,1,7505d8f1c0f6b85932bca41231824309fc8ea0d1,"Fix unicode tests for ios/tvOs (#119459)

* temporarily enable failing test for debug

* add comment explaining change

* normalize both entries for comparison

* add platform check",7,476,253,"zip async implementation follow-up: fix failures in wasm and add extra tests (issue_ref)* remove calls in async tests failing in wasm.* uncomment the async tests for the latest bug fixes, make sure they count the async write calls, not the sync ones, and add the rest of the async methods.* revert skip on wasm platform* modify nosynccallsstream to throw also on beginread, endread, beginwrite and endwrite.* remove .result from ziptesthelper methods and propagate proper async usage.* spacing* simplify object[] enumerables returning lists of ints."
dotnet/runtime,b81dbfc0b137ee1f9024edb046b2990627435895,"Update dependencies from https://dev.azure.com/dnceng/internal/_git/dotnet-optimization build 20250416.3 (#114776)

optimization.linux-arm64.MIBC.Runtime , optimization.linux-x64.MIBC.Runtime , optimization.windows_nt-arm64.MIBC.Runtime , optimization.windows_nt-x64.MIBC.Runtime , optimization.windows_nt-x86.MIBC.Runtime , optimization.PGO.CoreCLR
 From Version 1.0.0-prerelease.25212.3 -> To Version 1.0.0-prerelease.25216.3

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-04-18 18:26:46+00:00,dotnet-maestro[bot],0,,,2,18,18,"update dependencies from build 20250416.3 (issue_ref)optimization.linux-arm64.mibc.runtime , optimization.linux-x64.mibc.runtime , optimization.windows_nt-arm64.mibc.runtime , optimization.windows_nt-x64.mibc.runtime , optimization.windows_nt-x86.mibc.runtime , optimization.pgo.coreclr from version 1.0.0-prerelease.25212.3 -> to version 1.0.0-prerelease.25216.3"
dotnet/runtime,7b5faf3eff641ca3d3c5a87bc9b4f271a0b877c0,"Update dependencies from https://github.com/dotnet/xharness build 20250414.3 (#114774)

Microsoft.DotNet.XHarness.CLI , Microsoft.DotNet.XHarness.TestRunners.Common , Microsoft.DotNet.XHarness.TestRunners.Xunit
 From Version 10.0.0-prerelease.25211.1 -> To Version 10.0.0-prerelease.25214.3

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Larry Ewing <lewing@microsoft.com>",2025-04-18 18:27:32+00:00,dotnet-maestro[bot],1,f825bd9a996c94a8805b0d3ab708bf6c25b2b5f0,"[main] Update dependencies from dotnet/cecil, dotnet/hotreload-utils, dotnet/runtime, dotnet/runtime-assets, dotnet/sdk, dotnet/source-build-externals (#113111)

* Update dependencies from https://github.com/dotnet/icu build 20250302.1

Microsoft.NETCore.Runtime.ICU.Transport
 From Version 10.0.0-preview.3.25125.1 -> To Version 10.0.0-preview.3.25152.1

* Update dependencies from https://github.com/dotnet/runtime-assets build 20250303.1

Microsoft.DotNet.CilStrip.Sources , Microsoft.NET.HostModel.TestData , System.ComponentModel.TypeConverter.TestData , System.Data.Common.TestData , System.Drawing.Common.TestData , System.Formats.Tar.TestData , System.IO.Compression.TestData , System.IO.Packaging.TestData , System.Net.TestData , System.Private.Runtime.UnicodeData , System.Runtime.Numerics.TestData , System.Runtime.TimeZoneData , System.Security.Cryptography.X509Certificates.TestData , System.Text.RegularExpressions.TestData , System.Windows.Extensions.TestData
 From Version 10.0.0-beta.25126.1 -> To Version 10.0.0-beta.25153.1

* Update dependencies from https://github.com/dotnet/hotreload-utils build 20250303.1

Microsoft.DotNet.HotReload.Utils.Generator.BuildTool
 From Version 10.0.0-alpha.0.25126.1 -> To Version 10.0.0-alpha.0.25153.1

* Update dependencies from https://github.com/dotnet/sdk build 20250309.6

Microsoft.DotNet.ApiCompat.Task
 From Version 10.0.100-preview.3.25126.5 -> To Version 10.0.100-preview.3.25159.6

* Update dependencies from https://github.com/dotnet/cecil build 20250302.2

Microsoft.SourceBuild.Intermediate.cecil , Microsoft.DotNet.Cecil
 From Version 0.11.5-alpha.25125.1 -> To Version 0.11.5-alpha.25152.2

* Update dependencies from https://github.com/dotnet/icu build 20250309.2

Microsoft.NETCore.Runtime.ICU.Transport
 From Version 10.0.0-preview.3.25125.1 -> To Version 10.0.0-preview.3.25159.2

* Update dependencies from https://github.com/dotnet/runtime-assets build 20250310.1

Microsoft.DotNet.CilStrip.Sources , Microsoft.NET.HostModel.TestData , System.ComponentModel.TypeConverter.TestData , System.Data.Common.TestData , System.Drawing.Common.TestData , System.Formats.Tar.TestData , System.IO.Compression.TestData , System.IO.Packaging.TestData , System.Net.TestData , System.Private.Runtime.UnicodeData , System.Runtime.Numerics.TestData , System.Runtime.TimeZoneData , System.Security.Cryptography.X509Certificates.TestData , System.Text.RegularExpressions.TestData , System.Windows.Extensions.TestData
 From Version 10.0.0-beta.25126.1 -> To Version 10.0.0-beta.25160.1

* Update dependencies from https://github.com/dotnet/hotreload-utils build 20250310.1

Microsoft.DotNet.HotReload.Utils.Generator.BuildTool
 From Version 10.0.0-alpha.0.25126.1 -> To Version 10.0.0-alpha.0.25160.1

* Update dependencies from https://github.com/dotnet/runtime build 20250316.3

Microsoft.NET.Sdk.IL , Microsoft.NETCore.App.Runtime.win-x64 , Microsoft.NETCore.ILAsm , runtime.native.System.IO.Ports , System.Reflection.Metadata , System.Reflection.MetadataLoadContext , System.Text.Json , Microsoft.SourceBuild.Intermediate.runtime.linux-x64
 From Version 10.0.0-preview.3.25152.4 -> To Version 10.0.0-preview.3.25166.3

* Update dependencies from https://github.com/dotnet/icu build 20250317.1

Microsoft.NETCore.Runtime.ICU.Transport
 From Version 10.0.0-preview.3.25125.1 -> To Version 10.0.0-preview.4.25167.1

* Update dependencies from https://github.com/dotnet/runtime-assets build 20250317.1

Microsoft.DotNet.CilStrip.Sources , Microsoft.NET.HostModel.TestData , System.ComponentModel.TypeConverter.TestData , System.Data.Common.TestData , System.Drawing.Common.TestData , System.Formats.Tar.TestData , System.IO.Compression.TestData , System.IO.Packaging.TestData , System.Net.TestData , System.Private.Runtime.UnicodeData , System.Runtime.Numerics.TestData , System.Runtime.TimeZoneData , System.Security.Cryptography.X509Certificates.TestData , System.Text.RegularExpressions.TestData , System.Windows.Extensions.TestData
 From Version 10.0.0-beta.25126.1 -> To Version 10.0.0-beta.25167.1

* Update dependencies from https://github.com/dotnet/hotreload-utils build 20250317.1

Microsoft.DotNet.HotReload.Utils.Generator.BuildTool
 From Version 10.0.0-alpha.0.25126.1 -> To Version 10.0.0-alpha.0.25167.1

* Update dependencies from https://github.com/dotnet/source-build-externals build 20250318.1

Microsoft.SourceBuild.Intermediate.source-build-externals
 From Version 10.0.607901 -> To Version 10.0.616801

* Update dependencies from https://github.com/dotnet/runtime build 20250323.3

Microsoft.NET.Sdk.IL , Microsoft.NETCore.App.Runtime.win-x64 , Microsoft.NETCore.ILAsm , runtime.native.System.IO.Ports , System.Reflection.Metadata , System.Reflection.MetadataLoadContext , System.Text.Json , Microsoft.SourceBuild.Intermediate.runtime.linux-x64
 From Version 10.0.0-preview.3.25152.4 -> To Version 10.0.0-preview.4.25173.3

* Update dependencies from https://github.com/dotnet/icu build 20250323.2

Microsoft.NETCore.Runtime.ICU.Transport
 From Version 10.0.0-preview.3.25125.1 -> To Version 10.0.0-preview.4.25173.2

* Update dependencies from https://github.com/dotnet/runtime-assets build 20250324.1

Microsoft.DotNet.CilStrip.Sources , Microsoft.NET.HostModel.TestData , System.ComponentModel.TypeConverter.TestData , System.Data.Common.TestData , System.Drawing.Common.TestData , System.Formats.Tar.TestData , System.IO.Compression.TestData , System.IO.Packaging.TestData , System.Net.TestData , System.Private.Runtime.UnicodeData , System.Runtime.Numerics.TestData , System.Runtime.TimeZoneData , System.Security.Cryptography.X509Certificates.TestData , System.Text.RegularExpressions.TestData , System.Windows.Extensions.TestData
 From Version 10.0.0-beta.25126.1 -> To Version 10.0.0-beta.25174.1

* Update dependencies from https://github.com/dotnet/icu build 20250325.1

Microsoft.NETCore.Runtime.ICU.Transport
 From Version 10.0.0-preview.3.25125.1 -> To Version 10.0.0-preview.4.25175.1

* Update MicrosoftDotNetApiCompatTaskVersion in Versions.props

* Update dependencies from https://github.com/dotnet/hotreload-utils build 20250324.1

Microsoft.DotNet.HotReload.Utils.Generator.BuildTool
 From Version 10.0.0-alpha.0.25126.1 -> To Version 10.0.0-alpha.0.25174.1

* Update dependencies from https://github.com/dotnet/source-build-externals build 20250325.1

Microsoft.SourceBuild.Intermediate.source-build-externals
 From Version 10.0.607901 -> To Version 10.0.617501

* Update dependencies from https://github.com/dotnet/runtime build 20250330.1

Microsoft.NET.Sdk.IL , Microsoft.NETCore.App.Runtime.win-x64 , Microsoft.NETCore.ILAsm , runtime.native.System.IO.Ports , System.Reflection.Metadata , System.Reflection.MetadataLoadContext , System.Text.Json , Microsoft.SourceBuild.Intermediate.runtime.linux-x64
 From Version 10.0.0-preview.3.25152.4 -> To Version 10.0.0-preview.4.25180.1

* Update dependencies from https://github.com/dotnet/icu build 20250330.1

Microsoft.NETCore.Runtime.ICU.Transport
 From Version 10.0.0-preview.3.25125.1 -> To Version 10.0.0-preview.4.25180.1

* Update dependencies from https://github.com/dotnet/runtime-assets build 20250331.1

Microsoft.DotNet.CilStrip.Sources , Microsoft.NET.HostModel.TestData , System.ComponentModel.TypeConverter.TestData , System.Data.Common.TestData , System.Drawing.Common.TestData , System.Formats.Tar.TestData , System.IO.Compression.TestData , System.IO.Packaging.TestData , System.Net.TestData , System.Private.Runtime.UnicodeData , System.Runtime.Numerics.TestData , System.Runtime.TimeZoneData , System.Security.Cryptography.X509Certificates.TestData , System.Text.RegularExpressions.TestData , System.Windows.Extensions.TestData
 From Version 10.0.0-beta.25126.1 -> To Version 10.0.0-beta.25181.1

* Update dependencies from https://github.com/dotnet/runtime-assets build 20250403.1

Microsoft.DotNet.CilStrip.Sources , Microsoft.NET.HostModel.TestData , System.ComponentModel.TypeConverter.TestData , System.Data.Common.TestData , System.Drawing.Common.TestData , System.Formats.Tar.TestData , System.IO.Compression.TestData , System.IO.Packaging.TestData , System.Net.TestData , System.Private.Runtime.UnicodeData , System.Runtime.Numerics.TestData , System.Runtime.TimeZoneData , System.Security.Cryptography.X509Certificates.TestData , System.Text.RegularExpressions.TestData , System.Windows.Extensions.TestData
 From Version 10.0.0-beta.25126.1 -> To Version 10.0.0-beta.25203.1

* Update dependencies from https://github.com/dotnet/hotreload-utils build 20250331.1

Microsoft.DotNet.HotReload.Utils.Generator.BuildTool
 From Version 10.0.0-alpha.0.25126.1 -> To Version 10.0.0-alpha.0.25181.1

* Update dependencies from https://github.com/dotnet/cecil build 20250316.4

Microsoft.SourceBuild.Intermediate.cecil , Microsoft.DotNet.Cecil
 From Version 0.11.5-alpha.25125.1 -> To Version 0.11.5-alpha.25166.4

* Update dependencies from https://github.com/dotnet/icu build 20250406.1

Microsoft.NETCore.Runtime.ICU.Transport
 From Version 10.0.0-preview.3.25125.1 -> To Version 10.0.0-preview.4.25206.1

* Update dependencies from https://github.com/dotnet/runtime-assets build 20250407.1

Microsoft.DotNet.CilStrip.Sources , Microsoft.NET.HostModel.TestData , System.ComponentModel.TypeConverter.TestData , System.Data.Common.TestData , System.Drawing.Common.TestData , System.Formats.Tar.TestData , System.IO.Compression.TestData , System.IO.Packaging.TestData , System.Net.TestData , System.Private.Runtime.UnicodeData , System.Runtime.Numerics.TestData , System.Runtime.TimeZoneData , System.Security.Cryptography.X509Certificates.TestData , System.Text.RegularExpressions.TestData , System.Windows.Extensions.TestData
 From Version 10.0.0-beta.25126.1 -> To Version 10.0.0-beta.25207.1

* Update dependencies from https://github.com/dotnet/runtime-assets build 20250411.1

Microsoft.DotNet.CilStrip.Sources , Microsoft.NET.HostModel.TestData , System.ComponentModel.TypeConverter.TestData , System.Data.Common.TestData , System.Drawing.Common.TestData , System.Formats.Tar.TestData , System.IO.Compression.TestData , System.IO.Packaging.TestData , System.Net.TestData , System.Private.Runtime.UnicodeData , System.Runtime.Numerics.TestData , System.Runtime.TimeZoneData , System.Security.Cryptography.X509Certificates.TestData , System.Text.RegularExpressions.TestData , System.Windows.Extensions.TestData
 From Version 10.0.0-beta.25126.1 -> To Version 10.0.0-beta.25211.1

* Update dependencies from https://github.com/dotnet/hotreload-utils build 20250407.1

Microsoft.DotNet.HotReload.Utils.Generator.BuildTool
 From Version 10.0.0-alpha.0.25126.1 -> To Version 10.0.0-alpha.0.25207.1

* Update dependencies from https://github.com/dotnet/runtime build 20250411.19

Microsoft.NET.Sdk.IL , Microsoft.NETCore.App.Runtime.win-x64 , Microsoft.NETCore.ILAsm , runtime.native.System.IO.Ports , System.Reflection.Metadata , System.Reflection.MetadataLoadContext , System.Text.Json , Microsoft.SourceBuild.Intermediate.runtime.linux-x64
 From Version 10.0.0-preview.3.25152.4 -> To Version 10.0.0-preview.4.25211.19

* Update dependencies from https://github.com/dotnet/sdk build 20250411.22

Microsoft.DotNet.ApiCompat.Task , Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport
 From Version 10.0.100-preview.3.25173.9 -> To Version 10.0.100-preview.4.25211.22

* Update dependencies from https://github.com/dotnet/icu build 20250414.1

Microsoft.NETCore.Runtime.ICU.Transport
 From Version 10.0.0-preview.3.25125.1 -> To Version 10.0.0-preview.4.25214.1

* Update dependencies from https://github.com/dotnet/runtime-assets build 20250414.1

Microsoft.DotNet.CilStrip.Sources , Microsoft.NET.HostModel.TestData , System.ComponentModel.TypeConverter.TestData , System.Data.Common.TestData , System.Drawing.Common.TestData , System.Formats.Tar.TestData , System.IO.Compression.TestData , System.IO.Packaging.TestData , System.Net.TestData , System.Private.Runtime.UnicodeData , System.Runtime.Numerics.TestData , System.Runtime.TimeZoneData , System.Security.Cryptography.X509Certificates.TestData , System.Text.RegularExpressions.TestData , System.Windows.Extensions.TestData
 From Version 10.0.0-beta.25126.1 -> To Version 10.0.0-beta.25214.1

* Failed to perform coherency update for one or more dependencies.

* Update dependencies from https://github.com/dotnet/runtime-assets build 20250415.1

Microsoft.DotNet.CilStrip.Sources , Microsoft.NET.HostModel.TestData , System.ComponentModel.TypeConverter.TestData , System.Data.Common.TestData , System.Drawing.Common.TestData , System.Formats.Tar.TestData , System.IO.Compression.TestData , System.IO.Packaging.TestData , System.Net.TestData , System.Private.Runtime.UnicodeData , System.Runtime.Numerics.TestData , System.Runtime.TimeZoneData , System.Security.Cryptography.X509Certificates.TestData , System.Text.RegularExpressions.TestData , System.Windows.Extensions.TestData
 From Version 10.0.0-beta.25126.1 -> To Version 10.0.0-beta.25215.1

* Remove CoherentParentDependency for now, will add it back after flat flow switch

* Fix wrong merge

* Fix EmsdkPackageVersion

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Larry Ewing <lewing@microsoft.com>
Co-authored-by: Alexander Köplinger <alex.koeplinger@outlook.com>",3,10,10,"update dependencies from build 20250414.3 (issue_ref)microsoft.dotnet.xharness.cli , microsoft.dotnet.xharness.testrunners.common , microsoft.dotnet.xharness.testrunners.xunit from version 10.0.0-prerelease.25211.1 -> to version 10.0.0-prerelease.25214.3"
dotnet/runtime,7b2de1e5ed6368c536ee646346e6fd81939e6fe6,Use extension everything to polyfill ArgumentNullException.ThrowIfNull (#114644),2025-04-18 21:00:09+00:00,Stephen Toub,1,e49e456d4e76572614eb1727cec04ad738d1767f,"Fix case-insensitive URI matching (#118574)

* add unit test for case-insensitive uri comparison and update comparer logic

* add overrides to GetHashCode and Equals

* add unit test for unique parts",659,2517,6229,use extension everything to polyfill argumentnullexception.throwifnull (issue_ref)
dotnet/runtime,ac8e79a56b0141494cc532b085a90cdb52f93296,"Change CrlBuilderTests to use a static RSA key with better support.

Change from using the ""big exponent"" key to some other key (which uses the normal exponent of F5), as not all versions of Android like big exponent keys.",2025-04-19 00:12:38+00:00,Jeremy Barton,0,,,1,142,161,"change crlbuildertests to use a static rsa key with better support.change from using the ""big exponent"" key to some other key (which uses the normal exponent of f5), as not all versions of android like big exponent keys."
dotnet/runtime,2db28217c40088686fcc8ccc52df2da0391bb712,Remove unsafe code from Http KnownHeaders (#114757),2025-04-19 00:13:01+00:00,Miha Zupan,0,,,1,36,72,remove unsafe code from http knownheaders (issue_ref)
dotnet/runtime,55b8f9fe7b0e3b00d5d1419f64763e141570f206,"Replace compiler specific options with C++ `thread_local` keyword (#114660)

* Rename gCurrentThreadInfo to t_CurrentThreadInfo.
---------
Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-04-19 03:42:13+00:00,Aaron Robinson,1,4144fdab16a98dc7bf8509e6850eb691ddede804,"Improve error message when running on outdated Windows OS with incomplete CET support (#114839)

Fixes #110000",17,63,215,replace compiler specific options with c++ keyword (issue_ref)* rename gcurrentthreadinfo to t_currentthreadinfo.---------
dotnet/runtime,2e5703006701621721c2cd72d726781e236db99a,"Update dependencies from https://github.com/dotnet/command-line-api build 20250418.1 (#114829)

Microsoft.SourceBuild.Intermediate.command-line-api , System.CommandLine
 From Version 0.1.620801 -> To Version 0.1.621801

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-04-19 08:22:48+00:00,dotnet-maestro[bot],0,,,2,5,5,"update dependencies from build 20250418.1 (issue_ref)microsoft.sourcebuild.intermediate.command-line-api , system.commandline from version 0.1.620801 -> to version 0.1.621801"
dotnet/runtime,29cb0889b3506193dcddbedf28288a944966128f,"Update dependencies from https://github.com/dotnet/arcade build 20250416.2 (#114777)

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.25214.8 -> To Version 10.0.0-beta.25216.2

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Marek Fišera <mara@neptuo.com>
Co-authored-by: Alexander Köplinger <alex.koeplinger@outlook.com>",2025-04-19 08:24:25+00:00,dotnet-maestro[bot],0,,,7,81,86,"update dependencies from build 20250416.2 (issue_ref)microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.25214.8 -> to version 10.0.0-beta.25216.2"
dotnet/runtime,a71b101f53ec5b40a9e149047cf1da2141b2397a,"[main] Update dependencies from dotnet/roslyn (#114761)

* Update dependencies from https://github.com/dotnet/roslyn build 20250416.17

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.Analyzers , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 5.0.0-1.25214.5 -> To Version 5.0.0-1.25216.17

* Update dependencies from https://github.com/dotnet/roslyn build 20250418.9

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.Analyzers , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 5.0.0-1.25214.5 -> To Version 5.0.0-1.25218.9

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Larry Ewing <lewing@microsoft.com>
Co-authored-by: Alexander Köplinger <alex.koeplinger@outlook.com>",2025-04-19 08:25:20+00:00,dotnet-maestro[bot],0,,,2,14,14,"[main] update dependencies from dotnet/roslyn (issue_ref)* update dependencies from build 20250416.17microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.analyzers , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 5.0.0-1.25214.5 -> to version 5.0.0-1.25216.17* update dependencies from build 20250418.9microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.analyzers , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 5.0.0-1.25214.5 -> to version 5.0.0-1.25218.9---------"
dotnet/runtime,69329ef06681d926604e6f4169a50ae1ca8598a8,"Localized file check-in by OneLocBuild Task: Build definition ID 679: Build ID 2690943 (#114807)

* Localized file check-in by OneLocBuild Task: Build definition ID 679: Build ID 2690019

* Localized file check-in by OneLocBuild Task: Build definition ID 679: Build ID 2690137

* Localized file check-in by OneLocBuild Task: Build definition ID 679: Build ID 2690137

* Localized file check-in by OneLocBuild Task: Build definition ID 679: Build ID 2690605

* Localized file check-in by OneLocBuild Task: Build definition ID 679: Build ID 2690658

* Localized file check-in by OneLocBuild Task: Build definition ID 679: Build ID 2690658",2025-04-19 08:26:44+00:00,dotnet bot,0,,,0,0,0,localized file check-in by onelocbuild task: build definition id 679: build id 2690943 (issue_ref)* localized file check-in by onelocbuild task: build definition id 679: build id 2690019* localized file check-in by onelocbuild task: build definition id 679: build id 2690137* localized file check-in by onelocbuild task: build definition id 679: build id 2690137* localized file check-in by onelocbuild task: build definition id 679: build id 2690605* localized file check-in by onelocbuild task: build definition id 679: build id 2690658* localized file check-in by onelocbuild task: build definition id 679: build id 2690658
dotnet/runtime,50c020e4f0f03a801c137fca5ba7f0f052f3c7e9,[browser] Preload dotnet.js (#114534),2025-04-19 10:59:07+00:00,Marek Fišera,1,c0c5520b7b79747ca903a0ca59125bf3dede1307,[browser] Fix hard fingerprint on json boot config with OverrideHtmlAssetPlaceholders=true (#114859),6,180,0,[browser] preload dotnet.js (issue_ref)
dotnet/runtime,07f3e33da71e52fce0627aa8645fc9787b954672,"Deref pointer in minipal/time (#114598)

* Deref pointer in minipal/time

* Update minipalconfig.h.in

* Update configure.cmake",2025-04-19 15:22:21+00:00,Adeel Mujahid,0,,,3,6,8,deref pointer in minipal/time (issue_ref)* deref pointer in minipal/time* update minipalconfig.h.in* update configure.cmake
dotnet/runtime,a4848033324be5a3e0f7f0a901e222cdcadce07b,don't optimize prologs/epilogues in OptimizePostIndexed (#114843),2025-04-20 22:05:57+00:00,Egor Bogatov,0,,,1,6,0,don't optimize prologs/epilogues in optimizepostindexed (issue_ref)
dotnet/runtime,34545d790e0f92be34b13f0d41b7df93f04bbe02,"JIT: don't mark callees noinline for non-fatal observations with pgo (#114821)

Some inline policy decisions are sensitive to the root method having valid
PGO data.  And sometimes the decision is that a particular callee can never
be a viable inline.  If so, the policy will have the runtime mark the method
as `NoInlining` to short-circuit future inlining decisions and save some JIT
throughput.

But if the method had valid PGO data the policy may have made a different
decision. By marking this method noinline, the JIT will immediately reject
all future inline attempts (say from other calling methods with valid PGO data).

For instance, without PGO, the policy may limit the number of basic blocks in
a viable callee to 5. But with PGO the policy is willing to consider callees
with many more blocks.

In this PR we modify the reporting policy so that if TieredPGO is active,
we only ever report back methods with truly fatal inlining issues, not just
""informational"" or ""performance"" issues, regardless of the state of the
PGO data for the method being jitted.",2025-04-21 02:03:19+00:00,Andy Ayers,0,,,1,26,3,"jit: don't mark callees noinline for non-fatal observations with pgo (issue_ref)some inline policy decisions are sensitive to the root method having validpgo data. and sometimes the decision is that a particular callee can neverbe a viable inline. if so, the policy will have the runtime mark the methodas to short-circuit future inlining decisions and save some jitthroughput.but if the method had valid pgo data the policy may have made a differentdecision. by marking this method noinline, the jit will immediately rejectall future inline attempts (say from other calling methods with valid pgo data).for instance, without pgo, the policy may limit the number of basic blocks ina viable callee to 5. but with pgo the policy is willing to consider calleeswith many more blocks.in this pr we modify the reporting policy so that if tieredpgo is active,we only ever report back methods with truly fatal inlining issues, not just""informational"" or ""performance"" issues, regardless of the state of thepgo data for the method being jitted."
dotnet/runtime,3384063b9134d210841139c5275096824772de3d,"Remove gitter from readme (#114841)

* Remove gitter from readme

Last activity there was years ago, the community is on discord.

* Update docs/workflow/ci/failure-analysis.md

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-04-21 06:45:47+00:00,Alexander Köplinger,0,,,2,1,2,"remove gitter from readme (issue_ref)* remove gitter from readmelast activity there was years ago, the community is on discord.* update docs/workflow/ci/failure-analysis.md"
dotnet/runtime,4cfa928f02ce91d1473b05038ac65a67a429a5b5,"Update dependencies from https://github.com/dotnet/source-build-reference-packages build 20250418.1 (#114854)

Microsoft.SourceBuild.Intermediate.source-build-reference-packages
 From Version 10.0.621001 -> To Version 10.0.621801

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-04-21 15:36:26+00:00,dotnet-maestro[bot],0,,,1,2,2,update dependencies from build 20250418.1 (issue_ref)microsoft.sourcebuild.intermediate.source-build-reference-packages from version 10.0.621001 -> to version 10.0.621801
dotnet/runtime,1c7e2a0992c537da05ee10ed63d2446518a4bd8b,"Update dependencies from https://dev.azure.com/dnceng/internal/_git/dotnet-optimization build 20250417.3 (#114851)

optimization.linux-arm64.MIBC.Runtime , optimization.linux-x64.MIBC.Runtime , optimization.windows_nt-arm64.MIBC.Runtime , optimization.windows_nt-x64.MIBC.Runtime , optimization.windows_nt-x86.MIBC.Runtime , optimization.PGO.CoreCLR
 From Version 1.0.0-prerelease.25216.3 -> To Version 1.0.0-prerelease.25217.3

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-04-21 15:37:15+00:00,dotnet-maestro[bot],0,,,2,18,18,"update dependencies from build 20250417.3 (issue_ref)optimization.linux-arm64.mibc.runtime , optimization.linux-x64.mibc.runtime , optimization.windows_nt-arm64.mibc.runtime , optimization.windows_nt-x64.mibc.runtime , optimization.windows_nt-x86.mibc.runtime , optimization.pgo.coreclr from version 1.0.0-prerelease.25216.3 -> to version 1.0.0-prerelease.25217.3"
dotnet/runtime,c83f92ad7aa7afa152b833a8e8f5ffe36a3287d1,[Profiler][Tests] Add shutdown guard and class filter to class loading test (#114849),2025-04-21 16:12:29+00:00,Mitchell Hwang,0,,,1,41,10,[profiler][tests] add shutdown guard and class filter to class loading test (issue_ref)
dotnet/runtime,7db0b74d0aa62db97a515eb5e5546cd53ae69895,"Abolish PSPSym from ABI (#114630)

NativeAOT was already using an ABI without PSPSym and this aligns CoreCLR to match. The aim is to get some improvements in code quality and also get better testing for the code generation by unifying it across NativeAOT and CoreCLR and thus getting better GC stress coverage. Eventually it opens path to share more code between the two runtimes.

Removes any use of PSPSym from JIT, both for emitting and consumption.

The only usage of PSPSym in the VM was in GetExactGenericsToken. The encoding of generics instance context stack slot is changed to be SP/FP relative. The profiler code is adjusted accordingly.",2025-04-21 20:14:17+00:00,Filip Navara,0,,,47,288,1377,"abolish pspsym from abi (issue_ref)nativeaot was already using an abi without pspsym and this aligns coreclr to match. the aim is to get some improvements in code quality and also get better testing for the code generation by unifying it across nativeaot and coreclr and thus getting better gc stress coverage. eventually it opens path to share more code between the two runtimes.removes any use of pspsym from jit, both for emitting and consumption.the only usage of pspsym in the vm was in getexactgenericstoken. the encoding of generics instance context stack slot is changed to be sp/fp relative. the profiler code is adjusted accordingly."
dotnet/runtime,fd33f03efdff93f39d88c7d30de2be6f59bb3106,"Do not set the salt or info if they are NULL for OpenSSL HKDF

OpenSSL made a change that prevents setting an empty salt with HKDF. This includes HKDF-Expand, which doesn't use the salt, so the salt was always NULL. The net result of this is that HKDF-Expand is broken.

This changes the parameters of HKDF to not be used if the salt or info are NULL.",2025-04-21 21:40:53+00:00,Kevin Jones,0,,,1,19,10,"do not set the salt or info if they are null for openssl hkdfopenssl made a change that prevents setting an empty salt with hkdf. this includes hkdf-expand, which doesn't use the salt, so the salt was always null. the net result of this is that hkdf-expand is broken.this changes the parameters of hkdf to not be used if the salt or info are null."
dotnet/runtime,c4bc9b0821921ec58eeaf0ab923d291259165dd9,"Update Fedora helix images -- 41 -> 42 (#114791)

* Update Fedora helix images, 41 -> 42

* Update tag to include arch",2025-04-21 22:30:40+00:00,Rich Lander,0,,,1,2,2,"update fedora helix images -- 41 -> 42 (issue_ref)* update fedora helix images, 41 -> 42* update tag to include arch"
dotnet/runtime,62db69b2e1c20425ce9aac6a732e7f80087d70df,"Update JITEEVersionIdentifier (#114883)

* Update JITEEVersionIdentifier

* Mention existing generator instead",2025-04-22 04:41:14+00:00,Adeel Mujahid,0,,,1,6,6,update jiteeversionidentifier (issue_ref)* update jiteeversionidentifier* mention existing generator instead
dotnet/runtime,2b6a0ab97d18e3f1590a0bb9f9b395ecfd92f8cd,"Check existing neutral flag on R2R rewrite (#114850)

* Check existing neutral flag on R2R rewrite

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-04-22 06:13:16+00:00,Adeel Mujahid,0,,,3,28,2,check existing neutral flag on r2r rewrite (issue_ref)* check existing neutral flag on r2r rewrite
dotnet/runtime,e714d5d1cb9a041146e57606dc8ee95ee1bcca19,"[LoongArch64] Improve the functionality of LoongArch64 R2R (#114666)

Add align assemblies in the bundle at 16K.",2025-04-22 06:14:55+00:00,Liu An,1,f23657a953232c4755c3e9d9c8c516f18a9fdcfb,"[LoongArch64] Fix some bugs to make NativeAOT stable. (#114618)

* [LoongArch64] Fix some bugs to make NativeAOT stable.
* Also checked some riskpoints on LA64 with PR#112736.

* restrict 'UnixNativeCodeManager::IsInProlog()' in '#if (defined(TARGET_APPLE) && defined(TARGET_ARM64)) || defined(TARGET_ARM)'.
update src/coreclr/nativeaot/Runtime/loongarch64/WriteBarriers.S

* Update 'RhpCheckedLockCmpXchg' in 'WriteBarriers.S'

* revert the modify of `src/installer/tests/Assets/Projects/HelloWorld/SelfContained.csproj` within PR#114666.",3,31,6,[loongarch64] improve the functionality of loongarch64 r2r (issue_ref)add align assemblies in the bundle at 16k.
dotnet/runtime,8c3a2e15a63d1a7b2b54312b79f8a725ccdc2d4d,"Tar: Write unused GNU tar entry size, ctime and atime bytes in the expected format (#114868)

* In the GNU tar entry format, the unused bytes of the size metadata field should be filled with ""0"" characters. The bug was that we were filling them with nulls like in the other formats.
Added sync and async tests to validate directly in the memory stream that the unused bytes in the size field are indeed written as ""0"" characters.

* In the GNU tar entry format, the atime and ctime fields (unique to this format) need to be written as null characters if their value is the Unix Epoch. The bug was that we were writing them as ""0"" characters as other GNU metadata fields. This was causing tools like 7-zip to show an extra unexpected folder with a name formed by just ""0"" characters. Other tools were unable to read these archives as they were considered corrupt.
Added sync and async tests to validate directly in the memory stream that when atime and ctime represent the Unix Epoch, they are indeed written as null characters.

* Create a separate timestamp writing method just for GNU timestamps. Regular timestamps (mtime) should not be affected by this.
Modify all the sync and async checksum shared code so that they reflect the changes in the expected values of size, atime and ctime.",2025-04-22 06:17:07+00:00,Carlos Sánchez López,1,0ac2caf41a88c56a287ab790e92eaf3ccf846fc8,"Tar: Adjust the way we write GNU longlink and longpath metadata (#114940)

* Fix 3 GNU longlink and longpath bugs

The Tar entry types Longlink and Longpath, which are exclusive to the GNU format, are metadata entries used to store longer-than-expected link or name strings (respectively). They precede their actual entry, and they are not visible to the user, only the data they hold is visible.

Most of the regular header metadata in this metadata entries is not relevant, but we need to make sure it is well formed so other tools can read them properly.

There are 3 fields that were not getting their values stored as expected by other tools:

- The mtime, ctime and atime fields need to be set to the Unix Epoch so it shows up as zeros (0x30) by default. We were storing them as null (0x0) characters instead. For consistency, if a regular entry happens to get its mtime set to the Epoch, it should also be shown as zeros (0x30).
- The uid, gid, uname and gname fields were not being set. These fields aren't really important in a metadata entry, but other tools set this to the default value (uid=gid=0 and uname=gname=root). Based on the fact that 'a value' is preferred for these fields, we can set them to the same value that the real entry has (not root).
- The long text value (either link or name) should be null terminated, and this extra character should be counted in the size of the longpath. The library libdpkg, used by the dpkg-deb tool in Debian, now expects a null terminator in longlink and longpath data starting in Debian 13. Without the terminator, these entries are considered malformed.

* Test to check mtime null values when set to UnixEpoch.

* Make sure empty uid and gid are written as '0' chars.

* Adapt existing tests that check atime and ctime so that they also check those values in the LongLink and LongPath stream bytes themselves.
Also should check uid=gid=0 and the copying of uname and gname into the LongLink/LongPath entries.
Also should confirm that the data length in LongLink and LongPath entries is counting a null terminator in the data.

* Address feedback: set to 0x30 the fields that expect octal and their value is 0 (except the last char). Adjust the new tests to take care of that.

* Update the checksum tests

* Delete prefill line.

* Bring back the if branches instead of a Math.Max. Make sure to also apply the if check >=0 to mode. Adjust tests to verify mode as well.

* No need for async MemoryStream.WriteAsync (it calls Write internally).

* Delete temp test.",4,322,43,"tar: write unused gnu tar entry size, ctime and atime bytes in the expected format (issue_ref)* in the gnu tar entry format, the unused bytes of the size metadata field should be filled with ""0"" characters. the bug was that we were filling them with nulls like in the other formats.added sync and async tests to validate directly in the memory stream that the unused bytes in the size field are indeed written as ""0"" characters.* in the gnu tar entry format, the atime and ctime fields (unique to this format) need to be written as null characters if their value is the unix epoch. the bug was that we were writing them as ""0"" characters as other gnu metadata fields. this was causing tools like 7-zip to show an extra unexpected folder with a name formed by just ""0"" characters. other tools were unable to read these archives as they were considered corrupt.added sync and async tests to validate directly in the memory stream that when atime and ctime represent the unix epoch, they are indeed written as null characters.* create a separate timestamp writing method just for gnu timestamps. regular timestamps (mtime) should not be affected by this.modify all the sync and async checksum shared code so that they reflect the changes in the expected values of size, atime and ctime."
dotnet/runtime,8af737abf927f24520b483b93ae7c2e310604417,"Fold ""new T[size].Length"" into ""size"" (#114845)",2025-04-22 11:33:15+00:00,Egor Bogatov,0,,,1,31,0,"fold ""new t[size].length"" into ""size"" (issue_ref)"
dotnet/runtime,79a2a66947b55f4b717ed04d6f15dfc031dc78f0,"Disable PingTest.CancelSendPingAsync on OSX (#114783)

* Disable System.Net.NetworkInformation.Tests.PingTest.CancelSendPingAsync on OSX

* Update src/libraries/System.Net.Ping/tests/FunctionalTests/PingTest.cs",2025-04-22 14:58:22+00:00,Radek Zikmund,1,e95303de52a7d67971c664ac44d053747bd9a6a0,"Harden `Ping_TimedOut_*` tests (#116500)

Depending on the network configuration, we can get an ICMP with `Type=Destination Unreachable, Code=Network Unreachable` from middlewares when pinging an ""unreachable"" IP. In #115358 we see this happening on Helix Mac machines, but I was able to reproduce it on an office LAN-connected Windows PC too.

This PR attempts to fix address this problem by repeating the ping tests on other ""types"" of unreachable hosts until we actually catch a timeout. (We could instead just skip the test on the first DestinationNetworkUnreachable, but then we would loose some functional coverage.)

Marking as draft until we get a few successful outerloop runs.",1,7,1,disable pingtest.cancelsendpingasync on osx (issue_ref)* disable system.net.networkinformation.tests.pingtest.cancelsendpingasync on osx* update src/libraries/system.net.ping/tests/functionaltests/pingtest.cs
dotnet/runtime,28bbd27b7eaa3e0ad643c9f9d81ef59abff22a5a,Correctly manage m_DebugWillSyncCount when thread exits before it is synchronized (#114887),2025-04-22 15:23:53+00:00,Tom McDonald,1,f2f058ef0063a899d290631c5600fc5b49173e05,"[clr-interp] Implement `CEE_LOCALLOC` and frame data allocator for dynamic stack allocations (#114860)

* Implement localloc in the interpreter

* Add comment

* Implement FrameDataAllocator for dynamic stack allocations

* Fix merge conflicts

* Initialize local variables to zero if the flag is set

* Initialize local variables based on the CORINFO_OPT_INIT_LOCALS. Move FrameDataAllocator code to interpframeallocator.cpp/h. Add TODO comments.

* Implement FrameDataFragment destructor

* Handle memory allocation failure in frame data allocation

* Fix typo

* Add preprocessor directive FEATURE_INTERPRETER

* Fix windows build

* If size is 0 allocates a zero-length item and returns a valid pointer to that item

* Update frame allocator to use InterpMethodContextFrame

* Throw OutOfMemory exception if alloc fails

* Revert assert changes

* Update FrameDataAllocator to return nullptr if alloc fails

* Check if infosLen is >0

* Use consistent naming for frame pointers

* Test __SIZEOF_POINTER__ for pointer size checks

* Replace __SIZEOF_POINTER__ with TARGET_64BIT

* Encapsulate FrameDataAllocator structs into class and make them private

* Implement destructor for InterpThreadContext to free FrameDataAllocator

* Move InterpThreadContext instance to the CoreCLR Thread and implement destructor. Inline FrameDataAllocator into InterpThreadContext and ensure allocated memory is released

* Move InterpThreadContext destructor call to OnThreadTerminate

* Refactor Alloc to accept size by value instead of pointer

* Fix typo",1,6,0,correctly manage m_debugwillsynccount when thread exits before it is synchronized (issue_ref)
dotnet/runtime,a59693576068af06faeaf7230fb60db79adf0777,"ILLink : Test API expsure (#114567)

Re-expose `ReconstructedFullTypeName`.  We rely on this in our test framework

Expose `VerifyILOfOtherAssemblies`.  This causes us problems for our tests that verify the old mono BCL.  There's a goofy circular reference with Mono.Security.dll and System.dll which results in references to System.dll with two different PublicKeyTokens.  Exposing this method let's us disable this asserting behavior for our old mono tests",2025-04-22 16:12:48+00:00,Mike Voorhees,0,,,2,4,4,illink : test api expsure (issue_ref)re-expose . we rely on this in our test frameworkexpose . this causes us problems for our tests that verify the old mono bcl. there's a goofy circular reference with mono.security.dll and system.dll which results in references to system.dll with two different publickeytokens. exposing this method let's us disable this asserting behavior for our old mono tests
dotnet/runtime,bb094518e6aaadd70ce21c8ba8a9590271b1c93c,"[WinHTTP] remove unnecessary manual decompression (#114778)

* Remove obsoleted manual decompression that existed only for already unsupported Win 8.1-

* Remove obsolete unit tests",2025-04-22 16:22:00+00:00,Marie Píchová,1,b107e738dd818436291d0a6f8d341db75c4bc4e7,Fix certificate caching timeout in WinHttpHandler (#115144),5,6,218,[winhttp] remove unnecessary manual decompression (issue_ref)* remove obsoleted manual decompression that existed only for already unsupported win 8.1-* remove obsolete unit tests
dotnet/runtime,f23657a953232c4755c3e9d9c8c516f18a9fdcfb,"[LoongArch64] Fix some bugs to make NativeAOT stable. (#114618)

* [LoongArch64] Fix some bugs to make NativeAOT stable.
* Also checked some riskpoints on LA64 with PR#112736.

* restrict 'UnixNativeCodeManager::IsInProlog()' in '#if (defined(TARGET_APPLE) && defined(TARGET_ARM64)) || defined(TARGET_ARM)'.
update src/coreclr/nativeaot/Runtime/loongarch64/WriteBarriers.S

* Update 'RhpCheckedLockCmpXchg' in 'WriteBarriers.S'

* revert the modify of `src/installer/tests/Assets/Projects/HelloWorld/SelfContained.csproj` within PR#114666.",2025-04-22 16:24:40+00:00,Xu Liangyu,1,6123c241c219be108cec9dc895462234fbfb58a3,"[NativeAOT] Fix floating pointer register unwinding (#117588)

Fixes #116276",27,224,352,[loongarch64] fix some bugs to make nativeaot stable. (issue_ref)* [loongarch64] fix some bugs to make nativeaot stable.* also checked some riskpoints on la64 with prissue_ref.* restrict 'unixnativecodemanager::isinprolog()' in '#if (defined(target_apple) && defined(target_arm64)) || defined(target_arm)'.update src/coreclr/nativeaot/runtime/loongarch64/writebarriers.s* update 'rhpcheckedlockcmpxchg' in 'writebarriers.s'* revert the modify of within prissue_ref.
dotnet/runtime,2224669d22aa1f4dd2aa953942ba8945aabfa9e9,"Micro optimizations to improve the performance of EH stackwalking, particularly in the X86 with Funclets model (#114582)

- Implement EHEnumInitFromStackFrameIterator as a SuppressGCTransition QCall and optimize its performance
  - This allows skipping setting hte InlinedCallFrame to indicate that it is an EH frame (as suppress GC transition frames are NOT generated in that situation)
  - On X86 this also allows skipping using an EH prolog for this function
  - Only Update the MethodRegionInfo if there are EH regions to walk
- Improve the codegen and reduce the usage of UpdateRuntimeWrappedExceptions api
  - Previously we would call IsRuntimeWrappedExceptions, which would lazily compute the flag. However, since we can't actually run the lazy computation during EH, we had already forced it to be initialized, so we didn't actually need to have the full lazy computation logic in place.
  - Also, we were setting this flag as we walked the stack frame via SfiInit and SfiNext, but only checkinging it when parsing the EH clause data. Move the computation to the EHEnumInitFromStackFrameIterator api, and only compute the correct version of the flag IF there are clauses to walk.
  - Only Update the IsRuntimeWrappedExceptions flag and the MethodRegionInfo if there are EH regions to walk
  - For reflection emitted modules, always consider the status of this flag to be computed, but if we emit the controlling attribute, adjust the current cached computed value. NOTE: this is a minor breaking change from the previous behavior.
- Improve the performance of AppendExceptionStackFrame slightly be using the variant of GCX_COOP which takes a Thread* instead of getting it from the TLS data.
- Improve the performance of StackTraceInfo::AppendElement
  - It always calls EnsureStackTraceArray which ALSO needs to have a protected GC variable. Instead of doing that locally in EnsureStackTraceArray, instead make the GCPROTECT in EnsureStackTraceArray be a bit larger. This allows avoiding modifying the TLS linked list of GCFrames, as well as avoids needing an x86 EH prolog for EnsureStackTraceArray
  -  Update ExceptionObject::GetStackTrace to use an out of line copy of code to clone the stack trace array in the presence of the multi-threaded scenario. This avoids the EH prolog on X86.
  - Update ExceptionObject::GetStackTrace to avoid needing to regather the current thread, instead taking it as a parameter
  - Change ExceptionObject::GetStackTraceParts to use a faster technique for checking to see if the array is an sbyte array or an object[].
- Update NotifyFunctionEnter to check CORProfileTrackExceptions before calling the various profiler reporting functions. This allows the check to happen only once instead of 4 times, and also allowed me to outline some logic so that the function didn't need an EH prolog on X86
- For handling of the m_emptyDebuggerExState on the ThreadExceptionState object, move that into a global static variable to improve the performance of calls of the ThreadExceptionState::GetDebuggerState api, and add a new ThreadExceptionState::SetDebuggerIndicatedFramePointer api to avoid even touching the empty debugger state
- Refactor the EECodeInfo::DecodeGCHdrInfo function into a fast inlineable path, and a slow path that does a lot of work.",2025-04-22 16:28:20+00:00,David Wrighton,1,b90e4e3a72d8a90569dd844de07a0b843563f1a6,"Fix inconsistent newline format when logging exceptions to console. (#114692)

* Fix inconsistent newline format when logging exceptions to console.

The introduction of minipal_log_write API's have flushed out some
inconsistency in newline format used on Windows. Previously the
Windows implementation logged exceptions to console using WriteFile
together with STD_ERR_HANDLE. It turns out that the file mode of this
handle is binary, while the file mode for regular stdout/stderr is
text mode. minipal_log_write API uses underlying _write instead of
WriteFile and the fd associated with stdout/stderr, but since they
are in text mode, pre-formatted data intended for binary output
will expand \r\n to \r\r\n that could cause side effects due to
additional \r character in the stream. The use of WriteFile handled
this case, but we also mixed regular \n using the same API, that
won't be expanded to \r\n when written to a file in binary mode
leaving us with output using different line endings through the same
logging.

Normally all logging performed from native code use \n and expects
it to be replaced to \r\n on Windows as part of logging through
a file in text mode. Some data formatted in managed code intended for
output is already pre-formatted, using \r\n, intended for files in
binary mode. One area where we mix line ending formats is the logging
of unhandled exception call stacks, where we currently mix formatted
newlines \r\n with \n.

This fix implement support in minipal_log_write to accept a new flag
indicating that logging should be done through binary file mode,
and since this is the default on none Windows platforms its a noop on
all platforms except Windows. All logging that currently logs strings
coming from managed code will be logged using binary mode, making sure
pre-formatted \r\n won't be re-formatted.",16,190,98,"micro optimizations to improve the performance of eh stackwalking, particularly in the x86 with funclets model (issue_ref)- implement ehenuminitfromstackframeiterator as a suppressgctransition qcall and optimize its performance - this allows skipping setting hte inlinedcallframe to indicate that it is an eh frame (as suppress gc transition frames are not generated in that situation) - on x86 this also allows skipping using an eh prolog for this function - only update the methodregioninfo if there are eh regions to walk- improve the codegen and reduce the usage of updateruntimewrappedexceptions api - previously we would call isruntimewrappedexceptions, which would lazily compute the flag. however, since we can't actually run the lazy computation during eh, we had already forced it to be initialized, so we didn't actually need to have the full lazy computation logic in place. - also, we were setting this flag as we walked the stack frame via sfiinit and sfinext, but only checkinging it when parsing the eh clause data. move the computation to the ehenuminitfromstackframeiterator api, and only compute the correct version of the flag if there are clauses to walk. - only update the isruntimewrappedexceptions flag and the methodregioninfo if there are eh regions to walk - for reflection emitted modules, always consider the status of this flag to be computed, but if we emit the controlling attribute, adjust the current cached computed value. note: this is a minor breaking change from the previous behavior.- improve the performance of appendexceptionstackframe slightly be using the variant of gcx_coop which takes a thread* instead of getting it from the tls data.- improve the performance of stacktraceinfo::appendelement - it always calls ensurestacktracearray which also needs to have a protected gc variable. instead of doing that locally in ensurestacktracearray, instead make the gcprotect in ensurestacktracearray be a bit larger. this allows avoiding modifying the tls linked list of gcframes, as well as avoids needing an x86 eh prolog for ensurestacktracearray - update exceptionobject::getstacktrace to use an out of line copy of code to clone the stack trace array in the presence of the multi-threaded scenario. this avoids the eh prolog on x86. - update exceptionobject::getstacktrace to avoid needing to regather the current thread, instead taking it as a parameter - change exceptionobject::getstacktraceparts to use a faster technique for checking to see if the array is an sbyte array or an object[].- update notifyfunctionenter to check corprofiletrackexceptions before calling the various profiler reporting functions. this allows the check to happen only once instead of 4 times, and also allowed me to outline some logic so that the function didn't need an eh prolog on x86- for handling of the m_emptydebuggerexstate on the threadexceptionstate object, move that into a global static variable to improve the performance of calls of the threadexceptionstate::getdebuggerstate api, and add a new threadexceptionstate::setdebuggerindicatedframepointer api to avoid even touching the empty debugger state- refactor the eecodeinfo::decodegchdrinfo function into a fast inlineable path, and a slow path that does a lot of work."
dotnet/runtime,a078c1883dafefd0fa5e3022847640128eedd6d8,Rename TryGetReadyToRunHeader to TryGetCompositeReadyToRunHeader (#114886),2025-04-22 17:15:29+00:00,Jan Kotas,0,,,3,5,5,rename trygetreadytorunheader to trygetcompositereadytorunheader (issue_ref)
dotnet/runtime,cc2406f8d07de1a7f4976b25298a1fb75a1125ac,PersistedAssemblyBuilder: local tokens emitted incorrectly because of the scoping levels (#114758),2025-04-22 17:31:09+00:00,Buyaa Namnan,0,,,2,84,0,persistedassemblybuilder: local tokens emitted incorrectly because of the scoping levels (issue_ref)
dotnet/runtime,283face876c3ab6c284858570cce7b9c2d958153,Add runtimeconfig switch for Thread_UseAllCpuGroups/Thread_AssignCpuGroups (#114799),2025-04-22 19:20:48+00:00,Eduardo Velarde,0,,,1,2,2,add runtimeconfig switch for thread_useallcpugroups/thread_assigncpugroups (issue_ref)
dotnet/runtime,f5b35200f5bd082408098e8a511c0e9253bed8bd,Support Rate Limiting Trace Sampling (#114880),2025-04-22 19:53:36+00:00,Tarek Mahmoud Sayed,0,,,6,165,0,support rate limiting trace sampling (issue_ref)
dotnet/runtime,780169443f66bab7689266dd4c818bc2d500ea50,"Update LoopHeadPred to point to right loop IG (#114882)

* Update LoopHeadPred to point to right loop IG

* Add #if FEATURE_LOOP_ALIGN

* jit format",2025-04-22 20:27:40+00:00,Kunal Pathak,0,,,2,19,1,update loopheadpred to point to right loop ig (issue_ref)* update loopheadpred to point to right loop ig* add #if feature_loop_align* jit format
dotnet/runtime,b90e4e3a72d8a90569dd844de07a0b843563f1a6,"Fix inconsistent newline format when logging exceptions to console. (#114692)

* Fix inconsistent newline format when logging exceptions to console.

The introduction of minipal_log_write API's have flushed out some
inconsistency in newline format used on Windows. Previously the
Windows implementation logged exceptions to console using WriteFile
together with STD_ERR_HANDLE. It turns out that the file mode of this
handle is binary, while the file mode for regular stdout/stderr is
text mode. minipal_log_write API uses underlying _write instead of
WriteFile and the fd associated with stdout/stderr, but since they
are in text mode, pre-formatted data intended for binary output
will expand \r\n to \r\r\n that could cause side effects due to
additional \r character in the stream. The use of WriteFile handled
this case, but we also mixed regular \n using the same API, that
won't be expanded to \r\n when written to a file in binary mode
leaving us with output using different line endings through the same
logging.

Normally all logging performed from native code use \n and expects
it to be replaced to \r\n on Windows as part of logging through
a file in text mode. Some data formatted in managed code intended for
output is already pre-formatted, using \r\n, intended for files in
binary mode. One area where we mix line ending formats is the logging
of unhandled exception call stacks, where we currently mix formatted
newlines \r\n with \n.

This fix implement support in minipal_log_write to accept a new flag
indicating that logging should be done through binary file mode,
and since this is the default on none Windows platforms its a noop on
all platforms except Windows. All logging that currently logs strings
coming from managed code will be logged using binary mode, making sure
pre-formatted \r\n won't be re-formatted.",2025-04-22 21:22:06+00:00,Johan Lorensson,1,a2779f61c0d0f00c12be99acd82011bb9e76fdbf,"[X86/Funclets] Fix uninitalized values in SoftwareExceptionFrame::UpdateContextFromTransitionBlock (#115065)

This could lead to -1 offset inadvertently not applied in `SfiInit` for control PC. As a consequence a `throw` at the very last instruction of `try` block may not be matched correctly.",2,47,15,"fix inconsistent newline format when logging exceptions to console. (issue_ref)* fix inconsistent newline format when logging exceptions to console.the introduction of minipal_log_write api's have flushed out someinconsistency in newline format used on windows. previously thewindows implementation logged exceptions to console using writefiletogether with std_err_handle. it turns out that the file mode of thishandle is binary, while the file mode for regular stdout/stderr istext mode. minipal_log_write api uses underlying _write instead ofwritefile and the fd associated with stdout/stderr, but since theyare in text mode, pre-formatted data intended for binary outputwill expand \r\n to \r\r\n that could cause side effects due toadditional \r character in the stream. the use of writefile handledthis case, but we also mixed regular \n using the same api, thatwon't be expanded to \r\n when written to a file in binary modeleaving us with output using different line endings through the samelogging.normally all logging performed from native code use \n and expectsit to be replaced to \r\n on windows as part of logging througha file in text mode. some data formatted in managed code intended foroutput is already pre-formatted, using \r\n, intended for files inbinary mode. one area where we mix line ending formats is the loggingof unhandled exception call stacks, where we currently mix formattednewlines \r\n with \n.this fix implement support in minipal_log_write to accept a new flagindicating that logging should be done through binary file mode,and since this is the default on none windows platforms its a noop onall platforms except windows. all logging that currently logs stringscoming from managed code will be logged using binary mode, making surepre-formatted \r\n won't be re-formatted."
dotnet/runtime,31289efa35151a4e60dcd2e6471c51f620f78c28,"Fix Baggage order in W3C propagator extraction (#114926)

* Fix Baggage order in W3C propagator extraction

* Feedback",2025-04-22 22:53:09+00:00,Tarek Mahmoud Sayed,1,09801ba3553defcca2845275e9d3a3e7c0b25592,"Fix parsing trace parent in W3CPropagator (#117530)

* Fix parsing trace parent in W3CPropagator

* Fix typo

* Support non-00 version",2,7,4,fix baggage order in w3c propagator extraction (issue_ref)* fix baggage order in w3c propagator extraction* feedback
dotnet/runtime,e33eb4654d1b1e4c54fb9e92f393879ad6d9559b,Add NIST ACVP 3rd Party Notice,2025-04-22 23:54:27+00:00,Jeremy Barton,1,2d5f1f0165e826ac01745df9f3a390905e282ed3,"Support out of proc Histogram Base 2 Exponential aggregation (#115852)

* Support out of proc Histogram Base 2 Exponential aggregation

* Update src/libraries/System.Diagnostics.DiagnosticSource/src/System/Diagnostics/Metrics/Base2ExponentialHistogramAggregator.cs

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>

* ensure scale in range

* Feedback addressing 1

* Explicity write ""Copyright""

* Apply suggestions from code review

Co-authored-by: Reiley Yang <reyang@microsoft.com>

* Update src/libraries/System.Diagnostics.DiagnosticSource/src/System/Diagnostics/Metrics/CircularBufferBuckets.cs

Co-authored-by: Reiley Yang <reyang@microsoft.com>

* Address the feedback

* fix issue causing failing test

* Refactor metric outer loop tests to separate projects to avoid timeout issues

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>
Co-authored-by: Reiley Yang <reyang@microsoft.com>",1,11,0,add nist acvp 3rd party notice
dotnet/runtime,402e758ac2da0d50b1173317e9674150a2178fd9,Bump main to .NET 10 Preview 5 (#114938),2025-04-23 03:40:02+00:00,Carlos Sánchez López,0,,,1,1,1,bump main to .net 10 preview 5 (issue_ref)
dotnet/runtime,97b50b09b8afb4e594a1b1ccf45b1494bc73e4bb,"JIT: Do not report duplicate EH clauses to VM (#114895)

* JIT: Do not report duplicate EH clauses to VM

* Remove the flags and their usage too

* Remove doc for Duplicated Clauses

* Update JIT-EE GUID

* Update doc for cloned finallys

* Delete COR_ILEXCEPTION_CLAUSE_OFFSETLEN and COR_ILEXCEPTION_CLAUSE_DEPRECATED

* Replace magic value with COR_ILEXCEPTION_CLAUSE_SAMETRY

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-04-23 04:39:18+00:00,Filip Navara,1,a1435f1aeed50722eef3d2e5a1bbf0bc8e98aea1,"JIT: fix ACD EH region removal updates for filters (#115054)

A filter ACD may change region number because some other EH region was
deleted. Handle this properly.

Fixes #114895",13,24,518,jit: do not report duplicate eh clauses to vm (issue_ref)* jit: do not report duplicate eh clauses to vm* remove the flags and their usage too* remove doc for duplicated clauses* update jit-ee guid* update doc for cloned finallys* delete cor_ilexception_clause_offsetlen and cor_ilexception_clause_deprecated* replace magic value with cor_ilexception_clause_sametry---------
dotnet/runtime,628747efaa1db11351ed9a53ed729351721df20c,[browser] Use OverrideHtmlAssetPlaceholders=true in browser template (#113654),2025-04-23 05:08:34+00:00,Marek Fišera,1,56a9de36642a03e45dd14b96b86740e5d442d5a3,"Remove `WasmFingerprintDotnetJs` tests and add `OverrideHtmlAssetPlaceholders` tests (#112859)

* Fix passing information about `WasmFingerprintDotnetJs` value in WBT.

* Uncomment logging - useful in such cases.

* Feedback: no logging when not throwing.

* Revert changes + ove dotnet JS fingerprinting to pure blazor +  add tests for https://github.com/dotnet/sdk/pull/46233.

* Fix the name of property.

* Remove problematic test.

* Fix the assert.

* Missing file update.

* Rename WriteImportMapToHtml to OverrideHtmlAssetPlaceholders.",18,95,52,[browser] use overridehtmlassetplaceholders=true in browser template (issue_ref)
dotnet/runtime,2474c6206b1f3d6f18941d05280c08da68231132,"Delete dead code in the interpreter (#114890)

I think this is now unreachable since the first `if` check would cover this.",2025-04-23 05:31:14+00:00,Michal Strehovský,0,,,1,0,14,delete dead code in the interpreter (issue_ref)i think this is now unreachable since the first check would cover this.
dotnet/runtime,1a8fd540172a8cca877e4800ec43d4a7bd9e2d71,JIT: Avoid overriding argument register with 'jmp' epilog (#114899),2025-04-23 08:39:46+00:00,Jakob Botsch Nielsen,0,,,1,1,1,jit: avoid overriding argument register with 'jmp' epilog (issue_ref)
dotnet/runtime,46ec9de3f6253343f8db730f80f84e65f0a19899,[browser] Use regex to match boot config placeholder (#114897),2025-04-23 08:44:52+00:00,Marek Fišera,0,,,1,6,1,[browser] use regex to match boot config placeholder (issue_ref)
dotnet/runtime,b4517e18a35a0d24a34298c9be4dce8dee703fcf,"[main] Update dependencies from dotnet/hotreload-utils, dotnet/icu, dotnet/runtime-assets, dotnet/sdk (#114852)

* Update dependencies from https://github.com/dotnet/hotreload-utils build 20250414.1

Microsoft.DotNet.HotReload.Utils.Generator.BuildTool
 From Version 10.0.0-alpha.0.25207.1 -> To Version 10.0.0-alpha.0.25214.1

* Update dependencies from https://github.com/dotnet/sdk build 20250420.1

Microsoft.DotNet.ApiCompat.Task , Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport
 From Version 10.0.100-preview.4.25211.22 -> To Version 10.0.100-preview.4.25220.1

* Update dependencies from https://github.com/dotnet/icu build 20250420.2

Microsoft.NETCore.Runtime.ICU.Transport
 From Version 10.0.0-preview.4.25214.1 -> To Version 10.0.0-preview.4.25220.2

* Disable blazor wasm template tests

* Update dependencies from https://github.com/dotnet/icu build 20250422.1

Microsoft.NETCore.Runtime.ICU.Transport
 From Version 10.0.0-preview.4.25214.1 -> To Version 10.0.0-preview.5.25222.1

* Update dependencies from https://github.com/dotnet/runtime-assets build 20250422.1

Microsoft.DotNet.CilStrip.Sources , Microsoft.NET.HostModel.TestData , System.ComponentModel.TypeConverter.TestData , System.Data.Common.TestData , System.Drawing.Common.TestData , System.Formats.Tar.TestData , System.IO.Compression.TestData , System.IO.Packaging.TestData , System.Net.TestData , System.Private.Runtime.UnicodeData , System.Runtime.Numerics.TestData , System.Runtime.TimeZoneData , System.Security.Cryptography.X509Certificates.TestData , System.Text.RegularExpressions.TestData , System.Windows.Extensions.TestData
 From Version 10.0.0-beta.25215.1 -> To Version 10.0.0-beta.25222.1

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Marek Fišera <mara@neptuo.com>
Co-authored-by: Ilona Tomkowicz <32700855+ilonatommy@users.noreply.github.com>",2025-04-23 10:13:58+00:00,dotnet-maestro[bot],0,,,3,59,58,"[main] update dependencies from dotnet/hotreload-utils, dotnet/icu, dotnet/runtime-assets, dotnet/sdk (issue_ref)* update dependencies from build 20250414.1microsoft.dotnet.hotreload.utils.generator.buildtool from version 10.0.0-alpha.0.25207.1 -> to version 10.0.0-alpha.0.25214.1* update dependencies from build 20250420.1microsoft.dotnet.apicompat.task , microsoft.net.workload.emscripten.current.manifest-10.0.100.transport from version 10.0.100-preview.4.25211.22 -> to version 10.0.100-preview.4.25220.1* update dependencies from build 20250420.2microsoft.netcore.runtime.icu.transport from version 10.0.0-preview.4.25214.1 -> to version 10.0.0-preview.4.25220.2* disable blazor wasm template tests* update dependencies from build 20250422.1microsoft.netcore.runtime.icu.transport from version 10.0.0-preview.4.25214.1 -> to version 10.0.0-preview.5.25222.1* update dependencies from build 20250422.1microsoft.dotnet.cilstrip.sources , microsoft.net.hostmodel.testdata , system.componentmodel.typeconverter.testdata , system.data.common.testdata , system.drawing.common.testdata , system.formats.tar.testdata , system.io.compression.testdata , system.io.packaging.testdata , system.net.testdata , system.private.runtime.unicodedata , system.runtime.numerics.testdata , system.runtime.timezonedata , system.security.cryptography.x509certificates.testdata , system.text.regularexpressions.testdata , system.windows.extensions.testdata from version 10.0.0-beta.25215.1 -> to version 10.0.0-beta.25222.1---------"
dotnet/runtime,19a02d53dfe52b570b7d404f964fbc7a4a3472f8,"[cDAC] Handle non-mapped images correctly (#114688)

* allow cDAC to properly read both mapped and flat images using PEReader",2025-04-23 14:45:12+00:00,Max Charlamb,0,,,4,87,59,[cdac] handle non-mapped images correctly (issue_ref)* allow cdac to properly read both mapped and flat images using pereader
dotnet/runtime,5d9f756b54206ceb3f9e54dfa1347bf7724d018f,[browser] Ensure compression targets run after preloading (#114953),2025-04-23 15:03:38+00:00,Marek Fišera,0,,,1,2,0,[browser] ensure compression targets run after preloading (issue_ref)
dotnet/runtime,41796ff0fd2a4a3f2f282563ee35cb5386c9f0f9,Fix non-portable CI builds. (#114949),2025-04-23 15:21:46+00:00,Tom Deseyn,1,16260fb776252ed8ec4c39c980fe1bfb930a73be,"[wasm][coreclr] Make libs subset build (#114548)

* [wasm][coreclr] initial changes for wasm/corecl BCL build

* Make subset libs build without pulling in mono partsg

* Build libs on CI

* Feedback

* Update comment

* Update src/libraries/System.Private.CoreLib/src/System/Environment.Browser.cs

Co-authored-by: kasperk81 <83082615+kasperk81@users.noreply.github.com>

* Feedback

* More feedback

* Fix build

* Fix condition

* Simplify condition in _CoreCLRSupportedOS

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Update corelib solution file to include wasm

---------

Co-authored-by: kasperk81 <83082615+kasperk81@users.noreply.github.com>
Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2,7,1,fix non-portable ci builds. (issue_ref)
dotnet/runtime,3e902ca69bdd82c022354ac9ae0f66a0a36093eb,"WebSocket: observe exceptions in WaitForServerToCloseConnectionAsync (#114689)

Includes a refactor renaming and moving the methods responsible for logging and observing the exceptions. The renaming is for consistency with `HttpConnectionBase.LogExceptions` in `System.Net.Http`.",2025-04-23 17:28:59+00:00,Anton Firszov,0,,,4,94,50,websocket: observe exceptions in waitforservertocloseconnectionasync (issue_ref)includes a refactor renaming and moving the methods responsible for logging and observing the exceptions. the renaming is for consistency with in .
dotnet/runtime,f0b33f54c4e73dd2d72cecbec8907a9e75ee30f9,"Update dependencies from https://github.com/dotnet/command-line-api build 20250422.1 (#114947)

Microsoft.SourceBuild.Intermediate.command-line-api , System.CommandLine
 From Version 0.1.621801 -> To Version 0.1.622201

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-04-23 17:29:58+00:00,dotnet-maestro[bot],0,,,2,5,5,"update dependencies from build 20250422.1 (issue_ref)microsoft.sourcebuild.intermediate.command-line-api , system.commandline from version 0.1.621801 -> to version 0.1.622201"
dotnet/runtime,f8ff1ea65e4aa51f6dcf2f336b057c100005d23a,"Update dependencies from https://github.com/dotnet/roslyn build 20250420.1 (#114857)

Microsoft.SourceBuild.Intermediate.roslyn , Microsoft.CodeAnalysis , Microsoft.CodeAnalysis.Analyzers , Microsoft.CodeAnalysis.CSharp , Microsoft.Net.Compilers.Toolset
 From Version 5.0.0-1.25218.9 -> To Version 5.0.0-1.25220.1

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-04-23 17:30:27+00:00,dotnet-maestro[bot],0,,,2,14,14,"update dependencies from build 20250420.1 (issue_ref)microsoft.sourcebuild.intermediate.roslyn , microsoft.codeanalysis , microsoft.codeanalysis.analyzers , microsoft.codeanalysis.csharp , microsoft.net.compilers.toolset from version 5.0.0-1.25218.9 -> to version 5.0.0-1.25220.1"
dotnet/runtime,72171bf60b0de67bb79cdacab95cd5058a67b42f,"Update dependencies from https://github.com/dotnet/arcade build 20250417.1 (#114853)

Microsoft.SourceBuild.Intermediate.arcade , Microsoft.DotNet.Arcade.Sdk , Microsoft.DotNet.Build.Tasks.Archives , Microsoft.DotNet.Build.Tasks.Feed , Microsoft.DotNet.Build.Tasks.Installers , Microsoft.DotNet.Build.Tasks.Packaging , Microsoft.DotNet.Build.Tasks.TargetFramework , Microsoft.DotNet.Build.Tasks.Templating , Microsoft.DotNet.Build.Tasks.Workloads , Microsoft.DotNet.CodeAnalysis , Microsoft.DotNet.GenAPI , Microsoft.DotNet.GenFacades , Microsoft.DotNet.Helix.Sdk , Microsoft.DotNet.PackageTesting , Microsoft.DotNet.RemoteExecutor , Microsoft.DotNet.SharedFramework.Sdk , Microsoft.DotNet.XliffTasks , Microsoft.DotNet.XUnitAssert , Microsoft.DotNet.XUnitConsoleRunner , Microsoft.DotNet.XUnitExtensions
 From Version 10.0.0-beta.25216.2 -> To Version 10.0.0-beta.25217.1

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-04-23 18:27:09+00:00,dotnet-maestro[bot],0,,,3,58,58,"update dependencies from build 20250417.1 (issue_ref)microsoft.sourcebuild.intermediate.arcade , microsoft.dotnet.arcade.sdk , microsoft.dotnet.build.tasks.archives , microsoft.dotnet.build.tasks.feed , microsoft.dotnet.build.tasks.installers , microsoft.dotnet.build.tasks.packaging , microsoft.dotnet.build.tasks.targetframework , microsoft.dotnet.build.tasks.templating , microsoft.dotnet.build.tasks.workloads , microsoft.dotnet.codeanalysis , microsoft.dotnet.genapi , microsoft.dotnet.genfacades , microsoft.dotnet.helix.sdk , microsoft.dotnet.packagetesting , microsoft.dotnet.remoteexecutor , microsoft.dotnet.sharedframework.sdk , microsoft.dotnet.xlifftasks , microsoft.dotnet.xunitassert , microsoft.dotnet.xunitconsolerunner , microsoft.dotnet.xunitextensions from version 10.0.0-beta.25216.2 -> to version 10.0.0-beta.25217.1"
dotnet/runtime,3da726435f755cb3f1c4c6a48f7536669bda4178,"Document NDK upgrade process (#112885)

The PR documents the process of upgrading the NDK on runtime CI.",2025-04-23 18:41:24+00:00,Jeremi Kurdek,1,2d5c98266b3cc6e70f4b998294f0a226f3011f64,"Improve docs for building & running CoreCLR Android on Windows + WSL (#118672)

* Add command for installing additional tools

* Update CoreCLR Android doc

* Update table of contents

* Rename SDK_VER to ANDROID_CLI_TOOLS_VER

* Bump versions

* Update WSL specific steps

* Fix link

* Bump version",1,35,1,document ndk upgrade process (issue_ref)the pr documents the process of upgrading the ndk on runtime ci.
dotnet/runtime,548f8215d973bf6aeba846745d0e7683f1cb9373,Remove unreliable check in Rate Limiting test (#114963),2025-04-23 18:58:18+00:00,Tarek Mahmoud Sayed,0,,,1,0,3,remove unreliable check in rate limiting test (issue_ref)
dotnet/runtime,e49f3588c823c4755b9cad940a4437f604b98e96,"Delete emit breaks from R2R helper node (#114920)

* Delete emit breaks from R2R helper node

* Update RiscV64ReadyToRunHelperNode.cs",2025-04-23 21:25:30+00:00,Adeel Mujahid,0,,,2,0,6,delete emit breaks from r2r helper node (issue_ref)* delete emit breaks from r2r helper node* update riscv64readytorunhelpernode.cs
dotnet/runtime,8628d398ccb51c208e8d87f0c8a00952e68f4ed3,"Rewrite of System.Numerics.Tensors to allow for more code sharing, various correctness fixes, and stability improvements (#114927)

* Refactor Tensor to be more reusable and validate appropriate state

* Handle Equals, GreaterThan, GreaterThanOrEqual, LessThan, LessThanOrEqual, and the *All/*Any variants

* Many implementations correctly swapped to new form. (#25)

* Refactor Tensor to be more reusable and validate appropriate state

* finishing tensor primitives work

---------

Co-authored-by: Tanner Gooding <tagoo@outlook.com>

* more tensors updates (#26)

* Resolve a few build failures

* Ensure SetSlice and ToString are working as expected

* Tensors lastfew (#27)

* only couple left

* pausing for food

* fixed rented buffer

* squeeze/unsqueeze

* set slice/ split

* only 2 left

* Minor cleanup of the Tensor files

* Ensure that tensor tests are building

* Resolving various build failures due to API compatibility

* Ensure flattendLength is adjusted after the stride is set for that dimension

* Ensure that we set linearLength if -1 is passed in when strides is empty

* Ensure that the first index is correct

* Cleanup to ensure iteration and construction initializes correctly

* Ensure that broadcasting is allowed to be in any stride position

* Have AreCompatible handle empty shapes

* Ensure IndexOutOfRangeException is thrown for invalid indexes

* Ensure that the stride is set to 0 when the length of a dimension is 1, so embedded broadcasting works

* Fixing Broadcasting Loop (#29)

* Fixing Broadcasting Loop

* fixes from pr coments

* squeeze fixed

* unsqueeze

* set slice

* more tensor fies

* Ensure that minimumLinearLength is actually the minimum

* Ensure the rented buffer is cleared

* Fix the AreCompatible checks

* Tensor finishing (#30)

* stack working

* more tensor tests working

* fix factory create tests

* only2 tests left

* Update src/libraries/System.Numerics.Tensors/src/System/Numerics/Tensors/netcore/TensorShape.cs

* Update compatibility suppressions

* transpose working

* reverse working

* Revert the unnecessary sln changes

* Remove an unnecessary using

---------

Co-authored-by: Michael Sharp <51342856+michaelgsharp@users.noreply.github.com>
Co-authored-by: Michael Sharp <misharp@microsoft.com>",2025-04-23 22:37:28+00:00,Tanner Gooding,1,0c6ac9cc12e855b8f364d62f7e388ec0c036d56f,"Minor tensor fixes (#115125)

* minor tensor fixes

* Update src/libraries/System.Numerics.Tensors/src/System/Numerics/Tensors/netcore/Tensor.cs

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>

* Update src/libraries/System.Numerics.Tensors/src/System/Numerics/Tensors/netcore/Tensor.cs

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>

* pr updates

* fixing reshape

* reverting co-pilot suggestions

* added some comments to clarify dimension

* add checked

* fixes from pr comments

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",26,12027,11040,"rewrite of system.numerics.tensors to allow for more code sharing, various correctness fixes, and stability improvements (issue_ref)* refactor tensor to be more reusable and validate appropriate state* handle equals, greaterthan, greaterthanorequal, lessthan, lessthanorequal, and the *all/*any variants* many implementations correctly swapped to new form. (issue_ref)* refactor tensor to be more reusable and validate appropriate state* finishing tensor primitives work---------"
dotnet/runtime,5d3fe140d7565461e02b515a49f3155106048926,"Added missing clearing of pooled arrays (#114545)

* Added missing clearing of pooled arrays

* using Linq's ToArray method

* added Return(T[], int) overload for ArrayPool",2025-04-24 00:20:05+00:00,hendrik,1,1687ae3f0079662737e367bd7dd3f15722d9c1c0,"Fix metric tests timeout issue (#117630)

* Fix metric tests timeout issue

* Update src/libraries/System.Diagnostics.DiagnosticSource/tests/MetricsTests.cs

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>

* Fix the RemoteInvokeOptions initialization

* mark the propert as readonly

* Ensure RemoteExecutor.IsSupported before creating RemoteInvokeOptions

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",5,46,64,"added missing clearing of pooled arrays (issue_ref)* added missing clearing of pooled arrays* using linq's toarray method* added return(t[], int) overload for arraypool"
dotnet/runtime,199ae8820492f05169529da1f262e9736007448a,"Make specifying just `DllImportSearchPath.AssemblyDirectory` only search in assembly directory (#114756)

Currently, if `DllImportSearchPath.AssemblyDirectory` is the only flag specified as the search path, the runtime looks in the assembly directory first, then falls back to the OS search behaviour. This is how the flag was designed and has behaved for its existence, but has caused confusion in the past. The current behaviour is inconsistent with how flags are usually used and also leaves the developer without a simple way to specify that only the assembly is desired.

This change updates coreclr, mono, and nativeaot to treat specifying only `DllImportSearchPath.AssemblyDirectory` as only searching the assembly directory - no fallback to the OS search behaviour.",2025-04-24 03:32:56+00:00,Elinor Fung,0,,,6,69,42,"make specifying just only search in assembly directory (issue_ref)currently, if is the only flag specified as the search path, the runtime looks in the assembly directory first, then falls back to the os search behaviour. this is how the flag was designed and has behaved for its existence, but has caused confusion in the past. the current behaviour is inconsistent with how flags are usually used and also leaves the developer without a simple way to specify that only the assembly is desired.this change updates coreclr, mono, and nativeaot to treat specifying only as only searching the assembly directory - no fallback to the os search behaviour."
dotnet/runtime,235e8aa9523fc68a7be84d06a915e3b5be0f58a9,Don't expose TrustedCertificatesDirectory() and StartNewTlsSessionContext() to NetFx (#113963),2025-04-24 14:41:32+00:00,Steve Harter,0,,,1,4,0,don't expose trustedcertificatesdirectory() and startnewtlssessioncontext() to netfx (issue_ref)
dotnet/runtime,0ac2caf41a88c56a287ab790e92eaf3ccf846fc8,"Tar: Adjust the way we write GNU longlink and longpath metadata (#114940)

* Fix 3 GNU longlink and longpath bugs

The Tar entry types Longlink and Longpath, which are exclusive to the GNU format, are metadata entries used to store longer-than-expected link or name strings (respectively). They precede their actual entry, and they are not visible to the user, only the data they hold is visible.

Most of the regular header metadata in this metadata entries is not relevant, but we need to make sure it is well formed so other tools can read them properly.

There are 3 fields that were not getting their values stored as expected by other tools:

- The mtime, ctime and atime fields need to be set to the Unix Epoch so it shows up as zeros (0x30) by default. We were storing them as null (0x0) characters instead. For consistency, if a regular entry happens to get its mtime set to the Epoch, it should also be shown as zeros (0x30).
- The uid, gid, uname and gname fields were not being set. These fields aren't really important in a metadata entry, but other tools set this to the default value (uid=gid=0 and uname=gname=root). Based on the fact that 'a value' is preferred for these fields, we can set them to the same value that the real entry has (not root).
- The long text value (either link or name) should be null terminated, and this extra character should be counted in the size of the longpath. The library libdpkg, used by the dpkg-deb tool in Debian, now expects a null terminator in longlink and longpath data starting in Debian 13. Without the terminator, these entries are considered malformed.

* Test to check mtime null values when set to UnixEpoch.

* Make sure empty uid and gid are written as '0' chars.

* Adapt existing tests that check atime and ctime so that they also check those values in the LongLink and LongPath stream bytes themselves.
Also should check uid=gid=0 and the copying of uname and gname into the LongLink/LongPath entries.
Also should confirm that the data length in LongLink and LongPath entries is counting a null terminator in the data.

* Address feedback: set to 0x30 the fields that expect octal and their value is 0 (except the last char). Adjust the new tests to take care of that.

* Update the checksum tests

* Delete prefill line.

* Bring back the if branches instead of a Math.Max. Make sure to also apply the if check >=0 to mode. Adjust tests to verify mode as well.

* No need for async MemoryStream.WriteAsync (it calls Write internally).

* Delete temp test.",2025-04-24 15:49:11+00:00,Carlos Sánchez López,1,bd3ff5d26379616e9495ab75f5ee4a267e46e087,"Tar: Fix 3 bugs (#115211)

atime and ctime are problematic fields because the GNU spec decided to write them in the header location where other formats expect to find the prefix field. This causes other tools to consider our entries malformed when we write those two values (the filenames were being prefixed with the octal bytes of the atime and/or ctime). In previous fixes we were being conservative and setting the value to zeros, but that wasn't enough. The proper fix is to not set these two fields to default(DateTime.MinValue) by default and translate that value internally to null bytes. There are only two cases where we will write an actual value for atime and ctime:
  - When the user sets them manually.
  - When writing with TarWriter a GNU entry that came from another archive (using a TarReader), and the entry happens to have these values set.

The checksum was being written with an extra trailing null byte. The spec indicates that the checksum field needs to be written in octal, have leading zero characters, and end with a null byte and a space. When we were internally converting the decimal value to octal, the returned span was getting a null char added at the end. This was not necessary for checksum, but it is necessary for other fields.

In the GNU format, if the name field was 100 chars in length including the terminating null char, we were writing a GNU LongPath entry to store that long name field. The bug was that other formats don't count the null terminating character towards these 100 fields. This was causing us to write extra LongPath entries that would increase the size of the archive unnecessarily. The fix is to exclude the nullchar from that count, and if the length is exactly 100 chars, write name in the regular header field, no extra entries needed.",3,891,681,"tar: adjust the way we write gnu longlink and longpath metadata (issue_ref)* fix 3 gnu longlink and longpath bugsthe tar entry types longlink and longpath, which are exclusive to the gnu format, are metadata entries used to store longer-than-expected link or name strings (respectively). they precede their actual entry, and they are not visible to the user, only the data they hold is visible.most of the regular header metadata in this metadata entries is not relevant, but we need to make sure it is well formed so other tools can read them properly.there are 3 fields that were not getting their values stored as expected by other tools:- the mtime, ctime and atime fields need to be set to the unix epoch so it shows up as zeros (0x30) by default. we were storing them as null (0x0) characters instead. for consistency, if a regular entry happens to get its mtime set to the epoch, it should also be shown as zeros (0x30).- the uid, gid, uname and gname fields were not being set. these fields aren't really important in a metadata entry, but other tools set this to the default value (uid=gid=0 and uname=gname=root). based on the fact that 'a value' is preferred for these fields, we can set them to the same value that the real entry has (not root).- the long text value (either link or name) should be null terminated, and this extra character should be counted in the size of the longpath. the library libdpkg, used by the dpkg-deb tool in debian, now expects a null terminator in longlink and longpath data starting in debian 13. without the terminator, these entries are considered malformed.* test to check mtime null values when set to unixepoch.* make sure empty uid and gid are written as '0' chars.* adapt existing tests that check atime and ctime so that they also check those values in the longlink and longpath stream bytes themselves.also should check uid=gid=0 and the copying of uname and gname into the longlink/longpath entries.also should confirm that the data length in longlink and longpath entries is counting a null terminator in the data.* address feedback: set to 0x30 the fields that expect octal and their value is 0 (except the last char). adjust the new tests to take care of that.* update the checksum tests* delete prefill line.* bring back the if branches instead of a math.max. make sure to also apply the if check >=0 to mode. adjust tests to verify mode as well.* no need for async memorystream.writeasync (it calls write internally).* delete temp test."
dotnet/runtime,f639475e09931ea1c2ac6ad93bfeb83c640a1254,"[main] Source code updates from dotnet/dotnet (#114990)

* Update dependencies from https://github.com/dotnet/dotnet

* Move properties

* Disable WorkloadsTestPreviousVersions for now

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Alexander Köplinger <alex.koeplinger@outlook.com>",2025-04-24 17:14:50+00:00,dotnet-maestro[bot],0,,,12,140,138,[main] source code updates from dotnet/dotnet (issue_ref)* update dependencies from * move properties* disable workloadstestpreviousversions for now---------
dotnet/runtime,c6ad0a8455f4975d883f0044e4e37681dab5b560,"[wasm] Try out a PackedSimd WideningLoader (#114811)

* Try out a PackedSimd WideningLoader",2025-04-24 18:39:00+00:00,Larry Ewing,0,,,1,6,0,[wasm] try out a packedsimd wideningloader (issue_ref)* try out a packedsimd wideningloader
dotnet/runtime,cc777635b80459ab2ca8777f84c5cdeeac3e0edd,"Add support of System.Uri to UrlAttribute (#114992)

* refactor(#71008): Apply some modern C# syntax to ""UrlAttribute"".

* feat(#71008): Add Uri support.

---------

Co-authored-by: Maksim Golev <mgolev@htc-cs.ru>",2025-04-24 18:44:30+00:00,Maksim Golev,1,4a75beabb6b218ced9626c466206b32b299e304a,"Fix UrlAttribute handling of relative Uris (#115234)

* Update UrlAttribute.cs

* Update UrlAttributeTests.cs

* Fix the test",2,26,7,"add support of system.uri to urlattribute (issue_ref)* refactor(issue_ref): apply some modern c# syntax to ""urlattribute"".* feat(issue_ref): add uri support.---------"
dotnet/runtime,45a4cc2e583af113b3a1f7e458c1dec7a06c25ba,"JIT: revised fix for fp division issue in profile synthesis (#115005)

The previous fix #113396 could still leave us trying to evaluate 0.0/0.0,
which causes an invalid FP operation exception.

Make sure the divisor is non-zero.",2025-04-24 23:08:04+00:00,Andy Ayers,1,f18be588ae92f57094de6993e0231fbb1c9aac90,"JIT: Decrease Gauss-Seidel stop residual (#115150)

Fixes #115122.",1,3,8,"jit: revised fix for fp division issue in profile synthesis (issue_ref)the previous fix issue_ref could still leave us trying to evaluate 0.0/0.0,which causes an invalid fp operation exception.make sure the divisor is non-zero."
dotnet/runtime,5314b8c0722096ddac5840efc46451850820c134,Refactor SLH-DSA tests (#114981),2025-04-24 23:41:34+00:00,Pranav Senthilnathan,0,,,21,870,729,refactor slh-dsa tests (issue_ref)
dotnet/runtime,ada79daee8b56e28a541553dcd46954013c6c332,"Add language slug (#114984)

* add language slug

* Small addition",2025-04-25 00:53:10+00:00,Genevieve Warren,0,,,1,6,3,add language slug (issue_ref)* add language slug* small addition
dotnet/runtime,dc0fa5fba4cacdbd36b3e573e520fb7dd9b21842,Change ImportEncryptedPkcs8PrivateKey parameter from ReadOnlySpan to array,2025-04-25 01:01:44+00:00,Kevin Jones,1,bf37cde9efeeddde976065def9695336edc1379e,"ML-KEM: Fix-up ASN.1 reading and writing logic

This addresses a couple of validation deficiencies when loading ASN.1 content. This ensures invalid ASN.1 receives the proper exception and that SubjectPublicKeyInfo imports do not permit trailing data.

For PKCS#8 export, we more reliably clear buffers and handle incorrectly implemented exports when the amount written is negative.",3,15,4,change importencryptedpkcs8privatekey parameter from readonlyspan to array
dotnet/runtime,0583b0c0f56f107335f7ae976920e947bb8b77f8,Prepend SysRoot to lib search path on freebsd (#115035),2025-04-25 05:53:06+00:00,Adeel Mujahid,0,,,1,2,2,prepend sysroot to lib search path on freebsd (issue_ref)
dotnet/runtime,16260fb776252ed8ec4c39c980fe1bfb930a73be,"[wasm][coreclr] Make libs subset build (#114548)

* [wasm][coreclr] initial changes for wasm/corecl BCL build

* Make subset libs build without pulling in mono partsg

* Build libs on CI

* Feedback

* Update comment

* Update src/libraries/System.Private.CoreLib/src/System/Environment.Browser.cs

Co-authored-by: kasperk81 <83082615+kasperk81@users.noreply.github.com>

* Feedback

* More feedback

* Fix build

* Fix condition

* Simplify condition in _CoreCLRSupportedOS

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Update corelib solution file to include wasm

---------

Co-authored-by: kasperk81 <83082615+kasperk81@users.noreply.github.com>
Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-04-25 06:08:43+00:00,Radek Doulik,1,9e3e69e7b7cd14ea46b451236b47f446b318d179,[wasm] Fix MT build (#115050),13,112,18,[wasm][coreclr] make libs subset build (issue_ref)* [wasm][coreclr] initial changes for wasm/corecl bcl build* make subset libs build without pulling in mono partsg* build libs on ci* feedback* update comment* update src/libraries/system.private.corelib/src/system/environment.browser.cs
dotnet/runtime,42fec5761b71383e97981ce2932c6962d83747e4,[browser] disable Wasm.Browser.EventPipe.Sample (#115000),2025-04-25 07:23:57+00:00,Pavel Savara,0,,,1,5,0,[browser] disable wasm.browser.eventpipe.sample (issue_ref)
dotnet/runtime,87bf42dc36e3eb97530d6bd7be1ce1ac17f8667c,"HTTP/3: Eliminate near-zero ""wait for connection"" telemetry signals (#114083)

* HTTP/3: Eliminate near-zero ""wait for connection"" telemetry signals

* undo unintentional change

* rename variable

* improve language

* Whether to start an activity or not should be decided when reserving a stream.

* tests

* allow _availableRequestStreamsCount to go below zero when EnableMultipleHttp3Connections is false

* H3ConnectionFailure_TimeInQueueRecorded

* simplify code

* revert method rename

* fix after merge

* make the trimmer happy

---------

Co-authored-by: Marie Píchová <11718369+ManickaP@users.noreply.github.com>",2025-04-25 08:35:12+00:00,Anton Firszov,1,ecdfb14194fce9462a612733c579fc6e55ffabe7,"Allow trimming out HTTP3 support (#117012)

Fixes #77420.

This is a meaningful saving to leave on the table. For following app:

```csharp
Console.WriteLine(new HttpClient().GetStringAsync(""https://bing.com"").Result);
```

PublishAot without this switch: 4.91 MB
PublishAot with this switch: 4.14 MB

We might even go as far as disabling HTTP3 on native AOT by default since #73290 reached the dreaded Future milestone.",7,239,45,"http/3: eliminate near-zero ""wait for connection"" telemetry signals (issue_ref)* http/3: eliminate near-zero ""wait for connection"" telemetry signals* undo unintentional change* rename variable* improve language* whether to start an activity or not should be decided when reserving a stream.* tests* allow _availablerequeststreamscount to go below zero when enablemultiplehttp3connections is false* h3connectionfailure_timeinqueuerecorded* simplify code* revert method rename* fix after merge* make the trimmer happy---------"
dotnet/runtime,957aaac995147595a1f048418220b76c91942f3d,"[cdac] Create transport package and rename the native cdac reader library (#114812)

This change adds new cdac transport packages that are built for Windows, MacOS, and Linux. Each package contains a host specific native cdac library that is meant to ride along with various diagnostics tools.

The native library that is part of the transport package was renamed from 'cdacreader' to 'mscordaccore_universal'.
 
Contributes to https://github.com/dotnet/runtime/issues/108720



---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-04-25 11:17:14+00:00,Steve Pfister,1,54f1fb1b6d4a3e9d9066dd002484f2c63b94b6f2,"[cDAC] Fix method table slot lookup (#115057)

* Apply pointer size correctly",245,67,33,"[cdac] create transport package and rename the native cdac reader library (issue_ref)this change adds new cdac transport packages that are built for windows, macos, and linux. each package contains a host specific native cdac library that is meant to ride along with various diagnostics tools.the native library that is part of the transport package was renamed from 'cdacreader' to 'mscordaccore_universal'. contributes to ---------"
dotnet/runtime,6d5f8e45a0ddbdafe345a285cfbd2599d5a72181,"Update dependencies from https://github.com/dotnet/dotnet (#115034)

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-04-25 11:38:41+00:00,dotnet-maestro[bot],0,,,3,92,92,update dependencies from (issue_ref)
dotnet/runtime,5d42918cebad7a7863b7231375bb5bf494ffb3a0,"Do not rethrow from SocketsTestServerAPM.OnAccept (#114964)

* Do not rethrow from SocketTestServerAPM.OnAccept

* Update src/libraries/Common/tests/System/Net/Sockets/SocketTestServerAPM.cs

Co-authored-by: Miha Zupan <mihazupan.zupan1@gmail.com>

* Update src/libraries/Common/tests/System/Net/Sockets/SocketTestServerAPM.cs

---------

Co-authored-by: Miha Zupan <mihazupan.zupan1@gmail.com>",2025-04-25 12:01:11+00:00,Radek Zikmund,0,,,1,3,18,do not rethrow from socketstestserverapm.onaccept (issue_ref)* do not rethrow from sockettestserverapm.onaccept* update src/libraries/common/tests/system/net/sockets/sockettestserverapm.cs
dotnet/runtime,5a0865c7c2ff6b7310d619a0aff376f3b45cb57c,"JIT: fix issues in field-wise escape analysis (#114974)

Two fixes:
* we can't retype implicit byref gc struct params, as their GC info is reported by the caller.
Instead we must mark them as escaping.
* when retyping GT_STOREIND we should always use the stored data's new type

Fixes #111922.",2025-04-25 14:10:11+00:00,Andy Ayers,1,4158fca8fc562796170dd451d132ab3d02ecc804,"JIT: revise may/must point to stack analysis (#115080)

Keep track of locals that may point to the heap as well as locals that
may point to the stack.

The set of definitely stack-pointing locals is then the difference in
these two sets. This handles the ""cyclic"" case where stack pointing locals
are assigned to one another.

Fixes #115017",3,134,3,jit: fix issues in field-wise escape analysis (issue_ref)two
dotnet/runtime,8c5d06f1bc46b93400912e664798e381d7b1b0d8,"Update dependencies from https://github.com/dotnet/xharness build 20250425.1 (#115044)

Microsoft.DotNet.XHarness.CLI , Microsoft.DotNet.XHarness.TestRunners.Common , Microsoft.DotNet.XHarness.TestRunners.Xunit
 From Version 10.0.0-prerelease.25214.3 -> To Version 10.0.0-prerelease.25225.1

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-04-25 14:33:23+00:00,dotnet-maestro[bot],0,,,3,10,10,"update dependencies from build 20250425.1 (issue_ref)microsoft.dotnet.xharness.cli , microsoft.dotnet.xharness.testrunners.common , microsoft.dotnet.xharness.testrunners.xunit from version 10.0.0-prerelease.25214.3 -> to version 10.0.0-prerelease.25225.1"
dotnet/runtime,dd08055f12b33180443a3fe97837d8a45a4699b9,"Cleanup Microsoft.DotNet.VersionTools.Tasks, it got removed from arcade (#115046)

It should be unused.",2025-04-25 14:51:06+00:00,Alexander Köplinger,0,,,3,0,15,"cleanup microsoft.dotnet.versiontools.tasks, it got removed from arcade (issue_ref)it should be unused."
dotnet/runtime,5e48524725e71d61938b520c5ce9c4b8c7ab80e3,"Fix Idn failing tests (#115018)

* Fix Idn failing tests

* Minor fix",2025-04-25 15:40:33+00:00,Tarek Mahmoud Sayed,1,54dbfa7c3f16e6a1d0b5b364340173104141bac6,Fix IDN Test pn Linux (#115121),1,2,2,fix idn failing tests (issue_ref)* fix idn failing tests* minor fix
dotnet/runtime,3eef331e5b402cef529d18d5f88e3ad742a9cf3a,"[cdac] Nits follow up from transport package PR (#115047)

Follow up from https://github.com/dotnet/runtime/pull/114812#discussion_r2059214559",2025-04-25 16:45:29+00:00,Steve Pfister,1,a072ef1a62a9f94bb90f0c5989a264d79f69d3df,"[wasm coreclr] Keep primary flavor mono for browser builds (#115059)

* [wasm coreclr] Keep primary flavor mono for browser builds

This should fix the official build

* Do not build runtime pack for wasm on clr yet",3,5,5,[cdac] nits follow up from transport package pr (issue_ref)follow up from #discussion_r2059214559
dotnet/runtime,f2c47e1a55bc01d3eed890c59367136a68df0ec6,"Add link to Android doc (#114977)

* Add link to Android doc

* Update docs/project/os-onboarding.md

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-04-25 22:44:58+00:00,Rich Lander,0,,,1,3,1,add link to android doc (issue_ref)* add link to android doc* update docs/project/os-onboarding.md
dotnet/runtime,9843ca20418236482109bff438a1ed59dbbcb7c0,Replace DefaultAzureCredential => AzureCliCredential (#115067),2025-04-26 00:00:03+00:00,Kunal Pathak,0,,,3,11,11,replace defaultazurecredential => azureclicredential (issue_ref)
dotnet/runtime,c88106a2332975c409db41f7386ba57a169f28dc,"Interpreter GC info stage 2: Generate empty GC info and add baseline implementation of EnumGcRefs (#113948)

Modify GcInfoEncoder and its sibling files so that they can be successfully linked into the interpreter module; added new gcinfohelpers.h file with support code and macros
Add new InterpreterGcInfoEncoder and InterpreterGcInfoDecoder
Link gcinfo into the interpreter so the encoder and decoder are available
Add placeholder implementation of EnumGcRefs for the interpreter, modeled on the existing one for the JIT.
Add placeholder interp opcode that triggers a GC, so that we can easily test gcinfo and stackwalking in various interpreter scenarios.",2025-04-26 00:52:38+00:00,Katelyn Gadd,1,b32d486172e02cee7d92466bb9bd4adf9ee7ff05,"Enable CoreCLR/tvOS build (#111804)

* Enable CoreCLR/tvOS build

* #import -> #include

* Fix Linux build

* Fix merge",24,499,106,"interpreter gc info stage 2: generate empty gc info and add baseline implementation of enumgcrefs (issue_ref)modify gcinfoencoder and its sibling files so that they can be successfully linked into the interpreter module; added new gcinfohelpers.h file with support code and macrosadd new interpretergcinfoencoder and interpretergcinfodecoderlink gcinfo into the interpreter so the encoder and decoder are availableadd placeholder implementation of enumgcrefs for the interpreter, modeled on the existing one for the jit.add placeholder interp opcode that triggers a gc, so that we can easily test gcinfo and stackwalking in various interpreter scenarios."
dotnet/runtime,4dfeb95b27029e68e282321ffb23609581947f2a,Delete redundant gcc-toolchain flag (#115073),2025-04-26 05:20:39+00:00,Adeel Mujahid,0,,,1,0,1,delete redundant gcc-toolchain flag (issue_ref)
dotnet/runtime,68a1b4a137ba3d9e08fe0d84be107e3ec176b878,"Disable ctor calls on classes marked with `ComImport` when COM interop feature isn't enabled. (#115009)

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-04-26 10:36:56+00:00,Aaron Robinson,0,,,2,34,5,disable ctor calls on classes marked with when com interop feature isn't enabled. (issue_ref)
dotnet/runtime,1a7343c82afe5d8f527d51b7946900640b7d6b03,Account for CompilationMappingAttribute supporting multiple declarations. (#114961),2025-04-26 11:59:11+00:00,Eirik Tsarpalis,0,,,2,24,2,account for compilationmappingattribute supporting multiple declarations. (issue_ref)
dotnet/runtime,77f71dcf88118a22beb8a12aaf9343d88f4236cb,"Update dependencies from https://github.com/dotnet/dotnet (#115072)

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-04-26 19:47:41+00:00,dotnet-maestro[bot],0,,,6,98,97,update dependencies from (issue_ref)
dotnet/runtime,cb4581af6ece55da6249fd6f5c296acc2bd6d626,"Cleanup some unused code and signature (#112905)

* EventArgs and EventHandler

* StringObject::CaseInsensitiveCompHelper

* AllocateCharArray

---------

Co-authored-by: Manish Godse <61718172+mangod9@users.noreply.github.com>
Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-04-26 23:25:07+00:00,Huo Yaoyuan,1,dea4f979a7a5f47222892df985f4651c9a45fbcc,"[RuntimeAsync] Merge from labs, all except JIT (#114675)

This PR includes everything from the runtimelab implementation of Runtime Async feature, except: JIT changes and tests.
Some changes in between VM and JIT are hard to separate, so included here as well.

The main effect of the VM changes is classification of methods by MethodReturnKind. We recognize methods that return Task/ValueTask/Task<T>/ValueTask<T> as special.

A task-returning method definition will now get two methoddescs in the type system:

- one has the original Task-returning signature
- another is T-returning, but called with a calling convention that uses a continuation object to handle cases of incomplete result leading to suspending/resuming the chain of calls.

We call the pair ""variants"". For most purposes the methods are identical and parallel - i.e. if generic, both have exactly same set of type parameters, if task-returning variant overrides another one in the base class, the async variant overrides the async variant in the base, etc...
Both variants can signal that the result is not ready yet - via incomplete Task or by returning a Continuation object.

The purpose of this duality is that async variants can be much more efficient when suspension does not happen, leading to substantial savings when a chain of awaits may be turned into a chain of calls in ""async space"".

From the public/external point of view the async variants are an implementation detail that ""does not exist"", and can change in future releases. Async variants should not show up in reflection, for example.

In terms of implementation logic one variant contains the user code/IL and another is a thunk that forwards to it. Which one contains the user code depends on presence of MethodImpl.Async. If there is no MethodImpl.Async the user code belongs to the task-returning variant, otherwise to the async variant.

Note that for the most part Runtime Async feature is pay-for-play. JIT features will only engage if the user code is compiled with a compiler that is enlightened to use the new API for async/await.
However, the creation of variant pairs for task-returning methods must happen unconditionally prior to possible use. Since these are just entry points in the type system, the impact should not be high. We will, of course measure and see if some action is needed on that.

In this PR the generation of variants will require FEATURE_RUNTIME_ASYNC, which will not be defined by default, so by default none of the above will happen.

Fixes #114310",4,0,84,cleanup some unused code and signature (issue_ref)* eventargs and eventhandler* stringobject::caseinsensitivecomphelper* allocatechararray---------
dotnet/runtime,0682b04c8fb34f1d03f792d1a2db0d97e5558553,"[RISC-V] Extend register for slti (#114900)

* Extend register for slti

* add test",2025-04-27 17:48:11+00:00,Tomasz Sowiński,0,,,6,65,16,[risc-v] extend register for slti (issue_ref)* extend register for slti* add test
dotnet/runtime,ece8571dccea7a96fed45a8460feaeb4c27b4fe5,"Automated bump of chrome version (#115084)

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>",2025-04-27 19:44:23+00:00,github-actions[bot],0,,,1,4,4,automated bump of chrome version (issue_ref)
dotnet/runtime,0d20f9ad3e0fd58a510062757b34f76a3c122b25,Test /etc/os-release existence before grepping (#115086),2025-04-27 20:19:09+00:00,Adeel Mujahid,0,,,1,1,1,test /etc/os-release existence before grepping (issue_ref)
dotnet/runtime,cc3700953542b96052f73fc7ee259994692575cf,Pri1 arm64 tests (#114948),2025-04-28 12:57:11+00:00,Jan Kotas,1,4afdf63044be77d9256a0a62adc0a3f61f343b7f,"Build host.native for native AOT libraries testing (#114764)

We don't have a need for host in native AOT but after #113765 the outerloop started failing with:

```
  Building native export: ""/usr/local/bin/clang-20"" -O2 -shared -fpic -D DNNE_ASSEMBLY_NAME=Microsoft.Interop.Tests.NativeExports -D DNNE_COMPILE_AS_SOURCE -I ""/__w/1/s/.packages/dnne/2.0.5/tools/platform"" -I ""/__w/1/s/artifacts/bin/linux-arm64.Release/corehost"" -o ""/__w/1/s/artifacts/obj/NativeExports/Release/net10.0/linux-arm64/dnne/bin/Microsoft.Interop.Tests.NativeExportsNE.so"" --target=aarch64-linux-gnu --gcc-toolchain=/crossrootfs/arm64/usr --sysroot=/crossrootfs/arm64  ""/__w/1/s/artifacts/obj/NativeExports/Release/net10.0/linux-arm64/dnne/Microsoft.Interop.Tests.NativeExports.g.c"" ""/__w/1/s/.packages/dnne/2.0.5/tools/platform/platform.c"" -lstdc++ ""/__w/1/s/artifacts/bin/linux-arm64.Release/corehost/libnethost.a"" --target=aarch64-linux-gnu --gcc-toolchain=/crossrootfs/arm64/usr --sysroot=/crossrootfs/arm64 -fuse-ld=lld  -Wl,--rpath-link=/crossrootfs/arm64/lib/aarch64-linux-gnu -Wl,--rpath-link=/crossrootfs/arm64/usr/lib/aarch64-linux-gnu 
clang-20 : error : no such file or directory: '/__w/1/s/artifacts/bin/linux-arm64.Release/corehost/libnethost.a' [/__w/1/s/src/libraries/System.Runtime.InteropServices/tests/TestAssets/NativeExports/NativeExports.csproj]
```

because some of the interop testing uses DNNE. This is a blind attempt to fix it.",1,1,0,pri1 arm64 tests (issue_ref)
dotnet/runtime,fb8c7c70c869cbde87ee5af766e37ebeeb88935c,"Update dependencies from https://github.com/dotnet/hotreload-utils build 20250422.1 (#115105)

Microsoft.DotNet.HotReload.Utils.Generator.BuildTool
 From Version 10.0.0-alpha.0.25214.1 -> To Version 10.0.0-alpha.0.25222.1

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-04-28 14:47:01+00:00,dotnet-maestro[bot],0,,,2,3,3,update dependencies from build 20250422.1 (issue_ref)microsoft.dotnet.hotreload.utils.generator.buildtool from version 10.0.0-alpha.0.25214.1 -> to version 10.0.0-alpha.0.25222.1
dotnet/runtime,dea4f979a7a5f47222892df985f4651c9a45fbcc,"[RuntimeAsync] Merge from labs, all except JIT (#114675)

This PR includes everything from the runtimelab implementation of Runtime Async feature, except: JIT changes and tests.
Some changes in between VM and JIT are hard to separate, so included here as well.

The main effect of the VM changes is classification of methods by MethodReturnKind. We recognize methods that return Task/ValueTask/Task<T>/ValueTask<T> as special.

A task-returning method definition will now get two methoddescs in the type system:

- one has the original Task-returning signature
- another is T-returning, but called with a calling convention that uses a continuation object to handle cases of incomplete result leading to suspending/resuming the chain of calls.

We call the pair ""variants"". For most purposes the methods are identical and parallel - i.e. if generic, both have exactly same set of type parameters, if task-returning variant overrides another one in the base class, the async variant overrides the async variant in the base, etc...
Both variants can signal that the result is not ready yet - via incomplete Task or by returning a Continuation object.

The purpose of this duality is that async variants can be much more efficient when suspension does not happen, leading to substantial savings when a chain of awaits may be turned into a chain of calls in ""async space"".

From the public/external point of view the async variants are an implementation detail that ""does not exist"", and can change in future releases. Async variants should not show up in reflection, for example.

In terms of implementation logic one variant contains the user code/IL and another is a thunk that forwards to it. Which one contains the user code depends on presence of MethodImpl.Async. If there is no MethodImpl.Async the user code belongs to the task-returning variant, otherwise to the async variant.

Note that for the most part Runtime Async feature is pay-for-play. JIT features will only engage if the user code is compiled with a compiler that is enlightened to use the new API for async/await.
However, the creation of variant pairs for task-returning methods must happen unconditionally prior to possible use. Since these are just entry points in the type system, the impact should not be high. We will, of course measure and see if some action is needed on that.

In this PR the generation of variants will require FEATURE_RUNTIME_ASYNC, which will not be defined by default, so by default none of the above will happen.

Fixes #114310",2025-04-28 17:57:11+00:00,Vladimir Sadov,1,cec44d6dff9de95421f199f65bbc80b8296da1c0,"Interpreter EH support in the runtime (#114649)

* Interpreter EH support in the runtime

This change adds support for exception handling for cases when
interpreter frames participate in the process. That means when an
exception is thrown from an interpreter frame or when it is propagated
over interpreter frames. This doesn't add all the exception handling
support to the interpreter itself, there is a follow up PR that contains
that code.

* Fix arm64 build

* Fix few issues

* Fix non-windows amd64 builds

ifdef-out setting m_SSP in the InterpreterFrame

* Fix x86, arm and arm64 build break

* Fix incorrect assert

We cannot try to get the code manager from a crawl frame when it is not
on a frameless frame.

* Resuming after catch via native exception

This commit moves the resuming after catch to using native exception
handling instead of fragile context capturing, which was not correct
anyways.

It also adds handling of exceptions comming out of native runtime
methods called from the interpreter.

* Remove some unneeded stuff and fix Unix build

* Move the saved InterpExecMethod context regs

* Move the saved registers to the StackFrameIterator
* Fix MUSL build
* Add {Get/Set}{First/Second}ArgumentRegister to all architectures and use
  those in ExecuteFunctionBelowContext.

* Few fixes

* Fix builds with disabled interpreter

* One more MUSL build fix

* Implement proper GetFuncletStartAddress for interpreter

* Fix problem with missing managed FEATURE_INTERPRETER define

* Revert ""Implement proper GetFuncletStartAddress for interpreter""

This reverts commit d967861d818e98af2d5eac6c6dee5492319c4353.",116,3735,279,"[runtimeasync] merge from labs, all except jit (issue_ref)this pr includes everything from the runtimelab implementation of runtime async feature, except: jit changes and tests.some changes in between vm and jit are hard to separate, so included here as well.the main effect of the vm changes is classification of methods by methodreturnkind. we recognize methods that return task/valuetask/task<t>/valuetask<t> as special.a task-returning method definition will now get two methoddescs in the type system:- one has the original task-returning signature- another is t-returning, but called with a calling convention that uses a continuation object to handle cases of incomplete result leading to suspending/resuming the chain of calls.we call the pair ""variants"". for most purposes the methods are identical and parallel - i.e. if generic, both have exactly same set of type parameters, if task-returning variant overrides another one in the base class, the async variant overrides the async variant in the base, etc...both variants can signal that the result is not ready yet - via incomplete task or by returning a continuation object.the purpose of this duality is that async variants can be much more efficient when suspension does not happen, leading to substantial savings when a chain of awaits may be turned into a chain of calls in ""async space"".from the public/external point of view the async variants are an implementation detail that ""does not exist"", and can change in future releases. async variants should not show up in reflection, for example.in terms of implementation logic one variant contains the user code/il and another is a thunk that forwards to it. which one contains the user code depends on presence of methodimpl.async. if there is no methodimpl.async the user code belongs to the task-returning variant, otherwise to the async variant.note that for the most part runtime async feature is pay-for-play. jit features will only engage if the user code is compiled with a compiler that is enlightened to use the new api for async/await.however, the creation of variant pairs for task-returning methods must happen unconditionally prior to possible use. since these are just entry points in the type system, the impact should not be high. we will, of course measure and see if some action is needed on that.in this pr the generation of variants will require feature_runtime_async, which will not be defined by default, so by default none of the above will happen.fixes issue_ref"
dotnet/runtime,264531cbe53ed21b3ed89e05b23a25391bdd509b,"Add null check for EnumerationOptions (#114672)

* Add null check for EnumerationOptions

* Add test

* Also check for DirectoryInfo

* Update src/libraries/System.Runtime/tests/System.IO.FileSystem.Tests/Enumeration/MatchCasingTests.cs

---------

Co-authored-by: Stephen Toub <stoub@microsoft.com>",2025-04-28 18:05:17+00:00,Huo Yaoyuan,0,,,3,18,10,add null check for enumerationoptions (issue_ref)* add null check for enumerationoptions* add test* also check for directoryinfo* update src/libraries/system.runtime/tests/system.io.filesystem.tests/enumeration/matchcasingtests.cs---------
dotnet/runtime,ac5ae4c7ee7b808a2d06f6fa8c1580bbb6defe82,[browser] Consider WasmSDK projects RID agnostic (#114429),2025-04-28 18:29:15+00:00,Marek Fišera,0,,,1,1,0,[browser] consider wasmsdk projects rid agnostic (issue_ref)
dotnet/runtime,8233e6b714e57ef2825f97ba9607f6c1bf4a9424,Simplify conditional operator (#112074),2025-04-28 18:36:59+00:00,xtqqczze,1,026007d2e98157930ae6233dad88c889039e898d,"Fix `Version.Parse` to show original input in `FormatException` message when input has trailing dots (#121055)

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>
Co-authored-by: Stephen Toub <stoub@microsoft.com>",16,21,21,simplify conditional operator (issue_ref)
dotnet/runtime,1d3b5d603a7f15f6839ba28d1f08baaaee5671d6,Remove redundant 'freeList' field (#114914),2025-04-28 18:44:08+00:00,Rameel,0,,,1,4,14,remove redundant 'freelist' field (issue_ref)
dotnet/runtime,ef0076bcf81b10a53fe54c1f2c08a0e7fc3e8109,Add single-file host tests for native library load (#115061),2025-04-28 18:54:27+00:00,Elinor Fung,1,043d49e7205169e44a40d09bdfb175d667f7f372,Fix passing flags in single-file tests for NativeLibrary.TryLoad (#115173),3,237,0,add single-file host tests for native library load (issue_ref)
dotnet/runtime,f2f058ef0063a899d290631c5600fc5b49173e05,"[clr-interp] Implement `CEE_LOCALLOC` and frame data allocator for dynamic stack allocations (#114860)

* Implement localloc in the interpreter

* Add comment

* Implement FrameDataAllocator for dynamic stack allocations

* Fix merge conflicts

* Initialize local variables to zero if the flag is set

* Initialize local variables based on the CORINFO_OPT_INIT_LOCALS. Move FrameDataAllocator code to interpframeallocator.cpp/h. Add TODO comments.

* Implement FrameDataFragment destructor

* Handle memory allocation failure in frame data allocation

* Fix typo

* Add preprocessor directive FEATURE_INTERPRETER

* Fix windows build

* If size is 0 allocates a zero-length item and returns a valid pointer to that item

* Update frame allocator to use InterpMethodContextFrame

* Throw OutOfMemory exception if alloc fails

* Revert assert changes

* Update FrameDataAllocator to return nullptr if alloc fails

* Check if infosLen is >0

* Use consistent naming for frame pointers

* Test __SIZEOF_POINTER__ for pointer size checks

* Replace __SIZEOF_POINTER__ with TARGET_64BIT

* Encapsulate FrameDataAllocator structs into class and make them private

* Implement destructor for InterpThreadContext to free FrameDataAllocator

* Move InterpThreadContext instance to the CoreCLR Thread and implement destructor. Inline FrameDataAllocator into InterpThreadContext and ensure allocated memory is released

* Move InterpThreadContext destructor call to OnThreadTerminate

* Refactor Alloc to accept size by value instead of pointer

* Fix typo",2025-04-28 19:04:35+00:00,Milos Kotlar,1,5ccaddf2ca7676ef06f0352fd6c0b94eb7ab72b4,"[clr-interp] Fix access of boxed static fields address (#115198)

Previous code was assuming that the field address obtained from the runtime points to the address where the field value resides. This is false for CORINFO_FLG_FIELD_STATIC_IN_HEAP fields, where at the field address we actually have the boxed instance reference, so we need to access the field value inside this box object instead.",12,464,23,[clr-interp] implement and frame data allocator for dynamic stack allocations (issue_ref)* implement localloc in the interpreter* add comment* implement framedataallocator for dynamic stack allocations* fix merge conflicts* initialize local variables to zero if the flag is set* initialize local variables based on the corinfo_opt_init_locals. move framedataallocator code to interpframeallocator.cpp/h. add todo comments.* implement framedatafragment destructor* handle memory allocation failure in frame data allocation* fix typo* add preprocessor directive feature_interpreter* fix windows build* if size is 0 allocates a zero-length item and returns a valid pointer to that item* update frame allocator to use interpmethodcontextframe* throw outofmemory exception if alloc fails* revert assert changes* update framedataallocator to return nullptr if alloc fails* check if infoslen is >0* use consistent naming for frame pointers* test __sizeof_pointer__ for pointer size checks* replace __sizeof_pointer__ with target_64bit* encapsulate framedataallocator structs into class and make them private* implement destructor for interpthreadcontext to free framedataallocator* move interpthreadcontext instance to the coreclr thread and implement destructor. inline framedataallocator into interpthreadcontext and ensure allocated memory is released* move interpthreadcontext destructor call to onthreadterminate* refactor alloc to accept size by value instead of pointer* fix typo
dotnet/runtime,3c94cded60d2b0cfe7c27c0bb23a2abace3f8f0a,"win-x86: Replace ""ret n"" thunks with assembly code (#115089)

Replace x86 COM ""ret n"" thunks with assembly code that emulates
""ret <n>"" for an ""<n>"" specified using a variable value stored
in register.",2025-04-28 22:55:35+00:00,Filip Navara,0,,,10,46,172,"win-x86: replace ""ret n"" thunks with assembly code (issue_ref)replace x86 com ""ret n"" thunks with assembly code that emulates""ret <n>"" for an ""<n>"" specified using a variable value storedin register."
dotnet/runtime,251d097ebc7400af594f9469078eef9663b78fb4,add Simon to mono infrastructure subscribers (#115118),2025-04-28 23:19:37+00:00,Matous Kozak,0,,,1,1,0,add simon to mono infrastructure subscribers (issue_ref)
dotnet/runtime,8fa978546a2443001b125fce4a5f90fcd46d0401,Update gcc leg from v14 to v15 (#115128),2025-04-29 00:37:03+00:00,Adeel Mujahid,1,e8db163344794863e3f83d056bb1482417b83653,"Update Alma Linux 8 -> 9 (#115132)

* Update Alma Linux 8 -> 9

* Fix typo",3,4,4,update gcc leg from v14 to v15 (issue_ref)
dotnet/runtime,72a5ef7a9e5721d050623bacde82f8a384513966,Remove Raspbian 10 (#115129),2025-04-29 02:14:04+00:00,Rich Lander,1,825ee67d91b74356b5f16eb84b08d48499956ad1,"Delete s390x and ppc64le helix queues (#115161)

These queues are non-functional and there is no plan to fix them.",11,4,75,remove raspbian 10 (issue_ref)
dotnet/runtime,89157c6af1ba688c988e04a0d422e4f8f5ba83aa,"[main] Update dependencies from dotnet/icu, dotnet/runtime-assets (#115139)

* Update dependencies from https://github.com/dotnet/icu build 20250427.1

Microsoft.NETCore.Runtime.ICU.Transport
 From Version 10.0.0-preview.5.25222.1 -> To Version 10.0.0-preview.5.25227.1

* Update dependencies from https://github.com/dotnet/runtime-assets build 20250428.1

Microsoft.DotNet.CilStrip.Sources , Microsoft.NET.HostModel.TestData , System.ComponentModel.TypeConverter.TestData , System.Data.Common.TestData , System.Drawing.Common.TestData , System.Formats.Tar.TestData , System.IO.Compression.TestData , System.IO.Packaging.TestData , System.Net.TestData , System.Private.Runtime.UnicodeData , System.Runtime.Numerics.TestData , System.Runtime.TimeZoneData , System.Security.Cryptography.X509Certificates.TestData , System.Text.RegularExpressions.TestData , System.Windows.Extensions.TestData
 From Version 10.0.0-beta.25222.1 -> To Version 10.0.0-beta.25228.1

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-04-29 08:50:32+00:00,dotnet-maestro[bot],0,,,2,48,48,"[main] update dependencies from dotnet/icu, dotnet/runtime-assets (issue_ref)* update dependencies from build 20250427.1microsoft.netcore.runtime.icu.transport from version 10.0.0-preview.5.25222.1 -> to version 10.0.0-preview.5.25227.1* update dependencies from build 20250428.1microsoft.dotnet.cilstrip.sources , microsoft.net.hostmodel.testdata , system.componentmodel.typeconverter.testdata , system.data.common.testdata , system.drawing.common.testdata , system.formats.tar.testdata , system.io.compression.testdata , system.io.packaging.testdata , system.net.testdata , system.private.runtime.unicodedata , system.runtime.numerics.testdata , system.runtime.timezonedata , system.security.cryptography.x509certificates.testdata , system.text.regularexpressions.testdata , system.windows.extensions.testdata from version 10.0.0-beta.25222.1 -> to version 10.0.0-beta.25228.1---------"
dotnet/runtime,bf37cde9efeeddde976065def9695336edc1379e,"ML-KEM: Fix-up ASN.1 reading and writing logic

This addresses a couple of validation deficiencies when loading ASN.1 content. This ensures invalid ASN.1 receives the proper exception and that SubjectPublicKeyInfo imports do not permit trailing data.

For PKCS#8 export, we more reliably clear buffers and handle incorrectly implemented exports when the amount written is negative.",2025-04-29 09:17:24+00:00,Kevin Jones,1,e097b8b5b51d70ba1e6819c3eb7e2ec67c9944c0,Fix documentation mistakes in MLKem and MLKemAlgorithm,4,106,47,"ml-kem: fix-up asn.1 reading and writing logicthis addresses a couple of validation deficiencies when loading asn.1 content. this ensures invalid asn.1 receives the proper exception and that subjectpublickeyinfo imports do not permit trailing data.for pkcsissue_ref export, we more reliably clear buffers and handle incorrectly implemented exports when the amount written is negative."
dotnet/runtime,333bddc7cc0760a4c5f800c4863da8884f71e349,ML-KEM: PKCS12/PFX Loading and Exporting,2025-04-29 13:03:55+00:00,Kevin Jones,1,7f563ee15143d5aba7c4242fcc8b0aa951eafb3d,Fix ML-KEM PKCS#12 test to use PBES1+3DES,13,1673,65,ml-kem: pkcs12/pfx loading and exporting
dotnet/runtime,ebe1414c5466c3a91bb2c1edef249a8c59dab157,Remove a couple unnecessary 'lock(this)' statements (#115013),2025-04-29 15:46:46+00:00,Steve Harter,0,,,1,2,12,remove a couple unnecessary 'lock(this)' statements (issue_ref)
dotnet/runtime,350e0e5e4e55316aa342e56fb04d6e4ae58acdf9,"Localized file check-in by OneLocBuild Task: Build definition ID 679: Build ID 2698317 (#115007)

* Localized file check-in by OneLocBuild Task: Build definition ID 679: Build ID 2694802

* Localized file check-in by OneLocBuild Task: Build definition ID 679: Build ID 2694828

* Localized file check-in by OneLocBuild Task: Build definition ID 679: Build ID 2694828",2025-04-29 15:49:13+00:00,dotnet bot,0,,,0,0,0,localized file check-in by onelocbuild task: build definition id 679: build id 2698317 (issue_ref)* localized file check-in by onelocbuild task: build definition id 679: build id 2694802* localized file check-in by onelocbuild task: build definition id 679: build id 2694828* localized file check-in by onelocbuild task: build definition id 679: build id 2694828
dotnet/runtime,9d4faf10998884f9ed114f5715f9ffd968419b25,Remove HoistedLocal from runtime-async spec (#112918),2025-04-29 17:05:59+00:00,Andy Gocke,1,372c596f6f4f6b9cd14b2cfbffa2bd1b275b61e7,Fix markdownl lint (#115159),1,4,5,remove hoistedlocal from runtime-async spec (issue_ref)
dotnet/runtime,c672fcaad36fee79a2e8e4ec9ae8a38373380a2c,"Simplify 64-bit platform conditions (#115083)

* Simplify 64-bit platform conditions

* Use #else for most common cases

* Move to switches.h to share between vm and jit

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-04-29 18:30:32+00:00,Adeel Mujahid,1,8d071962e4e306d7a6740d3cd22deff7e9d90d90,"[wasm coreclr] Fix fields alignment (#115364)

* Fix fields alignment

Fixes https://github.com/dotnet/runtime/issues/115363

The problem happened in MethodTableBuilder::PlaceInstanceFields where in wasm case
the fields were placed at wrong offsets.

The native representation looks like this:

```
class  field                                        wasm type          offset
-----------------------------------------------------------------------------------------------
Object
       PTR_MethodTable m_pMethTab                   i32                0
AssemblyLoadContextBaseObject
       int64_t         _id                          i64                8
       OBJECTREF       _unloadLock                  i32                12
       OBJECTREF       _resolvingUnmanagedDll       i32
       OBJECTREF       _resolving                   i32
       OBJECTREF       _unloading                   i32
       OBJECTREF       _name                        i32
       INT_PTR         _nativeAssemblyLoadContext   i32
       DWORD           _state                       i32                40
       CLR_BOOL        _isCollectible               i8                 44
```

While the managed field offsets were calculated wrong, the _id was
placed at offset 4 and thus all the following fields were at wrong
offsets too. The size check then failed.

By enabling FEATURE_64BIT_ALIGNMENT the dwOffsetBias is set to
TARGET_POINTER_SIZE and the fields layout is calculated properly.

The 8 bytes types in wasm should be aligned to 8 bytes

https://github.com/WebAssembly/tool-conventions/blob/main/BasicCABI.md#data-representation

so hopefully the rest of the changes enabled by this feature should
apply as well. Before this feature was enabled only for arm 32bits.

* Update conditions to use TARGET_WASM

* Apply suggestions from code review

* Apply suggestions from code review

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",16,46,176,simplify 64-bit platform conditions (issue_ref)* simplify 64-bit platform conditions* use #else for most common cases* move to switches.h to share between vm and jit---------
dotnet/runtime,b11923d2505b347ca93c2118a0b180c781156f64,"[main] Source code updates from dotnet/dotnet (#115114)

* Update dependencies from https://github.com/dotnet/dotnet

* Update dependencies from https://github.com/dotnet/dotnet

* Update dependencies from https://github.com/dotnet/dotnet

* Remove intermediates and baseline file

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Viktor Hofer <viktor.hofer@microsoft.com>",2025-04-29 21:56:03+00:00,dotnet-maestro[bot],0,,,5,94,195,[main] source code updates from dotnet/dotnet (issue_ref)* update dependencies from * update dependencies from * update dependencies from * remove intermediates and baseline file---------
dotnet/runtime,f7af766fdd6c56921164f656592f32a2074428be,"[main] Source code updates from dotnet/dotnet (#115176)

* [VMR] Codeflow 29e3af6-29e3af6

[[ commit created by automation ]]

* Update dependencies from https://github.com/dotnet/dotnet build 266331

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-04-30 07:56:45+00:00,dotnet-maestro[bot],0,,,4,97,92,[main] source code updates from dotnet/dotnet (issue_ref)* [vmr] codeflow 29e3af6-29e3af6[[ commit created by automation ]]* update dependencies from build 266331---------
dotnet/runtime,98972b562aa9916898e068af1542fb2f42b61758,"[browser] Clean up Wasm.Build.Tests (#114993)

Co-authored-by: Ilona Tomkowicz <itomkowicz@microsoft.com>",2025-04-30 08:19:17+00:00,Marek Fišera,0,,,7,11,69,[browser] clean up wasm.build.tests (issue_ref)
dotnet/runtime,bb6b09aa245b7000ff68f0feade813d19b93f79b,"JIT: Add runtime async transformation (#114861)

Add the JIT parts of runtime async. This introduces a new transformation that
runs before lowering and that transforms the function into a state machine, with
states set up to allow suspension and resumption at async calls (the suspension
points).

Suspension is indicated by the callee returning a continuation object using a
new calling convention. When suspension happens, the caller similarly suspends
by capturing all live state and saving it in a continuation object. These
continuation objects are then linked together and continue to be propagated back
to the callers until we finally get to a caller that is not async anymore (i.e.
that expects to see a `Task`/`Task<T>`). The VM synthesizes a `Task`/`Task<T>`
wrapper for the async functions that hide away the management the continuation
objects. See https://github.com/dotnet/runtime/pull/114675 for more details
around this and around the calling convention.

The continuation objects can later be used to resume the function at the point
where suspension happened. This is accomplished by async functions also taking a
continuation object as a parameter. When such a parameter is passed (i.e. it is
non-null), the JIT will restore all live state from the continuation and resume
from the correct location. The continuations store a state number so that
resumption can know where to resume.

The full resumption process also involves an IL stub called the async resumption
stub. This stub is responsible for calling the async function with the right
stack frame setup for arguments and simultaneously passing a non-null
continuation. The stack frame setup done by the IL async resumption stub is
important as the JIT uses this space to restore live parameters from the
continuation.

Continuations similarly support propagation of the return values from the callee
and of potential exceptions thrown by the callee. Return values are stored in a
known location in the continuation object, and the async resumption stubs are
responsible for propagating these values into the next continuation when
suspension/resumption has happened. The JIT's resumption code will fetch the
return value from the known location and copy it to the right place in the
caller. Similarly, exceptions are kept in a known place and are handled by being
rethrown from the right location when present.

OSR functions come with complications. Since they rely on frame setup done by
the corresponding tier-0 method the resumption of these methods needs to happen
through the tier 0 method. When OSR methods suspend they store their IL offset
in the continuation object, while tier 0 methods with patchpoints will store -1
in the continuation object. The VM then always resumes these methods in the tier
0 method, which knows to use the IL offset to determine whether resumption
should happen in the tier 0 method or whether control needs to continue into an
OSR method.",2025-04-30 10:12:33+00:00,Jakob Botsch Nielsen,1,3c34fc12da6cb3e621611739413ef6221e47ff2b,"Adding additional 8 eGPR. (#113988)

* Add remaining 8 eGPR

* Skip unused regs.

* Revert ""Skip unused regs.""

This reverts commit cc6d454b683a53a5662da4889b3ec7d8ce6f79f6.

* Skip unused regs

* Addressing review comments.

* Revert ""Skip unused regs""

This reverts commit 963c34173ef879d2fa5d3b47627d80520bcc1f21.

* Addressing Kunal's review comments.

* Fix formatting

* Clean up macro

* Reverting change for arm and fixing bound

* Fix type and addressing review comments.

* Fix typo",72,3158,111,"jit: add runtime async transformation (issue_ref)add the jit parts of runtime async. this introduces a new transformation thatruns before lowering and that transforms the function into a state machine, withstates set up to allow suspension and resumption at async calls (the suspensionpoints).suspension is indicated by the callee returning a continuation object using anew calling convention. when suspension happens, the caller similarly suspendsby capturing all live state and saving it in a continuation object. thesecontinuation objects are then linked together and continue to be propagated backto the callers until we finally get to a caller that is not async anymore (i.e.that expects to see a /). the vm synthesizes a /wrapper for the async functions that hide away the management the continuationobjects. see for more detailsaround this and around the calling convention.the continuation objects can later be used to resume the function at the pointwhere suspension happened. this is accomplished by async functions also taking acontinuation object as a parameter. when such a parameter is passed (i.e. it isnon-null), the jit will restore all live state from the continuation and resumefrom the correct location. the continuations store a state number so thatresumption can know where to resume.the full resumption process also involves an il stub called the async resumptionstub. this stub is responsible for calling the async function with the rightstack frame setup for arguments and simultaneously passing a non-nullcontinuation. the stack frame setup done by the il async resumption stub isimportant as the jit uses this space to restore live parameters from thecontinuation.continuations similarly support propagation of the return values from the calleeand of potential exceptions thrown by the callee. return values are stored in aknown location in the continuation object, and the async resumption stubs areresponsible for propagating these values into the next continuation whensuspension/resumption has happened. the jit's resumption code will fetch thereturn value from the known location and copy it to the right place in thecaller. similarly, exceptions are kept in a known place and are handled by beingrethrown from the right location when present.osr functions come with complications. since they rely on frame setup done bythe corresponding tier-0 method the resumption of these methods needs to happenthrough the tier 0 method. when osr methods suspend they store their il offsetin the continuation object, while tier 0 methods with patchpoints will store -1in the continuation object. the vm then always resumes these methods in the tier0 method, which knows to use the il offset to determine whether resumptionshould happen in the tier 0 method or whether control needs to continue into anosr method."
dotnet/runtime,1b19fe3329ae2ef6512ff71e7f559e296dd8bc27,"JIT: Model partial defs less conservatively in liveness when possible (#115081)

Before this change a partial def `v.x = 123` was modelled semantically something
like  `v = v with x = 123`. This matches how SSA models these definitions.
However, it has the downside that it causes partial defs to be considered uses.

This PR changes things so that other liveness passes take a more liberal view,
where partial defs are no longer considered full defs, but are then also not
considered uses. This allows more dead-code elimination around these cases.

The liveness that runs during SSA is not changed; it still takes the old view.",2025-04-30 10:21:48+00:00,Jakob Botsch Nielsen,1,6ee6d40609b14602c20e762fac07c0da544ea1b8,"JIT: Disallow flowgraph modifications during VN opts (#115197)

Fixes #115168.",2,43,19,"jit: model partial defs less conservatively in liveness when possible (issue_ref)before this change a partial def was modelled semantically somethinglike . this matches how ssa models these definitions.however, it has the downside that it causes partial defs to be considered uses.this pr changes things so that other liveness passes take a more liberal view,where partial defs are no longer considered full defs, but are then also notconsidered uses. this allows more dead-code elimination around these cases.the liveness that runs during ssa is not changed; it still takes the old view."
dotnet/runtime,b412ffffbb5d83fdee4f5cdb6423f07b251f5494,"[QUIC] Delete ActiveIssues on SupportedLinuxPlatforms_IsSupportedIsTrue test (#115141)

* Raspbian 10 removed from CI

* Update PlatformDetection.Unix.cs",2025-04-30 10:40:28+00:00,Marie Píchová,0,,,2,0,3,[quic] delete activeissues on supportedlinuxplatforms_issupportedistrue test (issue_ref)* raspbian 10 removed from ci* update platformdetection.unix.cs
dotnet/runtime,e2076191693d8cc48de0755ad23cdb890e785dbb,Suppress CredScan false positive in PfxTests.cs,2025-04-30 10:47:42+00:00,Alexander Köplinger,0,,,1,1,0,suppress credscan false positive in pfxtests.cs
dotnet/runtime,100ba615526926ca71e44c492d6a14314325a901,Increase timeout on fuzzing deployment pipeline (#114535),2025-04-30 14:49:21+00:00,Miha Zupan,0,,,1,1,1,increase timeout on fuzzing deployment pipeline (issue_ref)
dotnet/runtime,4eb1693749632712d53085655a628130d624c584,Fix culture creation with undetermined lang tag (#115166),2025-04-30 16:17:03+00:00,Tarek Mahmoud Sayed,1,458b1193d0086b5c9fcbe75db4330fb4b2e88c1e,"Fix globalization test on mobile platforms (#115248)

* Fix globalization test on mobile platforms

* Update src/libraries/System.Runtime/tests/System.Globalization.Tests/CultureInfo/CultureInfoCtor.cs

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>

* minor update

* fix comment

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2,25,2,fix culture creation with undetermined lang tag (issue_ref)
dotnet/runtime,1949af011f89727b082227d8cf3ef86e9398c75a,"Exclude --gcc-toolchain from cross arg (#115163)

* Exclude --gcc-toolchain from cross arg

* Update NativeExports.csproj",2025-04-30 18:34:37+00:00,Adeel Mujahid,1,5cd7566c23bb9ce3b6e1600739abc8864e65e9ec,"Add bootstrapping build mechanism and enable for SourceBuild (#114285)

* Revert ""Publish with BaseOS RID when its present""

This reverts commit 38289afd3b894cab9368cf3b3b9117f8a72e6b49.

* WIP: Bootstrap build instead of staged build

* Fix bootstrap restore.

* Get ILC and crossgen2 publishing with bootstrap subset + use-bootstrap

* Remove two-stage build and convert to bootstrap build.

* Don't build OOB libs in bootstrapping. They're not needed

* Layout bootstrap files in a separate directory so our actual product build still builds everything.

It's slower but ensures that our binlogs for the product build still have everything in them.

* Fix condition for bootstrap in SB

* Various refactorings and put cdac on the same plan as ilc/crossgen2

* Strip double-dash options too as they can be specified

* Update eng/build.sh

Co-authored-by: Adeel Mujahid <3840695+am11@users.noreply.github.com>

* Update eng/DotNetBuild.props

Co-authored-by: Adeel Mujahid <3840695+am11@users.noreply.github.com>

* Apply suggestion

* Don't remove the source-built-upstream-cache folder

* Fix loongarch64 leg

* Generate breadcrumbs in runtime.proj (where we build the aotsdk folder).

Move BuildIntegration.proj to use Microsoft.Build.NoTargets

* Adjust trimming tests to hook into targetingpacks.targets refactored logic

* Add documentation

* Fix local apphost path hookup

* Docs feedback

* Build hosts in runtime-linker-tests now that we're using the live hosts.

* Use the targetingpacks.targets process for a live apphost

* PR feedback

* Add to build.sh

* Fix up RID graph in the bootstrapping

* Pass the right RID graph for NativeExports

* Fix bootstrap for community portable platforms

* Update eng/Subsets.props

Co-authored-by: Adeel Mujahid <3840695+am11@users.noreply.github.com>

* Update eng/Subsets.props

Co-authored-by: Adeel Mujahid <3840695+am11@users.noreply.github.com>

---------

Co-authored-by: Adeel Mujahid <3840695+am11@users.noreply.github.com>",2,1,5,exclude --gcc-toolchain from cross arg (issue_ref)* exclude --gcc-toolchain from cross arg* update nativeexports.csproj
dotnet/runtime,1ce95fbe8b37b4d21ac94551714d978554a53443,Cleanup --whole-archive linking (#115194),2025-04-30 18:47:41+00:00,Jan Kotas,0,,,2,0,16,cleanup --whole-archive linking (issue_ref)
dotnet/runtime,e457fe3aa5fd71dd8e2c49b09234d08531970c2c,"Remove ReadyToRun prefix from image layout code (#115188)

This is now shared with native AOT.",2025-04-30 18:57:51+00:00,Michal Strehovský,0,,,9,68,68,remove readytorun prefix from image layout code (issue_ref)this is now shared with native aot.
dotnet/runtime,dbb3f759798208ca7463059e0c87c0f45704b62f,"Reformat TypePreinit.cs (#115191)

VS changed its mind how this should be formatted (or we added `.editorconfig` that does that at some point?) and when editing this file I find myself constantly struggling with where VS wants spaces. I don't like reformatting, but don't see a way out - it affects the entire big switch block.",2025-04-30 19:00:13+00:00,Michal Strehovský,0,,,1,1182,1182,"reformat typepreinit.cs (issue_ref)vs changed its mind how this should be formatted (or we added that does that at some point?) and when editing this file i find myself constantly struggling with where vs wants spaces. i don't like reformatting, but don't see a way out - it affects the entire big switch block."
dotnet/runtime,267726120e727562757f27639e752952f4bbec0a,Add timeout to Fuzzlyn reductions (#115189),2025-04-30 20:54:53+00:00,Jakob Botsch Nielsen,0,,,2,40,19,add timeout to fuzzlyn reductions (issue_ref)
dotnet/runtime,dbb86cece1b9be5713e4137648db06ca2d46a366,Update approved API in runtime-async spec (#115181),2025-04-30 21:04:41+00:00,Huo Yaoyuan,1,9a0d1d1c76057a2b061f3ec71a078bffc55521b4,"Fix runtime async spec byref-like wording (#120276)

We agreed on zeroing all byref-like structs, so clarify that in the
spec.",1,4,4,update approved api in runtime-async spec (issue_ref)
dotnet/runtime,3c34fc12da6cb3e621611739413ef6221e47ff2b,"Adding additional 8 eGPR. (#113988)

* Add remaining 8 eGPR

* Skip unused regs.

* Revert ""Skip unused regs.""

This reverts commit cc6d454b683a53a5662da4889b3ec7d8ce6f79f6.

* Skip unused regs

* Addressing review comments.

* Revert ""Skip unused regs""

This reverts commit 963c34173ef879d2fa5d3b47627d80520bcc1f21.

* Addressing Kunal's review comments.

* Fix formatting

* Clean up macro

* Reverting change for arm and fixing bound

* Fix type and addressing review comments.

* Fix typo",2025-04-30 22:10:09+00:00,DeepakRajendrakumaran,1,f57974537a1da360d9b4901a89b2e28c81145349,"JIT: fix crash in LSRA seen on VMR build on AVX-512 machines (#119206)

During the second stage bootstrap build VMR on an AVX-512 capable machine,
we end up in `try_SPILL_COST` looking at a K-reg spill candidate without an
assigned interval,  and crash.

This happens because the preceding heuristic `try_REG_ORDER` fails to find
a register when it should, because mask register numbers are greater than 63
and we shift 1ULL by this amount to build a mask, which is undefined behavior.

The fix is to always look up the mask via table fetch, which is set up to handle
mask register numbers properly.

Fixes the crash seen in #119070.",10,148,58,"adding additional 8 egpr. (issue_ref)* add remaining 8 egpr* skip unused regs.* revert ""skip unused regs.""this reverts commit cc6d454b683a53a5662da4889b3ec7d8ce6f79f6.* skip unused regs* addressing review comments.* revert ""skip unused regs""this reverts commit 963c34173ef879d2fa5d3b47627d80520bcc1f21.* addressing kunal's review comments.* fix formatting* clean up macro* reverting change for arm and fixing bound* fix type and addressing review comments.* fix typo"
dotnet/runtime,6ee6d40609b14602c20e762fac07c0da544ea1b8,"JIT: Disallow flowgraph modifications during VN opts (#115197)

Fixes #115168.",2025-04-30 22:40:19+00:00,Aman Khalid,1,828dec98409513fbd8c77563c63592e5afb70826,"Ensure VN produces correctly initialized simdmask_t (#115227)

* Ensure VN produces correctly initialized simdmask_t

* Fix test and add documentation for new parameter

* Apply formatting patch

* Ensure that the relevant Isa.IsSupported check exists in the test",5,9,10,jit: disallow flowgraph modifications during vn opts (issue_ref)fixes issue_ref.
dotnet/runtime,f6b93319242155a72801a7bb4bc92faac2ada1a3,"Add PKCS#8, SPKI and PEM support for SLH-DSA (#114943)",2025-05-01 00:13:02+00:00,Pranav Senthilnathan,0,,,18,2768,303,"add pkcsissue_ref, spki and pem support for slh-dsa (issue_ref)"
dotnet/runtime,6be6c5de821e389c986b0926fb7334017decee54,"[RuntimeAsync] Moving tests from runtimelabs. (#115169)

* add tests

* disable tests

* deleted unnecessary file",2025-05-01 13:07:39+00:00,Vladimir Sadov,0,,,66,3121,0,[runtimeasync] moving tests from runtimelabs. (issue_ref)* add tests* disable tests* deleted unnecessary file
dotnet/runtime,5d2444b3e4299dc346dfd8d745fd5057d1dd2554,"JIT: Keep side effects in promotion decomposition (#115221)

If the source is a load from an arbitrary address and the destination is
a local that is unused then it may be that we end up creating no loads
at all. In that case we should still keep the side effects of the
address computation.",2025-05-01 16:37:43+00:00,Jakob Botsch Nielsen,0,,,3,69,1,jit: keep side effects in promotion decomposition (issue_ref)if the source is a load from an arbitrary address and the destination isa local that is unused then it may be that we end up creating no loadsat all. in that case we should still keep the side effects of theaddress computation.
dotnet/runtime,f0dd9dd82c6c176f4b97fd36be4c77325839ab66,"JIT: escape analysis for delegates (#115172)

Mark delegate invoke calls as non-escaping for `this`. Later, in the
stack allocation code rewriting post-pass, if the `this` at a delegate
invoke is definitely a stack pointing local, expand the delegate invoke
so that physical promotion can see all the accesses.

Contributes to #104936.",2025-05-01 17:36:08+00:00,Andy Ayers,0,,,3,191,0,"jit: escape analysis for delegates (issue_ref)mark delegate invoke calls as non-escaping for . later, in thestack allocation code rewriting post-pass, if the at a delegateinvoke is definitely a stack pointing local, expand the delegate invokeso that physical promotion can see all the accesses.contributes to issue_ref."
dotnet/runtime,30cf7705938714add16784dc594cc45ea58e10b2," [cDAC] IXCLRDataStackWalk::GetContext returns proper HResult

Return HResults.S_FALSE when getting context on an invalid frame",2025-05-01 18:12:37+00:00,Max Charlamb,0,,,2,37,16,[cdac] ixclrdatastackwalk::getcontext returns proper hresultreturn hresults.s_false when getting context on an invalid frame
dotnet/runtime,0729de51006f87d78faefc6b00a571e481ec75bc,"JIT: Avoid recording uncanonicalizable loops (#115223)

The example has a loop whose header is the beginning of a 'finally'
clause and whose backedge is a CALLFINALLY edge. It is not possible to
canonicalize such a loop: creating a new preheader will result in a new
beginning of the finally clause, and by IR invariants the CALLFINALLY
edge must jump to it. But that means the CALLFINALLY edge is no longer a
backedge.

The loop structure here is spurious and arises because of two-pass EH,
so it is unlikely we will lose much by just discarding these cases.",2025-05-01 18:18:21+00:00,Jakob Botsch Nielsen,0,,,2,37,2,"jit: avoid recording uncanonicalizable loops (issue_ref)the example has a loop whose header is the beginning of a 'finally'clause and whose backedge is a callfinally edge. it is not possible tocanonicalize such a loop: creating a new preheader will result in a newbeginning of the finally clause, and by ir invariants the callfinallyedge must jump to it. but that means the callfinally edge is no longer abackedge.the loop structure here is spurious and arises because of two-pass eh,so it is unlikely we will lose much by just discarding these cases."
dotnet/runtime,27604b57bd2e9c9aa46d005db7c4e387d461b5b6,"[cDAC] Implement 'no-op' ISOSDacInterface methods (#115207)

Implements ISOSDacInterface methods in the cDAC which are no-ops in the DAC",2025-05-01 19:46:27+00:00,Max Charlamb,0,,,1,143,10,[cdac] implement 'no-op' isosdacinterface methods (issue_ref)implements isosdacinterface methods in the cdac which are no-ops in the dac
dotnet/runtime,cb3f507bacf3d941c44458613dc4129ef5508265,"Fix config source gen with value tuple (#115233)

* Fix config source gen with ValueTuple

* Fix comment

* Remove un-needed comment",2025-05-02 15:51:33+00:00,Tarek Mahmoud Sayed,1,baec7216ed1e2461d18ca3e2282f32a704e14584,"Support Null configuration (#116677)

* Support Null configuration

* Remove the config switch

* Fix configuration providers failing tests

* Minor clean-up",5,63,3,fix config source gen with value tuple (issue_ref)* fix config source gen with valuetuple* fix comment* remove un-needed comment
dotnet/runtime,828dec98409513fbd8c77563c63592e5afb70826,"Ensure VN produces correctly initialized simdmask_t (#115227)

* Ensure VN produces correctly initialized simdmask_t

* Fix test and add documentation for new parameter

* Apply formatting patch

* Ensure that the relevant Isa.IsSupported check exists in the test",2025-05-02 16:11:00+00:00,Tanner Gooding,1,8b00880aadf2a5a8e62f2f3e41d5e9c05d64dd58,"JIT: Shrink data section for const vector loads (#114040)

* shrink data for scalar instructions with contained const vectors

* allow CreateScalarUnsafe to remain scalar const

* formatting

* revert CreateScalarUnsafe changes

* shrink constants in genSetRegToConst

* fix build

* fix throughput regression

* use correct instruction for SIMD8

* update compress logic

* add comment

---------

Co-authored-by: Bruce Forstall <brucefo@microsoft.com>",5,113,15,ensure vn produces correctly initialized simdmask_t (issue_ref)* ensure vn produces correctly initialized simdmask_t* fix test and add documentation for new parameter* apply formatting patch* ensure that the relevant isa.issupported check exists in the test
dotnet/runtime,5cd7566c23bb9ce3b6e1600739abc8864e65e9ec,"Add bootstrapping build mechanism and enable for SourceBuild (#114285)

* Revert ""Publish with BaseOS RID when its present""

This reverts commit 38289afd3b894cab9368cf3b3b9117f8a72e6b49.

* WIP: Bootstrap build instead of staged build

* Fix bootstrap restore.

* Get ILC and crossgen2 publishing with bootstrap subset + use-bootstrap

* Remove two-stage build and convert to bootstrap build.

* Don't build OOB libs in bootstrapping. They're not needed

* Layout bootstrap files in a separate directory so our actual product build still builds everything.

It's slower but ensures that our binlogs for the product build still have everything in them.

* Fix condition for bootstrap in SB

* Various refactorings and put cdac on the same plan as ilc/crossgen2

* Strip double-dash options too as they can be specified

* Update eng/build.sh

Co-authored-by: Adeel Mujahid <3840695+am11@users.noreply.github.com>

* Update eng/DotNetBuild.props

Co-authored-by: Adeel Mujahid <3840695+am11@users.noreply.github.com>

* Apply suggestion

* Don't remove the source-built-upstream-cache folder

* Fix loongarch64 leg

* Generate breadcrumbs in runtime.proj (where we build the aotsdk folder).

Move BuildIntegration.proj to use Microsoft.Build.NoTargets

* Adjust trimming tests to hook into targetingpacks.targets refactored logic

* Add documentation

* Fix local apphost path hookup

* Docs feedback

* Build hosts in runtime-linker-tests now that we're using the live hosts.

* Use the targetingpacks.targets process for a live apphost

* PR feedback

* Add to build.sh

* Fix up RID graph in the bootstrapping

* Pass the right RID graph for NativeExports

* Fix bootstrap for community portable platforms

* Update eng/Subsets.props

Co-authored-by: Adeel Mujahid <3840695+am11@users.noreply.github.com>

* Update eng/Subsets.props

Co-authored-by: Adeel Mujahid <3840695+am11@users.noreply.github.com>

---------

Co-authored-by: Adeel Mujahid <3840695+am11@users.noreply.github.com>",2025-05-02 16:15:07+00:00,Jeremy Koritzinsky,1,f03b2abb2df31c3cad38b4cfb6038b86fdd8af3f,"Fix bootstrap paths to include TargetRid for platform-specific directories (#116302)

Co-authored-by: akoeplinger <1376924+akoeplinger@users.noreply.github.com>
Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>",29,263,137,"add bootstrapping build mechanism and enable for sourcebuild (issue_ref)* revert ""publish with baseos rid when its present""this reverts commit 38289afd3b894cab9368cf3b3b9117f8a72e6b49.* wip: bootstrap build instead of staged build* fix bootstrap restore.* get ilc and crossgen2 publishing with bootstrap subset + use-bootstrap* remove two-stage build and convert to bootstrap build.* don't build oob libs in bootstrapping. they're not needed* layout bootstrap files in a separate directory so our actual product build still builds everything.it's slower but ensures that our binlogs for the product build still have everything in them.* fix condition for bootstrap in sb* various refactorings and put cdac on the same plan as ilc/crossgen2* strip double-dash options too as they can be specified* update eng/build.sh"
dotnet/runtime,cec44d6dff9de95421f199f65bbc80b8296da1c0,"Interpreter EH support in the runtime (#114649)

* Interpreter EH support in the runtime

This change adds support for exception handling for cases when
interpreter frames participate in the process. That means when an
exception is thrown from an interpreter frame or when it is propagated
over interpreter frames. This doesn't add all the exception handling
support to the interpreter itself, there is a follow up PR that contains
that code.

* Fix arm64 build

* Fix few issues

* Fix non-windows amd64 builds

ifdef-out setting m_SSP in the InterpreterFrame

* Fix x86, arm and arm64 build break

* Fix incorrect assert

We cannot try to get the code manager from a crawl frame when it is not
on a frameless frame.

* Resuming after catch via native exception

This commit moves the resuming after catch to using native exception
handling instead of fragile context capturing, which was not correct
anyways.

It also adds handling of exceptions comming out of native runtime
methods called from the interpreter.

* Remove some unneeded stuff and fix Unix build

* Move the saved InterpExecMethod context regs

* Move the saved registers to the StackFrameIterator
* Fix MUSL build
* Add {Get/Set}{First/Second}ArgumentRegister to all architectures and use
  those in ExecuteFunctionBelowContext.

* Few fixes

* Fix builds with disabled interpreter

* One more MUSL build fix

* Implement proper GetFuncletStartAddress for interpreter

* Fix problem with missing managed FEATURE_INTERPRETER define

* Revert ""Implement proper GetFuncletStartAddress for interpreter""

This reverts commit d967861d818e98af2d5eac6c6dee5492319c4353.",2025-05-02 16:51:15+00:00,Jan Vorlicek,1,db0da9410892493c393bfa8928736670828af120,"Fix incorrect codemanager implementation on x86 (#115391)

* Fix incorrect codemanager implementation on x86

* Re-enable perf optimization for stackwalk scenairio in EECodeManager::GetAmbientSP",26,1692,1170,"interpreter eh support in the runtime (issue_ref)* interpreter eh support in the runtimethis change adds support for exception handling for cases wheninterpreter frames participate in the process. that means when anexception is thrown from an interpreter frame or when it is propagatedover interpreter frames. this doesn't add all the exception handlingsupport to the interpreter itself, there is a follow up pr that containsthat code.* fix arm64 build* fix few issues* fix non-windows amd64 buildsifdef-out setting m_ssp in the interpreterframe* fix x86, arm and arm64 build break* fix incorrect assertwe cannot try to get the code manager from a crawl frame when it is noton a frameless frame.* resuming after catch via native exceptionthis commit moves the resuming after catch to using native exceptionhandling instead of fragile context capturing, which was not correctanyways.it also adds handling of exceptions comming out of native runtimemethods called from the interpreter.* remove some unneeded stuff and fix unix build* move the saved interpexecmethod context regs* move the saved registers to the stackframeiterator* fix musl build* add {get/set}{first/second}argumentregister to all architectures and use those in executefunctionbelowcontext.* few fixes* fix builds with disabled interpreter* one more musl build fix* implement proper getfuncletstartaddress for interpreter* fix problem with missing managed feature_interpreter define* revert ""implement proper getfuncletstartaddress for interpreter""this reverts commit d967861d818e98af2d5eac6c6dee5492319c4353."
dotnet/runtime,d7e5d95ec3b5de2c5286fd8446a56bd6aafa090e,"[main] Source code updates from dotnet/dotnet (#115214)

* [VMR] Codeflow 825ee67-825ee67

[[ commit created by automation ]]

* Update dependencies from https://github.com/dotnet/dotnet build 266608

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Viktor Hofer <viktor.hofer@microsoft.com>",2025-05-02 18:26:16+00:00,dotnet-maestro[bot],0,,,6,94,105,[main] source code updates from dotnet/dotnet (issue_ref)* [vmr] codeflow 825ee67-825ee67[[ commit created by automation ]]* update dependencies from build 266608---------
dotnet/runtime,7fae5e0ba7b6cc0c841f22a25564c84f7afb53e6,"Support SLH-DSA keys in certs (#115212)

Co-authored-by: Kevin Jones <vcsjones@github.com>",2025-05-02 20:48:02+00:00,Pranav Senthilnathan,1,dd75c45c123055baacd7aa4418f425f412797a29,Fix SLH-DSA key to use SHA-1 MAC for Windows support,44,15293,437,support slh-dsa keys in certs (issue_ref)
dotnet/runtime,97ad3a7365b46d3edacf69710e4dc2d3d3d1930f,"JIT: Accelerate long -> floating casts on x86 (#113930)

* use SIMD conversion instructions for long -> floating casts

* move transform to DecomposeLongs, restore double intermediate

* formatting

* handle constants

---------

Co-authored-by: Bruce Forstall <brucefo@microsoft.com>",2025-05-02 20:59:26+00:00,Clinton Ingram,0,,,2,94,22,"jit: accelerate long -> floating casts on x86 (issue_ref)* use simd conversion instructions for long -> floating casts* move transform to decomposelongs, restore double intermediate* formatting* handle constants---------"
dotnet/runtime,8b00880aadf2a5a8e62f2f3e41d5e9c05d64dd58,"JIT: Shrink data section for const vector loads (#114040)

* shrink data for scalar instructions with contained const vectors

* allow CreateScalarUnsafe to remain scalar const

* formatting

* revert CreateScalarUnsafe changes

* shrink constants in genSetRegToConst

* fix build

* fix throughput regression

* use correct instruction for SIMD8

* update compress logic

* add comment

---------

Co-authored-by: Bruce Forstall <brucefo@microsoft.com>",2025-05-02 21:04:07+00:00,Clinton Ingram,1,bfa124fa79d8fb89d18bc40b26158407490393ef,"JIT: Speed up floating to integer casts on x86/x64 (#114410)

* speed up floating to integer conversion

* fix linux build

* fix double->uint SSE, don't use fixupimm",15,177,231,jit: shrink data section for const vector loads (issue_ref)* shrink data for scalar instructions with contained const vectors* allow createscalarunsafe to remain scalar const* formatting* revert createscalarunsafe changes* shrink constants in gensetregtoconst* fix build* fix throughput regression* use correct instruction for simd8* update compress logic* add comment---------
dotnet/runtime,9e490ef9baac042819f29356afaf821c926e4476,"Convert JIT_Box* to C# (#115134)

* Convert JIT_Box* to C#

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-05-02 21:19:10+00:00,Adeel Mujahid,1,9bcd3e75a2984537470cb0b6f9bf043f48cc8307,"[RuntimeAsync] Make runtime async tests to build and pass locally. (#115499)

* missing parts to make tests buildable

* move tests into directories

* intrisics location

* fix for arm64",21,125,365,convert jit_box* to c# (issue_ref)* convert jit_box* to c#---------
dotnet/runtime,0654416af35b729fd3620b2dc41208a22fc8b977,"Add VMOVD VMOVW APIs in JIT (#115068)

Co-authored-by: Bruce Forstall <brucefo@microsoft.com>",2025-05-02 21:59:43+00:00,Khushal Modi,0,,,6,76,41,add vmovd vmovw apis in jit (issue_ref)
dotnet/runtime,458b1193d0086b5c9fcbe75db4330fb4b2e88c1e,"Fix globalization test on mobile platforms (#115248)

* Fix globalization test on mobile platforms

* Update src/libraries/System.Runtime/tests/System.Globalization.Tests/CultureInfo/CultureInfoCtor.cs

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>

* minor update

* fix comment

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-05-02 23:22:59+00:00,Tarek Mahmoud Sayed,1,67a567fbe704655be5387f2fa3ca555d22c39844,"Fix Creating Undermined Culture (#115919)

* Fix Creating Undermined Culture

* Update src/libraries/System.Private.CoreLib/src/System/Globalization/CultureData.cs

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>

* Update to work on OSX

* restore removed empty line

* Feedback

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",1,21,4,fix globalization test on mobile platforms (issue_ref)* fix globalization test on mobile platforms* update src/libraries/system.runtime/tests/system.globalization.tests/cultureinfo/cultureinfoctor.cs
dotnet/runtime,0c6ac9cc12e855b8f364d62f7e388ec0c036d56f,"Minor tensor fixes (#115125)

* minor tensor fixes

* Update src/libraries/System.Numerics.Tensors/src/System/Numerics/Tensors/netcore/Tensor.cs

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>

* Update src/libraries/System.Numerics.Tensors/src/System/Numerics/Tensors/netcore/Tensor.cs

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>

* pr updates

* fixing reshape

* reverting co-pilot suggestions

* added some comments to clarify dimension

* add checked

* fixes from pr comments

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-05-02 23:56:41+00:00,Michael Sharp,1,fdbe38ce16671ae356e2bad21479e38b61d03340,"Expose IsDense, HasAnyDenseDimensions, and ToDenseTensor (#115435)

* Expose IsDense, HasAnyDenseDimensions, and ToDenseTensor

* Ensure HasAnyDenseDimensions is exposed by Tensor<T>

* Fix spelling

* Update CompatibilitySuppressions for S.N.Tensors as its experimental

* Ensure minimumNonZeroStride is handled when 0

* Ensure the assert handles IsEmpty not being dense

* Don't assert that dense spans aren't empty

* Ensure slice sets HasAnyDenseDimensions

* Don't assert that a non-dense array cannot have equal flattened and linear lengths",4,126,97,minor tensor fixes (issue_ref)* minor tensor fixes* update src/libraries/system.numerics.tensors/src/system/numerics/tensors/netcore/tensor.cs
dotnet/runtime,4352c7a1d4a71d63cf80cfd8f7c19036bcf131a8,"Attempt to load X.509 keys as ECDH keys first

Windows CNG EC keys always have a key usage attached to them. ECDH keys can be treated as either ECDH or ECDSA. However, a CNG key with ECDSA usage can only be used as ECDSA.

When we import a PEM aggregate with an ECC private key, we should attempt to import it as ECDH first, if the certificate's key usage permits it. This will allow the imported key to act as either ECDH or ECDSA.

However, if we attempt to import as ECDSA first, it will succeed however not have the correct key usage, preventing it from being used as ECDH.",2025-05-03 02:14:00+00:00,Kevin Jones,0,,,2,60,12,"attempt to load x.509 keys as ecdh keys firstwindows cng ec keys always have a key usage attached to them. ecdh keys can be treated as either ecdh or ecdsa. however, a cng key with ecdsa usage can only be used as ecdsa.when we import a pem aggregate with an ecc private key, we should attempt to import it as ecdh first, if the certificate's key usage permits it. this will allow the imported key to act as either ecdh or ecdsa.however, if we attempt to import as ecdsa first, it will succeed however not have the correct key usage, preventing it from being used as ecdh."
dotnet/runtime,6a3747bf868f5a7774c336103c0b48e7275958e5,"Dump more info in JitDump for HWIHNTRINSIC nodes (#115255)

In particular, dump `gtSimdSize` and `gtAuxiliaryJitType`.

Example:
```
old:
HWINTRINSIC simd64 long InsertVector128
HWINTRINSIC mask   long ConvertVectorToMask

new:
HWINTRINSIC simd64 64 long InsertVector128
HWINTRINSIC mask   64 long ConvertVectorToMask
```",2025-05-03 06:05:21+00:00,Bruce Forstall,1,e42c072da6a7cd43fce9144774dd8e4bde1062fb,"Vector128.WithElement codegen regression in .NET 9.0 (#115348)

* JIT: Enhance range checking for SIMD element node creation for non constant index

* JIT: Enhance handling of non-constant index in LowerHWIntrinsicWithElement

* JIT: Remove conditional handling for non-constant index that caused a user call.

* JIT: Optimize handling of non-constant index for SIMD WithElement

* JIT: Comment out handling for NI_Vector128_WithElement in RewriteHWIntrinsicAsUserCall

* JIT: Update instruction for storing SIMD values to use emitIns_ARX_R with ins_Move_Extend

* JIT: Remove handling for NI_Vector*_WithElement and related SIMD cases in RewriteHWIntrinsicAsUserCall

* JIT: Assert op2 is not a constant for Vector*_WithElement and fix store to load instruction

* JIT: Remove if checking because of the previous assert",1,12,7,"dump more info in jitdump for hwihntrinsic nodes (issue_ref)in particular, dump and .example:"
dotnet/runtime,d57b9d6ddf4bae97bf3f68be20f35dddbddf6558,Remove HMF from IL_Throw/IL_ThrowExact/IL_Rethrow (#115253),2025-05-03 20:50:30+00:00,Filip Navara,1,23c9717d874918dcf3814cc772501bd50030fd8b,"Fix issues are stackwalking, and viewing Exception stack walks in the debugger (#115405)

* Fix issue where SoftwareExceptionFrame on non EH Funclet model X86 was mishandled by the DAC

* Fix issue where EH stack traces aren't properly visible in the debugger",6,57,46,remove hmf from il_throw/il_throwexact/il_rethrow (issue_ref)
dotnet/runtime,712b3fcc2190d532c86ac3bfda9882c4347a7a6b,"JIT: refactor escape analysis to be more bv-centric (#115213)

Make the ""bv index"" the primary concept for computations; translate
from local var nums to their indices when needed.

Allocate all the connection BVs at once, since the connection matrix
will now have a dense set of entries.

This is prep work for tracking fields of stack allocatable objects,
where we will introduce new classes of things tracked by the
connection graph.",2025-05-04 16:04:07+00:00,Andy Ayers,0,,,2,296,229,"jit: refactor escape analysis to be more bv-centric (issue_ref)make the ""bv index"" the primary concept for computations; translatefrom local var nums to their indices when needed.allocate all the connection bvs at once, since the connection matrixwill now have a dense set of entries.this is prep work for tracking fields of stack allocatable objects,where we will introduce new classes of things tracked by theconnection graph."
dotnet/runtime,456e1fe3909c0ef47cab4471e7ede424196de668,"Mark CoreLib Internal.Console methods with NoInline (#115282)

- Matches public System.Console
- Makes optimized code easier to understand when one uses WriteLine debugging",2025-05-04 23:42:44+00:00,Jan Kotas,0,,,5,16,0,mark corelib internal.console methods with noinline (issue_ref)- matches public system.console- makes optimized code easier to understand when one uses writeline debugging
dotnet/runtime,9a0b450a140aea784c60a445fe365d7e6cff72ec,"Delete obsolete code in metadata (#115292)

* Delete HasV1Metadata
* Delete SetVerifiedByTrustedSource
* Delete FILE_VER_MINOR_v0 (support for NT5 Beta)
* Delete STORAGE_MAGIC_OLD_SIG
* Delete GetImageRuntimeVersionString
* Delete support for Whidbey Beta metadata format
* Delete SetOptimizeAccessForSpeed
* Delete GetRvaOffsetData
* Delete dead SingleCLR code
* Delete CreateObjectV1",2025-05-05 06:46:53+00:00,Jan Kotas,0,,,15,4,285,delete obsolete code in metadata (issue_ref)* delete hasv1metadata* delete setverifiedbytrustedsource* delete file_ver_minor_v0 (support for nt5 beta)* delete storage_magic_old_sig* delete getimageruntimeversionstring* delete support for whidbey beta metadata format* delete setoptimizeaccessforspeed* delete getrvaoffsetdata* delete dead singleclr code* delete createobjectv1
dotnet/runtime,11afd861995af15d9ac0930ac069813f560e4e9f,"Defer RemoteCertificate assignment after X509 Chain build (#114781)

* Defer RemoteCertificate assignment after X509 Chain build

* Add comment",2025-05-05 07:34:18+00:00,Radek Zikmund,1,3d2e38acd24f5216c0cf6e3c50e2221ff8e48a80,"Add option to disable particular TLS signature algorithms (#114741)

* Dirty WIP on Windows

* Linux half of the experiment

* OpenSSL configure signature algorithm WIP

* Fix windows

* Rename to EnableRsaPkcsPad

* Minor changes

* Rename in accordance to approved API shape

* Remove unintended change

* Set also client sigalgs

* Minor changes

* Fix build

* Add unit test

* Fix interaction with TLS session caching

* Fix linux build

* Fix linux filtering

* Code review feedback

* Reuse string resource

* recognize MLDSA sigalgs

* Scope tests to Windows and OSX

* Throw PNSE on unsupported platforms, add supported os annotation

* Disable tests on Windows Nano

* Fix typo

* Fix build

* fixup! Disable tests on Windows Nano",1,7,4,defer remotecertificate assignment after x509 chain build (issue_ref)* defer remotecertificate assignment after x509 chain build* add comment
dotnet/runtime,4ad073bd60dccc1589693d81a409c6cdf737387a,Allow access to SslStream connection info from certificate validation callback. (#115186),2025-05-05 11:48:23+00:00,Radek Zikmund,0,,,2,3,2,allow access to sslstream connection info from certificate validation callback. (issue_ref)
dotnet/runtime,55863073ee388e4d172aa64e0045e0ed3be79f20,"[wasm][aot] Fix op_OnesComplement on wasm and enable ceil/floor (#115151)

Fix the Wasm AOT implementations of  Vector128 ~/Ceil/Floor",2025-05-05 12:36:36+00:00,Larry Ewing,1,e8617b7d6f267976e1cb051b4cc51ccc3e095902,"[wasm][aot] Reenable AOT System.Runtime.Intrinsics/tests and fix problems that exposed (#115204)

Enable System.Runtime.Intrinsics/tests in wasm smoke tests then fix the Shuffle intrinsics crash the tests exposed.

See #115062 for details.

The crash would happen when a non-constant index vector was passed to the llvm shuffle intrinsic which was exposed when the ShuffleNative path was added to the tests. The PR works around it by using the swizzle intrinsic which does not require a const index vector. If this does cause a regression it we should be able to restore the original implementation when we can verify a constant index vector is being passed.

This also fixes the PackedSimd.Min/Max intrinsic implementation which had accidentally reversed min an max.

Fixes #115203
* Fix the aot min/max intrinsics",1,3,1,[wasm][aot] fix op_onescomplement on wasm and enable ceil/floor (issue_ref)fix the wasm aot implementations of vector128 ~/ceil/floor
dotnet/runtime,43955cb086eb88dbe78f1764c21dd3362a2427ee,"Use Span<T>-based methods in System.Net.Mail (#115111)

* Span-based IByteEncoder

* IEncodableStream.DecodeBytes

* IEncodableStream.EncodeBytes

* DelegatedStream and derived implementations.

* Minor changes

* Update src/libraries/System.Net.Mail/src/System/Net/Base64Stream.cs

* Apply suggestions from code review

* Code review feedback

* Removed TODO

* Minor changes

* Consistent exceptions",2025-05-05 14:01:12+00:00,Radek Zikmund,0,,,16,384,400,use span<t>-based methods in system.net.mail (issue_ref)* span-based ibyteencoder* iencodablestream.decodebytes* iencodablestream.encodebytes* delegatedstream and derived implementations.* minor changes* update src/libraries/system.net.mail/src/system/net/base64stream.cs* apply suggestions from code review* code review feedback* removed todo* minor changes* consistent exceptions
dotnet/runtime,e8617b7d6f267976e1cb051b4cc51ccc3e095902,"[wasm][aot] Reenable AOT System.Runtime.Intrinsics/tests and fix problems that exposed (#115204)

Enable System.Runtime.Intrinsics/tests in wasm smoke tests then fix the Shuffle intrinsics crash the tests exposed.

See #115062 for details.

The crash would happen when a non-constant index vector was passed to the llvm shuffle intrinsic which was exposed when the ShuffleNative path was added to the tests. The PR works around it by using the swizzle intrinsic which does not require a const index vector. If this does cause a regression it we should be able to restore the original implementation when we can verify a constant index vector is being passed.

This also fixes the PackedSimd.Min/Max intrinsic implementation which had accidentally reversed min an max.

Fixes #115203
* Fix the aot min/max intrinsics",2025-05-05 17:15:06+00:00,Larry Ewing,1,2f8efe6cd00bbad3968ab9ad613be5cfcb20324d,"[wasm] Use packedsimd in hexconverter (#115062)

Implement a PackedSimd vectorized version of Hexconverter.TryDecodeFromUtf16

Then fix several things that were broken in the AOT intrinsics to make that optimization work.
- a fix for PackedSimd.BitwiseSelect argument ordering
- removing OP_WASM_ONESCOMPLEMENT and using the common path for OP_ONES_COMPLEMENT now that llvm is fixed
- additional tests",3,29,15,[wasm][aot] reenable aot system.runtime.intrinsics/tests and fix problems that exposed (issue_ref)enable system.runtime.intrinsics/tests in wasm smoke tests then fix the shuffle intrinsics crash the tests exposed.see issue_ref for details.the crash would happen when a non-constant index vector was passed to the llvm shuffle intrinsic which was exposed when the shufflenative path was added to the tests. the pr works around it by using the swizzle intrinsic which does not require a const index vector. if this does cause a regression it we should be able to restore the original implementation when we can verify a constant index vector is being passed.this also fixes the packedsimd.min/max intrinsic implementation which had accidentally reversed min an max.fixes issue_ref* fix the aot min/max intrinsics
dotnet/runtime,86949c2fc8866bb56d320c8f12d501f6034336d7,"Update DotNetBuild.props (#115229)

* Update DotNetBuild.props

The `CategorizeRuntimeSupplementalArtifacts` target isn't necessary anymore as SB doesn't produce an intermediate package anymore.

* Update eng/DotNetBuild.props

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-05-05 17:34:36+00:00,Viktor Hofer,0,,,1,0,34,update dotnetbuild.props (issue_ref)* update dotnetbuild.propsthe target isn't necessary anymore as sb doesn't produce an intermediate package anymore.* update eng/dotnetbuild.props
dotnet/runtime,efee748ff6f18f80154bc6b6e277bd51481c56e3,"Automated bump of chrome version (#115276)

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>
Co-authored-by: Ilona Tomkowicz <32700855+ilonatommy@users.noreply.github.com>
Co-authored-by: Larry Ewing <lewing@microsoft.com>",2025-05-05 20:41:53+00:00,github-actions[bot],0,,,1,4,4,automated bump of chrome version (issue_ref)
dotnet/runtime,2f3b6e9297e97925d809ca30e3b9e8537ee394fe,"JIT: more bv-centric refactoring for escape analysis (#115291)

Rework connection graph building in anticipation of having
potentially different sorts of escapes happen as we walk up a tree
and switch which resource we are tracking.

For example we may discover that a local doesn't escape in this tree,
but its fields can escape.

Make the ancestor walk responsible for recording escapes, instead
of deferring to its caller.

Also address a few small things deferred from the previous refactor.",2025-05-05 22:47:50+00:00,Andy Ayers,0,,,2,70,51,"jit: more bv-centric refactoring for escape analysis (issue_ref)rework connection graph building in anticipation of havingpotentially different sorts of escapes happen as we walk up a treeand switch which resource we are tracking.for example we may discover that a local doesn't escape in this tree,but its fields can escape.make the ancestor walk responsible for recording escapes, insteadof deferring to its caller.also address a few small things deferred from the previous refactor."
dotnet/runtime,de08ba00cc31e42f5b4e0667acae0b68f4c4dd10,"Use whole-archive to ensure DAC exports are preserved (#115309)

daccess and corguids archives are needed for DAC initialization
Preserving PAL in DAC is needed for DBI to use a consistent PAL.",2025-05-05 22:55:09+00:00,Juan Hoyos,1,e67e997094b65c8ed7289b00f2304288d8f75a12,"Delete --whole-archive linking in libmscordaccore.so (#115418)

Fixes #115316",1,8,0,use whole-archive to ensure dac exports are preserved (issue_ref)daccess and corguids archives are needed for dac initializationpreserving pal in dac is needed for dbi to use a consistent pal.
dotnet/runtime,de2992dce4c0caa10a511bd4fe15a43b48d6156b,Clean up stale debugger-related surface area in ThreadPool and Task{Scheduler} (#115210),2025-05-06 00:07:38+00:00,Eduardo Velarde,1,4bdcb8d4b40cae07b3a654d378e0b58bf7d62dd7,Fix invalid continuation caused by exception after inlining in `TryRunInline` (#115659),5,0,37,clean up stale debugger-related surface area in threadpool and task{scheduler} (issue_ref)
dotnet/runtime,5ccaddf2ca7676ef06f0352fd6c0b94eb7ab72b4,"[clr-interp] Fix access of boxed static fields address (#115198)

Previous code was assuming that the field address obtained from the runtime points to the address where the field value resides. This is false for CORINFO_FLG_FIELD_STATIC_IN_HEAP fields, where at the field address we actually have the boxed instance reference, so we need to access the field value inside this box object instead.",2025-05-06 12:30:53+00:00,Vlad Brezae,1,08cb954444914798a1a7e41737447c26b134169e,"Interpreter GC info stage 3: Report locals to the GC (#114469)

Allocate stack slot IDs for interp vars and record liveness ranges
Specialize GetStackSlot for the interpreter because we stash the actual stack location in the frame register
Handle allocation failure in simdhash
Add test coverage for structs containing refs
Patch initlocals once we have allocated offsets so that we zero our vars in addition to IL vars (GC safety)
Introduce globalVarsStackTop, the high water mark for global vars that might contain refs or interior pointers
Enable disabled tests",1,20,0,"[clr-interp] fix access of boxed static fields address (issue_ref)previous code was assuming that the field address obtained from the runtime points to the address where the field value resides. this is false for corinfo_flg_field_static_in_heap fields, where at the field address we actually have the boxed instance reference, so we need to access the field value inside this box object instead."
dotnet/runtime,ff5fdabe1fbbec44f856974a93ac5d6fd7277b1b,[mono][metadata] Defer class init for T when initializing T[]. (#115278),2025-05-06 12:31:13+00:00,Vlad Brezae,0,,,1,9,6,[mono][metadata] defer class init for t when initializing t[]. (issue_ref)
dotnet/runtime,81899bbcb38ef43ae73b0eaf5dcf38234f8d875b,"[cDAC] Implement ISOSDacImpl.GetAssemblyList (#114800)

* Implement AssemblyIteration in cDAC
* Parse ArrayListBase in cDAC",2025-05-06 13:52:40+00:00,Max Charlamb,1,01e5fa15aa1cfb22f98bd4dc1d3d20154e71d629,"[cDAC] Fix issues found when running full SOS test suite (#115432)

* #114800 broke ISOSDacInterface::GetModuleData as it enforced only sending values defined in the cDAC. Adds all used flags to cDAC.
* ISOSDacInterface::GetFrameName now works on all Frame names
* ISOSDacInterface::GetFrameName properly returns the number of characters needed following quirks of DAC implementation
* IXCLRDataModule::GetFlags now uses the correct enum value
* ISOSDacInterface::GetAssemblyList follows quirks of DAC interface exactly",16,572,6,[cdac] implement isosdacimpl.getassemblylist (issue_ref)* implement assemblyiteration in cdac* parse arraylistbase in cdac
dotnet/runtime,aa3b8020cfab13b80fe571b649047a1c823a9cf6,"[main] Source code updates from dotnet/dotnet (#115257)

* Update dependencies from https://github.com/dotnet/dotnet build 266652

* [VMR] Codeflow 27604b5-27604b5

[[ commit created by automation ]]

* Update dependencies from https://github.com/dotnet/dotnet build 266849

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Viktor Hofer <viktor.hofer@microsoft.com>",2025-05-06 14:48:21+00:00,dotnet-maestro[bot],0,,,5,97,114,[main] source code updates from dotnet/dotnet (issue_ref)* update dependencies from build 266652* [vmr] codeflow 27604b5-27604b5[[ commit created by automation ]]* update dependencies from build 266849---------
dotnet/runtime,c68a1becda28359186b181715c1f12d1e3e2bcb2,Align SlhDsa API with MLKem (#115290),2025-05-06 15:39:24+00:00,Pranav Senthilnathan,0,,,10,255,134,align slhdsa api with mlkem (issue_ref)
dotnet/runtime,6a3a32e2574778edcd9602a468b00c21cc400a57,"[Perf] Add build time measurements for apple mobile and android scenarios (#113469)

* Upload build logs

* Rename artifact names to avoid overriding

* Add build time scenarios

* Run build time scenarios

* Use wildcard for binlog files

* Use 'buildtime' instead of 'devicebuild'",2025-05-06 18:26:05+00:00,Milos Kotlar,1,438d2c4b6a457b21fde135b6935bf0a11cbab520,"[Android] Support static linking of CoreCLR on Android (#114629)

* Update ApkBuilder to support static linking

* Add static libs to the framework directory

* Add static libs to the runtime pack

* Fix formatting

* Add object libraries for Android static linking

* Install libcoreclrpal.a as it is linked using -Wl,--whole-archive

* Fix x64 static linking

* Add gc_vxsort objects

* Add static test project

* Fix MainLibraryFileName in Android.Device_Emulator.JIT.Static.Test project

* Update src/coreclr/gc/vxsort/CMakeLists.txt

Co-authored-by: Adeel Mujahid <3840695+am11@users.noreply.github.com>

* Update src/coreclr/gc/unix/CMakeLists.txt

Co-authored-by: Adeel Mujahid <3840695+am11@users.noreply.github.com>

* Update CMakeLists.txt to conditionally link gc_pal_objects for Android

* Test static linking on linux

* Fix typo

* Revert gc_pal changes to test the build

* Revert changes

* Add gcinfo library

* Conditionally add gcinfo

* FIx formatting

* Switch from static to object

* Fix coreclr build

* Remove unnecessary static library installation for Android

* Update static libraries to be based on the object libraries

* Add coreclrpal_objects

---------

Co-authored-by: Adeel Mujahid <3840695+am11@users.noreply.github.com>",3,13,1,[perf] add build time measurements for apple mobile and android scenarios (issue_ref)* upload build logs* rename artifact names to avoid overriding* add build time scenarios* run build time scenarios* use wildcard for binlog files* use 'buildtime' instead of 'devicebuild'
dotnet/runtime,34fae1f4a61e8a49aec7871b538a5a3916feb9fd,"Onboard the GitHub Action based Issue-Labeler (#115256)

* Import v2.0.0 issue-labeler default workflows

* issue-labeler workflow customization for dotnet/runtime

* Document issue-labeler workflow setup and config

* Add comments referencing the labeler.md

* Make labeler.md wording copy-able across repos",2025-05-06 19:02:14+00:00,Jeff Handley,0,,,6,421,0,onboard the github action based issue-labeler (issue_ref)* import v2.0.0 issue-labeler default workflows* issue-labeler workflow customization for dotnet/runtime* document issue-labeler workflow setup and config* add comments referencing the labeler.md* make labeler.md wording copy-able across repos
dotnet/runtime,26c9fb8e747ec936ff93b27e8c4de7e6bc43ec70,update macos signing to use pme (#115342),2025-05-06 21:29:19+00:00,Oleksandr Didyk,0,,,1,7,6,update macos signing to use pme (issue_ref)
dotnet/runtime,3912272376c328a3a40e04363e9fdec5d8b0014a,Handle not supported name constraints on Linux,2025-05-06 22:20:04+00:00,Kevin Jones,1,24954fbac16e586d0466032bb886aec61e8f4a3d,Improve OpenSSL unmapped error exception to include the mapping function name and the error code,7,612,0,handle not supported name constraints on linux
dotnet/runtime,1db7a9c52f49b33a35fd96d45d5d4aad4a987576,Remove OOM test (#115341),2025-05-06 23:55:55+00:00,Pranav Senthilnathan,0,,,1,0,24,remove oom test (issue_ref)
dotnet/runtime,9e84f5eba0effdf4f75f52a5c1465e08918a75a4,Enhance SqlDbType with vector (#115327),2025-05-07 07:34:54+00:00,Apoorv Deshmukh,0,,,2,6,0,enhance sqldbtype with vector (issue_ref)
dotnet/runtime,09b3b93b39b9cf9e9c3be0fe7da9ee173a5f444c,"Haiku: Add native library network support (#114523)

Stub away non-critical network library functions that Haiku does not
support.

Co-authored-by: Aaron Robinson <arobins@microsoft.com>",2025-05-07 08:27:57+00:00,Trung Nguyen,1,e53094dc42d50043567857d490a677e16464785f,"Fix compiler warning for unreachable code in PAL network interfaces (#117417)

Co-authored-by: Adeel Mujahid <3840695+am11@users.noreply.github.com>
Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2,16,1,haiku: add native library network support (issue_ref)stub away non-critical network library functions that haiku does notsupport.
dotnet/runtime,dbe81db12eb99006c2b47f6fad4647b3c98774d6,"Swallow CryptographicExceptions when adding certificates to store (#115190)

* Swallow CryptographicExceptions when attempting to add certificates to store during SslStreamCertificateContext.Create

* Code review feedback",2025-05-07 11:29:30+00:00,Radek Zikmund,0,,,1,20,3,swallow cryptographicexceptions when adding certificates to store (issue_ref)* swallow cryptographicexceptions when attempting to add certificates to store during sslstreamcertificatecontext.create* code review feedback
dotnet/runtime,3bacc83b4f3d21df591cc25b667b5198d8cebcff,"Replace NET6_0 with NET (#115209)

* Replace NET6_0 with NET

* Update IpcSocket.cs

* Update Microsoft.Diagnostics.NETCore.Client.csproj",2025-05-07 13:04:49+00:00,kasperk81,0,,,3,5,5,replace net6_0 with net (issue_ref)* replace net6_0 with net* update ipcsocket.cs* update microsoft.diagnostics.netcore.client.csproj
dotnet/runtime,54bec5fc880c5d2cceca8a40329df34b2d0136d8,"[mono][aot] optimize aot Unsafe.BitCast for more cases (#115130)

Handle more Unsafe.BitCast cases in AOT",2025-05-07 18:56:02+00:00,Larry Ewing,1,1db21010be752e1e6e601b43c1ba9e0ed1efadb2,"[mono] Exclude 32bit more (#115426)

Fix unintentional 32bit arm/x86 mono platform breakage",1,34,16,[mono][aot] optimize aot unsafe.bitcast for more cases (issue_ref)handle more unsafe.bitcast cases in aot
dotnet/runtime,d94bcbde28dc4aa79dd6f2451ba71bbe752f5066,"Fix config source gen with Dictionary with nullable Enum value (#115350)

* Fix config source gen with Dictionary with nullable Enum value

* Update src/libraries/Microsoft.Extensions.Configuration.Binder/gen/Emitter/CoreBindingHelpers.cs

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>

* Update the fix to match the collection binding

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-05-07 20:26:14+00:00,Tarek Mahmoud Sayed,1,9fa2ecbe80703f7cb0cb97fbbd0999df75db129d,Fix using right configuration provider order when getting configuration value (#117474),3,40,1,fix config source gen with dictionary with nullable enum value (issue_ref)* fix config source gen with dictionary with nullable enum value* update src/libraries/microsoft.extensions.configuration.binder/gen/emitter/corebindinghelpers.cs
dotnet/runtime,ac760bf5215a876647bea662df4ecc2e218dd221,"Create a single copy of stub templates (#114462)

Instead of generating stub templates by running the code page generation function for each stub code region that is generated, map a single file into memory in multiple locations instead. This logic is architected so that it can fall back to the previous model of using the double mapping logic to generate the stubs.

We implement 3 schemes for finding the to use as mapping data.
1. On apple platforms, we compile the stubs into the coreclr Mach-O file, and use the virtual memory manager support for mapping memory from the coreclr binary into various locations on the heap.
3. On Unix platforms that are not Apple derived we use an anonymous in memory file just like our normal executable allocation path.
3. On Linux platforms, we *can* compile the stubs into the coreclr ELF file, and then use the `dladdr` and `dl_iterate_phdr` functionality to find the file name of the coreclr binary and the section that contains it, and then we can use mmap to map from the file directly into memory. This mode is disabled by default as it doesn't support all scenarios, but it does allow for testing of the majority of the logic used on Apple platforms on a Linux machine.
4. On Windows platforms, we currently do not yet support this mode.",2025-05-07 21:46:03+00:00,David Wrighton,0,,,16,904,50,"create a single copy of stub templates (issue_ref)instead of generating stub templates by running the code page generation function for each stub code region that is generated, map a single file into memory in multiple locations instead. this logic is architected so that it can fall back to the previous model of using the double mapping logic to generate the stubs.we implement 3 schemes for finding the to use as mapping data.1. on apple platforms, we compile the stubs into the coreclr mach-o file, and use the virtual memory manager support for mapping memory from the coreclr binary into various locations on the heap.3. on unix platforms that are not apple derived we use an anonymous in memory file just like our normal executable allocation path.3. on linux platforms, we *can* compile the stubs into the coreclr elf file, and then use the and functionality to find the file name of the coreclr binary and the section that contains it, and then we can use mmap to map from the file directly into memory. this mode is disabled by default as it doesn't support all scenarios, but it does allow for testing of the majority of the logic used on apple platforms on a linux machine.4. on windows platforms, we currently do not yet support this mode."
dotnet/runtime,ed8142aead337492bc7b594374ca1e4d66c5ca9a,"Add ML-DSA, SLH-DSA to dynamic certificate chain tests; make SslStream on Linux work with PQC certs.

* Enable revocation list tests for ML-DSA and SLH-DSA
* Enlighten SslStreamCertificateContext about PQC",2025-05-07 22:43:10+00:00,Pranav Senthilnathan,0,,,2,45,3,"add ml-dsa, slh-dsa to dynamic certificate chain tests; make sslstream on linux work with pqc certs.* enable revocation list tests for ml-dsa and slh-dsa* enlighten sslstreamcertificatecontext about pqc"
dotnet/runtime,1b5f93069a92615938c16cb10e363abee2768bd2,Add support for more libicu versions (#115374),2025-05-07 23:19:30+00:00,Nikola Milosavljevic,0,,,1,1,1,add support for more libicu versions (issue_ref)
dotnet/runtime,052da60b09439b1b82dd931fa40a46e2b089eadc,Remove `_PREFAST_` and `_PREFIX_` (#115355),2025-05-08 03:11:46+00:00,Aaron Robinson,1,6188ca493838bf8a17f1a02bade39a4da449f506,"Fix generation of minidump (#115562)

This PR addresses a minidump generation issue by wrapping IL version method calls with a try-catch block to ensure that an exception in GetIL doesn’t prevent dumping a full callstack.

Wraps GetIL and related ILCodeVersion calls in an exception block
Uses EX_CATCH_RETHROW_ONLY_COR_E_OPERATIONCANCELLED to selectively rethrow only specific exceptions",152,1960,2847,remove and (issue_ref)
dotnet/runtime,b9d7c8b0c8f119e4cce8528b89b14cb3177b2c84,Disable stacks on Debugger IPC events (#114585),2025-05-08 04:23:22+00:00,Tom McDonald,0,,,1,6,0,disable stacks on debugger ipc events (issue_ref)
dotnet/runtime,177b1cf23a066e09719742ceae99dbc9744ee1dc,"update netcoreapp3.0 to NetCoreAppCurrent in test (#115373)

* update netcoreapp3.0 to NetCoreAppCurrent in test

* NETCOREAPP to NET",2025-05-08 11:55:08+00:00,kasperk81,0,,,10,11,11,update netcoreapp3.0 to netcoreappcurrent in test (issue_ref)* update netcoreapp3.0 to netcoreappcurrent in test* netcoreapp to net
dotnet/runtime,241e386291359b22226144fee343262da0fbe9d0,[LoongArch64] Add variable lifetime update for GT_STOREIND for LoongArch64 porting from upstream's #46206 (#114988),2025-05-08 13:56:24+00:00,Liu An,1,30779a120b9604d0b7c409b9a385fb54825e36a0,"[LoongArch64] Fix NativeAOT libs.tests error: System.Runtime.Tests & System.Runtime.Numerics.Tests. (#115598)

* Fix the boundary error with `imm = (~0)` for `Unsigned GT_LE/GT_GT` in `CodeGen::genCodeForCompare()`.
* Fix the IntCastOverflowPositiveCheck with `UINT32_MAX` in `CodeGen::genIntCastOverflowCheck()`.
* Optimize `CodeGen::genIntCastOverflowCheck()` similar to riscv.",1,3,0,[loongarch64] add variable lifetime update for gt_storeind for loongarch64 porting from upstream's issue_ref (issue_ref)
dotnet/runtime,646fe2bba35938681d385b7f23a8375a5e082197,"[Mono]: Fix generic interface non-virtual method vt_slot issue in build_imt_slots. (#115306)

* Fix generic interface none-virtual method vt_slot issue.

In case of a generic interface, build_imt_slots calculate
the vt_slot to find the index in the vtable for the implementation.
Currently implementation assumed interface methods are either static
or virtual, but it's possible to have private/sealed methods that
won't end up as virtual. This is handled when building the vtable,
by not including these methods, but we didn't handle that scenario
when building the IMT slots, ending up with wrong vtable slot,
potentially outside of allocated memory.

Fixes https://github.com/dotnet/runtime/issues/113958.",2025-05-08 14:00:37+00:00,Johan Lorensson,1,6da0fa9a95ab50d9dd14496f3625cf10eeffefab,[mono][gc] Fix gc descriptor computation for InlineArray structs (#116879),3,53,1,"[mono]: fix generic interface non-virtual method vt_slot issue in build_imt_slots. (issue_ref)* fix generic interface none-virtual method vt_slot issue.in case of a generic interface, build_imt_slots calculatethe vt_slot to find the index in the vtable for the implementation.currently implementation assumed interface methods are either staticor virtual, but it's possible to have private/sealed methods thatwon't end up as virtual. this is handled when building the vtable,by not including these methods, but we didn't handle that scenariowhen building the imt slots, ending up with wrong vtable slot,potentially outside of allocated memory.fixes"
dotnet/runtime,61f456c3b55e8d19ba5e7791a338ef8dbff71dc3,"[main] Update dependencies from dotnet/icu, dotnet/runtime-assets (#115320)

* Update dependencies from https://github.com/dotnet/icu build 20250505.1

Microsoft.NETCore.Runtime.ICU.Transport
 From Version 10.0.0-preview.5.25227.1 -> To Version 10.0.0-preview.5.25255.1

* Update dependencies from https://github.com/dotnet/runtime-assets build 20250505.1

Microsoft.DotNet.CilStrip.Sources , Microsoft.NET.HostModel.TestData , System.ComponentModel.TypeConverter.TestData , System.Data.Common.TestData , System.Drawing.Common.TestData , System.Formats.Tar.TestData , System.IO.Compression.TestData , System.IO.Packaging.TestData , System.Net.TestData , System.Private.Runtime.UnicodeData , System.Runtime.Numerics.TestData , System.Runtime.TimeZoneData , System.Security.Cryptography.X509Certificates.TestData , System.Text.RegularExpressions.TestData , System.Windows.Extensions.TestData
 From Version 10.0.0-beta.25228.1 -> To Version 10.0.0-beta.25255.1

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-05-08 14:55:24+00:00,dotnet-maestro[bot],1,c201ad1d6bdf9b1a287748b44239c6aef8ecfb72,"[main] Source code updates from dotnet/dotnet (#115395)

* [VMR] Codeflow c0ca2c2-c0ca2c2

[[ commit created by automation ]]

* Update dependencies from https://github.com/dotnet/dotnet build 267310

* Fix CA2251 in LibraryBuilder.cs

* Fix CA2251 in Information.vb and Strings.vb

* Suppress CA2025

* Fix CA2251 in Versioned.vb

* Suppress CA2025 in WasiHttpHandler.cs

* Disable CA2025 in tests, there are too many hits

* Suppress more CA2025

* [VMR] Codeflow 3d07a1b-954d615

[[ commit created by automation ]]

* Update dependencies from https://github.com/dotnet/dotnet build 267468

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Alexander Köplinger <alex.koeplinger@outlook.com>",2,48,48,"[main] update dependencies from dotnet/icu, dotnet/runtime-assets (issue_ref)* update dependencies from build 20250505.1microsoft.netcore.runtime.icu.transport from version 10.0.0-preview.5.25227.1 -> to version 10.0.0-preview.5.25255.1* update dependencies from build 20250505.1microsoft.dotnet.cilstrip.sources , microsoft.net.hostmodel.testdata , system.componentmodel.typeconverter.testdata , system.data.common.testdata , system.drawing.common.testdata , system.formats.tar.testdata , system.io.compression.testdata , system.io.packaging.testdata , system.net.testdata , system.private.runtime.unicodedata , system.runtime.numerics.testdata , system.runtime.timezonedata , system.security.cryptography.x509certificates.testdata , system.text.regularexpressions.testdata , system.windows.extensions.testdata from version 10.0.0-beta.25228.1 -> to version 10.0.0-beta.25255.1---------"
dotnet/runtime,0a290e814abaf99f5aaeaacebe76d2e71175db0f,"Revert ymm embedded rounding (#115235)

Co-authored-by: Tanner Gooding <tagoo@outlook.com>",2025-05-08 17:11:43+00:00,Khushal Modi,0,,,9,18,553,revert ymm embedded rounding (issue_ref)
dotnet/runtime,59a5ce1f78db3916f7ca2006a4aa767cf9724e28,Add UrlFormat to PQC Experimental attribute,2025-05-09 02:58:35+00:00,Kevin Jones,0,,,16,60,60,add urlformat to pqc experimental attribute
dotnet/runtime,d23f2514eceb39c7bb85bf392f3742c301290dac,"Enable SVE2 instruction set detection for ARM64 (#115117)

* Enable SVE2 instruction set detection for ARM64

* updated the guid

* remove the comment

---------

Co-authored-by: Kunal Pathak <Kunal.Pathak@microsoft.com>",2025-05-09 04:28:37+00:00,snickolls-arm,0,,,15,110,24,enable sve2 instruction set detection for arm64 (issue_ref)* enable sve2 instruction set detection for arm64* updated the guid* remove the comment---------
dotnet/runtime,c201ad1d6bdf9b1a287748b44239c6aef8ecfb72,"[main] Source code updates from dotnet/dotnet (#115395)

* [VMR] Codeflow c0ca2c2-c0ca2c2

[[ commit created by automation ]]

* Update dependencies from https://github.com/dotnet/dotnet build 267310

* Fix CA2251 in LibraryBuilder.cs

* Fix CA2251 in Information.vb and Strings.vb

* Suppress CA2025

* Fix CA2251 in Versioned.vb

* Suppress CA2025 in WasiHttpHandler.cs

* Disable CA2025 in tests, there are too many hits

* Suppress more CA2025

* [VMR] Codeflow 3d07a1b-954d615

[[ commit created by automation ]]

* Update dependencies from https://github.com/dotnet/dotnet build 267468

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Alexander Köplinger <alex.koeplinger@outlook.com>",2025-05-09 13:02:23+00:00,dotnet-maestro[bot],1,f303e13199f0df0947612abf0c90f1f231e6641e,Fix a build message nit (#115500),27,167,263,"[main] source code updates from dotnet/dotnet (issue_ref)* [vmr] codeflow c0ca2c2-c0ca2c2[[ commit created by automation ]]* update dependencies from build 267310* fix ca2251 in librarybuilder.cs* fix ca2251 in information.vb and strings.vb* suppress ca2025* fix ca2251 in versioned.vb* suppress ca2025 in wasihttphandler.cs* disable ca2025 in tests, there are too many hits* suppress more ca2025* [vmr] codeflow 3d07a1b-954d615[[ commit created by automation ]]* update dependencies from build 267468---------"
dotnet/runtime,df1eba9ff061ae77265ffc777da711b7ba7d32bc,JIT: Apply format suggested by automation (#115416),2025-05-09 16:11:08+00:00,Kendall González León,0,,,1,10,11,jit: apply format suggested by automation (issue_ref)
dotnet/runtime,41e3612640670045e08a5957785013fbf165d95c,Build packs subset on community platforms in CI (#115423),2025-05-09 16:40:28+00:00,Adeel Mujahid,1,2b96e8a7d1e14c605ab74533753b027fe24e85cf,"Send host tests to helix (#114187)

Update installer pipelines to send host tests to helix instead of running locally
- Add a post-build step to the installer jobs to send host tests to Helix
- Test runs are named `host-<os>-<arch> @ <helix_queue>`
- Remove explicit upload of build artifacts on failure.
  - This was for test failure repro/investigation. It is now part of the helix correlation payload, so they can be downloaded that way

This change only handles platforms that we were already running tests on (linux_x64, osx_x64, windown_x64, windows_x86).  We would want further updates to add other platforms (for example, *_arm64, linux_musl_*).

This does remove running of `Microsoft.DotNet.CoreSetup.Packaging.Tests` tests in PR/CI. I don't think those are particularly useful at this point - I've haven't seen them fail and find an issue in my time here, 

Test updates:
- Copy debug CRT to output directory when building IJW test library in debug - we need this to run IJW tests on the test machine
- Resolve /tmp symlink on macOS for test artifacts and assets path for expected path comparisons
- Add retry for restoring test file backup",2,1,3,build packs subset on community platforms in ci (issue_ref)
dotnet/runtime,0e06c21cc94d74108f602c31d2e309e732fcf276,"Convert Sync RemoteExecutors to Async on Http Tests (#115422)

* Convert Sync RemoteExecutors to Async

* Fix build",2025-05-09 18:30:35+00:00,Ahmet Ibrahim Aksoy,1,d4ca2ce89608312f0a45b255a39e1514af41b6b7,"Record exception in HttpClient native instrumentation (#115959)

* Record exception in HttpClient native instrumentation

* Fix Possible null reference argument for parameter 'exception'

* Fix test

* Fix

* Fix

* Update links

* Set exception event timestamp to match activity end time

* Remove trailing space

* Add assert

---------

Co-authored-by: joegoldman2 <147369450+joegoldman@users.noreply.github.com>",7,46,43,convert sync remoteexecutors to async on http tests (issue_ref)* convert sync remoteexecutors to async* fix build
dotnet/runtime,e67e997094b65c8ed7289b00f2304288d8f75a12,"Delete --whole-archive linking in libmscordaccore.so (#115418)

Fixes #115316",2025-05-09 20:07:06+00:00,Jan Kotas,1,9068296d74c0d7e1f41ec0038d3d84fbcbfc2106,"Fix coreclrpal link order in mscordac (#118780)

_Ux86_64_step is used in libcoreclrpal_dac, but defined in libcoreclrpal

Fixes: #118695",4,16,15,delete --whole-archive linking in libmscordaccore.so (issue_ref)fixes issue_ref
dotnet/runtime,33b5215c15b16ad9e2738c325f6b562702c308d3,"Smaller funclet prologs/epilogs (x64) (#115284)

- Allow funclets to trash non-volatile registers to make funclet prologs/epilogs smaller
- Restore non-volatile registers around non-filter funclet calls
- Unify funclet ABI between NAOT and non-NAOT",2025-05-10 05:40:58+00:00,Jan Kotas,0,,,7,157,226,smaller funclet prologs/epilogs (x64) (issue_ref)- allow funclets to trash non-volatile registers to make funclet prologs/epilogs smaller- restore non-volatile registers around non-filter funclet calls- unify funclet abi between naot and non-naot
dotnet/runtime,fd8933aac237d2f3103de071ec4bc1547bfef16c,Share implementation of ComWrappers between CoreCLR and NativeAOT (#113907),2025-05-10 17:16:10+00:00,Jeremy Koritzinsky,1,98b09ef366995e7f837e310ff70a1d496075a66b,Fix runtime build with -msbuild flag (#115606),59,3828,6003,share implementation of comwrappers between coreclr and nativeaot (issue_ref)
dotnet/runtime,2c94e69db875a72511729de8855871a97d45050c,"Delete interop standby lists, dedup Debugger.DefaultCategory (#115446)

* Delete interop standby lists

Global free lists on top of regular malloc/free used to be a fine optimization years ago on single-proc machines. They are typically a de-optimization these days, breaking thread locality and trashing caches.

* Dedup Debugger.DefaultCategory",2025-05-11 15:44:08+00:00,Jan Kotas,0,,,10,16,147,"delete interop standby lists, dedup debugger.defaultcategory (issue_ref)* delete interop standby listsglobal free lists on top of regular malloc/free used to be a fine optimization years ago on single-proc machines. they are typically a de-optimization these days, breaking thread locality and trashing caches.* dedup debugger.defaultcategory"
dotnet/runtime,1e0a78b0de0247112a417475050931e7a042e044,"[main] Source code updates from dotnet/dotnet (#115441)

* [VMR] Codeflow db0da94-db0da94

[[ commit created by automation ]]

* Update dependencies from https://github.com/dotnet/dotnet build 267725

* Update dependencies from https://github.com/dotnet/dotnet build 267776

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-05-12 07:11:37+00:00,dotnet-maestro[bot],0,,,3,107,107,[main] source code updates from dotnet/dotnet (issue_ref)* [vmr] codeflow db0da94-db0da94[[ commit created by automation ]]* update dependencies from build 267725* update dependencies from build 267776---------
dotnet/runtime,44209039b2352e51855adbd9b54b694f4e6187fb,Disable ClientAsyncAuthenticate_ConnectionInfoInCallback_DoesNotThrow on Android (#115468),2025-05-12 10:23:40+00:00,Radek Zikmund,0,,,1,1,0,disable clientasyncauthenticate_connectioninfoincallback_doesnotthrow on android (issue_ref)
dotnet/runtime,3b026aca3215948775aa81d6d6d6e65d66eabc1c,"Update dependencies from https://github.com/dotnet/xharness build 20250505.1 (#115463)

Microsoft.DotNet.XHarness.CLI , Microsoft.DotNet.XHarness.TestRunners.Common , Microsoft.DotNet.XHarness.TestRunners.Xunit
 From Version 10.0.0-prerelease.25225.1 -> To Version 10.0.0-prerelease.25255.1

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-05-12 14:05:23+00:00,dotnet-maestro[bot],0,,,3,10,10,"update dependencies from build 20250505.1 (issue_ref)microsoft.dotnet.xharness.cli , microsoft.dotnet.xharness.testrunners.common , microsoft.dotnet.xharness.testrunners.xunit from version 10.0.0-prerelease.25225.1 -> to version 10.0.0-prerelease.25255.1"
dotnet/runtime,0fe82fbd8e107a0b7c2a79f458229aea5632c999,"Reduce spin-waiting in the thread pool on Arm processors (#115402)

- Currently, the spin count is multiplied by 4 on Arm processors to avoid throughput regressions, but this appears to significantly increase CPU usage without much benefit
- This change removes the multiplier, restoring the spin count on Arm processors to the same value as on x64. With this, throughput appears to be mostly similar, and CPU usage is significantly reduced in many cases.
- There appear to be a few small throughput regressions in limited-connection high-throughput tests, but that seems to be mostly an artifact of limiting the connections and is not necessarily indicative of lower performance
  - In limited-connection high-throughput tests, a request is sent on a connection once the response to the previous request is received. In bursty scenarios, spin-waiting more can reduce the response time for work items queued to the thread pool, resulting in a slightly earlier response compared with spin-waiting less. The difference is typically very short, in the order of low microseconds or less. When spin-waiting less with a limited number of connections, the slight delay in response results in a slight delay in the next request being sent, and this gets compounded. Effectively, the client ends up sending fewer requests per unit of time due to this artifact, hence the lower throughput. Due to the lower CPU usage with less spin-waiting, if more connections were used, the server can actually handle the same higher RPS at lower CPU usage and with roughly the same latencies.
  - The same kind of artifact is seen in limited-connection high-throughput benchmarks to a larger degree when spin-waiting in the thread pool is disabled. Despite this change, in some scenarios it may still be more beneficial to disable spin-waiting (which many scenarios currently do without any significant loss in performance).",2025-05-12 14:13:35+00:00,Koundinya Veluri,0,,,1,1,10,"reduce spin-waiting in the thread pool on arm processors (issue_ref)- currently, the spin count is multiplied by 4 on arm processors to avoid throughput regressions, but this appears to significantly increase cpu usage without much benefit- this change removes the multiplier, restoring the spin count on arm processors to the same value as on x64. with this, throughput appears to be mostly similar, and cpu usage is significantly reduced in many cases.- there appear to be a few small throughput regressions in limited-connection high-throughput tests, but that seems to be mostly an artifact of limiting the connections and is not necessarily indicative of lower performance - in limited-connection high-throughput tests, a request is sent on a connection once the response to the previous request is received. in bursty scenarios, spin-waiting more can reduce the response time for work items queued to the thread pool, resulting in a slightly earlier response compared with spin-waiting less. the difference is typically very short, in the order of low microseconds or less. when spin-waiting less with a limited number of connections, the slight delay in response results in a slight delay in the next request being sent, and this gets compounded. effectively, the client ends up sending fewer requests per unit of time due to this artifact, hence the lower throughput. due to the lower cpu usage with less spin-waiting, if more connections were used, the server can actually handle the same higher rps at lower cpu usage and with roughly the same latencies. - the same kind of artifact is seen in limited-connection high-throughput benchmarks to a larger degree when spin-waiting in the thread pool is disabled. despite this change, in some scenarios it may still be more beneficial to disable spin-waiting (which many scenarios currently do without any significant loss in performance)."
dotnet/runtime,fb7050d93ea03854d469bb5f84c1f2addcd9e992,"Update System.Net.ServerSentEvents.Tests.csproj (#115470)

Unblocks the use of a newer .NET SDK that contains this runtime commit https://github.com/dotnet/runtime/commit/819bff14702a6e488a54400f0381846eb5a0f5b7

This is necessary as System.Net.ServerSentEvents got moved inbox.",2025-05-12 15:12:34+00:00,Viktor Hofer,0,,,1,1,1,update system.net.serversentevents.tests.csproj (issue_ref)unblocks the use of a newer .net sdk that contains this runtime commit this is necessary as system.net.serversentevents got moved inbox.
dotnet/runtime,ffcdaebe0ebfc20a3632538a983eb149bd7a4edc,"Don't mutating the ScopeId on static readonly IPAddress fields (#115456)

The Address field was made readonly in dotnet/corefx#33531. Somehow ScopeId,
the only other mutatable property, was missed. I did not see discussion of
this in that PR or the related issue.

An example program that illistrates the problem:

```csharp
Console.WriteLine(IPAddress.IPv6Loopback);
IPAddress.IPv6Loopback.ScopeId = 1;
Console.WriteLine(IPAddress.IPv6Loopback);
```

This prints:

```txt
::1
::1%1
```

I think the right behavior is to throw when setting the ScopeId (this pr).

Contributes to #27870",2025-05-12 16:32:56+00:00,Austin Wise,1,d9c260e3a1ced574983c9481041325182876f58c,Remove stale pragmas for fixed analyzer issue in IPAddress/Network (#117301),2,15,3,"don't mutating the scopeid on static readonly ipaddress fields (issue_ref)the address field was made readonly in dotnet/corefxissue_ref. somehow scopeid,the only other mutatable property, was missed. i did not see discussion ofthis in that pr or the related issue.an example program that illistrates the problem:this prints:i think the right behavior is to throw when setting the scopeid (this pr).contributes to issue_ref"
dotnet/runtime,e0e9f15d06b775325c874674bfca51d18c8f5075,Implement various convenience methods for System.Numerics types (#115457),2025-05-12 19:51:25+00:00,Tanner Gooding,1,058b1efa4633a21aa2a9ea787fba84a805f5e11f,"Fix some mismatches in <inheritdoc /> (#115653)

* Fix some mismatches in <inheritdoc />

* Fix reference to IsSynchronized, by pointing towards not generic interface",20,1399,340,implement various convenience methods for system.numerics types (issue_ref)
dotnet/runtime,d2c561859bd6474b8ec38bf4ee7296e4e717ce1c,"Add Azure Linux to regular CI (#115415)

* Add Azure Linux to regular CI

* Remove duplication

* Disable failing test case to unblock the PR

* Undo disabling the test case

* disable the test again.

* Update src/libraries/System.Private.Xml/tests/Xslt/XslCompiledTransformApi/XslCompiledTransform.cs

* Update src/libraries/System.Private.Xml/tests/Xslt/XslCompiledTransformApi/XslCompiledTransform.cs

---------

Co-authored-by: Tarek Mahmoud Sayed <10833894+tarekgh@users.noreply.github.com>
Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-05-12 19:54:09+00:00,Rich Lander,0,,,2,7,11,add azure linux to regular ci (issue_ref)* add azure linux to regular ci* remove duplication* disable failing test case to unblock the pr* undo disabling the test case* disable the test again.* update src/libraries/system.private.xml/tests/xslt/xslcompiledtransformapi/xslcompiledtransform.cs* update src/libraries/system.private.xml/tests/xslt/xslcompiledtransformapi/xslcompiledtransform.cs---------
dotnet/runtime,fdbe38ce16671ae356e2bad21479e38b61d03340,"Expose IsDense, HasAnyDenseDimensions, and ToDenseTensor (#115435)

* Expose IsDense, HasAnyDenseDimensions, and ToDenseTensor

* Ensure HasAnyDenseDimensions is exposed by Tensor<T>

* Fix spelling

* Update CompatibilitySuppressions for S.N.Tensors as its experimental

* Ensure minimumNonZeroStride is handled when 0

* Ensure the assert handles IsEmpty not being dense

* Don't assert that dense spans aren't empty

* Ensure slice sets HasAnyDenseDimensions

* Don't assert that a non-dense array cannot have equal flattened and linear lengths",2025-05-12 23:29:01+00:00,Tanner Gooding,1,b13d90d97214ac9e0e7335e8ec3675c26a15c6fa,Fix some Tensor docs (#115548),11,337,32,"expose isdense, hasanydensedimensions, and todensetensor (issue_ref)* expose isdense, hasanydensedimensions, and todensetensor* ensure hasanydensedimensions is exposed by tensor<t>* fix spelling* update compatibilitysuppressions for s.n.tensors as its experimental* ensure minimumnonzerostride is handled when 0* ensure the assert handles isempty not being dense* don't assert that dense spans aren't empty* ensure slice sets hasanydensedimensions* don't assert that a non-dense array cannot have equal flattened and linear lengths"
dotnet/runtime,c8465dd0790462567b6c818104dde2d2b539eb34,Move Untracked_Release to native code to avoid problems during shutdown (#115489),2025-05-13 02:15:36+00:00,Jeremy Koritzinsky,0,,,10,134,96,move untracked_release to native code to avoid problems during shutdown (issue_ref)
dotnet/runtime,c53ccee795268bb2e816f42e4c9e973c50fbd9c3,"Add packaging information to windowsdesktop transport package (#115477)

* Add packaging information to windowsdesktop transport package

Contributes to https://github.com/dotnet/windowsdesktop/issues/4998

Adds a props file that gets auto-imported when referencing the internal windowsdesktop
transport package. This file defines an item `PackageLibrary` that includes all the
information for the runtime assemblies that get redistributed inside the package.

This information can then be used in windowsdesktop to auto-generate parts of the
PackageOverrides.txt file.

* Update src/libraries/Microsoft.Internal.Runtime.WindowsDesktop.Transport/src/build/Microsoft.Internal.Runtime.WindowsDesktop.Transport.props

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>

* Make item name more specific

* Update Microsoft.Internal.Runtime.WindowsDesktop.Transport.proj

* Update Microsoft.Internal.Runtime.WindowsDesktop.Transport.proj

* Update Microsoft.Internal.Runtime.WindowsDesktop.Transport.props

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-05-13 05:53:08+00:00,Viktor Hofer,0,,,3,55,0,add packaging information to windowsdesktop transport package (issue_ref)* add packaging information to windowsdesktop transport packagecontributes to adds a props file that gets auto-imported when referencing the internal windowsdesktoptransport package. this file defines an item that includes all theinformation for the runtime assemblies that get redistributed inside the package.this information can then be used in windowsdesktop to auto-generate parts of thepackageoverrides.txt file.* update src/libraries/microsoft.internal.runtime.windowsdesktop.transport/src/build/microsoft.internal.runtime.windowsdesktop.transport.props
dotnet/runtime,9bcd3e75a2984537470cb0b6f9bf043f48cc8307,"[RuntimeAsync] Make runtime async tests to build and pass locally. (#115499)

* missing parts to make tests buildable

* move tests into directories

* intrisics location

* fix for arm64",2025-05-13 13:30:16+00:00,Vladimir Sadov,1,2f8f6e71c8e9216840c7f80fb71c545e1cdac580,"JIT: Skip extra SPMI queries when we don't know the exact type (#115637)

Fixes #114934.",70,25,12,[runtimeasync] make runtime async tests to build and pass locally. (issue_ref)* missing parts to make tests buildable* move tests into directories* intrisics location* fix for arm64
dotnet/runtime,e5798b9f08ab6def1848d226512815357e9ccb80,"Make the dotnet/runtime official build an assetless build (#115311)

Co-authored-by: Viktor Hofer <viktor.hofer@microsoft.com>",2025-05-13 18:08:39+00:00,Jeremy Koritzinsky,0,,,9,72,638,make the dotnet/runtime official build an assetless build (issue_ref)
dotnet/runtime,660f22a1d26e28cc403b441e2576bbfd4e6e65df,"[RuntimeAsync] ilasm/ildasm support for the MethodImpl.Async (#115332)

* ilasm parser and grammar for async

* async in ildasm

* regenerate asmparse.cpp",2025-05-13 18:14:43+00:00,Steve,0,,,5,3704,3691,[runtimeasync] ilasm/ildasm support for the methodimpl.async (issue_ref)* ilasm parser and grammar for async* async in ildasm* regenerate asmparse.cpp
dotnet/runtime,406d54a19377ccd2faf66fd80f3f3aed2f50e1f7,Implement new ComWrappers.CreateObject API (#115437),2025-05-13 18:39:11+00:00,Jeremy Koritzinsky,1,29b1e99b85efc5aa14051469d05c89d430d67b35,"Distinguish OOM and failure to reprotect in thunks APIs (#116010)

Resolves #113114.",10,330,31,implement new comwrappers.createobject api (issue_ref)
dotnet/runtime,be4dd91996522231afb9293a73b85a1ab304d775,"throw an exception instead of infinite loop in sort_mark_list (#115492)

we had a customer who observed an infinite loop in sort_mark_list due to heap corruption - the object that got marked was in a region that was already freed so region_limit is 0. we detect this and throw an exception which is easier for prod diag than having to deal with an infinite loop.",2025-05-13 19:56:34+00:00,Maoni Stephens,0,,,1,8,0,throw an exception instead of infinite loop in sort_mark_list (issue_ref)we had a customer who observed an infinite loop in sort_mark_list due to heap corruption - the object that got marked was in a region that was already freed so region_limit is 0. we detect this and throw an exception which is easier for prod diag than having to deal with an infinite loop.
dotnet/runtime,3104b8802a0243668765dfb13ec4202f5436c4d6,"Add SVE2 API skeleton and implement BitwiseClearXor (#115428)

* Add SVE2 API skeleton and implement BitwiseClearXor

* Add missing movprfx case",2025-05-13 22:03:36+00:00,snickolls-arm,1,0b6404153e16685f47d166625373f6635cf5631d,"Implement AddSaturate, SubtractSaturate and NarrowWithSaturation on the Vector types (#115525)

* Implement AddSaturate, SubtractSaturate and NarrowWithSaturation on the Vector types

* Apply formatting patch

* Ensure the add test uses + instead of -

* Ensure the SubtractSaturate fallback returns MinValue for unsigned

* Ensure AddSaturate/SubtractSaturate make the result multi-use

* Use the named constants to ensure sign extension works

* Ensure tmp and tmpDup1 are passed in the correct order for Add/SubtractSaturate

* Remove unnecessary assert",14,286,3,add sve2 api skeleton and implement bitwiseclearxor (issue_ref)* add sve2 api skeleton and implement bitwiseclearxor* add missing movprfx case
dotnet/runtime,e2634eb46a5fa161967b0ca1d0acb74141391053,"Implementation for `UnsafeAccessorTypeAttribute` (#114881)

* CoreCLR support

* Mono support (narrow)

* NativeAOT support

* Add linker support

---------

Co-authored-by: Jeremy Koritzinsky <jekoritz@microsoft.com>",2025-05-13 23:48:23+00:00,Aaron Robinson,1,cb268decdf0fbebf236489788359616e79ab8ddb,Fix implementation of IFindReferenceTargetsCallback::FoundTrackerTarget (#115921),34,1922,134,implementation for (issue_ref)* coreclr support* mono support (narrow)* nativeaot support* add linker support---------
dotnet/runtime,cecbc68bd6e0ca18b8a4145fd5ccbe25ff19b20e,"[main] Update dependencies from dotnet/hotreload-utils, dotnet/icu, dotnet/runtime-assets (#115465)

* Update dependencies from https://github.com/dotnet/hotreload-utils build 20250505.1

Microsoft.DotNet.HotReload.Utils.Generator.BuildTool
 From Version 10.0.0-alpha.0.25222.1 -> To Version 10.0.0-alpha.0.25255.1

* Update dependencies from https://github.com/dotnet/icu build 20250511.1

Microsoft.NETCore.Runtime.ICU.Transport
 From Version 10.0.0-preview.5.25255.1 -> To Version 10.0.0-preview.5.25261.1

* Update dependencies from https://github.com/dotnet/runtime-assets build 20250512.1

Microsoft.DotNet.CilStrip.Sources , Microsoft.NET.HostModel.TestData , System.ComponentModel.TypeConverter.TestData , System.Data.Common.TestData , System.Drawing.Common.TestData , System.Formats.Tar.TestData , System.IO.Compression.TestData , System.IO.Packaging.TestData , System.Net.TestData , System.Private.Runtime.UnicodeData , System.Runtime.Numerics.TestData , System.Runtime.TimeZoneData , System.Security.Cryptography.X509Certificates.TestData , System.Text.RegularExpressions.TestData , System.Windows.Extensions.TestData
 From Version 10.0.0-beta.25255.1 -> To Version 10.0.0-beta.25262.1

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-05-14 00:12:03+00:00,dotnet-maestro[bot],0,,,2,51,51,"[main] update dependencies from dotnet/hotreload-utils, dotnet/icu, dotnet/runtime-assets (issue_ref)* update dependencies from build 20250505.1microsoft.dotnet.hotreload.utils.generator.buildtool from version 10.0.0-alpha.0.25222.1 -> to version 10.0.0-alpha.0.25255.1* update dependencies from build 20250511.1microsoft.netcore.runtime.icu.transport from version 10.0.0-preview.5.25255.1 -> to version 10.0.0-preview.5.25261.1* update dependencies from build 20250512.1microsoft.dotnet.cilstrip.sources , microsoft.net.hostmodel.testdata , system.componentmodel.typeconverter.testdata , system.data.common.testdata , system.drawing.common.testdata , system.formats.tar.testdata , system.io.compression.testdata , system.io.packaging.testdata , system.net.testdata , system.private.runtime.unicodedata , system.runtime.numerics.testdata , system.runtime.timezonedata , system.security.cryptography.x509certificates.testdata , system.text.regularexpressions.testdata , system.windows.extensions.testdata from version 10.0.0-beta.25255.1 -> to version 10.0.0-beta.25262.1---------"
dotnet/runtime,b3f9fb67feef3d8c0d9c6b28802eebc896466174,"Re-enable SHAKE Read tests on Azure Linux.

This reverts commit 3aaffd0b93c13731cbf85e0174bfb228339a4f34.",2025-05-14 00:43:49+00:00,Kevin Jones,0,,,1,1,5,re-enable shake read tests on azure linux.this reverts commit 3aaffd0b93c13731cbf85e0174bfb228339a4f34.
dotnet/runtime,76fda4da6bed9510d2eef9f017d9a5b4cad697cf,"Add `EventHandler<in TSender, in TEventArgs>`, update `EventHandler<TEventArgs>` (#115530)

* Add 'allows ref struct' to 'EventHandler<T>'

* Add 'EventHandler<,>'

* Make 'TEventArgs' contravariant

* Add XML docs",2025-05-14 02:16:27+00:00,Sergio Pedri,1,cb45af9731a52901404cf15f7d39c9dabd1e0d44,"Implement IUtf8SpanParsable on Char and Rune (#105773)

* Implement IUtf8SpanParsable on Rune

* Implement IUtf8SpanParsable on char

* Minor char and rune fixes

* Add tests

* Add docs to Char

* Add missing source file in project file

* Apply suggestions from code review

---------

Co-authored-by: Tanner Gooding <tagoo@outlook.com>
Co-authored-by: Stephen Toub <stoub@microsoft.com>",2,15,2,"add , update (issue_ref)* add 'allows ref struct' to 'eventhandler<t>'* add 'eventhandler<,>'* make 'teventargs' contravariant* add xml docs"
dotnet/runtime,d798c051b6bd0e9227b2bea76838532764f98732,Use the already-present VisualStudioVersion environment variable and remove unnecessary arguments to the MSBuild generators (#115538),2025-05-14 02:37:22+00:00,Jeremy Koritzinsky,0,,,6,13,17,use the already-present visualstudioversion environment variable and remove unnecessary arguments to the msbuild generators (issue_ref)
dotnet/runtime,f76d75739482939fcf2661010bf490a3d81163ed,"JIT: Overwrite cache during recursive map select in VN (#115219)

If the recursive select runs out of budget it may have already cached a
value. In that case allow overwriting the cached value (which should
just replace it with the same value).",2025-05-14 07:38:07+00:00,Jakob Botsch Nielsen,0,,,1,6,1,jit: overwrite cache during recursive map select in vn (issue_ref)if the recursive select runs out of budget it may have already cached avalue. in that case allow overwriting the cached value (which shouldjust replace it with the same value).
dotnet/runtime,4d4936b021fabe9da97d343d3bcb3fa1e802f7b9,Cleanup of System.Data label notification (#115421),2025-05-14 15:17:28+00:00,Shay Rojansky,1,14c875660436bf98e24daac8cc4c076b92794683,"Fix trigger for linkable-framework label policy (#116417)

Add `matchAny: true` to the policy. This will make sure that the policy does not triggers on empty PR and the policy triggers if the PR contains any *ILLink* files

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",1,5,4,cleanup of system.data label notification (issue_ref)
dotnet/runtime,03635a725ebe35fe874928d135d5ed2b79b714e0,"JIT: Kill assertions about struct local when skipping field stores in block morph (#115556)

If we skip storing a field local because we know it is dead, then assertions
about the struct local are no longer valid, so invalidate them in that case.

Without this change we could end up using the assertion about the struct local
to remove a future store to the particular field, which would leave no zeroing
of that field, and would be observable.",2025-05-14 15:35:03+00:00,Jakob Botsch Nielsen,1,bbe64d057704e103de3e0db1fbc93fbec0769a8e,"JIT: postorder local assertion prop for fieldwise block op indirs (#118368)

After we form the block op field indirs, run postorder local assertion
prop on them, so that they see the same amount of assertion prop as
other indirs.

Fixes (parts of) #115789.",5,48,2,"jit: kill assertions about struct local when skipping field stores in block morph (issue_ref)if we skip storing a field local because we know it is dead, then assertionsabout the struct local are no longer valid, so invalidate them in that case.without this change we could end up using the assertion about the struct localto remove a future store to the particular field, which would leave no zeroingof that field, and would be observable."
dotnet/runtime,0b6404153e16685f47d166625373f6635cf5631d,"Implement AddSaturate, SubtractSaturate and NarrowWithSaturation on the Vector types (#115525)

* Implement AddSaturate, SubtractSaturate and NarrowWithSaturation on the Vector types

* Apply formatting patch

* Ensure the add test uses + instead of -

* Ensure the SubtractSaturate fallback returns MinValue for unsigned

* Ensure AddSaturate/SubtractSaturate make the result multi-use

* Use the named constants to ensure sign extension works

* Ensure tmp and tmpDup1 are passed in the correct order for Add/SubtractSaturate

* Remove unnecessary assert",2025-05-14 16:22:05+00:00,Tanner Gooding,1,1b706fb8733659b930fefac983d08fba0c6d4a46,"Fix documentation for `Narrow` methods in `Vector128` (#116582)

* Fix summary documentation for `Narrow` methods in `Vector128` to reflect correct types

* Use consistent formatting for type references",19,3298,806,"implement addsaturate, subtractsaturate and narrowwithsaturation on the vector types (issue_ref)* implement addsaturate, subtractsaturate and narrowwithsaturation on the vector types* apply formatting patch* ensure the add test uses + instead of -* ensure the subtractsaturate fallback returns minvalue for unsigned* ensure addsaturate/subtractsaturate make the result multi-use* use the named constants to ensure sign extension works* ensure tmp and tmpdup1 are passed in the correct order for add/subtractsaturate* remove unnecessary assert"
dotnet/runtime,8c8b218e909ac311296aff38bc85219851976bb6,Normalize the paths to ensure install works on newer versions of cmake (#115571),2025-05-14 21:16:05+00:00,Tanner Gooding,0,,,1,6,4,normalize the paths to ensure install works on newer versions of cmake (issue_ref)
dotnet/runtime,a56f9b0d32a060769effffc2dd42f4ed6eab289a,"Signed CMS for SLH-DSA (#115310)

Co-authored-by: Jeremy Barton <jbarton@microsoft.com>",2025-05-14 21:38:25+00:00,Pranav Senthilnathan,0,,,36,2067,456,signed cms for slh-dsa (issue_ref)
dotnet/runtime,3aa00d745525bbc242c8bceeef6e98268f5bd852,"Write barrier without any RWX pages (#114982)

Add a new config switch DOTNET_UseGCWriteBarrierCopy to control whether or not to use a copy of the WriteBarrier code instead of assembly code embedded in the coreclr binary. Typically we do this to improve performance, but this change enables a new path where we just have the barrier as assembly code in the coreclr binary that does not require any RWX behavior. Also, with this change, the 1 copy of the code which is used for this scenario is shared between NativeAOT and coreclr.

This change will change the write barrier used in some situations on CoreCLR to be the same as the write barrier used on NativeAOT.

In addition, we now have a copy of NativeAOT variant of the write barrier for Linux X86, although the other NativeAOT support is not present.

Finally, the Linux Arm32 version of the NativeAOT write barrier could now be enabled to use software write watch, like CoreCLR does. This is not enabled in this change, although the code has been written into the write barrier (as it was needed for CoreCLR).",2025-05-15 00:06:42+00:00,David Wrighton,1,73d71b815aa14b6632a2e7e6c45c35cfe5088948,[LoongArch64] Fix the pointer load in asmhelper.S:ThisPtrRetBufPrecodeWorker with PR#112548. (#115814),66,1004,266,"write barrier without any rwx pages (issue_ref)add a new config switch dotnet_usegcwritebarriercopy to control whether or not to use a copy of the writebarrier code instead of assembly code embedded in the coreclr binary. typically we do this to improve performance, but this change enables a new path where we just have the barrier as assembly code in the coreclr binary that does not require any rwx behavior. also, with this change, the 1 copy of the code which is used for this scenario is shared between nativeaot and coreclr.this change will change the write barrier used in some situations on coreclr to be the same as the write barrier used on nativeaot.in addition, we now have a copy of nativeaot variant of the write barrier for linux x86, although the other nativeaot support is not present.finally, the linux arm32 version of the nativeaot write barrier could now be enabled to use software write watch, like coreclr does. this is not enabled in this change, although the code has been written into the write barrier (as it was needed for coreclr)."
dotnet/runtime,c7c961a330395152e5ec4000032cd3204ceb4a10,Ensure that NI_SSE2_Extract and NI_SSE41_Extract are simdSize=16 (#115580),2025-05-15 00:29:38+00:00,Tanner Gooding,1,3b409f0e2e466af0d25d34abaf44eb77cc9388eb,"Remove unwanted ternary node in lowering (#115584)

* Remove unwanted ternary node

* fix the test case

* review feedback",3,66,3,ensure that ni_sse2_extract and ni_sse41_extract are simdsize=16 (issue_ref)
dotnet/runtime,130acd3e5f5d2607febc32c315876200bcd4fc5d,"SPMI: Use azcopy for collections downloads if available (#115561)

azcopy is able to download from Azure storage significantly faster than
we do with standard web requests. If available on the path, use it to
download collections.",2025-05-15 06:52:35+00:00,Jakob Botsch Nielsen,0,,,1,70,22,"spmi: use azcopy for collections downloads if available (issue_ref)azcopy is able to download from azure storage significantly faster thanwe do with standard web requests. if available on the path, use it todownload collections."
dotnet/runtime,30779a120b9604d0b7c409b9a385fb54825e36a0,"[LoongArch64] Fix NativeAOT libs.tests error: System.Runtime.Tests & System.Runtime.Numerics.Tests. (#115598)

* Fix the boundary error with `imm = (~0)` for `Unsigned GT_LE/GT_GT` in `CodeGen::genCodeForCompare()`.
* Fix the IntCastOverflowPositiveCheck with `UINT32_MAX` in `CodeGen::genIntCastOverflowCheck()`.
* Optimize `CodeGen::genIntCastOverflowCheck()` similar to riscv.",2025-05-15 07:48:42+00:00,Xu Liangyu,1,ec351aa53ffa0b22f2ef22bce7ba3fcfd67a9d55,"[RISC-V] Optimize comparisons (#115039)

* 12-bit immediates for sltiu

* Sign-extend for sltu

* Use sub for calculating difference for GT_EQ and GT_NE

* Special-case for -1, 0, 1

* Sign-extend operands for branch comparisons

* Fix assert

* Implement load imm

* Fix sltiu rd, rs, 0",2,35,50,[loongarch64] fix nativeaot libs.tests error: system.runtime.tests & system.runtime.numerics.tests. (issue_ref)* fix the boundary error with for in .* fix the intcastoverflowpositivecheck with in .* optimize similar to riscv.
dotnet/runtime,1903d000c17520a7f280961ebc31d4c63cac50ce,[LoongArch64] Disable FastTailCall in case of split arg (#115600),2025-05-15 09:30:39+00:00,Liu An,0,,,1,2,4,[loongarch64] disable fasttailcall in case of split arg (issue_ref)
dotnet/runtime,1e91974826c763638ce43e51dde7d140547e81ab,"Add the checked compound assignment operators to the ECMA-335 augments (#115540)

* Add the checked compound assignment operators to the ECMA-335 augments

* Adding missing punctuation

* Reword the ""Checked user-defined operators"" section

* Add missing newline",2025-05-15 12:47:54+00:00,Tanner Gooding,0,,,1,51,6,"add the checked compound assignment operators to the ecma-335 augments (issue_ref)* add the checked compound assignment operators to the ecma-335 augments* adding missing punctuation* reword the ""checked user-defined operators"" section* add missing newline"
dotnet/runtime,ce6d6d4fbec79dfb9dafb4858fe6e0b91445c39e,"[APX] Follow up on #104637: rename extended registers and bug fixes. (#114713)

* revert the raw byte in context2.S

* bug fix

* bug fix

* use ASSERT not assert.

* revert changes in context.cpp

* revert back to raw byte code in context2.S

* make sure context copy correctly handle the APX&AVX512 XSTATE.

* Make sure pointer offset is correct.

* bug fix

* Update src/coreclr/pal/src/thread/context.cpp

make sure we APX registers are copied to the right memory location.

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-05-15 12:49:38+00:00,Ruihan-Yin,1,91195a7948a16c769ccaf7fd8ca84b1d210f6841,"Delete runtime built-in handling for SIGTERM (#115494)

The runtime built-in handling for SIGTERM signals is not correct for all appmodels. It is better to leave it to each model appmodel to handle it in appmodel specific way if necessary. The popular console appmodel based on HostingHostBuilderExtensions.UseConsoleLifetime does that already.

Fixes #115206",2,26,24,[apx] follow up on issue_ref: rename extended registers and bug fixes. (issue_ref)* revert the raw byte in context2.s* bug fix* bug fix* use assert not assert.* revert changes in context.cpp* revert back to raw byte code in context2.s* make sure context copy correctly handle the apx&avx512 xstate.* make sure pointer offset is correct.* bug fix* update src/coreclr/pal/src/thread/context.cppmake sure we apx registers are copied to the right memory location.
dotnet/runtime,319776534119a5af3081cebd9b45420d720186a4,"Add custom exception handlers to generated COM wrappers (#114828)

---------

Co-authored-by: Jeremy Koritzinsky <jkoritzinsky@gmail.com>
Co-authored-by: Aaron Robinson <arobins@microsoft.com>",2025-05-15 14:10:07+00:00,Dongle,0,,,22,292,2,add custom exception handlers to generated com wrappers (issue_ref)---------
dotnet/runtime,69dd454bfe2fdc3d76c84fc444c1985f6e5c8f03,Add ImmutableDictionary.CreateRangeWithOverwrite (#115570),2025-05-15 16:24:11+00:00,Stephen Toub,0,,,4,107,0,add immutabledictionary.createrangewithoverwrite (issue_ref)
dotnet/runtime,81f1f5ef694b62d801291fb70d86dd5ed9074448,"Specify a security descriptor when using global Mutex (#110416)

* Specify a security descriptor when using global Mutex

* Apply Copilot feedback

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>

* Add System.Threading.AccessControl to ASP.NETCore

---------

Co-authored-by: Eric StJohn <ericstj@microsoft.com>
Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-05-15 17:08:17+00:00,Steve Harter,0,,,6,74,11,specify a security descriptor when using global mutex (issue_ref)* specify a security descriptor when using global mutex* apply copilot feedback
dotnet/runtime,965f2655c1992cfd08e455a737510ed1bdfad59a,"ML-KEM: Miscellaneous cleanup

Use an existing decoding helper for SubjectPublicKeyInfo, remove polyfill for ObjectDisposedException.ThrowIf, and use CryptoPool consistently.",2025-05-15 18:01:16+00:00,Kevin Jones,0,,,1,14,29,"ml-kem: miscellaneous cleanupuse an existing decoding helper for subjectpublickeyinfo, remove polyfill for objectdisposedexception.throwif, and use cryptopool consistently."
dotnet/runtime,9a83ba8b7e218fcc58de624e3f36b28afbbb5c92,[browser] runtimeConfig via boot config  (#115113),2025-05-15 18:43:55+00:00,Pavel Savara,0,,,24,299,90,[browser] runtimeconfig via boot config (issue_ref)
dotnet/runtime,40338f3cc17565c6d047d3ebbd6108008dba2e1f,[xharness] use NetCoreAppPrevious for DLLs loaded into xharness by reflection (#115563),2025-05-15 18:55:49+00:00,Pavel Savara,0,,,7,22,9,[xharness] use netcoreappprevious for dlls loaded into xharness by reflection (issue_ref)
dotnet/runtime,707831ea82f68971010920685f7b91423fafd55b,"[WIP] Interpreter boxing/unboxing (#115549)

* Introduce box/unbox/unbox_any opcodes into the interpreter
* Interpreter name normalization",2025-05-15 19:30:31+00:00,Katelyn Gadd,0,,,7,123,12,[wip] interpreter boxing/unboxing (issue_ref)* introduce box/unbox/unbox_any opcodes into the interpreter* interpreter name normalization
dotnet/runtime,80c9f51ba39fd478e15dcabd4de0d06b55aa6341,"Revert ""[RuntimeAsync] ilasm/ildasm support for the MethodImpl.Async (#115332)"" (#115621)

This reverts commit 660f22a1d26e28cc403b441e2576bbfd4e6e65df.",2025-05-15 20:36:57+00:00,Jan Kotas,1,3763fb64f32fcdbc30d00d66b558755f02a2051a,"[RuntimeAsync] ilasm/ildasm support for the MethodImpl.Async (Take 2) (#115658)

* ilasm grammar

* ildasm

* Use newString helper function

* More fixes

* Regenerate grammar

* Add tests for unquoted identifiers

* Use live-built ilasm for tests

* Fix tests",5,3691,3704,"revert ""[runtimeasync] ilasm/ildasm support for the methodimpl.async (issue_ref)"" (issue_ref)this reverts commit 660f22a1d26e28cc403b441e2576bbfd4e6e65df."
dotnet/runtime,91195a7948a16c769ccaf7fd8ca84b1d210f6841,"Delete runtime built-in handling for SIGTERM (#115494)

The runtime built-in handling for SIGTERM signals is not correct for all appmodels. It is better to leave it to each model appmodel to handle it in appmodel specific way if necessary. The popular console appmodel based on HostingHostBuilderExtensions.UseConsoleLifetime does that already.

Fixes #115206",2025-05-15 20:58:02+00:00,Jan Kotas,1,b8d8d0bb29d22831934b3948d747ee5750a1cede,"Attempt to fix the rare stack overflow tests issue (#116076)

Our CI hits a strange issue in the stack overflow tests about once a day. We are hitting
another stack overflow on the thread that handles the stack overflow. One theory I have is
that an activation signal kicks in and somehow results in overflowing the stack overflow
handling helper stack. This change disables activation signals for the current thread
once stack overflow is hit.
We'll see if that fixes the problem.",19,22,259,delete runtime built-in handling for sigterm (issue_ref)the runtime built-in handling for sigterm signals is not correct for all appmodels. it is better to leave it to each model appmodel to handle it in appmodel specific way if necessary. the popular console appmodel based on hostinghostbuilderextensions.useconsolelifetime does that already.fixes issue_ref
dotnet/runtime,b8752af999a212847b43034e7ef44cf6292b98c3,"Add support for no GC regions in x86 GC info (#115602)

* Add support for no GC regions in x86 GC info

* Disable cpObj unrolling optimization",2025-05-16 06:59:25+00:00,Filip Navara,0,,,21,404,64,add support for no gc regions in x86 gc info (issue_ref)* add support for no gc regions in x86 gc info* disable cpobj unrolling optimization
dotnet/runtime,42a0b427132e55f11e9f7310a1c449575367b023,"JIT: Update and add some textual summaries via Copilot (#115604)

inductionvariablesopts.cpp and scev.cpp had outdated textual
descriptions at the top. Use Copilot to help update these descriptions.

Also use Copilot to help write descriptions for several other files.",2025-05-16 08:12:14+00:00,Jakob Botsch Nielsen,0,,,6,156,86,jit: update and add some textual summaries via copilot (issue_ref)inductionvariablesopts.cpp and scev.cpp had outdated textualdescriptions at the top. use copilot to help update these descriptions.also use copilot to help write descriptions for several other files.
dotnet/runtime,b85dd69a8e1acb95f70b4a9d82e97213406a3eba,"JIT: Avoid byref strength reductions in loops with suspension points (#115605)

Reducing to a byref type (e.g. when iterating through an array) in a
loop with suspension points is not valid, since the new byref IV will be
live across the suspension point. In those cases instead strength reduce
to the index.",2025-05-16 08:12:32+00:00,Jakob Botsch Nielsen,1,3c8bae3ff0906f590c6eec61eb114eac205ac2cc,"JIT: also run local assertion prop in postorder during morph (#115626)

Morph currently applies assertions in preorder, so updates made by morph or by local assertion prop to child trees cannot be leveraged when considering parents.

For instance if we had
```
V01 = newarr
V05 = V01
if (V05 == null)
```
morph was unable to resolve the branch, despite generating both `V01 != null` and `V05 == V01`.

To address this, keep track of the assertions valid at the end of each statement (via `apLocalPostorder`), and use those assertions during morph postorder to try and optimize further. This assertion set is kept up to date with any subsequent kills, and (for simplicity) cleared out if there is a qmark.

Note morph can't use the current (`apLocal`) assertion set in postorder because morph may also reorder subtrees, so in postorder might end up using assertions generated by (formerly) later-executing subtrees to optimize now earlier-executing subtrees.",4,210,128,"jit: avoid byref strength reductions in loops with suspension points (issue_ref)reducing to a byref type (e.g. when iterating through an array) in aloop with suspension points is not valid, since the new byref iv will belive across the suspension point. in those cases instead strength reduceto the index."
dotnet/runtime,9231f341c97adf288a48d472546d24cd0f6de8e7,[browser] OOM on monointerpreter - disable tests (#115574),2025-05-16 09:29:07+00:00,Pavel Savara,0,,,1,6,1,[browser] oom on monointerpreter - disable tests (issue_ref)
dotnet/runtime,dcf79a484f0c19ea70e58a38cee2e9d5e1939cec,"Replace ATP pattern with async/await in SmtpClient (part 1) (#115366)

* Test improvements

* SmtpCommands and SmtpReplyReader

* MailMessage and friends

* Remove allocations in SmtpCommands

* More feedback",2025-05-16 09:51:25+00:00,Radek Zikmund,1,64e1ef0d312addd173db0aaeb49faa263aabc664,"Fix SmtpClientTest.SendAsync_CanBeCanceled_SendAsyncCancel test failure (#116042)

* Initial plan for issue

* Fix SmtpClientTest.SendAsync_CanBeCanceled_SendAsyncCancel test by using IsAssignableFrom

Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>

* Fix ThrowsAsync to ThrowsAnyAsync for TaskCanceledException check

Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>

* Fix ThrowsAnyAsync<TaskCanceledException> to handle both direct and wrapped exceptions

Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>

* Fix assertion and implementation for SmtpClient cancellation

Co-authored-by: rzikm <32671551+rzikm@users.noreply.github.com>

* Move Abort() call and fix nullability annotations for ProcessException

Co-authored-by: rzikm <32671551+rzikm@users.noreply.github.com>

* Fix cancellation handling for SmtpClient: prevent wrapping OperationCanceledException and fix test race condition

Co-authored-by: rzikm <32671551+rzikm@users.noreply.github.com>

* Remove unused serverMre variable and wrap SendMailAsync in Task.Run

Co-authored-by: rzikm <32671551+rzikm@users.noreply.github.com>

* Apply suggestions from code review

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>
Co-authored-by: rzikm <32671551+rzikm@users.noreply.github.com>
Co-authored-by: Stephen Toub <stoub@microsoft.com>",24,497,1065,replace atp pattern with async/await in smtpclient (part 1) (issue_ref)* test improvements* smtpcommands and smtpreplyreader* mailmessage and friends* remove allocations in smtpcommands* more feedback
dotnet/runtime,1b86204483e5f4441c4f37cd3c700801a0fc2c76,"Enumerate all NativeCodeVersions in Heap dumps (#115572)

* Include all DebugInfo/UnwindInfo of native code versions on the stack in heap dumps
* Previous behavior sometimes did not include complete DebugInfo/UnwindInfo if there were multiple native code versions for a single MethodDesc",2025-05-16 17:05:52+00:00,Max Charlamb,0,,,7,62,34,enumerate all nativecodeversions in heap dumps (issue_ref)* include all debuginfo/unwindinfo of native code versions on the stack in heap dumps* previous behavior sometimes did not include complete debuginfo/unwindinfo if there were multiple native code versions for a single methoddesc
dotnet/runtime,b8a8930a81dc0070736d5a6aef46fb4dbee851f9,"[browser][AOT] faster wasm-opt in CI tests (#115624)

* more

* more",2025-05-16 17:18:09+00:00,Pavel Savara,1,dcd09b0c17d4c7c90c6050b68a08f32175402f8d,[browser] fix WasmProfilers vs WasmPerfTracing warning (#115727),3,4,3,[browser][aot] faster wasm-opt in ci tests (issue_ref)* more* more
dotnet/runtime,9579c58ef7a25238249cb86a21d2bdd57c49176e,"Add more protection against exited processed in CoreclrTestLib (#115642)

* Add more protection against exited processed in CoreclrTestLib
* Update src/tests/Common/Coreclr.TestWrapper/CoreclrTestWrapperLib.cs",2025-05-16 18:35:57+00:00,Jan Kotas,0,,,1,26,7,add more protection against exited processed in coreclrtestlib (issue_ref)* add more protection against exited processed in coreclrtestlib* update src/tests/common/coreclr.testwrapper/coreclrtestwrapperlib.cs
dotnet/runtime,8a071a212a8b1fecbb55b50a64ab13c55c75719d,"[wasm][jiterp] RelaxedSimd jiterpreter intrinsics (#115444)

Allow the Jiterpreter to use the potentially faster relaxed_swizzle in the case where we know the swizzle indices are valid and can detect at runtime the opcode is supported.",2025-05-16 19:06:17+00:00,Larry Ewing,0,,,5,36,4,[wasm][jiterp] relaxedsimd jiterpreter intrinsics (issue_ref)allow the jiterpreter to use the potentially faster relaxed_swizzle in the case where we know the swizzle indices are valid and can detect at runtime the opcode is supported.
dotnet/runtime,98bb641b628447e2dc1b64faaa36172ce8c4316b,"Teach x86 unwinder about POP ECX being optional optimization (#115660)

* Teach x86 unwinder about POP ECX being optional optimization

* s/epilogBase[0]/epilogBase[offset]/",2025-05-16 20:14:03+00:00,Filip Navara,0,,,1,5,2,teach x86 unwinder about pop ecx being optional optimization (issue_ref)* teach x86 unwinder about pop ecx being optional optimization* s/epilogbase[0]/epilogbase[offset]/
dotnet/runtime,0f0b4b42ee59929c542f56c7cdb92c3d0bdf3f15,"Use prototype Roslyn compiler for runtime-async (#115531)

This pulls in the prototype Roslyn compiler from the Roslyn runtime-async prototype branch. Currently the feature in the runtime is gated on a feature flag, so the tests are disabled.

To run the tests locally, do the following:

Uncomment add_compile_definitions(FEATURE_RUNTIME_ASYNC) - to enable the feature in the product.
Remove DisableProjectBuild from src\tests\async\Directory.Build.targets",2025-05-16 21:30:08+00:00,Andy Gocke,1,5a098b810b4603d6656264ae4aa6db73e51f1f06,Fix the compiler toolset override for runtime-async (#116722),39,193,81,"use prototype roslyn compiler for runtime-async (issue_ref)this pulls in the prototype roslyn compiler from the roslyn runtime-async prototype branch. currently the feature in the runtime is gated on a feature flag, so the tests are disabled.to run the tests locally, do the following:uncomment add_compile_definitions(feature_runtime_async) - to enable the feature in the product.remove disableprojectbuild from src\tests\async\directory.build.targets"
dotnet/runtime,3c8bae3ff0906f590c6eec61eb114eac205ac2cc,"JIT: also run local assertion prop in postorder during morph (#115626)

Morph currently applies assertions in preorder, so updates made by morph or by local assertion prop to child trees cannot be leveraged when considering parents.

For instance if we had
```
V01 = newarr
V05 = V01
if (V05 == null)
```
morph was unable to resolve the branch, despite generating both `V01 != null` and `V05 == V01`.

To address this, keep track of the assertions valid at the end of each statement (via `apLocalPostorder`), and use those assertions during morph postorder to try and optimize further. This assertion set is kept up to date with any subsequent kills, and (for simplicity) cleared out if there is a qmark.

Note morph can't use the current (`apLocal`) assertion set in postorder because morph may also reorder subtrees, so in postorder might end up using assertions generated by (formerly) later-executing subtrees to optimize now earlier-executing subtrees.",2025-05-16 22:16:17+00:00,Andy Ayers,1,a78f02b009aaec2484bbd837f3c4b126dc05a0c2,"JIT: fix x86 EH issue when removing an empty try  (#115731)

Morph may have already cleared out the continuation block, so we won't find
a GT_END_LFIN there.

Fixes #115700",3,64,13,"jit: also run local assertion prop in postorder during morph (issue_ref)morph currently applies assertions in preorder, so updates made by morph or by local assertion prop to child trees cannot be leveraged when considering parents.for instance if we hadmorph was unable to resolve the branch, despite generating both and .to address this, keep track of the assertions valid at the end of each statement (via ), and use those assertions during morph postorder to try and optimize further. this assertion set is kept up to date with any subsequent kills, and (for simplicity) cleared out if there is a qmark.note morph can't use the current () assertion set in postorder because morph may also reorder subtrees, so in postorder might end up using assertions generated by (formerly) later-executing subtrees to optimize now earlier-executing subtrees."
dotnet/runtime,f7fc17859c961a3b2b58a8502a69fd37cc5e2b6b,"Revert ""Create a single copy of stub templates (#114462)"" (#115665)

This reverts commit ac760bf5215a876647bea662df4ecc2e218dd221.",2025-05-17 02:04:26+00:00,Thays Grazia,0,,,16,50,904,"revert ""create a single copy of stub templates (issue_ref)"" (issue_ref)this reverts commit ac760bf5215a876647bea662df4ecc2e218dd221."
dotnet/runtime,7dc281993d941d1dcdb962a89a30a4a577cbfdf3,Add ML-KEM X.509 key accessors to Microsoft.Bcl.Cryptography,2025-05-17 02:06:24+00:00,Kevin Jones,0,,,7,301,96,add ml-kem x.509 key accessors to microsoft.bcl.cryptography
dotnet/runtime,e2ad5fcc1702105d9cb9c32802181976df1b97ba,"Arm64: Implement region write barriers (#111636)

Extend the Arm64 writebarrier function to support regions and use the WriteBarrierManager, similar to Amd64. This results in 10 different versions of the JIT_WriteBarrier, with the WriteBarrierManager deciding on which version to use.

Pseudo code for the writebarrier is included in GC-write-barriers.md

This is expected to make the writebarrier slower, but improve the performance of the GC. DOTNET_GCWriteBarrier=3 can be used give the same functionality as before this change.

The behavior of the writebarrier is:
Before the PR: check ephemeral bounds, update a byte in the card table, mark the card bundle
After the PR:
DOTNET_GCWriteBarrier=1 (default, bit region write barriers): check ephemeral bounds, check regions, update a bit in the card table, mark the card bundle
DOTNET_GCWriteBarrier=2 (byte region write barriers): check ephemeral bounds, check regions, update a byte in the card table, mark the card bundle
DOTNET_GCWriteBarrier=3 (server write barriers): check ephemeral bounds, update a byte in the card table, mark the card bundle. This is the same as before the PR.
DOTNET_gcServer=1: update a byte in the card table, mark the card bundle.

Test results on an 8 core Cobalt 100.

Ephemeral test (dotnet/performance)
WB_nonephemeral : -20%
WB_ephemeral: -16%

WKS GC is calculating the generation of regions in addition to comparing with g_ephemeral_low/high"". So while it might set fewer cards, it is more expensive and it shows.

With DOTNET_GCWriteBarrier=3:
WB_nonephemeral : +15%
WB_ephemeral: +1%

SVR GC WB also became more expensive but it sets way fewer cards (for nonephemeral it should set almost no cards).

GCPerfsim
Flags: -tc 2 -tagb 200 -tlgb 2 -lohpi 0 -sohsi 50 -ramb 20 -rlmb 0.2 -sohpi 0

No environment variables set:
Gen0 pause: -21.06%. Gen1 pause -14.25%

DOTNET_GCWriteBarrier=2:
Gen0 pause: -6.7%. Gen1 pause -2.78%

DOTNET_GCWriteBarrier=3 :
Gen0 pause: -1.37%. Gen1 pause -1.26%

DOTNET_gcServer=1 DOTNET_GCHeapCount=8:
Gen0 pause: -7.24%. Gen1 pause -3.49%

Above are linux numbers. On windows for no env var set we are seeing not as much but still quite noticeable pause improvements around 8% to 10% for this config of GCPerfSim.",2025-05-17 02:08:12+00:00,Alan Hayward,0,,,14,1512,910,"arm64: implement region write barriers (issue_ref)extend the arm64 writebarrier function to support regions and use the writebarriermanager, similar to amd64. this results in 10 different versions of the jit_writebarrier, with the writebarriermanager deciding on which version to use.pseudo code for the writebarrier is included in gc-write-barriers.mdthis is expected to make the writebarrier slower, but improve the performance of the gc. dotnet_gcwritebarrier=3 can be used give the same functionality as before this change.the behavior of the writebarrier is:before the pr: check ephemeral bounds, update a byte in the card table, mark the card bundleafter the pr:dotnet_gcwritebarrier=1 (default, bit region write barriers): check ephemeral bounds, check regions, update a bit in the card table, mark the card bundledotnet_gcwritebarrier=2 (byte region write barriers): check ephemeral bounds, check regions, update a byte in the card table, mark the card bundledotnet_gcwritebarrier=3 (server write barriers): check ephemeral bounds, update a byte in the card table, mark the card bundle. this is the same as before the pr.dotnet_gcserver=1: update a byte in the card table, mark the card bundle.test results on an 8 core cobalt 100.ephemeral test (dotnet/performance)wb_nonephemeral : -20%wb_ephemeral: -16%wks gc is calculating the generation of regions in addition to comparing with g_ephemeral_low/high"". so while it might set fewer cards, it is more expensive and it shows.with dotnet_gcwritebarrier=3:wb_nonephemeral : +15%wb_ephemeral: +1%svr gc wb also became more expensive but it sets way fewer cards (for nonephemeral it should set almost no cards).gcperfsimflags: -tc 2 -tagb 200 -tlgb 2 -lohpi 0 -sohsi 50 -ramb 20 -rlmb 0.2 -sohpi 0no environment variables set:gen0 pause: -21.06%. gen1 pause -14.25%dotnet_gcwritebarrier=2:gen0 pause: -6.7%. gen1 pause -2.78%dotnet_gcwritebarrier=3 :gen0 pause: -1.37%. gen1 pause -1.26%dotnet_gcserver=1 dotnet_gcheapcount=8:gen0 pause: -7.24%. gen1 pause -3.49%above are linux numbers. on windows for no env var set we are seeing not as much but still quite noticeable pause improvements around 8% to 10% for this config of gcperfsim."
dotnet/runtime,2fbc9e9211c34eaaccd90c177065bd9b81b00069,"Revert ""Vector128.WithElement codegen regression in .NET 9.0 (#115645)

* Revert ""JIT: Apply format suggested by automation (#115416)""

This reverts commit df1eba9ff061ae77265ffc777da711b7ba7d32bc.

* Revert ""Vector128.WithElement codegen regression in .NET 9.0 (#115348)""

This reverts commit e42c072da6a7cd43fce9144774dd8e4bde1062fb.",2025-05-17 10:56:40+00:00,Jakob Botsch Nielsen,1,d1f333e9b23ecd5c5bd0f6a81065cf1df355e8bd,"Fix a couple issues with Vector.WithElement (#115648)

* Reapply ""Vector128.WithElement codegen regression in .NET 9.0 (#115645)""

This reverts commit 2fbc9e9211c34eaaccd90c177065bd9b81b00069.

* Ensure that WithElement always uses an in range constant during codegen

* Ensure WithElement picks a valid store instruction

* Apply suggestions from code review

* Ensure that Mono doesn't assert for bounds checked indices

* Ensure that WithElement restricts itself to allByteRegs if the base type is byte or sbyte",5,86,73,"revert ""vector128.withelement codegen regression in .net 9.0 (issue_ref)* revert ""jit: apply format suggested by automation (issue_ref)""this reverts commit df1eba9ff061ae77265ffc777da711b7ba7d32bc.* revert ""vector128.withelement codegen regression in .net 9.0 (issue_ref)""this reverts commit e42c072da6a7cd43fce9144774dd8e4bde1062fb."
dotnet/runtime,7c25dd996e83ce1bb2a1ba70de8db0f10e9a569d,"[Android] Include static native libraries in CoreCLR Android runtime pack (#115610)

* Add installation targets for native libraries in cmake files

* improve filtering logic in ApkBuilder",2025-05-17 12:29:29+00:00,Milos Kotlar,1,f9ad7c92a8ad4048151bdfa5eaf9bffaf914c9ac,"[Android] Run CoreCLR library tests on Android (#114148)

* Enable running library tests

* Add jobs to extra-platforms

* Fix System.Runtime tests

* Fix arm64 android coreclr tests

* Add TestUtilities project reference

* Add support for local android test execution on windows

* Disable failing tests on Android devices

* Disable failing tests on Android devices

* Disable failing tests

* Remove unnecessary using System directive

* Disable failing tests

* Disable failing tests

* Fix typo

* Disable failing tests

* Disable ConfigSwitchIsHonored test

* Disable failing tests

* Fix typo

* Enable System.Runtime.Loader.Tests tests

* Enable System.Text.RegularExpressions tests

* Disable failing tests

* Try run disabled tests

* Fix build

* Disable failing tests

* Enable tests that are passing

* Fix typo

* Fix ActiveIssue annotation

* Disable failing tests

* Add comment

* Disable failing tests

* Fix test annotations

* Update ProjectExclusions tracking issue

* Disable failing tests on Android platform

* Skip MutexTests on CoreCLR Android

* Disable tests on CoreCLR Android

* Fix ActiveIssue annotation

* Disable failing tests

* Disable failing tests

* Exclude System.Net.Security.Tests from project builds

* Exclude System.Net.Security.Tests from project builds

* Disable CoreCLR tests on Mono

* Disable System.Net.WebSockets.Tests due to disk space limitation

* Exclude debug symbols

* Update StripDebugSymbols property

* Disable failing tests

* Fix build

* Disable tests

* Disable failing tests

* Test run

* Use Debug config to ensure android:debuggable=true

* Fix StripDebugSymbols

* Fix formatting

* Test run

---------

Co-authored-by: Steve Pfister <stpfiste@microsoft.com>",5,30,13,[android] include static native libraries in coreclr android runtime pack (issue_ref)* add installation targets for native libraries in cmake files* improve filtering logic in apkbuilder
dotnet/runtime,130f8c044f2480c03c8ac5a60588753f18ba1467,"[clr-interp] Add safepoints at method entry and backwards branch (#115567)

* [clr-interp] Add safepoints at method entry and backwards branch

Interpreter runs in GC unsafe mode, so without these safepoints for cooperative suspend, the GC could fail to suspend threads executing in the interpreter.

* [clr-interp] Add some starting contracts to interp exec method",2025-05-17 13:07:45+00:00,Vlad Brezae,1,97424fe7d2e9cc3e13bae040657f30bf4fb708da,"Interpreter to JIT/AOT calls (#115375)

* Intepreter to JIT/AOT calls

This change adds support for making calls from the interpreter to JIT/AOT generated code.
For each target method, it parses the signature and creates a list of
hand written asm routines that transfer the arguments from the
interpreter stack to the CPU registers / stack based on the native
calling convention, call the target method and then places the return
value to the interpreter stack. This list is cached in the
MethodDescData so that for repeated calls to the same method, it doesn't
need to be re-generated.

* Calling convention testing

* Cleanup, comments and apple arm64 fix

* Fix test build break and cleanup Apple arm64 stack args handling

* Fix build break

* Fix Unix x64 build break

* Fix some contracts and a bug in args by ref introduced in a previous commit

* Move to allocations from LoaderHeap

* PR feedback

* PR feedback 2

* PR feedback 3

* Wrap all the asm helpers in #ifdef FEATURE_INTERPRETER",3,22,0,"[clr-interp] add safepoints at method entry and backwards branch (issue_ref)* [clr-interp] add safepoints at method entry and backwards branchinterpreter runs in gc unsafe mode, so without these safepoints for cooperative suspend, the gc could fail to suspend threads executing in the interpreter.* [clr-interp] add some starting contracts to interp exec method"
dotnet/runtime,5ac238b788fdb3a9c9fac93990633bc0aedd8d14,Fix XML inheritdoc of Single/Double.SinCosPi() (#115651),2025-05-17 19:03:00+00:00,tfenise,1,56a3e2d2e8180a0fbe102f5d442f1c2aec87f0fa,"Simplify generic floating point->integer conversions (#116896)

Floating point to integer conversions for 32-bit and 64-bit integers have predictable saturating behavior on all platforms now. The manual saturation should be unnecessary.

Keep the existing behavior for Mono since Mono has not been fixed to have the predictable saturating behavior.",2,2,2,fix xml inheritdoc of single/double.sincospi() (issue_ref)
dotnet/runtime,058b1efa4633a21aa2a9ea787fba84a805f5e11f,"Fix some mismatches in <inheritdoc /> (#115653)

* Fix some mismatches in <inheritdoc />

* Fix reference to IsSynchronized, by pointing towards not generic interface",2025-05-17 20:44:25+00:00,Bert Huijben,1,446ca5bb38e9fbc5706174a01f14bf3e400e16e1,"Non-zero result of Vector3.Cross with parallel vectors (#119438)

* Non-zero result of Vector3.Cross with parallel vectors

* fix first remark

* improve codegen

Co-authored-by: Tanner Gooding <tagoo@outlook.com>

---------

Co-authored-by: Tanner Gooding <tagoo@outlook.com>",9,15,15,"fix some mismatches in <inheritdoc /> (issue_ref)* fix some mismatches in <inheritdoc />* fix reference to issynchronized, by pointing towards not generic interface"
dotnet/runtime,29638e8e84335bc877f064766be3f1b3038da311,"Delete obsolete comments (#115680)

Delete comments that refer to the old Windows-specific profiler attach implementation that was deleted by https://github.com/dotnet/coreclr/pull/24670",2025-05-19 01:28:45+00:00,Jan Kotas,1,1998b26291f939398665b96d392c449939f95ce9,"Move FLS init before EventPipeAdapter::FinishInitialize and the first SetupThread() (#115546)

* fix

* PR feedback

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* moved profiler init before FinalizerThreadCreate

* Update src/coreclr/vm/ceemain.cpp

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* create finalizer thread earlier only on Windows.

* Update src/coreclr/vm/ceemain.cpp

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",3,1,17,delete obsolete comments (issue_ref)delete comments that refer to the old windows-specific profiler attach implementation that was deleted by
dotnet/runtime,2e77d32dfcd5465434e4b0963e9be50b749521f6,Collapse the recent ILStub generation patterns into a helper (#115673),2025-05-19 02:55:33+00:00,Aaron Robinson,1,d815d8b75fbec3f6e11e7a2aa4b7bf6c4de0ab3d,"First fix for the UnsafeAccessors functionality in the interpreter (#119596)

- We are generating a non-instantiated target method desc to be returned via the ResolveToken api in the JIT during UnsafeAccessor codegen
- This is apparently subtly different than what the JIT does for other uses of generics from IL, and since the interpreter compiler respects the CORINFO_CALLCONV_PARAMTYPE flag on the signature, it caught this as an issue.",7,118,224,collapse the recent ilstub generation patterns into a helper (issue_ref)
dotnet/runtime,97424fe7d2e9cc3e13bae040657f30bf4fb708da,"Interpreter to JIT/AOT calls (#115375)

* Intepreter to JIT/AOT calls

This change adds support for making calls from the interpreter to JIT/AOT generated code.
For each target method, it parses the signature and creates a list of
hand written asm routines that transfer the arguments from the
interpreter stack to the CPU registers / stack based on the native
calling convention, call the target method and then places the return
value to the interpreter stack. This list is cached in the
MethodDescData so that for repeated calls to the same method, it doesn't
need to be re-generated.

* Calling convention testing

* Cleanup, comments and apple arm64 fix

* Fix test build break and cleanup Apple arm64 stack args handling

* Fix build break

* Fix Unix x64 build break

* Fix some contracts and a bug in args by ref introduced in a previous commit

* Move to allocations from LoaderHeap

* PR feedback

* PR feedback 2

* PR feedback 3

* Wrap all the asm helpers in #ifdef FEATURE_INTERPRETER",2025-05-19 12:29:04+00:00,Jan Vorlicek,1,a76c0084e9edba3aa6ed60f8d0e07e06acfef94a,"[clr-interp] Implement array support for primitive types (#115553)

* Add newarr support for primitives

* Revert changes

* Fix formatting

* Fix formatting

* Fix data conversion

* Add explicit cast

* Remove InterpTypeU4

* Resolve array type at compile time and call newarr helper function at runtime

* Use direct object assignment

* Rename HELPER_NEWARR to HELPER_FTN_NEWARR

* Use GetDataItemIndexForHelperFtn

* Refactor LDELEM_U4 to LDELEM_I4

* Compute size at compile time

* Use compile-time sizeof(etype)

* Clean up comments in Interpreter.cs

* Fix formatting",11,3645,60,"interpreter to jit/aot calls (issue_ref)* intepreter to jit/aot callsthis change adds support for making calls from the interpreter to jit/aot generated code.for each target method, it parses the signature and creates a list ofhand written asm routines that transfer the arguments from theinterpreter stack to the cpu registers / stack based on the nativecalling convention, call the target method and then places the returnvalue to the interpreter stack. this list is cached in themethoddescdata so that for repeated calls to the same method, it doesn'tneed to be re-generated.* calling convention testing* cleanup, comments and apple arm64 fix* fix test build break and cleanup apple arm64 stack args handling* fix build break* fix unix x64 build break* fix some contracts and a bug in args by ref introduced in a previous commit* move to allocations from loaderheap* pr feedback* pr feedback 2* pr feedback 3* wrap all the asm helpers in #ifdef feature_interpreter"
dotnet/runtime,d94ebe0770a1ec8d6c554621d19277663dd6d53c,"JIT: Add morphing to LE_UN/GT_UN(expr, uint.MaxValue) (dotnet#76525) (#113037)

* Add morphing for comparison between uint.MaxValue and a ulong value.
* Remove assertions, which no longer is relevant.
* Add a check to lsra to only use BMI2 if zero flag will not be set.
* Add a profitability check to optimize EQ/NE(op, 0) only if op has constant operand.",2025-05-19 13:50:09+00:00,shunkin,1,a9114e30e3b99c456b81b1b21d8812fc9537ca85,"Move vzeroupper emit back to JIT (#115748)

vzeroupper is AVX instruction and so it cannot be executed unconditionally in static asm helpers

Fixes #115672",6,49,8,"jit: add morphing to le_un/gt_un(expr, uint.maxvalue) (dotnetissue_ref) (issue_ref)* add morphing for comparison between uint.maxvalue and a ulong value.* remove assertions, which no longer is relevant.* add a check to lsra to only use bmi2 if zero flag will not be set.* add a profitability check to optimize eq/ne(op, 0) only if op has constant operand."
dotnet/runtime,34f1db49dbf702697483ee2809d493f5ef441768,"JIT: use root compiler instance for sufficient PGO observation (#115119)

During inlining, we evaluate some aspects of an inlinee's viability
while importing its direct caller. If that caller is not the inline
root we may make inconsistent observations of the overall state of
PGO. So for PGO observations always consult the root compiler.

For example, the root R may have decided to inline a small method A that
did not have PGO (say because of minimal profiling or lack of PGO for
always inlined R2R methods), and that method calls another method B;
we want to evaluate the viability of B using the PGO state of R, not of A.",2025-05-19 14:21:16+00:00,Andy Ayers,1,4aec7a55fb570dd10bad2b1c47d2bd76a8087d64,"JIT: fix regressions from inlining policy change (#117492)

Don't boost the IL size threshold at Tier1+Instr, since this can cause
us to lose profile data for key inlinees.

Fixes most of the regressions from #115904",3,25,0,"jit: use root compiler instance for sufficient pgo observation (issue_ref)during inlining, we evaluate some aspects of an inlinee's viabilitywhile importing its direct caller. if that caller is not the inlineroot we may make inconsistent observations of the overall state ofpgo. so for pgo observations always consult the root compiler.for example, the root r may have decided to inline a small method a thatdid not have pgo (say because of minimal profiling or lack of pgo foralways inlined r2r methods), and that method calls another method b;we want to evaluate the viability of b using the pgo state of r, not of a."
dotnet/runtime,3c391c2f144775076946ec446340af0225e6d43f,Make crashdumps created by test runner accessible (#115724),2025-05-19 16:32:47+00:00,Jakob Botsch Nielsen,0,,,1,22,0,make crashdumps created by test runner accessible (issue_ref)
dotnet/runtime,af6a2c1af9fec011b2442082a8b733b435caeff1,"spelling regex (#115699)

* spelling regex

* dict

* more

* more

* more",2025-05-19 17:34:06+00:00,Dan Moseley,1,82ce59a6f6d415a3df5edd94b7917ab7d13a7b0c,"Fix documentation to clarify culture name usage for case-insensitive comparisons in GeneratedRegexAttribute (#121073)

The documentation appears to be incorrect.",18,315,23,spelling regex (issue_ref)* spelling regex* dict* more* more* more
dotnet/runtime,0d90354cdd23b3685cac885167321d36c11bdb3c,"JIT: remember indir store addresses in escape analysis (#115689)

Instead of analyzing the indir store address when we are processing
the stored value, save off the address bvIndex when processing the
address.",2025-05-19 17:48:17+00:00,Andy Ayers,0,,,3,64,40,"jit: remember indir store addresses in escape analysis (issue_ref)instead of analyzing the indir store address when we are processingthe stored value, save off the address bvindex when processing theaddress."
dotnet/runtime,2122be914915be699fe3893a174fc78fab7fc7b1,JIT: Avoid running return value copy logic for unused return value (#115687),2025-05-19 18:03:30+00:00,Jakob Botsch Nielsen,1,cafcf8b3cf57db5dc111f9410235b44f68f91198,JIT: Fix handling for SIMD types in async transformation (#115652),1,1,1,jit: avoid running return value copy logic for unused return value (issue_ref)
dotnet/runtime,3e6d25a321bbc36507dcb7db127ccbe31bf74ffc,"FromServiceKeyAttribute to support nullable (for unkeyed) and to use current service key (#114929)

* FromServiceKeyAttribute(object) to support nullable (for unkeyed) and to use current service key

* Address API review feedback

* Address feedback

* Add a link to ServiceKeyLookupMode docs

---------

Co-authored-by: Eric StJohn <ericstj@microsoft.com>",2025-05-19 18:24:41+00:00,Steve Harter,0,,,6,183,27,fromservicekeyattribute to support nullable (for unkeyed) and to use current service key (issue_ref)* fromservicekeyattribute(object) to support nullable (for unkeyed) and to use current service key* address api review feedback* address feedback* add a link to servicekeylookupmode docs---------
dotnet/runtime,d1f333e9b23ecd5c5bd0f6a81065cf1df355e8bd,"Fix a couple issues with Vector.WithElement (#115648)

* Reapply ""Vector128.WithElement codegen regression in .NET 9.0 (#115645)""

This reverts commit 2fbc9e9211c34eaaccd90c177065bd9b81b00069.

* Ensure that WithElement always uses an in range constant during codegen

* Ensure WithElement picks a valid store instruction

* Apply suggestions from code review

* Ensure that Mono doesn't assert for bounds checked indices

* Ensure that WithElement restricts itself to allByteRegs if the base type is byte or sbyte",2025-05-19 20:58:33+00:00,Tanner Gooding,1,3e239f8cb244cc5e5ff16e3d8230d9a1c1e2994b,"[Mono][Win] Incorrect decomposition of simd calls (#116433)

* Incorrect decomposition of simd calls

simd decomposition for OP_ARG cases for simd calls in handled
incorrectly
currently the decomposition intrinsic takes place based on a xcall but
later on this xcall is decomposed into a vcall where the return register
is removed.

fixes #116287

* add missing semicolon

---------

Co-authored-by: Larry Ewing <lewing@microsoft.com>",11,257,94,"fix a couple issues with vector.withelement (issue_ref)* reapply ""vector128.withelement codegen regression in .net 9.0 (issue_ref)""this reverts commit 2fbc9e9211c34eaaccd90c177065bd9b81b00069.* ensure that withelement always uses an in range constant during codegen* ensure withelement picks a valid store instruction* apply suggestions from code review* ensure that mono doesn't assert for bounds checked indices* ensure that withelement restricts itself to allbyteregs if the base type is byte or sbyte"
dotnet/runtime,307d19ea542b422943fca1b09420c17ad2fee4e5,"Add documentation for UseCompilerGeneratedDocXmlFile property (#115737)

* Initial plan for issue

* Add documentation for UseCompilerGeneratedDocXmlFile property

Co-authored-by: ericstj <8918108+ericstj@users.noreply.github.com>

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: ericstj <8918108+ericstj@users.noreply.github.com>",2025-05-19 21:42:58+00:00,Copilot,0,,,1,18,0,add documentation for usecompilergenerateddocxmlfile property (issue_ref)* initial plan for issue* add documentation for usecompilergenerateddocxmlfile property
dotnet/runtime,a78f02b009aaec2484bbd837f3c4b126dc05a0c2,"JIT: fix x86 EH issue when removing an empty try  (#115731)

Morph may have already cleared out the continuation block, so we won't find
a GT_END_LFIN there.

Fixes #115700",2025-05-19 23:54:26+00:00,Andy Ayers,1,6d3b842100656887d65acf5f058bb76fe751fb9f,"Add pattern matching for SVE intrinsics that operate on mask operands (#114438)

* Add pattern matching for SVE intrinsics that operate on mask operands

Introduces `fgMorphTryUseAllMaskVariant` for ARM64 that looks for various
named intrinsics that have operands that look 'mask-like'. E.g. source
operands originating from Sve.CreateTrueMask* may be recognized as
masks, causing the JIT to prefer to use the predicated version of the
instruction as codegen for the intrinsic. It will also inspect
ConditionalSelect intrinsic nodes to match instructions with governing
predicates. The transform runs during morph.

It's possible to emit the following instructions after this patch:
* ZIP{1,2} <Pd>.<T>, <Pn>.<T>, <Pm>.<T> (Sve.ZipLow, Sve.ZipHigh)
* UZP{1,2} <Pd>.<T>, <Pn>.<T>, <Pm>.<T> (Sve.UnzipEven, Sve.UnzipOdd)
* TRN{1,2} <Pd>.<T>, <Pn>.<T>, <Pm>.<T> (Sve.TransposeEven, Sve.TransposeOdd)
* REV <Pd>.<T>, <Pn>.<T>                (Sve.ReverseElement)
* AND <Pd>.B, <Pg>/Z, <Pn>.B, <Pm>.B    (Sve.And)
* BIC <Pd>.B, <Pg>/Z, <Pn>.B, <Pm>.B    (Sve.BitwiseClear)
* EOR <Pd>.B, <Pg>/Z, <Pn>.B, <Pm>.B    (Sve.Xor)
* ORR <Pd>.B, <Pg>/Z, <Pn>.B, <Pm>.B    (Sve.Or)
* SEL <Pd>.B, <Pg>, <Pn>.B, <Pm>.B      (Sve.ConditionalSelect)

Contributes towards #101970

* Fix test failure and add FileCheck tests

* Don't run tests on OSX

* Don't run tests for Mono

* Move the transform later in fgOptimizeHWIntrinsic

* Rename gtNewSimdAllFalseMaskNode

* Re-design using HW_Flag_AllMaskVariant

* Add missing function documentation in hwintrinsic.h

* Fix integer comparison and add assertion

* Refactor to follow similar path to XARCH

* fix the refactoring

* jit formatting

* Move code into morph.cpp

---------

Co-authored-by: Kunal Pathak <Kunal.Pathak@microsoft.com>",5,82,3,"jit: fix x86 eh issue when removing an empty try (issue_ref)morph may have already cleared out the continuation block, so we won't finda gt_end_lfin there.fixes issue_ref"
dotnet/runtime,9c6be5f59dff5aa2cbe7295a770b3c9430701558,"Add Alpine Edge and Azure Linux bare VM testing (#115590)

* Add Alpine edge test leg

* Update Arm64 legs

* Update bad yaml

* Update x64 VMs to Azure Linux

* Update OS version for Alpine Edge

* Simplify API usage

* Update src/libraries/Common/tests/TestUtilities/System/PlatformDetection.Unix.cs

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Revert Azure Linux VM for musl x64

* Revert Azure Linux for outerloop tests

* Revert AL3 VM for CoreCLR musl legs

* Change musl VMs back to Azure Linux

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-05-20 01:23:57+00:00,Rich Lander,0,,,3,23,15,add alpine edge and azure linux bare vm testing (issue_ref)* add alpine edge test leg* update arm64 legs* update bad yaml* update x64 vms to azure linux* update os version for alpine edge* simplify api usage* update src/libraries/common/tests/testutilities/system/platformdetection.unix.cs
dotnet/runtime,00b280ad0e28ce95362a8bc5a29281205dd960cd,"PKCS#8 support for ML-DSA (#115569)

Co-authored-by: Kevin Jones <vcsjones@github.com>
Co-authored-by: Jeremy Barton <jbarton@microsoft.com>",2025-05-20 02:23:12+00:00,Pranav Senthilnathan,1,afe009391d7dd25a474e1152e991bf4df94d4db9,"Fix build break on linux-armel (#115767)

* Fix build break on linux-armel

Co-authored-by: Jeremy Barton <jbarton@microsoft.com>
Co-authored-by: Kevin Jones <vcsjones@github.com>",27,4753,281,pkcsissue_ref support for ml-dsa (issue_ref)
dotnet/runtime,a9114e30e3b99c456b81b1b21d8812fc9537ca85,"Move vzeroupper emit back to JIT (#115748)

vzeroupper is AVX instruction and so it cannot be executed unconditionally in static asm helpers

Fixes #115672",2025-05-20 03:20:59+00:00,Jan Kotas,1,113198b33db82053f9244d6d87a8e5f2ffa4144c,"JIT: Fix SysV first/second return register GC info mismatch when generating calls (#115827)

On SysV it is possible to have mixed SIMD/integer return registers for
calls. This leads to a case where the first return register is a SIMD
register, while the second return register is an integer register. In
that particular case, the emitter would get confused and expect GC
information for the second return register to refer to `rdx`, when in
reality it refers to `rax`.

Fix the problem by detecting the case where the second register is
`rax`, and communicating the right information back to the emitter. Also
add a test case that reliably segfaults under `DOTNET_GCStress=C`
without the fix.",7,65,67,move vzeroupper emit back to jit (issue_ref)vzeroupper is avx instruction and so it cannot be executed unconditionally in static asm helpersfixes issue_ref
dotnet/runtime,b6a87649d3538a49b1d406f782306c8c71896b59,[browser] dev tools profiler - method name resolution (#115726),2025-05-20 06:37:33+00:00,Pavel Savara,0,,,5,25,9,[browser] dev tools profiler - method name resolution (issue_ref)
dotnet/runtime,58c9bad814b2e3e9ee8eb58f755e08a2108e7877,[browser] ActiveIssue System.Runtime.InteropServices.JavaScript.Tests.TimerTests.TestTimers (#115764),2025-05-20 10:40:45+00:00,Pavel Savara,0,,,1,1,0,[browser] activeissue system.runtime.interopservices.javascript.tests.timertests.testtimers (issue_ref)
dotnet/runtime,36e853747019b24549e7c47d680d93313029caad,"Implement sizeof() in the interpreter (#115745)

Implements CEE_SIZEOF in the interpreter",2025-05-20 13:10:10+00:00,Katelyn Gadd,1,e163124bce28b7e868b62f4efd498fcaa7f95301,"Implement ldtoken in the interpreter (#115723)

* Implements a new LDTOKEN interpreter opcode with support for method/field/type tokens. Only type tokens have been tested, it's not currently possible to test the other two.
* Adds an integrity check header to InterpMethod because the behavior if we jump to something that isn't a valid InterpMethod is very messy and harder to debug.
* Fixes a bug in the CallStub generator for sysv (we weren't handling certain argument types.)",2,24,0,implement sizeof() in the interpreter (issue_ref)implements cee_sizeof in the interpreter
dotnet/runtime,4f4045d3dafd5b288983c9d1533c2669cafe1381,[browser] move -g back to _EmccCommonFlags (#115770),2025-05-20 14:07:42+00:00,Pavel Savara,0,,,1,1,1,[browser] move -g back to _emcccommonflags (issue_ref)
dotnet/runtime,de76a8c8ae995f2839a19796a51ec7d34da7eb80,"Added an additional yield point prior to possibly long running initialization (#115688)

* Added an additional yield point

* Enqueued setup logic to thread pool

Also added an explanation comment

* Changed validation order to reduce discrepancies

between synchronous and asynchronous calls

* Updated comment

Co-authored-by: Miha Zupan <mihazupan.zupan1@gmail.com>

* Removed Volatile.Read to make the code more readable

Co-authored-by: Miha Zupan <mihazupan.zupan1@gmail.com>

* Removed the test that is no longer viable

* Moved the nested method

to adhere to the code style

---------

Co-authored-by: Miha Zupan <mihazupan.zupan1@gmail.com>",2025-05-20 14:42:15+00:00,Sergey Ivanov,1,01bf0943425db75bbf90d74333457f0130a5067f,"Fix telemetry for redirect + custom ICredentials (#115939)

Instead of having two separated handler types, this PR proposes to store a bool in `HttpConnectionHandler` and manages the disabling of the auth by flipping a flag on `HttpRequestMessage`.",3,20,83,added an additional yield point prior to possibly long running initialization (issue_ref)* added an additional yield point* enqueued setup logic to thread poolalso added an explanation comment* changed validation order to reduce discrepanciesbetween synchronous and asynchronous calls* updated comment
dotnet/runtime,dd33442d70379a627fd0423deba04f714b961521,"Restore personality routine outside Windows (#115729)

`IsIPInEpilog` depends on this to exist. Without it, hijacking is broken outside Windows.",2025-05-20 16:27:05+00:00,Jakob Botsch Nielsen,1,fc85a87a0c41f6e7940f7f24a324408aafdb86d2,"Intrinsic support for transient codegen. (#115639)

The previous transient codegen paths only handled
lifetime management when the method had no
metadata back IL (that is, RVA == 0). The InstanceCalli
logic is marked as an intrinsic and has metadata,
but that metadata is copied and then modified falling
back to a middle ground that the existing logic didn't
handle properly. The tricky scenario is when these
new instrinsic types were inlined (lifetimes were
being ignored). This change fixes that up but required
clean-up in the UnsafeJitFunction code paths.
---------
Co-authored-by: Jan Kotas <jkotas@microsoft.com>",5,24,20,"restore personality routine outside windows (issue_ref) depends on this to exist. without it, hijacking is broken outside windows."
dotnet/runtime,6d3b842100656887d65acf5f058bb76fe751fb9f,"Add pattern matching for SVE intrinsics that operate on mask operands (#114438)

* Add pattern matching for SVE intrinsics that operate on mask operands

Introduces `fgMorphTryUseAllMaskVariant` for ARM64 that looks for various
named intrinsics that have operands that look 'mask-like'. E.g. source
operands originating from Sve.CreateTrueMask* may be recognized as
masks, causing the JIT to prefer to use the predicated version of the
instruction as codegen for the intrinsic. It will also inspect
ConditionalSelect intrinsic nodes to match instructions with governing
predicates. The transform runs during morph.

It's possible to emit the following instructions after this patch:
* ZIP{1,2} <Pd>.<T>, <Pn>.<T>, <Pm>.<T> (Sve.ZipLow, Sve.ZipHigh)
* UZP{1,2} <Pd>.<T>, <Pn>.<T>, <Pm>.<T> (Sve.UnzipEven, Sve.UnzipOdd)
* TRN{1,2} <Pd>.<T>, <Pn>.<T>, <Pm>.<T> (Sve.TransposeEven, Sve.TransposeOdd)
* REV <Pd>.<T>, <Pn>.<T>                (Sve.ReverseElement)
* AND <Pd>.B, <Pg>/Z, <Pn>.B, <Pm>.B    (Sve.And)
* BIC <Pd>.B, <Pg>/Z, <Pn>.B, <Pm>.B    (Sve.BitwiseClear)
* EOR <Pd>.B, <Pg>/Z, <Pn>.B, <Pm>.B    (Sve.Xor)
* ORR <Pd>.B, <Pg>/Z, <Pn>.B, <Pm>.B    (Sve.Or)
* SEL <Pd>.B, <Pg>, <Pn>.B, <Pm>.B      (Sve.ConditionalSelect)

Contributes towards #101970

* Fix test failure and add FileCheck tests

* Don't run tests on OSX

* Don't run tests for Mono

* Move the transform later in fgOptimizeHWIntrinsic

* Rename gtNewSimdAllFalseMaskNode

* Re-design using HW_Flag_AllMaskVariant

* Add missing function documentation in hwintrinsic.h

* Fix integer comparison and add assertion

* Refactor to follow similar path to XARCH

* fix the refactoring

* jit formatting

* Move code into morph.cpp

---------

Co-authored-by: Kunal Pathak <Kunal.Pathak@microsoft.com>",2025-05-20 16:47:32+00:00,snickolls-arm,1,15c514180982522386424c7bface57564ad6724d,"Do not run SVE when HWIntrinsic is OFF (#116441)

* Do not run SVE when HWIntrinsic is OFF

* proper fix

* better message about what doesn't work",9,564,156,"add pattern matching for sve intrinsics that operate on mask operands (issue_ref)* add pattern matching for sve intrinsics that operate on mask operandsintroduces for arm64 that looks for variousnamed intrinsics that have operands that look 'mask-like'. e.g. sourceoperands originating from sve.createtruemask* may be recognized asmasks, causing the jit to prefer to use the predicated version of theinstruction as codegen for the intrinsic. it will also inspectconditionalselect intrinsic nodes to match instructions with governingpredicates. the transform runs during morph.it's possible to emit the following instructions after this patch:* zip{1,2} <pd>.<t>, <pn>.<t>, <pm>.<t> (sve.ziplow, sve.ziphigh)* uzp{1,2} <pd>.<t>, <pn>.<t>, <pm>.<t> (sve.unzipeven, sve.unzipodd)* trn{1,2} <pd>.<t>, <pn>.<t>, <pm>.<t> (sve.transposeeven, sve.transposeodd)* rev <pd>.<t>, <pn>.<t> (sve.reverseelement)* and <pd>.b, <pg>/z, <pn>.b, <pm>.b (sve.and)* bic <pd>.b, <pg>/z, <pn>.b, <pm>.b (sve.bitwiseclear)* eor <pd>.b, <pg>/z, <pn>.b, <pm>.b (sve.xor)* orr <pd>.b, <pg>/z, <pn>.b, <pm>.b (sve.or)* sel <pd>.b, <pg>, <pn>.b, <pm>.b (sve.conditionalselect)contributes towards issue_ref* fix test failure and add filecheck tests* don't run tests on osx* don't run tests for mono* move the transform later in fgoptimizehwintrinsic* rename gtnewsimdallfalsemasknode* re-design using hw_flag_allmaskvariant* add missing function documentation in hwintrinsic.h* fix integer comparison and add assertion* refactor to follow similar path to xarch* fix the refactoring* jit formatting* move code into morph.cpp---------"
dotnet/runtime,e117adb67a751689add72b704133e4dffd3a5fda,"Update Linux version for installer pipeline (#115755)

* Update Linux version for installer pipeline

* Update typo",2025-05-20 17:45:56+00:00,Rich Lander,0,,,1,6,6,update linux version for installer pipeline (issue_ref)* update linux version for installer pipeline* update typo
dotnet/runtime,bc1249a863aeb7383cd8ca7a13e24992a7e42bae,"ML-DSA PFX support (#115758)

Co-authored-by: Kevin Jones <vcsjones@github.com>
Co-authored-by: Jeremy Barton <jbarton@microsoft.com>",2025-05-20 18:04:06+00:00,Pranav Senthilnathan,0,,,19,2636,9,ml-dsa pfx support (issue_ref)
dotnet/runtime,6f75b3b239578e5da0811d8624a82a60afc771d8,"Add support for hot/cold code split based on instrumentation (#115777)

The existing `MethodLayoutAlgorithm.HotCold` uses sampling data to do the split. Introduce a hot/cold split that is based on _any_ profile data for the method.",2025-05-20 20:02:05+00:00,Michal Strehovský,0,,,3,7,0,add support for hot/cold code split based on instrumentation (issue_ref)the existing uses sampling data to do the split. introduce a hot/cold split that is based on _any_ profile data for the method.
dotnet/runtime,87143d9ebd15098321c646313009ff6c01c2b7b9,"[DNS] Ignore ObjectDisposedException on CancellationToken Callback (#115765)

* Ignore ObjectDisposedException on CancellationToken Callback

* Update src/libraries/System.Net.NameResolution/src/System/Net/NameResolutionPal.Windows.cs

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Change wording in comment

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-05-20 20:30:22+00:00,Ahmet Ibrahim Aksoy,0,,,1,5,0,[dns] ignore objectdisposedexception on cancellationtoken callback (issue_ref)* ignore objectdisposedexception on cancellationtoken callback* update src/libraries/system.net.nameresolution/src/system/net/nameresolutionpal.windows.cs
dotnet/runtime,a986ef83343f1e241241502a6b29c2bb995d4785,"Update Linux versions in CoreCLR pipeline (#115757)

* Update Linux versions in CoreCLR pipeline

* Update eng/pipelines/coreclr/templates/helix-queues-setup.yml

* Update eng/pipelines/coreclr/templates/helix-queues-setup.yml

* Update eng/pipelines/coreclr/templates/helix-queues-setup.yml",2025-05-20 22:05:50+00:00,Rich Lander,0,,,1,8,8,update linux versions in coreclr pipeline (issue_ref)* update linux versions in coreclr pipeline* update eng/pipelines/coreclr/templates/helix-queues-setup.yml* update eng/pipelines/coreclr/templates/helix-queues-setup.yml* update eng/pipelines/coreclr/templates/helix-queues-setup.yml
dotnet/runtime,99a4b70452610dff70237e8f8065cc6e4a107166,Update pipeline links (#115787),2025-05-20 22:25:07+00:00,Rich Lander,0,,,1,2,1,update pipeline links (issue_ref)
dotnet/runtime,35514cad21c2af903b8178ba97d6f1037db7e245,"Reapply ""Create a single copy of stub templates (#115749)

* Reapply ""Create a single copy of stub templates (#114462)"" (#115665)

This reverts commit f7fc17859c961a3b2b58a8502a69fd37cc5e2b6b.

* Disable feature on Apple platforms for now

Co-authored-by: Tom McDonald <tommcdon@microsoft.com>",2025-05-20 23:22:44+00:00,David Wrighton,0,,,16,905,50,"reapply ""create a single copy of stub templates (issue_ref)* reapply ""create a single copy of stub templates (issue_ref)"" (issue_ref)this reverts commit f7fc17859c961a3b2b58a8502a69fd37cc5e2b6b.* disable feature on apple platforms for now"
dotnet/runtime,b6838628f6bb43739af5e7437fd59558b42cde57,Correct XML doc of Volatile.WriteBarrier() (#115803),2025-05-21 00:09:20+00:00,tfenise,0,,,1,1,1,correct xml doc of volatile.writebarrier() (issue_ref)
dotnet/runtime,c8cb0f87fe8616619462f517fcbe149b55c94354,"JIT: Don't clone or unroll cold loops (#115744)

Companion to #115734.",2025-05-21 03:33:00+00:00,Aman Khalid,0,,,2,12,0,jit: don't clone or unroll cold loops (issue_ref)companion to issue_ref.
dotnet/runtime,df5c6cbb0ca8e4d3c37480b63c538d5494180f47,"Do not shortcut `CompilerComparer` (#115807)

In rt-sz (https://github.com/MichalStrehovsky/rt-sz/actions/runs/15128663241/job/42525897839) I ran into following exception:

```
  System.AggregateException: One or more errors occurred. (Specified cast is not valid.)
   ---> System.InvalidCastException: Specified cast is not valid.
     at ILCompiler.DependencyAnalysis.RuntimeImportMethodNode.CompareToImpl(ISortableNode, CompilerComparer) + 0x3c
```

I am not actually able to repro this locally, but this seems to be the only way how this could happen (we're trying to compare two nodes that are not of the same type - `CompilerComparer` will handle that case; `CompareToImpl` will not).",2025-05-21 04:47:30+00:00,Michal Strehovský,0,,,2,2,2,"do not shortcut (issue_ref)in rt-sz ( i ran into following exception:i am not actually able to repro this locally, but this seems to be the only way how this could happen (we're trying to compare two nodes that are not of the same type - will handle that case; will not)."
dotnet/runtime,4e0dc086de5952b87e0fdac43690edb5acc4bd6b,"JIT: Spill value before byref address in stsfld for async (#115772)

We could end up producing trees like

```
▌  STOREIND  ref
├──▌  ADD       byref
│  ├──▌  CALL help byref  CORINFO_HELP_GETDYNAMIC_GCSTATIC_BASE_NOCTOR
│  │  └──▌  CNS_INT   long   0x7ff84228d6b8
│  └──▌  CNS_INT   long   0 Fseq[s_3]
└──▌  CALL      ref    Program:M2():int[] (async)
   └──▌  CNS_INT   ref    null
```

where a byref is live across a suspension point.",2025-05-21 08:41:47+00:00,Jakob Botsch Nielsen,1,f10d4c3e0a85c146d0e67cb8df8a78692e8d8026,"Add long/ulong->float cast helpers (#114597)

* add long/ulong->float cast helpers

* fix const folding",2,13,2,jit: spill value before byref address in stsfld for async (issue_ref)we could end up producing trees likewhere a byref is live across a suspension point.
dotnet/runtime,9477f48a7cdad3893166edbf7d0bfe34d0bcc066,[browser] don't set js_handle for js prototypes (#115773),2025-05-21 12:01:55+00:00,Pavel Savara,0,,,2,12,1,[browser] don't set js_handle for js prototypes (issue_ref)
dotnet/runtime,28e603e0a100dc83e3efc8a772e7798d712984f4,"Don't include LICENSE.TXT in nuget packages (#115518)

Runtime nuget packages already define a PackageLicenseExpression=MIT

There's no need to also bundle the LICENSE file into the packages as the nuspec correctly points to the license site.",2025-05-21 12:38:02+00:00,Viktor Hofer,0,,,1,0,5,don't include license.txt in nuget packages (issue_ref)runtime nuget packages already define a packagelicenseexpression=mitthere's no need to also bundle the license file into the packages as the nuspec correctly points to the license site.
dotnet/runtime,272948a80e7339806efca657e24be56ab9c0c245,"JIT: Remove early `fgOptimizeBranch` pass (#115734)

Part of #107749. fgOptimizeBranch looks for cases where a block jumps to a conditional block, which jumps back to the lexical successor of the first block. When it is profitable, fgOptimizeBranch clones the condition into the first block to avoid the jump-check-jump pattern. While probably more pattern-matchy in its analysis than ideal, this can help block layout align loops properly.

However, I see little reason to run this transformation early, especially before loop recognition; from the diffs, fgOptimizeBranch seems to create unnatural loop shapes with some frequency, pessimizing downstream loop opts. Removing the early pass means we can also make the late pass more aggressive without splitting off the implementation.",2025-05-21 13:42:49+00:00,Aman Khalid,0,,,1,0,14,"jit: remove early pass (issue_ref)part of issue_ref. fgoptimizebranch looks for cases where a block jumps to a conditional block, which jumps back to the lexical successor of the first block. when it is profitable, fgoptimizebranch clones the condition into the first block to avoid the jump-check-jump pattern. while probably more pattern-matchy in its analysis than ideal, this can help block layout align loops properly.however, i see little reason to run this transformation early, especially before loop recognition; from the diffs, fgoptimizebranch seems to create unnatural loop shapes with some frequency, pessimizing downstream loop opts. removing the early pass means we can also make the late pass more aggressive without splitting off the implementation."
dotnet/runtime,330cee1e47b205566e86484c8375e6fcd6850b2f,Update area owners (#115751),2025-05-21 14:09:09+00:00,Vladimir Sadov,0,,,1,3,3,update area owners (issue_ref)
dotnet/runtime,d06834b30ab0322f728164d0f3e847aaddace655,"JIT: another bit of refactoring in escape analysis (#115812)

Update the transformation code to make it easier to reorder the checks
in the future, for example trying to handle in-loop allocation sites.",2025-05-21 14:41:06+00:00,Andy Ayers,1,ed055b1aaa025f0ae65d858c866ffe01eee0208d,"JIT: also check gc-ness of layout for GT_BLK during escape analysis (#115844)

Otherwise we may mistakenly build a connection to the unknown source and
try retyping a non-gc struct.

Fixes #115831.",2,285,187,"jit: another bit of refactoring in escape analysis (issue_ref)update the transformation code to make it easier to reorder the checksin the future, for example trying to handle in-loop allocation sites."
dotnet/runtime,4947a306050369ff1ad736bc0604baf873a1cddb,Bump main to .NET 10 Preview 6 (#115808),2025-05-21 14:51:55+00:00,David Cantú,0,,,1,1,1,bump main to .net 10 preview 6 (issue_ref)
dotnet/runtime,60e900ba67d1c04586b8dc36118ebbc09d54c5f7,"Implement SVE2 ShiftLeftAndInsert (#115776)

* Implement SVE2 ShiftLeftAndInsert

* Remove explicit immediate bounds setting",2025-05-21 17:15:34+00:00,snickolls-arm,1,8ccec0a463e1fa67b53fb546080d51acbc29a0b6,"Implement SVE2 BitwiseSelect, BitwiseSelectLeftInverted, BitwiseSelectRightInverted (#115775)

* Implement SVE2 BitwiseSelect, BitwiseSelectLeftInverted, BitwiseSelectRightInverted

* Add missing PlatformNotSupported lines

* Fix the list order",6,120,1,implement sve2 shiftleftandinsert (issue_ref)* implement sve2 shiftleftandinsert* remove explicit immediate bounds setting
dotnet/runtime,febe8b158f62d6e0e3a775369792356dce1acab4,Refactor Sequential/Explicit layout to happen in the same phase where we do Auto layout (#113454),2025-05-21 17:52:59+00:00,Jeremy Koritzinsky,1,d1e4319367175fdb2e60d7c7ab5247d1f2794036,"When cloning method descs be careful with fields that have different offsets between the source and destination.  (#115798)

* clean old locations when shifting data inside methoddesc

* better fix

* added a test

* PR feedback

* missing rename",12,965,929,refactor sequential/explicit layout to happen in the same phase where we do auto layout (issue_ref)
dotnet/runtime,969490180052cdefd85b8fc886402e8877e7a710,JIT: Don't reverse copied condition in `fgOptimizeBranch` (#115842),2025-05-21 19:29:41+00:00,Aman Khalid,0,,,1,6,28,jit: don't reverse copied condition in (issue_ref)
dotnet/runtime,f6d4a01a7a0eb7fd722e8f272475e90104b7a371,Update Linux versions in build pipeline (#115784),2025-05-21 19:32:11+00:00,Rich Lander,0,,,1,4,4,update linux versions in build pipeline (issue_ref)
dotnet/runtime,f9ad7c92a8ad4048151bdfa5eaf9bffaf914c9ac,"[Android] Run CoreCLR library tests on Android (#114148)

* Enable running library tests

* Add jobs to extra-platforms

* Fix System.Runtime tests

* Fix arm64 android coreclr tests

* Add TestUtilities project reference

* Add support for local android test execution on windows

* Disable failing tests on Android devices

* Disable failing tests on Android devices

* Disable failing tests

* Remove unnecessary using System directive

* Disable failing tests

* Disable failing tests

* Fix typo

* Disable failing tests

* Disable ConfigSwitchIsHonored test

* Disable failing tests

* Fix typo

* Enable System.Runtime.Loader.Tests tests

* Enable System.Text.RegularExpressions tests

* Disable failing tests

* Try run disabled tests

* Fix build

* Disable failing tests

* Enable tests that are passing

* Fix typo

* Fix ActiveIssue annotation

* Disable failing tests

* Add comment

* Disable failing tests

* Fix test annotations

* Update ProjectExclusions tracking issue

* Disable failing tests on Android platform

* Skip MutexTests on CoreCLR Android

* Disable tests on CoreCLR Android

* Fix ActiveIssue annotation

* Disable failing tests

* Disable failing tests

* Exclude System.Net.Security.Tests from project builds

* Exclude System.Net.Security.Tests from project builds

* Disable CoreCLR tests on Mono

* Disable System.Net.WebSockets.Tests due to disk space limitation

* Exclude debug symbols

* Update StripDebugSymbols property

* Disable failing tests

* Fix build

* Disable tests

* Disable failing tests

* Test run

* Use Debug config to ensure android:debuggable=true

* Fix StripDebugSymbols

* Fix formatting

* Test run

---------

Co-authored-by: Steve Pfister <stpfiste@microsoft.com>",2025-05-21 19:51:07+00:00,Milos Kotlar,1,6f75c76e2626cc8b354c8e025e314bf177c3c1a1,"Support function pointer types in ``System.Reflection.Emit`` (#119935)

This fixes #111003. The current implementation is a **work in progress**, only **managed** function pointers with no modopts are supported.

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",59,350,242,[android] run coreclr library tests on android (issue_ref)* enable running library tests* add jobs to extra-platforms* fix system.runtime tests* fix arm64 android coreclr tests* add testutilities project reference* add support for local android test execution on windows* disable failing tests on android devices* disable failing tests on android devices* disable failing tests* remove unnecessary using system directive* disable failing tests* disable failing tests* fix typo* disable failing tests* disable configswitchishonored test* disable failing tests* fix typo* enable system.runtime.loader.tests tests* enable system.text.regularexpressions tests* disable failing tests* try run disabled tests* fix build* disable failing tests* enable tests that are passing* fix typo* fix activeissue annotation* disable failing tests* add comment* disable failing tests* fix test annotations* update projectexclusions tracking issue* disable failing tests on android platform* skip mutextests on coreclr android* disable tests on coreclr android* fix activeissue annotation* disable failing tests* disable failing tests* exclude system.net.security.tests from project builds* exclude system.net.security.tests from project builds* disable coreclr tests on mono* disable system.net.websockets.tests due to disk space limitation* exclude debug symbols* update stripdebugsymbols property* disable failing tests* fix build* disable tests* disable failing tests* test run* use debug config to ensure android:debuggable=true* fix stripdebugsymbols* fix formatting* test run---------
dotnet/runtime,ef640d05edef9e47a9709233955a8b0e0da81126,"Allow using flat layout for component assemblies of composite R2R (#115631)

Allow using flat layout for component assemblies of composite R2R. The component assemblies don't have native code, so we can just use their flat layout without loading / mapping them to virtual addresses. For scenarios where we can't just map from a file for the load - for example, external data (Android), this avoids copying all the data of component assemblies.
- Skip emitting empty sections in R2R images
  - When we had no data for a section, we'd emit a single-byte section. Avoid including the section altogether
- Use read-only section for R2R headers
  - This was using writeable data on non-Windows. We do the mapping ourselves and don't need this to be writeable on any platform. The way we emit R2R PE images, the read-only data goes into .text, so this should not incur the penalty of an extra section.
- Relax checks for component assembly initialization to stop requiring a loaded layout
- Handle getting the owner composite name for a flat layout of a component assembly of composite R2R",2025-05-21 23:20:27+00:00,Elinor Fung,0,,,5,161,92,"allow using flat layout for component assemblies of composite r2r (issue_ref)allow using flat layout for component assemblies of composite r2r. the component assemblies don't have native code, so we can just use their flat layout without loading / mapping them to virtual addresses. for scenarios where we can't just map from a file for the load - for example, external data (android), this avoids copying all the data of component assemblies.- skip emitting empty sections in r2r images - when we had no data for a section, we'd emit a single-byte section. avoid including the section altogether- use read-only section for r2r headers - this was using writeable data on non-windows. we do the mapping ourselves and don't need this to be writeable on any platform. the way we emit r2r pe images, the read-only data goes into .text, so this should not incur the penalty of an extra section.- relax checks for component assembly initialization to stop requiring a loaded layout- handle getting the owner composite name for a flat layout of a component assembly of composite r2r"
dotnet/runtime,77de6e64876f614fb8dde0782d28dd0f32470677,"Consolidate QueryPerformanceCounter/GetTickCount usages to minipal/time.h (#115408)

Remove the duplicated implementations and use minipal/time.h as single source of truth.

Not touching a bit ifdef'd-out instances, which are supposed for local debug usages only.

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-05-21 23:52:30+00:00,Huo Yaoyuan,1,488d367a40724ad7a817be76a0d5046964b82e5b,"Fix YieldProcessorMeasurement running continuously due to timestamp truncation (#122293)

- [x] Understand the issue: High CPU due to excessive
YieldProcessorMeasurement
- [x] Identify the bug: Extra (unsigned int) cast at line 206 in
yieldprocessornormalizedshared.cpp
- [x] Remove the incorrect cast to fix time comparison
- [x] Build and test the fix
- [x] Run code review
- [x] Run security scan
- [x] Add parentheses to clarify operator precedence per review feedback

## Summary

Fixed high CPU utilization in .NET 10.0 by removing an incorrect
`(unsigned int)` cast that was causing YieldProcessorMeasurement to run
continuously instead of every 4 seconds. The variable
`s_previousNormalizationTimeMs` is declared as `int64_t` but was being
assigned with a truncated 32-bit value, leading to incorrect time
comparisons and excessive measurements.

Added parentheses around subtraction operations to make operator
precedence explicit.

<!-- START COPILOT ORIGINAL PROMPT -->



<details>

<summary>Original prompt</summary>

> 
> ----
> 
> *This section details on the original issue you should resolve*
> 
> <issue_title>High CPU utilization after update from net8 to
net10</issue_title>
> <issue_description><!--This is just a template - feel free to delete
any and all of it and replace as appropriate.-->
> 
> ### Description
> 
> After updating asp net core application from net 8 to net10 noticed
significantly increased CPU consumption. What is the reason for this?
> 
> <img width=""1728"" height=""1072"" alt=""Image""
src=""https://github.com/user-attachments/assets/654ab469-4ee8-440e-a34b-6a3136d9272f""
/>
> 
> <img width=""1675"" height=""1074"" alt=""Image""
src=""https://github.com/user-attachments/assets/f45dee2b-78db-4176-82c3-7988285d7516""
/>
> 
> <img width=""1772"" height=""1075"" alt=""Image""
src=""https://github.com/user-attachments/assets/48a4965e-4b8c-4413-a777-be099acce154""
/>
> 
> After the update, we noticed a significantly increased number of
garbage collections.
> 
> <img width=""1280"" height=""308"" alt=""Image""
src=""https://github.com/user-attachments/assets/876a0d63-d3c2-4a58-941f-111e4c587511""
/>
> 
> ### Configuration
> 
> Image: mcr.microsoft.com/dotnet/aspnet:10.0.0
> OS: Ubuntu 24.04
> Runtime: net10.0.0
> Architecture: x64
> 
> ServerGarbageCollection: true
> ConcurrentGarbageCollection: true
> GarbageCollectionAdaptationMode: Not specified
> </issue_description>
> 
> <agent_instructions>Delete the extra (unsigned) cast at
https://github.com/dotnet/runtime/pull/115408/files#diff-1c8c26a1e7f6ab4505c185d7ba09c8b95dbac6a5da98d424bef94520bf94cdaeR206
that leads to this bug </agent_instructions>
> 
> ## Comments on the Issue (you are @copilot in this section)
> 
> <comments>
> <comment_new><author>@agocke</author><body>
> @jestonedev We would need a before/after trace to be sure. A CPU graph
alone doesn't give enough info to say which piece is spending more CPU.
Setting GCDynamicAdaptationMode to 0 would also help as an easy way to
determine if that's the cause.</body></comment_new>
> <comment_new><author>@jkotas</author><body>
> The YieldProcessorMeasurement counter looks way too high.
YieldProcessorMeasurement is done on finalizer thread, so the high
finalizerstart/stop is a side-effect of that.
> 
> There is something wrong with the scheduling of
YieldProcessorMeasurement</body></comment_new>
> <comment_new><author>@jkotas</author><body>
> > What is YieldProcessorMeasurement
> 
> The performance characteristics of processor yield instruction
(`pause` on Intel) varies a lot between processors. It can even change
while the process is running due to VM migrations in cloud.
YieldProcessorMeasurement is expected to be done occasionally (every 4
seconds at most) by the runtime to measure the current performance
characteristics of this instruction and retune the spinwaiting loops as
needed.</body></comment_new>
> <comment_new><author>@jkotas</author><body>
> Looks like a regression inroduced by
https://github.com/dotnet/runtime/pull/115408/files#diff-1c8c26a1e7f6ab4505c185d7ba09c8b95dbac6a5da98d424bef94520bf94cdaeR206</body></comment_new>
> </comments>
> 


</details>



<!-- START COPILOT CODING AGENT SUFFIX -->

- Fixes dotnet/runtime#122280

<!-- START COPILOT CODING AGENT TIPS -->
---

💬 We'd love your input! Share your thoughts on Copilot coding agent in
our [2 minute survey](https://gh.io/copilot-coding-agent-survey).

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: jkotas <6668460+jkotas@users.noreply.github.com>
Co-authored-by: agocke <515774+agocke@users.noreply.github.com>",127,404,1316,"consolidate queryperformancecounter/gettickcount usages to minipal/time.h (issue_ref)remove the duplicated implementations and use minipal/time.h as single source of truth.not touching a bit ifdef'd-out instances, which are supposed for local debug usages only."
dotnet/runtime,e163124bce28b7e868b62f4efd498fcaa7f95301,"Implement ldtoken in the interpreter (#115723)

* Implements a new LDTOKEN interpreter opcode with support for method/field/type tokens. Only type tokens have been tested, it's not currently possible to test the other two.
* Adds an integrity check header to InterpMethod because the behavior if we jump to something that isn't a valid InterpMethod is very messy and harder to debug.
* Fixes a bug in the CallStub generator for sysv (we weren't handling certain argument types.)",2025-05-22 00:31:55+00:00,Katelyn Gadd,1,f4dc588fda760c36bfee494eacb1ff243e36da9b,"Fix interpreter double and 64 bit constant processing (#116115)

There is a bug in extracting 64 bit and double constants on both the
interpreter compiler and execution sides. The problem was that the lower
32 bits were extracted as signed 32 bit int and then casted to signed 64
bit int and or-ed to the other 32 bits shifted up. The problem is that
when the lower 32 bits were signed, the sign got extended to the upper
32 bits and the combined result was incorrect.

This fixes 24 codegen bringup tests with the interpreter that were
previously failing with ""Assert.Equal() Failure: Values differ"".",6,156,35,"implement ldtoken in the interpreter (issue_ref)* implements a new ldtoken interpreter opcode with support for method/field/type tokens. only type tokens have been tested, it's not currently possible to test the other two.* adds an integrity check header to interpmethod because the behavior if we jump to something that isn't a valid interpmethod is very messy and harder to debug.* fixes a bug in the callstub generator for sysv (we weren't handling certain argument types.)"
dotnet/runtime,a1f6dec28419179245720d59c32948217805416e,[minipal] Don't assert when writing empty string (#115824),2025-05-22 07:52:22+00:00,Vlad Brezae,0,,,1,8,2,[minipal] don't assert when writing empty string (issue_ref)
dotnet/runtime,2fdfad57e69a2cdf04ede9a2c626dca1cb04008a,"Revert ""Pin web assembly server 2025 docker image (#112509)"" (#115830)

This reverts commit 8cec9e0b25b28813dd03a00dbdfdf5d4fa7dd0e3.",2025-05-22 08:25:29+00:00,Alexander Köplinger,0,,,1,1,1,"revert ""pin web assembly server 2025 docker image (issue_ref)"" (issue_ref)this reverts commit 8cec9e0b25b28813dd03a00dbdfdf5d4fa7dd0e3."
dotnet/runtime,c9e01a517413494ab3f3efd0fa805b56d2c6337f,"JIT: Copy `BBF_ASYNC_RESUMPTION` when splitting edges in LSRA (#115836)

Async resumption BBs are introduced late enough that we allow them to do
some things that general BBs are not allowed to do. For example, they
are allowed to jump into try regions at any point. This allowance is
marked with the `BBF_ASYNC_RESUMPTION` flag. Propagate this flag from
the source when edges are split by LSRA to allow the new block the same
affordances.",2025-05-22 08:26:22+00:00,Jakob Botsch Nielsen,0,,,2,7,3,"jit: copy when splitting edges in lsra (issue_ref)async resumption bbs are introduced late enough that we allow them to dosome things that general bbs are not allowed to do. for example, theyare allowed to jump into try regions at any point. this allowance ismarked with the flag. propagate this flag fromthe source when edges are split by lsra to allow the new block the sameaffordances."
dotnet/runtime,113198b33db82053f9244d6d87a8e5f2ffa4144c,"JIT: Fix SysV first/second return register GC info mismatch when generating calls (#115827)

On SysV it is possible to have mixed SIMD/integer return registers for
calls. This leads to a case where the first return register is a SIMD
register, while the second return register is an integer register. In
that particular case, the emitter would get confused and expect GC
information for the second return register to refer to `rdx`, when in
reality it refers to `rax`.

Fix the problem by detecting the case where the second register is
`rax`, and communicating the right information back to the emitter. Also
add a test case that reliably segfaults under `DOTNET_GCStress=C`
without the fix.",2025-05-22 08:26:57+00:00,Jakob Botsch Nielsen,1,1a5af14f8cdbe7ab09d2324ab4e9e10f72e610cd,"Debugger fixes for the Windows X86 EH Funclets model (#115630)

Notable areas improved
- The funclets model uses the vectored exception handler to funnel debug events to the debugger
- FramePointer details for the debugger are inscrutable and weird. I've made it work, but enough of this is driven by subtleties in the stackwalker that I would not be surprised if there are additional issues here
- RtlpGetFunctionEndAddress needs to use a DAC pointer to read the unwind info.
- Funclet prologs for CoreCLR X86 Funclets need to have at least 1 instruction in them so that the Native->IL mapping is correct. Otherwise it gets shadowed by a mapping which says it is a PROLOG instruction. This is probably fixable by allowing an Native -> IL mapping for both the PROLOG as well as the IL offset in the funclet, but a nop here is both easy to generate an unlikely to be a major cost.
- Likewise, EnC frame generation is no longer able to rely on the shadow stack pointer logic injected by EH handling, and needed 1 bit of info not in the current emitted stack information. Notably, that there is synchronized codegen in the method. Instead of modifying the gcinfo to include that data, we just put in fake offsets for where the synchronized region is, and use the existence of any data as a flag in the EnC layout. NOTE: I also removed the general purpose logic to read the synchronized range from the data. The fix for this also needs to fix the runtime behavior around stackwalking, and in another case in the presence of a locallloc instruction in the method.

Contributes to #113985",3,62,0,"jit: fix sysv first/second return register gc info mismatch when generating calls (issue_ref)on sysv it is possible to have mixed simd/integer return registers forcalls. this leads to a case where the first return register is a simdregister, while the second return register is an integer register. inthat particular case, the emitter would get confused and expect gcinformation for the second return register to refer to , when inreality it refers to .fix the problem by detecting the case where the second register is, and communicating the right information back to the emitter. alsoadd a test case that reliably segfaults under without the fix."
dotnet/runtime,7e7e19568fc8ba398e7acdf0cbeee0160d95da85,"Create copilot-setup-steps.yml (#115834)

Based on https://github.com/dotnet/aspire/blob/5c4f9f5b9faac3748b939bfd96bc9a72ce0f9c1e/.github/workflows/copilot-setup-steps.yml and https://github.com/dotnet/aspnetcore/blob/aebd07af9854541970d0c05d99dc2e6e8bd2fdd4/.github/workflows/copilot-setup-steps.yml
Script args based on https://github.com/dotnet/runtime/blob/28e603e0a100dc83e3efc8a772e7798d712984f4/eng/pipelines/common/templates/runtimes/send-to-helix-inner-step.yml#L18",2025-05-22 10:09:03+00:00,Natalia Kondratyeva,0,,,1,21,0,create copilot-setup-steps.yml (issue_ref)based on and script args based on #l18
dotnet/runtime,49baf1d02792ad2acf875a8a308d6a903c09d24e,"Decrease number of allocations in new test (#115887)

Otherwise the test runs very slowly under DOTNET_GCStress=1/3.",2025-05-22 14:41:33+00:00,Jakob Botsch Nielsen,0,,,1,3,3,decrease number of allocations in new test (issue_ref)otherwise the test runs very slowly under dotnet_gcstress=1/3.
dotnet/runtime,3d23851b07c3c9a478494f3cc280abed7c395bae,"[browser] Remove rest of StartupMemoryCache (#115878)

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: pavelsavara <271576+pavelsavara@users.noreply.github.com>",2025-05-22 14:42:19+00:00,Copilot,0,,,4,0,12,[browser] remove rest of startupmemorycache (issue_ref)
dotnet/runtime,ed055b1aaa025f0ae65d858c866ffe01eee0208d,"JIT: also check gc-ness of layout for GT_BLK during escape analysis (#115844)

Otherwise we may mistakenly build a connection to the unknown source and
try retyping a non-gc struct.

Fixes #115831.",2025-05-22 14:45:28+00:00,Andy Ayers,1,1c653e91fb4d24aa7df35727ad0a394aba9121cf,"JIT: update layout of BLK nodes during escape analysis (#115845)

If we retype a struct local we also need to retype any BLK operations
on those locals.

Fixes #115832.",3,65,0,jit: also check gc-ness of layout for gt_blk during escape analysis (issue_ref)otherwise we may mistakenly build a connection to the unknown source andtry retyping a non-gc struct.fixes issue_ref.
dotnet/runtime,1c653e91fb4d24aa7df35727ad0a394aba9121cf,"JIT: update layout of BLK nodes during escape analysis (#115845)

If we retype a struct local we also need to retype any BLK operations
on those locals.

Fixes #115832.",2025-05-22 14:45:43+00:00,Andy Ayers,1,236643c60241b51ca259df1649a9ace4892f8f67,"JIT: fix retyping of BLK ops when parent local is retyped (#116027)

Properly handle cases where we have updated the layout of a struct local (because
its fields may now refer to stack allocated objects) and then store or load from
just part of that local.

Fixes #115979.",5,111,10,jit: update layout of blk nodes during escape analysis (issue_ref)if we retype a struct local we also need to retype any blk operationson those locals.fixes issue_ref.
dotnet/runtime,16fd8fbce771bd2d5b61c2ea944145efafae74be,"Use new TypeName methods in runtime tools (#115857)

Replace the usage of the TypeNameHelpers utility class with the newer TypeName class methods and properties in the runtime tools.

Co-authored-by: MichalStrehovsky <13110571+MichalStrehovsky@users.noreply.github.com>
Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>",2025-05-22 15:23:43+00:00,Copilot,0,,,8,5,99,use new typename methods in runtime tools (issue_ref)replace the usage of the typenamehelpers utility class with the newer typename class methods and properties in the runtime tools.
dotnet/runtime,b4bd13d3d81d8d91ad62946a8f1d24bf8e753d8d,"Fix build break for paltests (#115877)

* Use minipal_lowres_ticks for paltests

* Delete unused GetHighPrecisionTimeStamp",2025-05-22 15:27:35+00:00,Huo Yaoyuan,1,1548409aedce8dafcd87f962b3cef437528d108c,Fix intermittent failures in PAL tests (#115958),10,32,86,fix build break for paltests (issue_ref)* use minipal_lowres_ticks for paltests* delete unused gethighprecisiontimestamp
dotnet/runtime,f10d4c3e0a85c146d0e67cb8df8a78692e8d8026,"Add long/ulong->float cast helpers (#114597)

* add long/ulong->float cast helpers

* fix const folding",2025-05-22 15:46:36+00:00,Clinton Ingram,1,7f1d8d023061b42dd75cc42e8557db509e92043a,"update R2R NativeFormat docs (#117487)

* fix Hashtable example

* add docs for Sparse Array

* fix typos",22,115,75,add long/ulong->float cast helpers (issue_ref)* add long/ulong->float cast helpers* fix const folding
dotnet/runtime,bb48410fcac09f4f01bd6fe0d0084ef8bc87899c,"Convert sln to slnx (#115818)

* convert sln to slnx

* Update slngen.proj

* Update dotnet-tools.json

* Update slnx files based on slngen.proj

---------

Co-authored-by: Viktor Hofer <viktor.hofer@microsoft.com>",2025-05-22 15:48:48+00:00,kasperk81,1,722de45740e6766f9f3e30776b4c56d070133a75,"Fix building the nativeaot project in VS (#121946)

The build doesn't work unless VS knows about the generators in the SLNX.",481,23728,68269,convert sln to slnx (issue_ref)* convert sln to slnx* update slngen.proj* update dotnet-tools.json* update slnx files based on slngen.proj---------
dotnet/runtime,f0230dbda533cbd6531e44d24bc0c6e298be56e8,"Remove always searching executable directory for native libraries in single-file applications (#115236)

Avoid always searching the application directory for native libraries in single-file applications. The assembly directory, which is searched by default and when `DllImportSearchPath.AssemblyDirectory` is specified, is treated as the application directory.
- Single-file
  - Stop adding the app directory and extraction directory to `NATIVE_DLL_SEARCH_DIRECTORIES` (paths which are always searched)
  - When looking for native libraries, treat assembly directory for bundled assemblies as the bundle directory
    - If the bundle has extracted assets, also look in the extraction path (if not found in the bundle directory)
- NativeAOT
  - Update p/invoke default to search assembly directory
  - Don't set RPATH by default
  - Remove `IlcRPath` property",2025-05-22 17:41:39+00:00,Elinor Fung,1,d7da56a440ebc88b37505a95f59366f7f76eefaf,"Fix libhost scenarios (COM, C++/CLI, custom component host) incorrect coreclr path determination (#116504)

There is a fallback for apps with no .deps.json where the host will consider the app directory for loading coreclr. In component hosting scenarios, we do not have an app path / directory. We were incorrectly going down the path of looking for coreclr in the (empty string) app directory.

This change skips that path for libhost scenarios. It also adds checks that the paths we determine for loading coreclr, hostpolicy, and hostfxr are absolute.",20,127,84,"remove always searching executable directory for native libraries in single-file applications (issue_ref)avoid always searching the application directory for native libraries in single-file applications. the assembly directory, which is searched by default and when is specified, is treated as the application directory.- single-file - stop adding the app directory and extraction directory to (paths which are always searched) - when looking for native libraries, treat assembly directory for bundled assemblies as the bundle directory - if the bundle has extracted assets, also look in the extraction path (if not found in the bundle directory)- nativeaot - update p/invoke default to search assembly directory - don't set rpath by default - remove property"
dotnet/runtime,c68838ea3cbf08a397a5ba85d4d49fc41ff30092,"[browser] EP profiler - identify top frame, positive PID (#115825)",2025-05-22 19:35:14+00:00,Pavel Savara,0,,,5,14,7,"[browser] ep profiler - identify top frame, positive pid (issue_ref)"
dotnet/runtime,da23c19fb4a9db9635aa37c87c88b42b449cf745,"Implement CEE_LDOBJ and CEE_STOBJ in the interpreter via ldind/stind (#115900)



ldind and stind are actually aliases for ldobj and stobj according to ecma. We already have helper code for generating appropriate intop_xxind opcodes based on type, so I just reused those helpers to generate the appropriate interpreter opcodes to do the ldobj/stobj. This meant I didn't need to add new opcodes.

cpobj is not covered since as far as i can tell roslyn never generates it. The only way I found to generate it (other than a handwritten IL test) is to use pinvoke marshaling because the marshaling generator will use it. So once we do pinvoke marshaling we'll need cpobj and that's probably the right point in time to add it.",2025-05-22 20:54:03+00:00,Katelyn Gadd,0,,,2,48,0,"implement cee_ldobj and cee_stobj in the interpreter via ldind/stind (issue_ref)ldind and stind are actually aliases for ldobj and stobj according to ecma. we already have helper code for generating appropriate intop_xxind opcodes based on type, so i just reused those helpers to generate the appropriate interpreter opcodes to do the ldobj/stobj. this meant i didn't need to add new opcodes.cpobj is not covered since as far as i can tell roslyn never generates it. the only way i found to generate it (other than a handwritten il test) is to use pinvoke marshaling because the marshaling generator will use it. so once we do pinvoke marshaling we'll need cpobj and that's probably the right point in time to add it."
dotnet/runtime,0e411eee24476ebe8cc19203e2e87782e6a7e4b0,Update WebAssembly image to Ubuntu 24.04 (#115901),2025-05-22 21:04:50+00:00,Rich Lander,0,,,1,1,1,update webassembly image to ubuntu 24.04 (issue_ref)
dotnet/runtime,1a5af14f8cdbe7ab09d2324ab4e9e10f72e610cd,"Debugger fixes for the Windows X86 EH Funclets model (#115630)

Notable areas improved
- The funclets model uses the vectored exception handler to funnel debug events to the debugger
- FramePointer details for the debugger are inscrutable and weird. I've made it work, but enough of this is driven by subtleties in the stackwalker that I would not be surprised if there are additional issues here
- RtlpGetFunctionEndAddress needs to use a DAC pointer to read the unwind info.
- Funclet prologs for CoreCLR X86 Funclets need to have at least 1 instruction in them so that the Native->IL mapping is correct. Otherwise it gets shadowed by a mapping which says it is a PROLOG instruction. This is probably fixable by allowing an Native -> IL mapping for both the PROLOG as well as the IL offset in the funclet, but a nop here is both easy to generate an unlikely to be a major cost.
- Likewise, EnC frame generation is no longer able to rely on the shadow stack pointer logic injected by EH handling, and needed 1 bit of info not in the current emitted stack information. Notably, that there is synchronized codegen in the method. Instead of modifying the gcinfo to include that data, we just put in fake offsets for where the synchronized region is, and use the existence of any data as a flag in the EnC layout. NOTE: I also removed the general purpose logic to read the synchronized range from the data. The fix for this also needs to fix the runtime behavior around stackwalking, and in another case in the presence of a locallloc instruction in the method.

Contributes to #113985",2025-05-22 22:04:23+00:00,David Wrighton,1,be6751023bf7837fa2f58bf1f7f6e7f6507c9798,"Enable new exception handling on win-x86 (#115957)

* Change win-x86 configuration to build with FEATURE_EH_FUNCLETS

* Update CLR ABI document

* Bump R2R version

* Update JIT-EE interface GUID

* Report funclet prologs and epilogs as no-GC regions in x86 GC info

* Fix isFilterFunclet code path in EnumGcRefsX86

* Implement ShouldParentToFuncletUseUnwindTargetLocationForGCReporting code path on x86

* Fix hasReversePInvoke condition not to trigger when unwinding from funclet

* Cleanup usages of WantsReportOnlyLeaf",13,98,11,"debugger fixes for the windows x86 eh funclets model (issue_ref)notable areas improved- the funclets model uses the vectored exception handler to funnel debug events to the debugger- framepointer details for the debugger are inscrutable and weird. i've made it work, but enough of this is driven by subtleties in the stackwalker that i would not be surprised if there are additional issues here- rtlpgetfunctionendaddress needs to use a dac pointer to read the unwind info.- funclet prologs for coreclr x86 funclets need to have at least 1 instruction in them so that the native->il mapping is correct. otherwise it gets shadowed by a mapping which says it is a prolog instruction. this is probably fixable by allowing an native -> il mapping for both the prolog as well as the il offset in the funclet, but a nop here is both easy to generate an unlikely to be a major cost.- likewise, enc frame generation is no longer able to rely on the shadow stack pointer logic injected by eh handling, and needed 1 bit of info not in the current emitted stack information. notably, that there is synchronized codegen in the method. instead of modifying the gcinfo to include that data, we just put in fake offsets for where the synchronized region is, and use the existence of any data as a flag in the enc layout. note: i also removed the general purpose logic to read the synchronized range from the data. the fix for this also needs to fix the runtime behavior around stackwalking, and in another case in the presence of a locallloc instruction in the method.contributes to issue_ref"
dotnet/runtime,17a94e2cdaf5442b92533ff771fd97e565fe5d8f,JIT: Unprotect handler entry after finally removal (#115907),2025-05-22 23:07:08+00:00,Aman Khalid,0,,,1,4,4,jit: unprotect handler entry after finally removal (issue_ref)
dotnet/runtime,8f84f8efbe632963859e9ffc44f6762e6646e05e,"[crossgen2] Prevent inlining of PInvoke marshalling accross version bubles (#115277)

Contributes to #113742",2025-05-23 06:30:12+00:00,Jan Kotas,0,,,2,5,5,[crossgen2] prevent inlining of pinvoke marshalling accross version bubles (issue_ref)contributes to issue_ref
dotnet/runtime,d4c23c6e87eb144f8030eb83f035d6d69e0076c8,"JIT: Remove overzealous async assert (#115883)

The store can come from a `STORE_LCL_FLD`, so in reality there is no
relation between the type of the resultLcl and the call type. The code
below handles `STORE_LCL_FLD` correctly, so just remove the assert.",2025-05-23 07:32:36+00:00,Jakob Botsch Nielsen,0,,,1,0,1,"jit: remove overzealous async assert (issue_ref)the store can come from a , so in reality there is norelation between the type of the resultlcl and the call type. the codebelow handles correctly, so just remove the assert."
dotnet/runtime,87b35f477c09f146107a6c11627317f6b15e9d3e,"JIT: Avoid implicit byref retbufs in async calls (#115888)

The check in the importer did not take into account that a `LCL_ADDR` of
an implicit byref local will turn into `LCL_VAR` after morph. The async
transformation requires the retbuf to be the address of a local, so
enhance the check to take this into account.

Also switch the `compIsAsync()` check to `call->IsAsync()`. Inside async
functions it is ok for non-async calls to use the normal logic.",2025-05-23 07:34:11+00:00,Jakob Botsch Nielsen,0,,,2,43,8,"jit: avoid implicit byref retbufs in async calls (issue_ref)the check in the importer did not take into account that a ofan implicit byref local will turn into after morph. the asynctransformation requires the retbuf to be the address of a local, soenhance the check to take this into account.also switch the check to . inside asyncfunctions it is ok for non-async calls to use the normal logic."
dotnet/runtime,915f129cae6286e488776957496bea1ada5e342e,"Use sln format for coreclr and corehost (#115935)

* Use sln format for coreclr and corehost

* Update Program.cs",2025-05-23 10:30:56+00:00,Viktor Hofer,1,cd726e7c57f9f09b7b741bf1265b5b6c51b2a897,Fix -vs arg for ilc/crossgen (#117268),2,9,7,use sln format for coreclr and corehost (issue_ref)* use sln format for coreclr and corehost* update program.cs
dotnet/runtime,fa1604a0ee39a2cb21b384262f65af10f6f26d2c,"Make HttpStress fail on unobserved exceptions (#115849)

There were no unobserved exceptions in recent HttpStress runs, so it should be OK (and desired) to fail the test run if we detect one.",2025-05-23 13:47:35+00:00,Anton Firszov,0,,,1,9,1,"make httpstress fail on unobserved exceptions (issue_ref)there were no unobserved exceptions in recent httpstress runs, so it should be ok (and desired) to fail the test run if we detect one."
dotnet/runtime,2f6290310be31d2e6b2d5bbbeda958bcce642d40,"Add dotnet to the path for copilot agent (#115912)

* Add dotnet to the path for copilot agent

* Update .github/workflows/copilot-setup-steps.yml

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>

* Add dependency install step

* Sudo install dependencies + info

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-05-23 17:11:45+00:00,Eric StJohn,1,f85ec3661db49c6a06bb69e89b41ab38b1874723,"Create copilot-instructions.md (#115917)

* Create copilot-instructions.md

* more instructions

* Update .github/copilot-instructions.md

* Code review suggestions, unify formatting

* fix sudo

* Add missing testhost instruction

* Pre-build clr+libs

* Apply suggestions from code review

Co-authored-by: Eric StJohn <ericstj@microsoft.com>

---------

Co-authored-by: Eric StJohn <ericstj@microsoft.com>",1,6,0,add dotnet to the path for copilot agent (issue_ref)* add dotnet to the path for copilot agent* update .github/workflows/copilot-setup-steps.yml
dotnet/runtime,d1e4319367175fdb2e60d7c7ab5247d1f2794036,"When cloning method descs be careful with fields that have different offsets between the source and destination.  (#115798)

* clean old locations when shifting data inside methoddesc

* better fix

* added a test

* PR feedback

* missing rename",2025-05-23 18:01:53+00:00,Vladimir Sadov,1,f154d658da0e98eef1007e7e4b16356e6e589491,"Delete FEATURE_DOUBLE_ALIGNMENT_HINT for GC heap allocations (#115985)

* Delete FEATURE_DOUBLE_ALIGNMENT_HINT for allocations

This optimization is no longer relevant on current x86 hardware. The performance penalty for misaligned memory access is negligible compared to what it used to be.

Fixes #101284

* Delete tests that are no longer applicable",4,85,7,when cloning method descs be careful with fields that have different offsets between the source and destination. (issue_ref)* clean old locations when shifting data inside methoddesc* better fix* added a test* pr feedback* missing rename
dotnet/runtime,cf5369440e236aa783599761750b4f8e1f4aa719,"x86/funclets: Handle longjmp (#115932)

* x86: Implement basic support for unwinding longjmp across managed frames to match x64 behavior

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-05-24 03:39:51+00:00,Filip Navara,1,4fea27c2f8c888263f33531a2dd0510918d4b25a,"Notify attached debugger of NAOT exception (#115678)

Native AOT does not use C++ or SEH exceptions, meaning that debuggers do
not recognize the exception throw/catch sequence and cannot break on
first-chance exceptions. On Windows, we can use OS functionality to
throw and catch an SEH exception when a Native AOT exception is thrown
and a debugger is attached, effectively acting as a notification to
debuggers that an exception is in flight. The exception code used here
is the same one as CoreCLR, so the WinDbg command `sxe clr` would also
be sufficient to catch Native AOT exceptions.

Fixes #115514",1,53,2,x86/funclets: handle longjmp (issue_ref)* x86: implement basic support for unwinding longjmp across managed frames to match x64 behavior
dotnet/runtime,2b0c8c3a2b4ae6231e82a155473d2b527a7de8fc,Add missing null check to SlhDsa's constructor,2025-05-24 13:53:55+00:00,Kevin Jones,0,,,2,11,1,add missing null check to slhdsa's constructor
dotnet/runtime,c00b15f869f8d2f8f9d6a5e2b4d8e6cb43d4fba4,"Simplify findvcvarsall.bat (#115951)

Delete unnecessary version check",2025-05-24 14:20:11+00:00,Jan Kotas,1,17e1cff423e232cab8d6f61141f7becf97019bc5,"[NativeAOT] Use native Arm64 toolset on Windows Arm64 machines (#117132)

Fixes #76079",1,0,1,simplify findvcvarsall.bat (issue_ref)delete unnecessary version check
dotnet/runtime,69440910d623d3c3868f2827169c9428b46eaca6,"Add missing overrides for IsCollectible (#115785)

* Add missing overrides for IsCollectible
* Add basic IsCollectible test cases for all reflection types

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-05-24 14:35:25+00:00,Venkad000,0,,,9,64,0,add missing overrides for iscollectible (issue_ref)* add missing overrides for iscollectible* add basic iscollectible test cases for all reflection types
dotnet/runtime,d896e8518a6ddba11bb58634a19a6bcb2a001927,"Disable Android tests in default CI set for now (#115956)

Workaround for #115955",2025-05-24 15:27:31+00:00,Jan Kotas,0,,,1,1,1,disable android tests in default ci set for now (issue_ref)workaround for issue_ref
dotnet/runtime,8115429a72fa599584135f217f3a34bd4aef8cf4,"JIT: Disallow forward substitution of async calls (#115936)

This can be forwarded into an overlapping byref temp, which is invalid
IR.

We could look for that condition specifically, but that's more complex. Do the
simple thing for now and skip forward substituting trees containing async calls.
In the future when we have async contexts in SPMI collections we can try the
more precise check and see if it makes a difference.

The opposite might also be possible: forward substituting a TYP_BYREF
into a tree with an async call. However, I am not 100% sure that can
create overlapping lifetimes, so let's wait and see if Fuzzlyn comes up
with an example.",2025-05-25 13:31:12+00:00,Jakob Botsch Nielsen,0,,,3,77,15,"jit: disallow forward substitution of async calls (issue_ref)this can be forwarded into an overlapping byref temp, which is invalidir.we could look for that condition specifically, but that's more complex. do thesimple thing for now and skip forward substituting trees containing async calls.in the future when we have async contexts in spmi collections we can try themore precise check and see if it makes a difference.the opposite might also be possible: forward substituting a typ_byrefinto a tree with an async call. however, i am not 100% sure that cancreate overlapping lifetimes, so let's wait and see if fuzzlyn comes upwith an example."
dotnet/runtime,766faec37ec5c002a1e48290e57c039d7dec23fb,"Disable Android tests in default CI set for now (#115973)

Workaround for #115955",2025-05-25 14:45:56+00:00,Jan Kotas,0,,,1,11,11,disable android tests in default ci set for now (issue_ref)workaround for issue_ref
dotnet/runtime,2765f1856d7ebcc0ebd9708e7a2322f565a1fc77,"Automated bump of chrome version (#115969)

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>",2025-05-25 16:54:16+00:00,github-actions[bot],0,,,1,4,4,automated bump of chrome version (issue_ref)
dotnet/runtime,1548409aedce8dafcd87f962b3cef437528d108c,Fix intermittent failures in PAL tests (#115958),2025-05-26 00:50:05+00:00,Jan Kotas,1,73882e8bec954e69ade0a450e004c7a5e6c3efd8,Fix PAL tests (#116197),8,24,24,fix intermittent failures in pal tests (issue_ref)
dotnet/runtime,be6751023bf7837fa2f58bf1f7f6e7f6507c9798,"Enable new exception handling on win-x86 (#115957)

* Change win-x86 configuration to build with FEATURE_EH_FUNCLETS

* Update CLR ABI document

* Bump R2R version

* Update JIT-EE interface GUID

* Report funclet prologs and epilogs as no-GC regions in x86 GC info

* Fix isFilterFunclet code path in EnumGcRefsX86

* Implement ShouldParentToFuncletUseUnwindTargetLocationForGCReporting code path on x86

* Fix hasReversePInvoke condition not to trigger when unwinding from funclet

* Cleanup usages of WantsReportOnlyLeaf",2025-05-26 08:42:00+00:00,Filip Navara,1,ad0befc6b9ad467cd4bba5520402531ab3a64fca,"Unconditionally skip GC reporting for non-interruptible aborted methods (#119403)

* Unconditionally skip GC reporting for non-interruptible aborted methods

Fixes #119363

* Add test",18,138,200,enable new exception handling on win-x86 (issue_ref)* change win-x86 configuration to build with feature_eh_funclets* update clr abi document* bump r2r version* update jit-ee interface guid* report funclet prologs and epilogs as no-gc regions in x86 gc info* fix isfilterfunclet code path in enumgcrefsx86* implement shouldparenttofuncletuseunwindtargetlocationforgcreporting code path on x86* fix hasreversepinvoke condition not to trigger when unwinding from funclet* cleanup usages of wantsreportonlyleaf
dotnet/runtime,cb695d90e0a631ee55ae1cf134ed88d9bdd27c27,"[browser] Rename collectPerfCounters to collectMetrics in browser runtime (#115926)

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: pavelsavara <271576+pavelsavara@users.noreply.github.com>",2025-05-26 12:32:01+00:00,Copilot,0,,,7,9,9,[browser] rename collectperfcounters to collectmetrics in browser runtime (issue_ref)
dotnet/runtime,82ef5415c39f669b7a67d68fa88c9a168affc90a,"[wasm coreclr] Make clr.runtime+libs build on Windows (#115058)

* [coreclr][wasm] Make clr.runtime+libs build on Windows

* Try to enable windows build of wasm coreclr

* More things required to do the right things on windows

---------

Co-authored-by: Steve Pfister <stpfiste@microsoft.com>",2025-05-26 14:28:46+00:00,Radek Doulik,1,d666a78b5b69fdad64039ff9ce2856677a62c1f1,"Fix cmake warning (#116000)

Fixes https://github.com/dotnet/runtime/issues/115998",8,41,19,[wasm coreclr] make clr.runtime+libs build on windows (issue_ref)* [coreclr][wasm] make clr.runtime+libs build on windows* try to enable windows build of wasm coreclr* more things required to do the right things on windows---------
dotnet/runtime,f154d658da0e98eef1007e7e4b16356e6e589491,"Delete FEATURE_DOUBLE_ALIGNMENT_HINT for GC heap allocations (#115985)

* Delete FEATURE_DOUBLE_ALIGNMENT_HINT for allocations

This optimization is no longer relevant on current x86 hardware. The performance penalty for misaligned memory access is negligible compared to what it used to be.

Fixes #101284

* Delete tests that are no longer applicable",2025-05-26 15:32:16+00:00,Jan Kotas,1,12eba0a5e32a6c98094e2009a5eb71cb6225baa1,"[wasm][coreclr] Interpret everything on wasm (#115788)

* Interpret everything on wasm

Do not try to setup the jit and use it, instead use the interpreter

* Fix build

* Fix build

* Feedback

* Enable interpreter everywhere, where JIT is not available, not just WASM

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Link interpreter statically only when JIT is missing

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Fix build

* Apply suggestions from code review

* Apply suggestions from code review

* Update src/coreclr/vm/codeman.cpp

* Update src/coreclr/vm/codeman.cpp

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",24,5,1092,delete feature_double_alignment_hint for gc heap allocations (issue_ref)* delete feature_double_alignment_hint for allocationsthis optimization is no longer relevant on current x86 hardware. the performance penalty for misaligned memory access is negligible compared to what it used to be.fixes issue_ref* delete tests that are no longer applicable
dotnet/runtime,8b3b6e5d4edc85448982211a57f44c7bbab92a17,"add HttpMethod.Query (#115934)

* add HttpMethod.Query

* docs: add comment for the query method

* test: update tests for query method",2025-05-26 15:32:44+00:00,Weihan Li,0,,,3,8,0,add httpmethod.query (issue_ref)* add httpmethod.query* docs: add comment for the query method* test: update tests for query method
dotnet/runtime,d91f6c42d43f7d5cbe305cd684a73f1c0048863b,"Cleanup some PAL items (#115986)

* Remove PAL_PERF code

* Remove GetACP() from PAL.

* Remove a few low impact macros.",2025-05-26 16:19:18+00:00,Aaron Robinson,0,,,31,106,1726,cleanup some pal items (issue_ref)* remove pal_perf code* remove getacp() from pal.* remove a few low impact macros.
dotnet/runtime,12eba0a5e32a6c98094e2009a5eb71cb6225baa1,"[wasm][coreclr] Interpret everything on wasm (#115788)

* Interpret everything on wasm

Do not try to setup the jit and use it, instead use the interpreter

* Fix build

* Fix build

* Feedback

* Enable interpreter everywhere, where JIT is not available, not just WASM

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Link interpreter statically only when JIT is missing

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Fix build

* Apply suggestions from code review

* Apply suggestions from code review

* Update src/coreclr/vm/codeman.cpp

* Update src/coreclr/vm/codeman.cpp

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-05-26 16:47:05+00:00,Radek Doulik,1,71c30b405516b1fe774a1bfdbc43cd804468568f,"Disable interpreter build on android (#117141)

It is not meant to be used there currently and the build is also failing at the moment.

```
  ld.lld: error: undefined symbol: t_CurrentThreadInfo
  >>> referenced by asmhelpers.S:696 (/Users/vbrezae/Xamarin/repos/runtime/src/coreclr/vm/arm64/asmhelpers.S:696)
  >>>               ../../../vm/wks/CMakeFiles/cee_wks_core.dir/__/arm64/asmhelpers.S.o:(InterpreterStub)
  >>> referenced by asmhelpers.S:696 (/Users/vbrezae/Xamarin/repos/runtime/src/coreclr/vm/arm64/asmhelpers.S:696)
  >>>               ../../../vm/wks/CMakeFiles/cee_wks_core.dir/__/arm64/asmhelpers.S.o:(InterpreterStub)
  >>> referenced by asmhelpers.S:696 (/Users/vbrezae/Xamarin/repos/runtime/src/coreclr/vm/arm64/asmhelpers.S:696)
  >>>               ../../../vm/wks/CMakeFiles/cee_wks_core.dir/__/arm64/asmhelpers.S.o:(InterpreterStub)
```",10,91,39,"[wasm][coreclr] interpret everything on wasm (issue_ref)* interpret everything on wasmdo not try to setup the jit and use it, instead use the interpreter* fix build* fix build* feedback* enable interpreter everywhere, where jit is not available, not just wasm"
dotnet/runtime,961d3bb02d77342348a98591246f780643b65031,Add a copilot prompt file for JIT-EE interface modifications (#115889),2025-05-26 17:15:53+00:00,Egor Bogatov,0,,,2,244,7,add a copilot prompt file for jit-ee interface modifications (issue_ref)
dotnet/runtime,30160aa7213eab1b183f3f1b98a8b6d0f0c955a9,Move GenTreeIntCon::gtCompileTimeHandle field to be a global map (#115542),2025-05-26 19:09:14+00:00,Egor Bogatov,1,b10ea0378f3882fa8731aaaa9b52854285211263,"Replace CORCOMPILE_FIXUP_BLOB_KIND with ReadyToRunFixupKind (#115854)

Removes the redundant CORCOMPILE_FIXUP_BLOB_KIND enum and replaces all its uses with the equivalent ReadyToRunFixupKind enum. CORCOMPILE_FIXUP_BLOB_KIND was a left-over from fragile NGen.

Fixes #115853",26,82,375,move gentreeintcon::gtcompiletimehandle field to be a global map (issue_ref)
dotnet/runtime,6a32ee4a3fae421596291ea828d1840bd5c643ca,"Skip static fields in FieldLayoutIntervalCalculator (#115987)

It was reported on discord that:

```csharp
using System.Runtime.InteropServices;

ref struct Inner1
{
    public const string SomeStr = ""AAA"";
}

ref struct Inner2
{
    public Inner1 F;
}

[StructLayout(LayoutKind.Explicit, Size = 100)]
ref struct Outer
{
    [FieldOffset(0)]
    public Inner2 F;
}


class Program
{
    static void Main(string[] args)
    {
        Outer x = new Outer();
        x.F.F = new Inner1();
        Console.WriteLine(Inner1.SomeStr);
    }
}
```

Will throw a `System.TypeLoadException: Could not load type 'Outer' from assembly 'TestProj, Version=1.0.0.0, Culture=neutral, PublicKey=null' because it contains an object field at offset '2147483647' that is incorrectly aligned or overlapped by a non-object field` at runtime in .NET 9.

It does not throw that on .NET 10, presumably thanks to #111584, but psychic debugging tells me we still have an issue here.",2025-05-26 20:37:23+00:00,Michal Strehovský,0,,,1,3,0,"skip static fields in fieldlayoutintervalcalculator (issue_ref)it was reported on discord that:will throw a at runtime in .net 9.it does not throw that on .net 10, presumably thanks to issue_ref, but psychic debugging tells me we still have an issue here."
dotnet/runtime,8df495514e9a931eb9dfd9fa9c6afd4eb19ad67c,Replace use of DAMT.All in ComponentModel with a more restricted set (#114126),2025-05-26 20:40:07+00:00,Michal Strehovský,1,8a293ea44184eae173d460360809b02ef870bb58,"Fix RangeAttribute to catch OverflowException instead of throwing (#121029)

Fix RangeAttribute to handle OverflowException",19,527,92,replace use of damt.all in componentmodel with a more restricted set (issue_ref)
dotnet/runtime,50447b0ec2e25e794db201dabec579b7da1f7cb2,"Enable AVX2 optimistically with AVX on NAOT (#114575)

* enable AVX2 optimistically with AVX on NAOT

* don't change getPreferredVectorByteLength

* restrict Vector<T> size when AVX2 is not in the baseline supported ISAs",2025-05-27 00:27:59+00:00,Clinton Ingram,0,,,4,43,12,enable avx2 optimistically with avx on naot (issue_ref)* enable avx2 optimistically with avx on naot* don't change getpreferredvectorbytelength* restrict vector<t> size when avx2 is not in the baseline supported isas
dotnet/runtime,b04d40e55b3fcaf74dcf0672a2009ec173bcd002,JIT: Don't allow broadcast lowering to remove cast from decomposed long (#116002),2025-05-27 08:35:42+00:00,Clinton Ingram,0,,,1,1,1,jit: don't allow broadcast lowering to remove cast from decomposed long (issue_ref)
dotnet/runtime,ec351aa53ffa0b22f2ef22bce7ba3fcfd67a9d55,"[RISC-V] Optimize comparisons (#115039)

* 12-bit immediates for sltiu

* Sign-extend for sltu

* Use sub for calculating difference for GT_EQ and GT_NE

* Special-case for -1, 0, 1

* Sign-extend operands for branch comparisons

* Fix assert

* Implement load imm

* Fix sltiu rd, rs, 0",2025-05-27 13:41:24+00:00,Tomasz Sowiński,1,9376d466ea8f62269954949af4d8dfba3e4b6d14,"[RISC-V][LoongArch64] Handle reversed fields in lowered structs (#115933)

* Lower FP structs with reversed fields

* Fix GC info when pointer is in the second field",10,373,203,"[risc-v] optimize comparisons (issue_ref)* 12-bit immediates for sltiu* sign-extend for sltu* use sub for calculating difference for gt_eq and gt_ne* special-case for -1, 0, 1* sign-extend operands for branch comparisons* fix assert* implement load imm* fix sltiu rd, rs, 0"
dotnet/runtime,c972a60d0d5899ec46974e23aafb16d57409c322,"Fixup how xarch instructions check for embedded broadcast and masking support (#115704)

* Fixup how xarch instructions check for embedded broadcast and masking support

* Ensure the lastOp is still consumed, since it's no longer part of node",2025-05-27 14:05:18+00:00,Tanner Gooding,0,,,22,1987,1565,"fixup how xarch instructions check for embedded broadcast and masking support (issue_ref)* fixup how xarch instructions check for embedded broadcast and masking support* ensure the lastop is still consumed, since it's no longer part of node"
dotnet/runtime,d709a73e1bac6994c319c3bb44f0fe90989c0555,"JIT: Always intersect exception sets of defs (#116007)

The existing logic would only intersect the exception sets of subsequent
defs if it had also seen a use. That meant for a list [DEF, DEF, USE] of
CSE candidates we would only validate that the first def's exception
sets were sufficient for the use.",2025-05-27 15:38:03+00:00,Jakob Botsch Nielsen,0,,,3,105,45,"jit: always intersect exception sets of defs (issue_ref)the existing logic would only intersect the exception sets of subsequentdefs if it had also seen a use. that meant for a list [def, def, use] ofcse candidates we would only validate that the first def's exceptionsets were sufficient for the use."
dotnet/runtime,7ed741ec05fa8883791d39568bb46dc349fe6839,"Replace ATP pattern with async/await in SmtpClient (part 2) (#115722)

* Async/await in SmtpClient

* Dead code removal

* Remove unused code

* Improve cancellation support

* Code review feedback

* Code review feedback",2025-05-27 16:31:50+00:00,Radek Zikmund,1,a67d3886ad148bd3a3d57082c88497803fc6bf7b,"Remove unsafe code from SmtpReplyReaderFactory.ProcessRead (#121297)

The `ProcessRead` method used unnecessary unsafe pointer arithmetic
despite accepting a `ReadOnlySpan<byte>` parameter that already provides
safe, efficient indexing.

## Changes

- **Replaced unsafe pointer arithmetic with ReadOnlySpan indexing**
  - Removed `unsafe` block and `fixed` statement
  - Replaced `byte*` pointers with integer index tracking
  - Changed `*ptr++` to `buffer[i++]`, `(int)(ptr - start)` to `i`

- **Fixed pre-existing validation bug** (discovered during refactoring)
- Changed `if (b < '0' && b > '9')` to `if (b < '0' || b > '9')` in
digit validation
- Original condition could never be true (no byte can be both < 48 and >
57)

## Before/After

```csharp
// Before
unsafe {
    fixed (byte* pBuffer = buffer) {
        byte* ptr = pBuffer;
        byte b = *ptr++;
        if (b < '0' && b > '9')  // Bug: never true
            throw new FormatException(...);
    }
}

// After
int i = 0;
byte b = buffer[i++];
if (b < '0' || b > '9')  // Correct validation
    throw new FormatException(...);
```

All existing tests pass. No API or behavior changes.

> [!WARNING]
>
> <details>
> <summary>Firewall rules blocked me from connecting to one or more
addresses (expand for details)</summary>
>
> #### I tried to connect to the following addresses, but was blocked by
firewall rules:
>
> - `1d7b368770e34adf874f9425defe0a54`
> - Triggering command:
`/home/REDACTED/work/runtime/runtime/artifacts/bin/testhost/net10.0-linux-Debug-x64/dotnet
exec --runtimeconfig System.Net.Mail.Functional.Tests.runtimeconfig.json
--depsfile System.Net.Mail.Functional.Tests.deps.json
/home/REDACTED/.nuget/packages/microsoft.dotnet.xunitconsoleREDACTED/2.9.3-beta.25528.108/build/../tools/net/xunit.console.dll
System.Net.Mail.Functional.Tests.dll -xml testResults.xml -nologo
-notrait category=OuterLoop -notrait category=failing` (dns block)
> - `2f1ac5ebdede409c885709296cd79caf`
> - Triggering command:
`/home/REDACTED/work/runtime/runtime/artifacts/bin/testhost/net10.0-linux-Debug-x64/dotnet
exec --runtimeconfig System.Net.Mail.Functional.Tests.runtimeconfig.json
--depsfile System.Net.Mail.Functional.Tests.deps.json
/home/REDACTED/.nuget/packages/microsoft.dotnet.xunitconsoleREDACTED/2.9.3-beta.25528.108/build/../tools/net/xunit.console.dll
System.Net.Mail.Functional.Tests.dll -xml testResults.xml -nologo
-notrait category=OuterLoop -notrait category=failing` (dns block)
> - `3e267405dc55499fbf89ba600b269486`
> - Triggering command:
`/home/REDACTED/work/runtime/runtime/artifacts/bin/testhost/net10.0-linux-Debug-x64/dotnet
exec --runtimeconfig System.Net.Mail.Functional.Tests.runtimeconfig.json
--depsfile System.Net.Mail.Functional.Tests.deps.json
/home/REDACTED/.nuget/packages/microsoft.dotnet.xunitconsoleREDACTED/2.9.3-beta.25528.108/build/../tools/net/xunit.console.dll
System.Net.Mail.Functional.Tests.dll -xml testResults.xml -nologo
-notrait category=OuterLoop -notrait category=failing` (dns block)
> - `4741d8119c5b46deb7b6a3247cf3e987`
> - Triggering command:
`/home/REDACTED/work/runtime/runtime/artifacts/bin/testhost/net10.0-linux-Debug-x64/dotnet
exec --runtimeconfig System.Net.Mail.Functional.Tests.runtimeconfig.json
--depsfile System.Net.Mail.Functional.Tests.deps.json
/home/REDACTED/.nuget/packages/microsoft.dotnet.xunitconsoleREDACTED/2.9.3-beta.25528.108/build/../tools/net/xunit.console.dll
System.Net.Mail.Functional.Tests.dll -xml testResults.xml -nologo
-notrait category=OuterLoop -notrait category=failing` (dns block)
> - `4777e169b2a54bef872d3013b91d119d`
> - Triggering command:
`/home/REDACTED/work/runtime/runtime/artifacts/bin/testhost/net10.0-linux-Debug-x64/dotnet
exec --runtimeconfig System.Net.Mail.Functional.Tests.runtimeconfig.json
--depsfile System.Net.Mail.Functional.Tests.deps.json
/home/REDACTED/.nuget/packages/microsoft.dotnet.xunitconsoleREDACTED/2.9.3-beta.25528.108/build/../tools/net/xunit.console.dll
System.Net.Mail.Functional.Tests.dll -xml testResults.xml -nologo
-notrait category=OuterLoop -notrait category=failing` (dns block)
> - `674cfdb34af049bc80dcbc8c430c56e8`
> - Triggering command:
`/home/REDACTED/work/runtime/runtime/artifacts/bin/testhost/net10.0-linux-Debug-x64/dotnet
exec --runtimeconfig System.Net.Mail.Functional.Tests.runtimeconfig.json
--depsfile System.Net.Mail.Functional.Tests.deps.json
/home/REDACTED/.nuget/packages/microsoft.dotnet.xunitconsoleREDACTED/2.9.3-beta.25528.108/build/../tools/net/xunit.console.dll
System.Net.Mail.Functional.Tests.dll -xml testResults.xml -nologo
-notrait category=OuterLoop -notrait category=failing` (dns block)
> - `83b38af9921845538f0d2b8e91bd4c93`
> - Triggering command:
`/home/REDACTED/work/runtime/runtime/artifacts/bin/testhost/net10.0-linux-Debug-x64/dotnet
exec --runtimeconfig System.Net.Mail.Functional.Tests.runtimeconfig.json
--depsfile System.Net.Mail.Functional.Tests.deps.json
/home/REDACTED/.nuget/packages/microsoft.dotnet.xunitconsoleREDACTED/2.9.3-beta.25528.108/build/../tools/net/xunit.console.dll
System.Net.Mail.Functional.Tests.dll -xml testResults.xml -nologo
-notrait category=OuterLoop -notrait category=failing` (dns block)
> - `8445b7f8594e4fa79d67a5f60e1917e1`
> - Triggering command:
`/home/REDACTED/work/runtime/runtime/artifacts/bin/testhost/net10.0-linux-Debug-x64/dotnet
exec --runtimeconfig System.Net.Mail.Functional.Tests.runtimeconfig.json
--depsfile System.Net.Mail.Functional.Tests.deps.json
/home/REDACTED/.nuget/packages/microsoft.dotnet.xunitconsoleREDACTED/2.9.3-beta.25528.108/build/../tools/net/xunit.console.dll
System.Net.Mail.Functional.Tests.dll -xml testResults.xml -nologo
-notrait category=OuterLoop -notrait category=failing` (dns block)
> - `9c17f6fe624d4688a482d039f62e9376`
> - Triggering command:
`/home/REDACTED/work/runtime/runtime/artifacts/bin/testhost/net10.0-linux-Debug-x64/dotnet
exec --runtimeconfig System.Net.Mail.Functional.Tests.runtimeconfig.json
--depsfile System.Net.Mail.Functional.Tests.deps.json
/home/REDACTED/.nuget/packages/microsoft.dotnet.xunitconsoleREDACTED/2.9.3-beta.25528.108/build/../tools/net/xunit.console.dll
System.Net.Mail.Functional.Tests.dll -xml testResults.xml -nologo
-notrait category=OuterLoop -notrait category=failing` (dns block)
> - `9caf23efb9b44deeaad1f5a4390857ed`
> - Triggering command:
`/home/REDACTED/work/runtime/runtime/artifacts/bin/testhost/net10.0-linux-Debug-x64/dotnet
exec --runtimeconfig System.Net.Mail.Functional.Tests.runtimeconfig.json
--depsfile System.Net.Mail.Functional.Tests.deps.json
/home/REDACTED/.nuget/packages/microsoft.dotnet.xunitconsoleREDACTED/2.9.3-beta.25528.108/build/../tools/net/xunit.console.dll
System.Net.Mail.Functional.Tests.dll -xml testResults.xml -nologo
-notrait category=OuterLoop -notrait category=failing` (dns block)
> - `ad5b1d9a0284470497198faf9964749f`
> - Triggering command:
`/home/REDACTED/work/runtime/runtime/artifacts/bin/testhost/net10.0-linux-Debug-x64/dotnet
exec --runtimeconfig System.Net.Mail.Functional.Tests.runtimeconfig.json
--depsfile System.Net.Mail.Functional.Tests.deps.json
/home/REDACTED/.nuget/packages/microsoft.dotnet.xunitconsoleREDACTED/2.9.3-beta.25528.108/build/../tools/net/xunit.console.dll
System.Net.Mail.Functional.Tests.dll -xml testResults.xml -nologo
-notrait category=OuterLoop -notrait category=failing` (dns block)
> - `dad9f17011b54a2883ca8f7489dde4e8`
> - Triggering command:
`/home/REDACTED/work/runtime/runtime/artifacts/bin/testhost/net10.0-linux-Debug-x64/dotnet
exec --runtimeconfig System.Net.Mail.Functional.Tests.runtimeconfig.json
--depsfile System.Net.Mail.Functional.Tests.deps.json
/home/REDACTED/.nuget/packages/microsoft.dotnet.xunitconsoleREDACTED/2.9.3-beta.25528.108/build/../tools/net/xunit.console.dll
System.Net.Mail.Functional.Tests.dll -xml testResults.xml -nologo
-notrait category=OuterLoop -notrait category=failing` (dns block)
> - `dc00558270b44330978820a282438ebc`
> - Triggering command:
`/home/REDACTED/work/runtime/runtime/artifacts/bin/testhost/net10.0-linux-Debug-x64/dotnet
exec --runtimeconfig System.Net.Mail.Functional.Tests.runtimeconfig.json
--depsfile System.Net.Mail.Functional.Tests.deps.json
/home/REDACTED/.nuget/packages/microsoft.dotnet.xunitconsoleREDACTED/2.9.3-beta.25528.108/build/../tools/net/xunit.console.dll
System.Net.Mail.Functional.Tests.dll -xml testResults.xml -nologo
-notrait category=OuterLoop -notrait category=failing` (dns block)
> - `f13d3b87148d4771ab29f5a3afc20964`
> - Triggering command:
`/home/REDACTED/work/runtime/runtime/artifacts/bin/testhost/net10.0-linux-Debug-x64/dotnet
exec --runtimeconfig System.Net.Mail.Functional.Tests.runtimeconfig.json
--depsfile System.Net.Mail.Functional.Tests.deps.json
/home/REDACTED/.nuget/packages/microsoft.dotnet.xunitconsoleREDACTED/2.9.3-beta.25528.108/build/../tools/net/xunit.console.dll
System.Net.Mail.Functional.Tests.dll -xml testResults.xml -nologo
-notrait category=OuterLoop -notrait category=failing` (dns block)
> - `f4e51707a3454d68a871b21a5edce6f6`
> - Triggering command:
`/home/REDACTED/work/runtime/runtime/artifacts/bin/testhost/net10.0-linux-Debug-x64/dotnet
exec --runtimeconfig System.Net.Mail.Functional.Tests.runtimeconfig.json
--depsfile System.Net.Mail.Functional.Tests.deps.json
/home/REDACTED/.nuget/packages/microsoft.dotnet.xunitconsoleREDACTED/2.9.3-beta.25528.108/build/../tools/net/xunit.console.dll
System.Net.Mail.Functional.Tests.dll -xml testResults.xml -nologo
-notrait category=OuterLoop -notrait category=failing` (dns block)
>
> If you need me to access, download, or install something from one of
these locations, you can either:
>
> - Configure [Actions setup
steps](https://gh.io/copilot/actions-setup-steps) to set up my
environment, which run before the firewall is enabled
> - Add the appropriate URLs or hosts to the custom allowlist in this
repository's [Copilot coding agent
settings](https://github.com/dotnet/runtime/settings/copilot/coding_agent)
(admins only)
>
> </details>

<!-- START COPILOT CODING AGENT SUFFIX -->



<details>

<summary>Original prompt</summary>

> There is absolutely unnecessary unsafe code in
`SmtpReplyReaderFactory.cs` in `ProcessRead` function, please file a PR
to replace with just normal ReadOnlySpan memory access to make it memory
safe.


</details>



<!-- START COPILOT CODING AGENT TIPS -->
---

💬 We'd love your input! Share your thoughts on Copilot coding agent in
our [2 minute survey](https://gh.io/copilot-coding-agent-survey).

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: EgorBo <523221+EgorBo@users.noreply.github.com>
Co-authored-by: Egor Bogatov <egorbo@gmail.com>
Co-authored-by: xtqqczze <45661989+xtqqczze@users.noreply.github.com>",15,388,1830,replace atp pattern with async/await in smtpclient (part 2) (issue_ref)* async/await in smtpclient* dead code removal* remove unused code* improve cancellation support* code review feedback* code review feedback
dotnet/runtime,2486c136212b5fdc3ef0f00f2923faa63a856308,"Switch away from AzureLinux host docker testing temporarily (#115993)

containerd on the host has a default 1024 NOFILE limit, which is not
enough for our testing. Switch to Ubuntu host testing until the changes
that increase this limit are rolled out.",2025-05-27 16:50:46+00:00,Jakob Botsch Nielsen,0,,,1,2,2,"switch away from azurelinux host docker testing temporarily (issue_ref)containerd on the host has a default 1024 nofile limit, which is notenough for our testing. switch to ubuntu host testing until the changesthat increase this limit are rolled out."
dotnet/runtime,97d1fc256b8a1410464dc888ce483088134c2be3,Switch to ymm after zmm in genZeroInitFrameUsingBlockInit (#115981),2025-05-27 19:06:39+00:00,Egor Bogatov,1,13c30d494e02d241ac6ea7e663a005b5cb15644a,"Unmasking EGPRs in register allocator (#114867)

* unmask HWIntrinsic node.

* IMUL, GT_INDEX_ADDR

* GT_CKFINITE
GT_RETURNTRAP
GT_SWITCH_TABLE
GT_JMPTABLE
genFnProlog

* Complete BuildHWIntrinsics

* Let genFnProlog have EGPR when APX and EVEX are both available.

* Indir

* clean-up in lsrabuild

* Enable egprs in cast nodes

* unmask BuildIntrinsic

* unmask BuildShiftRotate

* Unmask BlockStore

* run formatting

* Use regMask when looking for srcReg candidate in BlkStore

* Use EGPR for NI_System_Math_Abs only and remove EGPR usage from dstReg

* Enable asserts for additional 8 reg

* Resolve error

* Apply suggestions from code review

Co-authored-by: Kunal Pathak <Kunal.Pathak@microsoft.com>

* Unmask remaining instructions and cache evexIsSupported and canUseApxRegs

* revert changes in SetContainsAVXFlags

* Add APX bypass Knob

* Add Instruction Count reporting in superpmi

* remove debug comment

* Revert ""revert changes in SetContainsAVXFlags""

This reverts commit 34c693f0f0696af1ace7442e3bae8838e5774f93.

* Revert ""Add APX bypass Knob""

This reverts commit 4be2048eb088206839ab6bb0369df3c3f902133e.

* revert changes in SetContainsAVXFlags

* Revert ""Add Instruction Count reporting in superpmi""

This reverts commit c0793c388f2004811aa6cb24cff01512855a64d5.

* Narrow down the cases where EGPRs cannot be alloted

* Run formatting and remove stale comments

* Move Apx Checks to Evex checks for egpr mask

* Mask Shift Rotate nodes when evex is not available

* Resolve code style comments

---------

Co-authored-by: Ruihan-Yin <ruihan.yin@intel.com>
Co-authored-by: Kunal Pathak <Kunal.Pathak@microsoft.com>",1,31,15,switch to ymm after zmm in genzeroinitframeusingblockinit (issue_ref)
dotnet/runtime,b10ea0378f3882fa8731aaaa9b52854285211263,"Replace CORCOMPILE_FIXUP_BLOB_KIND with ReadyToRunFixupKind (#115854)

Removes the redundant CORCOMPILE_FIXUP_BLOB_KIND enum and replaces all its uses with the equivalent ReadyToRunFixupKind enum. CORCOMPILE_FIXUP_BLOB_KIND was a left-over from fragile NGen.

Fixes #115853",2025-05-27 20:02:15+00:00,Copilot,1,ca376e32e20b2cbc45c15ffcd35779b143ba541d,"Generalize check for dynamic scopes when saving EH clauses (#116217)

The Task returning thunks generated for runtime async methods have a
`catch (Exception ex)` in them. During EH we were lazily trying to
resolve the dynamic type token to a type handle using the metadata scope
from the original IL method. Ensure we do this during JIT time instead,
using the right resolver.",7,142,339,replace corcompile_fixup_blob_kind with readytorunfixupkind (issue_ref)removes the redundant corcompile_fixup_blob_kind enum and replaces all its uses with the equivalent readytorunfixupkind enum. corcompile_fixup_blob_kind was a left-over from fragile ngen.fixes issue_ref
dotnet/runtime,4fea27c2f8c888263f33531a2dd0510918d4b25a,"Notify attached debugger of NAOT exception (#115678)

Native AOT does not use C++ or SEH exceptions, meaning that debuggers do
not recognize the exception throw/catch sequence and cannot break on
first-chance exceptions. On Windows, we can use OS functionality to
throw and catch an SEH exception when a Native AOT exception is thrown
and a debugger is attached, effectively acting as a notification to
debuggers that an exception is in flight. The exception code used here
is the same one as CoreCLR, so the WinDbg command `sxe clr` would also
be sufficient to catch Native AOT exceptions.

Fixes #115514",2025-05-27 20:40:04+00:00,Andy Gocke,1,90236b918746148c9ae11ef4fca77fd57e388e74,"Fix reporting of foreign native exception not handled by runtime (#115750)

* Fix reporting of foreign native exception not handled by runtime

When a native exception occurs on a foreign thread, it is propagated
through managed frames and then flows into the foreign native frames and
is handled there, the runtime still reports the exception as unhandled
via AppDomain.CurrentDomain.UnhandledException event and also prints out
the unhandled exception message. Even though the process then continues
running just fine.

This change fixes the behavior so that only managed exceptions thrown by
the .NET runtime are reported as unhandled in such case. Foreign
exceptions, like e.g. C++ exceptions, are not reported as unhandled and
they are just propagated into the foreign native frames. If that
exception is not handled by the native frames, then C++ reports them as
unhandled.

Close #115654

* Update src/tests/baseservices/exceptions/exceptioninterop/ExceptionInteropNative.cpp

Co-authored-by: Jeremy Koritzinsky <jkoritzinsky@gmail.com>

* Update src/tests/baseservices/exceptions/exceptioninterop/ExceptionInteropNative.cpp

Co-authored-by: Jeremy Koritzinsky <jkoritzinsky@gmail.com>

---------

Co-authored-by: Jeremy Koritzinsky <jkoritzinsky@gmail.com>",5,53,11,"notify attached debugger of naot exception (issue_ref)native aot does not use c++ or seh exceptions, meaning that debuggers donot recognize the exception throw/catch sequence and cannot break onfirst-chance exceptions. on windows, we can use os functionality tothrow and catch an seh exception when a native aot exception is thrownand a debugger is attached, effectively acting as a notification todebuggers that an exception is in flight. the exception code used hereis the same one as coreclr, so the windbg command would alsobe sufficient to catch native aot exceptions.fixes issue_ref"
dotnet/runtime,13c30d494e02d241ac6ea7e663a005b5cb15644a,"Unmasking EGPRs in register allocator (#114867)

* unmask HWIntrinsic node.

* IMUL, GT_INDEX_ADDR

* GT_CKFINITE
GT_RETURNTRAP
GT_SWITCH_TABLE
GT_JMPTABLE
genFnProlog

* Complete BuildHWIntrinsics

* Let genFnProlog have EGPR when APX and EVEX are both available.

* Indir

* clean-up in lsrabuild

* Enable egprs in cast nodes

* unmask BuildIntrinsic

* unmask BuildShiftRotate

* Unmask BlockStore

* run formatting

* Use regMask when looking for srcReg candidate in BlkStore

* Use EGPR for NI_System_Math_Abs only and remove EGPR usage from dstReg

* Enable asserts for additional 8 reg

* Resolve error

* Apply suggestions from code review

Co-authored-by: Kunal Pathak <Kunal.Pathak@microsoft.com>

* Unmask remaining instructions and cache evexIsSupported and canUseApxRegs

* revert changes in SetContainsAVXFlags

* Add APX bypass Knob

* Add Instruction Count reporting in superpmi

* remove debug comment

* Revert ""revert changes in SetContainsAVXFlags""

This reverts commit 34c693f0f0696af1ace7442e3bae8838e5774f93.

* Revert ""Add APX bypass Knob""

This reverts commit 4be2048eb088206839ab6bb0369df3c3f902133e.

* revert changes in SetContainsAVXFlags

* Revert ""Add Instruction Count reporting in superpmi""

This reverts commit c0793c388f2004811aa6cb24cff01512855a64d5.

* Narrow down the cases where EGPRs cannot be alloted

* Run formatting and remove stale comments

* Move Apx Checks to Evex checks for egpr mask

* Mask Shift Rotate nodes when evex is not available

* Resolve code style comments

---------

Co-authored-by: Ruihan-Yin <ruihan.yin@intel.com>
Co-authored-by: Kunal Pathak <Kunal.Pathak@microsoft.com>",2025-05-27 21:15:04+00:00,Khushal Modi,1,e83ee5b8730662773420a65cf04148e6de72aeac,fix wrong apx-nf flag on instruction table. (#116047),9,365,242,"unmasking egprs in register allocator (issue_ref)* unmask hwintrinsic node.* imul, gt_index_addr* gt_ckfinitegt_returntrapgt_switch_tablegt_jmptablegenfnprolog* complete buildhwintrinsics* let genfnprolog have egpr when apx and evex are both available.* indir* clean-up in lsrabuild* enable egprs in cast nodes* unmask buildintrinsic* unmask buildshiftrotate* unmask blockstore* run formatting* use regmask when looking for srcreg candidate in blkstore* use egpr for ni_system_math_abs only and remove egpr usage from dstreg* enable asserts for additional 8 reg* resolve error* apply suggestions from code review"
dotnet/runtime,cb268decdf0fbebf236489788359616e79ab8ddb,Fix implementation of IFindReferenceTargetsCallback::FoundTrackerTarget (#115921),2025-05-27 21:32:01+00:00,Jeremy Koritzinsky,1,dd9b0e609279ee74ecccfc29df994a0044fcbaf0,"Fix TryInvokeICustomQueryInterface exception handling (#117518)

* Fix TryInvokeICustomQueryInterface exception handling

When the InteropLibImports::TryInvokeICustomQueryInterface is called
from a native thread and a managed exception occurs in the managed
ICustomQueryInterface interface implementation, the exception handling
reports that exception as unhandled because it doesn't know tha the
InteropLibImports::TryInvokeICustomQueryInterface catches managed
exceptions and converts them to HRESULTs.
This change fixes it by adding DebuggerU2MCatchHandlerFrame to the
InteropLibImports::TryInvokeICustomQueryInterface. That allows EH to
understand that the exception that flows to native code will be caught
and so it should not report it as unhandled.

Close #117393

* Add regression test

* Fix unix test build

* Fix unix test build again",5,34,19,fix implementation of ifindreferencetargetscallback::foundtrackertarget (issue_ref)
dotnet/runtime,1c06dfa1c227f0e99a3ce05a9937a981b4872b01,Rename conflicting test assemblies (#116038),2025-05-27 21:50:26+00:00,Filip Navara,0,,,5,4,4,rename conflicting test assemblies (issue_ref)
dotnet/runtime,7dce8f67fd3d65743dd5a6212e5e9d2d0f5d6f29,"Mark some Tensor extension methods as scoped (#115575)

* Removing extension methods

* Use `this scoped in` so APIs can remain extension methods

---------

Co-authored-by: Tanner Gooding <tagoo@outlook.com>",2025-05-27 23:28:19+00:00,Michael Sharp,0,,,2,16,16,mark some tensor extension methods as scoped (issue_ref)* removing extension methods* use so apis can remain extension methods---------
dotnet/runtime,16a5d90516b4d6d878d704a5b19927c716ef3ca9,"Ordered evaluation in FileSystemGlobbing Matcher (#115940)

Co-authored-by: kasperk81 <83082615+kasperk81@users.noreply.github.com>",2025-05-28 02:37:55+00:00,Pranav Senthilnathan,0,,,10,507,169,ordered evaluation in filesystemglobbing matcher (issue_ref)
dotnet/runtime,9a6481dc76bccb1239083b699e028ab9c1cda7b1,Remove dead code in R2RPEBuilder (#115953),2025-05-28 02:52:03+00:00,Elinor Fung,0,,,1,11,97,remove dead code in r2rpebuilder (issue_ref)
dotnet/runtime,db27700c442ba33009d39ac18823848b5dbdad16,"JIT: Add a `gtFindNodeInTree` helper (#115975)

Add a gtFindNodeInTree helper to find a node in a tree matching a
predicate, and use it in a couple of places",2025-05-28 10:04:31+00:00,Jakob Botsch Nielsen,1,40063f8e724498fdabe2a77b3530cfaaf5a623df,"arm64: Rename SVE Prefetch APIs names to use Bit (#115609)

* arm64: Rename SVE Prefetch APIs names to use Bit
- Fixes #114909

* Update src/coreclr/jit/hwintrinsiclistarm64sve.h

* Update src/coreclr/jit/hwintrinsiclistarm64sve.h

* Reorder constants & functions

* Remove CompatibilitySuppressions.xml

---------

Co-authored-by: Kunal Pathak <Kunal.Pathak@microsoft.com>",5,88,123,"jit: add a helper (issue_ref)add a gtfindnodeintree helper to find a node in a tree matching apredicate, and use it in a couple of places"
dotnet/runtime,49387efb9eba1b9351b5f9ca8a1d1460460a76f6,"JIT: Allow forward subbing no-return calls (#115976)

The comment refers to morph getting tripped up, but that should not be
the case anymore after 24786d2fb2daad4786eaba1b4397e63a9768812f.",2025-05-28 10:05:17+00:00,Jakob Botsch Nielsen,0,,,1,2,11,"jit: allow forward subbing no-return calls (issue_ref)the comment refers to morph getting tripped up, but that should not bethe case anymore after 24786d2fb2daad4786eaba1b4397e63a9768812f."
dotnet/runtime,e01d8f5df160b9fb047d45b019922b3d5c6bcf5e,"JIT: Refactor CSE candidate storage slightly (#116009)

CSE candidates had separate storage for the first candidate and
subsequent candidates. This introduces some awkwardness when adding the
second candidate to the list.

Refactor things so that the first candidate is stored inline in `CSEdsc`
as a normal list entry.",2025-05-28 10:05:54+00:00,Jakob Botsch Nielsen,0,,,2,101,117,jit: refactor cse candidate storage slightly (issue_ref)cse candidates had separate storage for the first candidate andsubsequent candidates. this introduces some awkwardness when adding thesecond candidate to the list.refactor things so that the first candidate is stored inline in as a normal list entry.
dotnet/runtime,d44d5d696a74c8abf942a481d30b48ee74ac1398,[browser][WBT] EventPipe - end to end test (#115945),2025-05-28 14:20:41+00:00,Pavel Savara,0,,,10,422,2,[browser][wbt] eventpipe - end to end test (issue_ref)
dotnet/runtime,0c884247659bf8728f2e4c42c5e5c936f42ebe6c,"JIT: Support bitwise field insertions for call arguments (#115977)

Add support using bitwise operations to reconstruct registers passed
into calls from multiple promoted fields. Remove the IR invariant that
`FIELD_LIST` args must always map cleanly to registers; instead, any
`FIELD_LIST` is allowed for register-only arguments before lowering, and
lowering takes care to normalize them into a handled shape.

`fgTryMorphStructArg` is changed to take advantage of this by now
producing `FIELD_LIST` even when a promoted arg does not match the
target ABI. Support in physical promotion will be added in a follow up.

Split arguments are not handled and retain the old IR invariant of
requiring registers and stack slots to make cleanly from `FIELD_LIST`.

win-x64 examples:
```csharp
static void Foo(int x)
{
    Use<int?>(x);
    Use<int?>(5);
    Use<int?>(null);
}
```

```diff
 G_M7200_IG02:  ;; offset=0x0004
-       mov      byte  ptr [rsp+0x20], 1
-       mov      dword ptr [rsp+0x24], ecx
-       mov      rcx, qword ptr [rsp+0x20]
+       mov      ecx, ecx
+       shl      rcx, 32
+       or       rcx, 1
        call     [Program:Bar(System.Nullable`1[int])]
-       mov      dword ptr [rsp+0x24], 5
-       mov      rcx, qword ptr [rsp+0x20]
+       mov      rcx, 0x500000001
        call     [Program:Bar(System.Nullable`1[int])]
-       mov      byte  ptr [rsp+0x20], 0
        xor      ecx, ecx
-       mov      dword ptr [rsp+0x24], ecx
-       mov      rcx, qword ptr [rsp+0x20]
-						;; size=55 bbWeight=1 PerfScore 14.25
+						;; size=34 bbWeight=1 PerfScore 7.50

 G_M7200_IG03:
        add      rsp, 40
        tail.jmp [Program:Bar(System.Nullable`1[int])]
 						;; size=10 bbWeight=1 PerfScore 2.25
```

```csharp
static void Foo(int x, float y)
{
    Use((x, y));
}
```

```diff
 G_M42652_IG01:  ;; offset=0x0000
-       push     rax
-						;; size=1 bbWeight=1 PerfScore 1.00
+						;; size=0 bbWeight=1 PerfScore 0.00

 G_M42652_IG02:
-       mov      dword ptr [rsp], ecx
-       vmovss   dword ptr [rsp+0x04], xmm1
-       mov      rcx, qword ptr [rsp]
+       vmovd    eax, xmm1
+       shl      rax, 32
+       mov      ecx, ecx
+       or       rcx, rax
 						;; size=13 bbWeight=1 PerfScore 3.00

 G_M42652_IG03:
-       add      rsp, 8
        tail.jmp [Program:Use[System.ValueTuple`2[int,float]](System.ValueTuple`2[int,float])]
```

A win-arm64 example:
```csharp
static void Foo(int[] arr)
{
    Use(arr.AsMemory());
}
```

```diff
 G_M33990_IG01:
-            stp     fp, lr, [sp, #-0x20]!
+            stp     fp, lr, [sp, #-0x10]!
             mov     fp, sp
-            str     xzr, [fp, #0x10]	// [V03 tmp2]
-						;; size=12 bbWeight=1 PerfScore 2.50
+						;; size=8 bbWeight=1 PerfScore 1.50

 G_M33990_IG02:
             cbz     x0, G_M33990_IG04
 						;; size=4 bbWeight=1 PerfScore 1.00

 G_M33990_IG03:
-            str     x0, [fp, #0x10]	// [V07 tmp6]
-            str     wzr, [fp, #0x18]	// [V08 tmp7]
-            ldr     w0, [x0, #0x08]
-            str     w0, [fp, #0x1C]	// [V09 tmp8]
+            ldr     w1, [x0, #0x08]
             b       G_M33990_IG05
-						;; size=20 bbWeight=0.50 PerfScore 3.50
+						;; size=8 bbWeight=0.50 PerfScore 2.00

 G_M33990_IG04:
-            str     xzr, [fp, #0x10]	// [V07 tmp6]
-            str     xzr, [fp, #0x18]
-						;; size=8 bbWeight=0.50 PerfScore 1.00
+            mov     x0, xzr
+            mov     w1, wzr
+						;; size=8 bbWeight=0.50 PerfScore 0.50

 G_M33990_IG05:
-            ldp     x0, x1, [fp, #0x10]	// [V03 tmp2], [V03 tmp2+0x08]
-            movz    x2, #0xD920      // code for Program:Use[System.Memory`1[int]](System.Memory`1[int])
-            movk    x2, #0x4590 LSL #16
+            mov     w1, w1
+            lsl     x1, x1, #32
+            movz    x2, #0xD950      // code for Program:Use[System.Memory`1[int]](System.Memory`1[int])
+            movk    x2, #0x4592 LSL #16
             movk    x2, #0x7FFE LSL #32
             ldr     x2, [x2]
-						;; size=20 bbWeight=1 PerfScore 7.50
+						;; size=24 bbWeight=1 PerfScore 6.00

 G_M33990_IG06:
-            ldp     fp, lr, [sp], #0x20
+            ldp     fp, lr, [sp], #0x10
             br      x2
 						;; size=8 bbWeight=1 PerfScore 2.00
-; Total bytes of code: 72
+; Total bytes of code: 60
```",2025-05-28 14:43:13+00:00,Jakob Botsch Nielsen,0,,,7,245,105,"jit: support bitwise field insertions for call arguments (issue_ref)add support using bitwise operations to reconstruct registers passedinto calls from multiple promoted fields. remove the ir invariant that args must always map cleanly to registers; instead, any is allowed for register-only arguments before lowering, andlowering takes care to normalize them into a handled shape. is changed to take advantage of this by nowproducing even when a promoted arg does not match thetarget abi. support in physical promotion will be added in a follow up.split arguments are not handled and retain the old ir invariant ofrequiring registers and stack slots to make cleanly from .win-x64 examples:a win-arm64 example:"
dotnet/runtime,9703a2ed912485bdb888ac3e3a023564ec9e3528,"JIT: Copy loop memory dependence recursively on hoisting (#116068)

When hoisting we were cloning the full tree but only copying memory
dependence of the root node. Ensure we copy it for the full tree.",2025-05-28 14:51:00+00:00,Jakob Botsch Nielsen,0,,,3,75,31,jit: copy loop memory dependence recursively on hoisting (issue_ref)when hoisting we were cloning the full tree but only copying memorydependence of the root node. ensure we copy it for the full tree.
dotnet/runtime,ffcd1c5442a0c6e5317efa46d6ce381003397476,Trust single-edge synthetic profile (#116054),2025-05-28 16:16:24+00:00,Egor Bogatov,0,,,3,23,0,trust single-edge synthetic profile (issue_ref)
dotnet/runtime,b4d7fca33ae15528d6ba3356cec06144ba1184a6,Add Sve.IsSupported check (#116026),2025-05-28 16:48:58+00:00,Kunal Pathak,0,,,1,15,12,add sve.issupported check (issue_ref)
dotnet/runtime,08e6c2e416bbf455b1fb313cd2e0f9059f12be2d,Fix typo in RecognizerBase: invalid variable in condition (#115902),2025-05-28 17:30:22+00:00,MaxPatri,1,b48a7d5f188fbb3c56f86513d70ff9174b357fd3,"Remove suppression of PreSharp 56500 (#119744)

* Remove suppression of PreSharp 56500

Remove suppression of PreSharp error 56500: Avoid swallowing errors by catching non-specific exceptions",1,1,1,fix typo in recognizerbase: invalid variable in condition (issue_ref)
dotnet/runtime,c96e01ba98ee31a1ce2455ab7b42456fd2de20cb,"System.Formats.Tar: default to no ctime/atime. (#115778)

* System.Formats.Tar: default to no ctime/atime.

atime and ctime are not well supported on non-PAX formats.

Even for PAX formats, tools do not include these timestamps by default because they are of limited use.

This makes .NET to also default to not include these timestamps.

* Add back attribute lists in the XML docs.

* Copy atime/ctime.

* Move atime/ctime copy back to GnuTarEntry ctor.

* Test conversion with atime/ctime set.",2025-05-28 18:54:34+00:00,Tom Deseyn,1,0d7b88c85c3a78bc5fde5d281e0dff54337dff52,"Tar: fix handing of null terminated fields. (#117410)

* Tar: fix handing of null terminated fields.

The current implementation is trimming spaces and nulls from the end.

Instead we need to find the terminating null from the start,
and we shouldn't trim spaces at the end.

* Fix not advancing over datastream with length 1, which caused the DataOffset_RegularFile_SecondEntry test to fail.

* Skip test cases that depend on checksum being checked.

* Simplify LimitByRemaining.

* Add test.

* Refactor SetReachedEnd.

* Throw InvalidDataException when the extended header contains invalid records.",16,209,281,"system.formats.tar: default to no ctime/atime. (issue_ref)* system.formats.tar: default to no ctime/atime.atime and ctime are not well supported on non-pax formats.even for pax formats, tools do not include these timestamps by default because they are of limited use.this makes .net to also default to not include these timestamps.* add back attribute lists in the xml docs.* copy atime/ctime.* move atime/ctime copy back to gnutarentry ctor.* test conversion with atime/ctime set."
dotnet/runtime,6005119624482b158a1ef3cbfe28f274062f5e9b,"Don't try to set RPATH on Windows (#116063)

Should avoid

```
LINK : warning LNK4044: unrecognized option '/Wl,-rpath,'$ORIGIN/..''; ignored [d:\git\runtime2\src\tests\nativeaot\Smo
keTests\UnitTests\UnitTests.csproj]
```",2025-05-28 21:26:51+00:00,Michal Strehovský,0,,,1,2,2,don't try to set rpath on windows (issue_ref)should avoid
dotnet/runtime,5b5de260101d14e6c5b4954f6ed6477197059f1b,Delete non-existing pal tests from list (#116048),2025-05-28 21:43:41+00:00,Adeel Mujahid,0,,,4,1,46,delete non-existing pal tests from list (issue_ref)
dotnet/runtime,e364afb2c2b7530a3aa58d8b4a7f4ae43027cbef,"Removed unused field in JsonProperty (#113643) (#114071)

Removed the unused field _name in JsonProperty which was never initialized anyway.

Co-authored-by: Daniel Draghici <daniel.draghici@stellenanzeigen.de>
Co-authored-by: Eirik Tsarpalis <eirik.tsarpalis@gmail.com>",2025-05-28 22:02:58+00:00,Daniel Draghici,0,,,1,3,11,removed unused field in jsonproperty (issue_ref) (issue_ref)removed the unused field _name in jsonproperty which was never initialized anyway.
dotnet/runtime,3d1af41f58ff706f1cad1f209554143ac784360f,Reduce string interpolation overhead (#114497),2025-05-28 22:10:13+00:00,Pent Ploompuu,0,,,4,54,10,reduce string interpolation overhead (issue_ref)
dotnet/runtime,4b868d2c6ae4d0b4d776b0437810db73753b0ed2,Convert genRuntimeEventSources to a C# source generator (#114810),2025-05-28 22:29:10+00:00,Jeremy Koritzinsky,0,,,8,434,595,convert genruntimeeventsources to a c# source generator (issue_ref)
dotnet/runtime,cb502bd97a0cac3f23c5c53ebda31238507213ee,Update BitArray.cs (#114818),2025-05-28 22:33:48+00:00,tfenise,0,,,1,1,1,update bitarray.cs (issue_ref)
dotnet/runtime,e4d61528f85c52c3f56015927efa087773576d66,"Add breaking change rule for adding partial modifier to interface methods (#114537)

* Add breaking change rule for adding partial modifier to interface methods

* Update docs/coding-guidelines/breaking-change-rules.md

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

---------

Co-authored-by: Stephen Toub <stoub@microsoft.com>
Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-05-29 01:10:56+00:00,Jan Jones,0,,,1,4,0,add breaking change rule for adding partial modifier to interface methods (issue_ref)* add breaking change rule for adding partial modifier to interface methods* update docs/coding-guidelines/breaking-change-rules.md
dotnet/runtime,02750a4733bc939a927e3610c9bdde3b35d79909,"Remove redundant nullable annotation (#113550)

The nullable annotation on type constraint 'IEquatable<T>?' is redundant because type parameter 'T' has 'struct' constraint.

Co-authored-by: Aaron Robinson <arobins@microsoft.com>
Co-authored-by: Eirik Tsarpalis <eirik.tsarpalis@gmail.com>",2025-05-29 02:44:45+00:00,xtqqczze,0,,,1,1,1,remove redundant nullable annotation (issue_ref)the nullable annotation on type constraint 'iequatable<t>?' is redundant because type parameter 't' has 'struct' constraint.
dotnet/runtime,02ac51e80f8dc9c769052652a29102742842d612,"Fix MaxWorkingSet_GetNotStarted_ThrowsInvalidOperationException (#105424)

Fixes issue #105422

On MacOS, FreeBSD, SunOS (the ports that share ProcessBSD.c)
the get/set WorkingSet methods only work on the current process.
Skip the parts of tests that operate on other processes.

Remove now redundant MacOS-speicifc tests.",2025-05-29 02:52:42+00:00,Gordon Ross,1,07cf21a98d613ac0a1735a0ef2d56076bdf61a0b,"Add CreateNewProcessGroup to ProcessStartInfo (#117105)

* Add CreateNewProcessGroup

* Add RemoteExecutor.IsSupported condition

* Use ManualResetEvent instead of local bool

* Throw instead of asserting on Win pinvoke to get more info about the underlying error

* MRE.WaitOne call should be asserted

* Switch to memberdata to avoid pulluting the console log with skips

* wrap SendSignal in try-finally and kill remote process to avoid hiding SendSignal exception.

* Skip test on Docker

* Guard SkipTestException with  PlatformDetection.IsInContainer

* Add documentation",3,9,20,"fix maxworkingset_getnotstarted_throwsinvalidoperationexception (issue_ref)fixes issue issue_refon macos, freebsd, sunos (the ports that share processbsd.c)the get/set workingset methods only work on the current process.skip the parts of tests that operate on other processes.remove now redundant macos-speicifc tests."
dotnet/runtime,d8dd8daa6604662e5ba64b2780755d9201ca6a48,"Skip adding NullChangeToken instances to the composite list (#115684)

* Skip adding NullChangeToken instances to the composite list

* Address feedback

Co-authored-by: Theodore Tsirpanis <teo@tsirpanis.gr>

---------

Co-authored-by: Theodore Tsirpanis <teo@tsirpanis.gr>
Co-authored-by: Stephen Toub <stoub@microsoft.com>",2025-05-29 03:06:37+00:00,Rameel,0,,,1,6,7,skip adding nullchangetoken instances to the composite list (issue_ref)* skip adding nullchangetoken instances to the composite list* address feedback
dotnet/runtime,141b2bb7f1c50918359f42bee8bf0971514868fe,Pin build container SHAs (#116083),2025-05-29 03:31:50+00:00,Rich Lander,0,,,1,25,25,pin build container shas (issue_ref)
dotnet/runtime,4252c8d09b2ec537928f34dad269f02f167c8ce5,Add StripDebugSymbols for Release in AndroidSampleApp (#116061),2025-05-29 07:08:27+00:00,Milos Kotlar,0,,,1,1,0,add stripdebugsymbols for release in androidsampleapp (issue_ref)
dotnet/runtime,d960be890a25df350184089056e87e2bfc1446c5,"Implement IEnumerator<T> on ref struct enumerators (#106309)

Co-authored-by: Stephen Toub <stoub@microsoft.com>",2025-05-29 11:26:46+00:00,Alexander Radchenko,1,234f48b843184d13a04e5d1f0492fdcd4fd09e59,"Fix typo (#117208)

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",17,734,24,implement ienumerator<t> on ref struct enumerators (issue_ref)
dotnet/runtime,c875470ce19e05f266db7eabe3c34400f054df63,Provide more info on the failing CustomAttributeProvider (#110230),2025-05-29 13:25:43+00:00,Jackson Schuster,0,,,1,9,3,provide more info on the failing customattributeprovider (issue_ref)
dotnet/runtime,0a807e8f9d70413dbc1c9a7183d29206e07525f8,"improve InsertRange(Span<>) perf by reducing (#107683)

one array copy

similar to #90089

Co-authored-by: Stephen Toub <stoub@microsoft.com>
Co-authored-by: Eirik Tsarpalis <eirik.tsarpalis@gmail.com>",2025-05-29 13:44:11+00:00,karakasa,0,,,2,6,7,improve insertrange(span<>) perf by reducing (issue_ref)one array copysimilar to issue_ref
dotnet/runtime,fa05a08835a3671ac9e0c8c69e44e38e71a8a771,"Update copilot-instructions.md (#116049)

Some tweaks to the instructions to ensure clarity of the agent's reported status

Co-authored-by: Stephen Toub <stoub@microsoft.com>",2025-05-29 14:58:58+00:00,Natalia Kondratyeva,1,e661de4d7a94aec8eda6bd36baacdd2bbbc293c9,"""Convert to GeneratedRegexAttribute"" mangles Constants (#116149)

* update instructions

* Fix RegexOptions constant handling in GeneratedRegexAttribute

---------

Co-authored-by: Dan Moseley <danmose@microsoft.com>
Co-authored-by: Stephen Toub <stoub@microsoft.com>",1,66,25,update copilot-instructions.md (issue_ref)some tweaks to the instructions to ensure clarity of the agent's reported status
dotnet/runtime,40063f8e724498fdabe2a77b3530cfaaf5a623df,"arm64: Rename SVE Prefetch APIs names to use Bit (#115609)

* arm64: Rename SVE Prefetch APIs names to use Bit
- Fixes #114909

* Update src/coreclr/jit/hwintrinsiclistarm64sve.h

* Update src/coreclr/jit/hwintrinsiclistarm64sve.h

* Reorder constants & functions

* Remove CompatibilitySuppressions.xml

---------

Co-authored-by: Kunal Pathak <Kunal.Pathak@microsoft.com>",2025-05-29 16:08:18+00:00,Jonathan Davies,1,a8bc637b1076afe30ccf781df05ad7a99765760b,JIT: Fix possible heap corruption in outlined composite SSA storage (#116071),12,96,74,arm64: rename sve prefetch apis names to use bit (issue_ref)* arm64: rename sve prefetch apis names to use bit- fixes issue_ref* update src/coreclr/jit/hwintrinsiclistarm64sve.h* update src/coreclr/jit/hwintrinsiclistarm64sve.h* reorder constants & functions* remove compatibilitysuppressions.xml---------
dotnet/runtime,b2b6b84812097430769a63fed2abfb000f20581e,"Remove ILLink support for field init substitutions (#107380)

The implementation of this was attempting to rewrite the cctor in a way
that was not robust.",2025-05-29 17:32:09+00:00,Sven Boemer,0,,,19,19,290,remove illink support for field init substitutions (issue_ref)the implementation of this was attempting to rewrite the cctor in a waythat was not robust.
dotnet/runtime,0360335786bec817bdaaa688b8f83635b4c373c9,"Replace Win32 PAL CRITICAL_SECTION with minipal Mutex (#115858)

* Remove unused ThreadStore::CanAcquireLock().

* Create PAL critical section
Delete unused debugging APIs in PAL CS code

* Remove PAL tests for CRITICAL_SECTION
Remove any non-running tests requiring CRITICAL_SECTION
Remove unused PAL header referencing CRITICAL_SECTION (internal.h)

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-05-29 18:00:46+00:00,Aaron Robinson,1,6d0ac32a8e3a53e03b4143899844b587ebb19b49,"Don't cast the pointer type for delete (#121369)

This was causing asan errors.

Fixes https://github.com/dotnet/runtime/issues/121339",120,722,7148,replace win32 pal critical_section with minipal mutex (issue_ref)* remove unused threadstore::canacquirelock().* create pal critical sectiondelete unused debugging apis in pal cs code* remove pal tests for critical_sectionremove any non-running tests requiring critical_sectionremove unused pal header referencing critical_section (internal.h)---------
dotnet/runtime,e5866feb64fad2ea5167580fe0bfee3042caa9c6,"Create an on-stack instance of FindReferenceTargetsCallback. (#116081)

This would remove the transient static value that must be
manually managed. It also removes an odd
FixedAddressValueType instance.",2025-05-29 18:02:11+00:00,Aaron Robinson,0,,,1,17,8,create an on-stack instance of findreferencetargetscallback. (issue_ref)this would remove the transient static value that must bemanually managed. it also removes an oddfixedaddressvaluetype instance.
dotnet/runtime,e6d64b1ec2c90a15238b675885fe791c55629d5c,"Delete anonymous type heuristic (#116092)

This heuristic pre-dates dataflow analysis and trimming warnings.",2025-05-29 20:33:04+00:00,Michal Strehovský,0,,,2,3,36,delete anonymous type heuristic (issue_ref)this heuristic pre-dates dataflow analysis and trimming warnings.
dotnet/runtime,1aa4568fe91128d2b99b07b978fcf0b11c416e42,Disable building async tests on configurations that are not yet supported. (#116084),2025-05-29 23:57:45+00:00,Vladimir Sadov,0,,,1,5,0,disable building async tests on configurations that are not yet supported. (issue_ref)
dotnet/runtime,a3225a9d94f9003425072920f7de99aa7dd70696,"remove dead resources from mscorrc.rc (#116121)

* remove dead resources

* 'breaks'

* Update src/coreclr/dlls/mscorrc/resource.h

* Update src/coreclr/dlls/mscorrc/resource.h

* Apply suggestions from code review

* Update src/coreclr/dlls/mscorrc/mscorrc.rc

* Update src/coreclr/dlls/mscorrc/resource.h

* Update src/coreclr/dlls/mscorrc/resource.h

* Update src/coreclr/dlls/mscorrc/resource.h

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-05-30 05:15:08+00:00,Dan Moseley,0,,,2,0,47,remove dead resources from mscorrc.rc (issue_ref)* remove dead resources* 'breaks'* update src/coreclr/dlls/mscorrc/resource.h* update src/coreclr/dlls/mscorrc/resource.h* apply suggestions from code review* update src/coreclr/dlls/mscorrc/mscorrc.rc* update src/coreclr/dlls/mscorrc/resource.h* update src/coreclr/dlls/mscorrc/resource.h* update src/coreclr/dlls/mscorrc/resource.h---------
dotnet/runtime,3b5bcb40e1b17aef59ad7ad9721896c53ef1160d,"Delete FEATURE_MULTIREG_RETURN (#116122)

It was made obsolete by earlier thread suspension changes

Co-authored-by: Theodore Tsirpanis <teo@tsirpanis.gr>",2025-05-30 05:18:39+00:00,Jan Kotas,1,0b42ec71bfc6da855770bc656a38c6f517a2016c,"Cleanup HMF definitions (#116085)

Fixes #95695",4,14,49,delete feature_multireg_return (issue_ref)it was made obsolete by earlier thread suspension changes
dotnet/runtime,afa0f6bc4bd1d65b870c013dbc3c9aec712b5fbd,"[RuntimeAsync] Do not fail EnC on ordinary Task-returning methods when async feature is turned on. (#115954)

* allow EnC on ordinary Task-returning methods.

* Typo in a comment

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>

* update only the variant that owns IL

* typo in a comment

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-05-30 06:01:32+00:00,Vladimir Sadov,1,a8bf8ce556437e1222f4cc495fa39429f6f07955,"Fix minidump generation - check if IsIL before calling methods related to it (#116391)

check if IsIL before calling methods related to it",3,18,7,[runtimeasync] do not fail enc on ordinary task-returning methods when async feature is turned on. (issue_ref)* allow enc on ordinary task-returning methods.* typo in a comment
dotnet/runtime,f4dc588fda760c36bfee494eacb1ff243e36da9b,"Fix interpreter double and 64 bit constant processing (#116115)

There is a bug in extracting 64 bit and double constants on both the
interpreter compiler and execution sides. The problem was that the lower
32 bits were extracted as signed 32 bit int and then casted to signed 64
bit int and or-ed to the other 32 bits shifted up. The problem is that
when the lower 32 bits were signed, the sign got extended to the upper
32 bits and the combined result was incorrect.

This fixes 24 codegen bringup tests with the interpreter that were
previously failing with ""Assert.Equal() Failure: Values differ"".",2025-05-30 11:16:23+00:00,Jan Vorlicek,1,8d5905561944aa17bb9dfc77aa126ebe24c876ab,"Interpreter EH implementation (#116046)

* Interpreter EH implementation

This change implements EH support in the interpreter compiler and
execution parts.

Here is a summary of the changes:

On the compilation side:
* Adds support for CEE_THROW, CEE_RETHROW, CEE_ENDFILTER,
  CEE_ENDFINALLY, CEE_LEAVE and CEE_ISINST opcodes
* Adds building of EH info with IR code offsets
* Implements proper funclet handling in the same way the JIT does. All
  handlers and filters are moved to the end of the method and out of any
  try ranges recursively to enable proper behavior of the EH.
* Fixes a bug related to wrong SVar and and an issue with IL offset of
  inserted instructions in AllocOffsets
* Fixes a bug in the CEEOpcodeSize - off by one check for the end of the
  code

On the execution side:
* Add funclet start address extraction
* Add calling funclets in the interpreted code
* Removed GCX_PREEMP_NO_DTOR from the
  CallDescrWorkerUnwindFrameChainHandler, because it was not correct
* Added new IR opcodes:
  * INTOP_LOAD_FRAMEVAR to load parent frame stack pointer in filter
    funclets that need to run in the context of the parent, but at the
    top of the current interpreter stack.
  * INTOP_RETHROW to rethrow an exception
  * INTOP_CALL_FINALLY to call finally funclet in non-exceptional cases
  * INTOP_LEAVE_FILTER to exit a filter funclet and return the filter result
  * INTOP_LEAVE_CATCH to exit a catch handler and return the resume
    address
* Added calls to COMPlusThrow for division by zero, stack overflow and
  few other exceptions where the interpreter had just TODO and assert
  for adding those.
* Modified the InterpExecMethod so that extra information can be passed
  in case of a funclet invocation.

It also adds tests to verify various interesting EH scenarios

Here are some more details on moving out the funclets:
For each finally funclet, we create a finally call island that stays in
the code where the original finally was. That island calls the finally and
then branches to the next (outer) finally if any. The last finally call
island branches to the actual leave target.
The interpreter compiler generates a separate sequence of finally call
islands for each leave instruction target. And when the leave is
executed, it jumps to the beginning or into the middle of the chain.
In other words, for example, if all leave instructions in the method go
to the same target, there would be just one call finally island chain.

* PR feedback

* Fix linux build - missing UNREACHABLE();

* Fix issue in checked build of the tests

The call finally islands were not classified by the clause they are in.
Their instructions had IL offsets set to the offset of the finally
block, but they need to have no IL offset as they are not generated
from IL.

* PR feedback",2,3,3,"fix interpreter double and 64 bit constant processing (issue_ref)there is a bug in extracting 64 bit and double constants on both theinterpreter compiler and execution sides. the problem was that the lower32 bits were extracted as signed 32 bit int and then casted to signed 64bit int and or-ed to the other 32 bits shifted up. the problem is thatwhen the lower 32 bits were signed, the sign got extended to the upper32 bits and the combined result was incorrect.this fixes 24 codegen bringup tests with the interpreter that werepreviously failing with ""assert.equal() failure: values differ""."
dotnet/runtime,693d3bb1c381d4549925e911c12d4700fcafc12a,"Increase timeouts for native AOT legs (#116114)

Linux helix queues are getting backed up with 100+ minutes delays. 120 minute timeout is not enough.",2025-05-30 11:19:06+00:00,Michal Strehovský,0,,,1,2,2,increase timeouts for native aot legs (issue_ref)linux helix queues are getting backed up with 100+ minutes delays. 120 minute timeout is not enough.
dotnet/runtime,29b1e99b85efc5aa14051469d05c89d430d67b35,"Distinguish OOM and failure to reprotect in thunks APIs (#116010)

Resolves #113114.",2025-05-30 11:22:25+00:00,Michal Strehovský,1,e4df9f31014aff551f81821eb3497b579127fbfb,"Add a lock to GetNewThunksBlock (#119267)

Fixes #116089.

The method accesses shared static state, locking is needed.",8,98,133,distinguish oom and failure to reprotect in thunks apis (issue_ref)resolves issue_ref.
dotnet/runtime,35cb2d7b6101fa7650fa50b75127bc792a3ec8af,"Revert ""Pin build container SHAs (#116083)"" (#116116)

This reverts commit 141b2bb7f1c50918359f42bee8bf0971514868fe.

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-05-30 13:27:08+00:00,Rich Lander,0,,,1,25,25,"revert ""pin build container shas (issue_ref)"" (issue_ref)this reverts commit 141b2bb7f1c50918359f42bee8bf0971514868fe."
dotnet/runtime,dec20cda733ce6f2a690c54376ca60cac4a73279,disable newly added threading test. (#116106),2025-05-30 13:40:00+00:00,Manish Godse,0,,,1,3,0,disable newly added threading test. (issue_ref)
dotnet/runtime,d4ca2ce89608312f0a45b255a39e1514af41b6b7,"Record exception in HttpClient native instrumentation (#115959)

* Record exception in HttpClient native instrumentation

* Fix Possible null reference argument for parameter 'exception'

* Fix test

* Fix

* Fix

* Update links

* Set exception event timestamp to match activity end time

* Remove trailing space

* Add assert

---------

Co-authored-by: joegoldman2 <147369450+joegoldman@users.noreply.github.com>",2025-05-30 14:29:33+00:00,joegoldman2,1,e16eeab38b7540bb02b85448f4c6bb66700dabbf,"Record OperationCanceledException in HttpClient native instrumentation (#116269)

* Record OperationCanceledException in HttpClient native instrumentation

* Fix

* Try to fix the test

* Try to fix test

---------

Co-authored-by: joegoldman2 <147369450+joegoldman@users.noreply.github.com>",2,25,1,record exception in httpclient native instrumentation (issue_ref)* record exception in httpclient native instrumentation* fix possible null reference argument for parameter 'exception'* fix test* fix* fix* update links* set exception event timestamp to match activity end time* remove trailing space* add assert---------
dotnet/runtime,9c7434b20c96a904593bf288498a967c383c1df4,Remove redundant bounds checks around arr[arr.Length - cns] pattern (#116105),2025-05-30 14:39:30+00:00,Egor Bogatov,0,,,2,49,54,remove redundant bounds checks around arr[arr.length - cns] pattern (issue_ref)
dotnet/runtime,a950953d0019b2df11d3bdc3f93bbad272438640,Remove bounds checks for Log2 function in FormattingHelpers.CountDigits (#113790),2025-05-30 15:09:59+00:00,Egor Bogatov,0,,,4,140,7,remove bounds checks for log2 function in formattinghelpers.countdigits (issue_ref)
dotnet/runtime,1713d65316467e3eaf23514b6642eba5869f1b70,"Replace readdir_r call in TimeZoneInfo.Unix (#116119)

* Replace readdir_r call with FileSystemEnumerable in TimeZoneInfo.Unix

* Bring back using needed for WASM

* Address test feedback

* Use Diretory.EnumerateFiles instead of FSE",2025-05-30 15:21:28+00:00,David Cantú,0,,,3,34,104,replace readdir_r call in timezoneinfo.unix (issue_ref)* replace readdir_r call with filesystemenumerable in timezoneinfo.unix* bring back using needed for wasm* address test feedback* use diretory.enumeratefiles instead of fse
dotnet/runtime,60e934011bb50a7cb20a2c21ae970adda64ef2da,"JIT: generalize escape analysis delegate invoke expansion slightly (#116099)

Expand the invoke when the delegate object address has been substituted directly.

Addresses example in #84872.",2025-05-30 17:28:22+00:00,Andy Ayers,0,,,2,35,4,jit: generalize escape analysis delegate invoke expansion slightly (issue_ref)expand the invoke when the delegate object address has been substituted directly.addresses example in issue_ref.
dotnet/runtime,b0d68f75f992d5af58b4c3ad12e5b8a7c3d6c2a0,"JIT: Use flowgraph annotations to scale loop blocks in `optSetBlockWeights` (#116120)

Part of #107749. This replaces optMarkLoopHeads and optFindAndScaleLoopBlocks with the graph-based loop visitor pattern we now use elsewhere in the JIT. I tried to preserve the heuristics in optScaleLoopBlocks, but a side effect of this change is we no longer scale unnatural loops. However, we no longer rely on lexical loop finding, so we gain some precision as well.

Once this and graph-based loop inversion have been merged, we will no longer have any fgRenumberBlocks calls.",2025-05-30 21:16:06+00:00,Aman Khalid,0,,,7,76,316,"jit: use flowgraph annotations to scale loop blocks in (issue_ref)part of issue_ref. this replaces optmarkloopheads and optfindandscaleloopblocks with the graph-based loop visitor pattern we now use elsewhere in the jit. i tried to preserve the heuristics in optscaleloopblocks, but a side effect of this change is we no longer scale unnatural loops. however, we no longer rely on lexical loop finding, so we gain some precision as well.once this and graph-based loop inversion have been merged, we will no longer have any fgrenumberblocks calls."
dotnet/runtime,24118056f04be70203d417f18c0e60cc08f14c31,"JIT: improve codegen for inline candidates called only for effect (#116123)

Keep track of unused GT_RET_EXPRs, and when we inline, substitute
just the return value side effects for unused GT_RET_EXPRs.

Reduces address exposure in some GDV cases, which can encourage
physical promotion and other good things.

In particular one case from #84872.",2025-05-30 22:02:56+00:00,Andy Ayers,1,c048ff05d9c21d83c71a85ed7bb42c96acb84bd4,"Rework how EVEX+AVX512+AVX10 are supported by the JIT to greatly simplify things (#115983)

* Rework how EVEX+AVX512+AVX10 are supported by the JIT to greatly simplify things

* Rework how X86Base+SSE+SSE2 are supported by the JIT to greatly simplify things

* Fix the containment check for NI_AVX512_Shuffle byte

* Remove unnecessary config knobs and instruction-set switches

* Ensure that AdvSimd is still tracked to ensure Linux works

* Add back the R2R values for back-compat

* Adjust ARM64_ATOMICS_FEATURE_FLAG_BIT to match the new bit position",4,110,53,"jit: improve codegen for inline candidates called only for effect (issue_ref)keep track of unused gt_ret_exprs, and when we inline, substitutejust the return value side effects for unused gt_ret_exprs.reduces address exposure in some gdv cases, which can encouragephysical promotion and other good things.in particular one case from issue_ref."
dotnet/runtime,7a06f23fa12559cddd5f440acdd37006149fc8c2,"Delete LOADEDMODULES cache (#116126)

* Delete LOADEDMODULES cache

This cache is not used by the runtime and it is not compiled into debugger (mscordbi). It looks like a left-over from fusion.

* Delete FEATURE_METADATA_IN_VM

The only feature left was a free-threaded marshaller that should not be needed for the limited use of IMetadata interfaces by profilers.",2025-05-31 00:27:02+00:00,Jan Kotas,0,,,18,62,929,delete loadedmodules cache (issue_ref)* delete loadedmodules cachethis cache is not used by the runtime and it is not compiled into debugger (mscordbi). it looks like a left-over from fusion.* delete feature_metadata_in_vmthe only feature left was a free-threaded marshaller that should not be needed for the limited use of imetadata interfaces by profilers.
dotnet/runtime,f3296487e7af3a1a07a18caca115bc831013f88a,"stop using System.CommandLine types that won't be public anymore (#116065)

* stop using System.CommandLine types that won't be public anymore

* bump System.CommandLine version to what SDK is going to use as well

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>
Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-05-31 01:02:01+00:00,Adam Sitnik,0,,,9,115,116,stop using system.commandline types that won't be public anymore (issue_ref)* stop using system.commandline types that won't be public anymore* bump system.commandline version to what sdk is going to use as well
dotnet/runtime,c44f6a9ea713a43005401231261f9139e0a122d4,"Remove a few instances of unsafe code (#116111)

Co-authored-by: Stephen Toub <stoub@microsoft.com>",2025-05-31 01:28:58+00:00,Egor Bogatov,1,5fab56b0932ebb9a03cc47fbf77154e66262c441,"Reduce allocations in PollingWildCardChangeToken (#116175)

* Reduce allocations in PollingWildCardChangeToken

* Address PR feedback

* Style fix",10,32,31,remove a few instances of unsafe code (issue_ref)
dotnet/runtime,c048ff05d9c21d83c71a85ed7bb42c96acb84bd4,"Rework how EVEX+AVX512+AVX10 are supported by the JIT to greatly simplify things (#115983)

* Rework how EVEX+AVX512+AVX10 are supported by the JIT to greatly simplify things

* Rework how X86Base+SSE+SSE2 are supported by the JIT to greatly simplify things

* Fix the containment check for NI_AVX512_Shuffle byte

* Remove unnecessary config knobs and instruction-set switches

* Ensure that AdvSimd is still tracked to ensure Linux works

* Add back the R2R values for back-compat

* Adjust ARM64_ATOMICS_FEATURE_FLAG_BIT to match the new bit position",2025-05-31 01:35:12+00:00,Tanner Gooding,1,1edd69c1ca0282bcc3389ee32ddda2152ee4eec0,"JIT: fix issue in assertion prop phi inference (#116326)

Check if there are block preds that are not in phi preds if initial phi-inference succeeds.

Also add the ability to dump the flow graph via hash.

Fixes #116212.",53,2614,5467,rework how evex+avx512+avx10 are supported by the jit to greatly simplify things (issue_ref)* rework how evex+avx512+avx10 are supported by the jit to greatly simplify things* rework how x86base+sse+sse2 are supported by the jit to greatly simplify things* fix the containment check for ni_avx512_shuffle byte* remove unnecessary config knobs and instruction-set switches* ensure that advsimd is still tracked to ensure linux works* add back the r2r values for back-compat* adjust arm64_atomics_feature_flag_bit to match the new bit position
dotnet/runtime,fa1b3899174321dd8762920e726c999de75bc6c6,"Follow up on recent PAL cleanups (#116127)

* Avoid extra wrapper

* Cleanup PalRedhawk.h

* Rename MillieSeconds -> MilliSeconds

* Delete g_registerModuleTraces",2025-05-31 04:21:46+00:00,Jan Kotas,0,,,9,18,90,follow up on recent pal cleanups (issue_ref)* avoid extra wrapper* cleanup palredhawk.h* rename millieseconds -> milliseconds* delete g_registermoduletraces
dotnet/runtime,a01d6d6c9dbe9991b73be6ed3530a31e8ef1264c,new runner pool (#116169),2025-05-31 14:06:38+00:00,Dan Moseley,0,,,1,1,1,new runner pool (issue_ref)
dotnet/runtime,85a54f22d8c6426e0736f4088ffd6a2413697b96,"Add dispose of X509Chain in SignedXml (#115909)

* Add dispose of X509Chain in SignedXml

* Change try finally to using

* Remove spaces

* Add braces for using block",2025-06-01 01:32:55+00:00,MaxPatri,0,,,1,7,4,add dispose of x509chain in signedxml (issue_ref)* add dispose of x509chain in signedxml* change try finally to using* remove spaces* add braces for using block
dotnet/runtime,50bf1685bdb685ef0304c7686e92e2da9f02b2de,"Implement `IUtf8SpanParsable` on `Guid` (#105654)

* Implement IUtf8SpanParsable on Guid

* Address PR feedback

---------

Co-authored-by: Stephen Toub <stoub@microsoft.com>",2025-06-01 04:58:05+00:00,Natalie Howes,0,,,3,224,70,implement on (issue_ref)* implement iutf8spanparsable on guid* address pr feedback---------
dotnet/runtime,3be9089108dc650f269f0fb7e00e79cd0db02038,"JIT: revisions to struct field escape analysis (#116124)

* JIT: revisions to struct field escape analysis

Peel off some changes from the more general field-wise escape analysis:
* make sure we have modelled all relevant stores. Change local store tracking to use the new model.
* keep track of which temps will represent stack allocated arrays and do suitable retyping
* reject ""known escaping"" allocations earlier (eg finalizable objects)
* handle local fields (rare but can exist in importer IR)
* add the field test cases; all of these stack allocate for now
* keep retyping layouts after first indir; add test",2025-06-01 15:10:25+00:00,Andy Ayers,1,ab30ec7f9db5c8ade2c0d777b3a5c14a2b93625c,"JIT: avoid some unnecessary retyping in escape analysis (#116277)

We may discover a TYP_BYREF local can point to stack objects, in which
case it will remain a TYP_BYREF local, so no retyping is needed.

Fixes #116213",7,846,38,"jit: revisions to struct field escape analysis (issue_ref)* jit: revisions to struct field escape analysispeel off some changes from the more general field-wise escape analysis:* make sure we have modelled all relevant stores. change local store tracking to use the new model.* keep track of which temps will represent stack allocated arrays and do suitable retyping* reject ""known escaping"" allocations earlier (eg finalizable objects)* handle local fields (rare but can exist in importer ir)* add the field test cases; all of these stack allocate for now* keep retyping layouts after first indir; add test"
dotnet/runtime,ab29e9e1159b43b93c589c5211579341a2fa32e5,"Do not use StabilizePackageVersion in project infra (#116152)

This property was originally just meant to be a repo global input, which was then used to set DotNetFinalVersionKind in Versions.props. That is then used in arcade to determine the package version.
Where we are using StabilizePackageVersion, use DotNetFinalVersionKind.",2025-06-01 19:28:13+00:00,Matt Mitchell,0,,,9,13,12,"do not use stabilizepackageversion in project infra (issue_ref)this property was originally just meant to be a repo global input, which was then used to set dotnetfinalversionkind in versions.props. that is then used in arcade to determine the package version.where we are using stabilizepackageversion, use dotnetfinalversionkind."
dotnet/runtime,968a8b691854c1d4cba4e90f50c5cec457293ec0,replace redhawk mentions (#116177),2025-06-01 21:53:04+00:00,kasperk81,0,,,11,159,187,replace redhawk mentions (issue_ref)
dotnet/runtime,a87245f02b8b59fd08da8f79b9097206f5dfb83e,"CleanUp GetFileAttribute/SetFileAttribute(Ex) in PAL (#116096)

* Use stat in superpmi
* Delete GetFileAttributes
* Delete SetFikeAttributes
* Delete tests",2025-06-01 21:56:54+00:00,Huo Yaoyuan,0,,,54,25,2028,cleanup getfileattribute/setfileattribute(ex) in pal (issue_ref)* use stat in superpmi* delete getfileattributes* delete setfikeattributes* delete tests
dotnet/runtime,34aac9316755b16d7b92c26f0f7d8b435fe1ff97,"JIT: Refactor around impDevirtualizeCall for GVM devirt (#112610)

* Add IsDevirtualizationCandidate

* Use GetMethodHandle instead of gtCallMethHnd

* Introduce a well-known arg

* Adjust arg order

* Nit

* Add NAOT helper as well

* Add an assertion

* JIT format

* Oops

* Address several regressions

* JIT format",2025-06-01 22:00:39+00:00,Steve,0,,,8,123,11,jit: refactor around impdevirtualizecall for gvm devirt (issue_ref)* add isdevirtualizationcandidate* use getmethodhandle instead of gtcallmethhnd* introduce a well-known arg* adjust arg order* nit* add naot helper as well* add an assertion* jit format* oops* address several regressions* jit format
dotnet/runtime,a745f285567220ce4dc290461a21da8de3753a58,"[mono][interp] Remove invalid addition of conversion opcodes (#116130)

As part of a conditional branch we were adding an implicit conversion opcode (if needed) after `td->last_ins`. If the branch is the first opcode in the basic block then this actually adds an instruction in another basic block, which is clearly incorrect. This seems to have been done like this early in the implementation, in order to achieve certain il offset mapping of instructions, but everything around this area has been refactored since, so it shouldn't be necessary anymore.

With tiering disabled, this was crashing b69225 il test.",2025-06-02 06:35:35+00:00,Vlad Brezae,0,,,1,118,123,"[mono][interp] remove invalid addition of conversion opcodes (issue_ref)as part of a conditional branch we were adding an implicit conversion opcode (if needed) after . if the branch is the first opcode in the basic block then this actually adds an instruction in another basic block, which is clearly incorrect. this seems to have been done like this early in the implementation, in order to achieve certain il offset mapping of instructions, but everything around this area has been refactored since, so it shouldn't be necessary anymore.with tiering disabled, this was crashing b69225 il test."
dotnet/runtime,f313e8d075e5900f7fcb8192aad296af5e5bb162,"[mono][interp] Disable inlining of methods that call methods using StackCrawlMark (#116134)

* [mono][interp] Don't inline callers of methods using StackCrawlMark

* [mono] Disable inlining of callers of Assembly.GetCallingAssembly

The stack mark is used only to prevent inlining of the callers of this method (since it sets a flag on the method in question). The stack mark itself is not currently used on mono.",2025-06-02 06:37:42+00:00,Vlad Brezae,0,,,4,12,4,[mono][interp] disable inlining of methods that call methods using stackcrawlmark (issue_ref)* [mono][interp] don't inline callers of methods using stackcrawlmark* [mono] disable inlining of callers of assembly.getcallingassemblythe stack mark is used only to prevent inlining of the callers of this method (since it sets a flag on the method in question). the stack mark itself is not currently used on mono.
dotnet/runtime,a6094c192a90f3d8a9139e8f3ca64e6317d64b15,"Automated bump of chrome version (#116186)

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>",2025-06-02 08:17:50+00:00,github-actions[bot],0,,,1,4,4,automated bump of chrome version (issue_ref)
dotnet/runtime,32a6d12e9f4ed17a777e591788fb14c15f91535e,Switch to using non-arch specific runtime properties (#116155),2025-06-02 10:17:41+00:00,Matt Mitchell,0,,,4,4,4,switch to using non-arch specific runtime properties (issue_ref)
dotnet/runtime,ac7097cb4761d9c71e212bf07e4d916d1571c96b,"Update dependencies from https://dev.azure.com/dnceng/internal/_git/dotnet-optimization build 20250506.1 (#115464)

optimization.linux-arm64.MIBC.Runtime , optimization.linux-x64.MIBC.Runtime , optimization.windows_nt-arm64.MIBC.Runtime , optimization.windows_nt-x64.MIBC.Runtime , optimization.windows_nt-x86.MIBC.Runtime , optimization.PGO.CoreCLR
 From Version 1.0.0-prerelease.25217.3 -> To Version 1.0.0-prerelease.25256.1

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-06-02 10:40:04+00:00,dotnet-maestro[bot],1,ab7088670a8a4f5fefd0bb5bca04149277c539e8,"[main] Source code updates from dotnet/dotnet (#116145)

* [VMR] Codeflow cb502bd-cb502bd

[[ commit created by automation ]]

* Update dependencies from https://github.com/dotnet/dotnet build 270084
No dependency updates to commit

* Rename wasm test file to fix WasmBuildTest failure

* Disable DynamicObjects test

* Update dependencies from https://github.com/dotnet/dotnet build 270315
Updated Dependencies:
System.CommandLine (Version 2.0.0-beta5.25279.110 -> 2.0.0-beta5.25279.2)
Microsoft.DotNet.Cecil (Version 0.11.5-alpha.25279.110 -> 0.11.5-alpha.25260.104)
Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport, Microsoft.DotNet.ApiCompat.Task (Version 10.0.100-preview.6.25279.110 -> 10.0.100-preview.5.25260.104)
Microsoft.DotNet.Arcade.Sdk, Microsoft.DotNet.XliffTasks, Microsoft.DotNet.Helix.Sdk, Microsoft.DotNet.GenAPI, Microsoft.DotNet.GenFacades, Microsoft.DotNet.XUnitExtensions, Microsoft.DotNet.Build.Tasks.Archives, Microsoft.DotNet.Build.Tasks.Packaging, Microsoft.DotNet.Build.Tasks.Installers, Microsoft.DotNet.Build.Tasks.Templating, Microsoft.DotNet.Build.Tasks.Workloads, Microsoft.DotNet.CodeAnalysis, Microsoft.DotNet.Build.Tasks.TargetFramework, Microsoft.DotNet.RemoteExecutor, Microsoft.DotNet.Build.Tasks.Feed, Microsoft.DotNet.SharedFramework.Sdk, Microsoft.DotNet.PackageTesting (Version 10.0.0-beta.25279.110 -> 10.0.0-beta.25260.104)
Microsoft.DotNet.XUnitAssert, Microsoft.DotNet.XUnitConsoleRunner (Version 2.9.2-beta.25279.110 -> 2.9.2-beta.25260.104)
Microsoft.NETCore.App.Runtime.win-x64, runtime.native.System.IO.Ports, Microsoft.NETCore.ILAsm, Microsoft.NET.Sdk.IL, System.Text.Json, System.Reflection.Metadata, System.Reflection.MetadataLoadContext (Version 10.0.0-preview.6.25279.110 -> 10.0.0-preview.5.25260.104)
Microsoft.Net.Compilers.Toolset, Microsoft.CodeAnalysis, Microsoft.CodeAnalysis.CSharp, Microsoft.CodeAnalysis.Analyzers (Version 5.0.0-1.25279.110 -> 5.0.0-1.25260.104)
Microsoft.CodeAnalysis.NetAnalyzers (Version 10.0.0-preview.25279.110 -> 10.0.0-preview.25260.104)

* ActiveIssue https://github.com/dotnet/runtime/issues/116303

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Alexander Köplinger <alex.koeplinger@outlook.com>
Co-authored-by: Viktor Hofer <viktor.hofer@microsoft.com>
Co-authored-by: Pavel Savara <pavelsavara@microsoft.com>",2,18,18,"update dependencies from build 20250506.1 (issue_ref)optimization.linux-arm64.mibc.runtime , optimization.linux-x64.mibc.runtime , optimization.windows_nt-arm64.mibc.runtime , optimization.windows_nt-x64.mibc.runtime , optimization.windows_nt-x86.mibc.runtime , optimization.pgo.coreclr from version 1.0.0-prerelease.25217.3 -> to version 1.0.0-prerelease.25256.1"
dotnet/runtime,b5abdd1977887c631a4a6de8059d7985ef194561,JIT: Handle return buffer definitions in TreeLifeUpdater (#116137),2025-06-02 12:31:43+00:00,Jakob Botsch Nielsen,0,,,1,4,1,jit: handle return buffer definitions in treelifeupdater (issue_ref)
dotnet/runtime,8a62488a03cebeb1379bc355b30df5234711ae3f,remove redundant unsafe code (#116187),2025-06-02 15:17:13+00:00,Egor Bogatov,1,0a46acc3f88bcfcec14379cd29f56eba9c9575b3,"Forward CancellationToken in Task-based Socket.ConnectAsync (#116943)

Fixes #75889

Unlike other Task-based Socket operations, `ConnectAsync` does not forward the `CancelationToken` to the PAL, instead it creates a CTR that uses `CancelConnectAsync` which is implemented by simply disposing the socket. This can lead to a race between Connect completion and socket disposal resulting in an invalid socket state where a disposed or non-connected socket is returned from a seemingly succesful connect attempt.

I couldn't find a way to implement a deterministic test for the scenario in #75889, but according to my local testing, the issue is gone with the changes.",90,303,319,remove redundant unsafe code (issue_ref)
dotnet/runtime,2d5a2ee09518e3afad75ea9bc40df0a548bcfa36,"Remove canceled AsyncOperations from channel queues (#116021)

* Remove canceled AsyncOperations from channel queues

Canceled {WaitTo}Read/WriteAsync operations currently become nops but still sit in their queue until they're dequeued by a corresponding write or read that's trying to fulfill one of the waiters. This was done intentionally, as it left the code simpler and it was deemed unlikely to be an issue to have these objects sitting around for a bit. But it has since proven disruptive for some applications, which experience a temporary but meaningful ""leak"". To address that, this PR switches the queues from being array-based to being doubly-linked lists, with cancellation not only marking the operation as canceled but also removing it from the corresponding list.

Doing so required adding a few fields to the operation instance, so compensating changes were also made to try to reduce the size of the instance. This includes propagating a change that had been made to ManualResetValueTaskSourceCore to also apply here: rather than having a field for ExecutionContext and a separate field for a SynchronizationContext/TaskScheduler, use just a single object field and allocate a tuple when both are needed. Needing to store an ExecutionContext is rare, so this is almost always a win. I also utilize some more .NET Core APIs, in particular an overload of CancellationToken.Register that passes in the relevant cancellation token in order to avoid needing to store that same token on the instance. The net result is, at least on .NET Core, with this change the AsyncOperation instance actually gets a bit smaller than it was previously.

As new null checks were being added, I also switched the whole project over to using is / is not rather than == / !=.

As part of this change, to help flow a bit of state about the purpose of each instance, I refactored the AsyncOperation type in order to have concrete types per scenario (e.g. ReadAsync vs WriteAsync vs WaitToReadAsync vs WaitToWriteAsync) and also pushed a bunch of members from the generic down to a non-generic base, which should help a bit further with throughput but also Native AOT size.

All in all, this should address the memory issue while also cleaning up the code a bit and having a small positive impact on overall performance. Running our microbenchmarks locally shows things to be net neutral or slightly beneficial.

* Synchronize SCUC.CancellationCallbackDelegate",2025-06-02 15:59:11+00:00,Stephen Toub,0,,,17,1138,651,"remove canceled asyncoperations from channel queues (issue_ref)* remove canceled asyncoperations from channel queuescanceled {waitto}read/writeasync operations currently become nops but still sit in their queue until they're dequeued by a corresponding write or read that's trying to fulfill one of the waiters. this was done intentionally, as it left the code simpler and it was deemed unlikely to be an issue to have these objects sitting around for a bit. but it has since proven disruptive for some applications, which experience a temporary but meaningful ""leak"". to address that, this pr switches the queues from being array-based to being doubly-linked lists, with cancellation not only marking the operation as canceled but also removing it from the corresponding list.doing so required adding a few fields to the operation instance, so compensating changes were also made to try to reduce the size of the instance. this includes propagating a change that had been made to manualresetvaluetasksourcecore to also apply here: rather than having a field for executioncontext and a separate field for a synchronizationcontext/taskscheduler, use just a single object field and allocate a tuple when both are needed. needing to store an executioncontext is rare, so this is almost always a win. i also utilize some more .net core apis, in particular an overload of cancellationtoken.register that passes in the relevant cancellation token in order to avoid needing to store that same token on the instance. the net result is, at least on .net core, with this change the asyncoperation instance actually gets a bit smaller than it was previously.as new null checks were being added, i also switched the whole project over to using is / is not rather than == / !=.as part of this change, to help flow a bit of state about the purpose of each instance, i refactored the asyncoperation type in order to have concrete types per scenario (e.g. readasync vs writeasync vs waittoreadasync vs waittowriteasync) and also pushed a bunch of members from the generic down to a non-generic base, which should help a bit further with throughput but also native aot size.all in all, this should address the memory issue while also cleaning up the code a bit and having a small positive impact on overall performance. running our microbenchmarks locally shows things to be net neutral or slightly beneficial.* synchronize scuc.cancellationcallbackdelegate"
dotnet/runtime,8d5905561944aa17bb9dfc77aa126ebe24c876ab,"Interpreter EH implementation (#116046)

* Interpreter EH implementation

This change implements EH support in the interpreter compiler and
execution parts.

Here is a summary of the changes:

On the compilation side:
* Adds support for CEE_THROW, CEE_RETHROW, CEE_ENDFILTER,
  CEE_ENDFINALLY, CEE_LEAVE and CEE_ISINST opcodes
* Adds building of EH info with IR code offsets
* Implements proper funclet handling in the same way the JIT does. All
  handlers and filters are moved to the end of the method and out of any
  try ranges recursively to enable proper behavior of the EH.
* Fixes a bug related to wrong SVar and and an issue with IL offset of
  inserted instructions in AllocOffsets
* Fixes a bug in the CEEOpcodeSize - off by one check for the end of the
  code

On the execution side:
* Add funclet start address extraction
* Add calling funclets in the interpreted code
* Removed GCX_PREEMP_NO_DTOR from the
  CallDescrWorkerUnwindFrameChainHandler, because it was not correct
* Added new IR opcodes:
  * INTOP_LOAD_FRAMEVAR to load parent frame stack pointer in filter
    funclets that need to run in the context of the parent, but at the
    top of the current interpreter stack.
  * INTOP_RETHROW to rethrow an exception
  * INTOP_CALL_FINALLY to call finally funclet in non-exceptional cases
  * INTOP_LEAVE_FILTER to exit a filter funclet and return the filter result
  * INTOP_LEAVE_CATCH to exit a catch handler and return the resume
    address
* Added calls to COMPlusThrow for division by zero, stack overflow and
  few other exceptions where the interpreter had just TODO and assert
  for adding those.
* Modified the InterpExecMethod so that extra information can be passed
  in case of a funclet invocation.

It also adds tests to verify various interesting EH scenarios

Here are some more details on moving out the funclets:
For each finally funclet, we create a finally call island that stays in
the code where the original finally was. That island calls the finally and
then branches to the next (outer) finally if any. The last finally call
island branches to the actual leave target.
The interpreter compiler generates a separate sequence of finally call
islands for each leave instruction target. And when the leave is
executed, it jumps to the beginning or into the middle of the chain.
In other words, for example, if all leave instructions in the method go
to the same target, there would be just one call finally island chain.

* PR feedback

* Fix linux build - missing UNREACHABLE();

* Fix issue in checked build of the tests

The call finally islands were not classified by the clause they are in.
Their instructions had IL offsets set to the offset of the finally
block, but they need to have no IL offset as they are not generated
from IL.

* PR feedback",2025-06-02 16:48:18+00:00,Jan Vorlicek,1,086ecfba9f48391929bdc6fa9739f0e4ae4606b0,"Revert ""Fix reporting of foreign native exception not handled by runtime (#115750)"" (#116621)

This reverts commit 90236b918746148c9ae11ef4fca77fd57e388e74.",16,1554,167,"interpreter eh implementation (issue_ref)* interpreter eh implementationthis change implements eh support in the interpreter compiler andexecution parts.here is a summary of the changes:on the compilation side:* adds support for cee_throw, cee_rethrow, cee_endfilter, cee_endfinally, cee_leave and cee_isinst opcodes* adds building of eh info with ir code offsets* implements proper funclet handling in the same way the jit does. all handlers and filters are moved to the end of the method and out of any try ranges recursively to enable proper behavior of the eh.* fixes a bug related to wrong svar and and an issue with il offset of inserted instructions in allocoffsets* fixes a bug in the ceeopcodesize - off by one check for the end of the codeon the execution side:* add funclet start address extraction* add calling funclets in the interpreted code* removed gcx_preemp_no_dtor from the calldescrworkerunwindframechainhandler, because it was not correct* added new ir opcodes: * intop_load_framevar to load parent frame stack pointer in filter funclets that need to run in the context of the parent, but at the top of the current interpreter stack. * intop_rethrow to rethrow an exception * intop_call_finally to call finally funclet in non-exceptional cases * intop_leave_filter to exit a filter funclet and return the filter result * intop_leave_catch to exit a catch handler and return the resume address* added calls to complusthrow for division by zero, stack overflow and few other exceptions where the interpreter had just todo and assert for adding those.* modified the interpexecmethod so that extra information can be passed in case of a funclet invocation.it also adds tests to verify various interesting eh scenarioshere are some more details on moving out the funclets:for each finally funclet, we create a finally call island that stays inthe code where the original finally was. that island calls the finally andthen branches to the next (outer) finally if any. the last finally callisland branches to the actual leave target.the interpreter compiler generates a separate sequence of finally callislands for each leave instruction target. and when the leave isexecuted, it jumps to the beginning or into the middle of the chain.in other words, for example, if all leave instructions in the method goto the same target, there would be just one call finally island chain.* pr feedback* fix linux build - missing unreachable();* fix issue in checked build of the teststhe call finally islands were not classified by the clause they are in.their instructions had il offsets set to the offset of the finallyblock, but they need to have no il offset as they are not generatedfrom il.* pr feedback"
dotnet/runtime,39e8c08cbbed6b655fbc0a4264d1ccd2cb626477,"Disable CoreCLR interpreter test for JIT stress (#116219)

There is a problem in the interpreter when handling calls to code that
doesn't have native code yet, but that has precode already. The call to
MethodDesc::PrepareInitialCode triggers an assert down its call chain
due to the prestub existence.

This change disables running the interpreter test with JIT stress until
the problem is solved.",2025-06-02 18:21:02+00:00,Jan Vorlicek,0,,,1,2,0,"disable coreclr interpreter test for jit stress (issue_ref)there is a problem in the interpreter when handling calls to code thatdoesn't have native code yet, but that has precode already. the call tomethoddesc::prepareinitialcode triggers an assert down its call chaindue to the prestub existence.this change disables running the interpreter test with jit stress untilthe problem is solved."
dotnet/runtime,cb57cb856cf5c2a7613449bb159fe9200738eaab,Add missing connection strings to EnvironmentVariablesConfigurationProvider (#116037),2025-06-02 19:52:38+00:00,Tarek Mahmoud Sayed,0,,,2,94,0,add missing connection strings to environmentvariablesconfigurationprovider (issue_ref)
dotnet/runtime,5ffe44f2453a06f52685780976dc99fd52098bc5,"Implement SVE2 Xor, XorRotateRight (#115891)

* Implement SVE2 Xor, XorRotateRight

* Remove HW_Category_RotateByImmediate

* Remove unnecessary immediate bounds case

* Remove unnecessary containment case",2025-06-02 20:03:50+00:00,snickolls-arm,0,,,7,497,221,"implement sve2 xor, xorrotateright (issue_ref)* implement sve2 xor, xorrotateright* remove hw_category_rotatebyimmediate* remove unnecessary immediate bounds case* remove unnecessary containment case"
dotnet/runtime,5edf06ed94413dc83a168f023756e97e28e17139,"Use span copy in BigInteger.TryGetBytes when applicable (#115445)

When the value is positive (we don't need to do two's complement conversion) and
on a little endian machine, we can copy the bytes out from the underlying uint[]
storage.",2025-06-03 03:19:50+00:00,Rob Hague,0,,,1,43,16,"use span copy in biginteger.trygetbytes when applicable (issue_ref)when the value is positive (we don't need to do two's complement conversion) andon a little endian machine, we can copy the bytes out from the underlying uint[]storage."
dotnet/runtime,fcd197c9a4ea9def2049fdb302eede3e044fba5f,"Support bounded channel with bound of 0 (rendezvous) (#116097)

* Support bounded channel with bound of 0 (rendezvous)

This PR enables Channel.CreateBounded(0), whereas currently a bound of < 1 is exceptional. A bound is the number of items the channel can buffer, so a bound of 0 means it can't buffer anything, which makes it into a rendezvous, where the reader and writer must be at the channel at the same time in order to directly hand off from the writer to the reader. This is the same meaning as in other languages/libraries, e.g. if in go you don't specify a bound or you specify a bound of 0, you similarly get an unbuffered rendezvous channel.

* Address PR feedback",2025-06-03 03:27:07+00:00,Stephen Toub,0,,,15,1046,161,"support bounded channel with bound of 0 (rendezvous) (issue_ref)* support bounded channel with bound of 0 (rendezvous)this pr enables channel.createbounded(0), whereas currently a bound of < 1 is exceptional. a bound is the number of items the channel can buffer, so a bound of 0 means it can't buffer anything, which makes it into a rendezvous, where the reader and writer must be at the channel at the same time in order to directly hand off from the writer to the reader. this is the same meaning as in other languages/libraries, e.g. if in go you don't specify a bound or you specify a bound of 0, you similarly get an unbuffered rendezvous channel.* address pr feedback"
dotnet/runtime,43edad5f6cdf66cfb73d529176f37f47db1b355b,"JIT: Consistently use `TypeIs`/`OperIs` for type/oper checks (#116141)

- Add `LclVarDsc::TypeIs`
- Switch type and oper checks to `TypeIs` and `OperIs` everywhere (replacements
  done with a series of regex)",2025-06-03 10:11:24+00:00,Jakob Botsch Nielsen,1,739393fc36d239be3eba5cdc91c20f1e11eac982,Fix rangecheck bug: GT_LSH may actually overflow the index (#116470),74,916,923,jit: consistently use / for type/oper checks (issue_ref)- add - switch type and oper checks to and everywhere (replacements done with a series of regex)
dotnet/runtime,b78c19a72119b6ddf16189e56d05da8b53db3bb5,Notify debuggers on rethrown exceptions (#116246),2025-06-03 10:11:48+00:00,Michal Strehovský,0,,,1,8,1,notify debuggers on rethrown exceptions (issue_ref)
dotnet/runtime,bf80e0e90b62b675a61ce401227e4cfd0db5aea7,JIT: Avoid VN-based removal of dead byref store in async funcs (#116136),2025-06-03 10:37:07+00:00,Jakob Botsch Nielsen,0,,,1,8,0,jit: avoid vn-based removal of dead byref store in async funcs (issue_ref)
dotnet/runtime,b1c624c79951bb332f7b78f99cb2bf1aa43d7c87,Enable Unsafe.Bitcast for Nullable<T> (#116232),2025-06-03 13:37:11+00:00,Jan Kotas,1,30082a461a68e3305b507910aba7457bdc98115c,"JIT: save pgo data in inline context, use it for call optimization (#116241)

Fix #116223

Save profile data (schema, schema size, and data) in the inline context.
Always store the inline context in GT_CALL nodes. Use this to find
the correct PGO data to consult when optimizing a call (in particular,
for late cast expansions).

Also, dump likely class in gtDispTree.

Co-authored-by: EgorBo <egorbo@gmail.com>",3,6,9,enable unsafe.bitcast for nullable<t> (issue_ref)
dotnet/runtime,8ffd896958b16f776efa69cf23cbe4e76223b33d,"Enable exceptions on wrong LDELEM arguments (#116235)

* Enable exceptions on wrong LDELEM arguments

When the array is null, throw NullReferenceException
When the index is out of range, throw IndexOutOfRangeException

Until now, it was asserting instead.

* PR feedback - do the same change for STELEM",2025-06-03 13:58:55+00:00,Jan Vorlicek,1,1a7d46661d157730b817e523428877d1349ad491,"Fix floating point <-> integer conversions (#116236)

This change uses JIT helpers to implement the floating point to
integer and vice versa conversions.",1,4,4,"enable exceptions on wrong ldelem arguments (issue_ref)* enable exceptions on wrong ldelem argumentswhen the array is null, throw nullreferenceexceptionwhen the index is out of range, throw indexoutofrangeexceptionuntil now, it was asserting instead.* pr feedback - do the same change for stelem"
dotnet/runtime,9d1d2a98560d367810e2bc768eb22394414fdf17,"Implement empty string intrinsic in interpreter (#116237)

This change adds support for empty strings",2025-06-03 14:06:29+00:00,Jan Vorlicek,1,b142ec32a4c305c1011dace52a88ea7f7df59a8f,"Fix LDTOKEN in interpreter (#116234)

The CEE_LDTOKEN compilation incorrectly assumes that the resolved token
contains either hClass or hField or hMethod and it checks for the hClass
first. But the hClass is present always, so resolving token for method
or field doesn't work correctly.

This change fixes it by reordering the checks in an order matching what JIT
does.",1,11,0,implement empty string intrinsic in interpreter (issue_ref)this change adds support for empty strings
dotnet/runtime,6ab0311319cc7c975ac7ed1b84df809e881dfb13,"SVE2 API for AbsoluteDifferenceAdd  (#115513)

* SVE2 API for AbsoluteDifferenceAdd and widening variants

* Removing the 'unsafe' keyword from the intrinsic definitions",2025-06-03 14:14:15+00:00,Jacob Crawley,0,,,6,338,9,sve2 api for absolutedifferenceadd (issue_ref)* sve2 api for absolutedifferenceadd and widening variants* removing the 'unsafe' keyword from the intrinsic definitions
dotnet/runtime,b4eb528af3c7ae67d0e6bde579322c7a0bb84a77,Replace runtime's 'OutputRID' by the corresponding vmr property 'TargetRid'. (#116259),2025-06-03 16:57:31+00:00,Tom Deseyn,1,2ddab7bdb06004e94f843552891e76bfb387cf33,"[infra][Apple] Fix Apple mobile runtime test reporting (#114862)

Runtime test results reporting is broken on Apple mobile CI, see e.g., https://dev.azure.com/dnceng-public/public/_build/results?buildId=1020751&view=results and the log below.

This PR switches to using `apple test` instead of `apple run` (introduced in https://github.com/dotnet/runtime/pull/107118) to correctly detect exit codes. Also removing the base64 encoding for `AppleEntryPoint` XML results dump (introduced in https://github.com/dotnet/runtime/pull/67393, not sure why?)
 
### Additional changes
- New merged runner is not correctly detecting running platform as such some tests are currently failing even though they should be disabled. This PR disables them directly in the test source files.
- Disabling managed test suit on non-Windows Mono configurations due to issue with TCP (see https://github.com/dotnet/runtime/pull/114862#issuecomment-2841610076).
- Adding MacCatalyst arm64/x64 runtime test pipeline",53,129,130,replace runtime's 'outputrid' by the corresponding vmr property 'targetrid'. (issue_ref)
dotnet/runtime,3aa0c97a8bd9e00225d763068632051aaf7e3d5c,"[wasm] Always respect WasmEnableSIMD when trimming (#115313)

* Always respect WasmEnableSIMD when trimming

* Add a test to verify the match",2025-06-03 18:39:26+00:00,Larry Ewing,1,1bcde97299df5d9c52215e2576d2d02e19c2151b,"[browser] rename MSBuild property WasmPerfTracing to EnableDiagnostics  (#116253)

* WasmPerfTracing -> EnableDiagnostics

WASM_PERFTRACING -> WASM_ENABLE_EVENTPIPE
enablePerfTracing -> enableEventPipe
DOTNET_WasmPerfInstrumentation -> DOTNET_WasmPerformanceInstrumentation

* _WasmProfilers -> WasmProfilers

drop WasmPerformanceInstrumentation magic

* more

* fix",3,5,5,[wasm] always respect wasmenablesimd when trimming (issue_ref)* always respect wasmenablesimd when trimming* add a test to verify the match
dotnet/runtime,de610d0a20e20743287611ceed98b3dbbd71e603,Option to disallow duplicate JSON properties (#115856),2025-06-03 18:58:29+00:00,Pranav Senthilnathan,1,27c8fe04453195039686fb375a73fac7ff1ea968,"Fix JsonIgnore behavior on init-only properties in source generation mode (#112924)

* ignore init-only non-required properties with ignore condition in json serializer source generator

* Add testing for ignored required setters.

* Fix unrelated failing test.

---------

Co-authored-by: Eirik Tsarpalis <eirik.tsarpalis@gmail.com>",64,1705,134,option to disallow duplicate json properties (issue_ref)
dotnet/runtime,4572cef893b8bb6b09f6b71327296b5ce7ee6c49,JIT: Remove old loop metrics (#116267),2025-06-03 18:59:48+00:00,Aman Khalid,1,41be5e229b30fc3e7aaed9361b9db4487c5bb7f8,"JIT: Graph-based loop inversion (#116017)

Succeeds #113709. Part of #107749 and #108901. Fixes #50204.",7,11,100,jit: remove old loop metrics (issue_ref)
dotnet/runtime,c630f271bef2065844389c30c2656ba43ae1e476,"Share allocation helpers between CoreCLR and NativeAOT (#115339)

Share assembly version of allocation helpers between CoreCLR and NativeAOT. This allows better code reuse and removes the last usage of helper method frames in the CoreCLR runtime, cleanup is expected to be done separetely.

The slow paths on CoreCLR differ from NativeAOT in few details. They don't expect the GC_ALLOC_FINALIZE, GC_ALLOC_ALIGN8 and GC_ALLOC_ALIGN8_BIAS flags to be passed the correct values and if they are not present then they get inferred from the method table. This means that helpers like RhpNewFinalizable stay exclusive to NativeAOT and remain unused on CoreCLR. This is done intentionally so we can have a single slow path (RhpNew for objects, RhpNewArray for arrays) that can be assigned to any JIT helper. The slow path is used when allocation tracking is enabled or for other diagnostic options.

CoreCLR stores the per-thread allocation context in separate TLS variable, while NativeAOT track it as part of the main per-thread information. We abstract it by introducing INLINE_GET_ALLOC_CONTEXT macro that returns the pointer to ee_alloc_context structure.

FastAllocateString helper in CoreCLR has a changed signature to take the string method table as the first parameter. This mimics the same idea as used by NativeAOT where we can use slow array allocation helper and fast string allocation helper interchangably.

Platform specific notes:

- linux-x86 didn't have the helpers implemented; the implementation is added and passed some smoke tests.
- linux-riscv64 implementation was heavily rewritten. The main change is to establish function frame and move arguments into non-volatile registers. We support platform versions without TLS descriptor and this ensures that we only save minimum number of registers to stack to enable INLINE_GET_ALLOC_CONTEXT doing function call that trashes volatile registers.
- linux-arm helpers for Align8/Misalign cases were enhanced to include padding with ""free object"" in the fast path.

Contributes to #95695
---------

Co-authored-by: Tomasz Sowiński <tomeksowi@gmail.com>",2025-06-03 20:01:30+00:00,Filip Navara,1,19b3b0b34066b58e525d3fab3a23b7b6e28ce9d9,"Fix NativeAOT outer loop test failure (#116362)

The optimized path introduced in #116290 skipped error handling that's required for native AOT.",96,3604,3551,"share allocation helpers between coreclr and nativeaot (issue_ref)share assembly version of allocation helpers between coreclr and nativeaot. this allows better code reuse and removes the last usage of helper method frames in the coreclr runtime, cleanup is expected to be done separetely.the slow paths on coreclr differ from nativeaot in few details. they don't expect the gc_alloc_finalize, gc_alloc_align8 and gc_alloc_align8_bias flags to be passed the correct values and if they are not present then they get inferred from the method table. this means that helpers like rhpnewfinalizable stay exclusive to nativeaot and remain unused on coreclr. this is done intentionally so we can have a single slow path (rhpnew for objects, rhpnewarray for arrays) that can be assigned to any jit helper. the slow path is used when allocation tracking is enabled or for other diagnostic options.coreclr stores the per-thread allocation context in separate tls variable, while nativeaot track it as part of the main per-thread information. we abstract it by introducing inline_get_alloc_context macro that returns the pointer to ee_alloc_context structure.fastallocatestring helper in coreclr has a changed signature to take the string method table as the first parameter. this mimics the same idea as used by nativeaot where we can use slow array allocation helper and fast string allocation helper interchangably.platform specific notes:- linux-x86 didn't have the helpers implemented; the implementation is added and passed some smoke tests.- linux-riscv64 implementation was heavily rewritten. the main change is to establish function frame and move arguments into non-volatile registers. we support platform versions without tls descriptor and this ensures that we only save minimum number of registers to stack to enable inline_get_alloc_context doing function call that trashes volatile registers.- linux-arm helpers for align8/misalign cases were enhanced to include padding with ""free object"" in the fast path.contributes to issue_ref---------"
dotnet/runtime,30082a461a68e3305b507910aba7457bdc98115c,"JIT: save pgo data in inline context, use it for call optimization (#116241)

Fix #116223

Save profile data (schema, schema size, and data) in the inline context.
Always store the inline context in GT_CALL nodes. Use this to find
the correct PGO data to consult when optimizing a call (in particular,
for late cast expansions).

Also, dump likely class in gtDispTree.

Co-authored-by: EgorBo <egorbo@gmail.com>",2025-06-03 20:09:30+00:00,Andy Ayers,1,571861b01eabf7bc86b21c03e0e13b0e21dc5a54,JIT: Fix `Compiler::printfAlloc` for long strings (#116306),8,116,33,"jit: save pgo data in inline context, use it for call optimization (issue_ref)fix issue_refsave profile data (schema, schema size, and data) in the inline context.always store the inline context in gt_call nodes. use this to findthe correct pgo data to consult when optimizing a call (in particular,for late cast expansions).also, dump likely class in gtdisptree."
dotnet/runtime,b79d4c48d3eec6dcf21a0d71eb2aabda7cdaa95d,"Add `--arch` option for `--list-runtimes` and `--list-sdks` in host (#116078)

Allow specifying --arch <arch> for --list-runtimes and --list-sdks commands in host. Must be in the order --list-runtimes/sdks --arch <arch>.
- If not specified, behaviour remains the same - list runtimes/SDKs for the invoked dotnet (for SDKs, any paths specified any found global.json are respected).
- If specified and not the same as the host architecture, searches for registered or default install locations for that architecture and lists runtimes/SDKs found there.
- If specified and the same as the host architecture, behaves the same as if not specified - note that this means it will not search for registered/default installs of the host architecture and only list runtimes/SDKs relative to the invoked dotnet.

New tests are in a HostCommands test class. This also moves some existing tests for host commands into the new class. This does remove tests running the host commands with the multi-level lookup environment variable set, but I don't think those are interesting anymore - it has been disabled since 7.0 and should always be disabled (unlike for actually running an app, where it can be based on the tfm).",2025-06-03 20:35:27+00:00,Elinor Fung,1,705771984d59d506a2f4523f0dbecfb4ffc3ce21,"Revert change to follow symlinks of dotnet host  (#115315)

https://github.com/dotnet/runtime/pull/99576 changed the host to first
resolve symlinks before resolving the application directory. This means
that relative loads happen relative to the pointed-at file, not the
symbolic link. This was a breaking change made to match the symbolic
link behavior on all platforms.

Unfortunately, it seems a number of users have taken a dependency on the
Windows-specific behavior. This PR reverts the change and puts back in
place the old Windows behavior.",16,407,186,"add option for and in host (issue_ref)allow specifying --arch <arch> for --list-runtimes and --list-sdks commands in host. must be in the order --list-runtimes/sdks --arch <arch>.- if not specified, behaviour remains the same - list runtimes/sdks for the invoked dotnet (for sdks, any paths specified any found global.json are respected).- if specified and not the same as the host architecture, searches for registered or default install locations for that architecture and lists runtimes/sdks found there.- if specified and the same as the host architecture, behaves the same as if not specified - note that this means it will not search for registered/default installs of the host architecture and only list runtimes/sdks relative to the invoked dotnet.new tests are in a hostcommands test class. this also moves some existing tests for host commands into the new class. this does remove tests running the host commands with the multi-level lookup environment variable set, but i don't think those are interesting anymore - it has been disabled since 7.0 and should always be disabled (unlike for actually running an app, where it can be based on the tfm)."
dotnet/runtime,a3f5189c12b92d37840c602f90d9cf786965a5bd,"Sve/Scatter test: Add Debug.Assert for array length (#116158)

* Add Debug.Assert for array length

* review feedback",2025-06-03 21:41:21+00:00,Kunal Pathak,0,,,3,7,3,sve/scatter test: add debug.assert for array length (issue_ref)* add debug.assert for array length* review feedback
dotnet/runtime,8091e6036b0d7bb0958e546e17238096108850ec,"Replace Unsafe.As with Unsafe.BitCast in SpanHelpers.Fill (#116221)

More correct (avoids undeclared misaligned read), less dangerous than Unsafe.As.",2025-06-03 23:51:36+00:00,Jan Kotas,0,,,2,14,32,"replace unsafe.as with unsafe.bitcast in spanhelpers.fill (issue_ref)more correct (avoids undeclared misaligned read), less dangerous than unsafe.as."
dotnet/runtime,0b42ec71bfc6da855770bc656a38c6f517a2016c,"Cleanup HMF definitions (#116085)

Fixes #95695",2025-06-04 02:09:33+00:00,Adeel Mujahid,1,d4ae57c10d27e17a07f57452f6abe8a68a6fdde5,"Zero initialize FrameInfo so that we don't mistake an InlineCallFrame for a CLRToCOMMethodFrame (#117252)

This one was a doozy. 

If you try to step in to a static function and the static cctor hasn't run, the debugger will treat it as a go. Moving the [static helpers to managed](https://github.com/dotnet/runtime/pull/108167) altered the debugger flow such that you would have managed -> native interop -> managed (implied .cctor) frames. The debugger would detect the last managed one is an implied .cctor and step out. When it stepped out to the next managed frame, it would then incorrectly calculate the offset and issue a breakpoint the instruction  **before** the qcall into native code. Thus, the code already ran and it's effectively a go.

After a bunch of logging and discussion, I at first thought the stackwalker was at fault where it somehow ignored the unmanaged frames. I then noticed we have a [block](https://github.com/dotnet/runtime/blob/5399d5da8376270995adade66457d94b83955bea/src/coreclr/debug/ee/controller.cpp#L392-L409) that intentionally suppresses native frames when stepping out similar to what is now happening. 

After even more logging, I noticed that `pInfo->fIgnoreThisFrameIfSuppressingUMChainFromCLRToCOMMethodFrameGeneric` was true even though nothing ran to set it that way. This lead to the fix where we zero initialize a `FrameInfo` instance to make sure that bool is false. 

Note: I would not be surprised if there are other interop stepping issues lurking. Additionally, there are other places where we don't zero initialize various structs on the stack. As a follow up, we should do that in order to avoid this kind of madness.

Fixes https://github.com/dotnet/runtime/issues/114820",69,95,6583,cleanup hmf definitions (issue_ref)fixes issue_ref
dotnet/runtime,e55370e31e8095f49482a2fb54a442610eb30e71,"Re-revert ""Make mutable generic collection interfaces implement read-only collection interfaces (#95830)"" (#115802)

* Re-revert ""Make mutable generic collection interfaces implement read-only collection interfaces (#95830)""

This reverts commit a2bd5830ce09cd81d834afd5571bc6c9e5ad879b.

* Update a few casts in LINQ

* Share code in 'ExpandoObject'

* Rename 'ExpandoObject' helper method

* Update ifdefs

* Share validation for 'ContainsKey'",2025-06-04 02:47:05+00:00,Sergio Pedri,0,,,38,627,216,"re-revert ""make mutable generic collection interfaces implement read-only collection interfaces (issue_ref)"" (issue_ref)* re-revert ""make mutable generic collection interfaces implement read-only collection interfaces (issue_ref)""this reverts commit a2bd5830ce09cd81d834afd5571bc6c9e5ad879b.* update a few casts in linq* share code in 'expandoobject'* rename 'expandoobject' helper method* update ifdefs* share validation for 'containskey'"
dotnet/runtime,c3a914fb6909bfb4806bc02f7c73ea6f74e03b64,"x86: Promote varargs when enumerating funclet, the stack walker skips the parent frame (#116228)",2025-06-04 03:32:22+00:00,Filip Navara,0,,,1,0,12,"x86: promote varargs when enumerating funclet, the stack walker skips the parent frame (issue_ref)"
dotnet/runtime,f34ec2bc4c3a16b647fd4fc0016aca4f62479e5a,"X86 GCDecoder RevPInvoke nits (#116264)

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-06-04 03:33:05+00:00,Max Charlamb,0,,,2,6,4,x86 gcdecoder revpinvoke nits (issue_ref)
dotnet/runtime,6fa4227c625199cd0194613068f78e8db61967ba,Remove emitter unit tests which are not supported and add MoveScalar tests as needed (#115952),2025-06-04 04:21:45+00:00,Khushal Modi,0,,,2,4,2,remove emitter unit tests which are not supported and add movescalar tests as needed (issue_ref)
dotnet/runtime,dda9996426c9a88c6f6d692b5094326a9511b072,[mono][interp] Add possibility to configure interp options from env var (#116215),2025-06-04 06:28:31+00:00,Vlad Brezae,1,0dde205e015648616fce255778d20c0d2e0bb0bd,"[mono] fix --trace (#117246)

Co-authored-by: Vlad Brezae <brezaevlad@gmail.com>",1,4,0,[mono][interp] add possibility to configure interp options from env var (issue_ref)
dotnet/runtime,567505fe6d9fe9a186fa133ff45ccb81d2c9c7db,"[mono][interp] Update var definition when inserting new instructions during cprop (#116179)

The definition was not updated, leading to invalid optimizations later on.",2025-06-04 08:26:55+00:00,Vlad Brezae,0,,,1,2,0,"[mono][interp] update var definition when inserting new instructions during cprop (issue_ref)the definition was not updated, leading to invalid optimizations later on."
dotnet/runtime,fcbc76add236b383b78d789c7fab7598f6405be3,"JIT: Remove PUTARG_SPLIT (#116074)

Instead replace arguments that are passed split across registers and
stack by two arguments in lowering. With recent ABI and class layout
work this is now straightforward.",2025-06-04 09:13:45+00:00,Jakob Botsch Nielsen,1,5a65f7c86f3b44975fa611b0569f256c7c58d961,"Enable RhpNewObjectArrayFast optimization on NativeAOT (#116290)

* Enable RhpNewObjectArrayFast optimization on NativeAOT

* Rename CORINFO_HELP_NEWARR_1_OBJ -> CORINFO_HELP_NEWARR_1_PTR, RhpNewObjectArrayFast -> RhpNewPtrArrayFast, fix incorrect comments

* Use CORINFO_HELP_NEWARR_1_PTR for all SZARRAYs with pointer-sized elements

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",32,366,1495,jit: remove putarg_split (issue_ref)instead replace arguments that are passed split across registers andstack by two arguments in lowering. with recent abi and class layoutwork this is now straightforward.
dotnet/runtime,11a36031ec8495acbd167154173c4c1e18c91699,Remove ProtectByRefsFrame (#116288),2025-06-04 13:53:45+00:00,Filip Navara,0,,,4,1,79,remove protectbyrefsframe (issue_ref)
dotnet/runtime,41be5e229b30fc3e7aaed9361b9db4487c5bb7f8,"JIT: Graph-based loop inversion (#116017)

Succeeds #113709. Part of #107749 and #108901. Fixes #50204.",2025-06-04 14:39:50+00:00,Aman Khalid,1,296780df4ebeb237455f7e465cbf1df181da277d,"JIT: Don't transform infinite loops in `fgOptimizeBranchToEmptyUnconditional` (#116822)

Fixes #116701.",6,262,361,jit: graph-based loop inversion (issue_ref)succeeds issue_ref. part of issue_ref and issue_ref. fixes issue_ref.
dotnet/runtime,c26d6a178cba8ba701b043513f3013a6837679ba,Enable post-build steps for CoreCLR android (#116091),2025-06-04 14:42:39+00:00,Milos Kotlar,0,,,1,10,10,enable post-build steps for coreclr android (issue_ref)
dotnet/runtime,a16df1d39d1ba6be8a2da69385488bbb558c7958,"Check containment for op3 for ternary instruction (#116229)

* Check containment for op3 for ternary instruction

* review comment",2025-06-04 16:11:30+00:00,Kunal Pathak,0,,,1,12,2,check containment for op3 for ternary instruction (issue_ref)* check containment for op3 for ternary instruction* review comment
dotnet/runtime,ab7088670a8a4f5fefd0bb5bca04149277c539e8,"[main] Source code updates from dotnet/dotnet (#116145)

* [VMR] Codeflow cb502bd-cb502bd

[[ commit created by automation ]]

* Update dependencies from https://github.com/dotnet/dotnet build 270084
No dependency updates to commit

* Rename wasm test file to fix WasmBuildTest failure

* Disable DynamicObjects test

* Update dependencies from https://github.com/dotnet/dotnet build 270315
Updated Dependencies:
System.CommandLine (Version 2.0.0-beta5.25279.110 -> 2.0.0-beta5.25279.2)
Microsoft.DotNet.Cecil (Version 0.11.5-alpha.25279.110 -> 0.11.5-alpha.25260.104)
Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport, Microsoft.DotNet.ApiCompat.Task (Version 10.0.100-preview.6.25279.110 -> 10.0.100-preview.5.25260.104)
Microsoft.DotNet.Arcade.Sdk, Microsoft.DotNet.XliffTasks, Microsoft.DotNet.Helix.Sdk, Microsoft.DotNet.GenAPI, Microsoft.DotNet.GenFacades, Microsoft.DotNet.XUnitExtensions, Microsoft.DotNet.Build.Tasks.Archives, Microsoft.DotNet.Build.Tasks.Packaging, Microsoft.DotNet.Build.Tasks.Installers, Microsoft.DotNet.Build.Tasks.Templating, Microsoft.DotNet.Build.Tasks.Workloads, Microsoft.DotNet.CodeAnalysis, Microsoft.DotNet.Build.Tasks.TargetFramework, Microsoft.DotNet.RemoteExecutor, Microsoft.DotNet.Build.Tasks.Feed, Microsoft.DotNet.SharedFramework.Sdk, Microsoft.DotNet.PackageTesting (Version 10.0.0-beta.25279.110 -> 10.0.0-beta.25260.104)
Microsoft.DotNet.XUnitAssert, Microsoft.DotNet.XUnitConsoleRunner (Version 2.9.2-beta.25279.110 -> 2.9.2-beta.25260.104)
Microsoft.NETCore.App.Runtime.win-x64, runtime.native.System.IO.Ports, Microsoft.NETCore.ILAsm, Microsoft.NET.Sdk.IL, System.Text.Json, System.Reflection.Metadata, System.Reflection.MetadataLoadContext (Version 10.0.0-preview.6.25279.110 -> 10.0.0-preview.5.25260.104)
Microsoft.Net.Compilers.Toolset, Microsoft.CodeAnalysis, Microsoft.CodeAnalysis.CSharp, Microsoft.CodeAnalysis.Analyzers (Version 5.0.0-1.25279.110 -> 5.0.0-1.25260.104)
Microsoft.CodeAnalysis.NetAnalyzers (Version 10.0.0-preview.25279.110 -> 10.0.0-preview.25260.104)

* ActiveIssue https://github.com/dotnet/runtime/issues/116303

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Alexander Köplinger <alex.koeplinger@outlook.com>
Co-authored-by: Viktor Hofer <viktor.hofer@microsoft.com>
Co-authored-by: Pavel Savara <pavelsavara@microsoft.com>",2025-06-04 17:12:34+00:00,dotnet-maestro[bot],1,b12dc6c549853725fd8f1ca4f8ddd3a6f830f0ae,"Fix ILLink check for function pointer equality (#116435)

Fixes https://github.com/dotnet/runtime/issues/113031.

Adds support for comparing function pointer values in the
dataflow analysis.

An alternative fix would be to avoid creating typed dataflow
values for function pointer types entirely, since we don't need
to track their values. However, since we currently lack a choke
point to skip creating such values (this is distinct from
IsTypeInterestingForDataflow, as we still need to track other
primitive types like integers), the simpler approach for now is
to implement equality handling.",36,812,362,"[main] source code updates from dotnet/dotnet (issue_ref)* [vmr] codeflow cb502bd-cb502bd[[ commit created by automation ]]* update dependencies from build 270084no dependency updates to commit* rename wasm test file to fix wasmbuildtest failure* disable dynamicobjects test* update dependencies from build 270315updated dependencies:system.commandline (version 2.0.0-beta5.25279.110 -> 2.0.0-beta5.25279.2)microsoft.dotnet.cecil (version 0.11.5-alpha.25279.110 -> 0.11.5-alpha.25260.104)microsoft.net.workload.emscripten.current.manifest-10.0.100.transport, microsoft.dotnet.apicompat.task (version 10.0.100-preview.6.25279.110 -> 10.0.100-preview.5.25260.104)microsoft.dotnet.arcade.sdk, microsoft.dotnet.xlifftasks, microsoft.dotnet.helix.sdk, microsoft.dotnet.genapi, microsoft.dotnet.genfacades, microsoft.dotnet.xunitextensions, microsoft.dotnet.build.tasks.archives, microsoft.dotnet.build.tasks.packaging, microsoft.dotnet.build.tasks.installers, microsoft.dotnet.build.tasks.templating, microsoft.dotnet.build.tasks.workloads, microsoft.dotnet.codeanalysis, microsoft.dotnet.build.tasks.targetframework, microsoft.dotnet.remoteexecutor, microsoft.dotnet.build.tasks.feed, microsoft.dotnet.sharedframework.sdk, microsoft.dotnet.packagetesting (version 10.0.0-beta.25279.110 -> 10.0.0-beta.25260.104)microsoft.dotnet.xunitassert, microsoft.dotnet.xunitconsolerunner (version 2.9.2-beta.25279.110 -> 2.9.2-beta.25260.104)microsoft.netcore.app.runtime.win-x64, runtime.native.system.io.ports, microsoft.netcore.ilasm, microsoft.net.sdk.il, system.text.json, system.reflection.metadata, system.reflection.metadataloadcontext (version 10.0.0-preview.6.25279.110 -> 10.0.0-preview.5.25260.104)microsoft.net.compilers.toolset, microsoft.codeanalysis, microsoft.codeanalysis.csharp, microsoft.codeanalysis.analyzers (version 5.0.0-1.25279.110 -> 5.0.0-1.25260.104)microsoft.codeanalysis.netanalyzers (version 10.0.0-preview.25279.110 -> 10.0.0-preview.25260.104)* activeissue ---------"
dotnet/runtime,d4b08f96ee0368867be579c03181a2f58b9e01a4,Fix no-argument ./build.sh invocation (#116315),2025-06-04 18:21:49+00:00,Jeremy Koritzinsky,1,624737eb3796e1a760465912b27ac349965d8ba5,"Fix bash array expansion (#116321)

Follow-up to https://github.com/dotnet/runtime/pull/116315#issuecomment-2941125952",1,1,1,fix no-argument ./build.sh invocation (issue_ref)
dotnet/runtime,6ad3b325317a304fdd7ed0f7d31840198bfc37f4,Unbounded memory leak from DependencyInjectionEventSource (#115974),2025-06-04 18:27:56+00:00,Badre BSAILA,0,,,1,18,0,unbounded memory leak from dependencyinjectioneventsource (issue_ref)
dotnet/runtime,1bcde97299df5d9c52215e2576d2d02e19c2151b,"[browser] rename MSBuild property WasmPerfTracing to EnableDiagnostics  (#116253)

* WasmPerfTracing -> EnableDiagnostics

WASM_PERFTRACING -> WASM_ENABLE_EVENTPIPE
enablePerfTracing -> enableEventPipe
DOTNET_WasmPerfInstrumentation -> DOTNET_WasmPerformanceInstrumentation

* _WasmProfilers -> WasmProfilers

drop WasmPerformanceInstrumentation magic

* more

* fix",2025-06-04 19:52:08+00:00,Pavel Savara,1,d47f2b97e6e40f4b0a6c8ed2c1bad59bb6d898ba,[browser][WBT] fix BlazorEventPipeTestWithMetrics test (#116334),30,79,77,[browser] rename msbuild property wasmperftracing to enablediagnostics (issue_ref)* wasmperftracing -> enablediagnosticswasm_perftracing -> wasm_enable_eventpipeenableperftracing -> enableeventpipedotnet_wasmperfinstrumentation -> dotnet_wasmperformanceinstrumentation* _wasmprofilers -> wasmprofilersdrop wasmperformanceinstrumentation magic* more* fix
dotnet/runtime,3427e5fe067db2656d2e59d5d6957bbd98adb9b6,Add AOT sampling profiler (#108083),2025-06-04 21:00:29+00:00,Filip Navara,0,,,3,72,2,add aot sampling profiler (issue_ref)
dotnet/runtime,b5b51f90526d2c0af1995310ab12a879d6b431aa,"Update coding-style.md (#116317)

https://github.com/dotnet/runtime/issues/68238",2025-06-04 23:53:33+00:00,Tony Hallett,0,,,1,1,1,update coding-style.md (issue_ref)
dotnet/runtime,4e03c5a9546c59675aa009c22bb759349f1370b7,Use throw stubs in ref assemblies for collection interfaces (#116309),2025-06-05 03:03:47+00:00,Sergio Pedri,0,,,1,21,21,use throw stubs in ref assemblies for collection interfaces (issue_ref)
dotnet/runtime,5a65f7c86f3b44975fa611b0569f256c7c58d961,"Enable RhpNewObjectArrayFast optimization on NativeAOT (#116290)

* Enable RhpNewObjectArrayFast optimization on NativeAOT

* Rename CORINFO_HELP_NEWARR_1_OBJ -> CORINFO_HELP_NEWARR_1_PTR, RhpNewObjectArrayFast -> RhpNewPtrArrayFast, fix incorrect comments

* Use CORINFO_HELP_NEWARR_1_PTR for all SZARRAYs with pointer-sized elements

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-06-05 03:17:23+00:00,Filip Navara,1,9531cf81a361c5b53651672a5df897cadd6e89e8,JIT: Fix dumping of empty exception set during CSE (#116472),25,76,87,"enable rhpnewobjectarrayfast optimization on nativeaot (issue_ref)* enable rhpnewobjectarrayfast optimization on nativeaot* rename corinfo_help_newarr_1_obj -> corinfo_help_newarr_1_ptr, rhpnewobjectarrayfast -> rhpnewptrarrayfast, fix incorrect comments* use corinfo_help_newarr_1_ptr for all szarrays with pointer-sized elements---------"
dotnet/runtime,ba462cea77f0d49e65e0df5e76c14f6d03119332,Improve a few more IList/Collection => IReadOnlyList/Collection checks (#116313),2025-06-05 03:31:07+00:00,Stephen Toub,0,,,4,7,3,improve a few more ilist/collection => ireadonlylist/collection checks (issue_ref)
dotnet/runtime,56c80cd6e41f4e9144f56495efa398881a8ea99e,"Ensure that embedded mask handling is covering the right scenarios (#116201)

* Ensure that embedded mask handling is covering the right scenarios

* Update src/coreclr/jit/hwintrinsic.h",2025-06-05 03:43:16+00:00,Tanner Gooding,0,,,7,221,142,ensure that embedded mask handling is covering the right scenarios (issue_ref)* ensure that embedded mask handling is covering the right scenarios* update src/coreclr/jit/hwintrinsic.h
dotnet/runtime,c7dea1c227bb1894a2235c572332dc1688037d5a,Delete DacVirtualUnwind (#116286),2025-06-05 05:25:38+00:00,Jan Kotas,0,,,4,2,100,delete dacvirtualunwind (issue_ref)
dotnet/runtime,937742e712796aaf946e4767b7ab2baab1f8402a,"[RISC-V] Simplifying the loop generated in genZeroInitFrameUsingBlockInit (#116011)

* simplify genZeroInitFrameUsingBlockInit",2025-06-05 08:06:00+00:00,Tymoteusz Wenerski,0,,,1,48,56,[risc-v] simplifying the loop generated in genzeroinitframeusingblockinit (issue_ref)* simplify genzeroinitframeusingblockinit
dotnet/runtime,624737eb3796e1a760465912b27ac349965d8ba5,"Fix bash array expansion (#116321)

Follow-up to https://github.com/dotnet/runtime/pull/116315#issuecomment-2941125952",2025-06-05 08:09:23+00:00,Alexander Köplinger,1,9e5e6aa7bc36aeb2a154709a9d1192030c30a2ef,"Fix dead link in build.sh help message to point to correct cross-building documentation (#117325)

* Initial plan

* Fix dead link in build.sh help to point to correct cross-building documentation

Co-authored-by: jkotas <6668460+jkotas@users.noreply.github.com>

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: jkotas <6668460+jkotas@users.noreply.github.com>",1,2,2,fix bash array expansion (issue_ref)follow-up to #issuecomment-2941125952
dotnet/runtime,76d722411f2b2ae197ba1efe37759ae03b90f59f,Rename Redhawk to NativeAOT (#116209),2025-06-05 11:58:05+00:00,kasperk81,1,ce67cef77815e0ac2edde2f1f3f451feef64f2cb,"[Linux][EventPipe][UserEvents] Add user events eventpipe support (#115265)

* [DiagnosticServer] Refactor and Cleanup

Visual reorder of Diagnostics enum structs
Fix a couple naming typos
Spaces to tabs consistency

* [EventPipe] Add User_events structs

* [EventPipe] Add User_events eventpipe session

* [DiagnosticServer] Revamp Provider Config deserialization

To support the new user_events-based eventpipe session, add
a more modular and flexible EventPipeProviderConfiguration deserializer.

* [DiagnosticServer] Deprecate old deserializer

* [DiagnosticServer] Add CollectTracing5 command parser

* [DiagnosticServer] Deserialize file_descriptor from IPC Stream

The user_events_data file is required to register user_events tracepoints.
Require profilers to pass over the corresponding file descriptor with
SCM_RIGHTS in order to initialize the user_events EventPipe session.

* [EventPipe] Use Event_filter to set EventPipeEvent enabled mask

* [UserEvents] Register and unregister tracepoints

* [UserEvents] Write events to tracepoints

* Fixup CI build failures

* Cleanup missed CI build failures

* Address feedback

Fix parameter order
Use umap_ptr_uint32 macros for EventFilter
Remove tracepoint_name const qualifier
Prevent buffer overflow in tracepoint_format copying
Skip duplicate tracepoint config fini
Null out tracepoint after transferring ownership
Use dn_vector_ptr_t for provider configurations
Wrap entire functions under macro checks
Use int for file descriptor
Fix formatting
Add checks for ep_session_disable session specific logic
Use dn_vector_ptr for the tracepoints sets
Use switch case for event writing
Scope tracepoint registration to sessions
Remove ep prefix from static functions
Move includes to source
Define max tracepoint format length

* Address Feedback const EventPipeProviderConfiguration

Adhere to the standard where EventPipeProviderConfiguration is
read-only. Create event filter and tracepoint config duplication helpers
to give the SessionProvider its own copy.

* Address feedback Add string deserializer helper

* Revert provider_configs to vector of structs

* Dynamically allocate tracepoint format

* Fix CI Build failures

* Split ProviderConfiguration structs

* Reuse EventPipeSessionTypes

* Constrain tracepoint_config modification to session provider

* Fixup compilation error

* Move metadata into extensions portion

* Free default tracepoint format

* Address feedback

Use ep_provider_config_fini helper
Add session_type deserializing helper
Fix tabbing
Add dn_umap_uint32_ptr macro
Handle tracepoint registration failure
Change ep_session_write_event order
Use dn_list foreach
Add size check to extension activity ids construction
Add ep_rt_utf8_string_printf_alloc helper

* Address feedback

Refactor tracepoint writing logic
Use local constants
Rename provider config parser

* Consistently use addresses of struct fields

* Fix typo

* Address feedback

Make struct data ownership consistent by removing const
Make external source files use getters and internal source files
directly access data.
Add session_provider_tracepoint_free
Disallow null tracepoint_name in tracepoint_format_alloc
Remove redundant checks
Cleanup ep_rt_utf8_string_printf_alloc
Cleanup writing to tracepoint

* Address feedback

Update ep_provider_config_init/fini callsites
Make resource cleanup logic consistent
Account for early exit memory leaks
Various cleanup

* Address Feedback

Fix eventpipe_collect_tracing_command_free_tracepoint_sets logic
Clarify len variable names
Consistently use -1 as invalid file descriptor
Update event_pipe to use ep_rt_utf16_to_utf8_string/free

* Fix Sign mismatch build error",99,203,280,rename redhawk to nativeaot (issue_ref)
dotnet/runtime,d1ec77f45aa607d355664a0c16aca2e048ae3adb,"Remove a few unsafe bits in S.P.Uri, S.N.Ping, System.Transactions.Local (#116281)",2025-06-05 14:00:07+00:00,Egor Bogatov,0,,,4,56,56,"remove a few unsafe bits in s.p.uri, s.n.ping, system.transactions.local (issue_ref)"
dotnet/runtime,f34e78fb4046550955365ae1bfa6e9671a3a5ffa,"Fix various HTTP header parsing issues (#116323)

Co-authored-by: Miha Zupan <mizupan@microsoft.com>",2025-06-05 14:37:37+00:00,Miha Zupan,1,4aa5460ec2ef7c86e77945ec13680de0a500fe1b,"[HTTP] Stricter header value validation (#116634)

* Validate headers for latin 1 and exclude \0

* Fix and tests

* More tests / fixes, WIP

* Post rebase fix

* Moved and fixed tests, fixed cookies

* Fixed windows part

* Feedback

* Fix tests - do not run on browser

* Add cookie specific tests

* Assert header value in possitive tests

* Expanded and fixed tests on Windows.

* Fix tests.

* Fix for huffman

* Damn this H/2 Huffman non-sense, give me some strings please, not this binary soup",11,111,16,fix various http header parsing issues (issue_ref)
dotnet/runtime,5ba52ed69b1a883d583e46f73a49783a015b07ea,adding a simple test for reflection with async (#116329),2025-06-05 15:36:33+00:00,Vladimir Sadov,0,,,2,41,0,adding a simple test for reflection with async (issue_ref)
dotnet/runtime,d47f2b97e6e40f4b0a6c8ed2c1bad59bb6d898ba,[browser][WBT] fix BlazorEventPipeTestWithMetrics test (#116334),2025-06-05 15:53:37+00:00,Pavel Savara,1,7ed5ede5bed646eb758ce3ff5ecff01fbd10e0ac,[browser] Fix dev tools profiler (#116387),1,47,30,[browser][wbt] fix blazoreventpipetestwithmetrics test (issue_ref)
dotnet/runtime,a7f0b3e47c056202b5616ae81598a50c59961816,"Implement SVE2 ShiftArithmeticRounded, ShiftArithmeticRoundedSaturate, ShiftArithmeticSaturate (#115774)

* Implement SVE2 ShiftArithmeticRounded, ShiftArithmeticRoundedSaturate, ShiftArithmeticSaturate

* Improve formatting

* Add correction for range of predicate registers",2025-06-05 16:51:14+00:00,snickolls-arm,1,7889937aae942f9ad369ca9e186104c21d87a187,"arm64: Implement missing SVE extract methods (#116095)

* arm64: Implement missing SVE extract methods
* Fixes #115336

* Remove asserts & align intrinsic definitions

* Remove HasRMWSemantics from ExtractAfterLastActiveElementScalar",6,257,12,"implement sve2 shiftarithmeticrounded, shiftarithmeticroundedsaturate, shiftarithmeticsaturate (issue_ref)* implement sve2 shiftarithmeticrounded, shiftarithmeticroundedsaturate, shiftarithmeticsaturate* improve formatting* add correction for range of predicate registers"
dotnet/runtime,75de83cf8a885fbf6570bffa7869fe6f3d32f723,"Improve the interpreter internal diagnostic capabilities (#116162)

- Duplicate the concept of MethodSet's from the JIT
  -  Methods can be specified with granularity of by method name, class, instantiation, etc.
  - This works for DOTNET_Interpreter, DOTNET_InterpDump and DOTNET_InterpHalt
- Improve printing of method names. The names now match the JIT. One detail here is that the names are now derived directly from CorInfoType instead of the jittype. To avoid differences between interpreter and JIT behavior here, the naming in the jit was adjusted slightly. The most significant change is that bool, byte are now distinguishable, byte and sbyte names that instead of ubyte and byte, and we have nint/nuint instead of those cases being indistinguishable from the integral types.
- Add a new config switch DOTNET_InterpList, when enabled this will list all methods that go through the Interpreter compiler
  - Since this is an integer, add support for arbitrary integer config knobs in the interpreter compiler",2025-06-05 16:53:12+00:00,David Wrighton,1,c1bef49dab87bc6a6e99787b92f16a82e514de69,"Fix conversion opcode emit for implicit conversion part of conditional branches (#116367)

There was a bug leading to adding of conversion in a different basic block. This also simplifies code a little bit. Backport of corresponding mono fix.",13,708,33,"improve the interpreter internal diagnostic capabilities (issue_ref)- duplicate the concept of methodset's from the jit - methods can be specified with granularity of by method name, class, instantiation, etc. - this works for dotnet_interpreter, dotnet_interpdump and dotnet_interphalt- improve printing of method names. the names now match the jit. one detail here is that the names are now derived directly from corinfotype instead of the jittype. to avoid differences between interpreter and jit behavior here, the naming in the jit was adjusted slightly. the most significant change is that bool, byte are now distinguishable, byte and sbyte names that instead of ubyte and byte, and we have nint/nuint instead of those cases being indistinguishable from the integral types.- add a new config switch dotnet_interplist, when enabled this will list all methods that go through the interpreter compiler - since this is an integer, add support for arbitrary integer config knobs in the interpreter compiler"
dotnet/runtime,088856ed43c59d3be0abaa2b8dbff6ef7a917ffd,"[cDAC] Implement sign extension for ClrDataAddresses (#116222)

* Added managed ClrDataAddress to represent CLRDATA_ADDRESS
* Properly sign extend ClrDataAddress when converting from 32 to 64 bits
* Add overflow check when converting 64 to 32 bits",2025-06-05 18:05:32+00:00,Max Charlamb,0,,,7,466,374,[cdac] implement sign extension for clrdataaddresses (issue_ref)* added managed clrdataaddress to represent clrdata_address* properly sign extend clrdataaddress when converting from 32 to 64 bits* add overflow check when converting 64 to 32 bits
dotnet/runtime,ad2712c3b145d616758c0ed4c08a7a1fb59df631,"Update Linux versions in Libraries pipeline (#115756)

* Update Linux versions in Libraries pipeline

* Update eng/pipelines/libraries/helix-queues-setup.yml

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>

* Update to Alpine 3.22 and Ubuntu 25.10

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-06-05 21:28:10+00:00,Rich Lander,0,,,1,5,5,update linux versions in libraries pipeline (issue_ref)* update linux versions in libraries pipeline* update eng/pipelines/libraries/helix-queues-setup.yml
dotnet/runtime,05e5a448fe726617ed881620093a792f27371e71,Convert STORE_BLK into STORIND for SIMD (#116265),2025-06-05 21:48:12+00:00,Egor Bogatov,0,,,1,28,25,convert store_blk into storind for simd (issue_ref)
dotnet/runtime,aaa3a24978ad6f09ee4c7e82afdec0c63f32efbe,Enable ML-DSA on Windows (#116291),2025-06-05 23:17:54+00:00,Pranav Senthilnathan,1,e0ab13df06adaebd7088c1b6701e5e8b91fee2ed,"ML-DSA+COSE (#115158)

* MLDSA+COSE

* Fix M.Bcl.Cryptography build errors after merge conflict

* address feedback (minus test unification)",25,546,52,enable ml-dsa on windows (issue_ref)
dotnet/runtime,60dd6167532a7b1b686a55ff1f679ae0f011df13,Remove dead code from arm/arm64/loongarch64 stub linker (#116349),2025-06-05 23:42:55+00:00,Filip Navara,0,,,5,0,402,remove dead code from arm/arm64/loongarch64 stub linker (issue_ref)
dotnet/runtime,211e8dbca32433f062df045365ff93a0e885aef5,Dispose all resources used in CmsSignature (#115666),2025-06-05 23:50:28+00:00,Pranav Senthilnathan,0,,,5,246,211,dispose all resources used in cmssignature (issue_ref)
dotnet/runtime,12c9ac07ce2cb23823c454754d7627beaa755544,Add StringComparison to ClaimsIdentity,2025-06-06 01:50:33+00:00,Kevin Jones,0,,,4,460,22,add stringcomparison to claimsidentity
dotnet/runtime,259204ad1f5fa469704defa4727ddc355565f683,"Remove dead code for parsing/emitting X86 instructions (#116292)

* Remove dead code for parsing/emitting X86 instructions

* Restrict X86NearJump to X86

* Inline both usages of X86EmitR2ROp

* Inline the value of X86_INSTR_MOVAPS_R_RM

* Remove kESP_Unsafe

* Remove X86EmitEspOffset on x64",2025-06-06 06:26:38+00:00,Filip Navara,0,,,3,82,980,remove dead code for parsing/emitting x86 instructions (issue_ref)* remove dead code for parsing/emitting x86 instructions* restrict x86nearjump to x86* inline both usages of x86emitr2rop* inline the value of x86_instr_movaps_r_rm* remove kesp_unsafe* remove x86emitespoffset on x64
dotnet/runtime,f9c5e1a89dda21e672a859d13197897b1bb1cd4f,"Avoid building JITs for cross tools when unnecessary (#116332)

Makes the builds that happen in the SPMI pipelines a bit faster. Maybe
helps in some other cases too.",2025-06-06 07:56:11+00:00,Jakob Botsch Nielsen,0,,,1,2,2,avoid building jits for cross tools when unnecessary (issue_ref)makes the builds that happen in the spmi pipelines a bit faster. maybehelps in some other cases too.
dotnet/runtime,19b3b0b34066b58e525d3fab3a23b7b6e28ce9d9,"Fix NativeAOT outer loop test failure (#116362)

The optimized path introduced in #116290 skipped error handling that's required for native AOT.",2025-06-06 10:56:34+00:00,Jan Kotas,1,b2605610740a82aad889c5193ccd117f18c761f0,"Fix illumos compile error in coreclr/runtime/amd64/AllocFast.S (#117463)

on illumos with gcc 13.3 cross copmiler
 coreclr/runtime/amd64/AllocFast.S: Assembler messages:
  coreclr/runtime/amd64/AllocFast.S:237: Error: missing ')'",9,9,9,fix nativeaot outer loop test failure (issue_ref)the optimized path introduced in issue_ref skipped error handling that's required for native aot.
dotnet/runtime,e84d5992dfba969c378220a68bceed0af2ca5237,Correct sequence point comment (#116366),2025-06-06 11:12:07+00:00,Noah Falk,0,,,1,1,1,correct sequence point comment (issue_ref)
dotnet/runtime,c1bef49dab87bc6a6e99787b92f16a82e514de69,"Fix conversion opcode emit for implicit conversion part of conditional branches (#116367)

There was a bug leading to adding of conversion in a different basic block. This also simplifies code a little bit. Backport of corresponding mono fix.",2025-06-06 12:45:37+00:00,Vlad Brezae,1,b581381fcc0cdfce6a8a8a54d9edc8311af59064,"[clr-interp] Implement array support for reference and value types (#116384)

* Implement missing ref array support

* Implement CreateMultiDimArray and kArrayTypeMismatchException checks

* Remove TestArrayAddress in favor of other tests

* Fix kArrayTypeMismatchException checks",2,77,81,fix conversion opcode emit for implicit conversion part of conditional branches (issue_ref)there was a bug leading to adding of conversion in a different basic block. this also simplifies code a little bit. backport of corresponding mono fix.
dotnet/runtime,3c774420d83d3a0774b54f9732ae131e42c4666b,"SPMI: Handle BRANCH26 relocs similar to REL32 relocs (#116340)

BRANCH26 relocs were handled by seeing if we can fit a relative offset
to the actual target in the instruction, and if so, doing that.
Otherwise we would hardcode a jump to the end of the code.

It turns out that outside macOS we never hit the former case, so we
always hardcode a jump to the end of the code section. That makes
diffing work outside macOS.

On macOS, it happens rarely that the target (that comes from the
original SPMI collection) is actually within range of the code that was
allocated during SPMI replay. When that happens we end up with a two
different immediates provided to the instruction by the base and the
diff compilers, and hence diffing fails.

Now, `NearDiffer::compareOffsets` actually has code that tries to
compensate for relative offsets like this, by seeing if the absolute
offset computed by ""address + instrLen + immediate"" is the same for the
base and the diff compilers. However, it turns out that LLVM does not
scale the immediate in the b/bl instruction representation. So for the
above to work, it would actually need to be something like `instrLen +
immediate << 2`. We could do that, but it seems better to align this
with x64, which just skips all of the troubles by hardcoding the lower
bits of the absolute offsets as if it was the relative offset.",2025-06-06 13:54:13+00:00,Jakob Botsch Nielsen,0,,,1,4,9,"spmi: handle branch26 relocs similar to rel32 relocs (issue_ref)branch26 relocs were handled by seeing if we can fit a relative offsetto the actual target in the instruction, and if so, doing that.otherwise we would hardcode a jump to the end of the code.it turns out that outside macos we never hit the former case, so wealways hardcode a jump to the end of the code section. that makesdiffing work outside macos.on macos, it happens rarely that the target (that comes from theoriginal spmi collection) is actually within range of the code that wasallocated during spmi replay. when that happens we end up with a twodifferent immediates provided to the instruction by the base and thediff compilers, and hence diffing fails.now, actually has code that tries tocompensate for relative offsets like this, by seeing if the absoluteoffset computed by ""address + instrlen + immediate"" is the same for thebase and the diff compilers. however, it turns out that llvm does notscale the immediate in the b/bl instruction representation. so for theabove to work, it would actually need to be something like . we could do that, but it seems better to align thiswith x64, which just skips all of the troubles by hardcoding the lowerbits of the absolute offsets as if it was the relative offset."
dotnet/runtime,1cda0cd64ef617956a7a6276099184a55f61d2da,"Implement SVE2 AbsoluteDifferenceWidening(Upper/Lower) (#116268)

* SVE2 API for AbsoluteDifferenceWideningLower

Change-Id: Icac84e1e730993dbbcafe186b4e597c8536d4e58

* SVE2 API for AbsoluteDifferenceWideningUpper

Change-Id: Ide6440ac0753e046ca47ad77769a179996cb1809

* Renaming variable in test template

Change-Id: Idd85d335a9e46b002728699725bd1b4316e6f7fe",2025-06-06 16:38:47+00:00,Jacob Crawley,1,3d310726804cac239fd6d73b3bd77dfc15dd1f61,"arm64: Rename ConditionalExtract arguments (#116216)

* arm64: Rename ConditionalExtract arguments
* Fixes #115224

* Add Compatibility Suppression

* Fix the compatibility issues

* Fix the names in ref file

---------

Co-authored-by: Kunal Pathak <Kunal.Pathak@microsoft.com>",8,822,60,implement sve2 absolutedifferencewidening(upper/lower) (issue_ref)* sve2 api for absolutedifferencewideninglowerchange-id: icac84e1e730993dbbcafe186b4e597c8536d4e58* sve2 api for absolutedifferencewideningupperchange-id: ide6440ac0753e046ca47ad77769a179996cb1809* renaming variable in test templatechange-id: idd85d335a9e46b002728699725bd1b4316e6f7fe
dotnet/runtime,9214279d93b8b422495a98eb4edda91e92bd60c3,"Optimize Vector.Max codegen using AVX512 (#116117)

* Use vrange for Vector.Max if available

* Use fixup

* Jit formatting

* Same optimization for Min

* Rebase and make modifications from review.

* Make call to EvaluateBroadcastInPlace not ambiguous

---------

Co-authored-by: Alex Covington (Advanced Micro Devices <b-alexco@microsoft.com>",2025-06-06 20:01:13+00:00,Alex Covington,1,aad452c4b3ab9e525edd90de0b57aafd8b6bb80b,"Add JIT/VM support for the approved but NYI xarch isas (#116230)

* Update InstructionSetDesc and regenerate code for approved but NYI xarch isas

* Add base JIT and VM support for the new xarch ISAs

* Define the new AVX512 instructions to be exposed

* Reduce the xarch ISA support matrix by combining bits where reasonable

* Ensure lzcnt and movbe can still be opportunistically used by NAOT/R2R

* Fixing up tests to match the adjusted implications

* Ensure the naot smoke test validates X86Base correctly

* Ensure NAOT continues working with lzcnt/movbe",1,66,0,optimize vector.max codegen using avx512 (issue_ref)* use vrange for vector.max if available* use fixup* jit formatting* same optimization for min* rebase and make modifications from review.* make call to evaluatebroadcastinplace not ambiguous---------
dotnet/runtime,d1e2b6956feeeeb3a588e92b3f5f46d36a47a327,"Make single-file test cases delete extraction directory after test run (#116347)

Single-file scenarios that bundle additional content (via non-default bundling options) extract to a directory at run time. For tests that redirect the extraction root, we delete the extraction directory. However, for tests that use the default extraction root ($HOME/.net, <getpwuid>/.net, or %TMP%/.net), we do not. Especially for self-contained, this can result in a lot of extracted files left over by the test run.

- Update `BundledAppWithSubDirs` tests to delete the extraction directory used by the tests case
- Add assertions for expected new or reused extraction
- Make `NativeLibraries` specify the extraction root instead of using the default
- Move tests for app launch failure out of `BundledAppWithSubDirs` to `AppLaunch` test class.",2025-06-06 21:04:28+00:00,Elinor Fung,1,323911250fa5744f174e376f49cf6aadd7655557,"Make BundledAppWithSubDirs clean up bundled apps after each test case instead of after all tests (#120611)

The `BundledAppWithSubDirs` tests intermittently hit out of space issues in CI. They do clean up the bundled apps they create, but only after all tests in the class have run. This change makes those tests clean up earlier for environments that may not have the space for all the bundled apps at the same time. This also fixes the one case where we were leaving an extracted file (`mockcoreclr`) behind on non-Windows.",3,165,106,"make single-file test cases delete extraction directory after test run (issue_ref)single-file scenarios that bundle additional content (via non-default bundling options) extract to a directory at run time. for tests that redirect the extraction root, we delete the extraction directory. however, for tests that use the default extraction root ($home/.net, <getpwuid>/.net, or %tmp%/.net), we do not. especially for self-contained, this can result in a lot of extracted files left over by the test run.- update tests to delete the extraction directory used by the tests case- add assertions for expected new or reused extraction- make specify the extraction root instead of using the default- move tests for app launch failure out of to test class."
dotnet/runtime,5f3e1ffde85363224f645e059518ef2dce0d265d,Normalize TYP_STRUCT to TYP_SIMD in impInlineUnboxNullable (#116372),2025-06-07 00:04:57+00:00,Egor Bogatov,0,,,3,45,5,normalize typ_struct to typ_simd in impinlineunboxnullable (issue_ref)
dotnet/runtime,39ecf52d015d94c85f8b500ffd70a59a976c5b52,"JIT: Allow baseline intrinsics in JIT code unconditionally (#116196)

* allow any baseline intrinsics in JIT

* formatting

* remove IsBaselineSimdIsaSupported

* update comments",2025-06-07 11:28:54+00:00,Clinton Ingram,1,04514dbd686e07bab14a79fe47762fc4524bfce3,"JIT: Fix tailcall rehoming logic for some interfering operands (#116468)

When the JIT notices that an argument being passed to a tailcall will override a
later used parameter it tries to create defensive copies of the parameter.
However, this logic did not properly handle the case where the first argument
the JIT has decided to pass overrides itself partially.

In the test case added we have IR like
```
N039 (  9,  6) [000025] -c---+-----                   t25 =    LCL_VAR   struct<S0, 48> V00 arg0         u:1 NA (last use) REG NA $80
N041 (???,???) [000043] -----------                            NO_OP     void   REG NA
N043 (???,???) [000042] -----------                            START_NONGC void   REG NA
                                                            ┌──▌  t25    struct
N045 (???,???) [000039] -----------                         ▌  PUTARG_STK [+0x20] void   (48 stackByteSize), (32 byteOffset) (Unroll) REG NA
N047 (  1,  1) [000029] -----+-----                   t29 =    LCL_VAR   int    V03 tmp1         u:1 rdi (last use) REG rdi <l:$380, c:$381>
                                                            ┌──▌  t29    int
N049 (???,???) [000040] -----------                   t40 = ▌  PUTARG_REG int    REG rdi
N051 (  1,  2) [000018] -----+-----                   t18 =    CNS_VEC   simd32<0x0000000000000000, 0x0000000000000000, 0x0000000000000000, 0x0000000000000000> REG mm0 $3c0
                                                            ┌──▌  t18    simd32
N053 (???,???) [000041] -----------                         ▌  PUTARG_STK [+0x00] void   (32 stackByteSize), (0 byteOffset) REG NA
                                                            ┌──▌  t40    int    arg1 rdi
N055 ( 51, 35) [000026] -ACXG+-----                         ▌  CALL      void   Program:M12(System.Numerics.Vector`1[ulong],sbyte,S0):short REG NA $VN.Void
```

where `[000039]` will partially override its operand `[000025]`. The previous
logic did not detect that a temp was needed for `[000025]`.",17,136,420,jit: allow baseline intrinsics in jit code unconditionally (issue_ref)* allow any baseline intrinsics in jit* formatting* remove isbaselinesimdisasupported* update comments
dotnet/runtime,aad452c4b3ab9e525edd90de0b57aafd8b6bb80b,"Add JIT/VM support for the approved but NYI xarch isas (#116230)

* Update InstructionSetDesc and regenerate code for approved but NYI xarch isas

* Add base JIT and VM support for the new xarch ISAs

* Define the new AVX512 instructions to be exposed

* Reduce the xarch ISA support matrix by combining bits where reasonable

* Ensure lzcnt and movbe can still be opportunistically used by NAOT/R2R

* Fixing up tests to match the adjusted implications

* Ensure the naot smoke test validates X86Base correctly

* Ensure NAOT continues working with lzcnt/movbe",2025-06-07 16:35:08+00:00,Tanner Gooding,1,3091730fe7b1936e4d6a4a934e88dd008d5c63de,"Arm64 SVE: Do not remove embedded conditional selects (#116144)

* Arm64 SVE: Do not remove embedded conditional selects

Fixes #116140

When an embedded SVE instrinsic is created, during lowering a conditional select is created to embed the operation. This required to ensure there is a mask for the embedded intrinsic to use.

Ensure that the embedding conditional select can only be removed if the embedded intrinsic is also removed.

* Check for EmbeddingMaskOp in LowerHWIntrinsicCndSel

* Fix HasDisasmCheck

* fix formatting

* debug and comment nits

* check all cndsel ops in OperMayThrow

* Add OperOrEmbeddedChildrenMayThrow()

* Replace with recursive OperOrContainedChildrenMayThrow()

* remove pointless assert

* rename to NodeOrContainedOperandsMayThrow

* use for loop instead of walker

* Update src/coreclr/jit/lowerarmarch.cpp

* add test env

* update HasDisasmCheck

---------

Co-authored-by: Kunal Pathak <Kunal.Pathak@microsoft.com>",31,3012,1758,add jit/vm support for the approved but nyi xarch isas (issue_ref)* update instructionsetdesc and regenerate code for approved but nyi xarch isas* add base jit and vm support for the new xarch isas* define the new avx512 instructions to be exposed* reduce the xarch isa support matrix by combining bits where reasonable* ensure lzcnt and movbe can still be opportunistically used by naot/r2r* fixing up tests to match the adjusted implications* ensure the naot smoke test validates x86base correctly* ensure naot continues working with lzcnt/movbe
dotnet/runtime,e9957dcaf12a8c4a17e1e49a2dbc1ee6cd4d62ea,"Partial revert of ""Delete LOADEDMODULES cache"", additional cleanup (#116374)

* Revert ""Delete LOADEDMODULES cache (#116126)""

This reverts commit 7a06f23fa12559cddd5f440acdd37006149fc8c2.

* Revert caching by file name path

* Additional cleanup",2025-06-07 19:21:51+00:00,Jan Kotas,1,0b520b8113bcaf2f8130ab99f555688e49fb0abf,"Add proper locking in TranslateSigHelper (#120143)

TranslateSigHelper updates the metadata without going through the RegMeta interface (by directly extracting the m_pStgdb field). When doing so, it omits to acquire the write lock, which can end up corrupting the metadata when multiple threads are running concurrently.

Fixes #119958

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",31,593,576,"partial revert of ""delete loadedmodules cache"", additional cleanup (issue_ref)* revert ""delete loadedmodules cache (issue_ref)""this reverts commit 7a06f23fa12559cddd5f440acdd37006149fc8c2.* revert caching by file name path* additional cleanup"
dotnet/runtime,c160acf0f2d773c6a30271c76e0addda5dcb508b,[browser] Remove custom cache (#114901),2025-06-07 19:30:13+00:00,Marek Fišera,0,,,11,12,260,[browser] remove custom cache (issue_ref)
dotnet/runtime,a7f68b8347140f50da1612d6f185baf78d0b4555,Use `Unsafe.BitCast` in `System.Array` (#116404),2025-06-08 01:15:57+00:00,xtqqczze,0,,,1,8,8,use in (issue_ref)
dotnet/runtime,b56160720e70517560f57ff69888575783c23397,"Delete SCAN contract annotations (#116182)

These annotations were used by prefast plugin that analyzed contract consistency. This prefast plugin is not coming back.",2025-06-08 01:26:35+00:00,Jan Kotas,1,e36d92e01d8a7c17db10610cfe16139e3b468014,"Fix CopyOSContext on amd64 (#120300)

* Fix CopyOSContext on amd64

The CopyOSContext was skipping floating point registers on amd64. There
was an obsolete comment that on some older Windows, the vector registers
are not present in the context. I've found to be a problem when porting
nativeAOT EH to CoreCLR and to make the context flags correct, I've
removed the CONTEXT_FLOATING_POINT from the ContextFlags. But it now
turned out that it prevents EH from correctly restoring non-volatile
floating point registers after a catch. Since he ContextFlags don't
contain the CONTEXT_FLOATING_POINT, the floating point registers were
not restored during the resume.

This change fixes it by removing the amd64 specific handling and always
copying the whole CONTEXT structure. It just masks off the
CONTEXT_XSTATE, as the XSTATE is stored out of the basic CONTEXT.

Close #118564

* Fix build break - CONTEXT_XSTATE exists on some targets only",30,46,537,delete scan contract annotations (issue_ref)these annotations were used by prefast plugin that analyzed contract consistency. this prefast plugin is not coming back.
dotnet/runtime,0f2bfae47682994a050bb19303983b96f32a3513,"Cleanup LowLevelList usage in GCLayout (#116316)

* Replace with bool[] in GC layout

* Cleanup empty layout input

* Cleanup _isReferenceTypeGCLayout

* Use Array.Empty",2025-06-08 01:29:44+00:00,Huo Yaoyuan,0,,,3,40,163,cleanup lowlevellist usage in gclayout (issue_ref)* replace with bool[] in gc layout* cleanup empty layout input* cleanup _isreferencetypegclayout* use array.empty
dotnet/runtime,0a1fb707fda0d7677d1e9a1c345f45fc2c52d40c,NativeAOT: Unhijack thread in sampling profiler before starting stack walk (#116409),2025-06-08 12:25:12+00:00,Filip Navara,0,,,2,7,1,nativeaot: unhijack thread in sampling profiler before starting stack walk (issue_ref)
dotnet/runtime,727eb5196b13260806eca813106522efea6b9647,Use `Unsafe.BitCast` in `System.Guid` (#116415),2025-06-08 20:45:43+00:00,xtqqczze,0,,,1,2,2,use in (issue_ref)
dotnet/runtime,201bd575880bd3ad474fda7888335a6ec7bfa76d,Delete unnecessary or condition (#116418),2025-06-08 22:37:24+00:00,Jan Kotas,0,,,1,6,8,delete unnecessary or condition (issue_ref)
dotnet/runtime,696ab04e3a0a66ccce443c0138e67074477a7893,Revert removal of embedModuleHandle and embedFieldHandle (#116036),2025-06-08 23:55:33+00:00,Egor Bogatov,1,11d3c5719b67b3c9712c26cab712ec768df65c26,"Interpreter shared generics support (#116357)

Add basic support for shared generics to the interpreter
- Handle shared generics calling convention details for the newobj, and call opcodes
- Swap over to using `getCallInfo` on the jit interface to get information about how a call should be handled
- Add new instructions to resolve a generic dictionary lookup (generic.method, generic.class, generic.this)
- Add new instructions `ldtoken.var` and `newobj.var` which can use the result of a generic dictionary lookup. These are variants on `ldtoken` and `newobj` instructions.
  - we will eventually need variants for `newarr`, `box`, `unbox.any`, `unbox`, `call.helper.pp` and `call.helper.pp2`
- Rework how call opcodes work so that it uses GetMultiCallableAddrOfCode for dispatch instead of the NativeCode on a method, and stop re-using the NativeCode field for interpreter things, and instead add a new field to `MethodDesc` for that. This made it simple to enable support for string constructors.
- Also some drive by improvements to improve diagnostics. Notably `startIp` now  points at a strongly typed struct which allows much easier examination of the interpreter stack using the debugger.

This doesn't implement all of the various forms of generic call, but it shows the basics are working",20,351,54,revert removal of embedmodulehandle and embedfieldhandle (issue_ref)
dotnet/runtime,4878886cd6194ff315da3b199081ac876cce0c75,Delete always-null unwContext (#116397),2025-06-09 01:00:10+00:00,Adeel Mujahid,0,,,4,5,128,delete always-null unwcontext (issue_ref)
dotnet/runtime,c8403e629f0166f7e629d6dfa239fd5c4f76edc8,"Delete extra layers (#116405)

* Delete extra layer of metadata APIs
* Delegate extra layer of coreclr directory caching

Co-authored-by: Aaron Robinson <arobins@microsoft.com>",2025-06-09 05:20:15+00:00,Jan Kotas,1,655ec8aae923a79d49d2d4b504c1411c71810628,"Fix ProfileEnter when called on a foreign thread (#119327)

* Fix ProfileEnter when called on a foreign thread

When ProfileEnter is called on a foreign thread that the runtime has not
seen yet, which can happen for UnmanagedCallersOnly marked methods,
it crashes in the GCX_COOP_THREAD_EXISTS(GET_THREAD()); That was left in
by accident in my change I've made a long time ago and should not be
there.
This change removes that switch, we switch to cooperative mode later in
the ProfileEnter and setup the thread for runtime before that.

Close #115617

* Make ProfileLeave look the same",37,65,611,delete extra layers (issue_ref)* delete extra layer of metadata apis* delegate extra layer of coreclr directory caching
dotnet/runtime,a388d5b62a52fff04ecd32f30f1522768af44de5,"remove x86 ICF special handling (#116388)

* remove x86 ICF special handling

* remove unused check",2025-06-09 15:50:11+00:00,Max Charlamb,0,,,1,1,34,remove x86 icf special handling (issue_ref)* remove x86 icf special handling* remove unused check
dotnet/runtime,11d3c5719b67b3c9712c26cab712ec768df65c26,"Interpreter shared generics support (#116357)

Add basic support for shared generics to the interpreter
- Handle shared generics calling convention details for the newobj, and call opcodes
- Swap over to using `getCallInfo` on the jit interface to get information about how a call should be handled
- Add new instructions to resolve a generic dictionary lookup (generic.method, generic.class, generic.this)
- Add new instructions `ldtoken.var` and `newobj.var` which can use the result of a generic dictionary lookup. These are variants on `ldtoken` and `newobj` instructions.
  - we will eventually need variants for `newarr`, `box`, `unbox.any`, `unbox`, `call.helper.pp` and `call.helper.pp2`
- Rework how call opcodes work so that it uses GetMultiCallableAddrOfCode for dispatch instead of the NativeCode on a method, and stop re-using the NativeCode field for interpreter things, and instead add a new field to `MethodDesc` for that. This made it simple to enable support for string constructors.
- Also some drive by improvements to improve diagnostics. Notably `startIp` now  points at a strongly typed struct which allows much easier examination of the interpreter stack using the debugger.

This doesn't implement all of the various forms of generic call, but it shows the basics are working",2025-06-09 16:12:06+00:00,David Wrighton,1,ec11903827fc28847d775ba17e0cd1ff56cfbc2e,"Fix exception message for InvalidCastException thrown by unboxing (#116672)

The argument order got swapped recently

Fixes #116650",17,835,228,"interpreter shared generics support (issue_ref)add basic support for shared generics to the interpreter- handle shared generics calling convention details for the newobj, and call opcodes- swap over to using on the jit interface to get information about how a call should be handled- add new instructions to resolve a generic dictionary lookup (generic.method, generic.class, generic.this)- add new instructions and which can use the result of a generic dictionary lookup. these are variants on and instructions. - we will eventually need variants for , , , , and - rework how call opcodes work so that it uses getmulticallableaddrofcode for dispatch instead of the nativecode on a method, and stop re-using the nativecode field for interpreter things, and instead add a new field to for that. this made it simple to enable support for string constructors.- also some drive by improvements to improve diagnostics. notably now points at a strongly typed struct which allows much easier examination of the interpreter stack using the debugger.this doesn't implement all of the various forms of generic call, but it shows the basics are working"
dotnet/runtime,4cfcfa75dfb3ddfe873289a7bf966ef0cc315278,"Delete MultilevelSDKLookup test class (#116396)

Multi-level lookup was disabled in 7.0 - for SDK lookup (unlike runtime lookup, which is affected by tfm), it is always disabled. I don't think tests validating that it is indeed disabled regardless of if/how the environment variable is set are still useful. Aside from SdkResolutionError, all the cases in MultilevelSDKLookup are covered in SDKLookup. This change moves that one test case and deletes the MultilevelSDKLookup test class.",2025-06-09 18:34:39+00:00,Elinor Fung,0,,,4,29,531,"delete multilevelsdklookup test class (issue_ref)multi-level lookup was disabled in 7.0 - for sdk lookup (unlike runtime lookup, which is affected by tfm), it is always disabled. i don't think tests validating that it is indeed disabled regardless of if/how the environment variable is set are still useful. aside from sdkresolutionerror, all the cases in multilevelsdklookup are covered in sdklookup. this change moves that one test case and deletes the multilevelsdklookup test class."
dotnet/runtime,b581381fcc0cdfce6a8a8a54d9edc8311af59064,"[clr-interp] Implement array support for reference and value types (#116384)

* Implement missing ref array support

* Implement CreateMultiDimArray and kArrayTypeMismatchException checks

* Remove TestArrayAddress in favor of other tests

* Fix kArrayTypeMismatchException checks",2025-06-09 21:01:01+00:00,Milos Kotlar,1,dc8dd28b073c6fbb29a3c6280b5789f9d845bd4b,"JIT/AOT to interpreter calls support (#116353)

* JIT/AOT to interpreter calls support

Until now, we only had support for calling interpreted void returning
method with no arguments by the JIT/AOT. This change enables support for
passing all possible kinds of arguments and returning all types.

It reuses the `CallStubGenerator` that was implemented for the interpreter
to native code usage and adds support for the other direction to it in
mostly trivial manner.
In addition to that, assembler routines for storing argument values to
the interpreter stack were added.
The `CallStubGenerator` generates a list of routines to copy the
arguments from CPU registers and stack to the interpreter stack.
The last one makes call to the `ExecuteInterpretedMethod` and then puts
the result into appropriate registers.
For functions that return result via a return buffer, the buffer is
passed to the `ExecuteInterpretedMethod` so that the IR opcode to return
valuetype stores it directly to the return buffer.

The ARM64 for Apple OSes is the most optimized version, as it is the
primary target where the performance matters the most. It eliminates
argument registers saving to stack on the fast path when we already have
the call stub.

* Fix m_pInterpThreadContext offset after rebase to main

* Fix m_pInterpThreadContext for more targets

* Move the CreateNativeToInterpreterCallStub to prestub

* Fix build break and add a comment

* Create stub only when interp. method called from JIT/AOT code

* Unify some asm macros

* Update src/coreclr/pal/inc/unixasmmacrosamd64.inc

* Fix OSX x64 build

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",4,491,26,[clr-interp] implement array support for reference and value types (issue_ref)* implement missing ref array support* implement createmultidimarray and karraytypemismatchexception checks* remove testarrayaddress in favor of other tests* fix karraytypemismatchexception checks
dotnet/runtime,b2a7d313c25949c0309e23c1b8ce565dd35f7730,PreHash SLH-DSA (#115509),2025-06-09 21:45:57+00:00,Pranav Senthilnathan,1,68e5dd731a50fbaa85b2015d241eaf52eb080308,Fix nullable annotations on MLKemAlgorithm and add ToString,21,1549,20,prehash slh-dsa (issue_ref)
dotnet/runtime,7bbab4f98ff8dfb7e31a7908d31ff8600104eaa1,Adjust area owners for diagnostics and type system (#116443),2025-06-09 22:38:52+00:00,Steve Pfister,0,,,2,22,19,adjust area owners for diagnostics and type system (issue_ref)
dotnet/runtime,bc6f4b0c8c4cbfb31878f350a5c6ca2efc96ff71,"Cleanup ReturnKind handling (#116194)

- Simplify computation of ReturnKind in the JIT
- Change MethodDesc::ReturnKind to be implemented for x86 only and to be only used by GC stress instrumentation.
- Change CLRToCOMMethodFrame::GcScanRoots to report the return type to the GC directly, without depending on ReturnKind
- Delete dead code

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-06-09 23:44:00+00:00,Andrew Zeng,0,,,9,73,168,"cleanup returnkind handling (issue_ref)- simplify computation of returnkind in the jit- change methoddesc::returnkind to be implemented for x86 only and to be only used by gc stress instrumentation.- change clrtocommethodframe::gcscanroots to report the return type to the gc directly, without depending on returnkind- delete dead code---------"
dotnet/runtime,7416d91328f8b8dc9fc4da5fdce090a5bb55092f,"Implement CONV_OVF_xxx in the Interpreter (#116356)

Implemented most possible forms of CONV_OVF_xxx opcodes in native C++
Moved the existing CONV_xxx opcodes that do float->int conversions into native C++ as well
Refactored uses of INTERP_INDIRECT_HELPER_TAG to use a helper to strip the tag in one place instead of duplicating the tag logic everywhere
Added new InterpOp type for possibly indirect helper pointers",2025-06-10 07:53:45+00:00,Katelyn Gadd,1,e0620bc380fa291867568e653206a9ecb8923d64,"Fix bug in interpreter finally call islands generation (#116560)

I have accidentally used a wrong link when walking the list of finally
call island basic blocks at the time we generate them. Instead of the
pNextBB that links together the basic blocks for various leave targets,
I've used the pFinallyCallIslandBB link that links the basic blocks for
the same leave target across multiple try regions.

It has surfaced in a number of coreclr tests when executed with the
interpreter.",5,654,48,implement conv_ovf_xxx in the interpreter (issue_ref)implemented most possible forms of conv_ovf_xxx opcodes in native c++moved the existing conv_xxx opcodes that do float->int conversions into native c++ as wellrefactored uses of interp_indirect_helper_tag to use a helper to strip the tag in one place instead of duplicating the tag logic everywhereadded new interpop type for possibly indirect helper pointers
dotnet/runtime,678b5a68ee9d134edc2cd05760db8138974981f6,Add JsonElement.Parse (#116363),2025-06-10 14:19:39+00:00,Stephen Toub,1,496af721753fe4f8185ee852a1949102817822ed,Fix handling of top-level nullable type schema generation. (#117503),18,144,49,add jsonelement.parse (issue_ref)
dotnet/runtime,efa2f5478fdab468211375f8d14492e3d0471cc2,Remove ArrLen propagation from earlyprop (#116410),2025-06-10 14:32:38+00:00,Egor Bogatov,0,,,2,18,84,remove arrlen propagation from earlyprop (issue_ref)
dotnet/runtime,da809372c59edb1986e0c865e098eeaf004675ef,"Use UnsafeAccessorType in System.Private.CoreLib and the BCL (#115583)

Co-authored-by: Jan Kotas <jkotas@microsoft.com>
Co-authored-by: Aaron Robinson <arobins@microsoft.com>",2025-06-10 17:32:30+00:00,Jeremy Koritzinsky,1,8dbca2cd19e608d45f13b8f193299dd2fe52d3b3,"Fix return statement in X509ResourceClient instrumentation (#122226)

The AssetDownloadStop event did not contain the downloaded payload size",21,613,534,use unsafeaccessortype in system.private.corelib and the bcl (issue_ref)
dotnet/runtime,3d310726804cac239fd6d73b3bd77dfc15dd1f61,"arm64: Rename ConditionalExtract arguments (#116216)

* arm64: Rename ConditionalExtract arguments
* Fixes #115224

* Add Compatibility Suppression

* Fix the compatibility issues

* Fix the names in ref file

---------

Co-authored-by: Kunal Pathak <Kunal.Pathak@microsoft.com>",2025-06-10 21:36:07+00:00,Jonathan Davies,1,9a6b6c8716266b258394315924983c873e91891b,"arm64: Rename CreateBreak/CreateMask args (#116255)

* arm64: Rename CreateBreak/CreateMask args
* Fixes #115225

* Remove unnecessary compatibility addition

---------

Co-authored-by: Kunal Pathak <Kunal.Pathak@microsoft.com>",3,300,300,arm64: rename conditionalextract arguments (issue_ref)* arm64: rename conditionalextract arguments* fixes issue_ref* add compatibility suppression* fix the compatibility issues* fix the names in ref file---------
dotnet/runtime,5415b7342d44af9c974905760539f198fad13682,"Additional cleanup and simplification of hwintrinsic instruction sets for xarch (#116406)

* Merge the instruction sets for SSE3, SSSE3, SSE4.1, and POPCNT into SSE4.2

* Merge the instruction sets for BMI1, BMI2, FMA, and LZCNT into AVX2

* Additional instruction set merging and cleanup

* Grouping the xarch instructions based on the target instruction sets

* Various additional cleanup to ensure tests are all passing

* Adjust the NAOT smoke tests

* Ensure the JIT/EE version guid is updated",2025-06-10 23:39:02+00:00,Tanner Gooding,1,46046a30b3b32413459a417781db9fd6dd8a1407,"JIT: Propagate GC safe point flag in `fgSplitBlockAtBeginning` (#116718)

Fixes #116704. From that failure in particular, we have the following flowgraph before loop inversion runs:

```
---------------------------------------------------------------------------------------------------------------------------------------------------------------------
BBnum BBid ref try hnd preds           weight   [IL range]   [jump]                            [EH region]        [flags]
---------------------------------------------------------------------------------------------------------------------------------------------------------------------
BB01 [0000]  1                             1    [000..004)-> BB03(0.5),BB02(0.5)     ( cond )                   i
BB02 [0001]  1       BB01                  1    [004..005)                           (return)                   i
BB03 [0002]  1       BB01                  1    [005..04E)-> BB05(1)                 (always)                   i hascall gcsafe newobj
BB04 [0003]  1       BB05                  1    [04E..063)-> BB05(1)                 (always)                   i hascall gcsafe idxlen bwd bwd-target
BB05 [0004]  2       BB03,BB04             1    [063..06A)-> BB04(0.5),BB06(0.5)     ( cond )                   i bwd bwd-src
BB06 [0005]  1       BB05                  1    [06A..0B9)                           (throw )                   i hascall gcsafe newobj
---------------------------------------------------------------------------------------------------------------------------------------------------------------------
```

`BB06` has a tail call, and is flagged as having a GC safe point. It is also the exit block of a loop headed by `BB05`. Loop inversion gives `BB06` an empty predecessor to keep the loop canonical by calling `fgSplitBlockAtBeginning`. This calls `fgSplitBlockAtEnd`, which removes the safe point flag on the new block since it initially keeps the code in the predecessor. `fgSplitBlockAtBeginning` does not reset the flag after moving the code into the new successor. Thus, we end up with the following flowgraph:

```
---------------------------------------------------------------------------------------------------------------------------------------------------------------------
BBnum BBid ref try hnd preds           weight   [IL range]   [jump]                            [EH region]        [flags]
---------------------------------------------------------------------------------------------------------------------------------------------------------------------
BB01 [0000]  1                             1    [000..004)-> BB03(0.5),BB02(0.5)     ( cond )                   i
BB02 [0001]  1       BB01                  1    [004..005)                           (return)                   i
BB03 [0002]  1       BB01                  1    [005..04E)-> BB09(0.5),BB08(0.5)     ( cond )                   i hascall gcsafe newobj
BB08 [0021]  1       BB03                  1    [???..???)-> BB04(1)                 (always)                   i hascall newobj
BB04 [0003]  2       BB04,BB08             1    [04E..06A)-> BB04(0.5),BB06(0.5)     ( cond )                   i hascall gcsafe idxlen bwd bwd-target
BB06 [0005]  1       BB04                  1    [???..???)-> BB09(1)                 (always)                   i hascall gcsafe newobj
BB09 [0022]  2       BB03,BB06             1    [06A..0B9)                           (throw )                   i hascall newobj
---------------------------------------------------------------------------------------------------------------------------------------------------------------------
```

Note the presence of the flag on `BB06`, which has no IR, and the lack of the flag on `BB09`, which contains the actual tail call.",35,1569,2767,"additional cleanup and simplification of hwintrinsic instruction sets for xarch (issue_ref)* merge the instruction sets for sse3, ssse3, sse4.1, and popcnt into sse4.2* merge the instruction sets for bmi1, bmi2, fma, and lzcnt into avx2* additional instruction set merging and cleanup* grouping the xarch instructions based on the target instruction sets* various additional cleanup to ensure tests are all passing* adjust the naot smoke tests* ensure the jit/ee version guid is updated"
dotnet/runtime,595514b2f35ad9fe7e7b7df8f83a9d754f9d9f61,"SPMI: Run 64-bit diffs on OSX.14.Arm64.Open (#116299)

This should make the 64-bit diffs quite a bit faster because:
1. The existing Windows queues are Azure managed, so they often need to
   scale up as part of running Helix work items, which adds time
2. The OSX queues are on-prem queues and always have machines ready to
   accept work. Additionally each machine is very powerful.",2025-06-11 05:51:46+00:00,Jakob Botsch Nielsen,0,,,6,48,52,"spmi: run 64-bit diffs on osx.14.arm64.open (issue_ref)this should make the 64-bit diffs quite a bit faster because:1. the existing windows queues are azure managed, so they often need to scale up as part of running helix work items, which adds time2. the osx queues are on-prem queues and always have machines ready to accept work. additionally each machine is very powerful."
dotnet/runtime,4cc1155e6af3a6f0b733b8900bf2f0d1495be7e0,"Revert ""Make mutable generic collection interfaces implement read-only collection interfaces"" and related changes (#116497)

* Revert ""Improve a few more IList/Collection => IReadOnlyList/Collection checks (#116313)""

This reverts commit ba462cea77f0d49e65e0df5e76c14f6d03119332.

* Revert ""Use throw stubs in ref assemblies for collection interfaces (#116309)""

This reverts commit 4e03c5a9546c59675aa009c22bb759349f1370b7.

* Revert ""Re-revert ""Make mutable generic collection interfaces implement read-only collection interfaces (#95830)"" (#115802)""

This reverts commit e55370e31e8095f49482a2fb54a442610eb30e71.",2025-06-11 07:54:18+00:00,Tanner Gooding,1,7551ceadda4a368b1953304ee7977caa79719870,"Fix DefaultIfEmptyIterator.TryGetElementAt returning default value for out-of-bounds indices (#119838)

* Initial plan

* Fix DefaultIfEmptyIterator.TryGetElementAt to return default when element not found

Co-authored-by: eiriktsarpalis <2813363+eiriktsarpalis@users.noreply.github.com>

* Add regression test and finalize fix for DefaultIfEmptyIterator.TryGetElementAt

Co-authored-by: eiriktsarpalis <2813363+eiriktsarpalis@users.noreply.github.com>

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: eiriktsarpalis <2813363+eiriktsarpalis@users.noreply.github.com>",42,225,640,"revert ""make mutable generic collection interfaces implement read-only collection interfaces"" and related changes (issue_ref)* revert ""improve a few more ilist/collection => ireadonlylist/collection checks (issue_ref)""this reverts commit ba462cea77f0d49e65e0df5e76c14f6d03119332.* revert ""use throw stubs in ref assemblies for collection interfaces (issue_ref)""this reverts commit 4e03c5a9546c59675aa009c22bb759349f1370b7.* revert ""re-revert ""make mutable generic collection interfaces implement read-only collection interfaces (issue_ref)"" (issue_ref)""this reverts commit e55370e31e8095f49482a2fb54a442610eb30e71."
dotnet/runtime,e0ab13df06adaebd7088c1b6701e5e8b91fee2ed,"ML-DSA+COSE (#115158)

* MLDSA+COSE

* Fix M.Bcl.Cryptography build errors after merge conflict

* address feedback (minus test unification)",2025-06-11 09:24:55+00:00,Krzysztof Wicher,1,491d96ec1ab107bd596c8f84b5196cfb290fb99e,"ML-DSA + COSE improve tests (#116543)

* Improve COSE testing for ML-DSA

* Fix Tests

* Merge ML-DSA with existing tests",34,2523,433,ml-dsa+cose (issue_ref)* mldsa+cose* fix m.bcl.cryptography build errors after merge conflict* address feedback (minus test unification)
dotnet/runtime,8bcc9e240138054b92c5378c960c9f61ee866f1d,"Revert ""Switch away from AzureLinux host docker testing temporarily (#115993)"" (#116501)

This reverts commit 2486c136212b5fdc3ef0f00f2923faa63a856308.

The limits were increased and the changes have been deployed.",2025-06-11 09:54:14+00:00,Jakob Botsch Nielsen,0,,,1,2,2,"revert ""switch away from azurelinux host docker testing temporarily (issue_ref)"" (issue_ref)this reverts commit 2486c136212b5fdc3ef0f00f2923faa63a856308.the limits were increased and the changes have been deployed."
dotnet/runtime,90236b918746148c9ae11ef4fca77fd57e388e74,"Fix reporting of foreign native exception not handled by runtime (#115750)

* Fix reporting of foreign native exception not handled by runtime

When a native exception occurs on a foreign thread, it is propagated
through managed frames and then flows into the foreign native frames and
is handled there, the runtime still reports the exception as unhandled
via AppDomain.CurrentDomain.UnhandledException event and also prints out
the unhandled exception message. Even though the process then continues
running just fine.

This change fixes the behavior so that only managed exceptions thrown by
the .NET runtime are reported as unhandled in such case. Foreign
exceptions, like e.g. C++ exceptions, are not reported as unhandled and
they are just propagated into the foreign native frames. If that
exception is not handled by the native frames, then C++ reports them as
unhandled.

Close #115654

* Update src/tests/baseservices/exceptions/exceptioninterop/ExceptionInteropNative.cpp

Co-authored-by: Jeremy Koritzinsky <jkoritzinsky@gmail.com>

* Update src/tests/baseservices/exceptions/exceptioninterop/ExceptionInteropNative.cpp

Co-authored-by: Jeremy Koritzinsky <jkoritzinsky@gmail.com>

---------

Co-authored-by: Jeremy Koritzinsky <jkoritzinsky@gmail.com>",2025-06-11 13:29:36+00:00,Jan Vorlicek,1,62fabc3fb320a7853717fe175a04284c7fc66a51,"Fix stackwalk from interpreted EH funclet (#116640)

* Fix stackwalk from interpreted EH funclet

The stack walking for GC is broken when an interpreted EH funclet was
on the stack. The reason is that call to the interpreted funclet doesn't
have a transition frame and that case was not handled properly. Also,
I have found that the ExInfo::m_csfEHClause was not being set for the
interpreted clauses at all.

This change fixes it by using the InterpreterFrame address as the
m_csfEHClause (so that it is above all the interpreter frames) and
fixing the `ExInfo::FindParentStackFrameHelper` to recognize the special
instruction pointer value that we get as a parent IP for the first
interpreted frame under an InterpreterFrame.

That special value has been zero and I have added a named constant for
it so that it is clear at the points where it is being used.

* PR feedback

* Update src/coreclr/vm/exceptionhandling.cpp

Update comment

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",3,52,3,"fix reporting of foreign native exception not handled by runtime (issue_ref)* fix reporting of foreign native exception not handled by runtimewhen a native exception occurs on a foreign thread, it is propagatedthrough managed frames and then flows into the foreign native frames andis handled there, the runtime still reports the exception as unhandledvia appdomain.currentdomain.unhandledexception event and also prints outthe unhandled exception message. even though the process then continuesrunning just fine.this change fixes the behavior so that only managed exceptions thrown bythe .net runtime are reported as unhandled in such case. foreignexceptions, like e.g. c++ exceptions, are not reported as unhandled andthey are just propagated into the foreign native frames. if thatexception is not handled by the native frames, then c++ reports them asunhandled.close issue_ref* update src/tests/baseservices/exceptions/exceptioninterop/exceptioninteropnative.cpp"
dotnet/runtime,cd1f46502e9f59e854b3b169743ba784e57188db,JIT: Ensure profile synthesis converges for trivial cases (#116502),2025-06-11 15:03:24+00:00,Aman Khalid,0,,,2,6,6,jit: ensure profile synthesis converges for trivial cases (issue_ref)
dotnet/runtime,23297beb64c4b1a777ca76d1e30410cf00382516,Propagate constants to DoNotCSE checked bounds (#116506),2025-06-11 15:16:03+00:00,Egor Bogatov,1,ad4e636ec6630213a8531f2fbd1bef6da4e17d6a,"JIT: retype more ints during constant prop (#116759)

In particular be willing to retype constant static field handles as TYP_BYREF.

Closes #116655.",1,6,1,propagate constants to donotcse checked bounds (issue_ref)
dotnet/runtime,e82789be7360c936df7553cc84213c9e829789d0,remove double -> int/uint cast helpers (#116484),2025-06-11 16:09:36+00:00,Clinton Ingram,1,530271deafe3f70badb18e971c07e1d346b7ddeb,"Fix #121066: Mark INITCLASS helpers as mutating heap to respect static constructor side-effects (#121069)

## Summary

This PR fixes issue #121066 where JIT optimizations (inlining, CSE, and
redundant branch removal) were not respecting the side-effects of
precise static constructors, leading to incorrect program behavior.

## Problem

The `CORINFO_HELP_INITCLASS` and `CORINFO_HELP_INITINSTCLASS` JIT
helpers were incorrectly marked as `isPure = true` in
`HelperCallProperties::init()`. This caused the JIT to treat these
helpers as having no side effects, allowing optimizations to eliminate
or reorder static constructor calls. However, static constructors can
have observable side effects (modifying static fields, I/O operations,
etc.) that must be preserved.

Consider this reproduction case:

```csharp
class MyPreciseInitClass<T>
{
    static MyPreciseInitClass()
    {
        preciseInitCctorsRun++;  // Side effect!
    }

    public static void TriggerCctorClass() { }
}

// With tiered compilation disabled
MyPreciseInitClass<int>.TriggerCctorClass();
// Expected: preciseInitCctorsRun == 1
// Actual: preciseInitCctorsRun == 0 (constructor was optimized away!)
```

## Changes

**src/coreclr/jit/utils.cpp**
- Removed `isPure = true` for `CORINFO_HELP_INITCLASS` and
`CORINFO_HELP_INITINSTCLASS` cases
- Added `mutatesHeap = true` to properly indicate these helpers modify
program state

**src/tests/JIT/Regression/JitBlue/Runtime_121066/**
- Added regression test that verifies static constructors are invoked
exactly once per generic instantiation
- Test validates the fix by checking that side effects (counter
increments) occur as expected

## Impact

This change ensures that the JIT compiler treats static constructor
initialization helpers as having side effects, preventing incorrect
optimizations that could eliminate or reorder these critical operations.
The performance impact should be minimal since:
1. Static constructors are already guarded by checks in most scenarios
2. The `mayRunCctor` flag was already set (indicating potential side
effects)
3. This primarily affects edge cases with aggressive optimization

Fixes #121066

> [!WARNING]
>
> <details>
> <summary>Firewall rules blocked me from connecting to one or more
addresses (expand for details)</summary>
>
> #### I tried to connect to the following addresses, but was blocked by
firewall rules:
>
> - `https://api.github.com/repos/dotnet/runtime/issues/121066`
>   - Triggering command: `curl -s REDACTED` (http block)
>
> If you need me to access, download, or install something from one of
these locations, you can either:
>
> - Configure [Actions setup
steps](https://gh.io/copilot/actions-setup-steps) to set up my
environment, which run before the firewall is enabled
> - Add the appropriate URLs or hosts to the custom allowlist in this
repository's [Copilot coding agent
settings](https://github.com/dotnet/runtime/settings/copilot/coding_agent)
(admins only)
>
> </details>

<!-- START COPILOT CODING AGENT SUFFIX -->



<details>

<summary>Original prompt</summary>

> Fix https://github.com/dotnet/runtime/issues/121066 isssue: in jit's
utils.cpp in the function HelperCallProperties::init() find
> ```cpp
>             case CORINFO_HELP_INITCLASS:
>             case CORINFO_HELP_INITINSTCLASS:
> ```
> and remove isPure = true for it and add mutatesHeap = true.
> 
> Also, add the test case for it that was reported in
https://github.com/dotnet/runtime/issues/121066 (adapt it to be xunit
test), similar to
`src/tests/JIT/Regression/JitBlue/Runtime_120792/Runtime_120792.cs` (but
with the issue id)


</details>



<!-- START COPILOT CODING AGENT TIPS -->
---

💡 You can make Copilot smarter by setting up custom instructions,
customizing its development environment and configuring Model Context
Protocol (MCP) servers. Learn more [Copilot coding agent
tips](https://gh.io/copilot-coding-agent-tips) in the docs.

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: EgorBo <523221+EgorBo@users.noreply.github.com>",18,16,121,remove double -> int/uint cast helpers (issue_ref)
dotnet/runtime,e0eea1fd356223de0a9476c44cbdc29dbf6c33d7,Disable certain stackoverflow tests (#116535),2025-06-11 16:42:31+00:00,Kunal Pathak,0,,,1,5,3,disable certain stackoverflow tests (issue_ref)
dotnet/runtime,74ac225097211dcf04ce55611a7ac3c7ebc4c655,Drop support for OpenSSL primitives on macOS,2025-06-11 17:57:24+00:00,Kevin Jones,0,,,6,20,140,drop support for openssl primitives on macos
dotnet/runtime,f1bff2a7d816cabd3acd1dd32bfb3296e10facd1,Add Strict JsonSerializerOptions (#116271),2025-06-11 18:10:37+00:00,Pranav Senthilnathan,0,,,5,105,13,add strict jsonserializeroptions (issue_ref)
dotnet/runtime,4af81ca6b76ef7de1984b940e2dfab40da89ebf3,Include symbols in sfx transport packs (#116346),2025-06-11 18:15:25+00:00,Viktor Hofer,0,,,3,10,1,include symbols in sfx transport packs (issue_ref)
dotnet/runtime,94a47f8fbbc89e7fa198314216681cf8dc90de5f,"Sign macOS binaries that aren't signed (#116476)

Contributes to https://github.com/dotnet/runtime/issues/116019

We need to sign all macOS binaries, but some binaries aren't compatible with the ""hardened runtime"" setting so we need to sign them with the alternative cert.",2025-06-11 19:26:11+00:00,Alexander Köplinger,0,,,1,2,0,"sign macos binaries that aren't signed (issue_ref)contributes to we need to sign all macos binaries, but some binaries aren't compatible with the ""hardened runtime"" setting so we need to sign them with the alternative cert."
dotnet/runtime,3787ee68d61018aba78880cc89c48466576b1de7,"Exclude tail call counts from check to prevent unnecessary EBP frame (#116413)

This is common pattern in IL stubs. The SPMI diffs are likely to be small but there's something on linux-x64.",2025-06-11 19:49:10+00:00,Filip Navara,0,,,3,20,5,exclude tail call counts from check to prevent unnecessary ebp frame (issue_ref)this is common pattern in il stubs. the spmi diffs are likely to be small but there's something on linux-x64.
dotnet/runtime,12d0321e424dbc9f1b632ef4d8650b9b0b19c9c4,"Correct some comments in Avx*.cs (#115056)

* Update Avx*.cs

* Add some remarks to Avx*.cs",2025-06-11 20:23:18+00:00,tfenise,0,,,10,144,78,correct some comments in avx*.cs (issue_ref)* update avx*.cs* add some remarks to avx*.cs
dotnet/runtime,e95303de52a7d67971c664ac44d053747bd9a6a0,"Harden `Ping_TimedOut_*` tests (#116500)

Depending on the network configuration, we can get an ICMP with `Type=Destination Unreachable, Code=Network Unreachable` from middlewares when pinging an ""unreachable"" IP. In #115358 we see this happening on Helix Mac machines, but I was able to reproduce it on an office LAN-connected Windows PC too.

This PR attempts to fix address this problem by repeating the ping tests on other ""types"" of unreachable hosts until we actually catch a timeout. (We could instead just skip the test on the first DestinationNetworkUnreachable, but then we would loose some functional coverage.)

Marking as draft until we get a few successful outerloop runs.",2025-06-11 20:28:23+00:00,Anton Firszov,1,4e454ffdd30327f9ae5bf21c085875e8d20aa5be,"Harden CancelSendPingAsync tests (#116588)

Fixes #113831.

Separate `SendPingAsync(hostname)` and `SendPingAsync(IPAddress)` test implementations:
- `SendPingAsync(hostname)`: we didn't see issues with this variant in the CI. It effectively tests if the resolution of `www.microsoft.com` is cancelled as part of the `SendPingAsync` call. Keep the existing logic in a separate method.
- `SendPingAsync(IPAddress)`: occasionally, pinging the valid IP likely resulted in replies before the cancellation could kick in on Helix Mac machines. Instead, let's ping an unreachable IP to avoid this. Since that can also sometimes result to an ICMP reply instead of a timeout, use the same trick as in #116500, repeating the test with other hosts if it happens.",2,49,35,"harden tests (issue_ref)depending on the network configuration, we can get an icmp with from middlewares when pinging an ""unreachable"" ip. in issue_ref we see this happening on helix mac machines, but i was able to reproduce it on an office lan-connected windows pc too.this pr attempts to fix address this problem by repeating the ping tests on other ""types"" of unreachable hosts until we actually catch a timeout. (we could instead just skip the test on the first destinationnetworkunreachable, but then we would loose some functional coverage.)marking as draft until we get a few successful outerloop runs."
dotnet/runtime,ffa90bf39975ed1d23cb3b94b200851a3c499cfd,"Map version for Tahoe compatibility. (#116536)

macOS Tahoe returns a compatibility version, 16, for macOS 26 unless it is built with Xcode 26's SDK.
As we did with Big Sur, this maps the compatibility version 16 to 26.

The intention is that we will be on the new SDK by the time macOS 27 rolls out. If not, then we will need to add another compatibility map, most likely.
It does not appear that iOS, tvOS, or Catalyst return compatibility numbers, so they are excluded from doing any mapping.",2025-06-11 20:28:59+00:00,Kevin Jones,0,,,1,9,6,"map version for tahoe compatibility. (issue_ref)macos tahoe returns a compatibility version, 16, for macos 26 unless it is built with xcode 26's sdk.as we did with big sur, this maps the compatibility version 16 to 26.the intention is that we will be on the new sdk by the time macos 27 rolls out. if not, then we will need to add another compatibility map, most likely.it does not appear that ios, tvos, or catalyst return compatibility numbers, so they are excluded from doing any mapping."
dotnet/runtime,d7da56a440ebc88b37505a95f59366f7f76eefaf,"Fix libhost scenarios (COM, C++/CLI, custom component host) incorrect coreclr path determination (#116504)

There is a fallback for apps with no .deps.json where the host will consider the app directory for loading coreclr. In component hosting scenarios, we do not have an app path / directory. We were incorrectly going down the path of looking for coreclr in the (empty string) app directory.

This change skips that path for libhost scenarios. It also adds checks that the paths we determine for loading coreclr, hostpolicy, and hostfxr are absolute.",2025-06-11 21:58:09+00:00,Elinor Fung,1,22ccb0563cbb79e950b8d8e2d8bed306b125e7d8,"Fix absolute path check when loading hostfxr/hostpolicy/coreclr (#116597)

On Windows, we were incorrectly only checking for <letter>: and incorrectly determining that UNC and device paths were not absolute. This updates pal::is_path_rooted to match the managed Path.IsPathRooted and adds a pal::is_path_absolute with the logic of Path.IsPartiallyQualified",9,133,6,"fix libhost scenarios (com, c++/cli, custom component host) incorrect coreclr path determination (issue_ref)there is a fallback for apps with no .deps.json where the host will consider the app directory for loading coreclr. in component hosting scenarios, we do not have an app path / directory. we were incorrectly going down the path of looking for coreclr in the (empty string) app directory.this change skips that path for libhost scenarios. it also adds checks that the paths we determine for loading coreclr, hostpolicy, and hostfxr are absolute."
dotnet/runtime,8a350553d3f1e16022c0083e830e5b8838b6d5b6,ML-KEM: Windows ephemeral implementation,2025-06-12 04:30:48+00:00,Kevin Jones,1,9703a4c056f4a5a16cea6ebf4c700690246d02eb,Fixes build to use new method name. (#116591),18,523,51,ml-kem: windows ephemeral implementation
dotnet/runtime,b49ebac33e06556804af96afebbb8f706d51a2e2,Delete unused functions in eventtrace (#116565),2025-06-12 06:38:21+00:00,Elinor Fung,0,,,2,0,352,delete unused functions in eventtrace (issue_ref)
dotnet/runtime,7ee91972e27c086d92b7d223f905cf391578b256,Add installation of brotli libraries for Android CoreCLR packs (#116529),2025-06-12 10:11:33+00:00,Milos Kotlar,0,,,1,6,0,add installation of brotli libraries for android coreclr packs (issue_ref)
dotnet/runtime,0eb2b0ac33d9f7356bf2f3c324ef5238af181f4c,ML-DSA Certificates on Windows (NCrypt support) (#116394),2025-06-12 16:43:56+00:00,Pranav Senthilnathan,1,8da0ed434aad76a607a828ab106483af245681ae,"Always tamper the signature in the data area

When tests such as System.Security.Cryptography.X509Certificates.Tests.RevocationTests.DynamicRevocationTests.RevokeEndEntityWithInvalidRevocationSignature ran on EC-DSA with secp384r1, there is a roughly 50% chance that flipping all of the bits in signature[5] will produce a signature value that is not structurally valid DER by making the first 9 bits of an INTEGER all have the same value.

OpenSSL bubbles up this error differently from ""it is structurally valid, but the signature is wrong"", which makes our tests fail.

While there is some value in making these sorts of tamper look the same on Windows and Linux, the most important tamper is ""the data was tampered with, invalidating the unchanged signature"".  That's the scenario these tests are trying to test (by making the signature wrong), so instead do the tamper at the second-to-last byte of the signature, which is always going to be in the ""data"" segment of a signature, never ""structure"" (for any known algorithm).",32,1314,81,ml-dsa certificates on windows (ncrypt support) (issue_ref)
dotnet/runtime,2fb0bc076f67ed3fcad0d7061ccb63fdbd3e29da,Tag dotnet/jit-contrib for JIT GUID changes (#116589),2025-06-12 18:03:34+00:00,Jan Kotas,0,,,1,15,0,tag dotnet/jit-contrib for jit guid changes (issue_ref)
dotnet/runtime,477d5456ef5728c240642e1bae1cb7504bcbf550,Limit JIT-EE GUID notifications to PR opened event (#116605),2025-06-12 22:03:26+00:00,Jan Kotas,0,,,1,2,0,limit jit-ee guid notifications to pr opened event (issue_ref)
dotnet/runtime,e713f13a033d4f77e9c11b0bcd7fb615b610aed1,"Implementation of ldftn and calli (#116449)

- This implements ldftn by matching the implementation in the JIT. Integration with the delegate construction path is not done, so we always go down slow path delegate creation, but it does work.
- This implementation leverages our CallStubGenerator to create stubs for calli instructions. To get the appropriate call stub to the right location, we use a new jit interface api called `GetCookieForInterpreterCalliSig` to pass the needed cookie around.
- As a bonus it is now possible to call delegates by calling the Invoke method on the delegate. We will likely want to translate that to using an INTOP_CALLI in the future, but it does work for now.

NOTE: This logic results in going through an interpreter->native->interpreter calling thunks to make interpreter to interpreter calls. We will likely want to build an optimized path which uses of NonVirtualEntry2MethodDesc or an interpreter specific form to avoid bouncing through the calling convention trampolines, but I'd like to have a fully functional system before diving into doing that sort of thing as an optimization.",2025-06-12 22:19:56+00:00,David Wrighton,1,e59010bb3402bfe31cacbb4c0d8837a958d7650f,"[clr-interp] Emit INTOP_NEWMDARR only for array ctor  (#116544)

* Emit INTOP_NEWMDARR only for array ctor and use rank as dimension count

* Fix condition for INTOP_NEWMDARR

* Update INTOP_NEWMDARR to use numArgs for dimension count

* Remove rank

* Update src/coreclr/interpreter/compiler.cpp

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Update src/coreclr/interpreter/compiler.cpp

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",32,780,192,"implementation of ldftn and calli (issue_ref)- this implements ldftn by matching the implementation in the jit. integration with the delegate construction path is not done, so we always go down slow path delegate creation, but it does work.- this implementation leverages our callstubgenerator to create stubs for calli instructions. to get the appropriate call stub to the right location, we use a new jit interface api called to pass the needed cookie around.- as a bonus it is now possible to call delegates by calling the invoke method on the delegate. we will likely want to translate that to using an intop_calli in the future, but it does work for now.note: this logic results in going through an interpreter->native->interpreter calling thunks to make interpreter to interpreter calls. we will likely want to build an optimized path which uses of nonvirtualentry2methoddesc or an interpreter specific form to avoid bouncing through the calling convention trampolines, but i'd like to have a fully functional system before diving into doing that sort of thing as an optimization."
dotnet/runtime,2f6cdcb58377d7ff2062a3eff15679aeea834751,Updated PCA of DAC cert (#116507),2025-06-12 23:54:13+00:00,Juan Hoyos,0,,,1,1,1,updated pca of dac cert (issue_ref)
dotnet/runtime,e7c1960d8ad8c01916176a69998a6490f73a7045,"Refactor MachObjectFile signature blobs (#116566)

* Refactor MachObjectFile signature blobs

- Use classes instead of structs for blobs
- Create IBlob interface for blob writing
- Remove MachObjectFile.CodeSignature
- Create IMachFileAccess to abstract reading and writing to disk

* Remove unnecessary Linq call, validate CD Create and Read methods create identical objects",2025-06-12 23:56:42+00:00,Jackson Schuster,0,,,31,1321,575,"refactor machobjectfile signature blobs (issue_ref)* refactor machobjectfile signature blobs- use classes instead of structs for blobs- create iblob interface for blob writing- remove machobjectfile.codesignature- create imachfileaccess to abstract reading and writing to disk* remove unnecessary linq call, validate cd create and read methods create identical objects"
dotnet/runtime,6f3fd75de948dc42b05ba60feae036e4aa9a9e7e,Add support for the Avx512 Compress/Expand intrinsics (#116567),2025-06-13 03:12:47+00:00,Tanner Gooding,1,ff8c9349feb575d9db25fd54792bbd48e3d060df,"Implement SVE2 ShiftLeftLogical Intrinsics (#116380)

* Implement SVE2 ShiftLeftLogicalSaturate, ShiftLeftLogicalSaturateUnsigned, ShiftLeftLogicalWideningEven, ShiftLeftLogicalWideningOdd

* Remove HW_Flag_BaseTypeFromFirstArg

* Fix emitter assembly display issue

* Formatting",32,1228,37,add support for the avx512 compress/expand intrinsics (issue_ref)
dotnet/runtime,c915ce98b200296f26e58c40e2d777d635a194c7,"Revert partial changes for `thread_local` convergence. (#116512)

* Revert partial changes in 114660

This is due to a myriad of functional and performance
issues with C++'s thread_local on various platforms.

* Create new PLATFORM_THREAD_LOCAL macro.
Replace all explicit uses of platform thread local keywords.",2025-06-13 04:25:14+00:00,Aaron Robinson,1,0c407437056cdd82e39081359df3b66db8489e10,"Generate module rundown events (#116338)

* Generate module rundown events

This is sufficient to get module information in `dotnet-gcdump collect`. The tool itself will need tweaks because it only looks at IL paths right now, but this should be all that's necessary to build on top.

* Put back GUID

* Fix linux

* More Linux fixing

* linux

* wow

* Feedback

* Maybe it works?

* Apply suggestions from code review

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Build break

* Copilot commit

Prompt: The use of mbstowcs_s is incorrect here. The input buffer is UTF-8, output is UTF-16. Replace the incorrect use of mbstowcs_s with MultiByteToWideChar.

* Update issues.targets

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",16,60,78,revert partial changes for convergence. (issue_ref)* revert partial changes in 114660this is due to a myriad of functional and performanceissues with c++'s thread_local on various platforms.* create new platform_thread_local macro.replace all explicit uses of platform thread local keywords.
dotnet/runtime,086ecfba9f48391929bdc6fa9739f0e4ae4606b0,"Revert ""Fix reporting of foreign native exception not handled by runtime (#115750)"" (#116621)

This reverts commit 90236b918746148c9ae11ef4fca77fd57e388e74.",2025-06-13 08:15:09+00:00,Tom McDonald,1,08758d8f8a024565f5fafbbfc16967d0b2c94158,"Fix caught foreign native exception handling take 2 (#116693)

* Fix reporting of foreign native exception not handled by runtime take 2

The previous fix was reverted, as it didn't take into account hardware
exceptions stemming from managed code. This has broken debugger tests.

When a native exception occurs on a foreign thread, it is propagated
through managed frames and then flows into the foreign native frames
and is handled there, the runtime still reports the exception as unhandled
via AppDomain.CurrentDomain.UnhandledException event and also prints
out the unhandled exception message. Even though the process then continues
running just fine.

This change fixes the behavior so that only managed exceptions
thrown by the .NET runtime are reported as unhandled in such case.
Foreign exceptions, like e.g. C++ exceptions, are not reported as
unhandled and they are just propagated into the foreign native
frames. If that exception is not handled by the native frames,
then C++ reports them as unhandled.

I have also added a test that fails without this fix.

Close #115654

* Fix the problem of the previous solution

Also add hardware unhandled exception test

* Update src/coreclr/vm/exceptionhandling.cpp

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",3,3,52,"revert ""fix reporting of foreign native exception not handled by runtime (issue_ref)"" (issue_ref)this reverts commit 90236b918746148c9ae11ef4fca77fd57e388e74."
dotnet/runtime,e59010bb3402bfe31cacbb4c0d8837a958d7650f,"[clr-interp] Emit INTOP_NEWMDARR only for array ctor  (#116544)

* Emit INTOP_NEWMDARR only for array ctor and use rank as dimension count

* Fix condition for INTOP_NEWMDARR

* Update INTOP_NEWMDARR to use numArgs for dimension count

* Remove rank

* Update src/coreclr/interpreter/compiler.cpp

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Update src/coreclr/interpreter/compiler.cpp

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-06-13 10:44:34+00:00,Milos Kotlar,1,3efbbe8b46d88bdc9786d7350d49c7536706136a,"Add ability to filter interpreted methods by assembly (#116569)

* Add ability to filter interpreted methods by assembly

This change adds support for assembly name to the methodset stuff so
that it can be used to select interpreted methods or methods to generate
interpreter compilation dump for.

To preserve parity, I've made the same change to the JIT's version of
the same functionality.

This change is a prerequisity for an upcoming change that enables
running coreclr tests interpreted.

* PR feedback - added docs and fixed indentation",2,10,16,[clr-interp] emit intop_newmdarr only for array ctor (issue_ref)* emit intop_newmdarr only for array ctor and use rank as dimension count* fix condition for intop_newmdarr* update intop_newmdarr to use numargs for dimension count* remove rank* update src/coreclr/interpreter/compiler.cpp
dotnet/runtime,3d2e38acd24f5216c0cf6e3c50e2221ff8e48a80,"Add option to disable particular TLS signature algorithms (#114741)

* Dirty WIP on Windows

* Linux half of the experiment

* OpenSSL configure signature algorithm WIP

* Fix windows

* Rename to EnableRsaPkcsPad

* Minor changes

* Rename in accordance to approved API shape

* Remove unintended change

* Set also client sigalgs

* Minor changes

* Fix build

* Add unit test

* Fix interaction with TLS session caching

* Fix linux build

* Fix linux filtering

* Code review feedback

* Reuse string resource

* recognize MLDSA sigalgs

* Scope tests to Windows and OSX

* Throw PNSE on unsupported platforms, add supported os annotation

* Disable tests on Windows Nano

* Fix typo

* Fix build

* fixup! Disable tests on Windows Nano",2025-06-13 10:58:14+00:00,Radek Zikmund,1,a6eb1100c1965e3e7ec6f14267e2146ac14fd3b4,"Fix typo in System.Net.Security Strings.resx (#116673)

From https://github.com/dotnet/runtime/pull/114741",19,611,57,"add option to disable particular tls signature algorithms (issue_ref)* dirty wip on windows* linux half of the experiment* openssl configure signature algorithm wip* fix windows* rename to enablersapkcspad* minor changes* rename in accordance to approved api shape* remove unintended change* set also client sigalgs* minor changes* fix build* add unit test* fix interaction with tls session caching* fix linux build* fix linux filtering* code review feedback* reuse string resource* recognize mldsa sigalgs* scope tests to windows and osx* throw pnse on unsupported platforms, add supported os annotation* disable tests on windows nano* fix typo* fix build* fixup! disable tests on windows nano"
dotnet/runtime,c0d033a7525d5f7adb7a750f693f46d5b90622de,"[main] Source code updates from dotnet/dotnet (#116583)

* [VMR] Codeflow 5415b73-5415b73

[[ commit created by automation ]]

* Update dependencies from https://github.com/dotnet/dotnet build 271417
Updated Dependencies:
System.CommandLine (Version 2.0.0-beta5.25302.103 -> 2.0.0-beta5.25311.107)
Microsoft.DotNet.Cecil (Version 0.11.5-alpha.25302.103 -> 0.11.5-alpha.25311.107)
Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport, Microsoft.DotNet.ApiCompat.Task (Version 10.0.100-preview.6.25302.103 -> 10.0.100-preview.6.25311.107)
Microsoft.DotNet.Arcade.Sdk, Microsoft.DotNet.XliffTasks, Microsoft.DotNet.Helix.Sdk, Microsoft.DotNet.GenAPI, Microsoft.DotNet.GenFacades, Microsoft.DotNet.XUnitExtensions, Microsoft.DotNet.Build.Tasks.Archives, Microsoft.DotNet.Build.Tasks.Packaging, Microsoft.DotNet.Build.Tasks.Installers, Microsoft.DotNet.Build.Tasks.Templating, Microsoft.DotNet.Build.Tasks.Workloads, Microsoft.DotNet.CodeAnalysis, Microsoft.DotNet.Build.Tasks.TargetFramework, Microsoft.DotNet.RemoteExecutor, Microsoft.DotNet.Build.Tasks.Feed, Microsoft.DotNet.SharedFramework.Sdk, Microsoft.DotNet.PackageTesting (Version 10.0.0-beta.25302.103 -> 10.0.0-beta.25311.107)
Microsoft.DotNet.XUnitAssert, Microsoft.DotNet.XUnitConsoleRunner (Version 2.9.2-beta.25302.103 -> 2.9.2-beta.25311.107)
Microsoft.NETCore.App.Ref, runtime.native.System.IO.Ports, Microsoft.NETCore.ILAsm, Microsoft.NET.Sdk.IL, System.Text.Json, System.Reflection.Metadata, System.Reflection.MetadataLoadContext (Version 10.0.0-preview.6.25302.103 -> 10.0.0-preview.6.25311.107)
Microsoft.Net.Compilers.Toolset, Microsoft.CodeAnalysis, Microsoft.CodeAnalysis.CSharp, Microsoft.CodeAnalysis.Analyzers (Version 5.0.0-1.25302.103 -> 5.0.0-1.25311.107)
Microsoft.CodeAnalysis.NetAnalyzers (Version 10.0.0-preview.25302.103 -> 10.0.0-preview.25311.107)

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-06-13 11:55:47+00:00,dotnet-maestro[bot],0,,,8,161,124,"[main] source code updates from dotnet/dotnet (issue_ref)* [vmr] codeflow 5415b73-5415b73[[ commit created by automation ]]* update dependencies from build 271417updated dependencies:system.commandline (version 2.0.0-beta5.25302.103 -> 2.0.0-beta5.25311.107)microsoft.dotnet.cecil (version 0.11.5-alpha.25302.103 -> 0.11.5-alpha.25311.107)microsoft.net.workload.emscripten.current.manifest-10.0.100.transport, microsoft.dotnet.apicompat.task (version 10.0.100-preview.6.25302.103 -> 10.0.100-preview.6.25311.107)microsoft.dotnet.arcade.sdk, microsoft.dotnet.xlifftasks, microsoft.dotnet.helix.sdk, microsoft.dotnet.genapi, microsoft.dotnet.genfacades, microsoft.dotnet.xunitextensions, microsoft.dotnet.build.tasks.archives, microsoft.dotnet.build.tasks.packaging, microsoft.dotnet.build.tasks.installers, microsoft.dotnet.build.tasks.templating, microsoft.dotnet.build.tasks.workloads, microsoft.dotnet.codeanalysis, microsoft.dotnet.build.tasks.targetframework, microsoft.dotnet.remoteexecutor, microsoft.dotnet.build.tasks.feed, microsoft.dotnet.sharedframework.sdk, microsoft.dotnet.packagetesting (version 10.0.0-beta.25302.103 -> 10.0.0-beta.25311.107)microsoft.dotnet.xunitassert, microsoft.dotnet.xunitconsolerunner (version 2.9.2-beta.25302.103 -> 2.9.2-beta.25311.107)microsoft.netcore.app.ref, runtime.native.system.io.ports, microsoft.netcore.ilasm, microsoft.net.sdk.il, system.text.json, system.reflection.metadata, system.reflection.metadataloadcontext (version 10.0.0-preview.6.25302.103 -> 10.0.0-preview.6.25311.107)microsoft.net.compilers.toolset, microsoft.codeanalysis, microsoft.codeanalysis.csharp, microsoft.codeanalysis.analyzers (version 5.0.0-1.25302.103 -> 5.0.0-1.25311.107)microsoft.codeanalysis.netanalyzers (version 10.0.0-preview.25302.103 -> 10.0.0-preview.25311.107)---------"
dotnet/runtime,3efbbe8b46d88bdc9786d7350d49c7536706136a,"Add ability to filter interpreted methods by assembly (#116569)

* Add ability to filter interpreted methods by assembly

This change adds support for assembly name to the methodset stuff so
that it can be used to select interpreted methods or methods to generate
interpreter compilation dump for.

To preserve parity, I've made the same change to the JIT's version of
the same functionality.

This change is a prerequisity for an upcoming change that enables
running coreclr tests interpreted.

* PR feedback - added docs and fixed indentation",2025-06-13 13:04:39+00:00,Jan Vorlicek,1,7baa054334c3307652df3ae375d800dc17b1e39f,"Fix EmitCall in the interpreter compiler (#116654)

* Fix EmitCall in the interpreter compiler

There are two issues there:
* The token kinds passed to the ResolveToken for NewObj and Method are
  flipped
* The doCallInsteadOfNew is set for non-constructor methods too,
  resulting in overriding the return type to InterpTypeO

* Fix missing parents to ensure correct precendence

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",10,71,15,"add ability to filter interpreted methods by assembly (issue_ref)* add ability to filter interpreted methods by assemblythis change adds support for assembly name to the methodset stuff sothat it can be used to select interpreted methods or methods to generateinterpreter compilation dump for.to preserve parity, i've made the same change to the jit's version ofthe same functionality.this change is a prerequisity for an upcoming change that enablesrunning coreclr tests interpreted.* pr feedback - added docs and fixed indentation"
dotnet/runtime,8a2e997e6f84d09c7dce8f0f57f8777c89ebbf01,Copy integer registers on AMD64 architecture for debugger stackwalking (#116617),2025-06-13 13:53:34+00:00,Tom McDonald,0,,,1,5,1,copy integer registers on amd64 architecture for debugger stackwalking (issue_ref)
dotnet/runtime,e3662558724b9f302b358ea2f39fd3ac0d25adac,"arm64: Add InterleavingXorEvenOdd & InterleavingXorOddEven (#116525)

* arm64: Add InterleavingXorEvenOdd & InterleavingXorOddEven

* Implements #94020

* Remove duplicate functions

* Add RWM flag",2025-06-13 14:24:53+00:00,Jonathan Davies,1,9fe86ca2beebd1b5878110d310e068accd6050a1,"Arm64 SVE: Optimise zero/allbits vectors the same as masks (#115566)

* Arm64 SVE: Better optimise zero/allbits vectors

Fixes #114443

* IsVectorZero() should allow for all zero vectors and false masks that have been converted to vectors.
* IsVectorAllBitsSet() should allow for all bits set vectors and true masks that have been converted to vectors.
* IsMaskZero() should all for false masks and all zero vectors that have been converted to masks.
* IsMaskAllBitsSet() should allow for true masks and all bit set vectors that have been converted to masks.

In addition:
* Fix up all the errors caused by these changes.
* Add a bunch of asmcheck tests

* Remove all jit changes

* Import constant vector 0 for createfalsemask

* fix up tests

* Only allow zero op3 contains for embedded ops

* fix up tests

* fix formatting

* Import constant vector all bits set for createtruemask

* Fix up tests

* fix type of true mask variants

* Allow common code to create the convert for CreateTrueMask*

* Fix x86 build

* unique test names in templates

* simpler lowering

* Don't remove embedded ops that may throw

* Clear embOp when clearing contained

* Import masks as gtNewVconNode

* Remove pRetType

* Add nullptr check

* Add AOT TODO

* Add codegen support for CNS_MASK

* Add const vector folding for Arm64

* Add mask patterns

* Move tests to SVE

* Add isTrueMask()

Change-Id: I456498f06d454e6ed57ce935e195b721e2c6d225

* fix tests

Change-Id: I3d74a7292e2c880fcaba215dc1fb58369e4ad141

* fix formatting

* Add EvaluateSimdPatternToMask

* import vectors not masks

* rename to EvaluateSimdMaskToPattern

* Add unreached

* formatting

* fix IsTrueMask

* remove emb op fix

* fix morphing errors

* Remove NI_Sve_CreateFalseMaskAll

* rename TrueMaskAll to ConversionTrueMask and only use as such

* remove gtNewSimdCnsVecTrueMaskPattern

* Switch gtNewSimdAllTrueMaskNode to create constant mask

* fix tests

* FEATURE_HW_INTRINSICS checks

* formatting

* fix gtFoldExprConvertVecCnsToMask call

* move gtFoldExprConvertVecCnsToMask call

* Allow for masks being input to mask nodes

* use IsFalseMask everywhere

* Add simdSize to GenTreeMskCon

* Use simdSize in GenTreeMskCon

* cndsel op3 is a vector

* use unsigned instead of unsigned char

* Fix HasDisasmCheck

* Hardcode mask simd size to 16

* formatting

* remove TODO

* Use simdBaseType for IsTrueMask arg

* Add asserts to gtFoldExprHWIntrinsic

* Simplify IsFalseMask

* inline IsTrueMask/IsFalseMask

* Use LABELEDDISPTREERANGE

* Add header to gtFoldExprConvertVecCnsToMask

* Remove FEATURE_HW_INTRINSICS around IsTrueMask/IsFalseMask

* turn off fgMorphTryUseAllMaskVariant",6,249,0,arm64: add interleavingxorevenodd & interleavingxoroddeven (issue_ref)* arm64: add interleavingxorevenodd & interleavingxoroddeven* implements issue_ref* remove duplicate functions* add rwm flag
dotnet/runtime,ddcfd234ceb0fe61689deaa3a6a783c1944e6b77,Partial revert of #111408 (#116618),2025-06-13 14:26:15+00:00,Tom McDonald,1,bca7bfa91efaf6e7911a6b0ba6071e4aef0ee7b4,"Fix thread abort issue with funceval (#118354)

There is a problem with threadabort in funceval in case there is no
managed frame on the stack between the abortion point and the
`FuncEvalFrame`. That can happen e.g. when invoking a static method via
funceval for a type with static constructor that was not invoked yet and
takes a long time to complete.

The problem is caused by the fact that when EH is called to propagate
the ThreadAbortException, it starts at the first managed frame and so it
skips the try/catch in the funceval native code.

This change fixes it by using `RaiseTheExceptionInternalOnly` to
raise the `ThreadAbortException` in the `Thread::HandleThreadAbort`. The
`Thread::HandleThreadAbort` is always called by native code that has a
native catch or (on Windows) ends up calling the `ProcessCLRException`.

I have originally made the change to call the `DispatchManagedException`
from the `Thread::HandleThreadAbort`, but this issue shows it is
problematic.

I have verified that the repro provided by @eterekhin in the issue
report no longer causes the process to crash with failfast, but
reports the funceval as timed out as expected.

Close #118015",6,11,82,partial revert of issue_ref (issue_ref)
dotnet/runtime,774782555edf18aa18a134480c122df18099d04a,Add deduplication info to OneFuzz fuzzing work items (#116615),2025-06-13 15:33:14+00:00,Miha Zupan,0,,,1,19,6,add deduplication info to onefuzz fuzzing work items (issue_ref)
dotnet/runtime,6df065d5668e74dbc52427e36713a72677d62092,[browser] Bundler friendly build output (#116300),2025-06-13 16:14:09+00:00,Marek Fišera,1,5922fd30058ab4596920f56dc8f1d7ab549959d2,[browser] fix JSExport in lazy loaded assembly (#117890),35,905,390,[browser] bundler friendly build output (issue_ref)
dotnet/runtime,a1eb8559d73217d02a5af5ff386f01b2077dc69a,RangeCheck: Don't create invalid ranges (#113935),2025-06-13 16:19:33+00:00,Egor Bogatov,0,,,2,67,5,rangecheck: don't create invalid ranges (issue_ref)
dotnet/runtime,83ffb89afaf1b3eb0a2557fde76faffb00f1ef0f,"[main] Update dependencies from dotnet/hotreload-utils, dotnet/icu, dotnet/runtime-assets (#115709)

* Update dependencies from https://github.com/dotnet/hotreload-utils build 20250515.3

Microsoft.DotNet.HotReload.Utils.Generator.BuildTool
 From Version 10.0.0-alpha.0.25255.1 -> To Version 10.0.0-alpha.0.25265.3

* Update dependencies from https://github.com/dotnet/icu build 20250518.1

Microsoft.NETCore.Runtime.ICU.Transport
 From Version 10.0.0-preview.5.25261.1 -> To Version 10.0.0-preview.5.25268.1

* Update dependencies from https://github.com/dotnet/runtime-assets build 20250519.1

Microsoft.DotNet.CilStrip.Sources , Microsoft.NET.HostModel.TestData , System.ComponentModel.TypeConverter.TestData , System.Data.Common.TestData , System.Drawing.Common.TestData , System.Formats.Tar.TestData , System.IO.Compression.TestData , System.IO.Packaging.TestData , System.Net.TestData , System.Private.Runtime.UnicodeData , System.Runtime.Numerics.TestData , System.Runtime.TimeZoneData , System.Security.Cryptography.X509Certificates.TestData , System.Text.RegularExpressions.TestData , System.Windows.Extensions.TestData
 From Version 10.0.0-beta.25262.1 -> To Version 10.0.0-beta.25269.1

* Update dependencies from https://github.com/dotnet/icu build 20250520.1

Microsoft.NETCore.Runtime.ICU.Transport
 From Version 10.0.0-preview.5.25261.1 -> To Version 10.0.0-preview.6.25270.1

* Update dependencies from https://github.com/dotnet/hotreload-utils build 20250519.1

Microsoft.DotNet.HotReload.Utils.Generator.BuildTool
 From Version 10.0.0-alpha.0.25255.1 -> To Version 10.0.0-alpha.0.25269.1

* Update dependencies from https://github.com/dotnet/runtime-assets build 20250526.1

Microsoft.DotNet.CilStrip.Sources , Microsoft.NET.HostModel.TestData , System.ComponentModel.TypeConverter.TestData , System.Data.Common.TestData , System.Drawing.Common.TestData , System.Formats.Tar.TestData , System.IO.Compression.TestData , System.IO.Packaging.TestData , System.Net.TestData , System.Private.Runtime.UnicodeData , System.Runtime.Numerics.TestData , System.Runtime.TimeZoneData , System.Security.Cryptography.X509Certificates.TestData , System.Text.RegularExpressions.TestData , System.Windows.Extensions.TestData
 From Version 10.0.0-beta.25262.1 -> To Version 10.0.0-beta.25276.1

* Update dependencies from https://github.com/dotnet/hotreload-utils build 20250526.1

Microsoft.DotNet.HotReload.Utils.Generator.BuildTool
 From Version 10.0.0-alpha.0.25255.1 -> To Version 10.0.0-alpha.0.25276.1

* Update dependencies from https://github.com/dotnet/icu build 20250602.1

Microsoft.NETCore.Runtime.ICU.Transport
 From Version 10.0.0-preview.5.25261.1 -> To Version 10.0.0-preview.6.25302.1

* Update dependencies from https://github.com/dotnet/runtime-assets build 20250602.1

Microsoft.DotNet.CilStrip.Sources , Microsoft.NET.HostModel.TestData , System.ComponentModel.TypeConverter.TestData , System.Data.Common.TestData , System.Drawing.Common.TestData , System.Formats.Tar.TestData , System.IO.Compression.TestData , System.IO.Packaging.TestData , System.Net.TestData , System.Private.Runtime.UnicodeData , System.Runtime.Numerics.TestData , System.Runtime.TimeZoneData , System.Security.Cryptography.X509Certificates.TestData , System.Text.RegularExpressions.TestData , System.Windows.Extensions.TestData
 From Version 10.0.0-beta.25262.1 -> To Version 10.0.0-beta.25302.1

* Update dependencies from https://github.com/dotnet/hotreload-utils build 20250602.2

Microsoft.DotNet.HotReload.Utils.Generator.BuildTool
 From Version 10.0.0-alpha.0.25255.1 -> To Version 10.0.0-alpha.0.25302.2

* Update dependencies from https://github.com/dotnet/runtime-assets build 20250610.1

Microsoft.DotNet.CilStrip.Sources , Microsoft.NET.HostModel.TestData , System.ComponentModel.TypeConverter.TestData , System.Data.Common.TestData , System.Drawing.Common.TestData , System.Formats.Tar.TestData , System.IO.Compression.TestData , System.IO.Packaging.TestData , System.Net.TestData , System.Private.Runtime.UnicodeData , System.Runtime.Numerics.TestData , System.Runtime.TimeZoneData , System.Security.Cryptography.X509Certificates.TestData , System.Text.RegularExpressions.TestData , System.Windows.Extensions.TestData
 From Version 10.0.0-beta.25262.1 -> To Version 10.0.0-beta.25310.1

* Disable failing test

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Alexander Köplinger <alex.koeplinger@outlook.com>",2025-06-13 16:37:04+00:00,dotnet-maestro[bot],0,,,3,52,51,"[main] update dependencies from dotnet/hotreload-utils, dotnet/icu, dotnet/runtime-assets (issue_ref)* update dependencies from build 20250515.3microsoft.dotnet.hotreload.utils.generator.buildtool from version 10.0.0-alpha.0.25255.1 -> to version 10.0.0-alpha.0.25265.3* update dependencies from build 20250518.1microsoft.netcore.runtime.icu.transport from version 10.0.0-preview.5.25261.1 -> to version 10.0.0-preview.5.25268.1* update dependencies from build 20250519.1microsoft.dotnet.cilstrip.sources , microsoft.net.hostmodel.testdata , system.componentmodel.typeconverter.testdata , system.data.common.testdata , system.drawing.common.testdata , system.formats.tar.testdata , system.io.compression.testdata , system.io.packaging.testdata , system.net.testdata , system.private.runtime.unicodedata , system.runtime.numerics.testdata , system.runtime.timezonedata , system.security.cryptography.x509certificates.testdata , system.text.regularexpressions.testdata , system.windows.extensions.testdata from version 10.0.0-beta.25262.1 -> to version 10.0.0-beta.25269.1* update dependencies from build 20250520.1microsoft.netcore.runtime.icu.transport from version 10.0.0-preview.5.25261.1 -> to version 10.0.0-preview.6.25270.1* update dependencies from build 20250519.1microsoft.dotnet.hotreload.utils.generator.buildtool from version 10.0.0-alpha.0.25255.1 -> to version 10.0.0-alpha.0.25269.1* update dependencies from build 20250526.1microsoft.dotnet.cilstrip.sources , microsoft.net.hostmodel.testdata , system.componentmodel.typeconverter.testdata , system.data.common.testdata , system.drawing.common.testdata , system.formats.tar.testdata , system.io.compression.testdata , system.io.packaging.testdata , system.net.testdata , system.private.runtime.unicodedata , system.runtime.numerics.testdata , system.runtime.timezonedata , system.security.cryptography.x509certificates.testdata , system.text.regularexpressions.testdata , system.windows.extensions.testdata from version 10.0.0-beta.25262.1 -> to version 10.0.0-beta.25276.1* update dependencies from build 20250526.1microsoft.dotnet.hotreload.utils.generator.buildtool from version 10.0.0-alpha.0.25255.1 -> to version 10.0.0-alpha.0.25276.1* update dependencies from build 20250602.1microsoft.netcore.runtime.icu.transport from version 10.0.0-preview.5.25261.1 -> to version 10.0.0-preview.6.25302.1* update dependencies from build 20250602.1microsoft.dotnet.cilstrip.sources , microsoft.net.hostmodel.testdata , system.componentmodel.typeconverter.testdata , system.data.common.testdata , system.drawing.common.testdata , system.formats.tar.testdata , system.io.compression.testdata , system.io.packaging.testdata , system.net.testdata , system.private.runtime.unicodedata , system.runtime.numerics.testdata , system.runtime.timezonedata , system.security.cryptography.x509certificates.testdata , system.text.regularexpressions.testdata , system.windows.extensions.testdata from version 10.0.0-beta.25262.1 -> to version 10.0.0-beta.25302.1* update dependencies from build 20250602.2microsoft.dotnet.hotreload.utils.generator.buildtool from version 10.0.0-alpha.0.25255.1 -> to version 10.0.0-alpha.0.25302.2* update dependencies from build 20250610.1microsoft.dotnet.cilstrip.sources , microsoft.net.hostmodel.testdata , system.componentmodel.typeconverter.testdata , system.data.common.testdata , system.drawing.common.testdata , system.formats.tar.testdata , system.io.compression.testdata , system.io.packaging.testdata , system.net.testdata , system.private.runtime.unicodedata , system.runtime.numerics.testdata , system.runtime.timezonedata , system.security.cryptography.x509certificates.testdata , system.text.regularexpressions.testdata , system.windows.extensions.testdata from version 10.0.0-beta.25262.1 -> to version 10.0.0-beta.25310.1* disable failing test---------"
dotnet/runtime,2c986c8ff85f58dfb3d0812879686897cd7a21c5,SignedCms add tests and reduce allocations (#116400),2025-06-13 17:00:19+00:00,Pranav Senthilnathan,0,,,2,144,27,signedcms add tests and reduce allocations (issue_ref)
dotnet/runtime,462328955071b330946c1ed997f59b719a9410fd,"getHelperFtn support for getting CORINFO_METHOD_HANDLE (#116603)

* getHelperFtn support for getting CORINFO_METHOD_HANDLE
- If there is one associated, we will get the method handle. This is an optional parameter, as is the logic to get the existing result.
- This will be used in the interpreter to generate different bytecode that knows about calling managed methods when needed
- There is also some prior interest from the JIT team about using such an api, but it didn't quite get in. See PR #110267. This PR takes the comment from @jkotas into account to adjust the signature of the method to be something which is simpler and easier to understand",2025-06-13 17:42:23+00:00,David Wrighton,1,15a290ad5fea2e5d9c15f712959d139f199d1e04,[LoongArch64] Adjust the order of genPopCalleeSavedRegisters() and instGen_Set_Reg_To_Imm() in Epilog to fix the GC interruptible range. (#117305),31,335,222,"gethelperftn support for getting corinfo_method_handle (issue_ref)* gethelperftn support for getting corinfo_method_handle- if there is one associated, we will get the method handle. this is an optional parameter, as is the logic to get the existing result.- this will be used in the interpreter to generate different bytecode that knows about calling managed methods when needed- there is also some prior interest from the jit team about using such an api, but it didn't quite get in. see pr issue_ref. this pr takes the comment from @jkotas into account to adjust the signature of the method to be something which is simpler and easier to understand"
dotnet/runtime,842c98b9cbc1a890e25aa5cbfa6428ec3d092286,"SLH-DSA cleanup comments, SPKI formatting and tests (#116452)",2025-06-13 19:24:46+00:00,Pranav Senthilnathan,0,,,4,96,55,"slh-dsa cleanup comments, spki formatting and tests (issue_ref)"
dotnet/runtime,2a91d5b8c488a7cb44f2ef9da039a211ae429259,ML-DSA: Add BCrypt support in Microsoft.Bcl.Cryptography (#116616),2025-06-13 21:14:26+00:00,Pranav Senthilnathan,0,,,8,110,41,ml-dsa: add bcrypt support in microsoft.bcl.cryptography (issue_ref)
dotnet/runtime,d3e2f5e13aac894737a90ba8494ad57465ba639f,"JIT: Exclude `BB_UNITY_WEIGHT` scaling from `BasicBlock::isBBWeightCold` (#116548)

BB_COLD_WEIGHT is currently 0.01, suggesting blocks that execute less than 1% of the time on average should be considered cold by block layout. However, BasicBlock::isBBWeightCold compares the block's normalized weight (with BB_UNITY_WEIGHT scaling) against BB_COLD_WEIGHT, so the actual cutoff for cold blocks is currently 0.01%. This change removes the BB_UNITY_WEIGHT scaling to get the intended behavior.",2025-06-13 21:53:16+00:00,Aman Khalid,0,,,1,1,1,"jit: exclude scaling from (issue_ref)bb_cold_weight is currently 0.01, suggesting blocks that execute less than 1% of the time on average should be considered cold by block layout. however, basicblock::isbbweightcold compares the block's normalized weight (with bb_unity_weight scaling) against bb_cold_weight, so the actual cutoff for cold blocks is currently 0.01%. this change removes the bb_unity_weight scaling to get the intended behavior."
dotnet/runtime,041fa1d435069a4314c0107c576f2154366645f4,Don't allow inlining the NativeAOT-only unsafe accessor (#116646),2025-06-13 21:57:57+00:00,Jeremy Koritzinsky,0,,,3,12,11,don't allow inlining the nativeaot-only unsafe accessor (issue_ref)
dotnet/runtime,1dd10350bbbfa5850709179df7a0ae70601adf28,"Remove ""Host Breakable"" lock concept (#116611)",2025-06-13 21:58:39+00:00,Jeremy Koritzinsky,1,5ebfca2bb9b9c33e4a6e4db0ed2d11591f70d2b6,"Fix Thread::IsAddressInStack for interpreter (#116818)

* Fix Thread::IsAddressInStack for interpreter

The check is used at several places to verify that e.g.
`StringHandleOnStack` is really on stack. It needs to be updated to take
the interpreter stack into account tooo.

* Update src/coreclr/vm/threads.cpp

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>

* Fix interpreter stack comparison

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",17,51,246,"remove ""host breakable"" lock concept (issue_ref)"
dotnet/runtime,3cabc2180c2a1707ba535e5d6911d53d58731dd2,"BypassReadyToRun when initializing ProbabilisticMap (#115811)

* BypassReadyToRun when initializing ProbabilisticMap

* Add the using

* Move the attribute from CoreLib to CoreLib",2025-06-14 03:29:33+00:00,Miha Zupan,1,32d3dc74c82fe72de030a70081ea5731fd449acc,"Fix building coreclr SPC inside VS (#116925)

* Fix building coreclr SPC inside VS

- Use the correct hook points for illink targets (CoreCompileDependsOn)
- Move target imports into a D.B.targets file as inside the project file
  is too early to override properties.
- Update targetingpacks.targets to not throw error in design time build
- Remove unnecessary target from S.P.CoreLib.csproj

* nit: add empty new line",4,7,1,bypassreadytorun when initializing probabilisticmap (issue_ref)* bypassreadytorun when initializing probabilisticmap* add the using* move the attribute from corelib to corelib
dotnet/runtime,33ce341cd9e83fb8da17e5a71104c23593cef209,"Improve handling of dynamic types in BulkType events (#116629)

Dynamically allocated types (e.g. result of `MakeGenericType`) don't have debug information associated with them so we can't really reconstruct their names from PDB. However, we know the canonical form of the type and that one does have debug info. Emit RVA of the canonical form instead a non-sensical number.

Consumers can still distinguish this is a different thing using the `TypeID` field (that is still the MethodTable pointer). The canonical form is only used for `TypeNameID`, which is RVA in native AOT case and definition token in the JIT case. The consumer can quickly see that `ModuleID + TypeNameID != TypeID`.

We could generate enough information to fully reconstruct the type name because the event can actually carry composition information, but that support was deleted in #94673 on native AOT side and it's currently not consumed by any tools I know of. It can be done later; Project N went to retirement with not even having the canonical forms in traces.",2025-06-14 10:32:44+00:00,Michal Strehovský,0,,,3,111,2,"improve handling of dynamic types in bulktype events (issue_ref)dynamically allocated types (e.g. result of ) don't have debug information associated with them so we can't really reconstruct their names from pdb. however, we know the canonical form of the type and that one does have debug info. emit rva of the canonical form instead a non-sensical number.consumers can still distinguish this is a different thing using the field (that is still the methodtable pointer). the canonical form is only used for , which is rva in native aot case and definition token in the jit case. the consumer can quickly see that .we could generate enough information to fully reconstruct the type name because the event can actually carry composition information, but that support was deleted in issue_ref on native aot side and it's currently not consumed by any tools i know of. it can be done later; project n went to retirement with not even having the canonical forms in traces."
dotnet/runtime,960e063430c26e5dc48cd4395e8f092fa6ba98a0,"Add {Async}Enumerable.{Infinite}Sequence (#116538)

* Add Enumerable.InfiniteSequence

* Make RangeIterator generic

* Add {Async}Enumerable.Sequence",2025-06-14 13:46:36+00:00,Stephen Toub,0,,,22,1454,236,add {async}enumerable.{infinite}sequence (issue_ref)* add enumerable.infinitesequence* make rangeiterator generic* add {async}enumerable.sequence
dotnet/runtime,861111d39833924e578a25d3a07b430ad6fbf699,Remove the code pitching feature. (#116662),2025-06-14 15:22:29+00:00,Aaron Robinson,1,83a0105be3c2f987dddffa8f71b7557c25df3a2d,"Avoid populating shared patch bypass buffer after initial creation (#117514)

* Avoid populating shared patch bypass buffer after initial creation

* Assert m_pSharedPatchBypassBuffer is NULL in CreateSharedPatchBypassBuffer

* Centralize shared bypass patch buffer creation

* Move debugger lock to DebuggerPatchSkip ctor

* Update comment in controller.cpp

Co-authored-by: Noah Falk <noahfalk@users.noreply.github.com>

* Refactor shared patch buffer handling in DebuggerControllerPatch.
Encapsulate instruction attribute into SharedBypasBuffer

---------

Co-authored-by: Noah Falk <noahfalk@users.noreply.github.com>",16,6,659,remove the code pitching feature. (issue_ref)
dotnet/runtime,b146d7512ce67051e127ab48dc2d4f65d30e818f,JIT: Move loop inversion to after loop recognition (#115850),2025-06-14 17:22:46+00:00,Aman Khalid,1,302a6438b65bcec38740a9fb38e61db80d1f7b23,"JIT: Allow liveness to remove some nodes with contained side effects (#116819)

Contained operands with side effects can usually be handled by clearing
their containment status. This is what we did before
3091730fe7b1936e4d6a4a934e88dd008d5c63de which changed the DCE to skip
nodes with contained side effects. However, the only case that does not
support its own standalone codegen is currently embedded mask ops, so
switch to check more specifically for this case.

This fixes a case where after removing a call node we could end up with
a unused `FIELD_LIST` with a contained IND node, and also fixes the
regressions seen because of 3091730fe7b1936e4d6a4a934e88dd008d5c63de.",5,36,91,jit: move loop inversion to after loop recognition (issue_ref)
dotnet/runtime,9ed11b9729f17813247a8bebd39873c32305fc7e,"Tensor<T> select. Iteration along dimensions (#113697)

* base code in place

* enum tests

* Update to match the approved API refinements

* Update the suppression file

* Update reference assembly and suppressions

---------

Co-authored-by: Tanner Gooding <tagoo@outlook.com>
Co-authored-by: Eric StJohn <ericstj@microsoft.com>",2025-06-14 21:46:56+00:00,Michael Sharp,1,7ba3876865539638563d4564d74f02a94e2641d1,"Fix the formatting of the tensor ToString functions (#118750)

* Fix the formatting of the tensor ToString functions

* Fix the compat suppressions",18,924,397,tensor<t> select. iteration along dimensions (issue_ref)* base code in place* enum tests* update to match the approved api refinements* update the suppression file* update reference assembly and suppressions---------
dotnet/runtime,e2bd63be74cce4e16e15217ccd3dd9cd03f9587e,Include the frame register when copying arm32 debugger stackwalk contexts (#116663),2025-06-16 04:50:19+00:00,Tom McDonald,0,,,1,3,2,include the frame register when copying arm32 debugger stackwalk contexts (issue_ref)
dotnet/runtime,179473d3c8a1012b036ad732d02804b062923e8d,Skip SSL key log test for OpenSSL 3.5+ (#116474),2025-06-16 08:32:53+00:00,Roman Konecny,1,6a4b7e3b1eb06d7c4782f692e617555d3fe944a6,"Change HttpClient/SslStream default certificate revocation check mode to Online (#116098)

* Change default CertificateRevocationMode to Online

* Change in WinHttpHandler

* Fix Tests

* fixup! Change in WinHttpHandler

* Make sure RevocationResponder is alive during tests

* Fix SMTP test compilation

* fixup! Fix Tests

* fixup! Fix Tests

* Add RemoteExecutor tests

* AppContextSwitch also covers WinHttpHandler

* fixup! AppContextSwitch also covers WinHttpHandler

* Update src/libraries/Common/tests/System/Net/Configuration.Certificates.Dynamic.cs

* Update src/libraries/Common/tests/System/Net/Configuration.Certificates.Dynamic.cs",1,8,0,skip ssl key log test for openssl 3.5+ (issue_ref)
dotnet/runtime,6a4b7e3b1eb06d7c4782f692e617555d3fe944a6,"Change HttpClient/SslStream default certificate revocation check mode to Online (#116098)

* Change default CertificateRevocationMode to Online

* Change in WinHttpHandler

* Fix Tests

* fixup! Change in WinHttpHandler

* Make sure RevocationResponder is alive during tests

* Fix SMTP test compilation

* fixup! Fix Tests

* fixup! Fix Tests

* Add RemoteExecutor tests

* AppContextSwitch also covers WinHttpHandler

* fixup! AppContextSwitch also covers WinHttpHandler

* Update src/libraries/Common/tests/System/Net/Configuration.Certificates.Dynamic.cs

* Update src/libraries/Common/tests/System/Net/Configuration.Certificates.Dynamic.cs",2025-06-16 10:12:59+00:00,Radek Zikmund,1,901395a1cb00ea01aa264f8f71cf14de271034e0,"Properly dispose intermediate certificates in SslStream (#117667)

* Dispose intermediate certs from internally created SslStreamCertificateContext

* Dispose intermediates received over the wire

* Release specific platform resources on linux as well

* Fix build

* Dispose ChainElement certificates in SslStreamCertificateContext.Windows build.

* Assert in tests that certificates are not disposed

* Fix Duplicate

* Check against ExtraStore and CustomTrastStore disposal

* Fix crash",23,454,430,change httpclient/sslstream default certificate revocation check mode to online (issue_ref)* change default certificaterevocationmode to online* change in winhttphandler* fix tests* fixup! change in winhttphandler* make sure revocationresponder is alive during tests* fix smtp test compilation* fixup! fix tests* fixup! fix tests* add remoteexecutor tests* appcontextswitch also covers winhttphandler* fixup! appcontextswitch also covers winhttphandler* update src/libraries/common/tests/system/net/configuration.certificates.dynamic.cs* update src/libraries/common/tests/system/net/configuration.certificates.dynamic.cs
dotnet/runtime,8c22d9e0196cc686c47a419931378d529bacec2c,"Add option to run coreclr tests using interpreter (#116570)

This change adds support for running tests using interpreter to the
generated .cmd files of the tests. It also adds a command line option to
the src/tests/run.{cmd|sh} that makes the test infrastructure to run the
tests using the interpreter.",2025-06-16 11:05:23+00:00,Jan Vorlicek,0,,,5,36,0,add option to run coreclr tests using interpreter (issue_ref)this change adds support for running tests using interpreter to thegenerated .cmd files of the tests. it also adds a command line option tothe src/tests/run.{cmd|sh} that makes the test infrastructure to run thetests using the interpreter.
dotnet/runtime,a7bd51e9805f5be32d2b2ca13545bb101c399490,"Avoid CORINFO_..._HANDLEs in JIT helper signatures (#116675)

CORINFO_..._HANDLEs are meant to be JIT/EE interface abstraction. Using them in JIT helper signatures causes confusion.",2025-06-16 12:12:26+00:00,Jan Kotas,0,,,6,42,77,avoid corinfo_..._handles in jit helper signatures (issue_ref)corinfo_..._handles are meant to be jit/ee interface abstraction. using them in jit helper signatures causes confusion.
dotnet/runtime,f8537b2406dac08d470a8a3be411227099b45ddf,"Document important nuances about Dictionary/HashSet (#112760)

Add notes on the implementation and behavior of Dictionary and HashSet",2025-06-16 14:46:15+00:00,Katelyn Gadd,0,,,1,56,0,document important nuances about dictionary/hashset (issue_ref)add notes on the implementation and behavior of dictionary and hashset
dotnet/runtime,528b402ed71ea5ab25ffa9a770c1889c4633018c,Update NetCoreAppLibrary.props (#116602),2025-06-16 15:35:13+00:00,Mackinnon Buck,1,3f1943e9dd26b06a8bf56e0143ca910451e0b9b7,"Include Pkcs (net10.0 & -windows) in aspnetcore transport pack (#117173)

Fixes https://github.com/dotnet/runtime/issues/117146",1,1,0,update netcoreapplibrary.props (issue_ref)
dotnet/runtime,dc580c18effe5914e91f00ace52e0fc1985b1487,"Remove readdir_r entirely and handle filenames > 255 bytes (#116639)

* Increase d_name size

* Handle filenames that wouldn't fit in a 256 decoding buffer

* Remove readdir_r

* Address feedback

* Apply suggestions from code review

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-06-16 15:54:53+00:00,David Cantú,1,9b493d2afcc49562cebaa1ac56acffacbaf42d50,"DriveInfo.Linux: use procfs mountinfo for formats and mount point paths. (#116102)

* DriveInfo.Linux: use procfs mountinfo for formats and mount point paths.

For the format, mountinfo includes a string 'filesystem type' field which is more granular than the statfs f_type numeric field.
For example: the ext2, ext3 and ext4 are distinct mountinfo values which have the same same f_type value.

For the mount paths, mountinfo provides the mount point paths relative to the process's root directory.
When the process runs with changed root dir (chroot), the paths are adjusted for it.

* Remove stackalloced buffer.

* Resolve symbolic links.

* Fix Common.Tests build on non-Linux.

* Add test that gets the DriveFormat for /tmp.

* Use test to debug CI failure.

* Fix check for root mount path.

* pal_mount: use buffer length based on API used.

* Fix not calling native GetFileSystemTypeNameForMountPoint on non-Linux.

* Add back using 'f_type' when 'f_fstypename' is not available.

* UnixFileSystemTypes: prefer Linux file system type strings as names, and remove duplicate value members.

* Fix wasi build breakage.

---------

Co-authored-by: David Cantú <dacantu@microsoft.com>",13,145,175,remove readdir_r entirely and handle filenames > 255 bytes (issue_ref)* increase d_name size* handle filenames that wouldn't fit in a 256 decoding buffer* remove readdir_r* address feedback* apply suggestions from code review---------
dotnet/runtime,41aa5d5ea853ff7e0336fedc4e57abff9a751b0a,"Enable multi-dim array interpreter test (#115916)

Expand and enable the multi-dim array interpreter test",2025-06-16 15:57:10+00:00,Katelyn Gadd,0,,,1,24,8,enable multi-dim array interpreter test (issue_ref)expand and enable the multi-dim array interpreter test
dotnet/runtime,2c349af662e589a196146f34abf0350184546554,[browser] Update wasmbrowser template (#116690),2025-06-16 16:15:17+00:00,Marek Fišera,0,,,2,28,1,[browser] update wasmbrowser template (issue_ref)
dotnet/runtime,62fabc3fb320a7853717fe175a04284c7fc66a51,"Fix stackwalk from interpreted EH funclet (#116640)

* Fix stackwalk from interpreted EH funclet

The stack walking for GC is broken when an interpreted EH funclet was
on the stack. The reason is that call to the interpreted funclet doesn't
have a transition frame and that case was not handled properly. Also,
I have found that the ExInfo::m_csfEHClause was not being set for the
interpreted clauses at all.

This change fixes it by using the InterpreterFrame address as the
m_csfEHClause (so that it is above all the interpreter frames) and
fixing the `ExInfo::FindParentStackFrameHelper` to recognize the special
instruction pointer value that we get as a parent IP for the first
interpreted frame under an InterpreterFrame.

That special value has been zero and I have added a named constant for
it so that it is clear at the points where it is being used.

* PR feedback

* Update src/coreclr/vm/exceptionhandling.cpp

Update comment

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-06-16 17:39:04+00:00,Jan Vorlicek,1,830a786e265b5ea8fdefb9292222393894ecbe1f,"Fix DAC-ification of the InterpreterFrame::SetContextToInterpMethodContextFrame (#116797)

There is an incorrect cast of `this` to TADDR that was resulting in the
DAC side address being stored in the context. That was leading to an
assert in the stack walking code on the DAC side that was crashing
WinDbg.

This change replaces C-style cast with the proper dac_cast.",4,50,34,"fix stackwalk from interpreted eh funclet (issue_ref)* fix stackwalk from interpreted eh funcletthe stack walking for gc is broken when an interpreted eh funclet wason the stack. the reason is that call to the interpreted funclet doesn'thave a transition frame and that case was not handled properly. also,i have found that the exinfo::m_csfehclause was not being set for theinterpreted clauses at all.this change fixes it by using the interpreterframe address as them_csfehclause (so that it is above all the interpreter frames) andfixing the to recognize the specialinstruction pointer value that we get as a parent ip for the firstinterpreted frame under an interpreterframe.that special value has been zero and i have added a named constant forit so that it is clear at the points where it is being used.* pr feedback* update src/coreclr/vm/exceptionhandling.cppupdate comment"
dotnet/runtime,08758d8f8a024565f5fafbbfc16967d0b2c94158,"Fix caught foreign native exception handling take 2 (#116693)

* Fix reporting of foreign native exception not handled by runtime take 2

The previous fix was reverted, as it didn't take into account hardware
exceptions stemming from managed code. This has broken debugger tests.

When a native exception occurs on a foreign thread, it is propagated
through managed frames and then flows into the foreign native frames
and is handled there, the runtime still reports the exception as unhandled
via AppDomain.CurrentDomain.UnhandledException event and also prints
out the unhandled exception message. Even though the process then continues
running just fine.

This change fixes the behavior so that only managed exceptions
thrown by the .NET runtime are reported as unhandled in such case.
Foreign exceptions, like e.g. C++ exceptions, are not reported as
unhandled and they are just propagated into the foreign native
frames. If that exception is not handled by the native frames,
then C++ reports them as unhandled.

I have also added a test that fails without this fix.

Close #115654

* Fix the problem of the previous solution

Also add hardware unhandled exception test

* Update src/coreclr/vm/exceptionhandling.cpp

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-06-16 17:41:58+00:00,Jan Vorlicek,1,390d1720df50b46680704ae6b7e52090505b50b0,"Fix unhandled exception in tiered compilation thread (#116716)

* Fix unhandled exception in tiered compilation thread

The detection the unhandled exception is not working in the case of
the tiered compilation thread, because there is no indication that
the exception is going to be caught in the `CEEInfo::runWithErrorTrap`.
So the EH assumes the exception is going to be unhandled and
exits the process.
The unhandled exception message was not seen in the repro case
of the issue likely because the tiered compilation thread console
output didn't get flushed. When running under a debugger and stepping
over the `InternalUnhandledExceptionFilter_Worker`, it was actually
printed out.

The fix is to add `DebuggerU2MCatchHandlerFrame` to the
`CEEInfo::runWithErrorTrap`. That allows the EH to see that the
exception will be caught there and let it flow through the
CallDescrWorker to reach that trap.

Closes #116676

* Add regression test and fix GC mode

* Make the regression test actually work

It needs to be compiled as optimized and the Console.WriteLine is needed to repro
the issue.

* Modify the regression test to not to print to console

* PR feedback

* Update src/coreclr/vm/jitinterface.cpp

Fix contract

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",5,85,5,"fix caught foreign native exception handling take 2 (issue_ref)* fix reporting of foreign native exception not handled by runtime take 2the previous fix was reverted, as it didn't take into account hardwareexceptions stemming from managed code. this has broken debugger tests.when a native exception occurs on a foreign thread, it is propagatedthrough managed frames and then flows into the foreign native framesand is handled there, the runtime still reports the exception as unhandledvia appdomain.currentdomain.unhandledexception event and also printsout the unhandled exception message. even though the process then continuesrunning just fine.this change fixes the behavior so that only managed exceptionsthrown by the .net runtime are reported as unhandled in such case.foreign exceptions, like e.g. c++ exceptions, are not reported asunhandled and they are just propagated into the foreign nativeframes. if that exception is not handled by the native frames,then c++ reports them as unhandled.i have also added a test that fails without this fix.close issue_ref* fix the problem of the previous solutionalso add hardware unhandled exception test* update src/coreclr/vm/exceptionhandling.cpp"
dotnet/runtime,1a52cd6e192f51548b2fef0fc247dacd1cfc1cde,Improve exceptions thrown by MLKem and MLDsaOpenSsl when key types aren't available,2025-06-16 18:20:33+00:00,Kevin Jones,0,,,10,69,18,improve exceptions thrown by mlkem and mldsaopenssl when key types aren't available
dotnet/runtime,1bd56d43753d4b30e2b93195560c6fc0b481cc87,"Implement interpreter CEE_ADD_OVF and CEE_SUB_OVF opcodes (#116694)

These are needed for a couple of coreclr tests",2025-06-16 19:20:55+00:00,Jan Vorlicek,0,,,3,117,0,implement interpreter cee_add_ovf and cee_sub_ovf opcodes (issue_ref)these are needed for a couple of coreclr tests
dotnet/runtime,f76e2038057f2241ebfdbadf2e3521f8703d0f81,"Update host test command execution logging: include PID on exit, remove confusing OK/FAIL, add caller name (#116658)

When launching a process to test, host tests write to the console on launch, wait for exit, and exit. Currently, they also log OK/FAIL based on the exit code and a parameter for whether failure is expected. All tests already do their own validation for if the command should pass/fail - having this extra logging is not useful and can be actively confusing, since it relies on tests also passing in that parameter (even though that is not used for actual validation/asserts).

Update the logging to remove the OK/FAIL, include the PID on exit, and add the caller name (for test identification).",2025-06-16 20:38:19+00:00,Elinor Fung,0,,,25,172,130,"update host test command execution logging: include pid on exit, remove confusing ok/fail, add caller name (issue_ref)when launching a process to test, host tests write to the console on launch, wait for exit, and exit. currently, they also log ok/fail based on the exit code and a parameter for whether failure is expected. all tests already do their own validation for if the command should pass/fail - having this extra logging is not useful and can be actively confusing, since it relies on tests also passing in that parameter (even though that is not used for actual validation/asserts).update the logging to remove the ok/fail, include the pid on exit, and add the caller name (for test identification)."
dotnet/runtime,abb26bce6c2aeec7ab447fa862681c907bbc79db,Remove debugreturn.h and machinery around preventing returns (#116563),2025-06-16 22:56:49+00:00,Jeremy Koritzinsky,1,e25633993143c2f05f28686bf515ff187ad53301,"Fix time retrieval for Apple mobile in LogAssert (#120358)

* Fix time retrieval for Apple mobile in LogAssert

* Update src/coreclr/utilcode/debug.cpp

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Update src/coreclr/utilcode/debug.cpp

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",123,729,944,remove debugreturn.h and machinery around preventing returns (issue_ref)
dotnet/runtime,9b493d2afcc49562cebaa1ac56acffacbaf42d50,"DriveInfo.Linux: use procfs mountinfo for formats and mount point paths. (#116102)

* DriveInfo.Linux: use procfs mountinfo for formats and mount point paths.

For the format, mountinfo includes a string 'filesystem type' field which is more granular than the statfs f_type numeric field.
For example: the ext2, ext3 and ext4 are distinct mountinfo values which have the same same f_type value.

For the mount paths, mountinfo provides the mount point paths relative to the process's root directory.
When the process runs with changed root dir (chroot), the paths are adjusted for it.

* Remove stackalloced buffer.

* Resolve symbolic links.

* Fix Common.Tests build on non-Linux.

* Add test that gets the DriveFormat for /tmp.

* Use test to debug CI failure.

* Fix check for root mount path.

* pal_mount: use buffer length based on API used.

* Fix not calling native GetFileSystemTypeNameForMountPoint on non-Linux.

* Add back using 'f_type' when 'f_fstypename' is not available.

* UnixFileSystemTypes: prefer Linux file system type strings as names, and remove duplicate value members.

* Fix wasi build breakage.

---------

Co-authored-by: David Cantú <dacantu@microsoft.com>",2025-06-16 23:01:29+00:00,Tom Deseyn,1,97da14cd15ad32b20a6d8509ed94f97a7b28a39d,"Misc. illumous build fixes (prereq. for #105403) (#117023)

* Fix illumos compile error at minipal/debugger.c:127

  dotnet/runtime/src/native/minipal/debugger.c:127:5: error: implicit declaration of function 'snprintf' [-Werror=implicit-function-declaration]
    127 |     snprintf(statusFilename, sizeof(statusFilename), ""/proc/%d/status"", getpid());
        |     ^~~~~~~~

* Fix illumos compile error in minipal/thread.h

  src/native/minipal/thread.h:73:23: error: cast to pointer from integer of different size [-Werror=int-to-pointer-cast]
     73 |         tid = (size_t)(void*)pthread_self();
        |                       ^~~~~~~~~~~~~~~~~~~~~

* Fix illumos compile error in native/libs/System.Native/pal_mount.c

 src/native/libs/System.Native/pal_mount.c:164:38: error: 'struct statvfs' has no member named 'f_type'
    164 |         *formatType = (int64_t)(stats.f_type);
        |                                      ^

* Fix illumos compile error in coreclr/pal/src/thread/thread.cpp

  /home/gwr/dotnet/runtime/src/coreclr/pal/src/thread/thread.cpp:1367:5: error: 'cid' was not declared in this scope
   1367 |     cid = CLOCK_THREAD_CPUTIME_ID;
        |     ^~~",18,407,163,"driveinfo.linux: use procfs mountinfo for formats and mount point paths. (issue_ref)* driveinfo.linux: use procfs mountinfo for formats and mount point paths.for the format, mountinfo includes a string 'filesystem type' field which is more granular than the statfs f_type numeric field.for example: the ext2, ext3 and ext4 are distinct mountinfo values which have the same same f_type value.for the mount paths, mountinfo provides the mount point paths relative to the process's root directory.when the process runs with changed root dir (chroot), the paths are adjusted for it.* remove stackalloced buffer.* resolve symbolic links.* fix common.tests build on non-linux.* add test that gets the driveformat for /tmp.* use test to debug ci failure.* fix check for root mount path.* pal_mount: use buffer length based on api used.* fix not calling native getfilesystemtypenameformountpoint on non-linux.* add back using 'f_type' when 'f_fstypename' is not available.* unixfilesystemtypes: prefer linux file system type strings as names, and remove duplicate value members.* fix wasi build breakage.---------"
dotnet/runtime,ff7b6c57ebb8e61e2821ccae6f98a0d8b6bda887,Unwrap RCWs that are passed to Marshal.GetIUnknownForObject when using the global marshalling ComWrappers instance (#115436),2025-06-16 23:36:41+00:00,Jeremy Koritzinsky,1,a436284d7f5aae74ab25867c6ded4c9e83ad2ecb,"Fix NativeAOT COM custom query interface exception handling (#117691)

* Fix NativeAOT COM custom query interface exceptioon handling

After fixing a bug in the related stuff in coreclr, the regression test
has revealed that the NativeAOT version has a similar issue. The
exception stemming from the custom query interface are not caught
and transformed to HRESULT, so they are reported as unhandled
exceptions.

This change adds try / catch to catch the exception and translate it to
HRESULT.

* PR feedback",5,58,18,unwrap rcws that are passed to marshal.getiunknownforobject when using the global marshalling comwrappers instance (issue_ref)
dotnet/runtime,5e1973b259d1f2533ced4340a64b2104e73c729c,"Add few interpreter bringup diagnostic improvements (#116699)

This change improves the diagnosability of the interpreter issues during
the bringup. It prints out unsupported IL opcodes when we hit one and
also makes the assert go through the assertAbort instead of the regular
assert, since the regular one pops out a dialog, so it is bad for batch
testing.",2025-06-17 00:26:10+00:00,Jan Vorlicek,0,,,2,21,2,"add few interpreter bringup diagnostic improvements (issue_ref)this change improves the diagnosability of the interpreter issues duringthe bringup. it prints out unsupported il opcodes when we hit one andalso makes the assert go through the assertabort instead of the regularassert, since the regular one pops out a dialog, so it is bad for batchtesting."
dotnet/runtime,39a31f082e77fb8893016c30c0858f0e5f8c89ea,"Virtual stub indirect call profiling (#116453)

Add support for profiling indirect virtual stub calls and subsequent guarded devirtualization.",2025-06-17 00:35:31+00:00,Andy Ayers,1,c0eb288f39158afe2b2950a7dfcb4495c492c9cf,"Avoid unnecessary allocations of jump stubs (#116944)

Fixes #116748",8,80,34,virtual stub indirect call profiling (issue_ref)add support for profiling indirect virtual stub calls and subsequent guarded devirtualization.
dotnet/runtime,d1770cc10d5f74642ee108ff5be83a6ecc30792a,Generalize HTTP/2 trailer tests to cover HTTP/3 (#116113),2025-06-17 11:00:39+00:00,Anton Firszov,0,,,2,245,266,generalize http/2 trailer tests to cover http/3 (issue_ref)
dotnet/runtime,0dea0b54f2686b2bde0bb4edbccfb28c967fb042,JIT: Properly check spilling around fat pointer calls (#116692),2025-06-17 13:20:40+00:00,Jakob Botsch Nielsen,1,96e283d3938c40dd7eb3e8bb6c25827e66c45a26,"JIT: remove unnecessary inlining restriction (#116773)

We can still inline methods even if they make generic virtual calls.

Fixes #116740.",3,37,2,jit: properly check spilling around fat pointer calls (issue_ref)
dotnet/runtime,0d628dae1cb5b8d0eb76d9549134edfe30d6219c,"[cDAC] Move AMD64 Unwinder to managed code (#116488)

* add managed AMD64Unwinder
* use managed unwinder in cDAC",2025-06-17 13:55:26+00:00,Max Charlamb,0,,,2,1306,1,[cdac] move amd64 unwinder to managed code (issue_ref)* add managed amd64unwinder* use managed unwinder in cdac
dotnet/runtime,504fb7da4ce09352d15299b10b2baaa50bcd12b2,"Add constrained support for calls (#116702)

* Add full constructor to StackInfo

To prevent having uninitialized fields

* Add constrained support for calls

Rename constrainedClass to pConstrainedToken for clarity.
Extract box code emit into separate method.

* Get rid of StackInfo.size

It doesn't seem like we will be needing it. Use constructor in more places",2025-06-17 14:24:18+00:00,Vlad Brezae,1,300eba1be99a22761f52aa7ea5d38f77befced54,"Fix remaining uses of hccall (#116561)

* Remove HCCALL use from R2R helpers

* Get rid of the other uses of HCCALL

* Address the usage of the jit helpers by just removing them",4,72,54,add constrained support for calls (issue_ref)* add full constructor to stackinfoto prevent having uninitialized fields* add constrained support for callsrename constrainedclass to pconstrainedtoken for clarity.extract box code emit into separate method.* get rid of stackinfo.sizeit doesn't seem like we will be needing it. use constructor in more places
dotnet/runtime,40b50b8ffe76695bcf9a7ee7276aeded0d917302,Bump main to .NET 10 Preview 7 (#116724),2025-06-17 15:12:38+00:00,David Cantú,0,,,1,1,1,bump main to .net 10 preview 7 (issue_ref)
dotnet/runtime,38c8e8f4cc1be3abd20f675771f208360b11b52c,"Add CollectionsMarshal.AsBytes(BitArray) (#116308)

* Move BitArray to corelib

* Add CollectionsMarshal.AsBytes(BitArray)

* Update to use a byte[] backing array",2025-06-17 17:13:37+00:00,Stephen Toub,1,89ccd55547ce8408860e6b4b344906e8472b1005,Fix some cases (#119074),12,1210,1225,add collectionsmarshal.asbytes(bitarray) (issue_ref)* move bitarray to corelib* add collectionsmarshal.asbytes(bitarray)* update to use a byte[] backing array
dotnet/runtime,59eee19e7e28591c07ded517cb4b0b1209befa2a,Add an entry on the coding style for primary constructors (#116723),2025-06-17 17:40:31+00:00,Jeremy Koritzinsky,0,,,1,1,0,add an entry on the coding style for primary constructors (issue_ref)
dotnet/runtime,e34a3c4ef24034349a6b25b408b18655d312b47d,"Folds CCW VTables for root COM interfaces (#116289)

* Folds CCW VTables for root COM interfaces

This commit allows the CCW VTables for interfaces that don't inherit to be folded by ILC to reduce binary size.

---------

Co-authored-by: Aaron Robinson <arobins@microsoft.com>",2025-06-17 18:19:37+00:00,Dongle,0,,,5,288,80,folds ccw vtables for root com interfaces (issue_ref)* folds ccw vtables for root com interfacesthis commit allows the ccw vtables for interfaces that don't inherit to be folded by ilc to reduce binary size.---------
dotnet/runtime,ff8c9349feb575d9db25fd54792bbd48e3d060df,"Implement SVE2 ShiftLeftLogical Intrinsics (#116380)

* Implement SVE2 ShiftLeftLogicalSaturate, ShiftLeftLogicalSaturateUnsigned, ShiftLeftLogicalWideningEven, ShiftLeftLogicalWideningOdd

* Remove HW_Flag_BaseTypeFromFirstArg

* Fix emitter assembly display issue

* Formatting",2025-06-17 19:05:32+00:00,snickolls-arm,1,76490ed812cd57883dc8b738350f47ba40d9e8ac,"Add support for Classify, CompressStore, ExpandLoad, MaskLoad, MaskStore, and MoveMask (#116708)

* Add support for Avx512DQ.Classify

* Ensure that the Avx512 hierarchy correctly exposes existing mask intrinsics

* Add support for AVX512 MoveMask

* Add support for AVX512 CompressStore, ExpandLoad, MaskLoad, and MaskStore

* Add missing new slot in Avx10v1.PNSE.cs

* Ensure Avx512DQ.PNSE.cs throws PNSE, not null

* Ensure the HW_Category_MemoryStore code paths are merged

* Fixing the encodings of vmovdqu8/16

* Fixing some tests to ensure they are correctly validating the results",11,426,90,"implement sve2 shiftleftlogical intrinsics (issue_ref)* implement sve2 shiftleftlogicalsaturate, shiftleftlogicalsaturateunsigned, shiftleftlogicalwideningeven, shiftleftlogicalwideningodd* remove hw_flag_basetypefromfirstarg* fix emitter assembly display issue* formatting"
dotnet/runtime,300eba1be99a22761f52aa7ea5d38f77befced54,"Fix remaining uses of hccall (#116561)

* Remove HCCALL use from R2R helpers

* Get rid of the other uses of HCCALL

* Address the usage of the jit helpers by just removing them",2025-06-17 19:36:27+00:00,David Wrighton,1,a13232a942c34056578c47714056a46fd4792bae,"Ldvirtftn implementation for interpreter (#116661)

Implement more complex call scenarios
- ldvirtftn based (generic virtual calls)
- code pointer based (certain static virtual calls)
- ldvirtftn path to delegate creation

And as a bonus, to keep the tests working...

Rework where we attach intepreted code to a method, so that we never put the interpreter code bytes into the vtable (with this change, the vtable, etc, always have the InterpreterPrecode in it.

Add scheme for enabling logging of the CallStubGenerator.

Fix calling convention handling for jit calling convention to interpreter calling convention for Unix X64 and Windows Arm64.",7,42,60,fix remaining uses of hccall (issue_ref)* remove hccall use from r2r helpers* get rid of the other uses of hccall* address the usage of the jit helpers by just removing them
dotnet/runtime,663d39f46cad75690c0fcaa84d3ee6ca1d9f5a7c,JIT: Reduce heuristics-derived edge likelihoods into throw blocks found by morph (#116637),2025-06-17 21:24:54+00:00,Aman Khalid,1,430ff53510212ceb5e6f17dc2e45fa279868ffdb,"JIT: Fix likelihoods in range test bool opts (#116867)

When optimizing compound conditionals into one check and branch, we'd expect the likelihood of the optimized branch to be the product of the conditionals' likelihoods. We currently get this wrong in range test opts if the second comparison is flipped, yielding behavior like this:

```
---------------------------------------------------------------------------------------------------------------------------------------------------------------------
BBnum BBid ref try hnd preds           weight     IBC [IL range]   [jump]                            [EH region]        [flags]
---------------------------------------------------------------------------------------------------------------------------------------------------------------------
BB01 [0000]  1                             1    33784 [000..00C)-> BB12(0.407),BB11(0.593) ( cond )                   i IBC
BB11 [0009]  1       BB01                  0.59 20037 [000..001)                           (throw )                   i IBC gcsafe
BB12 [0010]  1       BB01                  0.41 13747 [000..001)-> BB14(0.899),BB08(0.101) ( cond )                   i IBC
BB14 [0012]  3       BB03,BB08,BB12        0.37 12357 [000..021)                           (return)                   i IBC jmp
BB08 [0006]  1       BB12                  0.45 15138 [000..015)-> BB14(0.2),BB03(0.8)     ( cond )                   i IBC
BB03 [0002]  1       BB08                  0        0 [015..019)-> BB14(1)                 (always)                   i IBC rare
---------------------------------------------------------------------------------------------------------------------------------------------------------------------

*************** In optOptimizeBools()
setting likelihood of BB12 -> BB14 from 0.8988597 to 0.0809122
setting likelihood of BB12 -> BB03 to 0.9190878
fgRemoveBlock BB08, unreachable=true

Removing unreachable BB08


---------------------------------------------------------------------------------------------------------------------------------------------------------------------
BBnum BBid ref try hnd preds           weight     IBC [IL range]   [jump]                            [EH region]        [flags]
---------------------------------------------------------------------------------------------------------------------------------------------------------------------
BB01 [0000]  1                             1    33784 [000..00C)-> BB12(0.407),BB11(0.593) ( cond )                   i IBC
BB11 [0009]  1       BB01                  0.59 20037 [000..001)                           (throw )                   i IBC gcsafe
BB12 [0010]  1       BB01                  0.41 13747 [000..001)-> BB14(0.0809),BB03(0.919)  ( cond )                   i IBC
BB14 [0012]  2       BB03,BB12             0.03  1112 [000..021)                           (return)                   i IBC jmp
BB03 [0002]  1       BB12                  0.37 12635 [015..019)-> BB14(1)                 (always)                   i IBC
---------------------------------------------------------------------------------------------------------------------------------------------------------------------
```

Based on what the profile initially looked like, the likelihoods out of `BB12` should be flipped.",9,142,1,jit: reduce heuristics-derived edge likelihoods into throw blocks found by morph (issue_ref)
dotnet/runtime,2dbdff1a7aebd64b4b265d99b173cd77f088c36e,"[cDAC] Support x86 stackwalking (#116072)

* Implement managed x86 Unwinder
* Add cDAC X86Context
* Add cDAC X86FrameHandler
* Implement IExecutionManager.GetFuncletStartAddress, IExecutionManager.GetGCInfo, and IExecutionManager.GetRelativeOffset
* Allow NativeAOT cDAC compilation on x86",2025-06-17 23:13:35+00:00,Max Charlamb,1,a5d7490394166ac23517e843f4ec2af11010d1bf,"[cDAC] Fixes for 32bit platforms (#116720)

* allow cdac to build on ARM32/x86
* modify DAC to properly sign extend firstNestedException
* fix cDAC CodePointerFromAddress to properly handle nullptr
* add missed conversions to ClrDataAddress
* improve error messages",36,3563,138,"[cdac] support x86 stackwalking (issue_ref)* implement managed x86 unwinder* add cdac x86context* add cdac x86framehandler* implement iexecutionmanager.getfuncletstartaddress, iexecutionmanager.getgcinfo, and iexecutionmanager.getrelativeoffset* allow nativeaot cdac compilation on x86"
dotnet/runtime,3c5f74af89e331a5474025ce56d146ee180e1887,"Fix HTTP/2 pings not working with zero connection lifetime (#115735)

* Fix HTTP/2 pings with zero connection lifetime

Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>

* Extend existing test instead of adding new ones

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>
Co-authored-by: Stephen Toub <stoub@microsoft.com>",2025-06-18 01:21:21+00:00,Copilot,1,f91b0b536c916f7cdea7149220ba72c93576b775,"Separate 0 lifetime test, fix PING counting. (#117077)",2,9,4,fix http/2 pings not working with zero connection lifetime (issue_ref)* fix http/2 pings with zero connection lifetime
dotnet/runtime,d41a299da86f1f184b688d8670974e32aa59919f,"Generate rank information in BulkType events (#116749)

Port https://github.com/dotnet/coreclr/pull/27516 to native AOT.",2025-06-18 09:47:45+00:00,Michal Strehovský,0,,,4,58,4,generate rank information in bulktype events (issue_ref)port to native aot.
dotnet/runtime,f1a4b89e9c6f3ee9dcaaca0f73dff20488fbfef9,"Add ModuleBaseAddress to ETW manifest (#116744)

Project N has been generating this for ages. I don't know if anything is broken if it's not in the manifest but at minimum it eliminates the risk that we'd unknowingly reuse this bit.",2025-06-18 09:48:45+00:00,Michal Strehovský,0,,,1,2,0,add modulebaseaddress to etw manifest (issue_ref)project n has been generating this for ages. i don't know if anything is broken if it's not in the manifest but at minimum it eliminates the risk that we'd unknowingly reuse this bit.
dotnet/runtime,5951ad2cc386f6af3c30629e546daa8d4378e053,Disable `System.Runtime.InteropServices.JavaScript.Tests` on Windows. (#116734),2025-06-18 12:31:41+00:00,Ilona Tomkowicz,0,,,1,5,0,disable on windows. (issue_ref)
dotnet/runtime,9fe86ca2beebd1b5878110d310e068accd6050a1,"Arm64 SVE: Optimise zero/allbits vectors the same as masks (#115566)

* Arm64 SVE: Better optimise zero/allbits vectors

Fixes #114443

* IsVectorZero() should allow for all zero vectors and false masks that have been converted to vectors.
* IsVectorAllBitsSet() should allow for all bits set vectors and true masks that have been converted to vectors.
* IsMaskZero() should all for false masks and all zero vectors that have been converted to masks.
* IsMaskAllBitsSet() should allow for true masks and all bit set vectors that have been converted to masks.

In addition:
* Fix up all the errors caused by these changes.
* Add a bunch of asmcheck tests

* Remove all jit changes

* Import constant vector 0 for createfalsemask

* fix up tests

* Only allow zero op3 contains for embedded ops

* fix up tests

* fix formatting

* Import constant vector all bits set for createtruemask

* Fix up tests

* fix type of true mask variants

* Allow common code to create the convert for CreateTrueMask*

* Fix x86 build

* unique test names in templates

* simpler lowering

* Don't remove embedded ops that may throw

* Clear embOp when clearing contained

* Import masks as gtNewVconNode

* Remove pRetType

* Add nullptr check

* Add AOT TODO

* Add codegen support for CNS_MASK

* Add const vector folding for Arm64

* Add mask patterns

* Move tests to SVE

* Add isTrueMask()

Change-Id: I456498f06d454e6ed57ce935e195b721e2c6d225

* fix tests

Change-Id: I3d74a7292e2c880fcaba215dc1fb58369e4ad141

* fix formatting

* Add EvaluateSimdPatternToMask

* import vectors not masks

* rename to EvaluateSimdMaskToPattern

* Add unreached

* formatting

* fix IsTrueMask

* remove emb op fix

* fix morphing errors

* Remove NI_Sve_CreateFalseMaskAll

* rename TrueMaskAll to ConversionTrueMask and only use as such

* remove gtNewSimdCnsVecTrueMaskPattern

* Switch gtNewSimdAllTrueMaskNode to create constant mask

* fix tests

* FEATURE_HW_INTRINSICS checks

* formatting

* fix gtFoldExprConvertVecCnsToMask call

* move gtFoldExprConvertVecCnsToMask call

* Allow for masks being input to mask nodes

* use IsFalseMask everywhere

* Add simdSize to GenTreeMskCon

* Use simdSize in GenTreeMskCon

* cndsel op3 is a vector

* use unsigned instead of unsigned char

* Fix HasDisasmCheck

* Hardcode mask simd size to 16

* formatting

* remove TODO

* Use simdBaseType for IsTrueMask arg

* Add asserts to gtFoldExprHWIntrinsic

* Simplify IsFalseMask

* inline IsTrueMask/IsFalseMask

* Use LABELEDDISPTREERANGE

* Add header to gtFoldExprConvertVecCnsToMask

* Remove FEATURE_HW_INTRINSICS around IsTrueMask/IsFalseMask

* turn off fgMorphTryUseAllMaskVariant",2025-06-18 13:24:41+00:00,Alan Hayward,1,83683d36aa6d3af487c2b147744eaca4e9e4b414,"Arm64 SVE: Force tests to always run with hwintrinsics enabled (#117083)

Fixes #116905",18,1216,172,arm64 sve: optimise zero/allbits vectors the same as masks (issue_ref)* arm64 sve: better optimise zero/allbits vectorsfixes issue_ref* isvectorzero() should allow for all zero vectors and false masks that have been converted to vectors.* isvectorallbitsset() should allow for all bits set vectors and true masks that have been converted to vectors.* ismaskzero() should all for false masks and all zero vectors that have been converted to masks.* ismaskallbitsset() should allow for true masks and all bit set vectors that have been converted to masks.in addition:* fix up all the errors caused by these changes.* add a bunch of asmcheck tests* remove all jit changes* import constant vector 0 for createfalsemask* fix up tests* only allow zero op3 contains for embedded ops* fix up tests* fix formatting* import constant vector all bits set for createtruemask* fix up tests* fix type of true mask variants* allow common code to create the convert for createtruemask** fix x86 build* unique test names in templates* simpler lowering* don't remove embedded ops that may throw* clear embop when clearing contained* import masks as gtnewvconnode* remove prettype* add nullptr check* add aot todo* add codegen support for cns_mask* add const vector folding for arm64* add mask patterns* move tests to sve* add istruemask()change-id: i456498f06d454e6ed57ce935e195b721e2c6d225* fix testschange-id: i3d74a7292e2c880fcaba215dc1fb58369e4ad141* fix formatting* add evaluatesimdpatterntomask* import vectors not masks* rename to evaluatesimdmasktopattern* add unreached* formatting* fix istruemask* remove emb op fix* fix morphing errors* remove ni_sve_createfalsemaskall* rename truemaskall to conversiontruemask and only use as such* remove gtnewsimdcnsvectruemaskpattern* switch gtnewsimdalltruemasknode to create constant mask* fix tests* feature_hw_intrinsics checks* formatting* fix gtfoldexprconvertveccnstomask call* move gtfoldexprconvertveccnstomask call* allow for masks being input to mask nodes* use isfalsemask everywhere* add simdsize to gentreemskcon* use simdsize in gentreemskcon* cndsel op3 is a vector* use unsigned instead of unsigned char* fix hasdisasmcheck* hardcode mask simd size to 16* formatting* remove todo* use simdbasetype for istruemask arg* add asserts to gtfoldexprhwintrinsic* simplify isfalsemask* inline istruemask/isfalsemask* use labeleddisptreerange* add header to gtfoldexprconvertveccnstomask* remove feature_hw_intrinsics around istruemask/isfalsemask* turn off fgmorphtryuseallmaskvariant
dotnet/runtime,1ba24c4d8ec410cc6d3d316dc7f8e097df990f42,"Record struct packing even when falling back to auto layout (#116608)

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-06-18 18:18:47+00:00,Jeremy Koritzinsky,1,46648f3f0591d29e8cc3c65119a0f748afa99fb3,Fix size calculation for derived explicit layout types with no fields (#118245),4,113,37,record struct packing even when falling back to auto layout (issue_ref)
dotnet/runtime,3ae4edb2b542a0fd61356547d88f99adb951bfb8,"Remove guards in TrailingZeroCountOperator<T>.Invoke for Vector256 and Vector512 paths (#116721)

Co-authored-by: Alex Covington (Advanced Micro Devices Inc) <b-alexco@microsoft.com>",2025-06-18 19:41:50+00:00,Alex Covington,0,,,1,4,12,remove guards in trailingzerocountoperator<t>.invoke for vector256 and vector512 paths (issue_ref)
dotnet/runtime,9b4f83ed53c7be3639d79c2c5ca123ab0e675a61,"Update Enumerable.Sequence based on post-merge feedback (#116793)

* Update Enumerable.Sequence based on post-merge feedback

- Use T.IsPositive/IsZero
- Put zero check first
- Throw for NaN
- Rename a parameter to clarify its purpose
- Add some comments

* Add exception docs",2025-06-18 20:52:08+00:00,Stephen Toub,1,13ff5d04313a0102bcc3c8b851dd9e0335501f2b,"Replace Assert.NotNull with Assert.Empty in AsyncEnumerable SequenceTests (#117821)

* Initial plan

* Replace Assert.NotNull with Assert.Empty in AsyncEnumerable SequenceTests

Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>

* Replace Assert.NotNull with appropriate assertions for AsyncEnumerable SequenceTests

Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>

* Fix Assert.NotNull issues in System.Linq SequenceTests

Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>
Co-authored-by: Stephen Toub <stoub@microsoft.com>",4,108,64,update enumerable.sequence based on post-merge feedback (issue_ref)* update enumerable.sequence based on post-merge feedback- use t.ispositive/iszero- put zero check first- throw for nan- rename a parameter to clarify its purpose- add some comments* add exception docs
dotnet/runtime,76490ed812cd57883dc8b738350f47ba40d9e8ac,"Add support for Classify, CompressStore, ExpandLoad, MaskLoad, MaskStore, and MoveMask (#116708)

* Add support for Avx512DQ.Classify

* Ensure that the Avx512 hierarchy correctly exposes existing mask intrinsics

* Add support for AVX512 MoveMask

* Add support for AVX512 CompressStore, ExpandLoad, MaskLoad, and MaskStore

* Add missing new slot in Avx10v1.PNSE.cs

* Ensure Avx512DQ.PNSE.cs throws PNSE, not null

* Ensure the HW_Category_MemoryStore code paths are merged

* Fixing the encodings of vmovdqu8/16

* Fixing some tests to ensure they are correctly validating the results",2025-06-18 21:03:14+00:00,Tanner Gooding,1,e1f6fbeb985c040108758cc0b017aa9d1c3d6be5,"JIT: fix ordering issue in BlendVariableMask codegen (#117106)

If the merge reg operand is spilled it must be reloaded before its
register can be reused.

Fixes #116247",25,10786,3225,"add support for classify, compressstore, expandload, maskload, maskstore, and movemask (issue_ref)* add support for avx512dq.classify* ensure that the avx512 hierarchy correctly exposes existing mask intrinsics* add support for avx512 movemask* add support for avx512 compressstore, expandload, maskload, and maskstore* add missing new slot in avx10v1.pnse.cs* ensure avx512dq.pnse.cs throws pnse, not null* ensure the hw_category_memorystore code paths are merged* fixing the encodings of vmovdqu8/16* fixing some tests to ensure they are correctly validating the results"
dotnet/runtime,f4bc4688becd0a576d5a39da32dabe17fe5fcf35,dont try to release mapping if VirtualAlloc fails (#116794),2025-06-18 21:09:10+00:00,Manish Godse,0,,,1,4,0,dont try to release mapping if virtualalloc fails (issue_ref)
dotnet/runtime,ce67cef77815e0ac2edde2f1f3f451feef64f2cb,"[Linux][EventPipe][UserEvents] Add user events eventpipe support (#115265)

* [DiagnosticServer] Refactor and Cleanup

Visual reorder of Diagnostics enum structs
Fix a couple naming typos
Spaces to tabs consistency

* [EventPipe] Add User_events structs

* [EventPipe] Add User_events eventpipe session

* [DiagnosticServer] Revamp Provider Config deserialization

To support the new user_events-based eventpipe session, add
a more modular and flexible EventPipeProviderConfiguration deserializer.

* [DiagnosticServer] Deprecate old deserializer

* [DiagnosticServer] Add CollectTracing5 command parser

* [DiagnosticServer] Deserialize file_descriptor from IPC Stream

The user_events_data file is required to register user_events tracepoints.
Require profilers to pass over the corresponding file descriptor with
SCM_RIGHTS in order to initialize the user_events EventPipe session.

* [EventPipe] Use Event_filter to set EventPipeEvent enabled mask

* [UserEvents] Register and unregister tracepoints

* [UserEvents] Write events to tracepoints

* Fixup CI build failures

* Cleanup missed CI build failures

* Address feedback

Fix parameter order
Use umap_ptr_uint32 macros for EventFilter
Remove tracepoint_name const qualifier
Prevent buffer overflow in tracepoint_format copying
Skip duplicate tracepoint config fini
Null out tracepoint after transferring ownership
Use dn_vector_ptr_t for provider configurations
Wrap entire functions under macro checks
Use int for file descriptor
Fix formatting
Add checks for ep_session_disable session specific logic
Use dn_vector_ptr for the tracepoints sets
Use switch case for event writing
Scope tracepoint registration to sessions
Remove ep prefix from static functions
Move includes to source
Define max tracepoint format length

* Address Feedback const EventPipeProviderConfiguration

Adhere to the standard where EventPipeProviderConfiguration is
read-only. Create event filter and tracepoint config duplication helpers
to give the SessionProvider its own copy.

* Address feedback Add string deserializer helper

* Revert provider_configs to vector of structs

* Dynamically allocate tracepoint format

* Fix CI Build failures

* Split ProviderConfiguration structs

* Reuse EventPipeSessionTypes

* Constrain tracepoint_config modification to session provider

* Fixup compilation error

* Move metadata into extensions portion

* Free default tracepoint format

* Address feedback

Use ep_provider_config_fini helper
Add session_type deserializing helper
Fix tabbing
Add dn_umap_uint32_ptr macro
Handle tracepoint registration failure
Change ep_session_write_event order
Use dn_list foreach
Add size check to extension activity ids construction
Add ep_rt_utf8_string_printf_alloc helper

* Address feedback

Refactor tracepoint writing logic
Use local constants
Rename provider config parser

* Consistently use addresses of struct fields

* Fix typo

* Address feedback

Make struct data ownership consistent by removing const
Make external source files use getters and internal source files
directly access data.
Add session_provider_tracepoint_free
Disallow null tracepoint_name in tracepoint_format_alloc
Remove redundant checks
Cleanup ep_rt_utf8_string_printf_alloc
Cleanup writing to tracepoint

* Address feedback

Update ep_provider_config_init/fini callsites
Make resource cleanup logic consistent
Account for early exit memory leaks
Various cleanup

* Address Feedback

Fix eventpipe_collect_tracing_command_free_tracepoint_sets logic
Clarify len variable names
Consistently use -1 as invalid file descriptor
Update event_pipe to use ep_rt_utf16_to_utf8_string/free

* Fix Sign mismatch build error",2025-06-18 22:24:55+00:00,Mitchell Hwang,1,8dfc3adde954a655e6bfef1832d0574593fc565c,"Use `$NOCANCEL` variants of APIs on apple platforms (#117330)

* Use `$NOCANCEL` variants of APIs on apple platforms

See https://github.com/dotnet/runtime/issues/117299

* Remove remaining retry logic for `close` calls

- 2 cases still had retry on `EINTR` logic for `close`

* Remove dead code in `SafeFileHandle.Unix.cs`

* Ensure our handling of close giving EINTR is fully consistent

* Remove a now out-of-date comment

* Update sgen-protocol.c

Fix 1 remaining case of `close` being called in a loop

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",35,1874,221,"[linux][eventpipe][userevents] add user events eventpipe support (issue_ref)* [diagnosticserver] refactor and cleanupvisual reorder of diagnostics enum structsfix a couple naming typosspaces to tabs consistency* [eventpipe] add user_events structs* [eventpipe] add user_events eventpipe session* [diagnosticserver] revamp provider config deserializationto support the new user_events-based eventpipe session, adda more modular and flexible eventpipeproviderconfiguration deserializer.* [diagnosticserver] deprecate old deserializer* [diagnosticserver] add collecttracing5 command parser* [diagnosticserver] deserialize file_descriptor from ipc streamthe user_events_data file is required to register user_events tracepoints.require profilers to pass over the corresponding file descriptor withscm_rights in order to initialize the user_events eventpipe session.* [eventpipe] use event_filter to set eventpipeevent enabled mask* [userevents] register and unregister tracepoints* [userevents] write events to tracepoints* fixup ci build failures* cleanup missed ci build failures* address feedbackfix parameter orderuse umap_ptr_uint32 macros for eventfilterremove tracepoint_name const qualifierprevent buffer overflow in tracepoint_format copyingskip duplicate tracepoint config fininull out tracepoint after transferring ownershipuse dn_vector_ptr_t for provider configurationswrap entire functions under macro checksuse int for file descriptorfix formattingadd checks for ep_session_disable session specific logicuse dn_vector_ptr for the tracepoints setsuse switch case for event writingscope tracepoint registration to sessionsremove ep prefix from static functionsmove includes to sourcedefine max tracepoint format length* address feedback const eventpipeproviderconfigurationadhere to the standard where eventpipeproviderconfiguration isread-only. create event filter and tracepoint config duplication helpersto give the sessionprovider its own copy.* address feedback add string deserializer helper* revert provider_configs to vector of structs* dynamically allocate tracepoint format* fix ci build failures* split providerconfiguration structs* reuse eventpipesessiontypes* constrain tracepoint_config modification to session provider* fixup compilation error* move metadata into extensions portion* free default tracepoint format* address feedbackuse ep_provider_config_fini helperadd session_type deserializing helperfix tabbingadd dn_umap_uint32_ptr macrohandle tracepoint registration failurechange ep_session_write_event orderuse dn_list foreachadd size check to extension activity ids constructionadd ep_rt_utf8_string_printf_alloc helper* address feedbackrefactor tracepoint writing logicuse local constantsrename provider config parser* consistently use addresses of struct fields* fix typo* address feedbackmake struct data ownership consistent by removing constmake external source files use getters and internal source filesdirectly access data.add session_provider_tracepoint_freedisallow null tracepoint_name in tracepoint_format_allocremove redundant checkscleanup ep_rt_utf8_string_printf_alloccleanup writing to tracepoint* address feedbackupdate ep_provider_config_init/fini callsitesmake resource cleanup logic consistentaccount for early exit memory leaksvarious cleanup* address feedbackfix eventpipe_collect_tracing_command_free_tracepoint_sets logicclarify len variable namesconsistently use -1 as invalid file descriptorupdate event_pipe to use ep_rt_utf16_to_utf8_string/free* fix sign mismatch build error"
dotnet/runtime,390d1720df50b46680704ae6b7e52090505b50b0,"Fix unhandled exception in tiered compilation thread (#116716)

* Fix unhandled exception in tiered compilation thread

The detection the unhandled exception is not working in the case of
the tiered compilation thread, because there is no indication that
the exception is going to be caught in the `CEEInfo::runWithErrorTrap`.
So the EH assumes the exception is going to be unhandled and
exits the process.
The unhandled exception message was not seen in the repro case
of the issue likely because the tiered compilation thread console
output didn't get flushed. When running under a debugger and stepping
over the `InternalUnhandledExceptionFilter_Worker`, it was actually
printed out.

The fix is to add `DebuggerU2MCatchHandlerFrame` to the
`CEEInfo::runWithErrorTrap`. That allows the EH to see that the
exception will be caught there and let it flow through the
CallDescrWorker to reach that trap.

Closes #116676

* Add regression test and fix GC mode

* Make the regression test actually work

It needs to be compiled as optimized and the Console.WriteLine is needed to repro
the issue.

* Modify the regression test to not to print to console

* PR feedback

* Update src/coreclr/vm/jitinterface.cpp

Fix contract

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-06-19 00:49:17+00:00,Jan Vorlicek,1,dcc54b523e17709cb9489c7db38ecf32288a31c9,"Fix GetCallerSPOfParentOfNonExceptionallyInvokedFunclet (#117477)

The current code doesn't handle the interpreted frame. Running the
coreclr tests interpreted revealed this problem.

The fix is to add method for unwinding a context to the ICodeManager
and its implementations. There already was a function to unwind the
REGDISPLAY, but this one is different.",5,65,144,"fix unhandled exception in tiered compilation thread (issue_ref)* fix unhandled exception in tiered compilation threadthe detection the unhandled exception is not working in the case ofthe tiered compilation thread, because there is no indication thatthe exception is going to be caught in the .so the eh assumes the exception is going to be unhandled andexits the process.the unhandled exception message was not seen in the repro caseof the issue likely because the tiered compilation thread consoleoutput didn't get flushed. when running under a debugger and steppingover the , it was actuallyprinted out.the fix is to add to the. that allows the eh to see that theexception will be caught there and let it flow through thecalldescrworker to reach that trap.closes issue_ref* add regression test and fix gc mode* make the regression test actually workit needs to be compiled as optimized and the console.writeline is needed to reprothe issue.* modify the regression test to not to print to console* pr feedback* update src/coreclr/vm/jitinterface.cppfix contract"
dotnet/runtime,ac1e1b9c738df22c90a4ef572247b96c3341ca76,Add missing RemoteExecutor.IsSupported (#116809),2025-06-19 09:11:41+00:00,Jan Kotas,0,,,1,1,1,add missing remoteexecutor.issupported (issue_ref)
dotnet/runtime,ad4e636ec6630213a8531f2fbd1bef6da4e17d6a,"JIT: retype more ints during constant prop (#116759)

In particular be willing to retype constant static field handles as TYP_BYREF.

Closes #116655.",2025-06-19 14:24:12+00:00,Andy Ayers,1,b55051308253e1972237a33198e7b8e96d2b4d9a,"JIT: tolerate missing compile time class handle during assertion prop (#117631)

Const assertion prop for handles cannot easily propagate the compile time
handle, so if we re-run assertion prop (say via opt repeat) the handle
may be missing. Tolerate.

Fixes #117369.",1,10,20,jit: retype more ints during constant prop (issue_ref)in particular be willing to retype constant static field handles as typ_byref.closes issue_ref.
dotnet/runtime,a5d7490394166ac23517e843f4ec2af11010d1bf,"[cDAC] Fixes for 32bit platforms (#116720)

* allow cdac to build on ARM32/x86
* modify DAC to properly sign extend firstNestedException
* fix cDAC CodePointerFromAddress to properly handle nullptr
* add missed conversions to ClrDataAddress
* improve error messages",2025-06-19 14:45:31+00:00,Max Charlamb,1,19b04943f990072994622dc2b6620aca56ae4676,"Simplify cDAC AOT condition (#117397)

Fixes dev-innerloop leg too.",6,100,50,[cdac] fixes for 32bit platforms (issue_ref)* allow cdac to build on arm32/x86* modify dac to properly sign extend firstnestedexception* fix cdac codepointerfromaddress to properly handle nullptr* add missed conversions to clrdataaddress* improve error messages
dotnet/runtime,ffa6be53453892a0cef9e3ff576d6b7b5fae3b97,"Reflection.Emit should respect RVAs of 0 (#116766)

The underlying Reflection.Emit infrastructure was treating an RVA of 0 as ""normal"" and indexing into the dynamic IL data stream. This caused confusion in the rest of the system since an RVA of 0 means there is no IL body (that is, no IL Header). Making Reflection.Emit consistent ensures that scenarios relying on an RVA of 0 now operate identical with those emitted by .NET compilers.

This change also removes some of the checks that were put in place for Reflection.Emit and relies on the EE at runtime to handle those cases.",2025-06-19 15:52:39+00:00,Aaron Robinson,0,,,12,67,114,"reflection.emit should respect rvas of 0 (issue_ref)the underlying reflection.emit infrastructure was treating an rva of 0 as ""normal"" and indexing into the dynamic il data stream. this caused confusion in the rest of the system since an rva of 0 means there is no il body (that is, no il header). making reflection.emit consistent ensures that scenarios relying on an rva of 0 now operate identical with those emitted by .net compilers.this change also removes some of the checks that were put in place for reflection.emit and relies on the ee at runtime to handle those cases."
dotnet/runtime,c585026d0f646584533ad69fe105ea6f80520246,Only mark mapped properties (#116807),2025-06-19 16:45:45+00:00,Pranav Senthilnathan,0,,,3,25,3,only mark mapped properties (issue_ref)
dotnet/runtime,37b2daacdbcaac107207b96a71eb383c92cd9ec7,"Disable core dumps in host tests that intentionally crash (#116725)

For tests that intentionally crash, we were already clearing out `DOTNET_DbgEnableMiniDump`/`COMPlus_DbgEnableMiniDump`, but OS core dumps were still enabled.
- In tests that are explicitly throwing an unhandled exception, call into OS APIs to disable dumps for the current process
- When launching a command that should have dumps disabled, call `ulimit -c 0` before the command (for cases where the test doesn't have control over the process)

For Unix, this avoids creating any dumps for intentional crashes. On Windows, we still have two created for `Muxer_NonAssemblyWithExeExtension` and `UnhandledException_BreadcrumbThreadDoesNotFinish`.",2025-06-19 17:31:42+00:00,Elinor Fung,1,9d6caae8f497009e0970a8863ca9c3b6ac5df168,"Show specific error message for `dotnet <app_path>` where app_path is a non-dll/exe file that exists (#116940)

Make running `dotnet <path>` where path exists but is not a dll/exe show ""The application '<path>' does not exist or is not a managed .dll"" and avoid invoking the SDK.",19,134,32,"disable core dumps in host tests that intentionally crash (issue_ref)for tests that intentionally crash, we were already clearing out /, but os core dumps were still enabled.- in tests that are explicitly throwing an unhandled exception, call into os apis to disable dumps for the current process- when launching a command that should have dumps disabled, call before the command (for cases where the test doesn't have control over the process)for unix, this avoids creating any dumps for intentional crashes. on windows, we still have two created for and ."
dotnet/runtime,9b456d48357b8605649df6225469d174116439d6,"[cDAC] X86 support FuncEvalFrame (#116796)

* add support for FuncEvalFrame in the x86 stackwalker",2025-06-19 17:53:03+00:00,Max Charlamb,0,,,1,28,2,[cdac] x86 support funcevalframe (issue_ref)* add support for funcevalframe in the x86 stackwalker
dotnet/runtime,81cff29bd40289cf0d592f130b28e0a1621e0adf,"Implement SVE2 ShiftLogicalRounded, ShiftLogicalRoundedSaturate (#116784)

* Implement SVE2 ShiftLogicalRounded, ShiftLogicalSaturateRounded

* Add HW_Flag_LowMaskedOperation

---------

Co-authored-by: Kunal Pathak <Kunal.Pathak@microsoft.com>",2025-06-19 18:49:28+00:00,snickolls-arm,1,c86774fd8c3452b8aecad30c514b781dbd84c18e,"Implement SVE AddCarryWidening (Upper/Lower) (#116429)

* SVE2 API for AddCarryWideningLower

* SVE2 API for AddCarryWideningUpper

* Adding bounds checks in AddCarry helper functions

* Handling RMW semantics on 3rd operand in lsra and codegen

* Fixing formatting

* Updating array validation in helper functions

Change-Id: I9dd753d27af6041f96792ad2958a5cc4f0093ca4

* adding parentheses to subexpressions

Change-Id: Ibb95a18ad5abffae2a4b215a31412395c750ba89

* Update src/tests/JIT/HardwareIntrinsics/Arm/Shared/Helpers.cs

* Update src/tests/JIT/HardwareIntrinsics/Arm/Shared/Helpers.cs

* Update src/tests/JIT/HardwareIntrinsics/Arm/Shared/Helpers.cs

* Update src/tests/JIT/HardwareIntrinsics/Arm/Shared/Helpers.cs

* Update src/tests/JIT/HardwareIntrinsics/Arm/Shared/Helpers.cs

* Update src/tests/JIT/HardwareIntrinsics/Arm/Shared/Helpers.cs

* Update src/tests/JIT/HardwareIntrinsics/Arm/Shared/Helpers.cs

---------

Co-authored-by: Kunal Pathak <Kunal.Pathak@microsoft.com>",6,156,12,"implement sve2 shiftlogicalrounded, shiftlogicalroundedsaturate (issue_ref)* implement sve2 shiftlogicalrounded, shiftlogicalsaturaterounded* add hw_flag_lowmaskedoperation---------"
dotnet/runtime,b3102fab10fe0382a30229444dbc302d91641d46,Exclude interpreterTester test on R2R CI legs (#116824),2025-06-19 21:44:08+00:00,Manish Godse,1,47a476775996856dd03ae7be2816795e854938c3,"Make GCDump work on Linux (#116816)

Fixes #116686.

Turns out the test was failing because everything involved in GCDump was disabled outside Windows.",1,3,0,exclude interpretertester test on r2r ci legs (issue_ref)
dotnet/runtime,542b9472c1589b973eec7fcdc64b1ea4fdd24b3e,"No information about application is recorded when WindowsEventLog class failed to write event log (#116178)

* No information about application is recorded when WindowsEventLog class failed to write event log

* undo unwanted changes

* Add Test

---------

Co-authored-by: Tarek Mahmoud Sayed <tarekms@microsoft.com>",2025-06-19 22:51:03+00:00,Badre BSAILA,0,,,3,19,5,no information about application is recorded when windowseventlog class failed to write event log (issue_ref)* no information about application is recorded when windowseventlog class failed to write event log* undo unwanted changes* add test---------
dotnet/runtime,c86774fd8c3452b8aecad30c514b781dbd84c18e,"Implement SVE AddCarryWidening (Upper/Lower) (#116429)

* SVE2 API for AddCarryWideningLower

* SVE2 API for AddCarryWideningUpper

* Adding bounds checks in AddCarry helper functions

* Handling RMW semantics on 3rd operand in lsra and codegen

* Fixing formatting

* Updating array validation in helper functions

Change-Id: I9dd753d27af6041f96792ad2958a5cc4f0093ca4

* adding parentheses to subexpressions

Change-Id: Ibb95a18ad5abffae2a4b215a31412395c750ba89

* Update src/tests/JIT/HardwareIntrinsics/Arm/Shared/Helpers.cs

* Update src/tests/JIT/HardwareIntrinsics/Arm/Shared/Helpers.cs

* Update src/tests/JIT/HardwareIntrinsics/Arm/Shared/Helpers.cs

* Update src/tests/JIT/HardwareIntrinsics/Arm/Shared/Helpers.cs

* Update src/tests/JIT/HardwareIntrinsics/Arm/Shared/Helpers.cs

* Update src/tests/JIT/HardwareIntrinsics/Arm/Shared/Helpers.cs

* Update src/tests/JIT/HardwareIntrinsics/Arm/Shared/Helpers.cs

---------

Co-authored-by: Kunal Pathak <Kunal.Pathak@microsoft.com>",2025-06-19 22:57:16+00:00,Jacob Crawley,1,ede0118a8f82bd3e01e1de1eac6eb9e1e74f486f,"JIT: Emit mulx for GT_MULHI and GT_MUL_LONG if BMI2 is available (#116198)

* WIP: Emit mulx for GT_MULHI

* * Handle containment for GT_MUL_LONG on x86
* Fix register for mulx
* Cleanup: use GenTree::IsUnsigned helper

* update comments

* update after merge

* * remove move instruction since it is handled by lsra
* don't force op1 to implicit register if op2 is already in it

* minor formatting fixes

* clenaup

* Ensure magic number for GT_MULHI for division with constant, is put in rdx

* only swap operands for  GT_MULHI and GT_MUL_LONG

* fix formatting

* Fix operand order

* Fixes after merge:

* use OperIs()
* replace Intructionset_BMI2 => InstructionSetAVX2

* fix review comment

* kill rdx register for mulx instead of specifying as fixed register for use

* fix format

* remove register preference for mul, it does only make sense for extended 1 op mul

- some cleanup of BuildMul, reorder andremove dead code

* fix formatting

* remove swap in lowering

* update fixed reg in lowering for division by constant

* change from isUsedFromMemory to isContained()

* Fix review comments",10,253,1,implement sve addcarrywidening (upper/lower) (issue_ref)* sve2 api for addcarrywideninglower* sve2 api for addcarrywideningupper* adding bounds checks in addcarry helper functions* handling rmw semantics on 3rd operand in lsra and codegen* fixing formatting* updating array validation in helper functionschange-id: i9dd753d27af6041f96792ad2958a5cc4f0093ca4* adding parentheses to subexpressionschange-id: ibb95a18ad5abffae2a4b215a31412395c750ba89* update src/tests/jit/hardwareintrinsics/arm/shared/helpers.cs* update src/tests/jit/hardwareintrinsics/arm/shared/helpers.cs* update src/tests/jit/hardwareintrinsics/arm/shared/helpers.cs* update src/tests/jit/hardwareintrinsics/arm/shared/helpers.cs* update src/tests/jit/hardwareintrinsics/arm/shared/helpers.cs* update src/tests/jit/hardwareintrinsics/arm/shared/helpers.cs* update src/tests/jit/hardwareintrinsics/arm/shared/helpers.cs---------
dotnet/runtime,a13232a942c34056578c47714056a46fd4792bae,"Ldvirtftn implementation for interpreter (#116661)

Implement more complex call scenarios
- ldvirtftn based (generic virtual calls)
- code pointer based (certain static virtual calls)
- ldvirtftn path to delegate creation

And as a bonus, to keep the tests working...

Rework where we attach intepreted code to a method, so that we never put the interpreter code bytes into the vtable (with this change, the vtable, etc, always have the InterpreterPrecode in it.

Add scheme for enabling logging of the CallStubGenerator.

Fix calling convention handling for jit calling convention to interpreter calling convention for Unix X64 and Windows Arm64.",2025-06-19 23:49:32+00:00,David Wrighton,1,b0f0088a6fc03f77524d48318f9449de0c1b4afd,"Fix ExecutionManager::GetCodeMethodDesc for interpreter (#117625)

* Fix ExecutionManager::GetCodeMethodDesc for interpreter

The ExecutionManager::GetCodeMethodDesc expects that the address
passed to it is an address of actual JIT/AOT or interpreter generated
code. However, it is sometimes passed an address of the interpreter
precode, e.g. in the case when called by the
MethodTable::GetMethodDescForSlotAddress. The VTable slots need to point
to the interpreter stub so that these methods can be called by virtual
calls from native code.

This change adds a check for the interpreter precode to the
ExecutionManager::GetCodeMethodDesc and extracts the MethodDesc from the
interpreter data in case it is passed the precode address.

* Revert changes in codeman.cpp",16,571,251,"ldvirtftn implementation for interpreter (issue_ref)implement more complex call scenarios- ldvirtftn based (generic virtual calls)- code pointer based (certain static virtual calls)- ldvirtftn path to delegate creationand as a bonus, to keep the tests working...rework where we attach intepreted code to a method, so that we never put the interpreter code bytes into the vtable (with this change, the vtable, etc, always have the interpreterprecode in it.add scheme for enabling logging of the callstubgenerator.fix calling convention handling for jit calling convention to interpreter calling convention for unix x64 and windows arm64."
dotnet/runtime,536bb84d5ca09de0d553a353e00e8b91d3de8945,don't run unrelated runs when modifying cDAC (#116835),2025-06-19 23:53:04+00:00,Max Charlamb,0,,,1,5,0,don't run unrelated runs when modifying cdac (issue_ref)
dotnet/runtime,2313209e37d49196e939bcd5cd07fd8685f2dd37,"[cDAC] X86 support TailCallFrame (#116792)

* support tailcall frame",2025-06-20 02:41:07+00:00,Max Charlamb,0,,,9,71,2,[cdac] x86 support tailcallframe (issue_ref)* support tailcall frame
dotnet/runtime,0bd4424eef3729bfa4132d903e6dd078e8069504,"[cDAC] Remove references to FEATURE_EH_FUNCLETS (#116743)

* remove references to feature eh funclets in cDAC managed code
* remove FeatureEHFunclets data descriptor",2025-06-20 02:41:22+00:00,Max Charlamb,0,,,13,33,79,[cdac] remove references to feature_eh_funclets (issue_ref)* remove references to feature eh funclets in cdac managed code* remove featureehfunclets data descriptor
dotnet/runtime,281d5759608eef21d90adfa9299d9a9710a7166c,"Disable string comparison and library mode tests on Apple mobile (#116813)

* Disable string comparison tests on Apple mobile

* Disable library mode test",2025-06-20 07:17:59+00:00,Milos Kotlar,1,c158ff4424d3d7e330ccc98fffc55225238e7d32,"[Android] Add CoreCLR smoke tests for Android (#116540)

* Add CoreCLR build and test jobs for Android

* Add smoke tests for CoreCLR Android

* Remove CoreCLR Android runtime tests

* Fix formatting

* Reorder smoke test projects

* Add functional tests as smoke test

* Disable failing tests",2,4,0,disable string comparison and library mode tests on apple mobile (issue_ref)* disable string comparison tests on apple mobile* disable library mode test
dotnet/runtime,5ebfca2bb9b9c33e4a6e4db0ed2d11591f70d2b6,"Fix Thread::IsAddressInStack for interpreter (#116818)

* Fix Thread::IsAddressInStack for interpreter

The check is used at several places to verify that e.g.
`StringHandleOnStack` is really on stack. It needs to be updated to take
the interpreter stack into account tooo.

* Update src/coreclr/vm/threads.cpp

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>

* Fix interpreter stack comparison

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-06-20 11:14:10+00:00,Jan Vorlicek,1,f0168ee80ba9aca18a7e7140b2bb436defda623c,"Change g_fEEShutDown to be Volatile (#116885)

g_fEEShutDown is read without locks. Make it volatile to ensure that the
up-to-date value is read with Arm64 weak memory model.

Cleanup g_fEEShutDown flags

Fixes #106242",3,44,26,fix thread::isaddressinstack for interpreter (issue_ref)* fix thread::isaddressinstack for interpreterthe check is used at several places to verify that e.g. is really on stack. it needs to be updated to takethe interpreter stack into account tooo.* update src/coreclr/vm/threads.cpp
dotnet/runtime,8745035d270667820aa67a5828b2af87abdc9cb9,[browser] Generate javascript bundler friendly Blazor JS initializers (#116849),2025-06-20 14:16:12+00:00,Marek Fišera,0,,,2,2,3,[browser] generate javascript bundler friendly blazor js initializers (issue_ref)
dotnet/runtime,7e9140274599ea506c413e77e717b4eb315fd934,Implement Interop Type Map support in NativeAOT (#116355),2025-06-20 14:52:59+00:00,Jeremy Koritzinsky,1,72d952aa0af391e227fe7d05ee770acea8891044,"Fix TypeMap test to match trimming spec (#121937)

Fixes #121912",56,2227,82,implement interop type map support in nativeaot (issue_ref)
dotnet/runtime,cd1eb0637bcdbf3326e9b1d63ea9e0dd4103c259,"[HTTP/3] Handle all QUIC exceptions in H/3 stream (#116851)

* Handle all QuicExceptions in H/3

* Added test",2025-06-20 14:54:35+00:00,Marie Píchová,1,0c7d43e7541f284b2cc8635b04ef08ede39f8186,"Http3RequestStream: read EOS after trailers (#117026)

This fixes the primary bug captured in #60118 without attempting to drain the stream and without touching the Dispose logic.

We expect trailers to be sent in a single HEADER frame, which is read by `ReadHeadersAsync` but that method doesn't read the EOS. Despite of that, we set `_responseDataPayloadRemaining = -1` afterwards

https://github.com/dotnet/runtime/blob/27c8fe04453195039686fb375a73fac7ff1ea968/src/libraries/System.Net.Http/src/System/Net/Http/SocketsHttpHandler/Http3RequestStream.cs#L577-L583

which then makes `Http3RequestStream` pretend that it reached EOS in subsequent read calls without ever trying to issue the read to the underlying `QuicStream`:

https://github.com/dotnet/runtime/blob/0d628dae1cb5b8d0eb76d9549134edfe30d6219c/src/libraries/System.Net.Http/src/System/Net/Http/SocketsHttpHandler/Http3RequestStream.cs#L1340-L1344

This can be easily fixed by issuing one more read after reading the headers.",3,44,0,[http/3] handle all quic exceptions in h/3 stream (issue_ref)* handle all quicexceptions in h/3* added test
dotnet/runtime,8dbc826ca7d2746a3e0da2fc95728a66dfcd8e4f,Use emitLastGroup that works for single/multi align instructions (#116843),2025-06-20 16:06:02+00:00,Kunal Pathak,0,,,1,4,3,use emitlastgroup that works for single/multi align instructions (issue_ref)
dotnet/runtime,296780df4ebeb237455f7e465cbf1df181da277d,"JIT: Don't transform infinite loops in `fgOptimizeBranchToEmptyUnconditional` (#116822)

Fixes #116701.",2025-06-20 16:32:43+00:00,Aman Khalid,1,656664d0304a8c82047b8c3fb95286c9c49b7ef9,"JIT: Update switch likelihoods after peeling dominant case (#116984)

Fixes #116962. After peeling a switch block such that the switch is dominated by a conditional check for the dominant case, set the dominant switch case's edge likelihood to zero, and redistribute this extra likelihood among the other switch successor edges. This also replaces BBswtDesc::bbsDominantFraction with the edge likelihood of the dominant case, as the latter value is maintained through flow updates.",1,12,1,jit: don't transform infinite loops in (issue_ref)fixes issue_ref.
dotnet/runtime,7dda487eec9c014a445c6123b4e5aa11d98b1a3a,"[tests][exceptions] Abbreviate long native test path (#116841)

* [Tests][Exceptions] Abbreviate UnhandeldExceptionHandler tests

* [Tests][Exceptions] Rename to distinguish from UnhandledExceptionHandler tests",2025-06-20 18:37:28+00:00,Mitchell Hwang,0,,,13,43,43,[tests][exceptions] abbreviate long native test path (issue_ref)* [tests][exceptions] abbreviate unhandeldexceptionhandler tests* [tests][exceptions] rename to distinguish from unhandledexceptionhandler tests
dotnet/runtime,aa6cca9f2bb562b7c4ce884a837ec9d894886dbc,"[cDAC] X86 support HijackFrame (#116829)

* x86 hijackframe support",2025-06-20 18:56:10+00:00,Max Charlamb,0,,,5,47,4,[cdac] x86 support hijackframe (issue_ref)* x86 hijackframe support
dotnet/runtime,03644f03651cfc434e0e10b4919f3d08dd15d825,update comment (#116869),2025-06-20 19:28:07+00:00,Kunal Pathak,0,,,1,1,1,update comment (issue_ref)
dotnet/runtime,05105f1fd56e40a9767fd4a0527f1abdb8b0794b,"[cDAC] Move ARM64 Stackwalking to managed code (#116717)

* managed ARM64Unwinder",2025-06-20 20:03:59+00:00,Max Charlamb,1,337ac752a02c9758ffad4b89e998213dab684613,"[cDAC] Ensure cDAC is used in test runs (#117100)

* fix copying cDAC into testhost
* fix bug in AMD64Unwinder
* exactly match DAC behavior for initial context flags",2,1264,1,[cdac] move arm64 stackwalking to managed code (issue_ref)* managed arm64unwinder
dotnet/runtime,3a6a06b96bd93667e4e982c6b20998b27cfc5de2,"[Json] Remove unnecessary Debug.Asserts (#116833)

* [Json] Remove unnecessary Debug.Asserts

* tests",2025-06-20 20:08:18+00:00,Brennan,1,c2e2de7d21af6a93d4246cc11ccedb73d4208a6e,"Add Try methods to JsonObject (#111229)

* Implement TryAdd and TryAdd with index out parameter for JsonObject

* Add exception to docs for TryGetPropertyValue without out index

* Add overload for TryGetPropertyValue with out index parameter

* Modify TryGetPropertyValue to use its overload with the index param

* Add new functions to ref

* Add unit tests

* Fix build for .NET 9

* Address remaining feedback.

---------

Co-authored-by: Eirik Tsarpalis <eirik.tsarpalis@gmail.com>",4,16,2,[json] remove unnecessary debug.asserts (issue_ref)* [json] remove unnecessary debug.asserts* tests
dotnet/runtime,0721dd8def15a0e8257394c438e81f462fa5d5cb,Remove AppDomain parameter for Debugger::InitIPCEvent (#116871),2025-06-20 20:33:00+00:00,Elinor Fung,0,,,2,57,111,remove appdomain parameter for debugger::initipcevent (issue_ref)
dotnet/runtime,55abc37c67850c99d630bdcc167b8652b2d71ae4,Add equality to MLDsaAlgorithm and add tests,2025-06-20 22:15:41+00:00,Kevin Jones,0,,,5,144,2,add equality to mldsaalgorithm and add tests
dotnet/runtime,647b4f5792444c431aca0144ee9144f10d3f7d71,"JIT: avoid creating unnecessary temp for indirect virtual stub calls (#116875)

We don't need to spill the stub address if it's already a local.

Peeled off from #116771.",2025-06-20 22:20:55+00:00,Andy Ayers,0,,,1,9,6,jit: avoid creating unnecessary temp for indirect virtual stub calls (issue_ref)we don't need to spill the stub address if it's already a local.peeled off from issue_ref.
dotnet/runtime,e3036720b02aaf4c69879170bcff8cc4e1cbcfe6,Add MLDsaCng into Microsoft.Bcl.Cryptography (#116678),2025-06-20 22:37:44+00:00,Pranav Senthilnathan,1,5545d5208ebc71871744f4e00d289ba437168cd7,Fix MLDsaImplementation on Windows to throw a more clear exception and add a test,27,854,363,add mldsacng into microsoft.bcl.cryptography (issue_ref)
dotnet/runtime,953ccfbc21d653efaf2441ff3e2dbc288fde415d,"Make sure to remove operand of TernaryLogic node (#116876)

* Make sure to replace the operand

* add test cases",2025-06-21 00:23:21+00:00,Kunal Pathak,1,f124c0efbbd527b730297c49758967ec110e35fe,"Allow the vector and scalar code paths for min, max, and fma APIs to share logic (#116804)

* Allow the vector and scalar code paths for min/max APIs to share logic

* Allow the vector and scalar code paths for fma APIs to share logic

* Ensure max is handled for simdSize 32 and 64

* Fix the riscv64 build

* Ensure integer min/max magnitude is handled

* Ensure the parameter ordering is correct

* Apply formatting patch

* Ensure that the remaining code paths execute when importing minMax intrinsics

* Ensure we don't pop the args on platforms which aren't treating min/max as intrinsic

* Responding to PR feedback

* Check IsVectorNegativeZero using the node's simd base type",3,86,2,make sure to remove operand of ternarylogic node (issue_ref)* make sure to replace the operand* add test cases
dotnet/runtime,4314ca34f3c620c180ef8f7fc28973af7ff47ad4,Tensor doc improvements (#116562),2025-06-21 06:27:33+00:00,Genevieve Warren,0,,,2,8,6,tensor doc improvements (issue_ref)
dotnet/runtime,f124c0efbbd527b730297c49758967ec110e35fe,"Allow the vector and scalar code paths for min, max, and fma APIs to share logic (#116804)

* Allow the vector and scalar code paths for min/max APIs to share logic

* Allow the vector and scalar code paths for fma APIs to share logic

* Ensure max is handled for simdSize 32 and 64

* Fix the riscv64 build

* Ensure integer min/max magnitude is handled

* Ensure the parameter ordering is correct

* Apply formatting patch

* Ensure that the remaining code paths execute when importing minMax intrinsics

* Ensure we don't pop the args on platforms which aren't treating min/max as intrinsic

* Responding to PR feedback

* Check IsVectorNegativeZero using the node's simd base type",2025-06-21 12:11:31+00:00,Tanner Gooding,1,c62899f50baed1e96e05e942a3de8ac6349643cb,"fix Avx512F.Classify instruction mapping (#117067)

Co-authored-by: Tanner Gooding <tagoo@outlook.com>",13,1365,1257,"allow the vector and scalar code paths for min, max, and fma apis to share logic (issue_ref)* allow the vector and scalar code paths for min/max apis to share logic* allow the vector and scalar code paths for fma apis to share logic* ensure max is handled for simdsize 32 and 64* fix the riscv64 build* ensure integer min/max magnitude is handled* ensure the parameter ordering is correct* apply formatting patch* ensure that the remaining code paths execute when importing minmax intrinsics* ensure we don't pop the args on platforms which aren't treating min/max as intrinsic* responding to pr feedback* check isvectornegativezero using the node's simd base type"
dotnet/runtime,b58471949c4d99b2df97a35deb2677e90d2be66c,"Cleanup unused code from nativeaot and ilc (#116480)

* Use BitConverter

* SequenceEqual(array) bounds to span

* Use CollectionsMarshal.AsSpan

* EqualOnlyComparerHelper

* Count -> !Any

* Unnecessary AsEnumerable

* Remove unnecessary ToList call

* Delete unnecessary Select(.ToString)

* Cleanup FlagsToString

---------

Co-authored-by: Austin Wise <AustinWise@gmail.com>",2025-06-22 05:37:54+00:00,Huo Yaoyuan,1,1e89955954d1daf80a0a6fef45da5bb51e5b6087,"Fix typo: `SequenceEquals` -> `SequenceEqual` (#119937)

* `SequenceEquals` -> `SequenceEqual`

* `CheckSequenceEquals` -> `CheckSequenceEqual`

* `SequenceEqualsNullData_String` -> `SequenceEqual_NullData_String`

* `SequenceEquals` -> `SequenceEqual`",7,63,334,cleanup unused code from nativeaot and ilc (issue_ref)* use bitconverter* sequenceequal(array) bounds to span* use collectionsmarshal.asspan* equalonlycomparerhelper* count -> !any* unnecessary asenumerable* remove unnecessary tolist call* delete unnecessary select(.tostring)* cleanup flagstostring---------
dotnet/runtime,e3d3d910e7b79cefe6ebd6f785e9b978cad7ec40,"Enable vectorization of TensorPrimitives.ConvertTruncating for float/double (#116895)

* Enable vectorization of TensorPrimitives.ConvertTruncating for float/double

These were disabled against a PR that has already been merged.

* Address PR feedback",2025-06-22 07:02:59+00:00,Stephen Toub,0,,,1,24,4,enable vectorization of tensorprimitives.converttruncating for float/double (issue_ref)* enable vectorization of tensorprimitives.converttruncating for float/doublethese were disabled against a pr that has already been merged.* address pr feedback
dotnet/runtime,9a4be5b56d81aa04c7ea687c02b3f4e64c83761b,"Optimize '[Guid]' parsing on Native AOT (#116324)

* Optimize '[Guid]' parsing on Native AOT

* Avoid copying UTF8 buffer entirely

* Add missing 'IsNil' check

Co-authored-by: kasperk81 <83082615+kasperk81@users.noreply.github.com>
Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-06-22 21:43:31+00:00,Sergio Pedri,0,,,3,33,1,optimize '[guid]' parsing on native aot (issue_ref)* optimize '[guid]' parsing on native aot* avoid copying utf8 buffer entirely* add missing 'isnil' check
dotnet/runtime,8234fe364914d738ef3be766b8f2485985c1db05,"Simplify TryConvert for Half, Int128 and UInt128 (#116902)",2025-06-22 23:52:55+00:00,Jan Kotas,1,6f4bb49757c0f78ab27dfd43665e757bf42ed431,"Fix ILogB for subnormal values (#116913)

* Fix LeadingZeroCount in ILogB

* Add test",7,44,16,"simplify tryconvert for half, int128 and uint128 (issue_ref)"
dotnet/runtime,f6b13d816ea4ca5ba6aaaa5f3f08f20b6fadd3d8,"Automated bump of chrome version (#116893)

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>",2025-06-23 11:20:20+00:00,github-actions[bot],0,,,1,4,4,automated bump of chrome version (issue_ref)
dotnet/runtime,0f3db682d7fee52f27766d1b662558f8ee423f7c,"Remove unsafe keyword from some SVE2 intrinsics (#116915)

These were mistakenly added during development.",2025-06-23 16:07:01+00:00,snickolls-arm,0,,,2,56,56,remove unsafe keyword from some sve2 intrinsics (issue_ref)these were mistakenly added during development.
dotnet/runtime,5c95e6e8e2796314ec6737e4a128110f66a28740,"Override type load limit in AssemblyBinder::GetNameForDiagnosticsFromManagedALC (#116900)

GetNameForDiagnosticsFromManagedALC calls into user code that can trigger more type loading as side-effect.",2025-06-23 17:29:50+00:00,Jan Kotas,0,,,1,2,0,override type load limit in assemblybinder::getnamefordiagnosticsfrommanagedalc (issue_ref)getnamefordiagnosticsfrommanagedalc calls into user code that can trigger more type loading as side-effect.
dotnet/runtime,383f9afcabc6113b0dad319339068b3800b5bb53,Ensure FMA optimizations kick in under embedded broadcast (#116891),2025-06-23 17:56:49+00:00,Tanner Gooding,1,f5fee8f0f3b3e1d15c9942f70738e4c34a96e481,"Update fgMorphHWIntrinsic to more closely follow fgMorphSmpOp (#116892)

* Update fgMorphHWIntrinsic to more closely follow fgMorphSmpOp

* Cover some more arithmetic and logical operations for hwintrinsic morph

* Add support for negating hwintrinsic compares

* Ensure that reversal of floating-point hwintrinsic compare operations is done correctly

* Ensure that the morphed op2 is taken

* Ensure we don't create a CvtMaskToVector node with the wrong base type

* Apply formatting patch

* Ensure the operands are set when changing the intrinsic ID",3,115,79,ensure fma optimizations kick in under embedded broadcast (issue_ref)
dotnet/runtime,baec7216ed1e2461d18ca3e2282f32a704e14584,"Support Null configuration (#116677)

* Support Null configuration

* Remove the config switch

* Fix configuration providers failing tests

* Minor clean-up",2025-06-23 18:22:11+00:00,Tarek Mahmoud Sayed,1,d47e24caba2a686617c57422a4383f7aabcdd5e7,"Fix for Configuration Binder Source Gen duplicate field names (#120135)

* Fix for Configuration Binder Source Gen duplicate field names

Configuration Binder source generator generates duplicate field names
where the same class name is present in different namespaces.

Fix #119458

* Replace ""."" with ""__"" to solve Namespace.A vs
NamespaceA name clashes. ""SymbolDisplayMiscellaneousOptions.UseSpecialTypes"" - is no longer a problem.
Added ""___"" as generic type delimiter to solve A.BC vs AB.c name clashes.
Shortened maximum identifier length to slightly improve code readability.

* Regenerate InterceptableAttributeVersion=0 baselines

---------

Co-authored-by: Alex Lutsenko <Alex.Lutsenko@triforce.com.au>",79,3033,1219,support null configuration (issue_ref)* support null configuration* remove the config switch* fix configuration providers failing tests* minor clean-up
dotnet/runtime,594f85c5a32fd1bfc5cc4e71ead15d8630a47244,"Vectorize TensorPrimitives.CosineSimilarity<Half> (#116898)

Vectorize for Half by processing it as shorts, using the existing widening routine to two vectors of floats, and operating on those floats. Even for non-vectorized, this improves throughput as each intermediate operation is operating on floats rather than constantly needing to convert back to Half.",2025-06-23 21:13:52+00:00,Stephen Toub,0,,,1,243,63,"vectorize tensorprimitives.cosinesimilarity<half> (issue_ref)vectorize for half by processing it as shorts, using the existing widening routine to two vectors of floats, and operating on those floats. even for non-vectorized, this improves throughput as each intermediate operation is operating on floats rather than constantly needing to convert back to half."
dotnet/runtime,915080de7232e904de03932373d9cafc156c1dc8,"Implement CORINFO_FIELD_INTRINSIC_ZERO and _ISLITTLEENDIAN (#116853)

* Implement CORINFO_FIELD_INTRINSIC_ZERO and _ISLITTLEENDIAN

These has shown up on the runtime startup path

* PR feedback

* Move CORINFO_FIELD_INTRINSIC_EMPTY_STRING

Also add tests for the new intrinsic field accessors",2025-06-23 22:28:00+00:00,Jan Vorlicek,0,,,2,43,16,implement corinfo_field_intrinsic_zero and _islittleendian (issue_ref)* implement corinfo_field_intrinsic_zero and _islittleendianthese has shown up on the runtime startup path* pr feedback* move corinfo_field_intrinsic_empty_stringalso add tests for the new intrinsic field accessors
dotnet/runtime,4e5b24b8e3a4250e20783adad8cd0745c9c0f137,"Update ILLink analyzer generated testcases (#116932)

These tests were removed in https://github.com/dotnet/runtime/pull/107380.
The generated files should have been updated there too.",2025-06-23 22:53:28+00:00,Sven Boemer,0,,,1,0,18,update illink analyzer generated testcases (issue_ref)these tests were removed in the generated files should have been updated there too.
dotnet/runtime,398e43cbc70d3cc892fe0f94aacf5ef1ce70d482,support nullable types in mono BitCast intrinsic (#116874),2025-06-23 22:56:43+00:00,Larry Ewing,0,,,1,0,10,support nullable types in mono bitcast intrinsic (issue_ref)
dotnet/runtime,0b22cd48abe83738330f0f37c3f9eff2ffbb540e,add cdac support ISOSDacInterface16 (#116938),2025-06-24 00:33:45+00:00,Max Charlamb,0,,,2,17,1,add cdac support isosdacinterface16 (issue_ref)
dotnet/runtime,ad13be0b89e7b9ce2dc6a5d7ffbd7b6134a9d0b8,"adding debugger attributes (#116935)

Co-authored-by: Rachel Jarvi <racheljarvi@microsoft.com>",2025-06-24 00:44:08+00:00,Rachel,0,,,2,12,1,adding debugger attributes (issue_ref)
dotnet/runtime,d9f9d3db4bd787a5e392b1d7790eb4671ef5a7f2,"[EventPipe][UserEvents] Add copy of user_events structs (#116930)

* [EventPipe][UserEvents] Add copy of user_events structs

* Use hex representation

* Various compiler warnings

__attribute__((__packed__)) isn't declared in src/native
uint8_t __reserved as a field name will somehow be interpreted as
unsigned char",2025-06-24 02:40:59+00:00,Mitchell Hwang,0,,,2,64,7,[eventpipe][userevents] add copy of user_events structs (issue_ref)* [eventpipe][userevents] add copy of user_events structs* use hex representation* various compiler warnings__attribute__((__packed__)) isn't declared in src/nativeuint8_t __reserved as a field name will somehow be interpreted asunsigned char
dotnet/runtime,5b8b862ebc8148df05236814268002f9324ed062,"Adding push2/pop2 (#116035)

* Add APX knob

* Adding push2/pop2 + ppx.

* Update unwind logic

* Clean up + Revert ""Add APX knob""

* Addressing review comments.

* Formatting + Review changes",2025-06-24 05:33:39+00:00,DeepakRajendrakumaran,1,40e6d1cb875efcec2ffddad1e94d3e0db72b0f92,"Use the better pseudo-names where available on xarch (#116923)

* Use the better pseudo-names where available on xarch

* Refactor the display constant logic for better reuse

* Resolve a conflict change that wasn't caught by the merge",13,366,6,"adding push2/pop2 (issue_ref)* add apx knob* adding push2/pop2 + ppx.* update unwind logic* clean up + revert ""add apx knob""* addressing review comments.* formatting + review changes"
dotnet/runtime,1c4f4685b86a7d9916e78ffd93f4f338b51fc268,Streamline ConcurrentDictionary.Enumerator.MoveNext (#116949),2025-06-24 12:29:48+00:00,Stephen Toub,0,,,1,19,44,streamline concurrentdictionary.enumerator.movenext (issue_ref)
dotnet/runtime,f5fee8f0f3b3e1d15c9942f70738e4c34a96e481,"Update fgMorphHWIntrinsic to more closely follow fgMorphSmpOp (#116892)

* Update fgMorphHWIntrinsic to more closely follow fgMorphSmpOp

* Cover some more arithmetic and logical operations for hwintrinsic morph

* Add support for negating hwintrinsic compares

* Ensure that reversal of floating-point hwintrinsic compare operations is done correctly

* Ensure that the morphed op2 is taken

* Ensure we don't create a CvtMaskToVector node with the wrong base type

* Apply formatting patch

* Ensure the operands are set when changing the intrinsic ID",2025-06-24 14:46:51+00:00,Tanner Gooding,1,5177e08100c133c731910fbfb6799dda53b8c0f3,"JIT: GDV Cleanup Phase (#116992)

If a method has GDVs and the JIT is able to to improve types during inlining,
run a pass after inlining that tries to resolve GDVs using those improved types.

This typically happens when the object tested in a GDV is returned from some kind of
factory method where the exact type becomes apparent only after inlining.

Contributes to #25448.",5,979,264,update fgmorphhwintrinsic to more closely follow fgmorphsmpop (issue_ref)* update fgmorphhwintrinsic to more closely follow fgmorphsmpop* cover some more arithmetic and logical operations for hwintrinsic morph* add support for negating hwintrinsic compares* ensure that reversal of floating-point hwintrinsic compare operations is done correctly* ensure that the morphed op2 is taken* ensure we don't create a cvtmasktovector node with the wrong base type* apply formatting patch* ensure the operands are set when changing the intrinsic id
dotnet/runtime,4aa5460ec2ef7c86e77945ec13680de0a500fe1b,"[HTTP] Stricter header value validation (#116634)

* Validate headers for latin 1 and exclude \0

* Fix and tests

* More tests / fixes, WIP

* Post rebase fix

* Moved and fixed tests, fixed cookies

* Fixed windows part

* Feedback

* Fix tests - do not run on browser

* Add cookie specific tests

* Assert header value in possitive tests

* Expanded and fixed tests on Windows.

* Fix tests.

* Fix for huffman

* Damn this H/2 Huffman non-sense, give me some strings please, not this binary soup",2025-06-24 16:21:13+00:00,Marie Píchová,1,ddff3a3850f78de3fdff19e681e9fb43e6cb4d65,"[HTTP] Fix new header test (#117202)

* Use loopback server since tha validation happens when serializing to the wire

* Fix test for WinHTTP",23,268,41,"[http] stricter header value validation (issue_ref)* validate headers for latin 1 and exclude \0* fix and tests* more tests / fixes, wip* post rebase fix* moved and fixed tests, fixed cookies* fixed windows part* feedback* fix tests - do not run on browser* add cookie specific tests* assert header value in possitive tests* expanded and fixed tests on windows.* fix tests.* fix for huffman* damn this h/2 huffman non-sense, give me some strings please, not this binary soup"
dotnet/runtime,aa70ad659a8411853bc640c3155ceff59b9cc24c,"run Http3_WaitForConnection_RecordedWhenWaitingForStream  with RemoteExecutor (#116741)

#114083 incorrectly added a test that uses `ActivityRecorder` without process isolation via `RemoteExecutor`.

This may lead to the registered `ActivityListener` callbacks firing from unrelated tests running in parallel. I started seeing frequent local failures because of this, the stack trace in https://github.com/dotnet/runtime/issues/116279#issuecomment-2936959031 also seems to be related.",2025-06-24 16:27:48+00:00,Anton Firszov,1,bb374a1653c5cc5964ddb9a730983030ee48d634,"[HTTP] Fix new diagnostic test (#117248)

Depending on the timing of the cancellation, the exception type can be either `OperationCanceledException` or `TaskCanceledExcption`, we need to allow both. The PR also refactors the assertions outside of the `ActivityListener` callback, so we get better error messages if something fails in the future. (This test has been recently added in #116269.)",2,54,50,"run http3_waitforconnection_recordedwhenwaitingforstream with remoteexecutor (issue_ref)issue_ref incorrectly added a test that uses without process isolation via .this may lead to the registered callbacks firing from unrelated tests running in parallel. i started seeing frequent local failures because of this, the stack trace in #issuecomment-2936959031 also seems to be related."
dotnet/runtime,102c597edb449a23e966330a8e14980d44ac205f,"Add trimming intrinsic for EventInfo.EventHandlerType.GetMethod(""Invoke"") (#116931)

Because ILLink and ILC keep the `Invoke` method on delegates, there
shouldn't be a warning for the common pattern of
`EventInfo.EventHandlerType.GetMethod(""Invoke"")`.

It's possible to break this logic by using a custom `EventInfo`, but
we don't support the scenario where this breaks the contract that
`EventHandlerType` should be a delegate.",2025-06-24 16:49:43+00:00,Sven Boemer,1,18497e1ced9b09a0afe91f0222e4b154ddf05b3c,"Use runtime formatting for ILLink (#116941)

This change was made by deleting the ILLink .editorconfig and running
`dotnet format` over the various ILLink projects. Some of the
.editorconfig settings were then added back because they were not
fixed automatically (and are enforced during build).",7,133,9,"add trimming intrinsic for eventinfo.eventhandlertype.getmethod(""invoke"") (issue_ref)because illink and ilc keep the method on delegates, thereshouldn't be a warning for the common pattern of.it's possible to break this logic by using a custom , butwe don't support the scenario where this breaks the contract that should be a delegate."
dotnet/runtime,e40ca0546f95ebd22fa9a20a22d8a75d9c309654,Disable WER for host test apps that intentionally crash (#116936),2025-06-24 19:25:05+00:00,Elinor Fung,0,,,1,13,0,disable wer for host test apps that intentionally crash (issue_ref)
dotnet/runtime,368466be380f355249dcd7e4040f0086b73f5988,"[clr-interp] Implement support for `CEE_CASTCLASS` and static field helper (#116957)

* Implement CEE_CASTCLASS and CORINFO_FIELD_STATIC_GENERICS_STATIC_HELPER

* CastClass and IsInst share the same logic

* Change PushInterpType argument to InterpTypeO",2025-06-24 19:42:52+00:00,Milos Kotlar,0,,,1,34,7,[clr-interp] implement support for and static field helper (issue_ref)* implement cee_castclass and corinfo_field_static_generics_static_helper* castclass and isinst share the same logic* change pushinterptype argument to interptypeo
dotnet/runtime,9ec21903ae9c7f6312b868c05d6e45ce68e725c1,"Make SingleFile BundleID the expected length (12 bytes) (#116656)

Originally, the BundleID of a singlefile bundle was 12 characters long from using GetRandomFileName, but this was changed to be a substring of a deterministic hash of a file in #52930. That change used SubString(12) instead of SubString(0, 12), so the BundleID was (HashAsBase64Length - 12) characters long. The BundleID is encoded as a variable-length field, so updating the length didn't cause issues then and isn't expected to cause issues here, and doesn't require a version bump.",2025-06-24 20:10:10+00:00,Jackson Schuster,0,,,1,5,4,"make singlefile bundleid the expected length (12 bytes) (issue_ref)originally, the bundleid of a singlefile bundle was 12 characters long from using getrandomfilename, but this was changed to be a substring of a deterministic hash of a file in issue_ref. that change used substring(12) instead of substring(0, 12), so the bundleid was (hashasbase64length - 12) characters long. the bundleid is encoded as a variable-length field, so updating the length didn't cause issues then and isn't expected to cause issues here, and doesn't require a version bump."
dotnet/runtime,18497e1ced9b09a0afe91f0222e4b154ddf05b3c,"Use runtime formatting for ILLink (#116941)

This change was made by deleting the ILLink .editorconfig and running
`dotnet format` over the various ILLink projects. Some of the
.editorconfig settings were then added back because they were not
fixed automatically (and are enforced during build).",2025-06-24 21:04:27+00:00,Sven Boemer,1,768732354624b1a9c14f08d9e6f100758acf893e,"Fix type parameter mapping for static closures (#118607)

Roslyn can generate code (specifically for nested async lambda state
machines) where a static closure environment is referenced from a
nested type of the display class. Handle this case by detecting nested
classes, and never tracking type parameter instantiations from nested
classes to outer classes. This fixes a reported stack overflow in
ILLink and ILC.",1659,140892,135923,use runtime formatting for illink (issue_ref)this change was made by deleting the illink .editorconfig and running over the various illink projects. some of the.editorconfig settings were then added back because they were notfixed automatically (and are enforced during build).
dotnet/runtime,5c295b415c67459594001b0f89fc61407ab177fa,"Extend a few TensorPrimitive optimizations to nint/nuint (#116945)

* Extend a few TensorPrimitive optimizations to nint/nuint

* Address feedback

* Address feedback",2025-06-25 00:44:43+00:00,Stephen Toub,0,,,4,61,54,extend a few tensorprimitive optimizations to nint/nuint (issue_ref)* extend a few tensorprimitive optimizations to nint/nuint* address feedback* address feedback
dotnet/runtime,f77a7f574ccc52efc5842a4caee55d632746c5f9,"Enable TensorPrimitive vectorization for Half for lots of methods (#116934)

* Enable TensorPrimitive vectorization for Half for lots of methods

* Rename AsShort to AsInt16",2025-06-25 00:59:38+00:00,Stephen Toub,1,d757c03be2c39968bca1db2ce9349fce8f1463a3,"Add some additional Tensor APIs (#117739)

* Remove unnecessary usings from Tensor code

* Add the TensorMarshal class

* Fix the naming of various tensor create APIs to remove ambiguities

* Add support for directly getting a contiguous span from a tensor

* Update the compatibility supressions file for S.N.Tensors

* Add tests for the new APIs

* Fix some tests

* Ensure the test calls TryGetSpan",60,1331,123,enable tensorprimitive vectorization for half for lots of methods (issue_ref)* enable tensorprimitive vectorization for half for lots of methods* rename asshort to asint16
dotnet/runtime,cdb1b8f42d5925c95e6f111f08eabf242f8565d4,[browser] JSExport missing global (#116960),2025-06-25 09:03:57+00:00,Pavel Savara,0,,,2,3,3,[browser] jsexport missing global (issue_ref)
dotnet/runtime,a0397e7959101ed4ae4b808f7ca1e45458d69765,"[RISC-V] Reverse unordered FP comparisons in branches (#115943)

* Reverse unordered comparisons

* Codegen haircut",2025-06-25 09:12:04+00:00,Tomasz Sowiński,0,,,2,37,56,[risc-v] reverse unordered fp comparisons in branches (issue_ref)* reverse unordered comparisons* codegen haircut
dotnet/runtime,e2c99a9ad53cacda29985f9ffd5cf02be29ef201,"Capture build-id in module load events on Linux (#116865)

Module load events on Windows carry a GUID of the matching PDB. This is used to verify the PDB that is used to analyze traces matches the one of the program.

On Linux, we don't have PDBs and PDB GUID. Instead, we have build-id. Build-id is a binary blob of an unspecified length that is stored both in .debug files and in the program binary. Typically, it is 20 bytes (SHA-1). Since 20 is more than 16, it unfortunately doesn't fit in the space we have. Emit a new version of the event that can fit it.",2025-06-25 09:48:20+00:00,Michal Strehovský,0,,,6,199,10,"capture build-id in module load events on linux (issue_ref)module load events on windows carry a guid of the matching pdb. this is used to verify the pdb that is used to analyze traces matches the one of the program.on linux, we don't have pdbs and pdb guid. instead, we have build-id. build-id is a binary blob of an unspecified length that is stored both in .debug files and in the program binary. typically, it is 20 bytes (sha-1). since 20 is more than 16, it unfortunately doesn't fit in the space we have. emit a new version of the event that can fit it."
dotnet/runtime,aeee892ffc06103ab628dffcc7076c5316c18c6d,"ISOSDacInterface::GetMethodDescName use proper path separator in cross-dac scenarios (#116981)

* use TARGET_* OS specific path separator",2025-06-25 12:43:17+00:00,Max Charlamb,0,,,1,10,1,isosdacinterface::getmethoddescname use proper path separator in cross-dac scenarios (issue_ref)* use target_* os specific path separator
dotnet/runtime,c0c7f02be7285a1ef0d3022b8c2f38be4025545f,[RISC-V] Fix a typo in GC comment (#117013),2025-06-25 12:44:00+00:00,Sanghyeon Lee,1,a0c5625a8db02927113b66e776dbb670099acfbd,Fix typos in GC comments (#117036),1,1,1,[risc-v] fix a typo in gc comment (issue_ref)
dotnet/runtime,0382bef54653be7fa54e3ddf116696e9069f4e55,"Fix ClientWebSocket hang with HttpVersionPolicy.RequestVersionOrHigher by correcting operator precedence (#116817)

* Initial plan for issue

* Fix ClientWebSocket hang with HttpVersionPolicy.RequestVersionOrHigher by correcting operator precedence

Co-authored-by: CarnaViire <3184057+CarnaViire@users.noreply.github.com>

* Fix test to use LoopbackServer.Options with SSL and WebSocketEndpoint for proper HTTP/2 validation

Co-authored-by: CarnaViire <3184057+CarnaViire@users.noreply.github.com>

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: CarnaViire <3184057+CarnaViire@users.noreply.github.com>",2025-06-25 15:54:43+00:00,Copilot,1,1df4e5231ea9ce2efac8dbc0eaede7cd4a928324,Fix test causing assert (#117507),2,43,2,fix clientwebsocket hang with httpversionpolicy.requestversionorhigher by correcting operator precedence (issue_ref)* initial plan for issue* fix clientwebsocket hang with httpversionpolicy.requestversionorhigher by correcting operator precedence
dotnet/runtime,3224c6cb16bbca7b7a49680f2d1ada188c70406b,"Implement various SVE2 Right Shift intrinsics (#116914)

Includes:
* ShiftRightAndInsert
* ShiftRightArithmeticAdd
* ShiftRightArithmeticNarrowingSaturateEven
* ShiftRightArithmeticNarrowingSaturateOdd
* ShiftRightArithmeticNarrowingSaturateUnsignedEven
* ShiftRightArithmeticNarrowingSaturateUnsignedOdd
* ShiftRightArithmeticRounded
* ShiftRightArithmeticRoundedAdd
* ShiftRightArithmeticRoundedNarrowingSaturateEven
* ShiftRightArithmeticRoundedNarrowingSaturateOdd
* ShiftRightArithmeticRoundedNarrowingSaturateUnsignedEven
* ShiftRightArithmeticRoundedNarrowingSaturateUnsignedOdd
* ShiftRightLogicalAdd
* ShiftRightLogicalNarrowingEven
* ShiftRightLogicalNarrowingOdd
* ShiftRightLogicalRounded
* ShiftRightLogicalRoundedAdd
* ShiftRightLogicalRoundedNarrowingEven
* ShiftRightLogicalRoundedNarrowingOdd
* ShiftRightLogicalRoundedNarrowingSaturateOdd
* ShiftRightLogicalRoundedNarrowingSaturateEven",2025-06-25 16:10:38+00:00,snickolls-arm,0,,,7,1737,72,implement various sve2 right shift intrinsics (issue_ref)includes:* shiftrightandinsert* shiftrightarithmeticadd* shiftrightarithmeticnarrowingsaturateeven* shiftrightarithmeticnarrowingsaturateodd* shiftrightarithmeticnarrowingsaturateunsignedeven* shiftrightarithmeticnarrowingsaturateunsignedodd* shiftrightarithmeticrounded* shiftrightarithmeticroundedadd* shiftrightarithmeticroundednarrowingsaturateeven* shiftrightarithmeticroundednarrowingsaturateodd* shiftrightarithmeticroundednarrowingsaturateunsignedeven* shiftrightarithmeticroundednarrowingsaturateunsignedodd* shiftrightlogicaladd* shiftrightlogicalnarrowingeven* shiftrightlogicalnarrowingodd* shiftrightlogicalrounded* shiftrightlogicalroundedadd* shiftrightlogicalroundednarrowingeven* shiftrightlogicalroundednarrowingodd* shiftrightlogicalroundednarrowingsaturateodd* shiftrightlogicalroundednarrowingsaturateeven
dotnet/runtime,385083c376b7c526595f925f3018476c4c15a6dc,"[cDAC] ARM Stackwalking (#116645)

* Add ARMContext, ARMFrameHandler, and ARMUnwinder
* ARM SoftwareExceptionFrames support
* ARM InlinedCallFrame support
* ARM TransitionFrame support
* ARM FaultingExceptionFrame support
* ARM HijackFrame support",2025-06-25 16:32:42+00:00,Max Charlamb,1,1a45e47c56084bb17c7af124057b9ff5aa32f062,"Fix illumos compile error in coreclr/vm/appdomain.hpp (#117462)

src/coreclr/vm/appdomain.hpp:1934:40: error: declaration of 'constexpr SystemDomain** const cdac_data<SystemDomain>::SystemDomain' changes meaning of 'SystemDomain' [-Wchanges-meaning]
   1934 |     static constexpr PTR_SystemDomain* SystemDomain = &SystemDomain::m_pSystemDomain;
        |                                        ^~~~~~~~~~~~
  src/coreclr/vm/appdomain.hpp:1934:56: note: used here to mean 'class SystemDomain'
   1934 |     static constexpr PTR_SystemDomain* SystemDomain = &SystemDomain::m_pSystemDomain;
        |                                                        ^~~~~~~~~~~~
  src/coreclr/vm/appdomain.hpp:1629:7: note: declared here
   1629 | class SystemDomain final
        |       ^~~~~~~~~~~~",19,1660,46,"[cdac] arm stackwalking (issue_ref)* add armcontext, armframehandler, and armunwinder* arm softwareexceptionframes support* arm inlinedcallframe support* arm transitionframe support* arm faultingexceptionframe support* arm hijackframe support"
dotnet/runtime,ba53a92ebdfbd3af9b23f1d4bb738872d2784e21,"JIT: switch escape analysis flagging to look for calls returning `IEnumerator<T>` (#116978)

Conditional Escape Analysis (CEA) is currently driven by flagging GDV calls
made to `IEnumerable<T>.GetEnumerator`. Generalize this slightly to instead look
for any call that returns an `IEnumerator<T>`, since there are some classes that
return enumerators via other calls. These calls likely won't be GDVs; I will address
adapting CEA to handle that in subsequent changes.",2025-06-25 21:00:37+00:00,Andy Ayers,0,,,6,23,25,"jit: switch escape analysis flagging to look for calls returning (issue_ref)conditional escape analysis (cea) is currently driven by flagging gdv callsmade to . generalize this slightly to instead lookfor any call that returns an , since there are some classes thatreturn enumerators via other calls. these calls likely won't be gdvs; i will addressadapting cea to handle that in subsequent changes."
dotnet/runtime,5177e08100c133c731910fbfb6799dda53b8c0f3,"JIT: GDV Cleanup Phase (#116992)

If a method has GDVs and the JIT is able to to improve types during inlining,
run a pass after inlining that tries to resolve GDVs using those improved types.

This typically happens when the object tested in a GDV is returned from some kind of
factory method where the exact type becomes apparent only after inlining.

Contributes to #25448.",2025-06-25 22:56:24+00:00,Andy Ayers,1,5a5ce681cc77607e6dce1c97af0028ee8d186064,"JIT: Fix assert in object allocation phase (#117066)

The previous DFS and remove  phase may leave unreachable pred blocks around.
Bail out of conditional escape analysis when this happens.

Fixes #117039.",7,83,2,"jit: gdv cleanup phase (issue_ref)if a method has gdvs and the jit is able to to improve types during inlining,run a pass after inlining that tries to resolve gdvs using those improved types.this typically happens when the object tested in a gdv is returned from some kind offactory method where the exact type becomes apparent only after inlining.contributes to issue_ref."
dotnet/runtime,ba14314409cec9071b73301fd044060c621f7439,"Add WebSocketStream (#116729)

* Add WebSocketStream

* Delete browser-specific test type

* Address PR feedback

* Update src/libraries/System.Net.WebSockets/src/System/Net/WebSockets/WebSocketStream.cs

* Apply suggestions from code review

* Update Create_Roundtrips for read message stream

For read message stream, disposing is equal to cancelling a read operation

* Add test Read_DisposeBeforeEofOrCloseIsAbortive

---------

Co-authored-by: Natalia Kondratyeva <knatalia@microsoft.com>",2025-06-26 02:58:37+00:00,Stephen Toub,1,68023ed0d202c25c69187fa906dc58c361685108,"Replace dangerous characters in response headers (#117290)

Fixes #116688",11,1096,499,"add websocketstream (issue_ref)* add websocketstream* delete browser-specific test type* address pr feedback* update src/libraries/system.net.websockets/src/system/net/websockets/websocketstream.cs* apply suggestions from code review* update create_roundtrips for read message streamfor read message stream, disposing is equal to cancelling a read operation* add test read_disposebeforeeoforcloseisabortive---------"
dotnet/runtime,1c2cef432cb8a0616d09e6a02574fcbcd0f02fd3,"Use secret arg to determine if reverse pinvoke is ILStub or not (#117035)

Modified JIT_ReversePInvokeEnterTrackTransitions to use the given secret arg
to identify if a method desc needs unwrapping and is a stub.

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-06-26 05:42:33+00:00,Juan Hoyos,1,f0b4af7f26b34a413e20bca60c3b0861fdeeffd8,"Fix diagnostic for calls on marshalled delegates (#117073)

* Pass UMEntryThunkData around instead of UMEntryThunk

This avoids constant back and forth hops between the two

* Fix diagnostic for callback on collected delegate",1,6,3,use secret arg to determine if reverse pinvoke is ilstub or not (issue_ref)modified jit_reversepinvokeentertracktransitions to use the given secret argto identify if a method desc needs unwrapping and is a stub.
dotnet/runtime,505ce880a99cacd5b0770b8b920e8a5f46e95061,"Do not assert IsSupported in DefaultValueAttribute ctor (#117042)

We have defined behaviors for this. We have tests that test the defined behaviors. I guess I'm the first person to run those tests with a Debug version of CoreLib and hit the assert. (Libraries testing typically uses Release runtime but the only time I build Release runtime is for perf testing.)",2025-06-26 13:10:01+00:00,Michal Strehovský,0,,,1,0,1,do not assert issupported in defaultvalueattribute ctor (issue_ref)we have defined behaviors for this. we have tests that test the defined behaviors. i guess i'm the first person to run those tests with a debug version of corelib and hit the assert. (libraries testing typically uses release runtime but the only time i build release runtime is for perf testing.)
dotnet/runtime,5e71aa033e1e0c0e1ba14073de3f5552d8b0106f,Update ML-DSA COSE public API (#117011),2025-06-26 13:19:41+00:00,Pranav Senthilnathan,0,,,9,163,66,update ml-dsa cose public api (issue_ref)
dotnet/runtime,f77f791953e7e8af4bd1ce33981a9059f4c9f207,"Add tests validating that append-only hash table collections are enumerated preserving insertion order. (#116964)

* Add tests validating that hash table collections are enumerated preserving insertion order.

* Use string-based keys instead.

* Update src/libraries/System.Collections/tests/Generic/Dictionary/Dictionary.Tests.cs

Co-authored-by: Pranav Senthilnathan <pranav.senthilnathan@live.com>

---------

Co-authored-by: Pranav Senthilnathan <pranav.senthilnathan@live.com>",2025-06-26 13:28:33+00:00,Eirik Tsarpalis,0,,,2,55,0,add tests validating that append-only hash table collections are enumerated preserving insertion order. (issue_ref)* add tests validating that hash table collections are enumerated preserving insertion order.* use string-based keys instead.* update src/libraries/system.collections/tests/generic/dictionary/dictionary.tests.cs
dotnet/runtime,9c0836aacd037c2f77b039f48e73836134e767ac,"Re-enable DynamicObjects test (#116972)

Re-enables the test and adds appropriate ExpectedWarnings for the
Roslyn analyzer in response to the new annotations.",2025-06-26 16:05:30+00:00,Sven Boemer,0,,,2,17,17,re-enable dynamicobjects test (issue_ref)re-enables the test and adds appropriate expectedwarnings for theroslyn analyzer in response to the new annotations.
dotnet/runtime,145924e3ae0582748899f88969c959d2c5e45e05,"Actually change the length of BundleID to 12 (#116986)

#116656 (9ec2190) was merged accidentally before realizing that the length was unchanged and remained at 32 bytes. This actually changes the length to 12.

Also uses Base64Url.EncodeToString on .NET and a custom implementation on .NET Framework rather than Convert.ToBase64().Replace(). Adds tests for the custom implementation.",2025-06-26 16:51:33+00:00,Jackson Schuster,0,,,3,57,2,actually change the length of bundleid to 12 (issue_ref)issue_ref (9ec2190) was merged accidentally before realizing that the length was unchanged and remained at 32 bytes. this actually changes the length to 12.also uses base64url.encodetostring on .net and a custom implementation on .net framework rather than convert.tobase64().replace(). adds tests for the custom implementation.
dotnet/runtime,a0c5625a8db02927113b66e776dbb670099acfbd,Fix typos in GC comments (#117036),2025-06-26 18:52:10+00:00,Sanghyeon Lee,1,00d5d4158275b914914dfea1febe69cef65a4934,"fix backcompat issue for standalone GC (#117793)

#116310 breaks the backward compatibility for the standalone GC - it can no longer work with previous versions of the runtime on both windows and linux. this is easily reproducible by just loading a standalone GC dll built from main with say 8.0 runtime because it will fail as soon as it hits FinalizeLoad when coreclr is trying to load the standalone dll.

both msvc and clang put the 2 methods, both named IsPromoted next to each other instead of maintaining the order as declared. renaming the new one to IsPromoted2 worked. but I also just made IsPromoted2 on IGCHeapInternal instead since it's only used by the GC side.",2,20,19,fix typos in gc comments (issue_ref)
dotnet/runtime,1c0d352e57097046b62568c8165e72c89836d410,Add equality to SlhDsaAlgorithm,2025-06-27 00:05:30+00:00,Kevin Jones,0,,,3,180,2,add equality to slhdsaalgorithm
dotnet/runtime,50be35a211536209b3e1d68619f7d2f2bf3caa0a,"Shared generics opcodes (#116990)

Implement the vast majority of the opcodes that are affected by shared generics

box, unbox, unbox.any, castclass, isinst, ldtoken, newarr, newobj of an mdarray
Add logic to enhance pretty printing of the Interp opcodes for these things. We can now see strings, and various magic pointer values get displayed in the disasm outputs.

Handle the 0 indirections generic lookup scenario

Many opcodes were able to use a set of generic helpercall opcodes. These opcodes have a naming convention of

a stands for addr of dvar or svar
g stands for do a generic lookup
p stands for pointer (acquired from either an svar or a dataitem)
v stands for a void return.
Its not fully descriptive, but naming is hard, and this works.",2025-06-27 00:34:48+00:00,David Wrighton,1,e4bbf7e49bff2ba7574e796bcede64e4321c3319,"Handle calls to shared generic interfaces from shared generic code (#117210)

- The implementation uses the true LDVIRTFTN path for this. Since it thunks to using function pointer the perf is likely not ideal, but we will need a new generic dictionary entry kind to make this simple, and I'd like to avoid making that change to unblock progress here
- This expensive path was probably fine for use with virtual generic methods, but regular interface dispatch shouldn't be this expensive, so we'll want to fix this later",17,1420,291,"shared generics opcodes (issue_ref)implement the vast majority of the opcodes that are affected by shared genericsbox, unbox, unbox.any, castclass, isinst, ldtoken, newarr, newobj of an mdarrayadd logic to enhance pretty printing of the interp opcodes for these things. we can now see strings, and various magic pointer values get displayed in the disasm outputs.handle the 0 indirections generic lookup scenariomany opcodes were able to use a set of generic helpercall opcodes. these opcodes have a naming convention ofa stands for addr of dvar or svarg stands for do a generic lookupp stands for pointer (acquired from either an svar or a dataitem)v stands for a void return.its not fully descriptive, but naming is hard, and this works."
dotnet/runtime,64e178b7719a71cb920931ca69f25cd0bb1ab290,"converting eventsource metadata list to a dict (#117031)

* converting eventsource metadata list to a dict

* converting eventsource metadata list to a dict

* converting eventsource metadata list to a dict

---------

Co-authored-by: Rachel Jarvi <racheljarvi@microsoft.com>",2025-06-27 11:05:34+00:00,Rachel,1,efba03fd11c869a603238318ddff60f28a0ca174,"Feedback for converting eventsource metadata list to a dict (#117092)

* converting eventsource metadata list to a dict

* converting eventsource metadata list to a dict

* converting eventsource metadata list to a dict

* fixing bug

* Update src/libraries/System.Private.CoreLib/src/System/Diagnostics/Tracing/EventSource.cs

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Update src/libraries/System.Private.CoreLib/src/System/Diagnostics/Tracing/EventSource.cs

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Update src/libraries/System.Private.CoreLib/src/System/Diagnostics/Tracing/EventSource.cs

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* jan feedback and bugfix

* fix

* formatting and minor changes

---------

Co-authored-by: Rachel Jarvi <racheljarvi@microsoft.com>
Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2,85,97,converting eventsource metadata list to a dict (issue_ref)* converting eventsource metadata list to a dict* converting eventsource metadata list to a dict* converting eventsource metadata list to a dict---------
dotnet/runtime,384be5478e849f8d258c111ef26e7d4a98025c67,"Add missing CultureInfo.InvariantCulture use to LogValuesFormatter (#117008)

* Add missing CultureInfo.InvariantCulture use to LogValuesFormatter

* Address PR feedback",2025-06-27 12:34:36+00:00,Stephen Toub,0,,,2,28,2,add missing cultureinfo.invariantculture use to logvaluesformatter (issue_ref)* add missing cultureinfo.invariantculture use to logvaluesformatter* address pr feedback
dotnet/runtime,b738611e500e405a82a60ae443b14eb3373829e1,"JIT: Generalize flow edge redirection logic (#116933)

Replace fgRedirect*Edge helpers with an implementation agnostic to the source block's jump kind.",2025-06-27 14:05:16+00:00,Aman Khalid,1,b509ab1fdb3ec922209f28b52c86a9c6670edbf6,"JIT: avoid looking for integral ranges for non-integer constants (#117220)

We increasingly see constant byrefs. Make sure those don't trip up range-based optimizations.

Fixes #116861.",19,109,228,jit: generalize flow edge redirection logic (issue_ref)replace fgredirect*edge helpers with an implementation agnostic to the source block's jump kind.
dotnet/runtime,d38966ff663cb279148a82d1d0364dee40727f88,Remove obsolete native AOT test special casing (#116958),2025-06-27 14:56:00+00:00,Michal Strehovský,0,,,7,17,51,remove obsolete native aot test special casing (issue_ref)
dotnet/runtime,c5023b60303cac89d3bed18d4d026768a1bb682f,"update base mask size for widening packed float conversions (#117075)

Co-authored-by: Tanner Gooding <tagoo@outlook.com>",2025-06-27 15:30:18+00:00,Clinton Ingram,0,,,1,7,7,update base mask size for widening packed float conversions (issue_ref)
dotnet/runtime,f720cbf7b632b5186deabaa213604e2fafc16e9b,ML-KEM: MLKemCng and CNG properties,2025-06-27 16:19:36+00:00,Kevin Jones,1,d136ec9052db9f15107343346ac0d2c54b776b29,Fix dispose pattern in PQC types,24,1040,105,ml-kem: mlkemcng and cng properties
dotnet/runtime,455a5084ad8a614c2cf81028e7c69925492b1260,JIT: Rename BasicBlock edge ref methods (#117087),2025-06-27 17:46:50+00:00,Aman Khalid,1,8e2a1d5cc81eb7498895db26b53b3c34174943ed,"JIT: relax constraint in conditional escape analysis (#117222)

Enable conditional escape analysis if the allocation was at one time guarded by a GDV,
even if that GDV gets resolved by the new GDV cleanup pass that runs before escape analysis.

Fixes #117204.",16,48,48,jit: rename basicblock edge ref methods (issue_ref)
dotnet/runtime,655b0ea4988b7f211b128c4441f0ad334dc32c7a,"Use defined width types in PatchpointInfo (#117029)

* use defined width types in PatchpointInfo",2025-06-27 17:47:59+00:00,Max Charlamb,0,,,1,28,28,use defined width types in patchpointinfo (issue_ref)* use defined width types in patchpointinfo
dotnet/runtime,bdf1d4243cd76696e731bbcb5edc93d77ade1ced,De-duplicate PQC type helpers and unify source files,2025-06-27 19:39:19+00:00,Kevin Jones,0,,,10,173,264,de-duplicate pqc type helpers and unify source files
dotnet/runtime,50f75714d500e1d0348463ba7447d482267f6a1e,Add missing documentation for PQ-DSA and ML-DSA CNG identifiers,2025-06-27 20:23:57+00:00,Kevin Jones,0,,,3,49,2,add missing documentation for pq-dsa and ml-dsa cng identifiers
dotnet/runtime,277073468ba04203bcaffdcd24f3b2fbcdcd5f3a,"Followon changes from PR #116990 (#117093)

- use static_asserts where possible
- remove the mess of casts and temp variables around helper function opcodes
- Remove the DO_GENERIC_LOOKUP macro since it wasn't doing much of use anymore
- Use the simdhash apis a little better",2025-06-27 20:39:22+00:00,David Wrighton,1,7b3c9ab36f4ffd7353bae335c3b293b06fc2cf29,"Fix IP adjustment for interpreter EH (#117055)

* Fix IP adjustment for interpreter EH

The exception handling stack frame iterator adjusts IP it returns for
all cases when the IP represents a return address. This is to make sure
that if the last instruction in a try regios is a call, it is still covered
by the try region (the return address would be right after it).
For jit/aoted code, throwing a software exceptions results in a call.
Only hardware exceptions like division by zero etc report the address of
the failing instruction.
In the interpreter, when an exception is thrown, the IP address is
always the address of the instruction that has triggered the exception.
So we should not adjust the IP.
This change fixes that by marking exception throwing frame as
""faulting"", which ensures the adjustment doesn't occur.
That information is recorded in the InterpreterFrame when an
exception is thrown by the interpreter code and cleared when the
execution resumes after catch.

* Fix build break with interpreter disabled

* Fix the case when the pEntryFrame is NULL

* Actually, the check should be for FRAME_TOP, not NULL",3,66,82,followon changes from pr issue_ref (issue_ref)- use static_asserts where possible- remove the mess of casts and temp variables around helper function opcodes- remove the do_generic_lookup macro since it wasn't doing much of use anymore- use the simdhash apis a little better
dotnet/runtime,a8c0a03465b1a15f90f8d5286000d97569298752,"Update build and test images to Alpine 3.22 (#116167)

* Update Alpine 3.21 -> 3.22

* Update build image

* Update eng/pipelines/libraries/helix-queues-setup.yml

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Update distribution of distros

* Update images

* Restructure linux-x64 libraries conditions

* Switch to using Else syntax

* Unify mono inner and outer loops into testing on Ubuntu

* Update eng/pipelines/libraries/helix-queues-setup.yml

* Remove `main` conditional for linux-musl-arm64

* Update helix-queues-setup.yml

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>
Co-authored-by: Juan Hoyos <19413848+hoyosjs@users.noreply.github.com>",2025-06-27 22:08:29+00:00,Rich Lander,0,,,4,39,29,update build and test images to alpine 3.22 (issue_ref)* update alpine 3.21 -> 3.22* update build image* update eng/pipelines/libraries/helix-queues-setup.yml
dotnet/runtime,efba03fd11c869a603238318ddff60f28a0ca174,"Feedback for converting eventsource metadata list to a dict (#117092)

* converting eventsource metadata list to a dict

* converting eventsource metadata list to a dict

* converting eventsource metadata list to a dict

* fixing bug

* Update src/libraries/System.Private.CoreLib/src/System/Diagnostics/Tracing/EventSource.cs

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Update src/libraries/System.Private.CoreLib/src/System/Diagnostics/Tracing/EventSource.cs

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Update src/libraries/System.Private.CoreLib/src/System/Diagnostics/Tracing/EventSource.cs

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* jan feedback and bugfix

* fix

* formatting and minor changes

---------

Co-authored-by: Rachel Jarvi <racheljarvi@microsoft.com>
Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-06-28 00:28:49+00:00,Rachel,1,f1f11679a4336d43e5dd8cded83c50abde8eb167,"Fixing performance regression in EventSource (#117549)

* fixing the performance regression in EventSource

* fixing the performance regression in EventSource",1,11,13,feedback for converting eventsource metadata list to a dict (issue_ref)* converting eventsource metadata list to a dict* converting eventsource metadata list to a dict* converting eventsource metadata list to a dict* fixing bug* update src/libraries/system.private.corelib/src/system/diagnostics/tracing/eventsource.cs
dotnet/runtime,bc628bc4697bf39918a96ee0bc72b39b5e8b0979,"JIT: extend indirect virtual stub optimization to arrays (#116771)

Add support for array interface methods invoked via indirect virtual stubs.

Mark the SZGenericArrayEnumerator ctor as aggressively inlined; when inlined 
we can often prove the enumerator (conditionally) doesn't escape.

Part of #108913",2025-06-28 01:00:19+00:00,Andy Ayers,0,,,7,63,17,jit: extend indirect virtual stub optimization to arrays (issue_ref)add support for array interface methods invoked via indirect virtual stubs.mark the szgenericarrayenumerator ctor as aggressively inlined; when inlined we can often prove the enumerator (conditionally) doesn't escape.part of issue_ref
dotnet/runtime,27b118e6ec48a3f411987b90b045112307ad7859,"Scaffold CompositeMLDsa and CompositeMLDsaAlgorithm (#116926)

Co-authored-by: Jeremy Barton <jbarton@microsoft.com>
Co-authored-by: Krzysztof Wicher <mordotymoja@gmail.com>",2025-06-28 01:02:29+00:00,Pranav Senthilnathan,0,,,15,2359,63,scaffold compositemldsa and compositemldsaalgorithm (issue_ref)
dotnet/runtime,01b4233dca6654663e2f7ea672f27386e537bc0c,"Add more prime sizes to HashMap (#117108)

We have seen cases where the current sizes are not sufficient and end up with pathological behavior.",2025-06-28 11:47:47+00:00,Jan Kotas,0,,,2,6,3,add more prime sizes to hashmap (issue_ref)we have seen cases where the current sizes are not sufficient and end up with pathological behavior.
dotnet/runtime,d643f6451a58f726980d4fc73902ee950764d921,Remove `CmsSigner.HasPrivateKey` (#117113),2025-06-28 23:19:44+00:00,Pranav Senthilnathan,0,,,3,0,46,remove (issue_ref)
dotnet/runtime,7d88f78c5dbca37a476384187e2345c32d19acb1,Add new AesCng(CngKey) constructor,2025-06-29 16:38:34+00:00,Kevin Jones,0,,,7,387,156,add new aescng(cngkey) constructor
dotnet/runtime,b97f98b7bdd339ee3424e81ec0cfe4b40590268e,Refactoring the xarch perfScore logic to use a lookup table where trivial (#117123),2025-06-29 17:14:48+00:00,Tanner Gooding,1,08cdccc2bba7dcdb1b109621d00d9d01adc10b68,[APX] fix bugs in NDD code gen (#115809),4,1310,2149,refactoring the xarch perfscore logic to use a lookup table where trivial (issue_ref)
dotnet/runtime,0aa6daa139c4bc6a74c2ee08453b3af07b94e4a4,"Delete useless tests (#117127)

All these tests are testing that calling an instance method on null reference throws NullReferenceException. We have plenty of coverage for that in other places.",2025-06-30 06:04:31+00:00,Jan Kotas,0,,,16,0,1095,delete useless tests (issue_ref)all these tests are testing that calling an instance method on null reference throws nullreferenceexception. we have plenty of coverage for that in other places.
dotnet/runtime,c5858f12b3fdc8c28341414b8b18f95ae7202a11,"Automated bump of chrome version (#117121)

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>",2025-06-30 11:08:57+00:00,github-actions[bot],0,,,1,4,4,automated bump of chrome version (issue_ref)
dotnet/runtime,da3d9d0f20f5b1b893fa0609e4c37e0eb09dc6ce,"[RISC-V] Substituting INS_ori and INS_addi with INS_mov for zero immediate values (#116956)

* [RISC-V] Replace INS_ori with INS_mov when immediate is 0

* [RISC-V] Replace INS_addi with INS_mov when immediate is 0

* Improve code style

* Substitute INS_slliw with INS_sext_w when immediate is 0",2025-06-30 11:33:56+00:00,Sanghyeon Lee,1,45e14ea5e8d2646693299e68310cad7603bbe4c8,"[RISC-V] Use auipc for code addresses in INS_OPTS_{RL,RC,JALR} (#116780)

* Emit auipc+addi for non-reloc label addresses

* Emit auipc+jalr for INS_OPT_JALR

* Fix jal target register

* Fold branches for forward and backward jumps

* Emit auipc+load/addi for cold sections INS_OPTS_RC

* cleanup

* overflow check",1,10,10,[risc-v] substituting ins_ori and ins_addi with ins_mov for zero immediate values (issue_ref)* [risc-v] replace ins_ori with ins_mov when immediate is 0* [risc-v] replace ins_addi with ins_mov when immediate is 0* improve code style* substitute ins_slliw with ins_sext_w when immediate is 0
dotnet/runtime,3236005061057d8244ecba5c355d49be4c758d36,[Apple] Disable failing Apple mobile string tests (#117054),2025-06-30 13:41:34+00:00,Milos Kotlar,0,,,1,1,0,[apple] disable failing apple mobile string tests (issue_ref)
dotnet/runtime,bdfb8725b17d97f6aea73ebfc16b683ab9c5895f,"Re-enable test disabled against #72801 (#117125)

* Re-enable test disabled against #72801

* Explicitly enable EventSourceSupport for NAOT",2025-06-30 14:25:59+00:00,Jan Kotas,0,,,2,1,1,re-enable test disabled against issue_ref (issue_ref)* re-enable test disabled against issue_ref* explicitly enable eventsourcesupport for naot
dotnet/runtime,3eba330005d5242813dda5d35c35a0b84037a8aa,"Again adjust for culture name normalization in AssemblyNameInfoFuzzer (#114531)

* Again adjust for culture name normalization in AssemblyNameInfoFuzzer

* Don't run the test on Nano

---------

Co-authored-by: Miha Zupan <mihazupan.zupan1@gmail.com>",2025-06-30 14:46:19+00:00,Adam Sitnik,1,bc2e73a59cc6bd2eb35024fc3184a8d8f36de95d,"Fix the test flakiness, fixes #117172 (#117175)",2,18,6,again adjust for culture name normalization in assemblynameinfofuzzer (issue_ref)* again adjust for culture name normalization in assemblynameinfofuzzer* don't run the test on nano---------
dotnet/runtime,8ceabe8580211ad64368b8abfa5bb466d9296646,"Sve2 AddHighNarrowing (Even/Odd) (#116848)

Contributing towards #115479",2025-06-30 15:06:17+00:00,Jacob Crawley,0,,,10,401,89,sve2 addhighnarrowing (even/odd) (issue_ref)contributing towards issue_ref
dotnet/runtime,b5ab0ae75f7499c43138d1601ea4e37666b60ddb,Revert helix queue change (#117139),2025-06-30 15:51:25+00:00,Rich Lander,0,,,1,1,1,revert helix queue change (issue_ref)
dotnet/runtime,b7fce810d43185fa61d251f183bfe50614d95d5b,Re-enable test disabled against 103333 (#117124),2025-06-30 15:55:27+00:00,Jan Kotas,0,,,1,0,7,re-enable test disabled against 103333 (issue_ref)
dotnet/runtime,cf9a0e127bdcc040fc5fd468805a4e81357e9d0b,"Track assignment to property backing field (#117034)

This detects the case where a write to a property actually
becomes a write to the compiler-generated backing field. It
follows the same logic and produces the same warning as field
access, matching ILLink/ILC.

Co-authored-by: Jackson Schuster <36744439+jtschuster@users.noreply.github.com>

---------

Co-authored-by: Jackson Schuster <36744439+jtschuster@users.noreply.github.com>",2025-06-30 16:04:00+00:00,Sven Boemer,1,a90f7ab1ffa6bfc1e7a7520afdd3862849b59fd0,"Expose the extension operators for Tensor, TensorSpan, and ROTensorSpan (#117997)

* Ensure the DynamicallyAccessedMembersAnalyzer doesn't crash for new language features

* Adding the extensions for operator + and operator +=

* Adding the extensions for operator / and operator /=

* Adding the extensions for operator * and operator *=

* Adding the extensions for operator - and operator -=

* Adding the extensions for operator & and operator &=

* Adding the extensions for operator | and operator |=

* Adding the extensions for operator ^ and operator ^=

* Adding the extensions for operator ~

* Adding the extensions for operator - (unary)

* Adding the extensions for operator + (unary)

* Adding the extensions for operator << and operator <<=

* Adding the extensions for operator >> and operator >>=

* Adding the extensions for operator >>> and operator >>>=

* Adding the extensions for operator ++

* Adding the extensions for operator --

* Ensure the extension member order in the ref matches the impl

* Update CompatibilitySuppressions for a fixed parameter name in an experimental API

* Change TrimAnalysisVisitor.VisitParameterReference to skip parameters that are not on methods so the analyzer doesn't throw

* Apply suggestions from code review

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",9,164,25,"track assignment to property backing field (issue_ref)this detects the case where a write to a property actuallybecomes a write to the compiler-generated backing field. itfollows the same logic and produces the same warning as fieldaccess, matching illink/ilc."
dotnet/runtime,d0b2d081056f70fe4c1ab3fa7a9a46a21245c59a,"JIT: Modify switch and finally-ret successors using edge redirection helpers (#117102)

Follow-up to #116933. By mutating the existing edge during switch successor modifications, we can avoid invalidating the unique switch successor map. Also adds a helper for removing edges from the switch successor map without needing to trash the whole entry. I'd like to get to a point where we always have accurate switch successor sets available -- we could even consider rearchitecting BBswtDesc to model BBehfDesc and hold unique successor edges.",2025-06-30 16:11:25+00:00,Aman Khalid,0,,,5,156,111,"jit: modify switch and finally-ret successors using edge redirection helpers (issue_ref)follow-up to issue_ref. by mutating the existing edge during switch successor modifications, we can avoid invalidating the unique switch successor map. also adds a helper for removing edges from the switch successor map without needing to trash the whole entry. i'd like to get to a point where we always have accurate switch successor sets available -- we could even consider rearchitecting bbswtdesc to model bbehfdesc and hold unique successor edges."
dotnet/runtime,baf82cbe29d6db81c42f3b6c992674f1216bef37,"Avoid duplicate messages in Console logging with Json formatter (#117033)

* Avoid duplicate messages in Console logging withJson formatter

* Make FormattedLogValues not readonly",2025-06-30 16:29:12+00:00,Tarek Mahmoud Sayed,0,,,3,25,16,avoid duplicate messages in console logging with json formatter (issue_ref)* avoid duplicate messages in console logging withjson formatter* make formattedlogvalues not readonly
dotnet/runtime,5545d5208ebc71871744f4e00d289ba437168cd7,Fix MLDsaImplementation on Windows to throw a more clear exception and add a test,2025-06-30 18:10:45+00:00,Kevin Jones,1,b8f9b99a01c078a5e14d75ef7db72d7516284c0c,"ML-DSA add byte array APIs (#117044)

* match ML-DSA export APIs with other PQC + Cose opt feedback

* Import/Sign/Verify+tests

* Fix DuplicatePrivateKey

* Fix failures/tests failures

* Fix CoseKey

* Cose test fix

* Address feedback

* remove comment in tests",2,20,1,fix mldsaimplementation on windows to throw a more clear exception and add a test
dotnet/runtime,0c7d43e7541f284b2cc8635b04ef08ede39f8186,"Http3RequestStream: read EOS after trailers (#117026)

This fixes the primary bug captured in #60118 without attempting to drain the stream and without touching the Dispose logic.

We expect trailers to be sent in a single HEADER frame, which is read by `ReadHeadersAsync` but that method doesn't read the EOS. Despite of that, we set `_responseDataPayloadRemaining = -1` afterwards

https://github.com/dotnet/runtime/blob/27c8fe04453195039686fb375a73fac7ff1ea968/src/libraries/System.Net.Http/src/System/Net/Http/SocketsHttpHandler/Http3RequestStream.cs#L577-L583

which then makes `Http3RequestStream` pretend that it reached EOS in subsequent read calls without ever trying to issue the read to the underlying `QuicStream`:

https://github.com/dotnet/runtime/blob/0d628dae1cb5b8d0eb76d9549134edfe30d6219c/src/libraries/System.Net.Http/src/System/Net/Http/SocketsHttpHandler/Http3RequestStream.cs#L1340-L1344

This can be easily fixed by issuing one more read after reading the headers.",2025-06-30 18:11:35+00:00,Anton Firszov,1,e4b07f47f5c033309d34011b3cd4cedb13fcb403,"[H/3] Fix disposing of buffers in parallel with running tasks (#117207)

* Fix disposing of buffers in parallel with running tasks

* Better wording

* Renamed variable and more comments.",2,87,18,"http3requeststream: read eos after trailers (issue_ref)this fixes the primary bug captured in issue_ref without attempting to drain the stream and without touching the dispose logic.we expect trailers to be sent in a single header frame, which is read by but that method doesn't read the eos. despite of that, we set afterwards#l577-l583which then makes pretend that it reached eos in subsequent read calls without ever trying to issue the read to the underlying :#l1340-l1344this can be easily fixed by issuing one more read after reading the headers."
dotnet/runtime,c02569bcf67543806f6b0ba8923ff3a313f830f2,"Clean up CompositeMLDsaAlgorithm and add comprehensive tests (#117135)

Co-authored-by: PranavSenthilnathan <12225508+PranavSenthilnathan@users.noreply.github.com>
Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: Pranav Senthilnathan <pranas@microsoft.com>",2025-06-30 18:23:47+00:00,Copilot,0,,,4,209,1,clean up compositemldsaalgorithm and add comprehensive tests (issue_ref)
dotnet/runtime,607f74da005122da44bdd70879bc49ef70a38ede,"Add support for statics access from shared generic code, as well as precise-init static class construction (#117110)

* Add support for statics access from shared generic code, as well as precise-init static class construction
- There is another renaming of the helpers call opcodes to allow distinguishing between whether or not the arg is supplied via svar or dataindex.
- More tests to cover these scenarios
- This should finish up the support for shared generics

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-06-30 23:47:27+00:00,David Wrighton,1,34078bbe9b8405764272debeb1d62073e1ca7292,"Fix args passed by stack ref in the CallStubGenerator (#117399)

* Fix args passed by stack ref in the CallStubGenerator

The CallStubGenerator was missing support for arguments passed by
reference using stack slots. Only references in registers were
implemented. There was also a bug in passing return buffer argument when
there was ""this"" at the same time. Only the m_r1 was set to 1, but the
m_r2 was left unchanged, being 0. That resulted in the routine fetched
for that register range being NULL.

This change fixes both of these issues and adds a test.

* Fix arm64 linux asm break due to accidental semicolon",6,214,23,"add support for statics access from shared generic code, as well as precise-init static class construction (issue_ref)* add support for statics access from shared generic code, as well as precise-init static class construction- there is another renaming of the helpers call opcodes to allow distinguishing between whether or not the arg is supplied via svar or dataindex.- more tests to cover these scenarios- this should finish up the support for shared generics"
dotnet/runtime,61f2ad644f82a7208eb925bedc3bae49754e4440,Enable several recently added analyzers (#116881),2025-07-01 01:02:45+00:00,Stephen Toub,0,,,10,39,14,enable several recently added analyzers (issue_ref)
dotnet/runtime,dad19e146c155a827a3812ecaf0b31be0ea4b102,"Delete ForceDictionaryLookups (#117180)

No longer used and bit-rotten",2025-07-01 03:11:51+00:00,Jan Kotas,0,,,6,0,33,delete forcedictionarylookups (issue_ref)no longer used and bit-rotten
dotnet/runtime,65cd1ea2f6efc5c5dde8ca886ce9f96d9afb6a29,"Add ObsoleteAttribute and EditorBrowsable(Never) to DynamicDependency.Condition (#107104)

* Add ObsoleteAttribute and EditorBrowsable(Never) to DynamicDependency.Condition

* Remove autocomplete artifact

* Forgot to hit save...

* Suppress warnings for usages of Condition in tests

* Add period to doc comment and suppress obselete warnings for whole test file",2025-07-01 03:32:15+00:00,Jackson Schuster,1,d342697a18ffe011c7649c5298c1fbc25c755cec,"Mark `DynamicallyAccessedMemberTypes.All` as `EditorBrosable(Never)` (#117720)

Resolves #114197.

`DynamicallyAccessedMemberTypes.All` should be the least used member of this enum, but it is the most popular on all of GitHub. Use of it leads to spurious trimming warnings (because it makes it appear more things are reflected on than needed) and also too much extra size left on the table (for the same reason). Make it harder to discover.",3,8,1,add obsoleteattribute and editorbrowsable(never) to dynamicdependency.condition (issue_ref)* add obsoleteattribute and editorbrowsable(never) to dynamicdependency.condition* remove autocomplete artifact* forgot to hit save...* suppress warnings for usages of condition in tests* add period to doc comment and suppress obselete warnings for whole test file
dotnet/runtime,af19702225f41955ab928fdadec43712322aa9f2,"Improve constant value analysis for method IL (#117084)

Refactors `TryGetMethodConstantValue` to use a stack-based IL interpreter, enabling more robust constant folding and handling of more complex control flow and method calls. This addresses patterns that often show up around Metrics code (calling a helper that checks several diagnostic switches like `someLog.Log.IsSupported` and using it in an `if` check).",2025-07-01 05:08:06+00:00,Michal Strehovský,1,3c4b52473c3c51f0b277fd7114ca4f4024db07d7,"Don't use whole program analysis results when array covariance is involved (#117273)

Array covariance makes things difficult to model, so just abort. We already had some abort logic but it wasn't sufficient, and it wasn't in all the places where it was necessary.

Fixes #117249.",2,127,30,"improve constant value analysis for method il (issue_ref)refactors to use a stack-based il interpreter, enabling more robust constant folding and handling of more complex control flow and method calls. this addresses patterns that often show up around metrics code (calling a helper that checks several diagnostic switches like and using it in an check)."
dotnet/runtime,e0e9d7ce28614adc822afa00283a9525cd28afbf,"Replace `CordbProcess::GetSharedDomain` with `GetAppDomain` (#117037)

This removes the 'shared domain' idea (which was basically an empty CordbAppDomain) from the ICorDebug* implementations. Everything operates on the (one and only) AppDomain. There's plenty more that could be cleaned up with app domains here (around there only being one now), but what's in this change seemed like a reasonably contained step.",2025-07-01 05:10:26+00:00,Elinor Fung,0,,,8,49,165,"replace with (issue_ref)this removes the 'shared domain' idea (which was basically an empty cordbappdomain) from the icordebug* implementations. everything operates on the (one and only) appdomain. there's plenty more that could be cleaned up with app domains here (around there only being one now), but what's in this change seemed like a reasonably contained step."
dotnet/runtime,71c30b405516b1fe774a1bfdbc43cd804468568f,"Disable interpreter build on android (#117141)

It is not meant to be used there currently and the build is also failing at the moment.

```
  ld.lld: error: undefined symbol: t_CurrentThreadInfo
  >>> referenced by asmhelpers.S:696 (/Users/vbrezae/Xamarin/repos/runtime/src/coreclr/vm/arm64/asmhelpers.S:696)
  >>>               ../../../vm/wks/CMakeFiles/cee_wks_core.dir/__/arm64/asmhelpers.S.o:(InterpreterStub)
  >>> referenced by asmhelpers.S:696 (/Users/vbrezae/Xamarin/repos/runtime/src/coreclr/vm/arm64/asmhelpers.S:696)
  >>>               ../../../vm/wks/CMakeFiles/cee_wks_core.dir/__/arm64/asmhelpers.S.o:(InterpreterStub)
  >>> referenced by asmhelpers.S:696 (/Users/vbrezae/Xamarin/repos/runtime/src/coreclr/vm/arm64/asmhelpers.S:696)
  >>>               ../../../vm/wks/CMakeFiles/cee_wks_core.dir/__/arm64/asmhelpers.S.o:(InterpreterStub)
```",2025-07-01 05:16:15+00:00,Vlad Brezae,1,a90680fd7635df188efc5e9907545c6c2d2e8ad4,"Add CoreCLR support for android GC bridge (#116310)

* Add support for the new cross reference GCHandle type

From Aaron's implementation.

* Add interop glue for bridge

From Aaron's implementation

* Add GCBridge test

* Implement scanning of bridge objects and construction of SCCs

from Maoni

* Add tarjan bridge computation

* Fix object validation

Checking if the object is promoted was validating the next object header in debug builds. During bridge tarjan computation, we patch the object header for some objects in order to store data used by the bridge algorithm, so we need to disable this validation.

* bgc and multiple heap support for bridge obj processing

* Add incorrect waiting for gc bridge to finish

* Update code to new API

* Clear weakrefs for bridge objects with collected java peers

* Wait for bridge processing while resolving the gchandle to prevent races

* Maoni review

HANDLE_MAX_INTERNAL_TYPES value

new instead of malloc

assert for allocation failure

Reuse memory for ColorData and ScanData between collections. We still do alloc/free for other type of data, for example for arrays representing edges between SCCs.

Actually print class name when enabling tarjan bridge logs.

Add separate IsPromoted method to the gc interface

Rename TriggerGCBridge to TriggerClientBridgeProcessing to be more specific about what it is doing.

* Aaron review

* Update to new API

* Fix build

Include classes that are part of the Java Marshal API on mono as well

Disable test on mono and nativeaot.

* Use cross refs args directly in more places

* Change unreachable handle length from int to size_t

* Remove FEATURE_GCBRIDGE

* Move interop javamarshal code out of interop shared file

Create reset event during javamarshal initialize

* Use asserts in test

* Add bridge waiting to WeakReference<T> as well

* Review

* review

* High precision timestamp

* Naming consistency in gcbridge.cpp, matching rest of the runtime

* Fix interface breakage

* Fix test/JavaMarshal on platforms where it is not enabled

The test used to fail and the JavaMarshal api would crash due to missing internal calls.

* Share GetHighPrecisionTimeStamp across GC code

* Fix mark function used during BGC finishing pause",2,10,6,disable interpreter build on android (issue_ref)it is not meant to be used there currently and the build is also failing at the moment.
dotnet/runtime,336855aa02264bada7524170e203a4acc4215eb4,"Improve method body interning and deduplication logic (#117080)

* Enhanced ObjectDataInterner to perform multiple iterations of interning.
* Consider two same `MethodReadOnlyDataNode` the same.",2025-07-01 10:11:02+00:00,Michal Strehovský,0,,,2,62,25,improve method body interning and deduplication logic (issue_ref)* enhanced objectdatainterner to perform multiple iterations of interning.* consider two same the same.
dotnet/runtime,544995bb4a762d1637b6b8c8b8e9e16cb9b334c2,[SRM] Add APIs to get the `AssemblyNameInfo` of an assembly definition or reference. (#116839),2025-07-01 11:00:43+00:00,Theodore Tsirpanis,0,,,5,101,0,[srm] add apis to get the of an assembly definition or reference. (issue_ref)
dotnet/runtime,3f1943e9dd26b06a8bf56e0143ca910451e0b9b7,"Include Pkcs (net10.0 & -windows) in aspnetcore transport pack (#117173)

Fixes https://github.com/dotnet/runtime/issues/117146",2025-07-01 12:43:49+00:00,Viktor Hofer,1,1f8ecc2dc8175076d1ef70d2817c5ca07e9e9d57,Fix duplicate PDB in packages that specify IncludeSymbolsInPackage (#119827),3,23,2,include pkcs (net10.0 & -windows) in aspnetcore transport pack (issue_ref)fixes
dotnet/runtime,5cd3afbba702417de58c7a9f3d5ecdd9e2903138,"arm64: Sve2 VectorTableLookup & VectorTableLookupExtension (#117051)

Implements #94020",2025-07-01 13:56:58+00:00,Jonathan Davies,0,,,10,1076,0,arm64: sve2 vectortablelookup & vectortablelookupextension (issue_ref)implements issue_ref
dotnet/runtime,08863f2a368d72c8e0955eab465f168099243029,"Remove the experimental attribute from the tensor APIs (#117103)

* Remove the experimental attribute from the tensor APIs

* Ensure the relevant interfaces are implemented on the TensorSpan and ReadOnlyTensorSpan types

* Don't use the tuple based swap, it asserts LocalDataFlowVisitor

* Apply suggestions from code review

Co-authored-by: Stephen Toub <stoub@microsoft.com>

* Update src/libraries/System.Numerics.Tensors/ref/System.Numerics.Tensors.csproj

* Update src/libraries/System.Numerics.Tensors/src/System/Numerics/Tensors/netcore/Tensor.cs

* Update src/libraries/System.Numerics.Tensors/src/System.Numerics.Tensors.csproj

---------

Co-authored-by: Stephen Toub <stoub@microsoft.com>",2025-07-01 14:13:22+00:00,Tanner Gooding,1,51c8f3c71a05c440efdd7ad49189a56cb3f53afe,"Address upcoming breaking change for span-valued collection expressions (#120771)

[Doc for upcoming breaking
change](https://github.com/dotnet/roslyn/blob/copilot/fix-safecontext-of-span-collection/docs/compilers/CSharp/Compiler%20Breaking%20Changes%20-%20DotNet%2011.md#the-safe-context-of-a-collection-expression-of-spanreadonlyspan-type-is-now-declaration-block)

See dotnet/roslyn#80684. TensorShape's constructor was the only break I
found when compiling the libraries. I fixed this by extracting the
collection-expression to the top level.",25,759,781,"remove the experimental attribute from the tensor apis (issue_ref)* remove the experimental attribute from the tensor apis* ensure the relevant interfaces are implemented on the tensorspan and readonlytensorspan types* don't use the tuple based swap, it asserts localdataflowvisitor* apply suggestions from code review"
dotnet/runtime,774ba97e1a9b1684170cfd5061d37238459902c0,Allow the disasm output on xarch to do less work for the common path (#117097),2025-07-01 14:31:14+00:00,Tanner Gooding,1,df944d30b9643f924607d5f844961b5800aebf3d,"[APX] Make sure disasmembler log correct EGPR size when OSIZE is 32b. (#116988)

* Make sure disasmembler log correct EGPR size when OSIZE is 32b.

* resolve comment.

* revert XMMReg check for further refactoring.",4,245,181,allow the disasm output on xarch to do less work for the common path (issue_ref)
dotnet/runtime,a1038006bee6f0a480d5cdd4f3320e00df57c9f2,"Save and restore `ExecutionContext` for runtime async calls (#117056)

Add support for saving and restoring the `ExecutionContext` around runtime async
calls. Most of this is done in the JIT:
- For task awaits, `ExecutionContext` is stored on both synchronous and
  asynchronous (suspending/resuming) paths. The JIT inserts IR between import
  and inlining to save the context before each async call, and to restore it
  after. If the call is inside a try clause, then this requires insertion of a
  try-finally to ensure the context is restored even if an exception is thrown.
- For custom awaits, `ExecutionContext` is saved and restored only in the
  asynchronous path. Thus the JIT only saves/restores the context as part of the
  suspend/resume paths.

For the first case above we allow inlining the helpers. The second case above
happens too late to rely on normal inlining, so right now it just inserts calls
to two helpers. In the future we can consider inlining these manually in the
suspend/restore paths.

For runtime async calls we assume that `Thread.t_currentThread` is always
initialized. This initialization happens as part of `DispatchContinuations` or
the Task-returning thunks. So we can avoid calling `InitializeCurrentThread`
when capturing/restoring the contexts. I have introduced a new
`Thread.CurrentThreadNoInit` to access the TLS field without initialization.",2025-07-01 14:35:47+00:00,Jakob Botsch Nielsen,1,ab716ca52cc77a6866379736b3716540eb0f7787,"[RISC-V] Conditional simple operations (#116581)

* simple constant selection e.g. (cond ? const+1 : const) or (cond ? const<<1 : const)

* cleanup

* reverse some testcases

* Fix shXadd descriptions

* Conditional increment, or 1, and xor 1

* Doc comment

* Doc fix reversed conditions

* conditional shifts by 1

* conditional decrement

* Copy effect flags from condition and other operand

* Add conditional (c ? a & 1 : 0), (c ? 1 << a : 0)

* else-less expressions

* block trasforming elseless if's to a different variable

* fix reversed and or zero

* cleanup

* Factor out const oper matching

* fix windows build

* cleanup parens

* quell msvc warnings

* msvc warning

* Simplify oper or (local|zero) conversions",30,753,112,"save and restore for runtime async calls (issue_ref)add support for saving and restoring the around runtime asynccalls. most of this is done in the jit:- for task awaits, is stored on both synchronous and asynchronous (suspending/resuming) paths. the jit inserts ir between import and inlining to save the context before each async call, and to restore it after. if the call is inside a try clause, then this requires insertion of a try-finally to ensure the context is restored even if an exception is thrown.- for custom awaits, is saved and restored only in the asynchronous path. thus the jit only saves/restores the context as part of the suspend/resume paths.for the first case above we allow inlining the helpers. the second case abovehappens too late to rely on normal inlining, so right now it just inserts callsto two helpers. in the future we can consider inlining these manually in thesuspend/restore paths.for runtime async calls we assume that is alwaysinitialized. this initialization happens as part of orthe task-returning thunks. so we can avoid calling when capturing/restoring the contexts. i have introduced a new to access the tls field without initialization."
dotnet/runtime,c2e2de7d21af6a93d4246cc11ccedb73d4208a6e,"Add Try methods to JsonObject (#111229)

* Implement TryAdd and TryAdd with index out parameter for JsonObject

* Add exception to docs for TryGetPropertyValue without out index

* Add overload for TryGetPropertyValue with out index parameter

* Modify TryGetPropertyValue to use its overload with the index param

* Add new functions to ref

* Add unit tests

* Fix build for .NET 9

* Address remaining feedback.

---------

Co-authored-by: Eirik Tsarpalis <eirik.tsarpalis@gmail.com>",2025-07-01 15:12:08+00:00,Fluturel Adrian,1,c277a32b16fd898a92c62ba382bb7e215baf329d,"Fix thread safety issue in JsonObject.InitializeDictionary causing GetPath failures (#120619)

* Initial plan

* Fix thread safety issue in JsonObject.InitializeDictionary using Interlocked.CompareExchange

Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>

* Remove unnecessary Interlocked.MemoryBarrier since CompareExchange is already a full barrier

Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>

* Update src/libraries/System.Text.Json/src/System/Text/Json/Nodes/JsonObject.IDictionary.cs

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>
Co-authored-by: Stephen Toub <stoub@microsoft.com>",6,196,10,add try methods to jsonobject (issue_ref)* implement tryadd and tryadd with index out parameter for jsonobject* add exception to docs for trygetpropertyvalue without out index* add overload for trygetpropertyvalue with out index parameter* modify trygetpropertyvalue to use its overload with the index param* add new functions to ref* add unit tests* fix build for .net 9* address remaining feedback.---------
dotnet/runtime,1742b6cd0ec69424a64b3bfdf5c3cfb66a0f81f3,Allow more folding of SIMD compares (#117099),2025-07-01 15:46:01+00:00,Tanner Gooding,1,4a06ac3f4795a305e29b84e2464dc8953be871fa,"Arm64 SVE: Fix conditionalselect with constant arguments (#116852)

* Arm64 SVE: Fix conditionalselect with constant arguments

Fixes #116847

When folding, allow arg1 to be a constant mask

* Make masked EvaluateBinaryInPlace() Arm64 only

* Check significantBit in EvaluateSimdVectorToPattern()

* fix set checks in EvaluateSimdVectorToPattern

* Use masks in EvalHWIntrinsicFunTernary() for SVE conditionalselect

* Check all of a vector lane when converting to mask

* Add testing for EvalHWIntrinsicFunTernary changes

* whitespace

* Revert ""Check all of a vector lane when converting to mask""

This reverts commit b923b28fa28b61a43df53be13284f48ff0ac0477.

* rename significantBit to leastSignificantBit

* Use LSB of vector when converting from vector to mask

* Add LowerCnsMask

* Add testcase

* Remove EvaluateSimdMaskToPattern

* Revert ""Use LSB of vector when converting from vector to mask""

This reverts commit c96e38c7ed6f2bfdce99f9d073d36b13c375be7f.

* formatting

* fix assert check

Change-Id: I7951b70aec9aaef5521e100d30737b5a4d332b38

* GenTree for gtNewSimdCvtVectorToMaskNode()

* Split NI_Sve_ConditionalSelect into it's own case

* Remove mask version of EvaluateBinaryInPlace

* remove assert

* Check all bits in EvaluateSimdCvtVectorToMask

* Add ConstantVectors test

* No need for DOTNET_EnableHWIntrinsic in csproj

* Use IsMaskZero

* Remove EvaluateBinarySimdAndMask

* In lowering, default the mask type to byte

* In lowering, convert mask using byte basetype",6,346,194,allow more folding of simd compares (issue_ref)
dotnet/runtime,02a38a68b4aba4b69d6c349b944084b861a560b6,"Update fuzzing dependencies (#117154)

Co-authored-by: Miha Zupan <mizupan@microsoft.com>",2025-07-01 15:56:16+00:00,Miha Zupan,0,,,2,7,6,update fuzzing dependencies (issue_ref)
dotnet/runtime,0e04707a96eb3fdb3869c664695f03d30154c3a2,"SVE2: AddPairwise, AddPairwiseWidening, AddSaturate, AddWide and AddWidening (#117188)

Contributes to #115479",2025-07-01 18:14:52+00:00,Jacob Crawley,0,,,7,1215,6,"sve2: addpairwise, addpairwisewidening, addsaturate, addwide and addwidening (issue_ref)contributes to issue_ref"
dotnet/runtime,8dfd2b716f67a88aaa30c5633add3bf90f0f8e77,Have certain mask simplification operations happen earlier than morph (#117101),2025-07-01 18:57:59+00:00,Tanner Gooding,1,b02b5a026ce4929f62d22a69980db18e8d19f388,"Ensure that folding of unary mask operations doesn't modify the tracked op2 (#117380)

* Ensure that folding of unary mask operations doesn't modify the tracked op2

* Add ISA check to the regression test

* Remove an assert that isn't valid with the fix",5,257,335,have certain mask simplification operations happen earlier than morph (issue_ref)
dotnet/runtime,d5f9aa597108b3c407e1140a2befffd4b451af43,"Have CSE correctly track float/simd and mask registers for their own enregistration (#117118)

* Don't have CSE track simd or mask registers as part of the integer enregCount

* Have optcse track non-integer enregistration counts

* Undo the optcse changes to RL and Parameterized heuristic types",2025-07-01 19:44:54+00:00,Tanner Gooding,1,2a04cff6ed34d8845d0feeb0ce58d7b567a4323b,"JIT: fix profiler leave hook kill set for void returns on arm (#117201)

For arm void return methods, the profiler leave hook codegen kills R0.
Model this so we don't inadvertently report R0 as gc-live.

Fixes #117149.",9,225,110,have cse correctly track float/simd and mask registers for their own enregistration (issue_ref)* don't have cse track simd or mask registers as part of the integer enregcount* have optcse track non-integer enregistration counts* undo the optcse changes to rl and parameterized heuristic types
dotnet/runtime,eb3f78889ed28b3f148c203b54ec343ea6915b44,ML-KEM: Change Key property to GetKey method,2025-07-01 20:23:34+00:00,Kevin Jones,0,,,5,27,22,ml-kem: change key property to getkey method
dotnet/runtime,359769e0c808a70aa836f9114d79a42dcbdb57ce,Add interpreter pipeline (#116844),2025-07-01 21:08:08+00:00,Eduardo Velarde,0,,,5,85,30,add interpreter pipeline (issue_ref)
dotnet/runtime,a28dfc77040730794ccd569dc02d3a521cb01288,"JIT: Allow compaction of blocks with switch predecessors (#117177)

Now that switch successor edge redirection is trivial, we can compact blocks with switch predecessors without worrying about invalidating the entire switch successor map.",2025-07-01 21:36:58+00:00,Aman Khalid,0,,,1,0,11,"jit: allow compaction of blocks with switch predecessors (issue_ref)now that switch successor edge redirection is trivial, we can compact blocks with switch predecessors without worrying about invalidating the entire switch successor map."
dotnet/runtime,25f84a4df1fc7c881f9dabbb0c6642cb5a44f84f,Add AES Key Wrap with Padding,2025-07-01 23:17:45+00:00,Jeremy Barton,0,,,7,1501,0,add aes key wrap with padding
dotnet/runtime,a3929e2ba319b5899d39bfd39c0314395739408b,"Revert ""Replace `CordbProcess::GetSharedDomain` with `GetAppDomain` (#117037)"" (#117221)

This reverts commit e0e9d7ce28614adc822afa00283a9525cd28afbf.",2025-07-02 00:13:04+00:00,David Wrighton,1,c4bc758c27c582223c51b9e6ba7ae4a14af4974a,"Reapply ""Replace CordbProcess::GetSharedDomain with GetAppDomain"" (#117224)

Fix on top of the original: use Assembly as the ID for CordbAssembly instead of DomainAssembly.",8,165,49,"revert ""replace with (issue_ref)"" (issue_ref)this reverts commit e0e9d7ce28614adc822afa00283a9525cd28afbf."
dotnet/runtime,74076ee1b84f430208100393f042740b0adc70eb,"Only root infrastructure and dependencies for IDynamicInterfaceCastable when IDIC is implemented (#116660)

Co-authored-by: Austin Wise <AustinWise@gmail.com>",2025-07-02 01:13:56+00:00,Jeremy Koritzinsky,1,a2092a3f6f667c9edf972c258719ec5e218a9fd5,"Allow caching IDynamicInterfaceCastable results (#117646)

Resolves #107999.",19,179,77,only root infrastructure and dependencies for idynamicinterfacecastable when idic is implemented (issue_ref)
dotnet/runtime,e4bbf7e49bff2ba7574e796bcede64e4321c3319,"Handle calls to shared generic interfaces from shared generic code (#117210)

- The implementation uses the true LDVIRTFTN path for this. Since it thunks to using function pointer the perf is likely not ideal, but we will need a new generic dictionary entry kind to make this simple, and I'd like to avoid making that change to unblock progress here
- This expensive path was probably fine for use with virtual generic methods, but regular interface dispatch shouldn't be this expensive, so we'll want to fix this later",2025-07-02 07:12:28+00:00,David Wrighton,1,8ec637d70f0351090a41b0a00e48248c5b050a4f,"Implement the unsigned-source overflowing conversions in the interpreter (#116924)

Implements the _un versions of conv_ovf.
Fixes some incorrect/missing conversions in the original conv_ovfs I added in a previous PR.
Expands the conv_ovf helper so it can do same-size and growing conversions with sign changes.",2,15,2,"handle calls to shared generic interfaces from shared generic code (issue_ref)- the implementation uses the true ldvirtftn path for this. since it thunks to using function pointer the perf is likely not ideal, but we will need a new generic dictionary entry kind to make this simple, and i'd like to avoid making that change to unblock progress here- this expensive path was probably fine for use with virtual generic methods, but regular interface dispatch shouldn't be this expensive, so we'll want to fix this later"
dotnet/runtime,c92fae9253d4d47987304f6f803562b10b69eec2,"Exit with ExitProcess when using debug UCRT (#117187)

* Revert ""Exit with quick_exit when using debug UCRT (#109006)""

This reverts commit e1d7398072966e20b01d2e3bd4af724f82a98f04.

* Exit with ExitProcess when using debug UCRT

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-07-02 08:06:18+00:00,Michal Strehovský,0,,,2,14,12,"exit with exitprocess when using debug ucrt (issue_ref)* revert ""exit with quick_exit when using debug ucrt (issue_ref)""this reverts commit e1d7398072966e20b01d2e3bd4af724f82a98f04.* exit with exitprocess when using debug ucrt"
dotnet/runtime,48319f41291174f8034380e550a5020c9c5248f4,"Share some array code between CoreCLR and NativeAOT (#116903)

Shares the major logic of Copy and Clear, cleared some others. Using coreclr behavior has source of truth. NativeAOT didn't support primitive widen for enum->enum.

* Adapt CopyImpl and CanAssignArrayType to NativeAot

* Adapt CopySlow paths

* Cleanup old CopyImpl

* Add test for primitive widen with enum

* Fold identical ConstrainedCopy

* Share Array.Clear

* Share GetFlattenedIndex

* Reduce overhead of GetLength/LowerBound/UpperBound

* Share GetLength/GetUpperBound/GetLowerBound

* Cleanup IsSzArray

* Encounter for pointer in IsSystemObject

* Reduce overhead of ArrayRank

* Add test for copying value types

* Simplify bound checking

* Cleanup CER comment

* Add test for nullable case

* Move copy cases to shared

* Avoid multiplication by non-constant

* Reorder PrimitiveWiden

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-07-02 08:10:50+00:00,Huo Yaoyuan,0,,,10,563,970,"share some array code between coreclr and nativeaot (issue_ref)shares the major logic of copy and clear, cleared some others. using coreclr behavior has source of truth. nativeaot didn't support primitive widen for enum->enum.* adapt copyimpl and canassignarraytype to nativeaot* adapt copyslow paths* cleanup old copyimpl* add test for primitive widen with enum* fold identical constrainedcopy* share array.clear* share getflattenedindex* reduce overhead of getlength/lowerbound/upperbound* share getlength/getupperbound/getlowerbound* cleanup isszarray* encounter for pointer in issystemobject* reduce overhead of arrayrank* add test for copying value types* simplify bound checking* cleanup cer comment* add test for nullable case* move copy cases to shared* avoid multiplication by non-constant* reorder primitivewiden---------"
dotnet/runtime,a90680fd7635df188efc5e9907545c6c2d2e8ad4,"Add CoreCLR support for android GC bridge (#116310)

* Add support for the new cross reference GCHandle type

From Aaron's implementation.

* Add interop glue for bridge

From Aaron's implementation

* Add GCBridge test

* Implement scanning of bridge objects and construction of SCCs

from Maoni

* Add tarjan bridge computation

* Fix object validation

Checking if the object is promoted was validating the next object header in debug builds. During bridge tarjan computation, we patch the object header for some objects in order to store data used by the bridge algorithm, so we need to disable this validation.

* bgc and multiple heap support for bridge obj processing

* Add incorrect waiting for gc bridge to finish

* Update code to new API

* Clear weakrefs for bridge objects with collected java peers

* Wait for bridge processing while resolving the gchandle to prevent races

* Maoni review

HANDLE_MAX_INTERNAL_TYPES value

new instead of malloc

assert for allocation failure

Reuse memory for ColorData and ScanData between collections. We still do alloc/free for other type of data, for example for arrays representing edges between SCCs.

Actually print class name when enabling tarjan bridge logs.

Add separate IsPromoted method to the gc interface

Rename TriggerGCBridge to TriggerClientBridgeProcessing to be more specific about what it is doing.

* Aaron review

* Update to new API

* Fix build

Include classes that are part of the Java Marshal API on mono as well

Disable test on mono and nativeaot.

* Use cross refs args directly in more places

* Change unreachable handle length from int to size_t

* Remove FEATURE_GCBRIDGE

* Move interop javamarshal code out of interop shared file

Create reset event during javamarshal initialize

* Use asserts in test

* Add bridge waiting to WeakReference<T> as well

* Review

* review

* High precision timestamp

* Naming consistency in gcbridge.cpp, matching rest of the runtime

* Fix interface breakage

* Fix test/JavaMarshal on platforms where it is not enabled

The test used to fail and the JavaMarshal api would crash due to missing internal calls.

* Share GetHighPrecisionTimeStamp across GC code

* Fix mark function used during BGC finishing pause",2025-07-02 09:07:52+00:00,Vlad Brezae,1,c04e15fb2749abea9903941bd02e1e64da22a678,"Add documentation for Java interop types. (#120964)

Fixes https://github.com/dotnet/runtime/issues/120504",54,2682,35,"add coreclr support for android gc bridge (issue_ref)* add support for the new cross reference gchandle typefrom aaron's implementation.* add interop glue for bridgefrom aaron's implementation* add gcbridge test* implement scanning of bridge objects and construction of sccsfrom maoni* add tarjan bridge computation* fix object validationchecking if the object is promoted was validating the next object header in debug builds. during bridge tarjan computation, we patch the object header for some objects in order to store data used by the bridge algorithm, so we need to disable this validation.* bgc and multiple heap support for bridge obj processing* add incorrect waiting for gc bridge to finish* update code to new api* clear weakrefs for bridge objects with collected java peers* wait for bridge processing while resolving the gchandle to prevent races* maoni reviewhandle_max_internal_types valuenew instead of mallocassert for allocation failurereuse memory for colordata and scandata between collections. we still do alloc/free for other type of data, for example for arrays representing edges between sccs.actually print class name when enabling tarjan bridge logs.add separate ispromoted method to the gc interfacerename triggergcbridge to triggerclientbridgeprocessing to be more specific about what it is doing.* aaron review* update to new api* fix buildinclude classes that are part of the java marshal api on mono as welldisable test on mono and nativeaot.* use cross refs args directly in more places* change unreachable handle length from int to size_t* remove feature_gcbridge* move interop javamarshal code out of interop shared filecreate reset event during javamarshal initialize* use asserts in test* add bridge waiting to weakreference<t> as well* review* review* high precision timestamp* naming consistency in gcbridge.cpp, matching rest of the runtime* fix interface breakage* fix test/javamarshal on platforms where it is not enabledthe test used to fail and the javamarshal api would crash due to missing internal calls.* share gethighprecisiontimestamp across gc code* fix mark function used during bgc finishing pause"
dotnet/runtime,877b0cdea5bfb1a7ca99934053421a7a8262d8fe,"Reduce HTTP headers validation overhead (#117071)

* Reduce HTTP headers validation overhead

* More cases

---------

Co-authored-by: Miha Zupan <mizupan@microsoft.com>",2025-07-02 11:45:32+00:00,Miha Zupan,0,,,1,65,13,reduce http headers validation overhead (issue_ref)* reduce http headers validation overhead* more cases---------
dotnet/runtime,81e573ee902dbc3d866cd3c8bcd5be1dc3b843df,"Revert ""Add interpreter pipeline (#116844)"" (#117234)

This reverts commit 359769e0c808a70aa836f9114d79a42dcbdb57ce.",2025-07-02 13:51:45+00:00,Jan Kotas,0,,,5,30,85,"revert ""add interpreter pipeline (issue_ref)"" (issue_ref)this reverts commit 359769e0c808a70aa836f9114d79a42dcbdb57ce."
dotnet/runtime,78ccbe1bac9f19d50c4d297772d2b9c0c43f97c3,JIT: Remove overzealous fake-splitting assert for x86 unwind info (#117156),2025-07-02 14:00:15+00:00,Aman Khalid,0,,,1,2,7,jit: remove overzealous fake-splitting assert for x86 unwind info (issue_ref)
dotnet/runtime,d007590aab3e1e4f972c754557b114b73977ba1b,Do not generate __GetFieldHelper for ValueTuple (#117238),2025-07-02 14:08:25+00:00,Michal Strehovský,0,,,1,4,0,do not generate __getfieldhelper for valuetuple (issue_ref)
dotnet/runtime,6b259a2b2cb68b9baa613d62f23b013cef700c94,"JIT: remove unneeded keep flag from loop header blocks (#117227)

If we create a preheader for a loop whose header is a try entry, and
put that preheader in the same EH region, the header no longer needs
special protection.",2025-07-02 14:28:49+00:00,Andy Ayers,0,,,1,9,0,"jit: remove unneeded keep flag from loop header blocks (issue_ref)if we create a preheader for a loop whose header is a try entry, andput that preheader in the same eh region, the header no longer needsspecial protection."
dotnet/runtime,9ba30d8c6049036eb26744e5166139ff7d63e6fd,"arm64: Add Sve test template SveVecBinaryOpValidateTest.template (#117237)

This template is used in the Sve tests Scale, ReciprocalSqrtStep & VectorTableLookup and should now check all the values instead of every other value.",2025-07-02 14:42:51+00:00,Jonathan Davies,0,,,1,17,16,"arm64: add sve test template svevecbinaryopvalidatetest.template (issue_ref)this template is used in the sve tests scale, reciprocalsqrtstep & vectortablelookup and should now check all the values instead of every other value."
dotnet/runtime,8e2a1d5cc81eb7498895db26b53b3c34174943ed,"JIT: relax constraint in conditional escape analysis (#117222)

Enable conditional escape analysis if the allocation was at one time guarded by a GDV,
even if that GDV gets resolved by the new GDV cleanup pass that runs before escape analysis.

Fixes #117204.",2025-07-02 15:04:59+00:00,Andy Ayers,1,278670bc677b28ebf17b593c0ba4873b1b154edc,"JIT: relax another check in conditional escape analysis (#117295)

Proceed with CEA cloning even when the allocation site dominates the assignment
to the enumerator var. The cloning will be a bit wasteful as the original code will
become unreachable, but the code is set up to specialize the clone and so this is
the less risky fix.

Also restore recognition of `IEnumerable<T>.GetEnumerator` as this gives a useful
inlining boost in some cases.

Fixes #117204 cases that were not fixed by #117222.",2,64,80,"jit: relax constraint in conditional escape analysis (issue_ref)enable conditional escape analysis if the allocation was at one time guarded by a gdv,even if that gdv gets resolved by the new gdv cleanup pass that runs before escape analysis.fixes issue_ref."
dotnet/runtime,5399d5da8376270995adade66457d94b83955bea,Correct the naming of SVE2 Math APIs (#117236),2025-07-02 17:18:19+00:00,Jacob Crawley,0,,,7,126,126,correct the naming of sve2 math apis (issue_ref)
dotnet/runtime,b79c4fbf284a6b002f46b1fc95ee39e545687515,"Preserve entitlements in managed Mach-O signer (#116659)

Preserves entitlements in the signature when signing with the managed signer. Works on regular apphost and singlefile apphost.

Adds EntitlementsBlob and DerEntitlementsBlob, and updates relevant code to include these blobs.
Adds an EmbeddedSignatureBlob to signing methods to preserve the entitlements from the previous signature.
Precalculates the maximum length required for the new apphost / bundle and allocates an memory-mapped file in memory, copies / modifies the file, then writes out the final length of the file.
Adds tests to ensure the inode of the apphost changes when CreateAppHost / GenerateBundle creates a new apphost/bundle to ensure the MacOS signature cache is dirtied.",2025-07-02 22:09:46+00:00,Jackson Schuster,0,,,28,1468,477,"preserve entitlements in managed mach-o signer (issue_ref)preserves entitlements in the signature when signing with the managed signer. works on regular apphost and singlefile apphost.adds entitlementsblob and derentitlementsblob, and updates relevant code to include these blobs.adds an embeddedsignatureblob to signing methods to preserve the entitlements from the previous signature.precalculates the maximum length required for the new apphost / bundle and allocates an memory-mapped file in memory, copies / modifies the file, then writes out the final length of the file.adds tests to ensure the inode of the apphost changes when createapphost / generatebundle creates a new apphost/bundle to ensure the macos signature cache is dirtied."
dotnet/runtime,344872cdccddb3b7a9ca0fb57d8b279dc20f4f78,"Add issue links / reasons for more ExpectedWarningAttributes with tool exceptions (#116799)

Adds links for a number of expected warnings in test cases that aren't produced by all 3 tools.

Adds a reason string for IL3XXX warnings that are produced by both the analyzer and Native AOT.",2025-07-02 23:20:51+00:00,Jackson Schuster,0,,,20,688,692,add issue links / reasons for more expectedwarningattributes with tool exceptions (issue_ref)adds links for a number of expected warnings in test cases that aren't produced by all 3 tools.adds a reason string for il3xxx warnings that are produced by both the analyzer and native aot.
dotnet/runtime,a7b101f17eb1d6849b0737810256478aea8fcecc,Specialize __GetFieldHelper per generic instantiation (#117253),2025-07-03 12:20:16+00:00,Michal Strehovský,0,,,2,44,25,specialize __getfieldhelper per generic instantiation (issue_ref)
dotnet/runtime,e2ca190bd6ac5445df46481b96ce8310978eb491,Fixing assertion when calling get_object_id (#117185),2025-07-03 14:17:15+00:00,Thays Grazia,1,36eaeba5e08e2d523b9402c751e8b6d4a00eb53a,"Fix crash while debugging AOT'ed app. (#117627)

Co-authored-by: Larry Ewing <lewing@microsoft.com>",1,2,1,fixing assertion when calling get_object_id (issue_ref)
dotnet/runtime,4a06ac3f4795a305e29b84e2464dc8953be871fa,"Arm64 SVE: Fix conditionalselect with constant arguments (#116852)

* Arm64 SVE: Fix conditionalselect with constant arguments

Fixes #116847

When folding, allow arg1 to be a constant mask

* Make masked EvaluateBinaryInPlace() Arm64 only

* Check significantBit in EvaluateSimdVectorToPattern()

* fix set checks in EvaluateSimdVectorToPattern

* Use masks in EvalHWIntrinsicFunTernary() for SVE conditionalselect

* Check all of a vector lane when converting to mask

* Add testing for EvalHWIntrinsicFunTernary changes

* whitespace

* Revert ""Check all of a vector lane when converting to mask""

This reverts commit b923b28fa28b61a43df53be13284f48ff0ac0477.

* rename significantBit to leastSignificantBit

* Use LSB of vector when converting from vector to mask

* Add LowerCnsMask

* Add testcase

* Remove EvaluateSimdMaskToPattern

* Revert ""Use LSB of vector when converting from vector to mask""

This reverts commit c96e38c7ed6f2bfdce99f9d073d36b13c375be7f.

* formatting

* fix assert check

Change-Id: I7951b70aec9aaef5521e100d30737b5a4d332b38

* GenTree for gtNewSimdCvtVectorToMaskNode()

* Split NI_Sve_ConditionalSelect into it's own case

* Remove mask version of EvaluateBinaryInPlace

* remove assert

* Check all bits in EvaluateSimdCvtVectorToMask

* Add ConstantVectors test

* No need for DOTNET_EnableHWIntrinsic in csproj

* Use IsMaskZero

* Remove EvaluateBinarySimdAndMask

* In lowering, default the mask type to byte

* In lowering, convert mask using byte basetype",2025-07-03 16:26:37+00:00,Alan Hayward,1,8e97d8de6c4cc4f4d0ecef8c0ee234e0efee804a,"Allow SVE mask patterns to be empty (#117376)

Fixes #116888

When evaluating an SVE mask pattern, it's possible that the resulting
predicate will be all false. For example, when using LargestMultipleOf4
on a vector with only 2 elements.",10,392,31,"arm64 sve: fix conditionalselect with constant arguments (issue_ref)* arm64 sve: fix conditionalselect with constant argumentsfixes issue_refwhen folding, allow arg1 to be a constant mask* make masked evaluatebinaryinplace() arm64 only* check significantbit in evaluatesimdvectortopattern()* fix set checks in evaluatesimdvectortopattern* use masks in evalhwintrinsicfunternary() for sve conditionalselect* check all of a vector lane when converting to mask* add testing for evalhwintrinsicfunternary changes* whitespace* revert ""check all of a vector lane when converting to mask""this reverts commit b923b28fa28b61a43df53be13284f48ff0ac0477.* rename significantbit to leastsignificantbit* use lsb of vector when converting from vector to mask* add lowercnsmask* add testcase* remove evaluatesimdmasktopattern* revert ""use lsb of vector when converting from vector to mask""this reverts commit c96e38c7ed6f2bfdce99f9d073d36b13c375be7f.* formatting* fix assert checkchange-id: i7951b70aec9aaef5521e100d30737b5a4d332b38* gentree for gtnewsimdcvtvectortomasknode()* split ni_sve_conditionalselect into it's own case* remove mask version of evaluatebinaryinplace* remove assert* check all bits in evaluatesimdcvtvectortomask* add constantvectors test* no need for dotnet_enablehwintrinsic in csproj* use ismaskzero* remove evaluatebinarysimdandmask* in lowering, default the mask type to byte* in lowering, convert mask using byte basetype"
dotnet/runtime,c12e8765e13ff97ff7a69db9b799ccd433943fde,"Add a cache for Native offset to IL Offset mapping in the stack walking logic (#117218)

- This cache reduces an issue where the locking around the `DebuggerJitInfo` is extremely inefficient to access in a multithreaded system, or if MANY different methods are on the stack
- Since we do not have extensive experience with this cache, its size is configurable
  - This allows us to discover scenarios in production where the cache is insufficiently big, and address problems as needed
  - The initial size is 1024 which is expected to be fairly ok, at a cost of 16KB of space on 64 systems.

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-07-03 16:51:53+00:00,David Wrighton,0,,,2,216,29,"add a cache for native offset to il offset mapping in the stack walking logic (issue_ref)- this cache reduces an issue where the locking around the is extremely inefficient to access in a multithreaded system, or if many different methods are on the stack- since we do not have extensive experience with this cache, its size is configurable - this allows us to discover scenarios in production where the cache is insufficiently big, and address problems as needed - the initial size is 1024 which is expected to be fairly ok, at a cost of 16kb of space on 64 systems."
dotnet/runtime,919597ab3aa5e91f8a6ea63ba58de2b842edc833,"[main] Source code updates from dotnet/dotnet (#117274)

* [VMR] Codeflow 61f2ad6-61f2ad6

[[ commit created by automation ]]

* Update dependencies from https://github.com/dotnet/dotnet build 273855
Updated Dependencies:
System.CommandLine (Version 2.0.0-beta5.25311.107 -> 2.0.0-beta6.25351.106)
Microsoft.DotNet.Cecil (Version 0.11.5-alpha.25311.107 -> 0.11.5-alpha.25351.106)
Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport, Microsoft.DotNet.ApiCompat.Task (Version 10.0.100-preview.6.25311.107 -> 10.0.100-preview.7.25351.106)
Microsoft.DotNet.Arcade.Sdk, Microsoft.DotNet.XliffTasks, Microsoft.DotNet.Helix.Sdk, Microsoft.DotNet.GenAPI, Microsoft.DotNet.GenFacades, Microsoft.DotNet.XUnitExtensions, Microsoft.DotNet.Build.Tasks.Archives, Microsoft.DotNet.Build.Tasks.Packaging, Microsoft.DotNet.Build.Tasks.Installers, Microsoft.DotNet.Build.Tasks.Templating, Microsoft.DotNet.Build.Tasks.Workloads, Microsoft.DotNet.CodeAnalysis, Microsoft.DotNet.Build.Tasks.TargetFramework, Microsoft.DotNet.RemoteExecutor, Microsoft.DotNet.Build.Tasks.Feed, Microsoft.DotNet.SharedFramework.Sdk, Microsoft.DotNet.PackageTesting (Version 10.0.0-beta.25311.107 -> 10.0.0-beta.25351.106)
Microsoft.DotNet.XUnitAssert, Microsoft.DotNet.XUnitConsoleRunner (Version 2.9.2-beta.25311.107 -> 2.9.2-beta.25351.106)
Microsoft.NETCore.App.Ref, runtime.native.System.IO.Ports, Microsoft.NETCore.ILAsm, Microsoft.NET.Sdk.IL, System.Text.Json, System.Reflection.Metadata, System.Reflection.MetadataLoadContext (Version 10.0.0-preview.6.25311.107 -> 10.0.0-preview.7.25351.106)
Microsoft.Net.Compilers.Toolset, Microsoft.CodeAnalysis, Microsoft.CodeAnalysis.CSharp, Microsoft.CodeAnalysis.Analyzers (Version 5.0.0-1.25311.107 -> 5.0.0-1.25351.106)
Microsoft.CodeAnalysis.NetAnalyzers (Version 10.0.0-preview.25311.107 -> 10.0.0-preview.25351.106)

* Disable CA1861 to unblock the build

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Alexander Köplinger <alex.koeplinger@outlook.com>",2025-07-03 18:09:22+00:00,dotnet-maestro[bot],1,af5972ec48da98571e5a72d4cb2ce4b94368836f,"Disable data dehydration on Windows by default (#117751)

Resolves #112927.

This improves working set and startup. There's no such impact on non-Windows so keeping it on. Still enabling when optimizing for size.",45,243,253,"[main] source code updates from dotnet/dotnet (issue_ref)* [vmr] codeflow 61f2ad6-61f2ad6[[ commit created by automation ]]* update dependencies from build 273855updated dependencies:system.commandline (version 2.0.0-beta5.25311.107 -> 2.0.0-beta6.25351.106)microsoft.dotnet.cecil (version 0.11.5-alpha.25311.107 -> 0.11.5-alpha.25351.106)microsoft.net.workload.emscripten.current.manifest-10.0.100.transport, microsoft.dotnet.apicompat.task (version 10.0.100-preview.6.25311.107 -> 10.0.100-preview.7.25351.106)microsoft.dotnet.arcade.sdk, microsoft.dotnet.xlifftasks, microsoft.dotnet.helix.sdk, microsoft.dotnet.genapi, microsoft.dotnet.genfacades, microsoft.dotnet.xunitextensions, microsoft.dotnet.build.tasks.archives, microsoft.dotnet.build.tasks.packaging, microsoft.dotnet.build.tasks.installers, microsoft.dotnet.build.tasks.templating, microsoft.dotnet.build.tasks.workloads, microsoft.dotnet.codeanalysis, microsoft.dotnet.build.tasks.targetframework, microsoft.dotnet.remoteexecutor, microsoft.dotnet.build.tasks.feed, microsoft.dotnet.sharedframework.sdk, microsoft.dotnet.packagetesting (version 10.0.0-beta.25311.107 -> 10.0.0-beta.25351.106)microsoft.dotnet.xunitassert, microsoft.dotnet.xunitconsolerunner (version 2.9.2-beta.25311.107 -> 2.9.2-beta.25351.106)microsoft.netcore.app.ref, runtime.native.system.io.ports, microsoft.netcore.ilasm, microsoft.net.sdk.il, system.text.json, system.reflection.metadata, system.reflection.metadataloadcontext (version 10.0.0-preview.6.25311.107 -> 10.0.0-preview.7.25351.106)microsoft.net.compilers.toolset, microsoft.codeanalysis, microsoft.codeanalysis.csharp, microsoft.codeanalysis.analyzers (version 5.0.0-1.25311.107 -> 5.0.0-1.25351.106)microsoft.codeanalysis.netanalyzers (version 10.0.0-preview.25311.107 -> 10.0.0-preview.25351.106)* disable ca1861 to unblock the build---------"
dotnet/runtime,159157e7fe369a4cc6ef05c301165917ffb6487a,Add interpreter pipeline (#117254),2025-07-04 00:48:56+00:00,Eduardo Velarde,1,44a40478cd6ba62424fcfa9425d5837f74482ebb,"Disable some coreclr tests for interpreter (#119785)

* Disable some coreclr tests for interpreter

* Add mechanism to disable tests when interpreted
* Disable tests that are incompatible with interpreter

* Fix typo

* Update src/tests/JIT/Directed/PREFIX/volatile/1/arglist_Target_64BIT_volatile.ilproj

* Update src/tests/JIT/Directed/arglist/vararg_TargetUnix.csproj

* Update src/tests/JIT/Directed/arglist/vararg_TargetWindows.csproj

* Update src/tests/JIT/Regression/JitBlue/GitHub_27924/GitHub_27924.csproj

* Update src/tests/JIT/Regression/JitBlue/Runtime_45090/Runtime_45090.csproj",5,85,30,add interpreter pipeline (issue_ref)
dotnet/runtime,694fa07334fd55c779a84b2c10783bc82da7d4a5,Ensure the SIMD instruction names start with v (#117281),2025-07-04 06:24:35+00:00,Tanner Gooding,1,c6f6a0929cecc35fb029154b7257185011bdfd4a,"Add CPUID for AvxVnniInt8 and AvxVnniInt16 (#113956)

* Add CPUID for AvxVnniInt8 and AvxVnniInt16

* AVXVNNIINT* API surface and template tests

* Run formatting

* Remove new keyword where not required

* Move AvxVnniInt* with other Vex instruction sets

* Add smoke test for Avx10.2 and add AvxvnniInt* Isas to those tests

* Correct smoke tests for avx2

* Add AvxVnniInt* implications

* correct smoke test for AVX2

* Enable Vex encoding of AvxVnniInt* instructions when Avx10.2 is not available

* Avx10.2 will support VEX versions of AvxVnniInt*

* Run formatting

* Disable Avx10.2 smoketest

* Fix the Avx10.2 smoketest

* Fix the smoketest

* Fix assert and instruction definition to merge with main

* Update src/coreclr/inc/clrconfigvalues.h

Co-authored-by: Tanner Gooding <tagoo@outlook.com>

* Fix nativeAOT smoketests and address review comments

* Resolve conflicts after merge

* Use 2 bits / ISA to track 3 scenarios 1. AVXVNNIINT8 + AVXVNNIINT16 (VEX) 2. AVXVNNIINT8 + AVXVNNIINT16 (EVEX)3. AVXVNNIINT8 + AVXVNNIINT16 (VEX + EVEX)

* Enable APIs for AVXVNNIINT and AVXVNNIINT_V512 in JIT

* Resolve CI errors

* Refactor code for better perf and nit reviews

* update jiteeversionguid

* Use AuxiliaryJitType to track args types for AVX VNNI INT

* Remove x64 IS for AVXVNNIINT and refactor code

* Remove X64 ISas for AVXVNNIINT

* Update src/native/minipal/cpufeatures.c

Co-authored-by: Tanner Gooding <tagoo@outlook.com>

* Refactoring

* Ensure we check compSupportsHWIntrinsic so that NAOT works

* Add the missing instruction latencies

* Fixing the naot test and InstructionSet query

---------

Co-authored-by: Tanner Gooding <tagoo@outlook.com>",1,802,801,ensure the simd instruction names start with v (issue_ref)
dotnet/runtime,4cc3020f2bdd4fdb9de337aaab85e37f4cddd4d5,"Delete manifest resource cache for NativeAOT (#116471)

* Remove resource cache

* Use hash table of assembly name

* Expand GetManifestResourceStream

* Move argument verification to public api surface

* Remove iterator implementation

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-07-04 06:40:21+00:00,Huo Yaoyuan,0,,,2,67,82,delete manifest resource cache for nativeaot (issue_ref)* remove resource cache* use hash table of assembly name* expand getmanifestresourcestream* move argument verification to public api surface* remove iterator implementation---------
dotnet/runtime,12689031803a2a74254f457103f75214e3c50abc,"Update CoreclrTestWrapperLib to use cordll (#116442)

* Update CoreclrTestWrapperLib.cs to use cordll
* Update XUnitLogChecker.cs",2025-07-04 08:16:19+00:00,Juan Hoyos,0,,,2,13,5,update coreclrtestwrapperlib to use cordll (issue_ref)* update coreclrtestwrapperlib.cs to use cordll* update xunitlogchecker.cs
dotnet/runtime,0dde205e015648616fce255778d20c0d2e0bb0bd,"[mono] fix --trace (#117246)

Co-authored-by: Vlad Brezae <brezaevlad@gmail.com>",2025-07-04 10:31:13+00:00,Pavel Savara,1,135a4af8fde3742ce8fac3c403afffeed791de11,"[mono][interp] Fix alignment for simd args (#117476)

For untiered code, we don't use the var offset allocator, the offset for vars is computed on the fly as we push and pop them from the execution stack during initial IL import compilation phase. These offsets (and their alignment) follow the same rules as if they would be passed as arguments to a method. When we initially push a var we don't know if this var will be an argument to a call, so it might not have the stack alignment of 16 bytes. In this case, at the moment of a call we add a MINT_MOV_STACK_UNOPT opcode which moves the entire var space so it has the right alignment. The problem is that all simd params (which need 16byte alignment) will now become unaligned. `interp_realign_simd_params` is called to resolve this problem by doing another mov, this time starting at the location of the first simd argument.

This realignment is meant to be done only once, because once a simd argument is properly aligned, all following arguments are aligned as well, due to the way they are initially pushed on the execution stack. The issue was that we were not breaking the loop once we do the realignment starting at the first simd argument.",10,17,43,[mono] fix --trace (issue_ref)
dotnet/runtime,9960415cd5b14b9b56305aa4f665e80223a0a994,Re-enable some binary specifier tests (#117304),2025-07-04 11:45:45+00:00,Stephen Toub,0,,,4,4,8,re-enable some binary specifier tests (issue_ref)
dotnet/runtime,47378ac48d37a54cb41d48579e07fb9dae889c9d,"Move IPV6 ScopeId storage slot out of common path in Uri (#117292)

Co-authored-by: Miha Zupan <mizupan@microsoft.com>",2025-07-04 12:00:08+00:00,Miha Zupan,1,fab69a4a64c78f15e392a1b264d70f492251a5d9,"Avoid some substring allocations during Uri host normalization (#117289)

* Avoid some substring allocations during Uri normalization

* Fix resizing logic

---------

Co-authored-by: Miha Zupan <mizupan@microsoft.com>",1,21,15,move ipv6 scopeid storage slot out of common path in uri (issue_ref)
dotnet/runtime,7c3fee66b97ca69365e45b192972af7f87e81b8f,Remove stale TODO comments on Task.WhenEach (#117303),2025-07-04 13:19:13+00:00,Stephen Toub,0,,,1,2,2,remove stale todo comments on task.wheneach (issue_ref)
dotnet/runtime,f5017128543af1f0eef9a728e341d21a221864aa,Remove TODOs associated with closed IAsyncEnumerable issue (#117298),2025-07-04 23:55:29+00:00,Stephen Toub,0,,,2,0,10,remove todos associated with closed iasyncenumerable issue (issue_ref)
dotnet/runtime,9e5e6aa7bc36aeb2a154709a9d1192030c30a2ef,"Fix dead link in build.sh help message to point to correct cross-building documentation (#117325)

* Initial plan

* Fix dead link in build.sh help to point to correct cross-building documentation

Co-authored-by: jkotas <6668460+jkotas@users.noreply.github.com>

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: jkotas <6668460+jkotas@users.noreply.github.com>",2025-07-05 00:51:06+00:00,Copilot,1,2e4770f686731a50e50bffb980ea5cbc4cac6ce5,"Fix printing subset help through msbuild (#117926)

We need to quote the arguments separately otherwise msbuild just gets a single arg.

Fixes https://github.com/dotnet/runtime/issues/117920",1,1,1,fix dead link in build.sh help message to point to correct cross-building documentation (issue_ref)* initial plan* fix dead link in build.sh help to point to correct cross-building documentation
dotnet/runtime,cc37cdd4134f8e41e6441d95055f3673e816cd9c,"Seal NullLogger (#117342)

Sealing it makes type checks against it cheaper. Some libraries special-case ILogger instances that are NullLogger in order to avoid some logging-related overheads.

While normally sealing a previously shipped public type would be a breaking change, NullLogger's only constructor is private, so types can't currently derive from it.",2025-07-06 17:15:45+00:00,Stephen Toub,0,,,2,2,2,"seal nulllogger (issue_ref)sealing it makes type checks against it cheaper. some libraries special-case ilogger instances that are nulllogger in order to avoid some logging-related overheads.while normally sealing a previously shipped public type would be a breaking change, nulllogger's only constructor is private, so types can't currently derive from it."
dotnet/runtime,14a8b18a725e37637978a5fdeb7cece9a694182c,"Optimize Stack<T>'s enumerator (#117328)

There's a non-trivial amount of unnecessary overhead/complexity in `Stack<T>`'s enumerator. This streamlines it.

(It does also change the undefined behavior of using Current erroneously. We can put back most of its current semantics if we really care. This change puts it on a plan closer to `List<T>`.)",2025-07-07 13:17:02+00:00,Stephen Toub,0,,,3,28,45,optimize stack<t>'s enumerator (issue_ref)there's a non-trivial amount of unnecessary overhead/complexity in 's enumerator. this streamlines it.(it does also change the undefined behavior of using current erroneously. we can put back most of its current semantics if we really care. this change puts it on a plan closer to .)
dotnet/runtime,7b3c9ab36f4ffd7353bae335c3b293b06fc2cf29,"Fix IP adjustment for interpreter EH (#117055)

* Fix IP adjustment for interpreter EH

The exception handling stack frame iterator adjusts IP it returns for
all cases when the IP represents a return address. This is to make sure
that if the last instruction in a try regios is a call, it is still covered
by the try region (the return address would be right after it).
For jit/aoted code, throwing a software exceptions results in a call.
Only hardware exceptions like division by zero etc report the address of
the failing instruction.
In the interpreter, when an exception is thrown, the IP address is
always the address of the instruction that has triggered the exception.
So we should not adjust the IP.
This change fixes that by marking exception throwing frame as
""faulting"", which ensures the adjustment doesn't occur.
That information is recorded in the InterpreterFrame when an
exception is thrown by the interpreter code and cleared when the
execution resumes after catch.

* Fix build break with interpreter disabled

* Fix the case when the pEntryFrame is NULL

* Actually, the check should be for FRAME_TOP, not NULL",2025-07-07 14:05:12+00:00,Jan Vorlicek,1,af872f01ee00528a0f8a5c02b05e6bef09f3111b,"Report unhandled async exceptions (#117799)

Async exceptions like the ThreadInterruptedException are explicitly
prevented from logging unhandled exception details to console.

This change removes this special handling and lets them be reported as
any other unhandled exception.

Close #107594",5,30,2,"fix ip adjustment for interpreter eh (issue_ref)* fix ip adjustment for interpreter ehthe exception handling stack frame iterator adjusts ip it returns forall cases when the ip represents a return address. this is to make surethat if the last instruction in a try regios is a call, it is still coveredby the try region (the return address would be right after it).for jit/aoted code, throwing a software exceptions results in a call.only hardware exceptions like division by zero etc report the address ofthe failing instruction.in the interpreter, when an exception is thrown, the ip address isalways the address of the instruction that has triggered the exception.so we should not adjust the ip.this change fixes that by marking exception throwing frame as""faulting"", which ensures the adjustment doesn't occur.that information is recorded in the interpreterframe when anexception is thrown by the interpreter code and cleared when theexecution resumes after catch.* fix build break with interpreter disabled* fix the case when the pentryframe is null* actually, the check should be for frame_top, not null"
dotnet/runtime,83e4e2895980705400e770c2df61b24ab57823da,Eliminate IEnumerable virtual access (#117345),2025-07-07 14:20:47+00:00,Huo Yaoyuan,0,,,1,4,2,eliminate ienumerable virtual access (issue_ref)
dotnet/runtime,0a727a50dd254f6807f90fe241299877b836161b,"Avoid wrapping in SortedDictionary enumeration as enumerable (#117357)

SortedDictionary's struct enumerator wraps an underlying TreeSet's enumerator. But when the SortedDictionary is enumerated via is `IEnumerable<T>` implementation, rather than boxing and returning the SortedDictionary's enumerator, we can skip that layer and instead directly use the TreeSet's.",2025-07-07 14:43:17+00:00,Stephen Toub,0,,,1,3,5,"avoid wrapping in sorteddictionary enumeration as enumerable (issue_ref)sorteddictionary's struct enumerator wraps an underlying treeset's enumerator. but when the sorteddictionary is enumerated via is implementation, rather than boxing and returning the sorteddictionary's enumerator, we can skip that layer and instead directly use the treeset's."
dotnet/runtime,739bbf733d8f276e06848c7acf841e5a7d264d26,"Update CoreCLR interpreter float->int saturation to match JIT (#116834)

* Update interp float->int saturation to match JIT

* Revert ""Exclude interpreterTester test on R2R CI legs (#116824)""

This reverts commit b3102fab10fe0382a30229444dbc302d91641d46.",2025-07-07 14:54:24+00:00,Katelyn Gadd,1,9f9f4a464b3d2c868a12b6c692dde0461c5ea78c,"Re-enable the issue #109309 tests (#117400)

Stack overflow in hugeexpr1 and hugeSimpleExpr1 no longer reproduces in crossgen outerloop tests or locally, so the tests can be re-enabled.",3,32,28,"update coreclr interpreter float->int saturation to match jit (issue_ref)* update interp float->int saturation to match jit* revert ""exclude interpretertester test on r2r ci legs (issue_ref)""this reverts commit b3102fab10fe0382a30229444dbc302d91641d46."
dotnet/runtime,9a98585dc834beff6887371ed2b8d69e2a95328c,Ensure hardware intrinsic tests are marked with [Fact] (#117347),2025-07-07 15:14:53+00:00,Tanner Gooding,0,,,4,12,4,ensure hardware intrinsic tests are marked with [fact] (issue_ref)
dotnet/runtime,8429820eceecf9b066a1c82cd146e1c14c384211,"Remove pinning from frozen objects (strings, arrays, ..) (#117340)",2025-07-07 17:06:58+00:00,Egor Bogatov,0,,,2,30,2,"remove pinning from frozen objects (strings, arrays, ..) (issue_ref)"
dotnet/runtime,9d6caae8f497009e0970a8863ca9c3b6ac5df168,"Show specific error message for `dotnet <app_path>` where app_path is a non-dll/exe file that exists (#116940)

Make running `dotnet <path>` where path exists but is not a dll/exe show ""The application '<path>' does not exist or is not a managed .dll"" and avoid invoking the SDK.",2025-07-07 18:33:15+00:00,Copilot,1,d751cbc4dccf671024760adf5b1c5400cd9eb045,"Fix FrameworkDependentAppLaunch.AppHost_GlobalLocation 'Failed to restore file' CI failure (#116831)

We're hitting an intermittent failure (particularly on Debug) trying to copy over files immediately after the process exits. Since this passes the majority of the time, it does not seem to indicate an actual issue where the files are left in use.
- Increase the existing retry we have for doing this restore
- Move tests to InstallLocation test class as it fits better there (testing registered and default install locations)
- Make InstallLocation test class create one app with test behaviour enabled instead of repeatedly doing it in half of its tests cases.

This also removes explicitly running the app with the app directory as the working directory, which doesn't seem interesting for us to keep testing.",3,47,1,"show specific error message for where app_path is a non-dll/exe file that exists (issue_ref)make running where path exists but is not a dll/exe show ""the application '<path>' does not exist or is not a managed .dll"" and avoid invoking the sdk."
dotnet/runtime,2583ec8b83e789760c549cd06dfbba1f6d5ceee9,"[cDAC] Change runtime-diagnostics pipeline trigger (#117018)

* narrow scope of included files to only cDAC related files",2025-07-07 18:51:40+00:00,Max Charlamb,0,,,1,3,3,[cdac] change runtime-diagnostics pipeline trigger (issue_ref)* narrow scope of included files to only cdac related files
dotnet/runtime,a110fed3d8023ff837cefec71434dd58998f98b1,"Remove custom enumerator from ConcurrentBag (#117353)

ConcurrentBag's snapshot enumeration semantics are obtained by creating an array of the contents and then enumerating that array. This was done with a custom enumerator out of an abundance of caution about maintaining semantics for operations with undefined behavior, e.g. using Current after MoveNext returns false. We've since stopped trying to maintain bug-for-bug compatibility in such undefined areas. As such, this just deletes the custom enumerator and uses Array's. This not only reduces code but has better performance characteristics (though the whole ToArray as part of enumeration already dominates the enumeration costs).",2025-07-07 19:33:37+00:00,Stephen Toub,1,2ed2e46a69d487c4b96bfc578b9ac28dc9cd3969,"Fix CS8762 suppression in ConcurrentBag (#121122)

Closes https://github.com/dotnet/runtime/issues/36132",2,3,57,"remove custom enumerator from concurrentbag (issue_ref)concurrentbag's snapshot enumeration semantics are obtained by creating an array of the contents and then enumerating that array. this was done with a custom enumerator out of an abundance of caution about maintaining semantics for operations with undefined behavior, e.g. using current after movenext returns false. we've since stopped trying to maintain bug-for-bug compatibility in such undefined areas. as such, this just deletes the custom enumerator and uses array's. this not only reduces code but has better performance characteristics (though the whole toarray as part of enumeration already dominates the enumeration costs)."
dotnet/runtime,2e13002a355ce9c98b1e18e408e5283b11b733e2,"Remove redundant cast (#117358)

* Remove redundant cast

* Update XxHashShared.cs",2025-07-07 19:33:54+00:00,Youssef Victor,0,,,1,2,2,remove redundant cast (issue_ref)* remove redundant cast* update xxhashshared.cs
dotnet/runtime,6d8cffd11680924c4ccb1e6be9ae3ad74cc76280,"Delete GetFirstNonVolatileRegisterAddress (#117272)

- Pass CONTEXT* to the CallEHFunclet instead
- Cleanup magic constants in asm code used to fetch CONTEXT fields relative to the first non-volatile register position

Co-authored-by: Jan Vorlicek <jan.vorlicek@volny.cz>",2025-07-07 19:37:17+00:00,Jan Kotas,1,52cecdc369040bedf14df8fc07e6a357e2fc8a10,"Ensure proper InterpThreadContext initialization (#117479)

* Ensure proper InterpThreadContext initialization

In case an interpreted method was compiled on one thread and then later
executed on another thread that never executed any interpreted code
before, the InterpThreadContext was not initialized.
This change fixes that by calling Thread::GetInterpThreadContext from
the InterpreterStub in case it was not initialized for the current
thread yet.

* Fix Unix Amd64",14,111,99,delete getfirstnonvolatileregisteraddress (issue_ref)- pass context* to the callehfunclet instead- cleanup magic constants in asm code used to fetch context fields relative to the first non-volatile register position
dotnet/runtime,19a01d03008939aa4dcbb248927643de720b9cfc,"Separate MultipleHives tests into regular FrameworkResolution and MultilevelLookup (Windows-only) test classes (#116993)

Split the MultipleHives tests into a regular FrameworkResolution and a Windows-only MultilevelLookup class.

This also reduces the amount of tests we run against multi-level lookup:
- Reduce number of tested TFMs < 7.0 to just netcoreapp3.1 and net6.0
- Remove test for --fx-version - we have the non-multi-level lookup coverage and multi-level lookup does add a particularly interesting dimension",2025-07-07 21:03:20+00:00,Elinor Fung,1,abc96528c1b8689bb3f0e303456362fafff0f640,"Run host tests on osx_arm64 (#117434)

- Replace AllSubsets_CoreCLR job for osx-arm64 with a CoreCLR_Libraries job that builds release clr+libs for running host tests
- Add osx-arm64 platform for host test runs (depends on CoreCLR_Libraries job).
- Fix issue in test around enabling test-only behaviour after the binary was already loaded",4,347,310,separate multiplehives tests into regular frameworkresolution and multilevellookup (windows-only) test classes (issue_ref)split the multiplehives tests into a regular frameworkresolution and a windows-only multilevellookup class.this also reduces the amount of tests we run against multi-level lookup:- reduce number of tested tfms < 7.0 to just netcoreapp3.1 and net6.0- remove test for --fx-version - we have the non-multi-level lookup coverage and multi-level lookup does add a particularly interesting dimension
dotnet/runtime,aa37dff42723ae9b37afaa74936dc38f43330937,"Enable linux-musl, x86, and arm cdac reader packages (#117321)",2025-07-07 22:56:34+00:00,Steve Pfister,0,,,1,1,2,"enable linux-musl, x86, and arm cdac reader packages (issue_ref)"
dotnet/runtime,c2dbdc9218bcc5050f00b2c9e7106c8fd8dbd6b3,"Allow compressed displacement to be used when profitable (#117288)

* Allow compressed displacement to be used when profitable

* Try to reduce the cost for compressed displacement support

* Ensure that we check for compressed displacement using the signed value

* Don't try and do compressed displacement under !FEATURE_FIXED_OUT_ARGS scenarios

* Don't assert compressed displacement was used when FEATURE_FIXED_OUT_ARGS isn't available

* Don't assert we're definitely using compressed displacement for emitOutputSV",2025-07-07 23:46:43+00:00,Tanner Gooding,0,,,8,510,389,allow compressed displacement to be used when profitable (issue_ref)* allow compressed displacement to be used when profitable* try to reduce the cost for compressed displacement support* ensure that we check for compressed displacement using the signed value* don't try and do compressed displacement under !feature_fixed_out_args scenarios* don't assert compressed displacement was used when feature_fixed_out_args isn't available* don't assert we're definitely using compressed displacement for emitoutputsv
dotnet/runtime,cbb1610c92bf83a1ddbf21760b5af97e0f3a4e88,Skip null loggers when creating loggers in Logger factory. (#117334),2025-07-08 01:08:39+00:00,Petr Houška,0,,,2,64,10,skip null loggers when creating loggers in logger factory. (issue_ref)
dotnet/runtime,b02b5a026ce4929f62d22a69980db18e8d19f388,"Ensure that folding of unary mask operations doesn't modify the tracked op2 (#117380)

* Ensure that folding of unary mask operations doesn't modify the tracked op2

* Add ISA check to the regression test

* Remove an assert that isn't valid with the fix",2025-07-08 02:41:13+00:00,Tanner Gooding,1,6d869a82ccbad6c279da52f9bd507057e6e30495,"Arm64 Sve: Add missing scatter methods (#117361)

Fixes #115242",3,61,13,ensure that folding of unary mask operations doesn't modify the tracked op2 (issue_ref)* ensure that folding of unary mask operations doesn't modify the tracked op2* add isa check to the regression test* remove an assert that isn't valid with the fix
dotnet/runtime,d751cbc4dccf671024760adf5b1c5400cd9eb045,"Fix FrameworkDependentAppLaunch.AppHost_GlobalLocation 'Failed to restore file' CI failure (#116831)

We're hitting an intermittent failure (particularly on Debug) trying to copy over files immediately after the process exits. Since this passes the majority of the time, it does not seem to indicate an actual issue where the files are left in use.
- Increase the existing retry we have for doing this restore
- Move tests to InstallLocation test class as it fits better there (testing registered and default install locations)
- Make InstallLocation test class create one app with test behaviour enabled instead of repeatedly doing it in half of its tests cases.

This also removes explicitly running the app with the app directory as the working directory, which doesn't seem interesting for us to keep testing.",2025-07-08 06:04:30+00:00,Elinor Fung,1,8fac1c50183af614a99cd9f0c09b18c0eaaaac86,"Revert ""Show specific error message for `dotnet <app_path>` where app_path is…"" (#117937)

This reverts commit 9d6caae8f497009e0970a8863ca9c3b6ac5df168.",3,82,107,"fix frameworkdependentapplaunch.apphost_globallocation 'failed to restore file' ci failure (issue_ref)we're hitting an intermittent failure (particularly on debug) trying to copy over files immediately after the process exits. since this passes the majority of the time, it does not seem to indicate an actual issue where the files are left in use.- increase the existing retry we have for doing this restore- move tests to installlocation test class as it fits better there (testing registered and default install locations)- make installlocation test class create one app with test behaviour enabled instead of repeatedly doing it in half of its tests cases.this also removes explicitly running the app with the app directory as the working directory, which doesn't seem interesting for us to keep testing."
dotnet/runtime,c1523bbb379371a75ff28a31748186700396ec1a,"[NET] IPNetwork clears the lower bits instead of throwing. (#117367)

* IPNetwork clears the lower bits instead of throwing.

* Update src/libraries/System.Net.Primitives/src/System/Net/IPNetwork.cs

Co-authored-by: Miha Zupan <mihazupan.zupan1@gmail.com>

* Update src/libraries/System.Net.Primitives/src/System/Net/IPNetwork.cs

Co-authored-by: Miha Zupan <mihazupan.zupan1@gmail.com>

---------

Co-authored-by: Miha Zupan <mihazupan.zupan1@gmail.com>",2025-07-08 07:59:47+00:00,Marie Píchová,1,baf534c8a3307ac0505ac67f37a6cc92fba16b70,"[NET] Fix calling non-validating ctor (#117415)

* Fix calling non-validating ctor

* Copilot suggestion",3,65,44,[net] ipnetwork clears the lower bits instead of throwing. (issue_ref)* ipnetwork clears the lower bits instead of throwing.* update src/libraries/system.net.primitives/src/system/net/ipnetwork.cs
dotnet/runtime,445eae4fa4c670db265c5d43a851478249903abb,"Handle async continuation in `TransitionFrame` and `ArgIterator` (#117104)

- Handle extra arg for async functions
- On x86 move the async continuation to be before the generic context arg (so
  that the generic context arg stays last, like `ArgIterator` expects)",2025-07-08 10:58:32+00:00,Jakob Botsch Nielsen,1,4c4f28247f63129842908d7bf70d1b189c540fc4,"Enable feature stubprecode dynamic helpers again and fix memory ordering logic around mapped stubs (#115746)

Use flush instruction cache to make this safe. Adding an address dependency got into lots of details around possibly needing an entire new stub type, and several paths through this code already depend on the concept of having a barrier here. To support modifying the stubs without inserting lots of magic number, rework how stubs are identified to just do a complete compare of the entire assembly stub in a way which will be easily to generalize to the cDAC.

In addition, make changes to make the FixupPrecode path safe from the same memory ordering concerns. Since the FixupPrecode always goes through a specified entrypoint, we can slide the barrier into only the slow path as long as we ensure that the Target field written with a VolatileStore after the MethodDesc and PrecodeFixupThunk fields are set. To ensure that the barrier on the writer side has happened before with hit the barrier on the reader, we ensure that the Target field is initialized into an infinite loop before the code associated with the FixupPrecode is mapped into the process.

Fixes #113810

Also, this is now only enabled for scenarios where it is required. (Mac Catalyst and iOS), as there was evidence of performance loss when examined with @EgorBot.",12,199,60,"handle async continuation in and (issue_ref)- handle extra arg for async functions- on x86 move the async continuation to be before the generic context arg (so that the generic context arg stays last, like expects)"
dotnet/runtime,34078bbe9b8405764272debeb1d62073e1ca7292,"Fix args passed by stack ref in the CallStubGenerator (#117399)

* Fix args passed by stack ref in the CallStubGenerator

The CallStubGenerator was missing support for arguments passed by
reference using stack slots. Only references in registers were
implemented. There was also a bug in passing return buffer argument when
there was ""this"" at the same time. Only the m_r1 was set to 1, but the
m_r2 was left unchanged, being 0. That resulted in the routine fetched
for that register range being NULL.

This change fixes both of these issues and adds a test.

* Fix arm64 linux asm break due to accidental semicolon",2025-07-08 12:21:14+00:00,Jan Vorlicek,1,b24079e677c97900f6e5abbf8e79ae4861da8067,"Fix interpreter passing managed ""this"" in presence of return buffer (#117661)

The CallStubGenerator is using the native x64 Windows calling
convention for the case when both ""this"" and ""return buffer"" arguments
are passed to native callees. However, the CLR ABI diverges from this
convention. While the native one passes the return buffer first and the
this pointer second, the CLR ABI always passes the ""this"" pointer first.

This fixes a number of failures on the runtime startup path when running
interpreted.",6,196,39,"fix args passed by stack ref in the callstubgenerator (issue_ref)* fix args passed by stack ref in the callstubgeneratorthe callstubgenerator was missing support for arguments passed byreference using stack slots. only references in registers wereimplemented. there was also a bug in passing return buffer argument whenthere was ""this"" at the same time. only the m_r1 was set to 1, but them_r2 was left unchanged, being 0. that resulted in the routine fetchedfor that register range being null.this change fixes both of these issues and adds a test.* fix arm64 linux asm break due to accidental semicolon"
dotnet/runtime,10a06198dced67f681c5929f68ea5dc0fb0ced4c,"Optimize Queue<T>.Enumerator (#117341)

* Optimize Queue<T>.Enumerator

* Address naming feedback",2025-07-08 13:47:48+00:00,Stephen Toub,0,,,3,44,58,optimize queue<t>.enumerator (issue_ref)* optimize queue<t>.enumerator* address naming feedback
dotnet/runtime,27f527e3df766fc6f30a831fe19559d039cf92ed,"Seal a few more extensions types with only a private ctor (#117368)

* Seal a few more extensions types with only a private ctor

* Apply suggestions from code review

Co-authored-by: Theodore Tsirpanis <teo@tsirpanis.gr>

---------

Co-authored-by: Tarek Mahmoud Sayed <10833894+tarekgh@users.noreply.github.com>
Co-authored-by: Theodore Tsirpanis <teo@tsirpanis.gr>",2025-07-08 13:48:40+00:00,Stephen Toub,0,,,4,4,4,seal a few more extensions types with only a private ctor (issue_ref)* seal a few more extensions types with only a private ctor* apply suggestions from code review
dotnet/runtime,6d869a82ccbad6c279da52f9bd507057e6e30495,"Arm64 Sve: Add missing scatter methods (#117361)

Fixes #115242",2025-07-08 14:25:15+00:00,Alan Hayward,1,09a713afbbbbe855976f761ccfb6f4ae51f7646b,fix isEmbeddedMaskingCompatible logic (#117485),7,373,23,arm64 sve: add missing scatter methods (issue_ref)fixes issue_ref
dotnet/runtime,96977c9353a6432cdd17c4c77ed95c3dafa4997e,"Updating xarch to utilize EVEX compares and blending where profitable (#116983)

* Extract the isEmbeddedMaskingCompatible check to its own method

* Allow rewriting of hwintrinsic mask ops to their non-mask forms

* Default to using mask ops for V128/V256 on supporting hardware

* Move the IsInvariantInRange impl from Lowering into SideEffectSet

* Ensure the right header is referenced

* Don't use TYP_MASK for scalar comparison nodes

* Ensure that evex blendvm usage preserves the original semantics",2025-07-08 16:51:07+00:00,Tanner Gooding,1,3659b37a050a0e999f5462286321194e99f23cf4,"JIT: Tolerate underflow when reducing flow into ex-successor of folded condition (#117481)

Fixes #117371. Also makes the profile inconsistency detection slightly smarter by recognizing that changes to flow into zero-successor blocks don't affect global consistency.",12,1390,492,updating xarch to utilize evex compares and blending where profitable (issue_ref)* extract the isembeddedmaskingcompatible check to its own method* allow rewriting of hwintrinsic mask ops to their non-mask forms* default to using mask ops for v128/v256 on supporting hardware* move the isinvariantinrange impl from lowering into sideeffectset* ensure the right header is referenced* don't use typ_mask for scalar comparison nodes* ensure that evex blendvm usage preserves the original semantics
dotnet/runtime,d4c1aa960faf004b0de3676f591ad3405b7d1db1,Replace SecTrustEvaluate with SecTrustEvaluateWithError,2025-07-08 17:02:18+00:00,Kevin Jones,0,,,1,12,7,replace sectrustevaluate with sectrustevaluatewitherror
dotnet/runtime,d221687c3724d26d653d022f4b254bc1d7eb1a6b,Remove impResolveToken from implILConsumesAddr (#117366),2025-07-08 18:38:45+00:00,Egor Bogatov,0,,,3,6,44,remove impresolvetoken from implilconsumesaddr (issue_ref)
dotnet/runtime,2c426a163ae13c741ebf48e9ba45895000da790c,"Make test projects that reference NativeExports platform-specific (#117383)

Set the RuntimeIdentifier in System.Runtime.InteropServices tests that reference the platform-specific NativeExports project to make the output path platform-specific and enable multiple rids to be built and not conflict with each other.",2025-07-08 22:25:16+00:00,Jackson Schuster,1,2d7c63b5fb412023b1851920be1a84f8d3db8f12,"Deduplicate base interfaces from another assembly in COM generator (#111931)

Fixes cross-assembly interface inheritance.

Deduplicate external ComInterfaceInfos in the pipeline.

Don't remove external interface methods in the generator pipeline - these are required to create the new VTable struct type introduced in #116289.

Creates a new SourceAvailableIncrementalMethodStubGenerationContext for methods with source available and use IncrementalMethodStubGenerationContext as a base for externally defined methods.

Moves the ComInterfaces from SharedTypes to the Common folder, and defines a limited set of base interfaces in SharedTypes for interfaces in ComInterfaceGenerator to derived from. Adds a number of tests for different levels of inheritance across assemblies.",2,4,0,make test projects that reference nativeexports platform-specific (issue_ref)set the runtimeidentifier in system.runtime.interopservices tests that reference the platform-specific nativeexports project to make the output path platform-specific and enable multiple rids to be built and not conflict with each other.
dotnet/runtime,0b28e59b172605cdef81c4ae71fb81ab9672e05e,Never set fgPgoSingleEdge for cctors or large single-edge blocks (#117420),2025-07-09 00:07:58+00:00,Egor Bogatov,1,adc97774337846c7fac2905ab38f7bd4c77f2a61,"JIT: Don't move EH entry block to enable branch reversal during flow opts (#117618)

Fixes #117581.",5,27,24,never set fgpgosingleedge for cctors or large single-edge blocks (issue_ref)
dotnet/runtime,21ae8333ac6a9402f5dad36ebcce0d9fc604cf8f,Add reference equality to unrolled string/span equality against constant strings (#117431),2025-07-09 00:43:45+00:00,Egor Bogatov,0,,,1,20,0,add reference equality to unrolled string/span equality against constant strings (issue_ref)
dotnet/runtime,4796e94ddd2680302cdee1dbaaa02dfe4f239204,"Make dn_simdhash OOM safe (#117059)

* Make simdhash add operations return a result enum instead of a 0/1 so they can signal OOM and whether an overwrite happened
* Make simdhash handle malloc failures during new and resize operations
* Explicitly NOMEM if the simdhash add fails due to an out of memory condition
* Add dn_simdhash_ght_try_insert
* Cleanup some erroneous uses of assert() instead of dn_simdhash_assert()
* Interpreter adjustments based on simdhash changes",2025-07-09 00:44:35+00:00,Katelyn Gadd,0,,,14,256,116,make dn_simdhash oom safe (issue_ref)* make simdhash add operations return a result enum instead of a 0/1 so they can signal oom and whether an overwrite happened* make simdhash handle malloc failures during new and resize operations* explicitly nomem if the simdhash add fails due to an out of memory condition* add dn_simdhash_ght_try_insert* cleanup some erroneous uses of assert() instead of dn_simdhash_assert()* interpreter adjustments based on simdhash changes
dotnet/runtime,f03c775440fc6ddddd8a58bc5c468e4d9ed23bb7,"Add InlinedCallFrame support for the interpreter take 2 (#117432)

* Add InlinedCallFrame support for the interpreter take 2

This change adds support for using InlinedCallFrame in the interpreter.
It adds a public constructor and also ensures that the stack walking
works correctly. The stack walking is tricky, because the the runtime
expects the InlinedCallFrame updates REGDISPLAY to point to managed
code. In the interpreter case, that means the interpreted frames. But
that changes how the stack walking enters the interpreted frames.
Without the InlinedCallFrame, the stack walking sees that it would move
to the InterpreterFrame and sets the REGDISPLAY to the interpreted
context and enumerates all the interpreted frames for the
InterpreterFrame. Once all the frames are enumerated, it moves to the
InterpretedFrame itself and let's it update the REGDISPLAY to the caller
of the interpreted code.
With the InlinedCallFrame, we move to the interpreted frames before we
see the InterpreterFrame. And we also need to ensure that the first
argument register of the interpreter context is set to point to the
InterpreterFrame for the stack unwinding to work correctly.

* PR feedback",2025-07-09 00:56:42+00:00,Jan Vorlicek,1,344af8cc1f0ea167b646cf62172409634bdade42,"Fix misaligned memory writes in i386 and amd64 dynamic helper code generation (#118680)

Fixes #118602

Co-authored-by: jkotas <6668460+jkotas@users.noreply.github.com>",5,48,13,"add inlinedcallframe support for the interpreter take 2 (issue_ref)* add inlinedcallframe support for the interpreter take 2this change adds support for using inlinedcallframe in the interpreter.it adds a public constructor and also ensures that the stack walkingworks correctly. the stack walking is tricky, because the the runtimeexpects the inlinedcallframe updates regdisplay to point to managedcode. in the interpreter case, that means the interpreted frames. butthat changes how the stack walking enters the interpreted frames.without the inlinedcallframe, the stack walking sees that it would moveto the interpreterframe and sets the regdisplay to the interpretedcontext and enumerates all the interpreted frames for theinterpreterframe. once all the frames are enumerated, it moves to theinterpretedframe itself and let's it update the regdisplay to the callerof the interpreted code.with the inlinedcallframe, we move to the interpreted frames before wesee the interpreterframe. and we also need to ensure that the firstargument register of the interpreter context is set to point to theinterpreterframe for the stack unwinding to work correctly.* pr feedback"
dotnet/runtime,f2236273f0c2eea41b7807894acd14133e9eda0c,Refactor emitInsSizeSVCalcDisp to more closely match the emitOutputSV checks (#117430),2025-07-09 01:10:47+00:00,Tanner Gooding,0,,,1,49,191,refactor emitinssizesvcalcdisp to more closely match the emitoutputsv checks (issue_ref)
dotnet/runtime,8483f0a4a7b41fa6ecf8d74a72dd5e124f9d1cf9,"Add tests for assigning dataflow values to generic parameters through MakeGenericType (#106832)

* Rename unused DiagnosticIds with _unused_ prefix

* Add test cases for assigning values to annotated generic arguments",2025-07-09 02:30:34+00:00,Jackson Schuster,0,,,1,190,0,add tests for assigning dataflow values to generic parameters through makegenerictype (issue_ref)* rename unused diagnosticids with _unused_ prefix* add test cases for assigning values to annotated generic arguments
dotnet/runtime,9f9f4a464b3d2c868a12b6c692dde0461c5ea78c,"Re-enable the issue #109309 tests (#117400)

Stack overflow in hugeexpr1 and hugeSimpleExpr1 no longer reproduces in crossgen outerloop tests or locally, so the tests can be re-enabled.",2025-07-09 03:09:24+00:00,Katelyn Gadd,1,b5d37d161f4fc9e10b66e849820bab7174d0684b,"Fix issues with rejit profiler test (#117826)

* When replacing strings during rejit in the profiler rejit test, include the method name in the replacement string so it is easier to tell what is going on
* Capture and validate actual output in the profiler rejit test
* Re-enable rejit test on crossgen
* Remove dead fIsRevert parameter in rejit C++ implementation
* Make rejit test handle crossgen composite behavior where no inlining happens",1,0,6,"re-enable the issue issue_ref tests (issue_ref)stack overflow in hugeexpr1 and hugesimpleexpr1 no longer reproduces in crossgen outerloop tests or locally, so the tests can be re-enabled."
dotnet/runtime,513ff1acc981118e4b981e965dce614c3b8770f5,"[H/3] Fix large header tests (#117412)

* Replace HandleRequestAsync with read request, send response to avoid GO_AWAY.

* Apply suggestion from @Copilot

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-07-09 07:18:01+00:00,Marie Píchová,1,718aecb0456252105aac2d1a4562e21e7391d572,"[H/3] Fix response header tests for H/3 (#117495)

* Wait with connection disposal on both sides.

* Feedback",1,13,3,"[h/3] fix large header tests (issue_ref)* replace handlerequestasync with read request, send response to avoid go_away.* apply suggestion from @copilot"
dotnet/runtime,fff6a50604d62ae04b6bb74f34840ee9b9084065,Mark GCBridge test as GC-stress incompatible (#117386),2025-07-09 12:33:18+00:00,Filip Navara,0,,,1,1,0,mark gcbridge test as gc-stress incompatible (issue_ref)
dotnet/runtime,6278b81081f1f66dea78686f5198922da9011645,"[main] Update dependencies from dnceng/internal/dotnet-optimization (#116426)

* Update dependencies from https://dev.azure.com/dnceng/internal/_git/dotnet-optimization build 20250604.1

optimization.linux-arm64.MIBC.Runtime , optimization.linux-x64.MIBC.Runtime , optimization.windows_nt-arm64.MIBC.Runtime , optimization.windows_nt-x64.MIBC.Runtime , optimization.windows_nt-x86.MIBC.Runtime , optimization.PGO.CoreCLR
 From Version 1.0.0-prerelease.25256.1 -> To Version 1.0.0-prerelease.25304.1

* Update dependencies from https://dev.azure.com/dnceng/internal/_git/dotnet-optimization build 20250611.1

optimization.linux-arm64.MIBC.Runtime , optimization.linux-x64.MIBC.Runtime , optimization.windows_nt-arm64.MIBC.Runtime , optimization.windows_nt-x64.MIBC.Runtime , optimization.windows_nt-x86.MIBC.Runtime , optimization.PGO.CoreCLR
 From Version 1.0.0-prerelease.25256.1 -> To Version 1.0.0-prerelease.25311.1

* Update dependencies from https://dev.azure.com/dnceng/internal/_git/dotnet-optimization build 20250617.1

optimization.linux-arm64.MIBC.Runtime , optimization.linux-x64.MIBC.Runtime , optimization.windows_nt-arm64.MIBC.Runtime , optimization.windows_nt-x64.MIBC.Runtime , optimization.windows_nt-x86.MIBC.Runtime , optimization.PGO.CoreCLR
 From Version 1.0.0-prerelease.25256.1 -> To Version 1.0.0-prerelease.25317.1

* Update dependencies from https://dev.azure.com/dnceng/internal/_git/dotnet-optimization build 20250624.1

optimization.linux-arm64.MIBC.Runtime , optimization.linux-x64.MIBC.Runtime , optimization.windows_nt-arm64.MIBC.Runtime , optimization.windows_nt-x64.MIBC.Runtime , optimization.windows_nt-x86.MIBC.Runtime , optimization.PGO.CoreCLR
 From Version 1.0.0-prerelease.25256.1 -> To Version 1.0.0-prerelease.25324.1

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-07-09 12:44:57+00:00,dotnet-maestro[bot],0,,,2,18,18,"[main] update dependencies from dnceng/internal/dotnet-optimization (issue_ref)* update dependencies from build 20250604.1optimization.linux-arm64.mibc.runtime , optimization.linux-x64.mibc.runtime , optimization.windows_nt-arm64.mibc.runtime , optimization.windows_nt-x64.mibc.runtime , optimization.windows_nt-x86.mibc.runtime , optimization.pgo.coreclr from version 1.0.0-prerelease.25256.1 -> to version 1.0.0-prerelease.25304.1* update dependencies from build 20250611.1optimization.linux-arm64.mibc.runtime , optimization.linux-x64.mibc.runtime , optimization.windows_nt-arm64.mibc.runtime , optimization.windows_nt-x64.mibc.runtime , optimization.windows_nt-x86.mibc.runtime , optimization.pgo.coreclr from version 1.0.0-prerelease.25256.1 -> to version 1.0.0-prerelease.25311.1* update dependencies from build 20250617.1optimization.linux-arm64.mibc.runtime , optimization.linux-x64.mibc.runtime , optimization.windows_nt-arm64.mibc.runtime , optimization.windows_nt-x64.mibc.runtime , optimization.windows_nt-x86.mibc.runtime , optimization.pgo.coreclr from version 1.0.0-prerelease.25256.1 -> to version 1.0.0-prerelease.25317.1* update dependencies from build 20250624.1optimization.linux-arm64.mibc.runtime , optimization.linux-x64.mibc.runtime , optimization.windows_nt-arm64.mibc.runtime , optimization.windows_nt-x64.mibc.runtime , optimization.windows_nt-x86.mibc.runtime , optimization.pgo.coreclr from version 1.0.0-prerelease.25256.1 -> to version 1.0.0-prerelease.25324.1---------"
dotnet/runtime,ceb987da45263b4f0554d5ce365c2d608e267349,"[cDAC] Remove native components (#117024)

* stop linking in native components
* revert changes to native components which allowed them to support cdac",2025-07-09 15:53:28+00:00,Max Charlamb,0,,,10,52,528,[cdac] remove native components (issue_ref)* stop linking in native components* revert changes to native components which allowed them to support cdac
dotnet/runtime,780d05ed9acc4f6c13a944bbdf90ee8a45c3a362,"[main] Update dependencies from dotnet/xharness (#116907)

* Update dependencies from https://github.com/dotnet/xharness build 20250618.1

Microsoft.DotNet.XHarness.CLI , Microsoft.DotNet.XHarness.TestRunners.Common , Microsoft.DotNet.XHarness.TestRunners.Xunit
 From Version 10.0.0-prerelease.25255.1 -> To Version 10.0.0-prerelease.25318.1

* Test scouting queues

* Test scouting queues

* Update dependencies from https://github.com/dotnet/xharness build 20250627.1

Microsoft.DotNet.XHarness.CLI , Microsoft.DotNet.XHarness.TestRunners.Common , Microsoft.DotNet.XHarness.TestRunners.Xunit
 From Version 10.0.0-prerelease.25255.1 -> To Version 10.0.0-prerelease.25327.1

* Revert changes

* Update dependencies from https://github.com/dotnet/xharness build 20250630.2

Microsoft.DotNet.XHarness.CLI , Microsoft.DotNet.XHarness.TestRunners.Common , Microsoft.DotNet.XHarness.TestRunners.Xunit
 From Version 10.0.0-prerelease.25255.1 -> To Version 10.0.0-prerelease.25330.2

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Milos Kotlar <kotlarmilos@gmail.com>",2025-07-09 16:18:51+00:00,dotnet-maestro[bot],0,,,3,10,10,"[main] update dependencies from dotnet/xharness (issue_ref)* update dependencies from build 20250618.1microsoft.dotnet.xharness.cli , microsoft.dotnet.xharness.testrunners.common , microsoft.dotnet.xharness.testrunners.xunit from version 10.0.0-prerelease.25255.1 -> to version 10.0.0-prerelease.25318.1* test scouting queues* test scouting queues* update dependencies from build 20250627.1microsoft.dotnet.xharness.cli , microsoft.dotnet.xharness.testrunners.common , microsoft.dotnet.xharness.testrunners.xunit from version 10.0.0-prerelease.25255.1 -> to version 10.0.0-prerelease.25327.1* revert changes* update dependencies from build 20250630.2microsoft.dotnet.xharness.cli , microsoft.dotnet.xharness.testrunners.common , microsoft.dotnet.xharness.testrunners.xunit from version 10.0.0-prerelease.25255.1 -> to version 10.0.0-prerelease.25330.2---------"
dotnet/runtime,f8b5e9cde2e1046a3cf7d1a32035ac1dee5ad4a2,"Add (commented) test case that crashes LibraryImportGenerator (#117447)

* Add test case that crashes LibraryImportGenerator

When a collection marshaller does not conform to the correct shape and an element marshaller is specified, we crash the generator with a NullRef.

Co-authored-by: Aaron Robinson <arobins@microsoft.com>",2025-07-09 17:18:37+00:00,Jackson Schuster,0,,,2,91,0,"add (commented) test case that crashes libraryimportgenerator (issue_ref)* add test case that crashes libraryimportgeneratorwhen a collection marshaller does not conform to the correct shape and an element marshaller is specified, we crash the generator with a nullref."
dotnet/runtime,3f184737d81c8404c0d16c59b8482a8c4336c416,"Clean up ILLink validation logic (#117449)

For compiler-generated code.
This makes the logic more uniform for types/fields/methods/properties/events.

Also makes the logic more consistent between ILLink and ILC.",2025-07-09 18:18:37+00:00,Sven Boemer,1,33f25330805a5a4b4f054c3acc841e25fcd982c0,"More ILLink formatting fixes (#117396)

- Format ILCompiler.TrimmingTests
- Fix ILLink.RoslynAnalyzer generated tests
- Fix whitespace in comments and #if'd out code
- Remove suppression for spacing around keywords
- Update analyzer test expected warning locations

---------

Co-authored-by: Jackson Schuster <36744439+jtschuster@users.noreply.github.com>",3,120,114,clean up illink validation logic (issue_ref)for compiler-generated code.this makes the logic more uniform for types/fields/methods/properties/events.also makes the logic more consistent between illink and ilc.
dotnet/runtime,bdf59c626d8f871478e8e3dcdb9801a02822cf8a,Run interpreter pipeline on a schedule (#117443),2025-07-09 19:30:47+00:00,Eduardo Velarde,0,,,1,8,0,run interpreter pipeline on a schedule (issue_ref)
dotnet/runtime,85203caf15f11f52ed768326973f868f3824e93d,arm64: Remove duplicate Sve2 xor tests (#117457),2025-07-09 19:54:39+00:00,Jonathan Davies,0,,,1,0,8,arm64: remove duplicate sve2 xor tests (issue_ref)
dotnet/runtime,4c4f28247f63129842908d7bf70d1b189c540fc4,"Enable feature stubprecode dynamic helpers again and fix memory ordering logic around mapped stubs (#115746)

Use flush instruction cache to make this safe. Adding an address dependency got into lots of details around possibly needing an entire new stub type, and several paths through this code already depend on the concept of having a barrier here. To support modifying the stubs without inserting lots of magic number, rework how stubs are identified to just do a complete compare of the entire assembly stub in a way which will be easily to generalize to the cDAC.

In addition, make changes to make the FixupPrecode path safe from the same memory ordering concerns. Since the FixupPrecode always goes through a specified entrypoint, we can slide the barrier into only the slow path as long as we ensure that the Target field written with a VolatileStore after the MethodDesc and PrecodeFixupThunk fields are set. To ensure that the barrier on the writer side has happened before with hit the barrier on the reader, we ensure that the Target field is initialized into an infinite loop before the code associated with the FixupPrecode is mapped into the process.

Fixes #113810

Also, this is now only enabled for scenarios where it is required. (Mac Catalyst and iOS), as there was evidence of performance loss when examined with @EgorBot.",2025-07-09 20:49:20+00:00,David Wrighton,1,f4a4d5c3d2f86cf7be266377989355dea74a632b,"Limit doublemapper maximum size (#119316)

* Limit doublemapper maximum size

The double mapping currently sets the maximum size of the double mapped memory to 2TB.
However, that causes the runtime to fail to start if there is a rlimit for max file
size set to a smaller value.

This change fixed the problem by clipping the max double mapped memory size by that
rlimit and also uses much more conservative size even without the file size limit set.
It is now set to the total amount of physical memory by default and also clipped by
the virtual memory rlimit.

Close #117819

* In case of VM limit, use just 1/4 of the space

* Change physicalMemorySize to 64 bits

Even on 32 bit targets, more than 4GB memory may be available.",38,767,292,"enable feature stubprecode dynamic helpers again and fix memory ordering logic around mapped stubs (issue_ref)use flush instruction cache to make this safe. adding an address dependency got into lots of details around possibly needing an entire new stub type, and several paths through this code already depend on the concept of having a barrier here. to support modifying the stubs without inserting lots of magic number, rework how stubs are identified to just do a complete compare of the entire assembly stub in a way which will be easily to generalize to the cdac.in addition, make changes to make the fixupprecode path safe from the same memory ordering concerns. since the fixupprecode always goes through a specified entrypoint, we can slide the barrier into only the slow path as long as we ensure that the target field written with a volatilestore after the methoddesc and precodefixupthunk fields are set. to ensure that the barrier on the writer side has happened before with hit the barrier on the reader, we ensure that the target field is initialized into an infinite loop before the code associated with the fixupprecode is mapped into the process.fixes issue_refalso, this is now only enabled for scenarios where it is required. (mac catalyst and ios), as there was evidence of performance loss when examined with @egorbot."
dotnet/runtime,b1a2e43095a3ba24d20462362968ae56c98f2946,"Add ""AllSubsets"" option for runtime so that all projects can be restored (#117374)

Adds an ""AllSubsets"" option to the runtime build system that enables restoring all projects in the repository with a single subset name, addressing the need for a comprehensive restore/build option without hacking solutions together in pipelines.

Usage:
# Restore all projects in the repository
./build.sh AllSubsets --restore

# Or using the explicit subset parameter
./build.sh --subset AllSubsets --restore",2025-07-09 21:00:41+00:00,Copilot,0,,,1,15,0,"add ""allsubsets"" option for runtime so that all projects can be restored (issue_ref)adds an ""allsubsets"" option to the runtime build system that enables restoring all projects in the repository with a single subset name, addressing the need for a comprehensive restore/build option without hacking solutions together in pipelines.usage:# restore all projects in the repository./build.sh allsubsets --restore# or using the explicit subset parameter./build.sh --subset allsubsets --restore"
dotnet/runtime,ceede7f76f49c84c20d3955a2db05065fa8e778d,"Use the NativeBinary property instead of reconstructing the path in NativeAOT target (#117294)

Use the NativeBinary property instead of reconstructing the path.",2025-07-09 21:18:33+00:00,Jackson Schuster,0,,,1,1,1,use the nativebinary property instead of reconstructing the path in nativeaot target (issue_ref)use the nativebinary property instead of reconstructing the path.
dotnet/runtime,910f619a81fcf8bb7f45a19147d9ed4649bbe07d,"Use ProjectReferences in libs shared framework source projects (#116772)

* Use P2Ps in inbox src libs

* Additional changes needed to have all references available

* Set PackageId for non-packable projects to differentiate identity

* React to S.Threading.AccessControl moving inbox

* PR feedback",2025-07-09 21:46:23+00:00,Viktor Hofer,1,5d86589c9e4a686c474668ffe37cdfabc102c1b3,"Unify certificate validation code on OSX between SslStream and QuicConnection (#117611)

* Unify certificate validation code on OSX between SslStream and QuicConnection

* Fix build

* Remove spaces in test case",105,888,903,use projectreferences in libs shared framework source projects (issue_ref)* use p2ps in inbox src libs* additional changes needed to have all references available* set packageid for non-packable projects to differentiate identity* react to s.threading.accesscontrol moving inbox* pr feedback
dotnet/runtime,4031c973e685d4ab281a52935e4dcfaa120689f8,"Implement trimming support for the Interop Type Map (#116555)

Co-authored-by: Jackson Schuster <36744439+jtschuster@users.noreply.github.com>",2025-07-09 23:45:06+00:00,Jeremy Koritzinsky,1,69eea4da555abc7ba68cb1f6ae86bfdf888dcc6e,"Fix ILLink ref assembly build breaks (#117875)

This is blocking https://github.com/dotnet/dotnet/pull/1546. Looks like this got lost in all the WASM timeout noise in #117624.

We can either suppress or add to ref assembly, but ref assembly only has things ILLink custom steps depend on. So suppression it is.

I just regenerated it with `/p:ApiCompatGenerateSuppressionFile=true` so it shuffled two unrelated lines.",19,673,58,implement trimming support for the interop type map (issue_ref)
dotnet/runtime,56ae94caec4b3800662681a3ffe999321a6154ef,"ILCompiler.Reflection.ReadyToRun encapsulate image state (#117446)

* Wrap byte[] using NativeReader
* update R2RDump to use new primitives",2025-07-10 00:02:26+00:00,Max Charlamb,0,,,25,558,539,ilcompiler.reflection.readytorun encapsulate image state (issue_ref)* wrap byte[] using nativereader* update r2rdump to use new primitives
dotnet/runtime,07cf21a98d613ac0a1735a0ef2d56076bdf61a0b,"Add CreateNewProcessGroup to ProcessStartInfo (#117105)

* Add CreateNewProcessGroup

* Add RemoteExecutor.IsSupported condition

* Use ManualResetEvent instead of local bool

* Throw instead of asserting on Win pinvoke to get more info about the underlying error

* MRE.WaitOne call should be asserted

* Switch to memberdata to avoid pulluting the console log with skips

* wrap SendSignal in try-finally and kill remote process to avoid hiding SendSignal exception.

* Skip test on Docker

* Guard SkipTestException with  PlatformDetection.IsInContainer

* Add documentation",2025-07-10 00:29:12+00:00,David Cantú,1,9bb1d21850e6a89ab950e30c2d51d9a835d83ad8,"Remove dead code PathFeatures.cs and assume all path features are available (#120929)

- [x] Delete PathFeatures.cs file
- [x] Remove PathFeatures.cs references from .csproj files (5 files)
- [x] Update FileSystemTest.cs to remove PathFeatures usage (3
properties)
- [x] Update PathTestsBase.cs to use non-legacy values in
TestData_GetPathRoot_DevicePaths (5 lines)
- [x] Update PathTests_Windows.cs to remove conditional logic based on
PathFeatures (9 usages)
- [x] Update zip_ManualAndCompatibilityTests.cs to remove PathFeatures
usage (1 property + 1 conditional)
- [x] Update ProcessModuleTests.Windows.cs to remove ConditionalFact
attribute (1 line)
- [x] Build and test affected libraries to ensure all tests pass
  - System.Runtime.Extensions.Tests: 8280 tests passed
  - System.IO.FileSystem.Tests: 8716 tests passed
  - System.IO.Compression.Tests: 1335 tests passed
  - System.Diagnostics.Process.Tests: 339 tests passed
- [x] Run final verification of all changes
- [x] Address feedback: Remove AreAllLongPathsAvailable,
LongPathsAreNotBlocked, and UsingNewNormalization properties
- [x] Address feedback: Update outdated comment about ConditionalFact in
ProcessModuleTests.Windows.cs
- [x] Address feedback: Remove IsUsingNewPathNormalization property from
zip_ManualAndCompatibilityTests.cs
- [x] Address feedback: Remove redundant property wrappers in Delete.cs
and replace with RemoteExecutor.IsSupported
- [x] Address feedback: Merge
GetFullPath_Windows_UNC_Valid_LegacyPathSupport test cases into
GetFullPath_UNC_Valid
- [x] Fix CI failure: Add typeof(RemoteExecutor) parameter to
ConditionalFact attributes

## Summary
Successfully removed PathFeatures.cs dead code and all its references.
Replaced all conditional test attributes that depended on always-true
properties with unconditional Fact/Theory attributes. Removed redundant
property wrappers and merged duplicate test methods. Fixed
ConditionalFact attributes to properly reference
RemoteExecutor.IsSupported. All tests now assume:
- All long paths are available (no legacy MAX_PATH limitations)
- New path normalization is always used (no legacy path handling)
- No conditional behavior based on runtime capabilities

<!-- START COPILOT CODING AGENT SUFFIX -->



<details>

<summary>Original prompt</summary>

> 
> ----
> 
> *This section details on the original issue you should resolve*
> 
> <issue_title>PathFeatures.cs is dead code</issue_title>
> <issue_description>PathFeatures.cs is only used in tests in target
current netcoreapp app. All path features are available in current
netcoreapp.</issue_description>
> 
> <agent_instructions>Please delete PathFeatures.cs and all references
to it. Assume that all Path features are available and no legacy
behaviors are present.</agent_instructions>
> 
> ## Comments on the Issue (you are @copilot in this section)
> 
> <comments>
> </comments>
> 


</details>

Fixes dotnet/runtime#120928

<!-- START COPILOT CODING AGENT TIPS -->
---

💬 Share your feedback on Copilot coding agent for the chance to win a
$200 gift card! Click
[here](https://survey3.medallia.com/?EAHeSx-AP01bZqG0Ld9QLQ) to start
the survey.

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: jkotas <6668460+jkotas@users.noreply.github.com>
Co-authored-by: adamsitnik <6011991+adamsitnik@users.noreply.github.com>",11,191,2,add createnewprocessgroup to processstartinfo (issue_ref)* add createnewprocessgroup* add remoteexecutor.issupported condition* use manualresetevent instead of local bool* throw instead of asserting on win pinvoke to get more info about the underlying error* mre.waitone call should be asserted* switch to memberdata to avoid pulluting the console log with skips* wrap sendsignal in try-finally and kill remote process to avoid hiding sendsignal exception.* skip test on docker* guard skiptestexception with platformdetection.isincontainer* add documentation
dotnet/runtime,5be07dc1af415509776129fd9de42086694641b0,try enabling ALCTest in GCStress again. (#117388),2025-07-10 02:37:30+00:00,Manish Godse,0,,,1,0,2,try enabling alctest in gcstress again. (issue_ref)
dotnet/runtime,96500844e7a54d94e3a00553dbe44c313d7eb21e,"Scaffolding for CoreCLR interpreter intrinsics (#116769)

Wire up basic support for intrinsics in the CoreCLR interpreter
Add new DOTNET_InterpMode environment variable with 4 possible values (documented in the comments), where each higher value increases the amount of code we try to run in the interpreter, up to 'everything'
Add INTOP_THROW_PNSE convenience opcode",2025-07-10 05:21:41+00:00,Katelyn Gadd,1,f3548eff5bbba25f84653d4359400a26ec2b6b4f,"Walk compressed IL -> Native map for EventTrace and stacktrace symbolication scenarios (#116031)

Add paths for reading the IL-Native map which doesn't create a `DebuggerMethodInfo` or `DebuggerJitInfo`
Use it in the stackwalker code for EH, and for the event tracing `MethodToILMap`

This process is somewhat slower than the path through the diagnostic infrastructure, but it has no expensive locks required. To mitigate the performance loss, the format of the compressed bounds information was changed to an encoding where all entries in the table are fixed size, but the actual bit widths of the various fields are optimally small. Overall this results in a size savings of about 50KB on System.Private.CoreLib.dll, as well as capturing back all of the performance costs of this change for relatively small functions.

In combination with the NativeToIL map cache added a few days ago, this allows us to eliminate locks from the native offset to il offset path, which should substantially reduce the cost when heavily multithreaded applications are experiencing significant error rates. (And the cache added mitigates the remaining performance loss from using the compressed data instead of the uncompressed form.)

In addition, by changing the event trace path to use the same approach, we will remove the `DebuggerJitInfo` generation path from most customers non-debugging scenarios. (It still remains in the `ICorProfiler::GetILToNativeMapping` apis, but usage of that api is relatively rare).

There is validation which utilizes the debugger apis to validate that the behavior hasn't changed at all.",10,256,24,"scaffolding for coreclr interpreter intrinsics (issue_ref)wire up basic support for intrinsics in the coreclr interpreteradd new dotnet_interpmode environment variable with 4 possible values (documented in the comments), where each higher value increases the amount of code we try to run in the interpreter, up to 'everything'add intop_throw_pnse convenience opcode"
dotnet/runtime,e873943a03aaf3adb71e8a6165ccd4e6bb4859b8,"[NativeAOT] Split `ExternSymbolNode` into two types for data and functions (#117346)

This allows to distinguish the symbol type for a node with a simple type check.",2025-07-10 05:53:29+00:00,SingleAccretion,0,,,17,81,54,[nativeaot] split into two types for data and functions (issue_ref)this allows to distinguish the symbol type for a node with a simple type check.
dotnet/runtime,f3548eff5bbba25f84653d4359400a26ec2b6b4f,"Walk compressed IL -> Native map for EventTrace and stacktrace symbolication scenarios (#116031)

Add paths for reading the IL-Native map which doesn't create a `DebuggerMethodInfo` or `DebuggerJitInfo`
Use it in the stackwalker code for EH, and for the event tracing `MethodToILMap`

This process is somewhat slower than the path through the diagnostic infrastructure, but it has no expensive locks required. To mitigate the performance loss, the format of the compressed bounds information was changed to an encoding where all entries in the table are fixed size, but the actual bit widths of the various fields are optimally small. Overall this results in a size savings of about 50KB on System.Private.CoreLib.dll, as well as capturing back all of the performance costs of this change for relatively small functions.

In combination with the NativeToIL map cache added a few days ago, this allows us to eliminate locks from the native offset to il offset path, which should substantially reduce the cost when heavily multithreaded applications are experiencing significant error rates. (And the cache added mitigates the remaining performance loss from using the compressed data instead of the uncompressed form.)

In addition, by changing the event trace path to use the same approach, we will remove the `DebuggerJitInfo` generation path from most customers non-debugging scenarios. (It still remains in the `ICorProfiler::GetILToNativeMapping` apis, but usage of that api is relatively rare).

There is validation which utilizes the debugger apis to validate that the behavior hasn't changed at all.",2025-07-10 06:31:57+00:00,David Wrighton,1,6ac6c21d0e2394031be259054607ac45ad21b962,"[clr-interp] Implement intrinsics for startup path (#117263)

* Test startup path

* Avoid memset in newobj.vt

* Add support for FastPollGC intrinsic

* Resolve merge conflicts

* Implement COMPARE_EXCHANGE macro

* Remove comment

* Resolve merge conflicts

* Enhance intrinsic call handling and add null check operation

- Updated EmitNamedIntrinsicCall to include emitMemBarrier parameter.
- Replaced INTOP_METHODTABLE with INTOP_GETMETHODTABLE in EmitNamedIntrinsicCall
- Introduced INTOP_NULLCHECK operation in intops.def and implemented its handling in the interpreter
- Removed debug print statements from compileMethod
- Added tests

* Replace INTOP_GETMETHODTABLE opcode with INTOP_LDIND_I

* Remove emitMemBarrier parameter and related logic

* Use enclosingClassNames to retrieve the top level namespace",26,1919,427,"walk compressed il -> native map for eventtrace and stacktrace symbolication scenarios (issue_ref)add paths for reading the il-native map which doesn't create a or use it in the stackwalker code for eh, and for the event tracing this process is somewhat slower than the path through the diagnostic infrastructure, but it has no expensive locks required. to mitigate the performance loss, the format of the compressed bounds information was changed to an encoding where all entries in the table are fixed size, but the actual bit widths of the various fields are optimally small. overall this results in a size savings of about 50kb on system.private.corelib.dll, as well as capturing back all of the performance costs of this change for relatively small functions.in combination with the nativetoil map cache added a few days ago, this allows us to eliminate locks from the native offset to il offset path, which should substantially reduce the cost when heavily multithreaded applications are experiencing significant error rates. (and the cache added mitigates the remaining performance loss from using the compressed data instead of the uncompressed form.)in addition, by changing the event trace path to use the same approach, we will remove the generation path from most customers non-debugging scenarios. (it still remains in the apis, but usage of that api is relatively rare).there is validation which utilizes the debugger apis to validate that the behavior hasn't changed at all."
dotnet/runtime,52d934e60227c12e7d58b5824bde9a480141c915,"[main] Source code updates from dotnet/dotnet (#117450)

* [VMR] Codeflow eaa19c2-919597a

[[ commit created by automation ]]

* Update dependencies from https://github.com/dotnet/dotnet build 274386
Updated Dependencies:
System.CommandLine (Version 2.0.0-beta6.25351.106 -> 2.0.0-beta6.25358.102)
Microsoft.DotNet.Cecil (Version 0.11.5-alpha.25351.106 -> 0.11.5-alpha.25358.102)
Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport, Microsoft.DotNet.ApiCompat.Task (Version 10.0.100-preview.7.25351.106 -> 10.0.100-preview.7.25358.102)
Microsoft.DotNet.Arcade.Sdk, Microsoft.DotNet.XliffTasks, Microsoft.DotNet.Helix.Sdk, Microsoft.DotNet.GenAPI, Microsoft.DotNet.GenFacades, Microsoft.DotNet.XUnitExtensions, Microsoft.DotNet.Build.Tasks.Archives, Microsoft.DotNet.Build.Tasks.Packaging, Microsoft.DotNet.Build.Tasks.Installers, Microsoft.DotNet.Build.Tasks.Templating, Microsoft.DotNet.Build.Tasks.Workloads, Microsoft.DotNet.CodeAnalysis, Microsoft.DotNet.Build.Tasks.TargetFramework, Microsoft.DotNet.RemoteExecutor, Microsoft.DotNet.Build.Tasks.Feed, Microsoft.DotNet.SharedFramework.Sdk, Microsoft.DotNet.PackageTesting (Version 10.0.0-beta.25351.106 -> 10.0.0-beta.25358.102)
Microsoft.DotNet.XUnitAssert, Microsoft.DotNet.XUnitConsoleRunner (Version 2.9.2-beta.25351.106 -> 2.9.2-beta.25358.102)
Microsoft.NETCore.App.Ref, runtime.native.System.IO.Ports, Microsoft.NETCore.ILAsm, Microsoft.NET.Sdk.IL, System.Text.Json, System.Reflection.Metadata, System.Reflection.MetadataLoadContext (Version 10.0.0-preview.7.25351.106 -> 10.0.0-preview.7.25358.102)
Microsoft.Net.Compilers.Toolset, Microsoft.CodeAnalysis, Microsoft.CodeAnalysis.CSharp, Microsoft.CodeAnalysis.Analyzers (Version 5.0.0-1.25351.106 -> 5.0.0-1.25358.102)
Microsoft.CodeAnalysis.NetAnalyzers (Version 10.0.0-preview.25351.106 -> 10.0.0-preview.25358.102)

* Update dependencies from https://github.com/dotnet/dotnet build 274568
Updated Dependencies:
System.CommandLine (Version 2.0.0-beta6.25358.102 -> 2.0.0-beta6.25359.101)
Microsoft.DotNet.Cecil (Version 0.11.5-alpha.25358.102 -> 0.11.5-alpha.25359.101)
Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport, Microsoft.DotNet.ApiCompat.Task (Version 10.0.100-preview.7.25358.102 -> 10.0.100-preview.7.25359.101)
Microsoft.DotNet.Arcade.Sdk, Microsoft.DotNet.XliffTasks, Microsoft.DotNet.Helix.Sdk, Microsoft.DotNet.GenAPI, Microsoft.DotNet.GenFacades, Microsoft.DotNet.XUnitExtensions, Microsoft.DotNet.Build.Tasks.Archives, Microsoft.DotNet.Build.Tasks.Packaging, Microsoft.DotNet.Build.Tasks.Installers, Microsoft.DotNet.Build.Tasks.Templating, Microsoft.DotNet.Build.Tasks.Workloads, Microsoft.DotNet.CodeAnalysis, Microsoft.DotNet.Build.Tasks.TargetFramework, Microsoft.DotNet.RemoteExecutor, Microsoft.DotNet.Build.Tasks.Feed, Microsoft.DotNet.SharedFramework.Sdk, Microsoft.DotNet.PackageTesting (Version 10.0.0-beta.25358.102 -> 10.0.0-beta.25359.101)
Microsoft.DotNet.XUnitAssert, Microsoft.DotNet.XUnitConsoleRunner (Version 2.9.2-beta.25358.102 -> 2.9.2-beta.25359.101)
Microsoft.NETCore.App.Ref, runtime.native.System.IO.Ports, Microsoft.NETCore.ILAsm, Microsoft.NET.Sdk.IL, System.Text.Json, System.Reflection.Metadata, System.Reflection.MetadataLoadContext (Version 10.0.0-preview.7.25358.102 -> 10.0.0-preview.7.25359.101)
Microsoft.Net.Compilers.Toolset, Microsoft.CodeAnalysis, Microsoft.CodeAnalysis.CSharp, Microsoft.CodeAnalysis.Analyzers (Version 5.0.0-1.25358.102 -> 5.0.0-1.25359.101)
Microsoft.CodeAnalysis.NetAnalyzers (Version 10.0.0-preview.25358.102 -> 10.0.0-preview.25359.101)

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-07-10 09:51:08+00:00,dotnet-maestro[bot],0,,,4,110,111,"[main] source code updates from dotnet/dotnet (issue_ref)* [vmr] codeflow eaa19c2-919597a[[ commit created by automation ]]* update dependencies from build 274386updated dependencies:system.commandline (version 2.0.0-beta6.25351.106 -> 2.0.0-beta6.25358.102)microsoft.dotnet.cecil (version 0.11.5-alpha.25351.106 -> 0.11.5-alpha.25358.102)microsoft.net.workload.emscripten.current.manifest-10.0.100.transport, microsoft.dotnet.apicompat.task (version 10.0.100-preview.7.25351.106 -> 10.0.100-preview.7.25358.102)microsoft.dotnet.arcade.sdk, microsoft.dotnet.xlifftasks, microsoft.dotnet.helix.sdk, microsoft.dotnet.genapi, microsoft.dotnet.genfacades, microsoft.dotnet.xunitextensions, microsoft.dotnet.build.tasks.archives, microsoft.dotnet.build.tasks.packaging, microsoft.dotnet.build.tasks.installers, microsoft.dotnet.build.tasks.templating, microsoft.dotnet.build.tasks.workloads, microsoft.dotnet.codeanalysis, microsoft.dotnet.build.tasks.targetframework, microsoft.dotnet.remoteexecutor, microsoft.dotnet.build.tasks.feed, microsoft.dotnet.sharedframework.sdk, microsoft.dotnet.packagetesting (version 10.0.0-beta.25351.106 -> 10.0.0-beta.25358.102)microsoft.dotnet.xunitassert, microsoft.dotnet.xunitconsolerunner (version 2.9.2-beta.25351.106 -> 2.9.2-beta.25358.102)microsoft.netcore.app.ref, runtime.native.system.io.ports, microsoft.netcore.ilasm, microsoft.net.sdk.il, system.text.json, system.reflection.metadata, system.reflection.metadataloadcontext (version 10.0.0-preview.7.25351.106 -> 10.0.0-preview.7.25358.102)microsoft.net.compilers.toolset, microsoft.codeanalysis, microsoft.codeanalysis.csharp, microsoft.codeanalysis.analyzers (version 5.0.0-1.25351.106 -> 5.0.0-1.25358.102)microsoft.codeanalysis.netanalyzers (version 10.0.0-preview.25351.106 -> 10.0.0-preview.25358.102)* update dependencies from build 274568updated dependencies:system.commandline (version 2.0.0-beta6.25358.102 -> 2.0.0-beta6.25359.101)microsoft.dotnet.cecil (version 0.11.5-alpha.25358.102 -> 0.11.5-alpha.25359.101)microsoft.net.workload.emscripten.current.manifest-10.0.100.transport, microsoft.dotnet.apicompat.task (version 10.0.100-preview.7.25358.102 -> 10.0.100-preview.7.25359.101)microsoft.dotnet.arcade.sdk, microsoft.dotnet.xlifftasks, microsoft.dotnet.helix.sdk, microsoft.dotnet.genapi, microsoft.dotnet.genfacades, microsoft.dotnet.xunitextensions, microsoft.dotnet.build.tasks.archives, microsoft.dotnet.build.tasks.packaging, microsoft.dotnet.build.tasks.installers, microsoft.dotnet.build.tasks.templating, microsoft.dotnet.build.tasks.workloads, microsoft.dotnet.codeanalysis, microsoft.dotnet.build.tasks.targetframework, microsoft.dotnet.remoteexecutor, microsoft.dotnet.build.tasks.feed, microsoft.dotnet.sharedframework.sdk, microsoft.dotnet.packagetesting (version 10.0.0-beta.25358.102 -> 10.0.0-beta.25359.101)microsoft.dotnet.xunitassert, microsoft.dotnet.xunitconsolerunner (version 2.9.2-beta.25358.102 -> 2.9.2-beta.25359.101)microsoft.netcore.app.ref, runtime.native.system.io.ports, microsoft.netcore.ilasm, microsoft.net.sdk.il, system.text.json, system.reflection.metadata, system.reflection.metadataloadcontext (version 10.0.0-preview.7.25358.102 -> 10.0.0-preview.7.25359.101)microsoft.net.compilers.toolset, microsoft.codeanalysis, microsoft.codeanalysis.csharp, microsoft.codeanalysis.analyzers (version 5.0.0-1.25358.102 -> 5.0.0-1.25359.101)microsoft.codeanalysis.netanalyzers (version 10.0.0-preview.25358.102 -> 10.0.0-preview.25359.101)---------"
dotnet/runtime,45e14ea5e8d2646693299e68310cad7603bbe4c8,"[RISC-V] Use auipc for code addresses in INS_OPTS_{RL,RC,JALR} (#116780)

* Emit auipc+addi for non-reloc label addresses

* Emit auipc+jalr for INS_OPT_JALR

* Fix jal target register

* Fold branches for forward and backward jumps

* Emit auipc+load/addi for cold sections INS_OPTS_RC

* cleanup

* overflow check",2025-07-10 12:08:01+00:00,Tomasz Sowiński,1,3add8d2085a23d3f79801502ac34483b84f90028,Fix RISC-V JIT build (#117553),4,85,288,"[risc-v] use auipc for code addresses in ins_opts_{rl,rc,jalr} (issue_ref)* emit auipc+addi for non-reloc label addresses* emit auipc+jalr for ins_opt_jalr* fix jal target register* fold branches for forward and backward jumps* emit auipc+load/addi for cold sections ins_opts_rc* cleanup* overflow check"
dotnet/runtime,3659b37a050a0e999f5462286321194e99f23cf4,"JIT: Tolerate underflow when reducing flow into ex-successor of folded condition (#117481)

Fixes #117371. Also makes the profile inconsistency detection slightly smarter by recognizing that changes to flow into zero-successor blocks don't affect global consistency.",2025-07-10 13:46:28+00:00,Aman Khalid,1,757dcc2305abd7907236ab487ad8cf9c50f6b2df,fix removal of intermediate double cast in long->double->float chains (#117554),2,17,24,jit: tolerate underflow when reducing flow into ex-successor of folded condition (issue_ref)fixes issue_ref. also makes the profile inconsistency detection slightly smarter by recognizing that changes to flow into zero-successor blocks don't affect global consistency.
dotnet/runtime,413d5b8446198557771e1548e72c6af505786115,"[mono][interp] Always sign extend small integers to native integer when returning to compiled code (#117336)

* [mono][interp] Always sign extend small integers to native integer when returning to compiled code

On amd64 it seems our jit expects i4 to be sign extended to the full 64bit register. On arm64 apple, unlike arm64 linux, callers of methods returning i1,u1,i2 or u2 are expecting a value sign extended to i4. In order to prevent any potential issues around this area, this commit takes on a conservative approach and sign extends every time, since there is no real cost to it.

stackval_to_data_sign_ext is called either with a data pointer from a CallContext register or the address of a native int local variable in the `mini_get_interp_in_wrapper`. This means that it should always be safe to write the full value.

* [mono][interp] Don't do sign extension when called from gsharedvt_in_sig

Those wrappers use the real type as the return, so sign extension shouldn't be needed and it wouldn't be safe, because the wrapper passes the address of the return var of the actual type. Attemptying to sign extend could overflow the storage of this var.",2025-07-10 13:51:49+00:00,Vlad Brezae,0,,,1,54,3,"[mono][interp] always sign extend small integers to native integer when returning to compiled code (issue_ref)* [mono][interp] always sign extend small integers to native integer when returning to compiled codeon amd64 it seems our jit expects i4 to be sign extended to the full 64bit register. on arm64 apple, unlike arm64 linux, callers of methods returning i1,u1,i2 or u2 are expecting a value sign extended to i4. in order to prevent any potential issues around this area, this commit takes on a conservative approach and sign extends every time, since there is no real cost to it.stackval_to_data_sign_ext is called either with a data pointer from a callcontext register or the address of a native int local variable in the . this means that it should always be safe to write the full value.* [mono][interp] don't do sign extension when called from gsharedvt_in_sigthose wrappers use the real type as the return, so sign extension shouldn't be needed and it wouldn't be safe, because the wrapper passes the address of the return var of the actual type. attemptying to sign extend could overflow the storage of this var."
dotnet/runtime,b55365541d8666ef358fda08514165d6a7da47fb,arm64: Add Sve2 Subtract functions (#117318),2025-07-10 13:52:11+00:00,Jonathan Davies,0,,,10,1335,5,arm64: add sve2 subtract functions (issue_ref)
dotnet/runtime,33f25330805a5a4b4f054c3acc841e25fcd982c0,"More ILLink formatting fixes (#117396)

- Format ILCompiler.TrimmingTests
- Fix ILLink.RoslynAnalyzer generated tests
- Fix whitespace in comments and #if'd out code
- Remove suppression for spacing around keywords
- Update analyzer test expected warning locations

---------

Co-authored-by: Jackson Schuster <36744439+jtschuster@users.noreply.github.com>",2025-07-10 15:36:27+00:00,Sven Boemer,1,a706701288ecec3c604b6591cd3186370759bb8f,"Fix indentation (#119213)

Porting feedback from https://github.com/dotnet/runtime/pull/119195 to main.",310,19212,18715,more illink formatting fixes (issue_ref)- format ilcompiler.trimmingtests- fix illink.roslynanalyzer generated tests- fix whitespace in comments and #if'd out code- remove suppression for spacing around keywords- update analyzer test expected warning locations---------
dotnet/runtime,1fb517811e25a96a92ce377d51bf693461ae4f75,Documentation consistency for PQC types,2025-07-10 16:44:26+00:00,Kevin Jones,1,e717202b5d5192bfac682fec99c62e35dd8356ba,"ML-DSA Sign/VerifyPreHash (#117414)

* ML-DSA Sign/VerifyPreHash

* revert some accidental changes

* fix M.B.Cryptography

* Address feedback

* add accidentally not commited change",3,43,14,documentation consistency for pqc types
dotnet/runtime,fe5698db42c526fd2c1b6dc278cbab50435203e8,Make append_path in host utils a simple concatenation (#117392),2025-07-10 17:17:53+00:00,Elinor Fung,1,e7683588bc98233e8d0e4a7e4ec4109face7435a,"Add searched .NET install locations to error message (#117796)

Include searched locations in error message when host cannot find a .NET install (`hostfxr`)

Example - the 'following locations were searched' section is new:
```
You must install .NET to run this application.

App: /home/repos/helloworld/bin/Debug/net10.0/helloworld
Architecture: x64
App host version: 10.0.0-dev
.NET location: Not found

The following locations were searched:
  Application directory:
    /home/repos/helloworld/bin/Debug/net10.0/
  Environment variable:
    DOTNET_ROOT_X64 = <not set>
    DOTNET_ROOT = <not set>
  Registered location:
    /etc/dotnet/install_location_x64 = <not set>
  Default location:
    /usr/share/dotnet

Learn more:
https://aka.ms/dotnet/app-launch-failed

Download the .NET runtime:
https://aka.ms/dotnet-core-applaunch?missing_runtime=true&arch=x64&rid=linux-x64&os=ubuntu.22.04&apphost_version=10.0.0-dev
```",2,14,7,make append_path in host utils a simple concatenation (issue_ref)
dotnet/runtime,8aaf1be9d939e0f733496c323df734834ee44eb5,"Enable DOTNET_ThreadGuardPages opt-in config setting on 32-bit (#117466)

* Enable DOTNET_ThreadGuardPages opt-in config setting on 32-bit

* Simplify page guard computation",2025-07-10 18:05:05+00:00,Tom McDonald,0,,,1,3,11,enable dotnet_threadguardpages opt-in config setting on 32-bit (issue_ref)* enable dotnet_threadguardpages opt-in config setting on 32-bit* simplify page guard computation
dotnet/runtime,f8633a3031d8a7c0ee5fb38c89289a584c9344ce,enable more containment optimizations in tier0 (#117512),2025-07-10 20:38:35+00:00,Clinton Ingram,0,,,3,4,4,enable more containment optimizations in tier0 (issue_ref)
dotnet/runtime,1fd2ed8864735c7d745cbace89b18de967d521fb,"Use python from the emsdk package when building browser target (#117513)

This works around an issue on AzDO build machines where an internal monitoring agent process sometimes interferes with the system python (which would be called by emcc for every compilation unit).",2025-07-10 22:27:32+00:00,Alexander Köplinger,0,,,5,24,40,use python from the emsdk package when building browser target (issue_ref)this works around an issue on azdo build machines where an internal monitoring agent process sometimes interferes with the system python (which would be called by emcc for every compilation unit).
dotnet/runtime,1df4e5231ea9ce2efac8dbc0eaede7cd4a928324,Fix test causing assert (#117507),2025-07-11 00:45:04+00:00,Natalia Kondratyeva,1,292df8e171aee035e9313dc293e7d865a8c2c83b,"ClientWebSocket Loopback Server tests (#117255)

* Extract helper from echo server

* Refactor external server tests

* WIP

* Fix loopback echo server, add more tests

* Add thread-safety option to Http2LoopbackServer

* Test fixes, add more tests

* Refactor LoopbackWebSocketServer, fix subprotocol tests

* wip

* Fixes

* Refactoring

* Fix H2 loopback

* Add missing read-write tests, remove debug logging

* Fixed and unified all tests with exception of send-receive

* Fix external send-receive

* Fixed most of the loopback send-receive

* Removed WebSocketData

* NetCoreServer fix, removed unused stuff

* Fix browser build

* remove ConfigureHttp2Options

* Address PR feedback",1,1,1,fix test causing assert (issue_ref)
dotnet/runtime,8b9c08843d501d833a9fe336470c370a3570617e,"[mono][interp] implement interp bitcast intrinsics (#115443)

 implement interpreter bitcast intrinsics and disable broken mono windows jit bitcast intrinsic",2025-07-11 04:17:52+00:00,Larry Ewing,1,82a3571888b072d334e83981bb46fdbe0e115879,"[mono][interp] Fix various leaks, primarily around dynamic methods (#119176)

* [mono][interp] Fix leaking of compilation data

For dynamic methods, imethod_alloc0 allocates from the dynamic method's mempool which is freed when the method is collected. We were previously allocating only from the global memory manager.

* [mono][interp] Stop leaking data items

Previously we were registering imethod locations from these data items in order for them to be patched once a method is tiered up. Because of this registering, the data item had to always be around. We now free the data item for dynamic methods and also we deregister the patch locations when freeing such a method.

* [mono][interp] Free headers allocated for inlined methods

We add them to a list for later freeing. This uses the same pattern as jit.

* [mono][interp] Skip interp free for methods not yet compiled",14,91,114,[mono][interp] implement interp bitcast intrinsics (issue_ref) implement interpreter bitcast intrinsics and disable broken mono windows jit bitcast intrinsic
dotnet/runtime,d0880b9512cb0f6b6b733cfe86f186c03413655f,"Delete CanonicalEETypeNode (#117456)

This abstraction is not useful and it's in the way if we want a metadata+MethodTable(with no vtable) type.",2025-07-11 06:03:37+00:00,Michal Strehovský,0,,,10,49,182,delete canonicaleetypenode (issue_ref)this abstraction is not useful and it's in the way if we want a metadata+methodtable(with no vtable) type.
dotnet/runtime,61fc02b140c83227cf567773f28988dc518f6bf3,"Allow NecessaryTypeSymbol in generic dictionaries (#117315)

Before this change, whenever we needed to refer to a type from a generic dictionary, we used the fully loaded ""allocated"" form of it. But we can do the same optimization we do for non-generic code where we distinguish between MethodTables that we need for casting-like operations and MethodTables that are actually for allocation.",2025-07-11 11:50:06+00:00,Michal Strehovský,1,fe3f59b1358ac9181e5739d26986edafbf6ad0cc,Fix missed places in dataflow analysis that introduce genericness (#118020),16,165,14,"allow necessarytypesymbol in generic dictionaries (issue_ref)before this change, whenever we needed to refer to a type from a generic dictionary, we used the fully loaded ""allocated"" form of it. but we can do the same optimization we do for non-generic code where we distinguish between methodtables that we need for casting-like operations and methodtables that are actually for allocation."
dotnet/runtime,d9e8e3fba1cb136ea1e328605d198b8355a2284c,Remove dependency on System.Security.Cryptography.Native.OpenSsl in QUIC,2025-07-11 13:47:23+00:00,Kevin Jones,0,,,3,20,50,remove dependency on system.security.cryptography.native.openssl in quic
dotnet/runtime,ee419be7dc98a7d474ab772850f7af4f9333c6ad,"Update dependencies from https://github.com/dotnet/dotnet build 274788 (#117532)

Updated Dependencies:
System.CommandLine (Version 2.0.0-beta6.25359.101 -> 2.0.0-beta6.25360.101)
Microsoft.DotNet.Cecil (Version 0.11.5-alpha.25359.101 -> 0.11.5-alpha.25360.101)
Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport, Microsoft.DotNet.ApiCompat.Task (Version 10.0.100-preview.7.25359.101 -> 10.0.100-preview.7.25360.101)
Microsoft.DotNet.Arcade.Sdk, Microsoft.DotNet.XliffTasks, Microsoft.DotNet.Helix.Sdk, Microsoft.DotNet.GenAPI, Microsoft.DotNet.GenFacades, Microsoft.DotNet.XUnitExtensions, Microsoft.DotNet.Build.Tasks.Archives, Microsoft.DotNet.Build.Tasks.Packaging, Microsoft.DotNet.Build.Tasks.Installers, Microsoft.DotNet.Build.Tasks.Templating, Microsoft.DotNet.Build.Tasks.Workloads, Microsoft.DotNet.CodeAnalysis, Microsoft.DotNet.Build.Tasks.TargetFramework, Microsoft.DotNet.RemoteExecutor, Microsoft.DotNet.Build.Tasks.Feed, Microsoft.DotNet.SharedFramework.Sdk, Microsoft.DotNet.PackageTesting (Version 10.0.0-beta.25359.101 -> 10.0.0-beta.25360.101)
Microsoft.DotNet.XUnitAssert, Microsoft.DotNet.XUnitConsoleRunner (Version 2.9.2-beta.25359.101 -> 2.9.3-beta.25360.101)
Microsoft.NETCore.App.Ref, runtime.native.System.IO.Ports, Microsoft.NETCore.ILAsm, Microsoft.NET.Sdk.IL, System.Text.Json, System.Reflection.Metadata, System.Reflection.MetadataLoadContext (Version 10.0.0-preview.7.25359.101 -> 10.0.0-preview.7.25360.101)
Microsoft.Net.Compilers.Toolset, Microsoft.CodeAnalysis, Microsoft.CodeAnalysis.CSharp, Microsoft.CodeAnalysis.Analyzers (Version 5.0.0-1.25359.101 -> 5.0.0-1.25360.101)
Microsoft.CodeAnalysis.NetAnalyzers (Version 10.0.0-preview.25359.101 -> 10.0.0-preview.25360.101)

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-07-11 14:12:53+00:00,dotnet-maestro[bot],0,,,3,107,107,"update dependencies from build 274788 (issue_ref)updated dependencies:system.commandline (version 2.0.0-beta6.25359.101 -> 2.0.0-beta6.25360.101)microsoft.dotnet.cecil (version 0.11.5-alpha.25359.101 -> 0.11.5-alpha.25360.101)microsoft.net.workload.emscripten.current.manifest-10.0.100.transport, microsoft.dotnet.apicompat.task (version 10.0.100-preview.7.25359.101 -> 10.0.100-preview.7.25360.101)microsoft.dotnet.arcade.sdk, microsoft.dotnet.xlifftasks, microsoft.dotnet.helix.sdk, microsoft.dotnet.genapi, microsoft.dotnet.genfacades, microsoft.dotnet.xunitextensions, microsoft.dotnet.build.tasks.archives, microsoft.dotnet.build.tasks.packaging, microsoft.dotnet.build.tasks.installers, microsoft.dotnet.build.tasks.templating, microsoft.dotnet.build.tasks.workloads, microsoft.dotnet.codeanalysis, microsoft.dotnet.build.tasks.targetframework, microsoft.dotnet.remoteexecutor, microsoft.dotnet.build.tasks.feed, microsoft.dotnet.sharedframework.sdk, microsoft.dotnet.packagetesting (version 10.0.0-beta.25359.101 -> 10.0.0-beta.25360.101)microsoft.dotnet.xunitassert, microsoft.dotnet.xunitconsolerunner (version 2.9.2-beta.25359.101 -> 2.9.3-beta.25360.101)microsoft.netcore.app.ref, runtime.native.system.io.ports, microsoft.netcore.ilasm, microsoft.net.sdk.il, system.text.json, system.reflection.metadata, system.reflection.metadataloadcontext (version 10.0.0-preview.7.25359.101 -> 10.0.0-preview.7.25360.101)microsoft.net.compilers.toolset, microsoft.codeanalysis, microsoft.codeanalysis.csharp, microsoft.codeanalysis.analyzers (version 5.0.0-1.25359.101 -> 5.0.0-1.25360.101)microsoft.codeanalysis.netanalyzers (version 10.0.0-preview.25359.101 -> 10.0.0-preview.25360.101)"
dotnet/runtime,4aec7a55fb570dd10bad2b1c47d2bd76a8087d64,"JIT: fix regressions from inlining policy change (#117492)

Don't boost the IL size threshold at Tier1+Instr, since this can cause
us to lose profile data for key inlinees.

Fixes most of the regressions from #115904",2025-07-11 14:21:39+00:00,Andy Ayers,1,7c5ea10f93f45603786cf2987b12571cf8bed1ad,"JIT: constrain max IL size for OSR inlining (#117816)

If we inline too aggressively at intermediate tiers, we can lose profile
data that would be beneficial at the final tier.

Extend the recent fixes made for limiting max IL size at Tier1+Instr to
include OSR as well. This one is a arguably bit more delicate as OSR may
well be the final tier, but there is no way to know that.

We are just returning to the .NET 9 behavior here.

Fixes #117717. May also fix some of the other regressions that have
not yet been analyzed in depth.",1,10,2,"jit: fix regressions from inlining policy change (issue_ref)don't boost the il size threshold at tier1+instr, since this can causeus to lose profile data for key inlinees.fixes most of the regressions from issue_ref"
dotnet/runtime,35584ab5b36abeb8a99607f8a32fa9f6468325d9,"Do not return from CTRL_SHUTDOWN_EVENT (#116652)

* Do not return from CTRL_SHUTDOWN_EVENT

Windows will kill the process after it completes handling CTRL_SHUTDOWN_EVENT

To avoid this, we add a delay to our handler.  This allows the process
to exit before the handler returns.

We use HostOptions.ShutdownTimeout for the delay.  This does mean that
other SIGTERM handlers will not run, but that's a tradeoff we have to
make to ensure the process isn't killed.

* Update ConsoleLifetime.netcoreapp.cs",2025-07-11 14:36:27+00:00,Eric StJohn,0,,,3,108,5,"do not return from ctrl_shutdown_event (issue_ref)* do not return from ctrl_shutdown_eventwindows will kill the process after it completes handling ctrl_shutdown_eventto avoid this, we add a delay to our handler. this allows the processto exit before the handler returns.we use hostoptions.shutdowntimeout for the delay. this does mean thatother sigterm handlers will not run, but that's a tradeoff we have tomake to ensure the process isn't killed.* update consolelifetime.netcoreapp.cs"
dotnet/runtime,c1d880846ac6c545341a99f880ab0bdfa663c0f1,"Localized file check-in by OneLocBuild Task: Build definition ID 679: Build ID 2747820 (#115228)

* Localized file check-in by OneLocBuild Task: Build definition ID 679: Build ID 2699975

* Localized file check-in by OneLocBuild Task: Build definition ID 679: Build ID 2699990

* Localized file check-in by OneLocBuild Task: Build definition ID 679: Build ID 2699990

* Localized file check-in by OneLocBuild Task: Build definition ID 679: Build ID 2709291

* Localized file check-in by OneLocBuild Task: Build definition ID 679: Build ID 2709892

* Localized file check-in by OneLocBuild Task: Build definition ID 679: Build ID 2713024

* Localized file check-in by OneLocBuild Task: Build definition ID 679: Build ID 2713052

* Localized file check-in by OneLocBuild Task: Build definition ID 679: Build ID 2713052

* Localized file check-in by OneLocBuild Task: Build definition ID 679: Build ID 2715237

* Localized file check-in by OneLocBuild Task: Build definition ID 679: Build ID 2727398

* Localized file check-in by OneLocBuild Task: Build definition ID 679: Build ID 2727423

* Localized file check-in by OneLocBuild Task: Build definition ID 679: Build ID 2727423

* Localized file check-in by OneLocBuild Task: Build definition ID 679: Build ID 2727603

* Localized file check-in by OneLocBuild Task: Build definition ID 679: Build ID 2727670

* Localized file check-in by OneLocBuild Task: Build definition ID 679: Build ID 2727670

* Localized file check-in by OneLocBuild Task: Build definition ID 679: Build ID 2738684

* Localized file check-in by OneLocBuild Task: Build definition ID 679: Build ID 2738707

* Localized file check-in by OneLocBuild Task: Build definition ID 679: Build ID 2738707

* Localized file check-in by OneLocBuild Task: Build definition ID 679: Build ID 2745280

* Localized file check-in by OneLocBuild Task: Build definition ID 679: Build ID 2745347

* Localized file check-in by OneLocBuild Task: Build definition ID 679: Build ID 2745347

---------

Co-authored-by: Alexander Köplinger <alex.koeplinger@outlook.com>",2025-07-11 15:28:00+00:00,dotnet bot,0,,,13,39,39,localized file check-in by onelocbuild task: build definition id 679: build id 2747820 (issue_ref)* localized file check-in by onelocbuild task: build definition id 679: build id 2699975* localized file check-in by onelocbuild task: build definition id 679: build id 2699990* localized file check-in by onelocbuild task: build definition id 679: build id 2699990* localized file check-in by onelocbuild task: build definition id 679: build id 2709291* localized file check-in by onelocbuild task: build definition id 679: build id 2709892* localized file check-in by onelocbuild task: build definition id 679: build id 2713024* localized file check-in by onelocbuild task: build definition id 679: build id 2713052* localized file check-in by onelocbuild task: build definition id 679: build id 2713052* localized file check-in by onelocbuild task: build definition id 679: build id 2715237* localized file check-in by onelocbuild task: build definition id 679: build id 2727398* localized file check-in by onelocbuild task: build definition id 679: build id 2727423* localized file check-in by onelocbuild task: build definition id 679: build id 2727423* localized file check-in by onelocbuild task: build definition id 679: build id 2727603* localized file check-in by onelocbuild task: build definition id 679: build id 2727670* localized file check-in by onelocbuild task: build definition id 679: build id 2727670* localized file check-in by onelocbuild task: build definition id 679: build id 2738684* localized file check-in by onelocbuild task: build definition id 679: build id 2738707* localized file check-in by onelocbuild task: build definition id 679: build id 2738707* localized file check-in by onelocbuild task: build definition id 679: build id 2745280* localized file check-in by onelocbuild task: build definition id 679: build id 2745347* localized file check-in by onelocbuild task: build definition id 679: build id 2745347---------
dotnet/runtime,1f862c83386ea4bf9b2614f407a3597872397f53,"Add acquire barrier to populate bit reading (#117523)

The setting of the NDirectMethodDesc::kNDirectPopulated bit
is done via an interlocked operation. This bit is used to indicate
if the NDirectMethodDesc has been populated with the needed
information to load the P/Invoke. The reading of this bit however
was missing an acquire barrier and thus setting of fields between
the check and set weren't being observed correctly.",2025-07-11 18:23:59+00:00,Aaron Robinson,0,,,1,1,1,add acquire barrier to populate bit reading (issue_ref)the setting of the ndirectmethoddesc::kndirectpopulated bitis done via an interlocked operation. this bit is used to indicateif the ndirectmethoddesc has been populated with the neededinformation to load the p/invoke. the reading of this bit howeverwas missing an acquire barrier and thus setting of fields betweenthe check and set weren't being observed correctly.
dotnet/runtime,956aba4039fcb0e07619986b9a608e2a30158b01,"adding GetDomainFromContext cDAC API (#117517)

Co-authored-by: Rachel Jarvi <racheljarvi@microsoft.com>",2025-07-11 23:51:31+00:00,Rachel,0,,,1,25,1,adding getdomainfromcontext cdac api (issue_ref)
dotnet/runtime,645d04972c034b13e2dc676579c39f6b62469744,"Protect against ODE when accessing configuration providers (#117551)

* Protect against ODE when accessing configuration providers

* Update src/libraries/Microsoft.Extensions.Configuration/src/InternalConfigurationRootExtensions.cs

Co-authored-by: Stephen Halter <halter73@gmail.com>

---------

Co-authored-by: Stephen Halter <halter73@gmail.com>",2025-07-12 00:24:05+00:00,Tarek Mahmoud Sayed,0,,,1,18,2,protect against ode when accessing configuration providers (issue_ref)* protect against ode when accessing configuration providers* update src/libraries/microsoft.extensions.configuration/src/internalconfigurationrootextensions.cs
dotnet/runtime,f21eb18e3f2c01dcbfa583eee72e86f1259776af,"Adding proper exiting and cleanup logic for singlefile createdump (#117286)

* adding proper exiting and cleanup logic for singlefile createdump

* simplifying code change

---------

Co-authored-by: Rachel Jarvi <racheljarvi@microsoft.com>",2025-07-12 14:26:51+00:00,Rachel,1,913c282fc9fac8cdaf73bfc594672e8635be8509,"Fix broken debugger/debuggee startup handshake protocol on macOS26. (#118120)

* Add support for new startup handshake protocol over pipes instead of sempahores.

* Remove NonBlocking runtime support.

* Renames, logging and simplification.

* Improve tracing.

* Make open check non blocking.

* Fold access into open calls and track ENOENT | ENOACCES

* Review feedback.",1,7,1,adding proper exiting and cleanup logic for singlefile createdump (issue_ref)* adding proper exiting and cleanup logic for singlefile createdump* simplifying code change---------
dotnet/runtime,cbcf5ad13921a0445baea49a29d759d5c1146f03,"[main] Source code updates from dotnet/dotnet (#117576)

* [VMR] Codeflow 9fa2ecb-9fa2ecb

[[ commit created by automation ]]

* Update dependencies from https://github.com/dotnet/dotnet build 275021
Updated Dependencies:
System.CommandLine (Version 2.0.0-beta6.25360.101 -> 2.0.0-beta7.25362.103)
Microsoft.DotNet.Cecil (Version 0.11.5-alpha.25360.101 -> 0.11.5-alpha.25362.103)
Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport, Microsoft.DotNet.ApiCompat.Task (Version 10.0.100-preview.7.25360.101 -> 10.0.100-preview.7.25362.103)
Microsoft.DotNet.Arcade.Sdk, Microsoft.DotNet.XliffTasks, Microsoft.DotNet.Helix.Sdk, Microsoft.DotNet.GenAPI, Microsoft.DotNet.GenFacades, Microsoft.DotNet.XUnitExtensions, Microsoft.DotNet.Build.Tasks.Archives, Microsoft.DotNet.Build.Tasks.Packaging, Microsoft.DotNet.Build.Tasks.Installers, Microsoft.DotNet.Build.Tasks.Templating, Microsoft.DotNet.Build.Tasks.Workloads, Microsoft.DotNet.CodeAnalysis, Microsoft.DotNet.Build.Tasks.TargetFramework, Microsoft.DotNet.RemoteExecutor, Microsoft.DotNet.Build.Tasks.Feed, Microsoft.DotNet.SharedFramework.Sdk, Microsoft.DotNet.PackageTesting (Version 10.0.0-beta.25360.101 -> 10.0.0-beta.25362.103)
Microsoft.DotNet.XUnitAssert, Microsoft.DotNet.XUnitConsoleRunner (Version 2.9.3-beta.25360.101 -> 2.9.3-beta.25362.103)
Microsoft.NETCore.App.Ref, runtime.native.System.IO.Ports, Microsoft.NETCore.ILAsm, Microsoft.NET.Sdk.IL, System.Text.Json, System.Reflection.Metadata, System.Reflection.MetadataLoadContext (Version 10.0.0-preview.7.25360.101 -> 10.0.0-preview.7.25362.103)
Microsoft.Net.Compilers.Toolset, Microsoft.CodeAnalysis, Microsoft.CodeAnalysis.CSharp, Microsoft.CodeAnalysis.Analyzers (Version 5.0.0-1.25360.101 -> 5.0.0-1.25362.103)
Microsoft.CodeAnalysis.NetAnalyzers (Version 10.0.0-preview.25360.101 -> 10.0.0-preview.25362.103)

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-07-13 09:28:01+00:00,dotnet-maestro[bot],0,,,13,169,142,"[main] source code updates from dotnet/dotnet (issue_ref)* [vmr] codeflow 9fa2ecb-9fa2ecb[[ commit created by automation ]]* update dependencies from build 275021updated dependencies:system.commandline (version 2.0.0-beta6.25360.101 -> 2.0.0-beta7.25362.103)microsoft.dotnet.cecil (version 0.11.5-alpha.25360.101 -> 0.11.5-alpha.25362.103)microsoft.net.workload.emscripten.current.manifest-10.0.100.transport, microsoft.dotnet.apicompat.task (version 10.0.100-preview.7.25360.101 -> 10.0.100-preview.7.25362.103)microsoft.dotnet.arcade.sdk, microsoft.dotnet.xlifftasks, microsoft.dotnet.helix.sdk, microsoft.dotnet.genapi, microsoft.dotnet.genfacades, microsoft.dotnet.xunitextensions, microsoft.dotnet.build.tasks.archives, microsoft.dotnet.build.tasks.packaging, microsoft.dotnet.build.tasks.installers, microsoft.dotnet.build.tasks.templating, microsoft.dotnet.build.tasks.workloads, microsoft.dotnet.codeanalysis, microsoft.dotnet.build.tasks.targetframework, microsoft.dotnet.remoteexecutor, microsoft.dotnet.build.tasks.feed, microsoft.dotnet.sharedframework.sdk, microsoft.dotnet.packagetesting (version 10.0.0-beta.25360.101 -> 10.0.0-beta.25362.103)microsoft.dotnet.xunitassert, microsoft.dotnet.xunitconsolerunner (version 2.9.3-beta.25360.101 -> 2.9.3-beta.25362.103)microsoft.netcore.app.ref, runtime.native.system.io.ports, microsoft.netcore.ilasm, microsoft.net.sdk.il, system.text.json, system.reflection.metadata, system.reflection.metadataloadcontext (version 10.0.0-preview.7.25360.101 -> 10.0.0-preview.7.25362.103)microsoft.net.compilers.toolset, microsoft.codeanalysis, microsoft.codeanalysis.csharp, microsoft.codeanalysis.analyzers (version 5.0.0-1.25360.101 -> 5.0.0-1.25362.103)microsoft.codeanalysis.netanalyzers (version 10.0.0-preview.25360.101 -> 10.0.0-preview.25362.103)---------"
dotnet/runtime,b2605610740a82aad889c5193ccd117f18c761f0,"Fix illumos compile error in coreclr/runtime/amd64/AllocFast.S (#117463)

on illumos with gcc 13.3 cross copmiler
 coreclr/runtime/amd64/AllocFast.S: Assembler messages:
  coreclr/runtime/amd64/AllocFast.S:237: Error: missing ')'",2025-07-13 09:54:11+00:00,Gordon Ross,1,b58e37df5ea47d9354ba6d919bde34e6228884ef,"Change RhNewString length argument to nint/intptr_t (#117552)

The RhNewString length argument is declared as int, but the asm
implementation was using the full 64 bits of the related argument
register. That doesn't match the calling convention where there is no
guarantee that the upper 32 bits are zeroed. That has caused problem in
the interpreter that always loads full registers from the interpreter
stack and so sometimes, the upper 32 bits were a garbage and the
function failed because the length was seemingly too large.

This change fixes it by changing signature of the RhNewString so that
the length is nint in managed code / intptr_t in native code.",1,4,1,fix illumos compile error in coreclr/runtime/amd64/allocfast.s (issue_ref)on illumos with gcc 13.3 cross copmiler coreclr/runtime/amd64/allocfast.s: assembler messages: coreclr/runtime/amd64/allocfast.s:237: error: missing ')'
dotnet/runtime,8dfc3adde954a655e6bfef1832d0574593fc565c,"Use `$NOCANCEL` variants of APIs on apple platforms (#117330)

* Use `$NOCANCEL` variants of APIs on apple platforms

See https://github.com/dotnet/runtime/issues/117299

* Remove remaining retry logic for `close` calls

- 2 cases still had retry on `EINTR` logic for `close`

* Remove dead code in `SafeFileHandle.Unix.cs`

* Ensure our handling of close giving EINTR is fully consistent

* Remove a now out-of-date comment

* Update sgen-protocol.c

Fix 1 remaining case of `close` being called in a loop

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-07-13 12:15:48+00:00,Hamish Arblaster,1,6a1934208b83330c6b90ed76cb5c1fa3d1b0f3f4,"[EventPipe] End user_events session upon continuation_stream closure (#117435)

* [EventPipe][DiagnosticServer] Add poll interface to IpcStreams

* [EventPipe] Close user_events session upon continuation_stream closure

* Address Feedback

Revert moving IpcPollEvents to ep-ipc-pal-types header
Use IpcStream base type directly in sessions
Omit websocket ipc_stream_poll_func implementation
Change continuation stream poll timeout to infinite
Change returned PollEvent to none upon timeout

* Move IpcPollEvents back to ep-ipc-pal-types header

* Add relevant headers

ep-stream.h for ep_ipc_stream_writer_alloc that was transitively
included by ep-file.h
ep-ipc-stream.h for ep_ipc_stream_poll_vcall

* Address feedback

Remove prefix from IpcPollEvents enums and infinite timeout define
Expand connection closed detection to error case",8,15,27,use variants of apis on apple platforms (issue_ref)* use variants of apis on apple platformssee * remove remaining retry logic for calls- 2 cases still had retry on logic for * remove dead code in * ensure our handling of close giving eintr is fully consistent* remove a now out-of-date comment* update sgen-protocol.cfix 1 remaining case of being called in a loop---------
dotnet/runtime,7a501a181a6ba5a6292a850c3c7cd3e86d746de7,"Update dependencies from https://dev.azure.com/dnceng/internal/_git/dotnet-optimization build 20250713.1 (#117580)

optimization.linux-arm64.MIBC.Runtime , optimization.linux-x64.MIBC.Runtime , optimization.windows_nt-arm64.MIBC.Runtime , optimization.windows_nt-x64.MIBC.Runtime , optimization.windows_nt-x86.MIBC.Runtime , optimization.PGO.CoreCLR
 From Version 1.0.0-prerelease.25324.1 -> To Version 1.0.0-prerelease.25363.1

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-07-13 13:55:01+00:00,dotnet-maestro[bot],0,,,2,18,18,"update dependencies from build 20250713.1 (issue_ref)optimization.linux-arm64.mibc.runtime , optimization.linux-x64.mibc.runtime , optimization.windows_nt-arm64.mibc.runtime , optimization.windows_nt-x64.mibc.runtime , optimization.windows_nt-x86.mibc.runtime , optimization.pgo.coreclr from version 1.0.0-prerelease.25324.1 -> to version 1.0.0-prerelease.25363.1"
dotnet/runtime,9c0555e89d91149226cfade4a395e02b8d9401ff,"Make ETW rundown operate more effectively with JIT (#116354)

* Make the EECodeGenManager API surface narrower.
Rename some locals removing critical section notion
and replace with lock.

Rework the CodeHeapIterator.
Rename members to more accurately reflect their purpose.
Generally move to more canonical C++.

EECodeGenManager now has a iterator counter. This is
used to track the number of outstanding iterators and
can be used to defer deletes. Adds are still valid since
the iterator will only operate on the state at the time the
iterator was created.

* Move DynamicMethodDesc destruction to finalizer queue if not
possible due to MethodDesc iteration.
Rework how DynamicMethodDesc and LCGMethodResolver
destruction works. This was needed due to Crst lock inversion.

* Remove CrstIbcProfile

* Move finalizer related work functions to finalizerthread.cpp.

* Unconditionally publish UnwindInfo.

* Remove CEECodeGenInfo::BackoutJitData()
Rework allocation order for recording of code pointer.

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-07-14 01:35:16+00:00,Aaron Robinson,1,082123b2b29c2467b318b4f0312aad2040a9224d,"events from private provider not getting fire if process starts after event collection starts (#117836)

fixes issue #115420. please see description of the problem in that issue.",36,1076,1061,make etw rundown operate more effectively with jit (issue_ref)* make the eecodegenmanager api surface narrower.rename some locals removing critical section notionand replace with lock.rework the codeheapiterator.rename members to more accurately reflect their purpose.generally move to more canonical c++.eecodegenmanager now has a iterator counter. this isused to track the number of outstanding iterators andcan be used to defer deletes. adds are still valid sincethe iterator will only operate on the state at the time theiterator was created.* move dynamicmethoddesc destruction to finalizer queue if notpossible due to methoddesc iteration.rework how dynamicmethoddesc and lcgmethodresolverdestruction works. this was needed due to crst lock inversion.* remove crstibcprofile* move finalizer related work functions to finalizerthread.cpp.* unconditionally publish unwindinfo.* remove ceecodegeninfo::backoutjitdata()rework allocation order for recording of code pointer.---------
dotnet/runtime,a2575931efeffa90a469e77af3494c2e33efd678,Update codegen area owners (#117597),2025-07-14 14:41:25+00:00,Jan Kotas,0,,,1,7,7,update codegen area owners (issue_ref)
dotnet/runtime,d46c447b5a1b8d3449a9e7e019d3ae518e2232e0,"Support moving continuations to `SynchronizationContext`/`TaskScheduler` (#117314)

This adds support for moving continuations after task awaits to the right
context:
* For unconfigured task awaits or `ConfigureAwait(true)`, continuations are
* posted to the captured `SynchronizationContext` or `TaskScheduler` by the BCL
* For `ConfigureAwait(false)` continuations are moved to the thread pool

The JIT inserts a call to a new `AsyncHelpers.CaptureContinuationContext` when
suspending because of a task await. That function either captures the current
`SynchronizationContext` or `TaskScheduler` into the continuation in a known
place. Later the BCL will fetch the context from the continuation object based
on a flag to determine whether the continuation needs to be posted somewhere
else or whether it can be inlined. There is a new `Task`-derived `ThunkTask`
that replaces the existing C#-async-function-with-a-loop and which handles the
continuations explicitly.

Inlining continuations on the same thread currently has no check on stack depth.
This might be necessary to add. There are some differences compared to async 1
with how continuations are executed. In particular some common cases that
resulted in unbounded stack usage with async 1 does _not_ result in increasing
stack usage with runtime async. Hence I am not 100% sure whether we need a
mitigation or not, but more investigation is needed from my side. I'd like to
leave that as a follow-up.

To get to the right behavior this PR disables code inlining of task-awaited
functions. This is a large concession, but getting the behavior right in the
face of inlining proved to be quite tricky with the JIT's current internal
representation. Work to reenable this will be done separately.

There is still one missing piece for correctness: saving and restoring the
`Thread._synchronizationContext` field around async calls. It runs into similar
trickiness when trying to represent the expected behavior (which is that the
field is restored around synchronous calls, but _not_ restored on resumption).",2025-07-14 15:43:38+00:00,Jakob Botsch Nielsen,1,94b6d05ad5e6fffe1d213305a9bc938c2545e9a2,JIT: Fix unique successors in `BBswtDesc` in runtime async (#117759),13,583,171,"support moving continuations to / (issue_ref)this adds support for moving continuations after task awaits to the rightcontext:* for unconfigured task awaits or , continuations are* posted to the captured or by the bcl* for continuations are moved to the thread poolthe jit inserts a call to a new whensuspending because of a task await. that function either captures the current or into the continuation in a knownplace. later the bcl will fetch the context from the continuation object basedon a flag to determine whether the continuation needs to be posted somewhereelse or whether it can be inlined. there is a new -derived that replaces the existing c#-async-function-with-a-loop and which handles thecontinuations explicitly.inlining continuations on the same thread currently has no check on stack depth.this might be necessary to add. there are some differences compared to async 1with how continuations are executed. in particular some common cases thatresulted in unbounded stack usage with async 1 does _not_ result in increasingstack usage with runtime async. hence i am not 100% sure whether we need amitigation or not, but more investigation is needed from my side. i'd like toleave that as a follow-up.to get to the right behavior this pr disables code inlining of task-awaitedfunctions. this is a large concession, but getting the behavior right in theface of inlining proved to be quite tricky with the jit's current internalrepresentation. work to reenable this will be done separately.there is still one missing piece for correctness: saving and restoring the field around async calls. it runs into similartrickiness when trying to represent the expected behavior (which is that thefield is restored around synchronous calls, but _not_ restored on resumption)."
dotnet/runtime,f1f9934034c3414fe041ef1754d2e20547c98ad8,Normalize immediates in arm32 add/sub (#116711),2025-07-14 15:45:25+00:00,Michał Petryka,0,,,1,5,0,normalize immediates in arm32 add/sub (issue_ref)
dotnet/runtime,9c3c76d9e62eeacf74ee942a39a7ec305671375c,"Revert ""Disable `System.Runtime.InteropServices.JavaScript.Tests` on Windows.…"" (#117600)

This reverts commit 5951ad2cc386f6af3c30629e546daa8d4378e053.",2025-07-14 16:03:02+00:00,Alexander Köplinger,0,,,1,0,5,"revert ""disable on windows.…"" (issue_ref)this reverts commit 5951ad2cc386f6af3c30629e546daa8d4378e053."
dotnet/runtime,cbdc0eff824c5b8a646dee9cbaa91ec1b47c36de,"Remove BBF_HAS_NULLCHECK, BBF_HAS_IDX_LEN, BBF_HAS_MD_IDX_LEN (#117603)",2025-07-14 16:56:39+00:00,Egor Bogatov,1,085732c314c75f0274f078a376b55d68e9f6f1c7,"Misc cleanup (fixing comments, deleting dead code) (#117908)

* Left-over feedback from #114246

* Delete unused macros

* Delete dead ifdef

* Delete obsolete comment

* Delete dead code

* Fix formatting

* Delete dead code

* Delete mentions of Windows Arm32

* Delete unrecognized attribute

* Fix comment and log message",17,86,196,"remove bbf_has_nullcheck, bbf_has_idx_len, bbf_has_md_idx_len (issue_ref)"
dotnet/runtime,5888837e82d28c17f93a19a2418066cdcf8467dc,SVE2 API for FusedAddHalving and FusedSubtractHalving (#117609),2025-07-14 20:27:21+00:00,Jacob Crawley,0,,,6,396,0,sve2 api for fusedaddhalving and fusedsubtracthalving (issue_ref)
dotnet/runtime,adc97774337846c7fac2905ab38f7bd4c77f2a61,"JIT: Don't move EH entry block to enable branch reversal during flow opts (#117618)

Fixes #117581.",2025-07-14 20:55:21+00:00,Aman Khalid,1,950a7784475b872fc65f982bed48ccd194263039,"JIT: Mark throw blocks with heuristic-derived weights as rarely run during morph (#117692)

Fixes #117577.",3,3,15,jit: don't move eh entry block to enable branch reversal during flow opts (issue_ref)fixes issue_ref.
dotnet/runtime,5c170368ac8a8d28f39166ed96514b8d1f72c220,"Increase cost of ARR_LENGTH node to match IND(ADD(..,CNS)) (#117531)",2025-07-14 22:06:16+00:00,Egor Bogatov,1,ea4a7811b69a7f1adaecf4263b19492c6a6a9372,"Arm64 SVE: Add mask to nonfaulting loads (#117606)

Fixes #108234

SveLoadNonFaultingMaskedUnOpTest.template is a mixture of
SveLoadNonFaultingUnOpTest.template and
SveLoadVectorMaskedTest.template",1,3,3,"increase cost of arr_length node to match ind(add(..,cns)) (issue_ref)"
dotnet/runtime,5aecfd293370b0d88b4bd8069c1f65de0285c412,"Add support for some more simd folding to improve the new IndexOf and related helpers (#117572)

* Add support for some more simd folding to improve the new IndexOf and related helpers

* Ensure that the new node is properly morphed",2025-07-14 23:26:17+00:00,Tanner Gooding,1,9897a3b9442f87703d7c081addf329a47352586a,"Fix the isEmbeddedMaskingCompatible checks (#117607)

* Fix the isEmbeddedMaskingCompatible checks

* Ensure the regression test is setup to use Xunit

* Ensure the fuzzlyn test can actually run, not always throw",5,1071,650,add support for some more simd folding to improve the new indexof and related helpers (issue_ref)* add support for some more simd folding to improve the new indexof and related helpers* ensure that the new node is properly morphed
dotnet/runtime,ede442a9233fb67b2af40709a7d23418e0e491e5,allow containment of CnsVec under GetElement node with non-const index (#117562),2025-07-14 23:26:56+00:00,Clinton Ingram,0,,,3,15,2,allow containment of cnsvec under getelement node with non-const index (issue_ref)
dotnet/runtime,c7b0e49e54f3f199494ee438d474f9b1c413122c,"Update .slnx files due to recent P2P changes and add sfx.slnx (#117494)

- Update all .slnx files via `dotnet build src\libraries\slngen.proj`
- Update the slngen infra
- Add a sfx.slnx file that has the entire shared framework in it

Co-authored-by: Alexander Köplinger <alex.koeplinger@outlook.com>",2025-07-15 06:30:11+00:00,Viktor Hofer,0,,,145,72183,2838,update .slnx files due to recent p2p changes and add sfx.slnx (issue_ref)- update all .slnx files via - update the slngen infra- add a sfx.slnx file that has the entire shared framework in it
dotnet/runtime,175927fbcdad9bb43a440ba684593dc7a99c5f43,Disable Android CoreCLR emulator tests due to capacity issues (#117650),2025-07-15 12:41:30+00:00,Milos Kotlar,0,,,1,2,1,disable android coreclr emulator tests due to capacity issues (issue_ref)
dotnet/runtime,6ac6c21d0e2394031be259054607ac45ad21b962,"[clr-interp] Implement intrinsics for startup path (#117263)

* Test startup path

* Avoid memset in newobj.vt

* Add support for FastPollGC intrinsic

* Resolve merge conflicts

* Implement COMPARE_EXCHANGE macro

* Remove comment

* Resolve merge conflicts

* Enhance intrinsic call handling and add null check operation

- Updated EmitNamedIntrinsicCall to include emitMemBarrier parameter.
- Replaced INTOP_METHODTABLE with INTOP_GETMETHODTABLE in EmitNamedIntrinsicCall
- Introduced INTOP_NULLCHECK operation in intops.def and implemented its handling in the interpreter
- Removed debug print statements from compileMethod
- Added tests

* Replace INTOP_GETMETHODTABLE opcode with INTOP_LDIND_I

* Remove emitMemBarrier parameter and related logic

* Use enclosingClassNames to retrieve the top level namespace",2025-07-15 13:15:07+00:00,Milos Kotlar,1,19a9b70c358d110a8079664062a98fdbbef4389c,"Interpreter P/Invoke support (#115393)

* Squashed, revised PInvoke implementation

Marshaling wrappers work so enable test for them

Separate call opcode for unmarshaled pinvokes

Cleanup

Do inlined pinvoke for CALL_PINVOKE opcode

Update pinvoke test for new behavior

* Repair merge damage

* Add InlinedCallFrame and remove special-casing for InterpreterFrame callers in NDirectImportWorker

* Switch from 'indirect helper tag' to 'direct helper tag' so tagged helpers are compatible with arm32 thumb
Checkpoint pinvoke changes

* Cleanup

* Fix musl ci build

* Address PR feedback
Encapsulate inlined callframe creation

* Remove macro",6,284,29,[clr-interp] implement intrinsics for startup path (issue_ref)* test startup path* avoid memset in newobj.vt* add support for fastpollgc intrinsic* resolve merge conflicts* implement compare_exchange macro* remove comment* resolve merge conflicts* enhance intrinsic call handling and add null check operation- updated emitnamedintrinsiccall to include emitmembarrier parameter.- replaced intop_methodtable with intop_getmethodtable in emitnamedintrinsiccall- introduced intop_nullcheck operation in intops.def and implemented its handling in the interpreter- removed debug print statements from compilemethod- added tests* replace intop_getmethodtable opcode with intop_ldind_i* remove emitmembarrier parameter and related logic* use enclosingclassnames to retrieve the top level namespace
dotnet/runtime,ea4a7811b69a7f1adaecf4263b19492c6a6a9372,"Arm64 SVE: Add mask to nonfaulting loads (#117606)

Fixes #108234

SveLoadNonFaultingMaskedUnOpTest.template is a mixture of
SveLoadNonFaultingUnOpTest.template and
SveLoadVectorMaskedTest.template",2025-07-15 15:02:54+00:00,Alan Hayward,1,63e797eccb8dea362b622f1e07451f43416b12ab,"Fix passing class handle to RuntimeTypeHandle.GetRuntimeTypeFromHandle for synchronized methods (#117675)

After #107667, synchronized methods in collectible assemblies were passing an invalid handle as the class handle to `RuntimeTypeHandle.GetRuntimeTypeFromHandle` (calling `CORINFO_HELP_GETSYNCFROMCLASSHANDLE`).

- Fix the generated code to actually pass the method's class handle.
- Remove `getMethodSync` from JIT interface - it was only used in this one place where we actually need the class handle
- Add regression test",13,757,736,arm64 sve: add mask to nonfaulting loads (issue_ref)fixes issue_refsveloadnonfaultingmaskedunoptest.template is a mixture ofsveloadnonfaultingunoptest.template andsveloadvectormaskedtest.template
dotnet/runtime,6a1934208b83330c6b90ed76cb5c1fa3d1b0f3f4,"[EventPipe] End user_events session upon continuation_stream closure (#117435)

* [EventPipe][DiagnosticServer] Add poll interface to IpcStreams

* [EventPipe] Close user_events session upon continuation_stream closure

* Address Feedback

Revert moving IpcPollEvents to ep-ipc-pal-types header
Use IpcStream base type directly in sessions
Omit websocket ipc_stream_poll_func implementation
Change continuation stream poll timeout to infinite
Change returned PollEvent to none upon timeout

* Move IpcPollEvents back to ep-ipc-pal-types header

* Add relevant headers

ep-stream.h for ep_ipc_stream_writer_alloc that was transitively
included by ep-file.h
ep-ipc-stream.h for ep_ipc_stream_poll_vcall

* Address feedback

Remove prefix from IpcPollEvents enums and infinite timeout define
Expand connection closed detection to error case",2025-07-15 15:33:20+00:00,Mitchell Hwang,1,ac75c8d522c38126f1110f2e00d7a070cb42027e,"[EventPipe][UserEvents] Deduplicate EventPipeEvent Metadata emission (#117686)

* [EventPipe] Add int64_t atomic compare exchange

* [EventPipe][UserEvents] Deduplicate Event metadata emission

* Add user_events metadata event accepted caveat

* Address Feedback and Fix bytes written

Move metadata_written_mask bit flip to after writing the event
Fix bytes_written operator precedence bug",12,218,70,[eventpipe] end user_events session upon continuation_stream closure (issue_ref)* [eventpipe][diagnosticserver] add poll interface to ipcstreams* [eventpipe] close user_events session upon continuation_stream closure* address feedbackrevert moving ipcpollevents to ep-ipc-pal-types headeruse ipcstream base type directly in sessionsomit websocket ipc_stream_poll_func implementationchange continuation stream poll timeout to infinitechange returned pollevent to none upon timeout* move ipcpollevents back to ep-ipc-pal-types header* add relevant headersep-stream.h for ep_ipc_stream_writer_alloc that was transitivelyincluded by ep-file.hep-ipc-stream.h for ep_ipc_stream_poll_vcall* address feedbackremove prefix from ipcpollevents enums and infinite timeout defineexpand connection closed detection to error case
dotnet/runtime,516ec66697b00e12abc15284a12289dc0faadc34,Make JitOptimizeAwait not a release switch. (#117574),2025-07-15 15:41:47+00:00,Vladimir Sadov,0,,,2,5,1,make jitoptimizeawait not a release switch. (issue_ref)
dotnet/runtime,58121ac8714faa6f3406f38cce30d52b6078b0f9,"Avoid reporting incorrect thread context to Watson (#117522)

* Avoid reporting incorrect thread context to Watson

* Update src/coreclr/vm/excep.cpp

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-07-15 17:09:30+00:00,Tom McDonald,1,56cb0eb6d5e3e89f584c42b8547936461afdd076,"Correctly lock around iterating the AvailableParamTypes hashtable when adding fields/classes via ApplyMetadata (#118608)

This does not eliminate all possible race conditions here, if a type is in progress loading when the metadata is updated, then there is still a race, but this should narrow the possible races in this space. Additionally, this should address the debug asserts which have been hit in this space.

Fixes #115318",1,8,2,avoid reporting incorrect thread context to watson (issue_ref)* avoid reporting incorrect thread context to watson* update src/coreclr/vm/excep.cpp---------
dotnet/runtime,b81c923b273614e68193f4d3d68ac63a14aeda08,Prevent test from failing (#117657),2025-07-15 17:14:03+00:00,Larry Ewing,1,4b9767637c88a75894d9bbcb86b7a98e871943cc,"Fix issue with dynamic runtime binding in Microsoft.CSharp test (#117705)

Fix dynamic binding issue in Microsoft.CSharp tests by casting dynamic parameter to object

Co-authored-by: MichalStrehovsky <13110571+MichalStrehovsky@users.noreply.github.com>

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: akoeplinger <1376924+akoeplinger@users.noreply.github.com>
Co-authored-by: MichalStrehovsky <13110571+MichalStrehovsky@users.noreply.github.com>",2,8,0,prevent test from failing (issue_ref)
dotnet/runtime,b4fb38c29afb1d7a1838704d033dcc25c0187374,Removed building of musl artifacts from performance related pipelines as we no longer have alpine machines to run them for. (#117628),2025-07-15 18:30:23+00:00,Parker Bibus,0,,,3,2,16,removed building of musl artifacts from performance related pipelines as we no longer have alpine machines to run them for. (issue_ref)
dotnet/runtime,19a9b70c358d110a8079664062a98fdbbef4389c,"Interpreter P/Invoke support (#115393)

* Squashed, revised PInvoke implementation

Marshaling wrappers work so enable test for them

Separate call opcode for unmarshaled pinvokes

Cleanup

Do inlined pinvoke for CALL_PINVOKE opcode

Update pinvoke test for new behavior

* Repair merge damage

* Add InlinedCallFrame and remove special-casing for InterpreterFrame callers in NDirectImportWorker

* Switch from 'indirect helper tag' to 'direct helper tag' so tagged helpers are compatible with arm32 thumb
Checkpoint pinvoke changes

* Cleanup

* Fix musl ci build

* Address PR feedback
Encapsulate inlined callframe creation

* Remove macro",2025-07-15 19:35:22+00:00,Katelyn Gadd,1,a79dfff8ad5cb0acc2111b6070951862d3560fc5,"[interp] Some cleanups and fixes for CLR interpreter (#117610)

Remove GC.Collect, FailFast and System.Object.ctor intrinsics.
Remove use of tag bit for helpers because it's not portable.
Disable specific part of a test that is broken by removal of the object.ctor intrinsic.
Prevent newobj dvar from overlapping svars.",9,210,15,"interpreter p/invoke support (issue_ref)* squashed, revised pinvoke implementationmarshaling wrappers work so enable test for themseparate call opcode for unmarshaled pinvokescleanupdo inlined pinvoke for call_pinvoke opcodeupdate pinvoke test for new behavior* repair merge damage* add inlinedcallframe and remove special-casing for interpreterframe callers in ndirectimportworker* switch from 'indirect helper tag' to 'direct helper tag' so tagged helpers are compatible with arm32 thumbcheckpoint pinvoke changes* cleanup* fix musl ci build* address pr feedbackencapsulate inlined callframe creation* remove macro"
dotnet/runtime,7905f0e2bb5c06da4247b1d0ea2ee0536f348442,"adding GetPendingReJITID cDAC API (#117533)

Co-authored-by: Rachel Jarvi <racheljarvi@microsoft.com>",2025-07-15 20:44:53+00:00,Rachel,0,,,1,40,1,adding getpendingrejitid cdac api (issue_ref)
dotnet/runtime,2fcafaff15f5bd3fc7b88b3ad84fc97bb14ff16f,"GetAssemblyModuleList cDAC implementation (#117452)

* dac temp

* null check

* test

* incorporating restructuring and other changes

* formatting changes

* Update Loader.md

* adding proper check to debug assert

* restructuring to avoid unneeded work

* restructuring and other minor changes

* restructuring and removing null check

* updating docs

---------

Co-authored-by: Rachel Jarvi <racheljarvi@microsoft.com>",2025-07-15 22:45:11+00:00,Rachel,0,,,13,118,41,getassemblymodulelist cdac implementation (issue_ref)* dac temp* null check* test* incorporating restructuring and other changes* formatting changes* update loader.md* adding proper check to debug assert* restructuring to avoid unneeded work* restructuring and other minor changes* restructuring and removing null check* updating docs---------
dotnet/runtime,6d7ba3656fa078fb17e68b4e31dc9fd9ff9868da,SVE2: Correcting the naming of AddWidening intrinsics (#117508),2025-07-15 23:38:32+00:00,Jacob Crawley,1,8adea361bb50ae5ff0f10a1337aac465f5a65840,arm64: Fix Sve2 Subtract API (#117702),7,229,213,sve2: correcting the naming of addwidening intrinsics (issue_ref)
dotnet/runtime,b9fb863a41bbe05d6bcb14c5c88302619431e5bf,Convert CoreCLR classic debug logging to use the minipal mutex (#117689),2025-07-16 04:11:26+00:00,Jeremy Koritzinsky,0,,,1,12,13,convert coreclr classic debug logging to use the minipal mutex (issue_ref)
dotnet/runtime,412751698735269bac5607ca98a69c5d3bdb521f,"[Android] InvariantGlobalization support for CoreCLR Android builds (#117542)

* Propagate InvariantGlobalization

* Create InvariantGlobalization property

* Pass the InvariantGlobalization to apkBuilder

* Pass the InvariantGlobalization to envVariables

* Pass InvariantGlobalization to AndroidAppBuilderTask

* Remove Invariant.Tests.csproj exclusion",2025-07-16 07:38:11+00:00,David Nguyen,0,,,5,13,1,[android] invariantglobalization support for coreclr android builds (issue_ref)* propagate invariantglobalization* create invariantglobalization property* pass the invariantglobalization to apkbuilder* pass the invariantglobalization to envvariables* pass invariantglobalization to androidappbuildertask* remove invariant.tests.csproj exclusion
dotnet/runtime,39fc72dc943c98605a1d7774a6884ecd12f2618d,"Use python from package in mono AOT cross build as well on browser/wasm (#117626)

Follow-up to https://github.com/dotnet/runtime/pull/117513",2025-07-16 08:55:50+00:00,Alexander Köplinger,1,32861496f96c71d9bf2b739feae6df3aafba9591,"Fix mono ios build with `/p:KeepNativeSymbols=true` (#118525)

* [apple] Don't try to copy stripped debug info files if they are not around

If we build repo with `/p:KeepNativeSymbols` they are not created and build fails.

* Remove redundant Exists checks",2,19,14,use python from package in mono aot cross build as well on browser/wasm (issue_ref)follow-up to
dotnet/runtime,02b121403058b44507e61d7414f3c99586f261b3,Optimize Dictionary.FindValue for constant keys (no constant folding) (#117427),2025-07-16 10:50:32+00:00,Egor Bogatov,0,,,4,4,23,optimize dictionary.findvalue for constant keys (no constant folding) (issue_ref)
dotnet/runtime,b212ef01439d7dfd12b74cd7e66cc7192bef8043,"Correctly restore floating point context on x86 interop step-in scenarios (#117632)

* Correctly restore floating point context on x86 interop step-in scenarios

* Update DAC Hijack context assert for cross-plat

* Exclude XStateFeaturesMask in assert outside of amd64 and arm64",2025-07-16 12:58:12+00:00,Tom McDonald,0,,,4,20,8,correctly restore floating point context on x86 interop step-in scenarios (issue_ref)* correctly restore floating point context on x86 interop step-in scenarios* update dac hijack context assert for cross-plat* exclude xstatefeaturesmask in assert outside of amd64 and arm64
dotnet/runtime,91f8b1a897bbc57b8062be5a3122b980f45f36bb,Stop building System.Security.Cryptography.Native.OpenSsl on macOS,2025-07-16 13:08:02+00:00,Kevin Jones,1,dd263ab1697c36db32469197343da34852f3b6fe,"Client-side TLS 1.3 support on OSX (#117428)

* Native Interop Layer

* Native Layer Compilation fix for Mono + NativeAOT + templates

* First shape of new native + interop

* Newlines at the end of files

* Default constructor ownsHandle to true

* Delete couple of unsafe keyword in Interop

* Update src/native/libs/System.Net.Security.Native.Apple/pal_networkframework.m

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>

* Fix PlatformManifestFileEntry

* Review feedback

* Apply suggestions from code review

Co-authored-by: Stephen Toub <stoub@microsoft.com>

* Update src/libraries/Common/src/Interop/OSX/Interop.Network.Tls.cs

Co-authored-by: Radek Zikmund <32671551+rzikm@users.noreply.github.com>

* Review feedbacks

* Further review feedback

* Add new library name to nativeaot build target file

* Merge System.Net.Security.Native.Apple with System.Security.Cryptography.Native.Apple

* fixup! Merge System.Net.Security.Native.Apple with System.Security.Cryptography.Native.Apple

* Shared OSStatus

* Correctly release some handles

* Remove printf

* Add comments

* Fix build

* Copy of initial changes

* Fix build

* WIP

* WIP

* more WIP

* Minimal example is working

* Fix concurrent read/write calls

* ALPN fix

* Certificate validation

* Report remote alerts

* CipherSuitesPolicy support

* Fix IDNA

* Zero-bytes read support

* fixup! ALPN fix

* Attach correct cancellation token to exceptions

* Fix framer lifetime

* fixup! CipherSuitesPolicy support

* Cleanup some unwanted changes

* Some more cleanup

* Fix ALPN reading

* ClientCertificates + CertificateContext + CertSelectionDelegate implementation

* Correctly pass remote certificate + acceptableIssuers to selection callback

* Disable Ciphersuite tests for NW

* Fix formatting

* Fix some test scenarios

* Delete unused ResettableTaskSource

* Fix build

* Unify certificate validation code

* TARGET_OSX to TARGET_APPLE

* Small changes

* Fix build of other platforms

* Disable known edge-case for now

* Some test fixes

* Disable EventSource order test for NW

* Add TCS for completion on transportStream Write and propagate exceptions

* Propagate exception for handshake + write tcs from transport read task

* Missing write part of propagation exception for transport read task

* App read optimization

* fixup! App read optimization

* Fix hanging pending read after read cancellation

* Unify local cert selection

* Improve thisHandle lifetime management

* Introduce specific exception for NetworkFramework + properly propagate error messages and error domain

* Refactor NetworkFramework error handling to use enum for error domains

* Refactor error extraction in NetworkFramework to return CFStringRef for better memory management

* Enhance cancellation support in SafeDeleteNwContext by throwing on cancellation requests and linking tokens for graceful shutdowns

* Typo fix

* Switch to Network.framework tests on CI

* Fix memory leaks, introduce CancellationAction for ResettableValueTaskSource objects to avoid deadlock on disposal

* Reverting back running nw tests on ci, as some apis requires at least 12.3 version

* A bit cleanup

* Use more appropriate names in nw shim functions

* Centralized gchandle management in native code

* Fix correct cancellation token when throwing

* Fix hang, remove try-catches in completion callbacks

* Revert unwanted changes

* Fix comment

* Logging improvements

* Apply suggestion from @liveans

Co-authored-by: Ahmet Ibrahim Aksoy <aaksoy@microsoft.com>

* Update src/libraries/System.Net.Security/src/System/Net/Security/Pal.OSX/SafeDeleteNwContext.cs

Co-authored-by: Ahmet Ibrahim Aksoy <aaksoy@microsoft.com>

* Code review feecback

* Remove duplicate void* state argument in native functions

* Update src/native/libs/System.Security.Cryptography.Native.Apple/pal_networkframework.m

Co-authored-by: Adeel Mujahid <3840695+am11@users.noreply.github.com>

---------

Co-authored-by: Ahmet İbrahim Aksoy <aaksoy@microsoft.com>
Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>
Co-authored-by: Stephen Toub <stoub@microsoft.com>
Co-authored-by: Adeel Mujahid <3840695+am11@users.noreply.github.com>",9,36,49,stop building system.security.cryptography.native.openssl on macos
dotnet/runtime,755ddd7791923576bb07532fd3deddd8efccaf00,Disable android emulator tests in the runtime pipeline (#117703),2025-07-16 14:34:35+00:00,Milos Kotlar,0,,,6,14,14,disable android emulator tests in the runtime pipeline (issue_ref)
dotnet/runtime,c0d4efe731091b0e0ab85800d4dd4204cbda408a,"Carry ExtractMostSignificantBits through to LIR and add constant folding support (#117673)

* Carry ExtractMostSignificantBits through to LIR and add constant folding support

* Ensure 64-bit masks create 64-bit constants when folded

* Handle the fact that V512.EMSB always returns TYP_LONG

* Expose a GetRawBits and GetBitMask helper on simdmask_t to ensure we get valid data",2025-07-16 14:37:57+00:00,Tanner Gooding,0,,,9,590,243,carry extractmostsignificantbits through to lir and add constant folding support (issue_ref)* carry extractmostsignificantbits through to lir and add constant folding support* ensure 64-bit masks create 64-bit constants when folded* handle the fact that v512.emsb always returns typ_long* expose a getrawbits and getbitmask helper on simdmask_t to ensure we get valid data
dotnet/runtime,f1a3a0f02f2c4cab26ff9b5ebe59c5c05fa55dc4,"[clr-interp] Add support for Vector64 and Vector128 return/argument types in interpreter stubs (#117668)

* Add support for Vector64 and Vector128 return types in interpreter stubs

* Revert intrinsics changes

* Add FEATURE_SIMD condition",2025-07-16 14:42:36+00:00,Milos Kotlar,0,,,4,166,6,[clr-interp] add support for vector64 and vector128 return/argument types in interpreter stubs (issue_ref)* add support for vector64 and vector128 return types in interpreter stubs* revert intrinsics changes* add feature_simd condition
dotnet/runtime,f8b58d8b3623b4421d4ba19c995eb99684a47937,"[Android] Enable `System.Runtime.Loader` tests on CoreCLR Android (#117713)

* Run failing tests

* Disable failing tests",2025-07-16 14:45:53+00:00,Milos Kotlar,1,dda26dee12274410614ed6912010107263ad56bc,"Disable `System.IO.Pipelines.Tests` and `UnsafeAccessorsTests` tests on extra-platforms (#117812)

* Disable System.IO.Pipelines.Tests and UnsafeAccessorsTests tests

* Fix condition

* Update src/libraries/tests.proj

Co-authored-by: Alexander Köplinger <alex.koeplinger@outlook.com>

---------

Co-authored-by: Alexander Köplinger <alex.koeplinger@outlook.com>",3,8,8,[android] enable tests on coreclr android (issue_ref)* run failing tests* disable failing tests
dotnet/runtime,2de958d8acc7e027c4227452512de115b7294a07,Implement various SVE2 Multiply Instructions (#117660),2025-07-16 15:08:52+00:00,snickolls-arm,0,,,13,1606,263,implement various sve2 multiply instructions (issue_ref)
dotnet/runtime,d71c87f36c9037a7c4d2b93dd8420bb1ab1469cf,"Do not send DB_IPCE_LOAD_ASSEMBLY event (#117680)

* Do not send DB_IPCE_LOAD_ASSEMBLY event

* Update src/coreclr/debug/di/process.cpp

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-07-16 15:17:46+00:00,Thays Grazia,0,,,6,19,102,do not send db_ipce_load_assembly event (issue_ref)* do not send db_ipce_load_assembly event* update src/coreclr/debug/di/process.cpp
dotnet/runtime,63e797eccb8dea362b622f1e07451f43416b12ab,"Fix passing class handle to RuntimeTypeHandle.GetRuntimeTypeFromHandle for synchronized methods (#117675)

After #107667, synchronized methods in collectible assemblies were passing an invalid handle as the class handle to `RuntimeTypeHandle.GetRuntimeTypeFromHandle` (calling `CORINFO_HELP_GETSYNCFROMCLASSHANDLE`).

- Fix the generated code to actually pass the method's class handle.
- Remove `getMethodSync` from JIT interface - it was only used in this one place where we actually need the class handle
- Add regression test",2025-07-16 17:12:32+00:00,Elinor Fung,1,3fb34b20a51b78f4fb4a3dbf0f6396f461d105c8,"Fix a few runtime async stub issues (#117418)

- Allow byref parameters when creating stubs
- Find `MethodDesc`s in right `MethodTable` used for tokens when
  creating stubs. Particularly we were using
  `TaskAwaiter<__Canon>.GetResult` for some tokens where we should have
  used non-shared instantiations (like on `TaskAwaiter<string>`).",22,104,246,"fix passing class handle to runtimetypehandle.getruntimetypefromhandle for synchronized methods (issue_ref)after issue_ref, synchronized methods in collectible assemblies were passing an invalid handle as the class handle to (calling ).- fix the generated code to actually pass the method's class handle.- remove from jit interface - it was only used in this one place where we actually need the class handle- add regression test"
dotnet/runtime,666b061477cd15fcbaa0f1df0ff2db28ae0a01f0,Maintain DAC field offsets in EECodeGenManager (#117721),2025-07-16 17:20:20+00:00,Tom McDonald,0,,,1,0,2,maintain dac field offsets in eecodegenmanager (issue_ref)
dotnet/runtime,3d689551bc6b5f6d50258ba2030f5203461dc899,"JIT: Store unique switch successors in `BBswtDesc` (#117423)

* Rename `BBehfDesc` to `BBJumpTable`, and repurpose it for describing blocks with `N` successors. This type allows unique successor access, enumeration, and removal.
* Have `BBswtDesc` inherit from `BBJumpTable`. Through `BBswtDesc`'s updated API surface, we can enumerate unique successors and switch cases.
* Remove `Compiler`'s API surface for mapping switch blocks to their unique successors.

There are numerous points in the JIT where we want to iterate unique successors, but we tolerate iterating duplicates out of fear of needing to construct the switch successor map. We can now iterate unique successors at those sites without needing to precompute anything. I'll do that switchover in a follow-up PR.",2025-07-16 17:36:50+00:00,Aman Khalid,1,0bdce457021d237d9ca3cd92ee8b043a00919616,"JIT: Avoid creating impossible equality assertions (#118586)

Fix #113940",19,491,785,"jit: store unique switch successors in (issue_ref)* rename to , and repurpose it for describing blocks with successors. this type allows unique successor access, enumeration, and removal.* have inherit from . through 's updated api surface, we can enumerate unique successors and switch cases.* remove 's api surface for mapping switch blocks to their unique successors.there are numerous points in the jit where we want to iterate unique successors, but we tolerate iterating duplicates out of fear of needing to construct the switch successor map. we can now iterate unique successors at those sites without needing to precompute anything. i'll do that switchover in a follow-up pr."
dotnet/runtime,885879ec6b51ad14b1a1bad0ef1a14e1c258bdff,Move MethodContextReader to use the minipal mutex (#117685),2025-07-16 19:02:54+00:00,Jeremy Koritzinsky,0,,,2,9,9,move methodcontextreader to use the minipal mutex (issue_ref)
dotnet/runtime,dec0c3f0f9fea1d425e2b4e0fcc751a22ee92887,"Implement SVE2 Rounded Arithmetic Intrinsics (#117719)

Includes:
* AddRoundedHighNarrowingEven, AddRoundedHighNarrowingOdd
* FusedAddRoundedHalving
* SubtractRoundedHighNarrowingEven, SubtractRoundedHighNarrowingOdd",2025-07-16 21:18:10+00:00,snickolls-arm,0,,,7,572,2,"implement sve2 rounded arithmetic intrinsics (issue_ref)includes:* addroundedhighnarrowingeven, addroundedhighnarrowingodd* fusedaddroundedhalving* subtractroundedhighnarrowingeven, subtractroundedhighnarrowingodd"
dotnet/runtime,aa122ad24961479033ced034bf9fa8c1a72252b7,Support HashML-DSA on Windows,2025-07-16 21:38:20+00:00,Kevin Jones,0,,,15,378,125,support hashml-dsa on windows
dotnet/runtime,d4f8b8845b7bd03b307e6fdf0e4afa465a7d8b3d,"Drop usage of `.All` on `DefaultValueAttribute` (#117708)

This functionality of `DefaultValueAttribute` constructor is disabled by default and warns if it gets enabled. We shouldn't need to keep things on the type passed to the constructor.",2025-07-16 21:47:26+00:00,Michal Strehovský,1,98b587ce895026e3cebec9510e8d4e6eaa403151,"Adding the BigMul API to nint, nuint, Int128, and UInt128 (#117740)

* Adding the BigMul API to nint, nuint, Int128, and UInt128

* Remove a stray CLSCompliant attribute

* Fix 3 tests

* Fix the format length for the nint/nuint bigmul tests on 32-bit architectures",4,27,2,drop usage of on (issue_ref)this functionality of constructor is disabled by default and warns if it gets enabled. we shouldn't need to keep things on the type passed to the constructor.
dotnet/runtime,0a46acc3f88bcfcec14379cd29f56eba9c9575b3,"Forward CancellationToken in Task-based Socket.ConnectAsync (#116943)

Fixes #75889

Unlike other Task-based Socket operations, `ConnectAsync` does not forward the `CancelationToken` to the PAL, instead it creates a CTR that uses `CancelConnectAsync` which is implemented by simply disposing the socket. This can lead to a race between Connect completion and socket disposal resulting in an invalid socket state where a disposed or non-connected socket is returned from a seemingly succesful connect attempt.

I couldn't find a way to implement a deterministic test for the scenario in #75889, but according to my local testing, the issue is gone with the changes.",2025-07-16 22:06:12+00:00,Anton Firszov,1,5878338c8cdd5e3f299c4ef95797f9466cfb4464,Fix outdated comments on SocketAsyncEventArgs.Windows (#119628),6,38,54,"forward cancellationtoken in task-based socket.connectasync (issue_ref)fixes issue_refunlike other task-based socket operations, does not forward the to the pal, instead it creates a ctr that uses which is implemented by simply disposing the socket. this can lead to a race between connect completion and socket disposal resulting in an invalid socket state where a disposed or non-connected socket is returned from a seemingly succesful connect attempt.i couldn't find a way to implement a deterministic test for the scenario in issue_ref, but according to my local testing, the issue is gone with the changes."
dotnet/runtime,e8623e7b6713aebb265848ff6b55187cd3f25649,Make Pkcs12LoaderLimits.AllowDuplicateAttributes public,2025-07-17 00:07:30+00:00,Kevin Jones,0,,,4,22,6,make pkcs12loaderlimits.allowduplicateattributes public
dotnet/runtime,af05ae4672443e875e5b7768cb71bbbfaa351674,"Bump ML-KEM test vectors

Adopts the latest ACVP test vectors.",2025-07-17 00:11:14+00:00,Kevin Jones,0,,,1,181,61,bump ml-kem test vectorsadopts the latest acvp test vectors.
dotnet/runtime,3f0d8d9fcb6dfb793b5ee7060b7df61b07d63e44,Fix BuildChainCustomTrustStore test,2025-07-17 04:36:40+00:00,Kevin Jones,1,f53ffe6941373bc35afc2af3ec0251c8937c972e,"Fix X.509 tests on macOS 26 beta 6

Apple made a few changes to their trust stores in macOS 26 beta 6.

The first, BuildChainForCertificateSignedWithDisallowedKey is they no longer have a list of disallowed keys. Prior to macOS 26, Apple kept a list of blocked keys at /System/Library/Security/Certificates.bundle/Contents/Resources/Blocked.plist. These values in the plist were SHA-1 subjectKeyIdentifiers. This list is no longer present on macOS 26. This seems largely sensible - all of those certificates that had those subject key identifiers are distrusted by other means, such as expiration or simply no longer being present in the root store.

The second, SystemTrustCertificateWithCustomRootTrust, is failing because Apple yanked an expired root from their trust store. So it's going in to the same logical path as OpenSSL is now.",1,10,1,fix buildchaincustomtruststore test
dotnet/runtime,f858ecf2a0109fff21911b546ee53525873ae9cd,"Assert pointer relocs are aligned (#113069)

This is a prerequisite for disabling data dehydration on Windows by default. Straddling pointers are not a big deal with dehydration, but straddling a page boundary with a reloc on Windows is a (perf) problem.",2025-07-17 05:13:28+00:00,Michal Strehovský,0,,,2,21,0,"assert pointer relocs are aligned (issue_ref)this is a prerequisite for disabling data dehydration on windows by default. straddling pointers are not a big deal with dehydration, but straddling a page boundary with a reloc on windows is a (perf) problem."
dotnet/runtime,8415c8cc629782af76ae6de397fac469db52daba,"Disallow inline arrays with explicit size (#117578)

* disallow inline arrays with explicit size

* change for mono

* change for the Native AOT

* ignore size for auto layout

* use Assert.True

* check in Auto as well, including generic structs",2025-07-17 08:04:37+00:00,Vladimir Sadov,0,,,12,104,0,"disallow inline arrays with explicit size (issue_ref)* disallow inline arrays with explicit size* change for mono* change for the native aot* ignore size for auto layout* use assert.true* check in auto as well, including generic structs"
dotnet/runtime,715391e3863f18d49e77acd96f65ed2186111ed1,"[Android] Reenable SocketsHttpHandlerTest.LargeHeaders_TrickledOverTime_ProcessedEfficiently on 64-bit Android (#117710)

* Enable test LargeHeaders_TrickledOverTime_ProcessedEfficiently on 64-bit Android

* Update src/libraries/System.Net.Http/tests/FunctionalTests/SocketsHttpHandlerTest.cs

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>

* Update src/libraries/System.Net.Http/tests/FunctionalTests/SocketsHttpHandlerTest.cs

Co-authored-by: Alexander Köplinger <alex.koeplinger@outlook.com>

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>
Co-authored-by: Alexander Köplinger <alex.koeplinger@outlook.com>",2025-07-17 08:20:50+00:00,Šimon Rozsíval,0,,,1,7,2,[android] reenable socketshttphandlertest.largeheaders_trickledovertime_processedefficiently on 64-bit android (issue_ref)* enable test largeheaders_trickledovertime_processedefficiently on 64-bit android* update src/libraries/system.net.http/tests/functionaltests/socketshttphandlertest.cs
dotnet/runtime,23323e91728ba356ea8ed029631a63a55d90907a,"JIT: Preparatory refactoring to support multiple defs per single node (#117662)

Replace `GenTree::DefinesLocal` by a `GenTree::VisitLocalDefs` to prepare for
being able to allow a single node to have multiple definitions. Update uses to
use the new function.

This will be used to allow async calls to define a new value that represents
whether the call suspended or not. This is necessary because runtime async calls
should save and restore `Thread.CurrentThread._synchronizationContext`, but the
restore should only happen when the call finishes synchronously (with an
exception or not). We need a proper representation in the JIT IR of these
conditions to properly be able to model these conditions in the face of
inlining.

In a future change the expectation is to add a `LCL_ADDR` node as a new
well-known argument to async calls that will be a definition that works similar
to ret buffers. The async transformation will later expand the definition out in
the resumption path.",2025-07-17 11:57:01+00:00,Jakob Botsch Nielsen,0,,,14,351,294,"jit: preparatory refactoring to support multiple defs per single node (issue_ref)replace by a to prepare forbeing able to allow a single node to have multiple definitions. update uses touse the new function.this will be used to allow async calls to define a new value that representswhether the call suspended or not. this is necessary because runtime async callsshould save and restore , but therestore should only happen when the call finishes synchronously (with anexception or not). we need a proper representation in the jit ir of theseconditions to properly be able to model these conditions in the face ofinlining.in a future change the expectation is to add a node as a newwell-known argument to async calls that will be a definition that works similarto ret buffers. the async transformation will later expand the definition out inthe resumption path."
dotnet/runtime,b6d294dc95b79ce664c5f209b58b72492e40b104,"JIT: Unify block successor iteration logic (#117743)

Follow-up to #117423.
* Collapse `BBSuccList` and `BBSuccEdgeList` into one templatized type, where the template specifies the iterator kind
* Remove `BasicBlock::NumSucc(Compiler*)` et al
* Have `BasicBlock::NumSucc()` et al deal only with unique successors, now that they're always available
  * For the occasional case where we have a switch block, and we want to iterate its cases with duplicates, we don't rely on the general successor iteration pattern, anyway
* (unrelated) Remove `BasicBlock::bbFallsThrough`",2025-07-17 14:38:28+00:00,Aman Khalid,0,,,14,82,436,"jit: unify block successor iteration logic (issue_ref)follow-up to issue_ref.* collapse and into one templatized type, where the template specifies the iterator kind* remove et al* have et al deal only with unique successors, now that they're always available * for the occasional case where we have a switch block, and we want to iterate its cases with duplicates, we don't rely on the general successor iteration pattern, anyway* (unrelated) remove"
dotnet/runtime,dd263ab1697c36db32469197343da34852f3b6fe,"Client-side TLS 1.3 support on OSX (#117428)

* Native Interop Layer

* Native Layer Compilation fix for Mono + NativeAOT + templates

* First shape of new native + interop

* Newlines at the end of files

* Default constructor ownsHandle to true

* Delete couple of unsafe keyword in Interop

* Update src/native/libs/System.Net.Security.Native.Apple/pal_networkframework.m

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>

* Fix PlatformManifestFileEntry

* Review feedback

* Apply suggestions from code review

Co-authored-by: Stephen Toub <stoub@microsoft.com>

* Update src/libraries/Common/src/Interop/OSX/Interop.Network.Tls.cs

Co-authored-by: Radek Zikmund <32671551+rzikm@users.noreply.github.com>

* Review feedbacks

* Further review feedback

* Add new library name to nativeaot build target file

* Merge System.Net.Security.Native.Apple with System.Security.Cryptography.Native.Apple

* fixup! Merge System.Net.Security.Native.Apple with System.Security.Cryptography.Native.Apple

* Shared OSStatus

* Correctly release some handles

* Remove printf

* Add comments

* Fix build

* Copy of initial changes

* Fix build

* WIP

* WIP

* more WIP

* Minimal example is working

* Fix concurrent read/write calls

* ALPN fix

* Certificate validation

* Report remote alerts

* CipherSuitesPolicy support

* Fix IDNA

* Zero-bytes read support

* fixup! ALPN fix

* Attach correct cancellation token to exceptions

* Fix framer lifetime

* fixup! CipherSuitesPolicy support

* Cleanup some unwanted changes

* Some more cleanup

* Fix ALPN reading

* ClientCertificates + CertificateContext + CertSelectionDelegate implementation

* Correctly pass remote certificate + acceptableIssuers to selection callback

* Disable Ciphersuite tests for NW

* Fix formatting

* Fix some test scenarios

* Delete unused ResettableTaskSource

* Fix build

* Unify certificate validation code

* TARGET_OSX to TARGET_APPLE

* Small changes

* Fix build of other platforms

* Disable known edge-case for now

* Some test fixes

* Disable EventSource order test for NW

* Add TCS for completion on transportStream Write and propagate exceptions

* Propagate exception for handshake + write tcs from transport read task

* Missing write part of propagation exception for transport read task

* App read optimization

* fixup! App read optimization

* Fix hanging pending read after read cancellation

* Unify local cert selection

* Improve thisHandle lifetime management

* Introduce specific exception for NetworkFramework + properly propagate error messages and error domain

* Refactor NetworkFramework error handling to use enum for error domains

* Refactor error extraction in NetworkFramework to return CFStringRef for better memory management

* Enhance cancellation support in SafeDeleteNwContext by throwing on cancellation requests and linking tokens for graceful shutdowns

* Typo fix

* Switch to Network.framework tests on CI

* Fix memory leaks, introduce CancellationAction for ResettableValueTaskSource objects to avoid deadlock on disposal

* Reverting back running nw tests on ci, as some apis requires at least 12.3 version

* A bit cleanup

* Use more appropriate names in nw shim functions

* Centralized gchandle management in native code

* Fix correct cancellation token when throwing

* Fix hang, remove try-catches in completion callbacks

* Revert unwanted changes

* Fix comment

* Logging improvements

* Apply suggestion from @liveans

Co-authored-by: Ahmet Ibrahim Aksoy <aaksoy@microsoft.com>

* Update src/libraries/System.Net.Security/src/System/Net/Security/Pal.OSX/SafeDeleteNwContext.cs

Co-authored-by: Ahmet Ibrahim Aksoy <aaksoy@microsoft.com>

* Code review feecback

* Remove duplicate void* state argument in native functions

* Update src/native/libs/System.Security.Cryptography.Native.Apple/pal_networkframework.m

Co-authored-by: Adeel Mujahid <3840695+am11@users.noreply.github.com>

---------

Co-authored-by: Ahmet İbrahim Aksoy <aaksoy@microsoft.com>
Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>
Co-authored-by: Stephen Toub <stoub@microsoft.com>
Co-authored-by: Adeel Mujahid <3840695+am11@users.noreply.github.com>",2025-07-17 15:33:17+00:00,Radek Zikmund,1,627217b741b0893eaca7c344db1a8318586e7156,[Android][Testing] Fix detection of supported TLS versions on Android (#119097),35,2082,62,client-side tls 1.3 support on osx (issue_ref)* native interop layer* native layer compilation fix for mono + nativeaot + templates* first shape of new native + interop* newlines at the end of files* default constructor ownshandle to true* delete couple of unsafe keyword in interop* update src/native/libs/system.net.security.native.apple/pal_networkframework.m
dotnet/runtime,43d7609b7028faac5f17bbd5de8cf9efa200121f,[browser] Migrate WebAssemblyHotReloadCapabilities from Blazor to WasmSDK (#117747),2025-07-17 15:39:39+00:00,Marek Fišera,0,,,1,11,7,[browser] migrate webassemblyhotreloadcapabilities from blazor to wasmsdk (issue_ref)
dotnet/runtime,33bc25d36b2ccf8462aaee5baaa7d0b4aab6b0eb,"Adding GetTLSIndex cDAC implementation (#117587)

* adding GetTLSIndex cDAC implementation",2025-07-17 15:59:34+00:00,Rachel,0,,,7,41,4,adding gettlsindex cdac implementation (issue_ref)* adding gettlsindex cdac implementation
dotnet/runtime,3e5f80e311e639aa605d01bb6f3b27fb66be3101,Remove specific exception (#117756),2025-07-17 16:36:34+00:00,Marie Píchová,0,,,4,4,24,remove specific exception (issue_ref)
dotnet/runtime,cc564efd9f29ca81b9c6909010fbf881887a0921,"Remove Uri length limits (#117287)

* Remove Uri length limits

* Update uri test

* Add HTTP test

* Lower uri length for browser http test

* Rename enum value name

---------

Co-authored-by: Miha Zupan <mizupan@microsoft.com>",2025-07-17 16:58:27+00:00,Miha Zupan,1,4f82fe7a0eca5efba3bb87425b42ecaa3e9e9516,"[HTTP] H/3 fix test closing server connection prematurely (#117458)

* Add synchronization into the test

* Feedback",13,344,269,remove uri length limits (issue_ref)* remove uri length limits* update uri test* add http test* lower uri length for browser http test* rename enum value name---------
dotnet/runtime,abcf594690c7015398714262d42fb16c24d0346c,Change Key on MLDsaCng to GetKey method,2025-07-17 17:05:56+00:00,Kevin Jones,1,6c254b0f7570ab23856d5a8145cfc6e011d61766,Fix ML-DSA PKCS8 copying bug (#117847),6,49,25,change key on mldsacng to getkey method
dotnet/runtime,863e8673ea3f31ded30d88bc58c5756a43d6830f,"Skip optimization in getHelperFtn if NativeCodeVersion is null (#117765)

* add null check",2025-07-17 18:45:53+00:00,Max Charlamb,0,,,1,3,1,skip optimization in gethelperftn if nativecodeversion is null (issue_ref)* add null check
dotnet/runtime,3c30f61e8a20984b96629cfcea73a6416a60309a,"Delete WellKnownTypeExtensions.cs (#117770)

Dead code.",2025-07-17 19:55:25+00:00,Michal Strehovský,0,,,2,0,56,delete wellknowntypeextensions.cs (issue_ref)dead code.
dotnet/runtime,af5972ec48da98571e5a72d4cb2ce4b94368836f,"Disable data dehydration on Windows by default (#117751)

Resolves #112927.

This improves working set and startup. There's no such impact on non-Windows so keeping it on. Still enabling when optimizing for size.",2025-07-17 20:18:12+00:00,Michal Strehovský,1,0621e649bd084cb0dfd1f2e627538e7d9aa9e211,"Fold generic method bodies by default (#117411)

Fixes #103951.

Same method with different genericness are not distinguishable in the stack traces. They are still distinguishable in the debugger, but it might be acceptable, especially since we have an opt out (undocumented for now).",1,1,1,disable data dehydration on windows by default (issue_ref)resolves issue_ref.this improves working set and startup. there's no such impact on non-windows so keeping it on. still enabling when optimizing for size.
dotnet/runtime,7cb94d12d21791f08fe069d845014beb6706842c,Default Http3Support to false for PublishTrimmed (#117655),2025-07-17 20:19:53+00:00,Michal Strehovský,0,,,8,22,20,default http3support to false for publishtrimmed (issue_ref)
dotnet/runtime,64bc826fa42eb6cd4ff3ead658262bdf938f2f8f,"Drop usage of `.All` in Microsoft.Extensions (#117707)

The existing usage is a leftover from when we didn't have the binding source generation and the guidance was to suppress warning and preserve everything manually. We had a similar thing for S.T.Json in the past that we also deleted/dropped in favor of the source generation.

All the updated places are already marked RUC.",2025-07-17 22:31:12+00:00,Michal Strehovský,1,62b440f706fe7538e00e05dc347d7013de10190a,"Fix binding IEnumerable<T> with empty array configuration (#121249)

Fixes #121193

The change is fixing IEnumerable<T> type binding to an empty array
configuration. The change also ensures the source generator will behave
exactly as the runtime binder.",16,327,44,drop usage of in microsoft.extensions (issue_ref)the existing usage is a leftover from when we didn't have the binding source generation and the guidance was to suppress warning and preserve everything manually. we had a similar thing for s.t.json in the past that we also deleted/dropped in favor of the source generation.all the updated places are already marked ruc.
dotnet/runtime,761d85e7df3ed92b037322a7090032a7cbf42902,Improve gtDispConst for CNS_STR (#117350),2025-07-17 22:31:57+00:00,Egor Bogatov,1,2fe045718332eb006a44bd08aae9f577195789d6,"JIT: Consider conditionally executed loop statements for hoisting (#117829)

Fixes the roughly 10x regression in #116486. This quirks loop hoisting to iterate all loop blocks, and consider hoisting expensive statements even if they don't execute every iteration. The `(IND_COST_EX * 16)` cutoff was chosen to minimize churn, while still solving the above regression.",4,52,20,improve gtdispconst for cns_str (issue_ref)
dotnet/runtime,bd157217d70add5cafc7794b6b1d99d2d2ad753d,Ignore always-true relops in optRelopTryInferWithOneEqualOperand (#117749),2025-07-17 22:32:49+00:00,Egor Bogatov,0,,,3,58,0,ignore always-true relops in optreloptryinferwithoneequaloperand (issue_ref)
dotnet/runtime,6bb0c0c2abf9ca585a693d1580f2338b7158a3c1,Update Task.cs to return directly for one task from Task.WhenAll (#117715),2025-07-18 01:56:31+00:00,Leon,1,745d23058d8a9466af46b5a71470185854dcf0dd,"Fix null dereference in logging in Task (#119563)

If Task.Start and Task.Wait are used concurrently, it's possible for Wait to execute the task as part of the inlining logic, causing the task's completion logic to null out its m_action during the call to Start. This isn't generally a functional issue, as synchronization ensures it's only ever invoked once, however EventSource-based tracing code may try to extract the method name from the delegate, and it can end up hitting an ArgumentNullException due to the race causing the delegate to be null.",1,19,2,update task.cs to return directly for one task from task.whenall (issue_ref)
dotnet/runtime,901395a1cb00ea01aa264f8f71cf14de271034e0,"Properly dispose intermediate certificates in SslStream (#117667)

* Dispose intermediate certs from internally created SslStreamCertificateContext

* Dispose intermediates received over the wire

* Release specific platform resources on linux as well

* Fix build

* Dispose ChainElement certificates in SslStreamCertificateContext.Windows build.

* Assert in tests that certificates are not disposed

* Fix Duplicate

* Check against ExtraStore and CustomTrastStore disposal

* Fix crash",2025-07-18 05:53:52+00:00,Radek Zikmund,1,77ed0f63ba8ef701e35a4eb88b4d8c393548bbe1,"Fix misleading order of EventSource log and AcquireClientCredentials call (#119262)

* Fix misleading order of EventSource log and AcquireClientCredentials call

Discovered while investigating #119259. `AcquireClientCredentials` produces other events as well, so the order in the log is misleading and makes investigations harder.

* Update src/libraries/System.Net.Security/src/System/Net/Security/SslStream.Protocol.cs",7,126,30,properly dispose intermediate certificates in sslstream (issue_ref)* dispose intermediate certs from internally created sslstreamcertificatecontext* dispose intermediates received over the wire* release specific platform resources on linux as well* fix build* dispose chainelement certificates in sslstreamcertificatecontext.windows build.* assert in tests that certificates are not disposed* fix duplicate* check against extrastore and customtraststore disposal* fix crash
dotnet/runtime,f37ff8aef485c7827f1e9f4db898acc3436f9a1a,"Make it possible to order methods by specifying symbolic names (#117537)

Text file with an ordered list of symbol names is much easier to emit based on sampling than MIBC (that requires methods in IL terms). Methods that are listed are generated in the specified order. Methods that are not listed are sorted by the compiler. Things that are listed but don't exist are silently skipped.",2025-07-18 05:56:52+00:00,Michal Strehovský,1,0d803c3dd45e91163f62f73e8e82f82e78864eb3,"Use compiler-lowered DAM when trimming (#117624)

This uses compiler-lowered DAM for trimming compiler-generated code,
and adds test infrastructure and coverage for
DynamicallyAccessedMembers that is lowered by us for the compiler.

We also want to use the compiler-lowered attributes for generated
state machines, when trimming a .NET10+ assembly (leaving the old
heuristics for .NET9 and below, to avoid breaking trim analysis for
existing assemblies). However, the tests uncovered an issue with the
Roslyn implementation:
https://github.com/dotnet/roslyn/issues/79333. Until that is fixed, we
don't rely on the lowered attribute for mapping type parameters by
default (the new behavior is opt-in under a new flag). Once we get a
fix we can remove this.

The old heuristics are still run for all TFMs simply for coverage, but
we don't use the result.

This adds test infrastructure to let us test against a polyfilled DAM
with CompilerLoweringPreserve (since we don't run ILLink/ILC tests
against a live corelib).

The existing ILLink tests (including those shared with ILC trimming
tests) are now built with TargetFrameworkAttribute marking the
assembly as targeting .NET 10. The compiler-generated code tests have
been duplicated for .NET 9 and .NET 10 to test both the old and new
behaviors.

Also fixes a test infrastructure issue where in a ""copy"" assembly, the
DAM and CompilerLoweringPreserve types that are compiled in are kept,
but the test infrastructure was filtering these out of the
""linkedMembers"", leading to validation errors.",10,105,6,make it possible to order methods by specifying symbolic names (issue_ref)text file with an ordered list of symbol names is much easier to emit based on sampling than mibc (that requires methods in il terms). methods that are listed are generated in the specified order. methods that are not listed are sorted by the compiler. things that are listed but don't exist are silently skipped.
dotnet/runtime,1d6452aedc5a2c74883916c8efc548a7cb51e902,Clear contained flag from AND->NOT transformation (#117801),2025-07-18 06:39:03+00:00,Egor Bogatov,0,,,3,36,0,clear contained flag from and->not transformation (issue_ref)
dotnet/runtime,0621e649bd084cb0dfd1f2e627538e7d9aa9e211,"Fold generic method bodies by default (#117411)

Fixes #103951.

Same method with different genericness are not distinguishable in the stack traces. They are still distinguishable in the debugger, but it might be acceptable, especially since we have an opt out (undocumented for now).",2025-07-18 08:21:30+00:00,Michal Strehovský,1,5cb2a0515e499a5ef2196398b57b30ac6d8f2f91,"Use fast hashing helpers for types with trailing padding (#118986)

This is same as #111620 but with an extra thing: enable unconditional method body folding on `__GetFieldHelper` overrides (both the simplified ones that just return a negative number and normal ones).

Before this PR we considered valuetypes as byte-hashable/comparable only if the valuetype didn't have any trailing padding.

This fixes things up so that we can consider types with trailing padding byte-hashable/comparable if the other requirements still hold (such as no double/float fields, no GC references, etc.) and there is a trailing padding. In this case, we remember the number of bytes that we should be looking at and ignore the rest.

Since this doesn't seem to provide meaningful size savings according to rt-sz, this is a throughput improvement, not a size improvement.",7,57,15,"fold generic method bodies by default (issue_ref)fixes issue_ref.same method with different genericness are not distinguishable in the stack traces. they are still distinguishable in the debugger, but it might be acceptable, especially since we have an opt out (undocumented for now)."
dotnet/runtime,9c3a1bcdffa60376cc758c3a7d7af11f4b1d82b2,"Report folded method bodies in the MSTAT file (#117459)

So that we have this for statistics or visualizations when needed.",2025-07-18 10:25:23+00:00,Michal Strehovský,0,,,7,41,2,report folded method bodies in the mstat file (issue_ref)so that we have this for statistics or visualizations when needed.
dotnet/runtime,c2a10452cad4f532c09091b283fa67e91fd10bd4,Use SetCurrentStackTrace for not thrown exceptions (#117802),2025-07-18 11:26:00+00:00,Marie Píchová,1,8dff353a05cde70050cbd162d75c9744394b21f6,"Fix cancellation token handling in LimitArrayPoolWriteStream.WriteAsync methods (#121836)

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: MihaZupan <25307628+MihaZupan@users.noreply.github.com>
Co-authored-by: Miha Zupan <mihazupan.zupan1@gmail.com>
Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",9,35,30,use setcurrentstacktrace for not thrown exceptions (issue_ref)
dotnet/runtime,af872f01ee00528a0f8a5c02b05e6bef09f3111b,"Report unhandled async exceptions (#117799)

Async exceptions like the ThreadInterruptedException are explicitly
prevented from logging unhandled exception details to console.

This change removes this special handling and lets them be reported as
any other unhandled exception.

Close #107594",2025-07-18 11:29:57+00:00,Jan Vorlicek,1,302a563c54900fd4f8f2868af321e81da3ab6727,"Fix unhandled exception test for interpreter (#121397)

The test was accepting only 0xc0000005 as an exit code for
NullReferenceException. But in the interpreter case, the exception is
thrown using COMPlusThrow(kNullReferenceException) and gets the error
code of regular managed exception, the 0xE0434352.

This change updates the test to accept that one too and adds
verification that the exception message contains the
System.NullReferenceException to make sure the tested app didn't exit
due to some other exception.

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",4,21,24,report unhandled async exceptions (issue_ref)async exceptions like the threadinterruptedexception are explicitlyprevented from logging unhandled exception details to console.this change removes this special handling and lets them be reported asany other unhandled exception.close issue_ref
dotnet/runtime,e4d2cd0f37fa97e278ae3b2624ef1a09f073720c,"[main] Source code updates from dotnet/dotnet (#117590)

* Update dependencies from https://github.com/dotnet/dotnet build 275039
Updated Dependencies:
System.CommandLine (Version 2.0.0-beta7.25362.103 -> 2.0.0-beta7.25363.101)
Microsoft.DotNet.Cecil (Version 0.11.5-alpha.25362.103 -> 0.11.5-alpha.25363.101)
Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport, Microsoft.DotNet.ApiCompat.Task (Version 10.0.100-preview.7.25362.103 -> 10.0.100-preview.7.25363.101)
Microsoft.DotNet.Arcade.Sdk, Microsoft.DotNet.XliffTasks, Microsoft.DotNet.Helix.Sdk, Microsoft.DotNet.GenAPI, Microsoft.DotNet.GenFacades, Microsoft.DotNet.XUnitExtensions, Microsoft.DotNet.Build.Tasks.Archives, Microsoft.DotNet.Build.Tasks.Packaging, Microsoft.DotNet.Build.Tasks.Installers, Microsoft.DotNet.Build.Tasks.Templating, Microsoft.DotNet.Build.Tasks.Workloads, Microsoft.DotNet.CodeAnalysis, Microsoft.DotNet.Build.Tasks.TargetFramework, Microsoft.DotNet.RemoteExecutor, Microsoft.DotNet.Build.Tasks.Feed, Microsoft.DotNet.SharedFramework.Sdk, Microsoft.DotNet.PackageTesting (Version 10.0.0-beta.25362.103 -> 10.0.0-beta.25363.101)
Microsoft.DotNet.XUnitAssert, Microsoft.DotNet.XUnitConsoleRunner (Version 2.9.3-beta.25362.103 -> 2.9.3-beta.25363.101)
Microsoft.NETCore.App.Ref, runtime.native.System.IO.Ports, Microsoft.NETCore.ILAsm, Microsoft.NET.Sdk.IL, System.Text.Json, System.Reflection.Metadata, System.Reflection.MetadataLoadContext (Version 10.0.0-preview.7.25362.103 -> 10.0.0-preview.7.25363.101)
Microsoft.Net.Compilers.Toolset, Microsoft.CodeAnalysis, Microsoft.CodeAnalysis.CSharp, Microsoft.CodeAnalysis.Analyzers (Version 5.0.0-1.25362.103 -> 5.0.0-1.25363.101)
Microsoft.CodeAnalysis.NetAnalyzers (Version 10.0.0-preview.25362.103 -> 10.0.0-preview.25363.101)

* Update dependencies from https://github.com/dotnet/dotnet build 275143
Updated Dependencies:
System.CommandLine (Version 2.0.0-beta7.25363.101 -> 2.0.0-beta7.25364.102)
Microsoft.DotNet.Cecil (Version 0.11.5-alpha.25363.101 -> 0.11.5-alpha.25364.102)
Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport, Microsoft.DotNet.ApiCompat.Task (Version 10.0.100-preview.7.25363.101 -> 10.0.100-preview.7.25364.102)
Microsoft.DotNet.Arcade.Sdk, Microsoft.DotNet.XliffTasks, Microsoft.DotNet.Helix.Sdk, Microsoft.DotNet.GenAPI, Microsoft.DotNet.GenFacades, Microsoft.DotNet.XUnitExtensions, Microsoft.DotNet.Build.Tasks.Archives, Microsoft.DotNet.Build.Tasks.Packaging, Microsoft.DotNet.Build.Tasks.Installers, Microsoft.DotNet.Build.Tasks.Templating, Microsoft.DotNet.Build.Tasks.Workloads, Microsoft.DotNet.CodeAnalysis, Microsoft.DotNet.Build.Tasks.TargetFramework, Microsoft.DotNet.RemoteExecutor, Microsoft.DotNet.Build.Tasks.Feed, Microsoft.DotNet.SharedFramework.Sdk, Microsoft.DotNet.PackageTesting (Version 10.0.0-beta.25363.101 -> 10.0.0-beta.25364.102)
Microsoft.DotNet.XUnitAssert, Microsoft.DotNet.XUnitConsoleRunner (Version 2.9.3-beta.25363.101 -> 2.9.3-beta.25364.102)
Microsoft.NETCore.App.Ref, runtime.native.System.IO.Ports, Microsoft.NETCore.ILAsm, Microsoft.NET.Sdk.IL, System.Text.Json, System.Reflection.Metadata, System.Reflection.MetadataLoadContext (Version 10.0.0-preview.7.25363.101 -> 10.0.0-preview.7.25364.102)
Microsoft.Net.Compilers.Toolset, Microsoft.CodeAnalysis, Microsoft.CodeAnalysis.CSharp, Microsoft.CodeAnalysis.Analyzers (Version 5.0.0-1.25363.101 -> 5.0.0-1.25364.102)
Microsoft.CodeAnalysis.NetAnalyzers (Version 10.0.0-preview.25363.101 -> 10.0.0-preview.25364.102)

* Update dependencies from https://github.com/dotnet/dotnet build 275313
Updated Dependencies:
System.CommandLine (Version 2.0.0-beta7.25364.102 -> 2.0.0-beta7.25365.101)
Microsoft.DotNet.Cecil (Version 0.11.5-alpha.25364.102 -> 0.11.5-alpha.25365.101)
Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport, Microsoft.DotNet.ApiCompat.Task (Version 10.0.100-preview.7.25364.102 -> 10.0.100-preview.7.25365.101)
Microsoft.DotNet.Arcade.Sdk, Microsoft.DotNet.XliffTasks, Microsoft.DotNet.Helix.Sdk, Microsoft.DotNet.GenAPI, Microsoft.DotNet.GenFacades, Microsoft.DotNet.XUnitExtensions, Microsoft.DotNet.Build.Tasks.Archives, Microsoft.DotNet.Build.Tasks.Packaging, Microsoft.DotNet.Build.Tasks.Installers, Microsoft.DotNet.Build.Tasks.Templating, Microsoft.DotNet.Build.Tasks.Workloads, Microsoft.DotNet.CodeAnalysis, Microsoft.DotNet.Build.Tasks.TargetFramework, Microsoft.DotNet.RemoteExecutor, Microsoft.DotNet.Build.Tasks.Feed, Microsoft.DotNet.SharedFramework.Sdk, Microsoft.DotNet.PackageTesting (Version 10.0.0-beta.25364.102 -> 10.0.0-beta.25365.101)
Microsoft.DotNet.XUnitAssert, Microsoft.DotNet.XUnitConsoleRunner (Version 2.9.3-beta.25364.102 -> 2.9.3-beta.25365.101)
Microsoft.NETCore.App.Ref, runtime.native.System.IO.Ports, Microsoft.NETCore.ILAsm, Microsoft.NET.Sdk.IL, System.Text.Json, System.Reflection.Metadata, System.Reflection.MetadataLoadContext (Version 10.0.0-preview.7.25364.102 -> 10.0.0-preview.7.25365.101)
Microsoft.Net.Compilers.Toolset, Microsoft.CodeAnalysis, Microsoft.CodeAnalysis.CSharp, Microsoft.CodeAnalysis.Analyzers (Version 5.0.0-1.25364.102 -> 5.0.0-1.25365.101)
Microsoft.CodeAnalysis.NetAnalyzers (Version 10.0.0-preview.25364.102 -> 10.0.0-preview.25365.101)

* Update dependencies from https://github.com/dotnet/dotnet build 275513
Updated Dependencies:
System.CommandLine (Version 2.0.0-beta7.25365.101 -> 2.0.0-beta7.25366.103)
Microsoft.DotNet.Cecil (Version 0.11.5-alpha.25365.101 -> 0.11.5-alpha.25366.103)
Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport, Microsoft.DotNet.ApiCompat.Task (Version 10.0.100-preview.7.25365.101 -> 10.0.100-preview.7.25366.103)
Microsoft.DotNet.Arcade.Sdk, Microsoft.DotNet.XliffTasks, Microsoft.DotNet.Helix.Sdk, Microsoft.DotNet.GenAPI, Microsoft.DotNet.GenFacades, Microsoft.DotNet.XUnitExtensions, Microsoft.DotNet.Build.Tasks.Archives, Microsoft.DotNet.Build.Tasks.Packaging, Microsoft.DotNet.Build.Tasks.Installers, Microsoft.DotNet.Build.Tasks.Templating, Microsoft.DotNet.Build.Tasks.Workloads, Microsoft.DotNet.CodeAnalysis, Microsoft.DotNet.Build.Tasks.TargetFramework, Microsoft.DotNet.RemoteExecutor, Microsoft.DotNet.Build.Tasks.Feed, Microsoft.DotNet.SharedFramework.Sdk, Microsoft.DotNet.PackageTesting (Version 10.0.0-beta.25365.101 -> 10.0.0-beta.25366.103)
Microsoft.DotNet.XUnitAssert, Microsoft.DotNet.XUnitConsoleRunner (Version 2.9.3-beta.25365.101 -> 2.9.3-beta.25366.103)
Microsoft.NETCore.App.Ref, runtime.native.System.IO.Ports, Microsoft.NETCore.ILAsm, Microsoft.NET.Sdk.IL, System.Text.Json, System.Reflection.Metadata, System.Reflection.MetadataLoadContext (Version 10.0.0-preview.7.25365.101 -> 10.0.0-preview.7.25366.103)
Microsoft.Net.Compilers.Toolset, Microsoft.CodeAnalysis, Microsoft.CodeAnalysis.CSharp, Microsoft.CodeAnalysis.Analyzers (Version 5.0.0-1.25365.101 -> 5.0.0-1.25366.103)
Microsoft.CodeAnalysis.NetAnalyzers (Version 10.0.0-preview.25365.101 -> 10.0.0-preview.25366.103)

* Update dependencies from https://github.com/dotnet/dotnet build 275594
Updated Dependencies:
System.CommandLine (Version 2.0.0-beta7.25366.103 -> 2.0.0-beta7.25366.104)
Microsoft.DotNet.Cecil (Version 0.11.5-alpha.25366.103 -> 0.11.5-alpha.25366.104)
Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport, Microsoft.DotNet.ApiCompat.Task (Version 10.0.100-preview.7.25366.103 -> 10.0.100-preview.7.25366.104)
Microsoft.DotNet.Arcade.Sdk, Microsoft.DotNet.XliffTasks, Microsoft.DotNet.Helix.Sdk, Microsoft.DotNet.GenAPI, Microsoft.DotNet.GenFacades, Microsoft.DotNet.XUnitExtensions, Microsoft.DotNet.Build.Tasks.Archives, Microsoft.DotNet.Build.Tasks.Packaging, Microsoft.DotNet.Build.Tasks.Installers, Microsoft.DotNet.Build.Tasks.Templating, Microsoft.DotNet.Build.Tasks.Workloads, Microsoft.DotNet.CodeAnalysis, Microsoft.DotNet.Build.Tasks.TargetFramework, Microsoft.DotNet.RemoteExecutor, Microsoft.DotNet.Build.Tasks.Feed, Microsoft.DotNet.SharedFramework.Sdk, Microsoft.DotNet.PackageTesting (Version 10.0.0-beta.25366.103 -> 10.0.0-beta.25366.104)
Microsoft.DotNet.XUnitAssert, Microsoft.DotNet.XUnitConsoleRunner (Version 2.9.3-beta.25366.103 -> 2.9.3-beta.25366.104)
Microsoft.NETCore.App.Ref, runtime.native.System.IO.Ports, Microsoft.NETCore.ILAsm, Microsoft.NET.Sdk.IL, System.Text.Json, System.Reflection.Metadata, System.Reflection.MetadataLoadContext (Version 10.0.0-preview.7.25366.103 -> 10.0.0-preview.7.25366.104)
Microsoft.Net.Compilers.Toolset, Microsoft.CodeAnalysis, Microsoft.CodeAnalysis.CSharp, Microsoft.CodeAnalysis.Analyzers (Version 5.0.0-1.25366.103 -> 5.0.0-1.25366.104)
Microsoft.CodeAnalysis.NetAnalyzers (Version 10.0.0-preview.25366.103 -> 10.0.0-preview.25366.104)

* Update dependencies from https://github.com/dotnet/dotnet build 275638
Updated Dependencies:
System.CommandLine (Version 2.0.0-beta7.25366.104 -> 2.0.0-beta7.25367.101)
Microsoft.DotNet.Cecil (Version 0.11.5-alpha.25366.104 -> 0.11.5-alpha.25367.101)
Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport, Microsoft.DotNet.ApiCompat.Task (Version 10.0.100-preview.7.25366.104 -> 10.0.100-preview.7.25367.101)
Microsoft.DotNet.Arcade.Sdk, Microsoft.DotNet.XliffTasks, Microsoft.DotNet.Helix.Sdk, Microsoft.DotNet.GenAPI, Microsoft.DotNet.GenFacades, Microsoft.DotNet.XUnitExtensions, Microsoft.DotNet.Build.Tasks.Archives, Microsoft.DotNet.Build.Tasks.Packaging, Microsoft.DotNet.Build.Tasks.Installers, Microsoft.DotNet.Build.Tasks.Templating, Microsoft.DotNet.Build.Tasks.Workloads, Microsoft.DotNet.CodeAnalysis, Microsoft.DotNet.Build.Tasks.TargetFramework, Microsoft.DotNet.RemoteExecutor, Microsoft.DotNet.Build.Tasks.Feed, Microsoft.DotNet.SharedFramework.Sdk, Microsoft.DotNet.PackageTesting (Version 10.0.0-beta.25366.104 -> 10.0.0-beta.25367.101)
Microsoft.DotNet.XUnitAssert, Microsoft.DotNet.XUnitConsoleRunner (Version 2.9.3-beta.25366.104 -> 2.9.3-beta.25367.101)
Microsoft.NETCore.App.Ref, runtime.native.System.IO.Ports, Microsoft.NETCore.ILAsm, Microsoft.NET.Sdk.IL, System.Text.Json, System.Reflection.Metadata, System.Reflection.MetadataLoadContext (Version 10.0.0-preview.7.25366.104 -> 10.0.0-preview.7.25367.101)
Microsoft.Net.Compilers.Toolset, Microsoft.CodeAnalysis, Microsoft.CodeAnalysis.CSharp, Microsoft.CodeAnalysis.Analyzers (Version 5.0.0-1.25366.104 -> 5.0.0-2.25367.101)
Microsoft.CodeAnalysis.NetAnalyzers (Version 10.0.0-preview.25366.104 -> 10.0.0-preview.25367.101)

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Alexander Köplinger <alex.koeplinger@outlook.com>",2025-07-18 12:53:58+00:00,dotnet-maestro[bot],0,,,3,107,107,"[main] source code updates from dotnet/dotnet (issue_ref)* update dependencies from build 275039updated dependencies:system.commandline (version 2.0.0-beta7.25362.103 -> 2.0.0-beta7.25363.101)microsoft.dotnet.cecil (version 0.11.5-alpha.25362.103 -> 0.11.5-alpha.25363.101)microsoft.net.workload.emscripten.current.manifest-10.0.100.transport, microsoft.dotnet.apicompat.task (version 10.0.100-preview.7.25362.103 -> 10.0.100-preview.7.25363.101)microsoft.dotnet.arcade.sdk, microsoft.dotnet.xlifftasks, microsoft.dotnet.helix.sdk, microsoft.dotnet.genapi, microsoft.dotnet.genfacades, microsoft.dotnet.xunitextensions, microsoft.dotnet.build.tasks.archives, microsoft.dotnet.build.tasks.packaging, microsoft.dotnet.build.tasks.installers, microsoft.dotnet.build.tasks.templating, microsoft.dotnet.build.tasks.workloads, microsoft.dotnet.codeanalysis, microsoft.dotnet.build.tasks.targetframework, microsoft.dotnet.remoteexecutor, microsoft.dotnet.build.tasks.feed, microsoft.dotnet.sharedframework.sdk, microsoft.dotnet.packagetesting (version 10.0.0-beta.25362.103 -> 10.0.0-beta.25363.101)microsoft.dotnet.xunitassert, microsoft.dotnet.xunitconsolerunner (version 2.9.3-beta.25362.103 -> 2.9.3-beta.25363.101)microsoft.netcore.app.ref, runtime.native.system.io.ports, microsoft.netcore.ilasm, microsoft.net.sdk.il, system.text.json, system.reflection.metadata, system.reflection.metadataloadcontext (version 10.0.0-preview.7.25362.103 -> 10.0.0-preview.7.25363.101)microsoft.net.compilers.toolset, microsoft.codeanalysis, microsoft.codeanalysis.csharp, microsoft.codeanalysis.analyzers (version 5.0.0-1.25362.103 -> 5.0.0-1.25363.101)microsoft.codeanalysis.netanalyzers (version 10.0.0-preview.25362.103 -> 10.0.0-preview.25363.101)* update dependencies from build 275143updated dependencies:system.commandline (version 2.0.0-beta7.25363.101 -> 2.0.0-beta7.25364.102)microsoft.dotnet.cecil (version 0.11.5-alpha.25363.101 -> 0.11.5-alpha.25364.102)microsoft.net.workload.emscripten.current.manifest-10.0.100.transport, microsoft.dotnet.apicompat.task (version 10.0.100-preview.7.25363.101 -> 10.0.100-preview.7.25364.102)microsoft.dotnet.arcade.sdk, microsoft.dotnet.xlifftasks, microsoft.dotnet.helix.sdk, microsoft.dotnet.genapi, microsoft.dotnet.genfacades, microsoft.dotnet.xunitextensions, microsoft.dotnet.build.tasks.archives, microsoft.dotnet.build.tasks.packaging, microsoft.dotnet.build.tasks.installers, microsoft.dotnet.build.tasks.templating, microsoft.dotnet.build.tasks.workloads, microsoft.dotnet.codeanalysis, microsoft.dotnet.build.tasks.targetframework, microsoft.dotnet.remoteexecutor, microsoft.dotnet.build.tasks.feed, microsoft.dotnet.sharedframework.sdk, microsoft.dotnet.packagetesting (version 10.0.0-beta.25363.101 -> 10.0.0-beta.25364.102)microsoft.dotnet.xunitassert, microsoft.dotnet.xunitconsolerunner (version 2.9.3-beta.25363.101 -> 2.9.3-beta.25364.102)microsoft.netcore.app.ref, runtime.native.system.io.ports, microsoft.netcore.ilasm, microsoft.net.sdk.il, system.text.json, system.reflection.metadata, system.reflection.metadataloadcontext (version 10.0.0-preview.7.25363.101 -> 10.0.0-preview.7.25364.102)microsoft.net.compilers.toolset, microsoft.codeanalysis, microsoft.codeanalysis.csharp, microsoft.codeanalysis.analyzers (version 5.0.0-1.25363.101 -> 5.0.0-1.25364.102)microsoft.codeanalysis.netanalyzers (version 10.0.0-preview.25363.101 -> 10.0.0-preview.25364.102)* update dependencies from build 275313updated dependencies:system.commandline (version 2.0.0-beta7.25364.102 -> 2.0.0-beta7.25365.101)microsoft.dotnet.cecil (version 0.11.5-alpha.25364.102 -> 0.11.5-alpha.25365.101)microsoft.net.workload.emscripten.current.manifest-10.0.100.transport, microsoft.dotnet.apicompat.task (version 10.0.100-preview.7.25364.102 -> 10.0.100-preview.7.25365.101)microsoft.dotnet.arcade.sdk, microsoft.dotnet.xlifftasks, microsoft.dotnet.helix.sdk, microsoft.dotnet.genapi, microsoft.dotnet.genfacades, microsoft.dotnet.xunitextensions, microsoft.dotnet.build.tasks.archives, microsoft.dotnet.build.tasks.packaging, microsoft.dotnet.build.tasks.installers, microsoft.dotnet.build.tasks.templating, microsoft.dotnet.build.tasks.workloads, microsoft.dotnet.codeanalysis, microsoft.dotnet.build.tasks.targetframework, microsoft.dotnet.remoteexecutor, microsoft.dotnet.build.tasks.feed, microsoft.dotnet.sharedframework.sdk, microsoft.dotnet.packagetesting (version 10.0.0-beta.25364.102 -> 10.0.0-beta.25365.101)microsoft.dotnet.xunitassert, microsoft.dotnet.xunitconsolerunner (version 2.9.3-beta.25364.102 -> 2.9.3-beta.25365.101)microsoft.netcore.app.ref, runtime.native.system.io.ports, microsoft.netcore.ilasm, microsoft.net.sdk.il, system.text.json, system.reflection.metadata, system.reflection.metadataloadcontext (version 10.0.0-preview.7.25364.102 -> 10.0.0-preview.7.25365.101)microsoft.net.compilers.toolset, microsoft.codeanalysis, microsoft.codeanalysis.csharp, microsoft.codeanalysis.analyzers (version 5.0.0-1.25364.102 -> 5.0.0-1.25365.101)microsoft.codeanalysis.netanalyzers (version 10.0.0-preview.25364.102 -> 10.0.0-preview.25365.101)* update dependencies from build 275513updated dependencies:system.commandline (version 2.0.0-beta7.25365.101 -> 2.0.0-beta7.25366.103)microsoft.dotnet.cecil (version 0.11.5-alpha.25365.101 -> 0.11.5-alpha.25366.103)microsoft.net.workload.emscripten.current.manifest-10.0.100.transport, microsoft.dotnet.apicompat.task (version 10.0.100-preview.7.25365.101 -> 10.0.100-preview.7.25366.103)microsoft.dotnet.arcade.sdk, microsoft.dotnet.xlifftasks, microsoft.dotnet.helix.sdk, microsoft.dotnet.genapi, microsoft.dotnet.genfacades, microsoft.dotnet.xunitextensions, microsoft.dotnet.build.tasks.archives, microsoft.dotnet.build.tasks.packaging, microsoft.dotnet.build.tasks.installers, microsoft.dotnet.build.tasks.templating, microsoft.dotnet.build.tasks.workloads, microsoft.dotnet.codeanalysis, microsoft.dotnet.build.tasks.targetframework, microsoft.dotnet.remoteexecutor, microsoft.dotnet.build.tasks.feed, microsoft.dotnet.sharedframework.sdk, microsoft.dotnet.packagetesting (version 10.0.0-beta.25365.101 -> 10.0.0-beta.25366.103)microsoft.dotnet.xunitassert, microsoft.dotnet.xunitconsolerunner (version 2.9.3-beta.25365.101 -> 2.9.3-beta.25366.103)microsoft.netcore.app.ref, runtime.native.system.io.ports, microsoft.netcore.ilasm, microsoft.net.sdk.il, system.text.json, system.reflection.metadata, system.reflection.metadataloadcontext (version 10.0.0-preview.7.25365.101 -> 10.0.0-preview.7.25366.103)microsoft.net.compilers.toolset, microsoft.codeanalysis, microsoft.codeanalysis.csharp, microsoft.codeanalysis.analyzers (version 5.0.0-1.25365.101 -> 5.0.0-1.25366.103)microsoft.codeanalysis.netanalyzers (version 10.0.0-preview.25365.101 -> 10.0.0-preview.25366.103)* update dependencies from build 275594updated dependencies:system.commandline (version 2.0.0-beta7.25366.103 -> 2.0.0-beta7.25366.104)microsoft.dotnet.cecil (version 0.11.5-alpha.25366.103 -> 0.11.5-alpha.25366.104)microsoft.net.workload.emscripten.current.manifest-10.0.100.transport, microsoft.dotnet.apicompat.task (version 10.0.100-preview.7.25366.103 -> 10.0.100-preview.7.25366.104)microsoft.dotnet.arcade.sdk, microsoft.dotnet.xlifftasks, microsoft.dotnet.helix.sdk, microsoft.dotnet.genapi, microsoft.dotnet.genfacades, microsoft.dotnet.xunitextensions, microsoft.dotnet.build.tasks.archives, microsoft.dotnet.build.tasks.packaging, microsoft.dotnet.build.tasks.installers, microsoft.dotnet.build.tasks.templating, microsoft.dotnet.build.tasks.workloads, microsoft.dotnet.codeanalysis, microsoft.dotnet.build.tasks.targetframework, microsoft.dotnet.remoteexecutor, microsoft.dotnet.build.tasks.feed, microsoft.dotnet.sharedframework.sdk, microsoft.dotnet.packagetesting (version 10.0.0-beta.25366.103 -> 10.0.0-beta.25366.104)microsoft.dotnet.xunitassert, microsoft.dotnet.xunitconsolerunner (version 2.9.3-beta.25366.103 -> 2.9.3-beta.25366.104)microsoft.netcore.app.ref, runtime.native.system.io.ports, microsoft.netcore.ilasm, microsoft.net.sdk.il, system.text.json, system.reflection.metadata, system.reflection.metadataloadcontext (version 10.0.0-preview.7.25366.103 -> 10.0.0-preview.7.25366.104)microsoft.net.compilers.toolset, microsoft.codeanalysis, microsoft.codeanalysis.csharp, microsoft.codeanalysis.analyzers (version 5.0.0-1.25366.103 -> 5.0.0-1.25366.104)microsoft.codeanalysis.netanalyzers (version 10.0.0-preview.25366.103 -> 10.0.0-preview.25366.104)* update dependencies from build 275638updated dependencies:system.commandline (version 2.0.0-beta7.25366.104 -> 2.0.0-beta7.25367.101)microsoft.dotnet.cecil (version 0.11.5-alpha.25366.104 -> 0.11.5-alpha.25367.101)microsoft.net.workload.emscripten.current.manifest-10.0.100.transport, microsoft.dotnet.apicompat.task (version 10.0.100-preview.7.25366.104 -> 10.0.100-preview.7.25367.101)microsoft.dotnet.arcade.sdk, microsoft.dotnet.xlifftasks, microsoft.dotnet.helix.sdk, microsoft.dotnet.genapi, microsoft.dotnet.genfacades, microsoft.dotnet.xunitextensions, microsoft.dotnet.build.tasks.archives, microsoft.dotnet.build.tasks.packaging, microsoft.dotnet.build.tasks.installers, microsoft.dotnet.build.tasks.templating, microsoft.dotnet.build.tasks.workloads, microsoft.dotnet.codeanalysis, microsoft.dotnet.build.tasks.targetframework, microsoft.dotnet.remoteexecutor, microsoft.dotnet.build.tasks.feed, microsoft.dotnet.sharedframework.sdk, microsoft.dotnet.packagetesting (version 10.0.0-beta.25366.104 -> 10.0.0-beta.25367.101)microsoft.dotnet.xunitassert, microsoft.dotnet.xunitconsolerunner (version 2.9.3-beta.25366.104 -> 2.9.3-beta.25367.101)microsoft.netcore.app.ref, runtime.native.system.io.ports, microsoft.netcore.ilasm, microsoft.net.sdk.il, system.text.json, system.reflection.metadata, system.reflection.metadataloadcontext (version 10.0.0-preview.7.25366.104 -> 10.0.0-preview.7.25367.101)microsoft.net.compilers.toolset, microsoft.codeanalysis, microsoft.codeanalysis.csharp, microsoft.codeanalysis.analyzers (version 5.0.0-1.25366.104 -> 5.0.0-2.25367.101)microsoft.codeanalysis.netanalyzers (version 10.0.0-preview.25366.104 -> 10.0.0-preview.25367.101)---------"
dotnet/runtime,2d69514acd32f0bfdcd325c22fda7b054e275357,"[Android] Expand smoke tests for CoreCLR Android (#117767)

* Run disabled tests

* Update tests to use ConditionalFact for platform detection

* Revert changes

* Update project exclusions and add smoke test projects for Android

* Update platform skip condition",2025-07-18 13:15:08+00:00,Milos Kotlar,1,b7db8f4b67f09cab3215aab89a1955aa6198907a,"[clr-interp] Include clrinterpreter library in the iOS app bundle (#117277)

* Install clrinterpreter into the sharedFramework to include it in the iOS bundle

* Use static clrinterpreter on iOS

* Fix build errors

* Add functional test

* Fix build errors

* Build smoke tests

* Update executable name placeholder in runtime-coreclr.m

* Set environment variables to interp method

* Set AdditionalXHarnessArguments

* Set xharness env variables in helix

* Add support for interpreter methods in AppleAppBuilder

* Add InterpreterMethods property to AppleBuild.targets

* Update build configuration to Debug and fix condition

* Add environment variables DOTNET_InterpMode and DOTNET_ReadyToRun

* Refactor AppleAppBuilder to support environment variables

* Fix condition

* Update PlatformManifestFileEntry conditions to use RuntimeConfiguration

* Test build without PlatformManifestFileEntry

* Add PlatformManifestFileEntry for clrinterpreter

* Update FEATURE_INTERPRETER logic to use uppercase build type for Debug and Checked configurations

* Update PlatformManifestFileEntry for clrinterpreter

* Support optional installation of clr components

* Move functional test to extra-platforms

* Remove condition and clean up CMakeLists

* Remove condition from iossimulator  job

* Remove redundant JIT static variable from coreclr cmake configuration

* Fix build",7,11,21,[android] expand smoke tests for coreclr android (issue_ref)* run disabled tests* update tests to use conditionalfact for platform detection* revert changes* update project exclusions and add smoke test projects for android* update platform skip condition
dotnet/runtime,98d12badf65a9be2ba896aea6d7199c78feb51ab,[browser] Clean up HotReload check (#117803),2025-07-18 13:17:43+00:00,Marek Fišera,0,,,1,0,9,[browser] clean up hotreload check (issue_ref)
dotnet/runtime,620e7ade71d51e3e1f9732d1ee4757001a458db6,Remove OperatingSystem.IsWatchOS() checks (#117653),2025-07-18 13:32:42+00:00,David Nguyen,0,,,8,8,9,remove operatingsystem.iswatchos() checks (issue_ref)
dotnet/runtime,bcbf033d9371e364c6b52c0caa159893fdd1a174,"[clr-interp] Enable SIMD feature for callstubgenerator.cpp on supported architectures (#117769)

* Enable SIMD feature for callstubgenerator.cpp on supported architectures

* Remove FEATURE_SIMD condition",2025-07-18 13:53:42+00:00,Milos Kotlar,0,,,1,0,2,[clr-interp] enable simd feature for callstubgenerator.cpp on supported architectures (issue_ref)* enable simd feature for callstubgenerator.cpp on supported architectures* remove feature_simd condition
dotnet/runtime,a3f500f3820011a08a6b77aa867f8bd2eeb41769,"[HTTP Telemetry] Prioritize Host header when emitting `server.address` (#117540)

With the merge of https://github.com/open-telemetry/semantic-conventions/pull/2463, we are good to prioritize the contents of the `Host` header in cases no proxy is being used. The PR implements the change for both request and connection traces+metrics.

There is a non-negligible risk: actually, we do not and (with the current code structure) can not emit `network.peer.address` for request telemetry, meaning that with `http(s)://x.x.x.x/..` target Uri-s, IP information will be no longer present when a there is a Host header. I believe that most users would still prefer to see the contents of the Host header if there is a mismatch. Others can opt into connection metrics/traces where `network.peer.address` is available.",2025-07-18 14:03:34+00:00,Anton Firszov,0,,,18,322,56,"[http telemetry] prioritize host header when emitting (issue_ref)with the merge of we are good to prioritize the contents of the header in cases no proxy is being used. the pr implements the change for both request and connection traces+metrics.there is a non-negligible risk: actually, we do not and (with the current code structure) can not emit for request telemetry, meaning that with target uri-s, ip information will be no longer present when a there is a host header. i believe that most users would still prefer to see the contents of the host header if there is a mismatch. others can opt into connection metrics/traces where is available."
dotnet/runtime,a0748134c931391cf310f8eb4b78d4874f378463,Use a ReaderWriterLockSlim in RcwCache (#117792),2025-07-18 16:44:37+00:00,Jeremy Koritzinsky,0,,,1,19,4,use a readerwriterlockslim in rcwcache (issue_ref)
dotnet/runtime,d71abb0a5397b501af7bce54fec36dfea17aba29,Composite ML-DSA + RSA Managed Composer (#117259),2025-07-18 18:02:36+00:00,Pranav Senthilnathan,0,,,37,3929,310,composite ml-dsa + rsa managed composer (issue_ref)
dotnet/runtime,2c8a0da9292a5b2f1f633ab8eed8e5e72900c82c,"SVE2 API for MaxNumberPairwise, MaxPairwise, MinNumberPairwise and MinPairwise (#117711)",2025-07-18 18:20:55+00:00,Jacob Crawley,0,,,6,478,0,"sve2 api for maxnumberpairwise, maxpairwise, minnumberpairwise and minpairwise (issue_ref)"
dotnet/runtime,de52942625a15e72680d2ba897aa50dffedc6412,"arm64: Add Sve2 Saturating functions (#117758)

* Implements #115479
* In the Sve2 Maths API it has MultiplyDoublingWideningAndSubtractSaturateOdd with and without the index argument. In all the other cases the index case has a function name with BySelectedScalar in it. I've added the function MultiplyDoublingWideningBySelectedScalarAndAddSaturateEven to be consistant with the other functions.",2025-07-18 18:24:14+00:00,Jonathan Davies,1,d84ca952a3fc2bccd0c68762987c782e9e5d2dc0,JIT: Fix ARM64 emitter tests (#117768),9,640,5,arm64: add sve2 saturating functions (issue_ref)* implements issue_ref* in the sve2 maths api it has multiplydoublingwideningandsubtractsaturateodd with and without the index argument. in all the other cases the index case has a function name with byselectedscalar in it. i've added the function multiplydoublingwideningbyselectedscalarandaddsaturateeven to be consistant with the other functions.
dotnet/runtime,757fb9de52ba25b8f8f364f90adc65cc29c27c5d,"Add CompilerLoweringPreserveAttribute (#117729)

* Add CompilerLoweringPreserveAttribute

And apply it to DynamicallyAccessedMembersAttribute.
This ensures that DAM flows to compiler-generated code.",2025-07-18 18:29:14+00:00,Sven Boemer,0,,,36,60,1,add compilerloweringpreserveattribute (issue_ref)* add compilerloweringpreserveattributeand apply it to dynamicallyaccessedmembersattribute.this ensures that dam flows to compiler-generated code.
dotnet/runtime,0d803c3dd45e91163f62f73e8e82f82e78864eb3,"Use compiler-lowered DAM when trimming (#117624)

This uses compiler-lowered DAM for trimming compiler-generated code,
and adds test infrastructure and coverage for
DynamicallyAccessedMembers that is lowered by us for the compiler.

We also want to use the compiler-lowered attributes for generated
state machines, when trimming a .NET10+ assembly (leaving the old
heuristics for .NET9 and below, to avoid breaking trim analysis for
existing assemblies). However, the tests uncovered an issue with the
Roslyn implementation:
https://github.com/dotnet/roslyn/issues/79333. Until that is fixed, we
don't rely on the lowered attribute for mapping type parameters by
default (the new behavior is opt-in under a new flag). Once we get a
fix we can remove this.

The old heuristics are still run for all TFMs simply for coverage, but
we don't use the result.

This adds test infrastructure to let us test against a polyfilled DAM
with CompilerLoweringPreserve (since we don't run ILLink/ILC tests
against a live corelib).

The existing ILLink tests (including those shared with ILC trimming
tests) are now built with TargetFrameworkAttribute marking the
assembly as targeting .NET 10. The compiler-generated code tests have
been duplicated for .NET 9 and .NET 10 to test both the old and new
behaviors.

Also fixes a test infrastructure issue where in a ""copy"" assembly, the
DAM and CompilerLoweringPreserve types that are compiled in are kept,
but the test infrastructure was filtering these out of the
""linkedMembers"", leading to validation errors.",2025-07-18 18:41:05+00:00,Sven Boemer,1,290be5bac689f12fa0f448700ed9113fdbae5f31,"Unify ResultChecker logic (#119157)

* Unify ResultChecker logic

Ports some changes to the ResultChecker logic
from ILLink over to the ILC test infra.
Includes
https://github.com/dotnet/runtime/commit/80414e96ef5b5e110c52cd92265fb3a348e56a8b,
and some other small fixes.

* Clean up",45,625,103,"use compiler-lowered dam when trimming (issue_ref)this uses compiler-lowered dam for trimming compiler-generated code,and adds test infrastructure and coverage fordynamicallyaccessedmembers that is lowered by us for the compiler.we also want to use the compiler-lowered attributes for generatedstate machines, when trimming a .net10+ assembly (leaving the oldheuristics for .net9 and below, to avoid breaking trim analysis forexisting assemblies). however, the tests uncovered an issue with theroslyn implementation: until that is fixed, wedon't rely on the lowered attribute for mapping type parameters bydefault (the new behavior is opt-in under a new flag). once we get afix we can remove this.the old heuristics are still run for all tfms simply for coverage, butwe don't use the result.this adds test infrastructure to let us test against a polyfilled damwith compilerloweringpreserve (since we don't run illink/ilc testsagainst a live corelib).the existing illink tests (including those shared with ilc trimmingtests) are now built with targetframeworkattribute marking theassembly as targeting .net 10. the compiler-generated code tests havebeen duplicated for .net 9 and .net 10 to test both the old and newbehaviors.also fixes a test infrastructure issue where in a ""copy"" assembly, thedam and compilerloweringpreserve types that are compiled in are kept,but the test infrastructure was filtering these out of the""linkedmembers"", leading to validation errors."
dotnet/runtime,b38773858e83e32a5d1a68132842d9b7c0c4314b,"[wasm] Make sure we use bash environment for emsdk_env.sh script (#117833)

Codespaces prebuild currently fails because of that. This matches what we do in mono.proj.",2025-07-18 19:59:24+00:00,Alexander Köplinger,0,,,2,13,10,[wasm] make sure we use bash environment for emsdk_env.sh script (issue_ref)codespaces prebuild currently fails because of that. this matches what we do in mono.proj.
dotnet/runtime,3fb6fbb3efaa7f2ae5e76bf235615d7f70005201,"SVE2 API DotProductComplex and DotProductComplexBySelectedIndex (#117706)

* SVE2 DotProductComplex*

Implementation for DotProductComplex and DotProductComplexBySelectedIndex

* Renaming to DotProductRotateComplex

* Adding constant range to rotation parameter

* Update src/coreclr/jit/hwintrinsiccodegenarm64.cpp

---------

Co-authored-by: Aman Khalid <amankhalid@microsoft.com>",2025-07-18 22:33:05+00:00,Jacob Crawley,0,,,13,476,111,sve2 api dotproductcomplex and dotproductcomplexbyselectedindex (issue_ref)* sve2 dotproductcomplex*implementation for dotproductcomplex and dotproductcomplexbyselectedindex* renaming to dotproductrotatecomplex* adding constant range to rotation parameter* update src/coreclr/jit/hwintrinsiccodegenarm64.cpp---------
dotnet/runtime,d757c03be2c39968bca1db2ce9349fce8f1463a3,"Add some additional Tensor APIs (#117739)

* Remove unnecessary usings from Tensor code

* Add the TensorMarshal class

* Fix the naming of various tensor create APIs to remove ambiguities

* Add support for directly getting a contiguous span from a tensor

* Update the compatibility supressions file for S.N.Tensors

* Add tests for the new APIs

* Fix some tests

* Ensure the test calls TryGetSpan",2025-07-18 23:30:29+00:00,Tanner Gooding,1,023e782bd6523f5fc3423cd09470f516c97bad2a,Fix typo in documentation for ToDenseTensor method (#121535),59,1558,537,add some additional tensor apis (issue_ref)* remove unnecessary usings from tensor code* add the tensormarshal class* fix the naming of various tensor create apis to remove ambiguities* add support for directly getting a contiguous span from a tensor* update the compatibility supressions file for s.n.tensors* add tests for the new apis* fix some tests* ensure the test calls trygetspan
dotnet/runtime,5107b8fb7f566588895e2008e4aeef9cc290c381,"Update DBG_MAX_EXECUTABLE_ALLOC_SIZE and EXPECTED_CHUNKSIZE (#117843)

* Update DBG_MAX_EXECUTABLE_ALLOC_SIZE and EXPECTED_CHUNKSIZE to account recent SharedPatchBypassBuffer changes

* Comment-only update

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>

* Improve EXPECTED_CHUNKSIZE comment

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-07-19 13:03:26+00:00,Tom McDonald,0,,,1,2,2,update dbg_max_executable_alloc_size and expected_chunksize (issue_ref)* update dbg_max_executable_alloc_size and expected_chunksize to account recent sharedpatchbypassbuffer changes* comment-only update
dotnet/runtime,ea721e7486615b95c8ede98a6f54aa5178d4c888,"Serialize unhandled exception for crash dump analysis when ExceptionHandler.RaiseUnhandledExceptionEvent is called (#117832)

* Serialize unhandled exception for crash dump analysis when ExceptionHandler.RaiseUnhandledExceptionEvent is called

* Use cheaper locking mechanism for SerializeCrashInfo

* Remove superfluous assignment

* Apply suggestions from code review

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Block secondary calls to SerializeCrashInfo until the data has been serialized (prevents early process exit)

* Update src/coreclr/nativeaot/System.Private.CoreLib/src/System/RuntimeExceptionHelpers.cs

* Update src/coreclr/nativeaot/System.Private.CoreLib/src/System/RuntimeExceptionHelpers.cs

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-07-19 13:03:44+00:00,Tom McDonald,0,,,2,38,17,serialize unhandled exception for crash dump analysis when exceptionhandler.raiseunhandledexceptionevent is called (issue_ref)* serialize unhandled exception for crash dump analysis when exceptionhandler.raiseunhandledexceptionevent is called* use cheaper locking mechanism for serializecrashinfo* remove superfluous assignment* apply suggestions from code review
dotnet/runtime,5630010c13adad214fc369a365d0225d4b207ec6,"Switch to Azure Linux Arm64 Helix VM hosts (#117790)

* Switch to Azure Linux Arm64 Helix VM hosts

* Update queue name

* Update per feedback",2025-07-19 19:11:08+00:00,Rich Lander,0,,,3,18,19,switch to azure linux arm64 helix vm hosts (issue_ref)* switch to azure linux arm64 helix vm hosts* update queue name* update per feedback
dotnet/runtime,d817f032075f77c7852b9f653c064a3346948667,refactor stuff (#117850),2025-07-20 03:05:50+00:00,Pranav Senthilnathan,1,9fd7c39825da4da524ea8e307f84f9482a7abaca,Fix Equals and GetHashCode for cryptographic wrappers,18,62,88,refactor stuff (issue_ref)
dotnet/runtime,a656a36615c8431376a9330a6b0e5d2092830155,Use C# 14's field keyword in more places (#117817),2025-07-20 19:55:09+00:00,Stephen Toub,1,a571a94c9aed0b8b75271b1de25ec742ca6c4b8f,"Mark HttpClient.Send tests uniformly with UnsupportedOSPlatform for Android, iOS (#120716)

Fixes #104716 by marking HttpClient.Send with UnsupportedOSPlatform with
values of android, ios over eixisting.

Please review.

cc @wfurt , @ManickaP

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",143,454,1255,use c# 14's field keyword in more places (issue_ref)
dotnet/runtime,b3037c614aa1c9d1e28abc2aa3b8ee78c1bc8ddc,Cleanup uses of Interlocked.CompareExchange<object> (#117858),2025-07-20 20:24:51+00:00,Jan Kotas,0,,,15,34,175,cleanup uses of interlocked.compareexchange<object> (issue_ref)
dotnet/runtime,bf92e063c5407ef1c10fb724c990f6aded53adaf,"adding GetAppDomainStoreData cDAC API (#117633)

* adding GetAppDomainStoreData cDAC API",2025-07-20 22:13:05+00:00,Rachel,0,,,2,36,1,adding getappdomainstoredata cdac api (issue_ref)* adding getappdomainstoredata cdac api
dotnet/runtime,6ade6d3e7734756c7222acd66ae93c75efa74209,"Delete AppDomain::m_Stage (#117857)

Left-over from .NET Framework",2025-07-20 23:11:32+00:00,Jan Kotas,0,,,6,22,106,delete appdomain::m_stage (issue_ref)left-over from .net framework
dotnet/runtime,9c3fe895f281c9438df0a5a2698d36a299a71bef,"[mono] fallback to scalar operation for ExtractMostSignificantBits (#117276)

Add a scalar fallback for ExtractMostSignificantBits
related to https://github.com/dotnet/runtime/pull/116779/commits/8dcc633d8082f92cc8fb7ea04fbe5da804467a80#r2167007340",2025-07-21 08:39:11+00:00,Sanjam Panda,1,c6b844eed3dd1712a8db6f8b9a6ab0a18701183b,"[mono][2/2] Add SIMD Support for s390x (#116779)

* [mono][2/2] Add SIMD Support for s390x

This is a followup patch to #116669 to add vector support to s390x

* Address Review Comments

* remove SIY_1 (duplicacy)
* remove locgrnle and locghinle use locghiho instead
* reformat whole patch
* remove vflc use vfpso instead
* move common op's to a common ifdef in mini-ops
* remove NEW_INS , it's used no-where
* rewrite the whole logic for Vector conditional ops for floats
* update ANDN with vnc instruction
* add couple of comments
* remove some pseudo op in simd-intrinsics
* add aligned loads and stores

* Adress Review Comments - 2

* reformat patch - rename opcode from OP_ to OP_S390
* rewrite OP_XCOMPARE and OP_XEXTRACT into one opcode OP_S390_OPXCOMPARE_XEXTRACT
* introduce compare neumonics without setting the condition code
* rewrite OP_VEC_ABS to handle float and integer separately

* Address Review Comments - 3

* remove hard-coded s390_vr16 to allocate a temp_reg instead
* omit move incase ins->sreg and ins->dreg",1,1,0,[mono] fallback to scalar operation for extractmostsignificantbits (issue_ref)add a scalar fallback for extractmostsignificantbitsrelated to #r2167007340
dotnet/runtime,88f2361c958affeaaa24122780fecb680365b558,"[Android] Improve InvariantGlobalization support for CoreCLR Android (#117748)

* Pass InvariantGlobalization as environment variable instead of as a property at MSBuild level

* Remove manual check for InvariantGlobalization, since it's passed in envVariables

* Remove InvariantGlobalization property, as it's passed as env variable at MSBuild level and is no longer used

* Pass PredefinedCulturesOnly as an environment variable

* Define Android environment variables used for .NET feature switches.",2025-07-21 09:26:03+00:00,David Nguyen,0,,,5,11,14,"[android] improve invariantglobalization support for coreclr android (issue_ref)* pass invariantglobalization as environment variable instead of as a property at msbuild level* remove manual check for invariantglobalization, since it's passed in envvariables* remove invariantglobalization property, as it's passed as env variable at msbuild level and is no longer used* pass predefinedculturesonly as an environment variable* define android environment variables used for .net feature switches."
dotnet/runtime,46c136ce44a811648d6995e6c2bb118e615257eb,"Cleanup memory after UnflushedBytes_HandlesLargeValues test (#117115)

Use memory pool that manages single buffer and reuse it each time a buffer is requested",2025-07-21 10:41:41+00:00,Badre BSAILA,0,,,1,84,6,cleanup memory after unflushedbytes_handleslargevalues test (issue_ref)use memory pool that manages single buffer and reuse it each time a buffer is requested
dotnet/runtime,ed5d5c817d5b4595d5f6b69952ce20559fb0b0de,[browser] Remove placeholder for docs link from warning (#117810),2025-07-21 11:13:30+00:00,Marek Fišera,0,,,1,1,1,[browser] remove placeholder for docs link from warning (issue_ref)
dotnet/runtime,17365a6255c1ffb88123ce77144e8fb3b5e54bbd,"Teach regex about more disjoint sets (#117869)

The regex optimizer tries to make loops atomic whenever it's safe to do so, as doing so removes possible backtracking. When it finds a set loop followed by another set, to be able to make the loop atomic, it needs to prove that the sets are disjoint, that there's nothing that can match both sets. It already does so for a wide variety of cases, but it's missing logic today that helps it to determine that for sets composed only of Unicode categories, e.g. \d, \w, p{C}, etc. This adds that in.",2025-07-21 12:36:37+00:00,Stephen Toub,0,,,2,55,2,"teach regex about more disjoint sets (issue_ref)the regex optimizer tries to make loops atomic whenever it's safe to do so, as doing so removes possible backtracking. when it finds a set loop followed by another set, to be able to make the loop atomic, it needs to prove that the sets are disjoint, that there's nothing that can match both sets. it already does so for a wide variety of cases, but it's missing logic today that helps it to determine that for sets composed only of unicode categories, e.g. \d, \w, p{c}, etc. this adds that in."
dotnet/runtime,68cb956f173704761cb4fc67cae8aaa927426dba,Disable IL offset mapping validation (#117809),2025-07-21 13:56:28+00:00,Jakob Botsch Nielsen,0,,,2,6,4,disable il offset mapping validation (issue_ref)
dotnet/runtime,959c2a7a782b4e9e698e0f00cb06afe859d16829,"GetAppDomainList cDAC implementation (#117515)

* adding GetAppDomainList cDAC API

* cleanup

* rebasing onto GetAssemblyModuleList

Co-authored-by: Max Charlamb <44248479+max-charlamb@users.noreply.github.com>

---------

Co-authored-by: Rachel Jarvi <racheljarvi@microsoft.com>
Co-authored-by: Max Charlamb <44248479+max-charlamb@users.noreply.github.com>",2025-07-21 15:17:56+00:00,Rachel,0,,,1,39,1,getappdomainlist cdac implementation (issue_ref)* adding getappdomainlist cdac api* cleanup* rebasing onto getassemblymodulelist
dotnet/runtime,4e8625b17104ad2ff217c2e9048691c8cc0fc671,"Update area-owners.md (#117511)

Updating area owners for Tellurium team areas",2025-07-21 15:48:31+00:00,Steve Molloy,0,,,1,4,4,update area-owners.md (issue_ref)updating area owners for tellurium team areas
dotnet/runtime,c6b844eed3dd1712a8db6f8b9a6ab0a18701183b,"[mono][2/2] Add SIMD Support for s390x (#116779)

* [mono][2/2] Add SIMD Support for s390x

This is a followup patch to #116669 to add vector support to s390x

* Address Review Comments

* remove SIY_1 (duplicacy)
* remove locgrnle and locghinle use locghiho instead
* reformat whole patch
* remove vflc use vfpso instead
* move common op's to a common ifdef in mini-ops
* remove NEW_INS , it's used no-where
* rewrite the whole logic for Vector conditional ops for floats
* update ANDN with vnc instruction
* add couple of comments
* remove some pseudo op in simd-intrinsics
* add aligned loads and stores

* Adress Review Comments - 2

* reformat patch - rename opcode from OP_ to OP_S390
* rewrite OP_XCOMPARE and OP_XEXTRACT into one opcode OP_S390_OPXCOMPARE_XEXTRACT
* introduce compare neumonics without setting the condition code
* rewrite OP_VEC_ABS to handle float and integer separately

* Address Review Comments - 3

* remove hard-coded s390_vr16 to allocate a temp_reg instead
* omit move incase ins->sreg and ins->dreg",2025-07-21 15:59:59+00:00,Sanjam Panda,1,2f5792a91f2aba8086bd57a23093620f025b77e7,Fix undefined ops for Mono aot legs (#117915),7,1798,548,"[mono][2/2] add simd support for s390x (issue_ref)* [mono][2/2] add simd support for s390xthis is a followup patch to issue_ref to add vector support to s390x* address review comments* remove siy_1 (duplicacy)* remove locgrnle and locghinle use locghiho instead* reformat whole patch* remove vflc use vfpso instead* move common op's to a common ifdef in mini-ops* remove new_ins , it's used no-where* rewrite the whole logic for vector conditional ops for floats* update andn with vnc instruction* add couple of comments* remove some pseudo op in simd-intrinsics* add aligned loads and stores* adress review comments - 2* reformat patch - rename opcode from op_ to op_s390* rewrite op_xcompare and op_xextract into one opcode op_s390_opxcompare_xextract* introduce compare neumonics without setting the condition code* rewrite op_vec_abs to handle float and integer separately* address review comments - 3* remove hard-coded s390_vr16 to allocate a temp_reg instead* omit move incase ins->sreg and ins->dreg"
dotnet/runtime,ad1257421933929ffa5590dfe273ef836d8a4788,"Delete ECHash (#117861)

We do not need FCall entrypoint to MethodDesc reverse mappinng now that there are no FCall with HelperMethodFrames",2025-07-21 17:29:17+00:00,Jan Kotas,1,6dc15b56585886ca5543d1b907a37c1f4efe5410,"[LoongArch64] Handle LASX/LSX/FP context depending on ISA availability. (#118007)

* [LoongArch64] Fix SDK running on 2K series SoC.

---------

Co-authored-by: driver1998 <driver1998.ms@outlook.com>",21,48,427,delete echash (issue_ref)we do not need fcall entrypoint to methoddesc reverse mappinng now that there are no fcall with helpermethodframes
dotnet/runtime,d4914dac340506842aede7f0f0a3c3d650787274,Update area-owners for libraries ownership changes (#117746),2025-07-21 17:56:11+00:00,Jeff Handley,0,,,1,41,41,update area-owners for libraries ownership changes (issue_ref)
dotnet/runtime,aadcceeb03ce0ecbc2ad645de0feb10189daa64c,"Don't bundle NativeAOT runtime assets in the ILCompiler package (#116882)

Co-authored-by: Alexander Köplinger <alex.koeplinger@outlook.com>",2025-07-21 19:14:05+00:00,Jeremy Koritzinsky,1,a2025e89b0609c01c3eb88c544e7d5f2f8886468,"Add support for Android RIDs to NativeAOT (#117953)

* Enable building runtime packs for NativeAOT for Android RIDs

* Correctly handle android RIDs in the NativeAOT targets and use a linker flavor that fixes issues in the java toolchain (pulling from the dotnet/android targets)

* Update eng/Subsets.props

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>

* Apply suggestions from code review

Co-authored-by: Michal Strehovský <MichalStrehovsky@users.noreply.github.com>

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>
Co-authored-by: Michal Strehovský <MichalStrehovsky@users.noreply.github.com>",5,7,61,don't bundle nativeaot runtime assets in the ilcompiler package (issue_ref)
dotnet/runtime,a6a3475ea34d84262a9dee41b027c4de35ecc84f,"Delete unused corpublish support and multi appdomain support in the debugger (#117688)

* Delete unused corpublish support
* Simplify debugger handling for appdomains as we always have only one.",2025-07-21 21:35:50+00:00,Jeremy Koritzinsky,0,,,19,64,3483,delete unused corpublish support and multi appdomain support in the debugger (issue_ref)* delete unused corpublish support* simplify debugger handling for appdomains as we always have only one.
dotnet/runtime,f175036a0b6c7f95a6bd92f9e36a3b7b8eb0aa60,[Json] JsonSerializer+PipeReader support (#116947),2025-07-21 23:18:27+00:00,Brennan,1,201b515d1e646f689efbee52c3585e85d4c3cbf4,"Fix enumerator disposal when cancellation outside of serialization occurs. (#120150)

* Fix enumerator disposal when cancellation outside of serialization occurs.

* Add debug asserts.",35,1392,153,[json] jsonserializer+pipereader support (issue_ref)
dotnet/runtime,4314b63e2faed4e3f6639f48894810193b94f0c9,"Revert ""Switch to Azure Linux Arm64 Helix VM hosts (#117790)"" (#117897)

This reverts commit 5630010c13adad214fc369a365d0225d4b207ec6.",2025-07-21 23:54:44+00:00,Rich Lander,0,,,3,19,18,"revert ""switch to azure linux arm64 helix vm hosts (issue_ref)"" (issue_ref)this reverts commit 5630010c13adad214fc369a365d0225d4b207ec6."
dotnet/runtime,97d5ac8e6377b63a20061afb4b884a01d70fdf1e,"Auto-atomic for more loops followed by boundaries (#117892)

Today we will make a loop like `\w+\b` or `\d+\b` atomic, because the only thing the `\b` can match after that point is a non-word character, and that means it can't give back a word character or digit to satisfy the loop. But we can extend that further, since we can use the same logic to make such a loop atomic as long as the only things it can match are any subset of word characters. So, for example `[a-f0-9]+\b`.",2025-07-22 01:15:24+00:00,Stephen Toub,1,1b243b705198a41df87ec69371e642adaadd8163,"Fix handling of late-discovered atomic lazy loops in compiler / source generator (#117629)

Lazy loops can be made automatically atomic in some situations by the optimizer, in which case their handling significantly simplifies, because a lazy atomic loop just becomes a repeater for the min iteration count. Most viable lazy loops are caught by the optimizer, but some aren't yet are determined to be treatable as atomic at emit time. EmitLazy was handling such cases incorrectly, resulting in a missing branch target and compilation failing. This fixes that two fold:
1. The optimizer is improved, so the discovered tests cases that were triggering this case no longer do.
2. The distinction is eliminated from EmitLazy, as the case is rare and it would take a lot more code to optimize for that case.",3,66,2,"auto-atomic for more loops followed by boundaries (issue_ref)today we will make a loop like or atomic, because the only thing the can match after that point is a non-word character, and that means it can't give back a word character or digit to satisfy the loop. but we can extend that further, since we can use the same logic to make such a loop atomic as long as the only things it can match are any subset of word characters. so, for example ."
dotnet/runtime,9e606b58bc5d540888a4ca2b7cb0ffcda986c508,Ensure that we lookup the correct instruction for embedded masking/broadcast scenarios (#117828),2025-07-22 03:54:31+00:00,Tanner Gooding,1,d153a7a71f4453ba2feaf92a42a6d76dc2c978fc,"Fix zero-extending displacement on win_x86_x64 JIT (#117945)

* treat displacement as signed value",7,290,84,ensure that we lookup the correct instruction for embedded masking/broadcast scenarios (issue_ref)
dotnet/runtime,0b2f272204ea0cb7d22d329a684c06cec412f736,"JIT: Allow more containment opts in Tier0 (#117622)

* allow more containment opts in tier0

* disable aligned load containment when opts disabled

* revert TryFoldCnsVecForEmbeddedBroadcast changes

---------

Co-authored-by: Tanner Gooding <tagoo@outlook.com>",2025-07-22 03:55:36+00:00,Clinton Ingram,0,,,1,6,6,jit: allow more containment opts in tier0 (issue_ref)* allow more containment opts in tier0* disable aligned load containment when opts disabled* revert tryfoldcnsvecforembeddedbroadcast changes---------
dotnet/runtime,00d5d4158275b914914dfea1febe69cef65a4934,"fix backcompat issue for standalone GC (#117793)

#116310 breaks the backward compatibility for the standalone GC - it can no longer work with previous versions of the runtime on both windows and linux. this is easily reproducible by just loading a standalone GC dll built from main with say 8.0 runtime because it will fail as soon as it hits FinalizeLoad when coreclr is trying to load the standalone dll.

both msvc and clang put the 2 methods, both named IsPromoted next to each other instead of maintaining the order as declared. renaming the new one to IsPromoted2 worked. but I also just made IsPromoted2 on IGCHeapInternal instead since it's only used by the GC side.",2025-07-22 06:02:51+00:00,Maoni Stephens,1,587f703c8dec187fe2de40b8efdb16865fde6839,"fixing a bug in card mark stealing (#117968)

this fixes a problem with card mark stealing where we missed clamping the card clearing by the card stealing unit in `card_transition`. for this bug to appear the following conditions need to be met - 

+ an object A straddles the 2mb card stealing unit and originally for that object a card below the 2mb boundary and a card that corresponds to at least 256 bytes above the 2mb boundary are set. and there are no reference fields inbetween.

+ one thread T0 is working on the 1st 2mb and discovers A and the first set card bit. this card doesn't need to be set, so `poo` is set the address that's described by the 2nd card since there're no reference fields inbetween. so `card_transition` is called which will call `clear_cards` on [1st card, (2nd card. and it stops at this line -
`                card_table [end_word] &= highbits (~0, bits);`
where it sees `end_card` with the 2nd card still set, but before it writes it back to `card_table[end_word]`

+ meanwhile, another thread T1 needs to be working on the memory starting from this 2mb boundary. it discovers the 2nd card doesn't need to be set, and none of the cards that correspond to the card bundle bit needs to be set so it clears the cards and the card bundle bit. 

+ now T0 writes back to `card_table[end_word]` with the 2nd card bit set. 

it's not a problem when a card that shouldn't be set is set, given that its corresponding card bundle bit is also set. but it's definitely a problem if a card is set but its card bundle bit isn't, because next time when we have a cross gen reference, what's supposed to happen in the write barrier is either the card isn't already set and the WB will set the card and its corresponding card bundle bit, or the card is set and the WB wouldn't do anything. but now we have a situation where the card is set but the card bundle bit isn't, it just means the next GC that should be looking at this card wouldn't, if there were no other cards covered by that card bundle bit got newly set by the WB.

the cleanest fix is to make sure we don't step outside of the 2mb boundary when we call `clear_cards` in `card_transition`.

this issue was very hard to observe and debug - full credit goes to @ChrisAhna who also verified the fix.",5,12,7,"fix backcompat issue for standalone gc (issue_ref)issue_ref breaks the backward compatibility for the standalone gc - it can no longer work with previous versions of the runtime on both windows and linux. this is easily reproducible by just loading a standalone gc dll built from main with say 8.0 runtime because it will fail as soon as it hits finalizeload when coreclr is trying to load the standalone dll.both msvc and clang put the 2 methods, both named ispromoted next to each other instead of maintaining the order as declared. renaming the new one to ispromoted2 worked. but i also just made ispromoted2 on igcheapinternal instead since it's only used by the gc side."
dotnet/runtime,085732c314c75f0274f078a376b55d68e9f6f1c7,"Misc cleanup (fixing comments, deleting dead code) (#117908)

* Left-over feedback from #114246

* Delete unused macros

* Delete dead ifdef

* Delete obsolete comment

* Delete dead code

* Fix formatting

* Delete dead code

* Delete mentions of Windows Arm32

* Delete unrecognized attribute

* Fix comment and log message",2025-07-22 07:03:07+00:00,Jan Kotas,1,3c94a470bc7fbdabafdf5d224b48dc5500e1b3b3,"[wasm][coreclr] Get further in the runtime initialization (#116383)

* [wasm][coreclr] Get further in the runtime initialization

Add corewasmhost binary to test runtime initialization

Fix linking of the host binary with coreclr and interpreter

Allow calling interpreter with arguments and handle return value

Use fake precode stubs to pass the precode type and method desc

Make alternate signal stack calls no-op on wasm

Implement CallDescrWorkerInternal on wasm

Fix PE image loading without RTR on wasm

Do not use unsupported syscalls

* Fix condition

Co-authored-by: Adeel Mujahid <3840695+am11@users.noreply.github.com>

* Fix build

The jit helpers are used later unconditionally

* Update after merge

* Feedback

* Update after merge

* Fix release build offsets

* Build Debug runtime configuration on CI, so that interpreter is enabled

* Fix build

* Enable interpreter in all configuration on wasm

Fix build

* Build in Release again as we are missing debug packages

* Move inline keyword

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Feedback

* Feedback

* Fix release build

* Feedback

Do not special case missing mono_wasm_browser_entropy and just add it
to helpers with an assert

* Feedback

* Feedback

Use MethodDesc's GetInterpreterCode() instead of GetNativeCode()

* Feedback

Do not use FEATURE_JIT for callstub exclusion, until we support it on wasm, use TARGET_WASM instead.

Also update build after merge

* Feedback

Use PORTABILITY_ASSERT

* Feedback, add FEATURE_PEIMAGE_FLAT_LAYOUT

* Revert mapping changes for PE loaded layout

We use the flat layout now

* Feedback, change call order of execute interp method

* Feedback, change condition to avoid dynamic loads in corhost

* Increase stub size to fit interpreter stub data

This way we get further in the initialization

    log: stdout: Interpreter compile method System.AppContext:Setup(ptr,ptr,int)
    log: stdout: Interpreter compile method System.Diagnostics.Debug:Assert(bool,System.String)
    log: stdout: Interpreter compile method System.Collections.Generic.Dictionary`2[System.__Canon,System.__Canon]:.ctor(int,System.Collections.Generic.IEqualityComparer`1[System.__Canon])
    log: stdout: Interpreter compile method System.Diagnostics.Debug:Assert(bool,System.String,System.String)
    log: stdout: Interpreter compile method System.Collections.Generic.Dictionary`2[System.__Canon,System.__Canon]:.ctor(int)

* Update precode sizes, feedback and size check

* Feedback, TODO, transition block

* Feedback

* Use coreclr_static library for wasm

And do not build coreclr

* Feedback

Disable larger part of GCToOSInterface::Initialize than before

* Feedback

Make InitializeFlushProcessWriteBuffers no-op on wasm

* Write barriers helper updated

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Write barriers helper updated

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Feedback

Return false from ExecutableAllocator::IsDoubleMappingEnabled instead
of making the double mapping init no-op on wasm

* Make InitJITWriteBarrierHelpers no-op on wasm

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Feedback

Fix few asserts

* Feedback

Define PEIMAGE_FLAT_LAYOUT_ONLY in inc\switches.h

* Feedback

Replace __wasm__ where appropriate

* Feedback

Do not use __builtin_return_address on wasm

* Feedback

Add InvokeCalliStub to helpers

* Feedback

Update comments and remove unwanted fields

* Feedback

Add comment to the wasm specific call description data fields

* Feedback

Add portability assert in DispatchCallSimple to light up if we get
called through this path

* Fix build

* Fix non-wasm build

* Feedback

Use FEATURE_JIT instead of not WASM check

* Feedback

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Feedback

* Feedback

Disable stack limit assert only in Debug configuration

* Feedback

Return flat layout from GetLoadedLayout when PEIMAGE_FLAT_LAYOUT_ONLY
switch is enabled

* Feedback

Add more explanation in the comment and use the CodeSize in the assert

* Add comment

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Feedback

Move _ReturnAddress macro ro pal.h

* Fix build

* Feedback

Make FlushProcessWriteBuffers no-op on wasm

* Feedback

Fix path

* Fix whitespace

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Prefer TARGET_WASM

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Update src/coreclr/pal/src/init/pal.cpp

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Prefer TARGET_WASM

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Prefer TARGET_WASM

* Few more places to use more general TARGET_WASM

* Prefer TARGET_WASM

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

---------

Co-authored-by: Adeel Mujahid <3840695+am11@users.noreply.github.com>
Co-authored-by: Jan Kotas <jkotas@microsoft.com>",16,21,88,"misc cleanup (fixing comments, deleting dead code) (issue_ref)* left-over feedback from issue_ref* delete unused macros* delete dead ifdef* delete obsolete comment* delete dead code* fix formatting* delete dead code* delete mentions of windows arm32* delete unrecognized attribute* fix comment and log message"
dotnet/runtime,dda26dee12274410614ed6912010107263ad56bc,"Disable `System.IO.Pipelines.Tests` and `UnsafeAccessorsTests` tests on extra-platforms (#117812)

* Disable System.IO.Pipelines.Tests and UnsafeAccessorsTests tests

* Fix condition

* Update src/libraries/tests.proj

Co-authored-by: Alexander Köplinger <alex.koeplinger@outlook.com>

---------

Co-authored-by: Alexander Köplinger <alex.koeplinger@outlook.com>",2025-07-22 08:37:31+00:00,Milos Kotlar,1,67837792faa88beb3f44105dfa7a3a430961ff12,"[Android][CoreCLR] Use relative path instead of just the filename when probing for assembly (#118054)

* Use the relative path to the assembly instead of just its name

* Enable newly fixed tests

* Rename argument name to relative_assembly_path",2,5,2,disable and tests on extra-platforms (issue_ref)* disable system.io.pipelines.tests and unsafeaccessorstests tests* fix condition* update src/libraries/tests.proj
dotnet/runtime,4ea171394b2419b47cd77faeb26eb0328aa6f6da,New JsonValue derived class for JSON primitives (#116798),2025-07-22 08:40:39+00:00,Pranav Senthilnathan,0,,,8,706,61,new jsonvalue derived class for json primitives (issue_ref)
dotnet/runtime,91f4d57aa502181b4d87f91383defbe7b41f520f,disable multicast tests on AzureLinux (#117694),2025-07-22 08:55:52+00:00,Tomas Weinfurt,0,,,1,5,4,disable multicast tests on azurelinux (issue_ref)
dotnet/runtime,46685466ad5202e81eb3fe858a45465b235a1cdc,Escape dashes in RegexCharClass.DescribeSet (#117909),2025-07-22 12:10:44+00:00,Stephen Toub,0,,,2,2,0,escape dashes in regexcharclass.describeset (issue_ref)
dotnet/runtime,69ee700b0253972a1156b8743fb031860609f2ab,"Update VMR orchestrator property (#117933)

* Update VMR orchestrator property

* Update Versions.props

* Remove comment

---------

Co-authored-by: Alexander Köplinger <alex.koeplinger@outlook.com>",2025-07-22 15:09:56+00:00,Matt Mitchell,0,,,1,1,2,update vmr orchestrator property (issue_ref)* update vmr orchestrator property* update versions.props* remove comment---------
dotnet/runtime,822cb273fe0d97e5ba672f42527ee7a28bdecab2,Validate injected header values in DiagnosticsHandler (#117884),2025-07-22 15:26:49+00:00,Miha Zupan,0,,,3,44,6,validate injected header values in diagnosticshandler (issue_ref)
dotnet/runtime,b131b6d4214d6da3bfc559610021e3444f462051,"adding GetOtherNotificationFlags cDAC API (#117616)

* adding GetOtherNotificationFlags cDAC API

* adding .md file for globals",2025-07-22 15:37:41+00:00,Rachel,0,,,4,46,2,adding getothernotificationflags cdac api (issue_ref)* adding getothernotificationflags cdac api* adding .md file for globals
dotnet/runtime,71322993067b35e4ba424832246de8ad7eb4c8d1,"Ensure that bitwise operations of small masks can still be folded (#117887)

* Ensure that bitwise operations of small masks can still be folded

* Ensure that the ability to negate a comparison isn't regressed",2025-07-22 18:53:39+00:00,Tanner Gooding,1,c11b0e0e17995191cfbc0dc24d12890b19c49c56,Fix SupportsSettingZeroFlag for shift/rotate nodes (#117960),2,46,3,ensure that bitwise operations of small masks can still be folded (issue_ref)* ensure that bitwise operations of small masks can still be folded* ensure that the ability to negate a comparison isn't regressed
dotnet/runtime,2edd5fc63f7999c5e0570f9968f38df0bde0e83b,"JIT: Simplify `Compiler::getHWIntrinsicImmTypes` (#117784)

Numerous SVE2 PRs have had to expand the checks in this function to catch new intrinsics. These checks aren't necessary for computing the intrinsic's immediates' sizes/types. They are essentially debug checks that are (or ought to be) checked downstream. Removing them simplifies later intrinsic additions, and cleans up the function quite a bit.",2025-07-22 19:37:34+00:00,Aman Khalid,0,,,4,36,115,"jit: simplify (issue_ref)numerous sve2 prs have had to expand the checks in this function to catch new intrinsics. these checks aren't necessary for computing the intrinsic's immediates' sizes/types. they are essentially debug checks that are (or ought to be) checked downstream. removing them simplifies later intrinsic additions, and cleans up the function quite a bit."
dotnet/runtime,8fac1c50183af614a99cd9f0c09b18c0eaaaac86,"Revert ""Show specific error message for `dotnet <app_path>` where app_path is…"" (#117937)

This reverts commit 9d6caae8f497009e0970a8863ca9c3b6ac5df168.",2025-07-22 20:52:00+00:00,Elinor Fung,1,6e14d816dd57e47c438ba550eec33887d3115304,"Print specific error when framework in runtimeconfig.json is missing a version (#117914)

Error should now call out the invalid runtimeconfig.json (rather than just failing to find a matching version later):
```
Framework '<name>' is missing a version.
Invalid runtimeconfig.json [<path>]
```",3,1,47,"revert ""show specific error message for where app_path is…"" (issue_ref)this reverts commit 9d6caae8f497009e0970a8863ca9c3b6ac5df168."
dotnet/runtime,c9ccccf02d1f72f318dcaba0a837dbb9800132d9,Use big endian buffers instead of BigInteger for RSA ASN types (#117851),2025-07-22 23:48:11+00:00,Pranav Senthilnathan,0,,,12,265,281,use big endian buffers instead of biginteger for rsa asn types (issue_ref)
dotnet/runtime,b97bebe994f695fc2fccd387ed4a0c8edb8ffb08,"Adding GetMethodTableFieldData cDAC API (#117684)

* adding GetMethodTableFieldData cDAC API",2025-07-23 00:53:42+00:00,Rachel,0,,,9,163,70,adding getmethodtablefielddata cdac api (issue_ref)* adding getmethodtablefielddata cdac api
dotnet/runtime,f4bbedfaf1d0dab571903b008e7944d16bd44d0a,Add host workflow to copilot-instructions.md (#117947),2025-07-23 02:40:21+00:00,Elinor Fung,0,,,1,27,8,add host workflow to copilot-instructions.md (issue_ref)
dotnet/runtime,b306971348daefc65862fc446272a832b17aa71f,"Permit `ByRefLike` types with ctor to be activated. (#117940)

* Permit ByRefLike types with ctor to be activated.

This was an oversight from PR #102636.
Added tests.",2025-07-23 03:41:46+00:00,Aaron Robinson,1,94c22bb2f42ffc197c5e279f5f8edab5ec8a227a,"Fix: Assert failure: Thread::IsObjRefValid (#118307)

Fixes #117961",5,45,17,permit types with ctor to be activated. (issue_ref)* permit byreflike types with ctor to be activated.this was an oversight from pr issue_ref.added tests.
dotnet/runtime,923a3468d7add5112edbcc0eab6c1037109653aa,add missing INS_FLAGS_HasPseudoName (#117941),2025-07-23 09:37:57+00:00,Clinton Ingram,0,,,1,39,39,add missing ins_flags_haspseudoname (issue_ref)
dotnet/runtime,8277598ca9f4b4d637d3aeec32fce0c7fcc254cf,"JIT: Tune CCMP for better Perf (#116445)

This enables more paths for CCMP by doing the following 

- Control when and how many switches are converted to CCMP - A switch conversion
  can span across blocks but CCMP did not check across blocks and hence
  converted potential switch candidates to ccmp partially hence reducing the
  effectiveness of switch. This has been handled in this PR to make sure
  existing switches do not regress. 

- Let more candidates for CCMP go through lowering - There were priori
  conditions for a CCMP to happen. This PR enables CCMP on more nodes while
  carefully checking for which node to convert to CCMP.",2025-07-23 09:40:51+00:00,Khushal Modi,0,,,5,115,46,jit: tune ccmp for better perf (issue_ref)this enables more paths for ccmp by doing the following - control when and how many switches are converted to ccmp - a switch conversion can span across blocks but ccmp did not check across blocks and hence converted potential switch candidates to ccmp partially hence reducing the effectiveness of switch. this has been handled in this pr to make sure existing switches do not regress. - let more candidates for ccmp go through lowering - there were priori conditions for a ccmp to happen. this pr enables ccmp on more nodes while carefully checking for which node to convert to ccmp.
dotnet/runtime,c6bf4d59ec9ee48356cb7a37c312a67906d2ae1b,Add stub implementation of SlhDsaCng and algorithm identifiers (#117889),2025-07-23 09:47:27+00:00,Kevin Jones,0,,,7,138,1,add stub implementation of slhdsacng and algorithm identifiers (issue_ref)
dotnet/runtime,de4440ca15b4af44407befe6762498293398e0af,"Disable LargeUriAndHeaders_Works test on browser (#117946)

* Disable LargeUriAndHeaders_Works test on browser

* Make copilot happy",2025-07-23 09:57:39+00:00,Miha Zupan,1,c99b8572cd8725dc354b85117ca5383819b08c3f,"Revert changes to HttpClient/SslStream certificate revocation check mode defaults (#118456)

* Revert ""Change HttpClient/SslStream default certificate revocation check mode to Online (#116098)""

This reverts commit 6a4b7e3b1eb06d7c4782f692e617555d3fe944a6.

* Reapply ""Change HttpClient/SslStream default certificate revocation check mode to Online (#116098)""

This reverts commit defd136bae2b98daab06ac259d2dea7d67cd5874.

* 2nd try

* Revert test expectations

* revert whitespace changes

* Update src/libraries/System.Net.Http.WinHttpHandler/src/System/Net/Http/WinHttpHandler.cs

* Fix WinHttphandlerTest",1,2,5,disable largeuriandheaders_works test on browser (issue_ref)* disable largeuriandheaders_works test on browser* make copilot happy
dotnet/runtime,9c60dcc59cb31f4386864e358cda9477cfcdc198,Delete dead code in H3StaticTable (#117955),2025-07-23 09:57:50+00:00,Miha Zupan,0,,,1,0,15,delete dead code in h3statictable (issue_ref)
dotnet/runtime,42a2f2544769a6aa72c6a7517e821a67c80c7902,"Make Uri path compression O(n) (#117820)

* Move compress logic to UriHelper

* Add regression test

* Linear impl

* Skip first no-op copy

---------

Co-authored-by: Miha Zupan <mizupan@microsoft.com>",2025-07-23 10:02:12+00:00,Miha Zupan,0,,,5,329,142,make uri path compression o(n) (issue_ref)* move compress logic to urihelper* add regression test* linear impl* skip first no-op copy---------
dotnet/runtime,cd4c7cf548c5d4c54a23d0816f69c16e359dc9ab,"[STJ] Optimize  EnumFieldInfo sorting (#117839)

* [STJ] Only compute PopCount once when topologically sorting Enums

Packs the calculated (once per entry) PopCount into the high 32 bits of the long and the original index into the low 32 bits. Then that can just be sorted using the heavily optimized Array.Sort() method.
After sorting just extract the low 32 bits as the original array index. As before, we negate the actual _PopCount_ to ensure that `Key`s with more on-bits (e.g. more flags represented) will sort **first**.

This trades 2 x O(N log N) [average case] to 2 x O(N^2) [worst case] calls to the `popcount` instruction (or the emulation if NET is not defined) for N **shift-left-32** and **or** + N x **truncate to 32 bits**. It _also_ eliminates the overhead of the `CompareTo` method as it's now a direct `long` low-level compare.

* PR Feedback

Switched to Tuple

* PR Feedback
Switched to native tuple syntax
Co-authored-by: Pranav Senthilnathan <pranav.senthilnathan@live.com>

* Update src/libraries/System.Text.Json/src/System/Text/Json/Serialization/Converters/Value/EnumConverter.cs

---------

Co-authored-by: Eirik Tsarpalis <eirik.tsarpalis@gmail.com>",2025-07-23 11:40:34+00:00,Marc Brooks,0,,,1,19,23,"[stj] optimize enumfieldinfo sorting (issue_ref)* [stj] only compute popcount once when topologically sorting enumspacks the calculated (once per entry) popcount into the high 32 bits of the long and the original index into the low 32 bits. then that can just be sorted using the heavily optimized array.sort() method.after sorting just extract the low 32 bits as the original array index. as before, we negate the actual _popcount_ to ensure that s with more on-bits (e.g. more flags represented) will sort **first**.this trades 2 x o(n log n) [average case] to 2 x o(n^2) [worst case] calls to the instruction (or the emulation if net is not defined) for n **shift-left-32** and **or** + n x **truncate to 32 bits**. it _also_ eliminates the overhead of the method as it's now a direct low-level compare.* pr feedbackswitched to tuple* pr feedbackswitched to native tuple syntax"
dotnet/runtime,5c1ba69eb84169de5559cb6b5d5e6fb4acbc2d1f,JIT: Handle byref<->nint casts on addresses in local morph (#117885),2025-07-23 12:37:34+00:00,Jakob Botsch Nielsen,0,,,2,14,1,jit: handle byref<->nint casts on addresses in local morph (issue_ref)
dotnet/runtime,7721695e214fc3c58c280197fa9127e792b765a3,Add Version.Details.props (#117981),2025-07-23 13:58:51+00:00,Djuradj Kurepa,0,,,1,1,0,add version.details.props (issue_ref)
dotnet/runtime,115a89de9950b4f128eca09a6e1d9bd762e4793a,"Add ExcludeStatics API (#117905)

Add ExcludeStatics API. This property on
RequiresUnreferencedCode and RequiresDynamicCode
indicates that the annotation should not apply to static
members, allowing annotating a type (and suppressing
warnings from virtual members) without also annotating
the static members.",2025-07-23 20:02:53+00:00,Sven Boemer,1,c8d2430d7620bc73c3cb7224c38f3e43c34f991c,"Expose UTF-8 support from FromHexString, TryToHexString, and TryToHexStringLower on the Convert class (#117965)

* Expose UTF-8 support from FromHexString, TryToHexString, and TryToHexStringLower on the Convert class

* Fix copy/paste error

* Fix an assert

* Ensure TryDecodeFrom_Vector128 for UTF8 increments offset correctly",3,12,0,"add excludestatics api (issue_ref)add excludestatics api. this property onrequiresunreferencedcode and requiresdynamiccodeindicates that the annotation should not apply to staticmembers, allowing annotating a type (and suppressingwarnings from virtual members) without also annotatingthe static members."
dotnet/runtime,b019cbd2b96a3a09b344781403aa5f64a646addb,"Add ExcludeStatics support to trimming tools (#117904)

Adds ILLink/ILC/analyzer implementation
for ExcludeStatics on RequiresUnreferencedCode
and RequiresDynamicCode.

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-07-23 20:03:31+00:00,Sven Boemer,0,,,17,476,20,add excludestatics support to trimming tools (issue_ref)adds illink/ilc/analyzer implementationfor excludestatics on requiresunreferencedcodeand requiresdynamiccode.---------
dotnet/runtime,2ff366bcd0476fc8e26f8090da14eb307eb62f29,"Make dotnet --info print all DOTNET_* environment variables (#117797)

`dotnet --info` currently only prints `DOTNET_ROOT` / `DOTNET_ROOT_<ARCH>` if they are set. Expand it to all environment variables with a `DOTNET_` prefix. Also add a line about detecting COMPlus_* variables.

Example:
```
Environment variables:
  DOTNET_ROLL_FORWARD                      [Major]
  DOTNET_ROOT                              [C:\repos\runtime\.dotnet]
  DOTNET_SKIP_FIRST_TIME_EXPERIENCE        [1]
  Detected COMPlus_* environment variable(s). Consider transitioning to DOTNET_* equivalent.
```",2025-07-23 20:35:54+00:00,Elinor Fung,0,,,6,161,52,make dotnet --info print all dotnet_* environment variables (issue_ref) currently only prints / if they are set. expand it to all environment variables with a prefix. also add a line about detecting complus_* variables.example:
dotnet/runtime,d17882c6953a168c0332dfe9aa81dd7dbf2cef79,"Set explicit launch timeout for xharness on Apple mobile (#117979)

* [Apple] Disable failing Apple mobile string tests

* Add LaunchTimeout to XHarnessAppBundleToTest for iOS

* Add LaunchTimeout property to XHarnessAppBundleToTest for Apple mobile targets",2025-07-23 20:41:25+00:00,Milos Kotlar,0,,,2,4,0,set explicit launch timeout for xharness on apple mobile (issue_ref)* [apple] disable failing apple mobile string tests* add launchtimeout to xharnessappbundletotest for ios* add launchtimeout property to xharnessappbundletotest for apple mobile targets
dotnet/runtime,a2025e89b0609c01c3eb88c544e7d5f2f8886468,"Add support for Android RIDs to NativeAOT (#117953)

* Enable building runtime packs for NativeAOT for Android RIDs

* Correctly handle android RIDs in the NativeAOT targets and use a linker flavor that fixes issues in the java toolchain (pulling from the dotnet/android targets)

* Update eng/Subsets.props

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>

* Apply suggestions from code review

Co-authored-by: Michal Strehovský <MichalStrehovsky@users.noreply.github.com>

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>
Co-authored-by: Michal Strehovský <MichalStrehovsky@users.noreply.github.com>",2025-07-23 20:56:34+00:00,Jeremy Koritzinsky,1,d2d41a60cc244416a481b22b082ec657c019e2cd,"Add _UseNativeLibPrefix option for publishing a NativeAOT shared library on Unix (#118299)

Most Unix systems expect the library filename to be libMyLibrary.so / libMyLibrary.dylib. On Java on android, libraries will not be found unless they follow this naming format.

Tring to work around this by renaming the TargetName or AssemblyName can cause rd.xml files to fail to resolve the assembly in ilc, and it doesn't feel right to .

This PR adds a _UseNativeLibPrefix option to add the ""lib"" prefix to the output library when it's a shared library published for a non-windows OS. It's opt-in-only to avoid breaking existing setups, but it might be worth considering as a default in future releases to match the rest of the unix ecosystem.",3,10,5,add support for android rids to nativeaot (issue_ref)* enable building runtime packs for nativeaot for android rids* correctly handle android rids in the nativeaot targets and use a linker flavor that fixes issues in the java toolchain (pulling from the dotnet/android targets)* update eng/subsets.props
dotnet/runtime,541c68e6a90e733f61b50dc098b6584006cfbd18,Respect `ISupportErrorInfo` for `HRESULT` to `Exception` throwing conversion (#117690),2025-07-23 21:40:11+00:00,Jeremy Koritzinsky,1,cb448226551ff48e657ef416f9aa224e3358b963,"Use `nint` for native-sized integers in `Marshal` (#118335)

* Fix CA2020: Prevent behavioral change",20,234,139,respect for to throwing conversion (issue_ref)
dotnet/runtime,17666598b7e5bab1df552a8ec2c1e5d460681355,Remove ExperimentalAttribute from ML-KEM where applicable,2025-07-24 01:42:38+00:00,Kevin Jones,0,,,8,58,18,remove experimentalattribute from ml-kem where applicable
dotnet/runtime,1b243b705198a41df87ec69371e642adaadd8163,"Fix handling of late-discovered atomic lazy loops in compiler / source generator (#117629)

Lazy loops can be made automatically atomic in some situations by the optimizer, in which case their handling significantly simplifies, because a lazy atomic loop just becomes a repeater for the min iteration count. Most viable lazy loops are caught by the optimizer, but some aren't yet are determined to be treatable as atomic at emit time. EmitLazy was handling such cases incorrectly, resulting in a missing branch target and compilation failing. This fixes that two fold:
1. The optimizer is improved, so the discovered tests cases that were triggering this case no longer do.
2. The distinction is eliminated from EmitLazy, as the case is rare and it would take a lot more code to optimize for that case.",2025-07-24 02:10:10+00:00,Stephen Toub,1,655836ed3b8363eb5088c63f388b327fb3f21cb5,Fix Regex source generator multithreading issue (#118086),4,475,480,"fix handling of late-discovered atomic lazy loops in compiler / source generator (issue_ref)lazy loops can be made automatically atomic in some situations by the optimizer, in which case their handling significantly simplifies, because a lazy atomic loop just becomes a repeater for the min iteration count. most viable lazy loops are caught by the optimizer, but some aren't yet are determined to be treatable as atomic at emit time. emitlazy was handling such cases incorrectly, resulting in a missing branch target and compilation failing. this fixes that two fold:1. the optimizer is improved, so the discovered tests cases that were triggering this case no longer do.2. the distinction is eliminated from emitlazy, as the case is rare and it would take a lot more code to optimize for that case."
dotnet/runtime,7195086bd49b98ada2da622c4299597b2dd703c3,"Check DOTNET_HOST_* for host (COREHOST_*) tracing environment variables (#117894)

Respect the `DOTNET_` prefix for `COREHOST_` environment variables as a move toward greater consistency for .NET environment variables",2025-07-24 05:36:17+00:00,Elinor Fung,0,,,5,60,57,check dotnet_host_* for host (corehost_*) tracing environment variables (issue_ref)respect the prefix for environment variables as a move toward greater consistency for .net environment variables
dotnet/runtime,4d631c9d6c7b1e20e1f5a105d0b0a8292b76160b,"Only run host tests for linux-x64 on Azure Linux helix queues (#118005)

We're currently sending tests to both AzureLinux.3.Amd64.Open and Ubuntu.2204.Amd64.Open. Just AzureLinux.3.Amd64.Open should be enough for host tests. I've seen some long wait times and timeouts for host tests sent to Ubuntu.2204.Amd64.Open recently. The libraries tests already run on Ubuntu - they use the live host, so that should have enough basic coverage.",2025-07-24 05:38:06+00:00,Elinor Fung,0,,,1,0,1,"only run host tests for linux-x64 on azure linux helix queues (issue_ref)we're currently sending tests to both azurelinux.3.amd64.open and ubuntu.2204.amd64.open. just azurelinux.3.amd64.open should be enough for host tests. i've seen some long wait times and timeouts for host tests sent to ubuntu.2204.amd64.open recently. the libraries tests already run on ubuntu - they use the live host, so that should have enough basic coverage."
dotnet/runtime,587f703c8dec187fe2de40b8efdb16865fde6839,"fixing a bug in card mark stealing (#117968)

this fixes a problem with card mark stealing where we missed clamping the card clearing by the card stealing unit in `card_transition`. for this bug to appear the following conditions need to be met - 

+ an object A straddles the 2mb card stealing unit and originally for that object a card below the 2mb boundary and a card that corresponds to at least 256 bytes above the 2mb boundary are set. and there are no reference fields inbetween.

+ one thread T0 is working on the 1st 2mb and discovers A and the first set card bit. this card doesn't need to be set, so `poo` is set the address that's described by the 2nd card since there're no reference fields inbetween. so `card_transition` is called which will call `clear_cards` on [1st card, (2nd card. and it stops at this line -
`                card_table [end_word] &= highbits (~0, bits);`
where it sees `end_card` with the 2nd card still set, but before it writes it back to `card_table[end_word]`

+ meanwhile, another thread T1 needs to be working on the memory starting from this 2mb boundary. it discovers the 2nd card doesn't need to be set, and none of the cards that correspond to the card bundle bit needs to be set so it clears the cards and the card bundle bit. 

+ now T0 writes back to `card_table[end_word]` with the 2nd card bit set. 

it's not a problem when a card that shouldn't be set is set, given that its corresponding card bundle bit is also set. but it's definitely a problem if a card is set but its card bundle bit isn't, because next time when we have a cross gen reference, what's supposed to happen in the write barrier is either the card isn't already set and the WB will set the card and its corresponding card bundle bit, or the card is set and the WB wouldn't do anything. but now we have a situation where the card is set but the card bundle bit isn't, it just means the next GC that should be looking at this card wouldn't, if there were no other cards covered by that card bundle bit got newly set by the WB.

the cleanest fix is to make sure we don't step outside of the 2mb boundary when we call `clear_cards` in `card_transition`.

this issue was very hard to observe and debug - full credit goes to @ChrisAhna who also verified the fix.",2025-07-24 06:19:14+00:00,Maoni Stephens,1,27c8534f56dd6648627c5d860004c743a016d362,"Fix GC stress log and analysis (#108655)

* Allow floats to be recorded into the stresslog on 64-bit platforms (as 64-bit floating point values)

* change gc start message and some factoring

* quick fix to allowing gcstart to be a prefix

* StressLogAnalyzer - handle 16 format arguments and avoid buffer overruns

* comment

* get_str_gc_type and remove non-BGC special cases

* fix

* TRACE_GC off

* enable by default

* not always

* LL_INFO1000 for 'Segment mem' message

* fewer messages

* fewer messages

* remove sizeof

* Handle %3s

* comment

* comment

* See if stresslog.h STRESS_LOG_VA is unnecessary

* _DEBUG

* Revert ""See if stresslog.h STRESS_LOG_VA is unnecessary""

This reverts commit 50eb8bdee55d125e514b1c9ed2162518eea345fa.

* redo ifdef

* move a few more dprintfs to 2

* comments

* Fixed missed comments

---------

Co-authored-by: Jeremy Koritzinsky <jekoritz@microsoft.com>
Co-authored-by: Mukund Raghav Sharma <musharm@microsoft.com>",1,7,4,"fixing a bug in card mark stealing (issue_ref)this fixes a problem with card mark stealing where we missed clamping the card clearing by the card stealing unit in . for this bug to appear the following conditions need to be met - + an object a straddles the 2mb card stealing unit and originally for that object a card below the 2mb boundary and a card that corresponds to at least 256 bytes above the 2mb boundary are set. and there are no reference fields inbetween.+ one thread t0 is working on the 1st 2mb and discovers a and the first set card bit. this card doesn't need to be set, so is set the address that's described by the 2nd card since there're no reference fields inbetween. so is called which will call on [1st card, (2nd card. and it stops at this line -where it sees with the 2nd card still set, but before it writes it back to + meanwhile, another thread t1 needs to be working on the memory starting from this 2mb boundary. it discovers the 2nd card doesn't need to be set, and none of the cards that correspond to the card bundle bit needs to be set so it clears the cards and the card bundle bit. + now t0 writes back to with the 2nd card bit set. it's not a problem when a card that shouldn't be set is set, given that its corresponding card bundle bit is also set. but it's definitely a problem if a card is set but its card bundle bit isn't, because next time when we have a cross gen reference, what's supposed to happen in the write barrier is either the card isn't already set and the wb will set the card and its corresponding card bundle bit, or the card is set and the wb wouldn't do anything. but now we have a situation where the card is set but the card bundle bit isn't, it just means the next gc that should be looking at this card wouldn't, if there were no other cards covered by that card bundle bit got newly set by the wb.the cleanest fix is to make sure we don't step outside of the 2mb boundary when we call in .this issue was very hard to observe and debug - full credit goes to @chrisahna who also verified the fix."
dotnet/runtime,5c4ebcc5dd9d3ac188016bea03a522a8c4a449e9,Lock over the same object to serialize access to the buffers (#117982),2025-07-24 07:49:33+00:00,Milos Kotlar,0,,,1,7,6,lock over the same object to serialize access to the buffers (issue_ref)
dotnet/runtime,3c94a470bc7fbdabafdf5d224b48dc5500e1b3b3,"[wasm][coreclr] Get further in the runtime initialization (#116383)

* [wasm][coreclr] Get further in the runtime initialization

Add corewasmhost binary to test runtime initialization

Fix linking of the host binary with coreclr and interpreter

Allow calling interpreter with arguments and handle return value

Use fake precode stubs to pass the precode type and method desc

Make alternate signal stack calls no-op on wasm

Implement CallDescrWorkerInternal on wasm

Fix PE image loading without RTR on wasm

Do not use unsupported syscalls

* Fix condition

Co-authored-by: Adeel Mujahid <3840695+am11@users.noreply.github.com>

* Fix build

The jit helpers are used later unconditionally

* Update after merge

* Feedback

* Update after merge

* Fix release build offsets

* Build Debug runtime configuration on CI, so that interpreter is enabled

* Fix build

* Enable interpreter in all configuration on wasm

Fix build

* Build in Release again as we are missing debug packages

* Move inline keyword

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Feedback

* Feedback

* Fix release build

* Feedback

Do not special case missing mono_wasm_browser_entropy and just add it
to helpers with an assert

* Feedback

* Feedback

Use MethodDesc's GetInterpreterCode() instead of GetNativeCode()

* Feedback

Do not use FEATURE_JIT for callstub exclusion, until we support it on wasm, use TARGET_WASM instead.

Also update build after merge

* Feedback

Use PORTABILITY_ASSERT

* Feedback, add FEATURE_PEIMAGE_FLAT_LAYOUT

* Revert mapping changes for PE loaded layout

We use the flat layout now

* Feedback, change call order of execute interp method

* Feedback, change condition to avoid dynamic loads in corhost

* Increase stub size to fit interpreter stub data

This way we get further in the initialization

    log: stdout: Interpreter compile method System.AppContext:Setup(ptr,ptr,int)
    log: stdout: Interpreter compile method System.Diagnostics.Debug:Assert(bool,System.String)
    log: stdout: Interpreter compile method System.Collections.Generic.Dictionary`2[System.__Canon,System.__Canon]:.ctor(int,System.Collections.Generic.IEqualityComparer`1[System.__Canon])
    log: stdout: Interpreter compile method System.Diagnostics.Debug:Assert(bool,System.String,System.String)
    log: stdout: Interpreter compile method System.Collections.Generic.Dictionary`2[System.__Canon,System.__Canon]:.ctor(int)

* Update precode sizes, feedback and size check

* Feedback, TODO, transition block

* Feedback

* Use coreclr_static library for wasm

And do not build coreclr

* Feedback

Disable larger part of GCToOSInterface::Initialize than before

* Feedback

Make InitializeFlushProcessWriteBuffers no-op on wasm

* Write barriers helper updated

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Write barriers helper updated

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Feedback

Return false from ExecutableAllocator::IsDoubleMappingEnabled instead
of making the double mapping init no-op on wasm

* Make InitJITWriteBarrierHelpers no-op on wasm

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Feedback

Fix few asserts

* Feedback

Define PEIMAGE_FLAT_LAYOUT_ONLY in inc\switches.h

* Feedback

Replace __wasm__ where appropriate

* Feedback

Do not use __builtin_return_address on wasm

* Feedback

Add InvokeCalliStub to helpers

* Feedback

Update comments and remove unwanted fields

* Feedback

Add comment to the wasm specific call description data fields

* Feedback

Add portability assert in DispatchCallSimple to light up if we get
called through this path

* Fix build

* Fix non-wasm build

* Feedback

Use FEATURE_JIT instead of not WASM check

* Feedback

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Feedback

* Feedback

Disable stack limit assert only in Debug configuration

* Feedback

Return flat layout from GetLoadedLayout when PEIMAGE_FLAT_LAYOUT_ONLY
switch is enabled

* Feedback

Add more explanation in the comment and use the CodeSize in the assert

* Add comment

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Feedback

Move _ReturnAddress macro ro pal.h

* Fix build

* Feedback

Make FlushProcessWriteBuffers no-op on wasm

* Feedback

Fix path

* Fix whitespace

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Prefer TARGET_WASM

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Update src/coreclr/pal/src/init/pal.cpp

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Prefer TARGET_WASM

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Prefer TARGET_WASM

* Few more places to use more general TARGET_WASM

* Prefer TARGET_WASM

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

---------

Co-authored-by: Adeel Mujahid <3840695+am11@users.noreply.github.com>
Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-07-24 08:39:20+00:00,Radek Doulik,1,90fc213944e07b2f8a1c391483f9c294245af28a,"Fix two ExInfo offsets and add missing asserts for them (#120307)

There was a missing assert in AsmOffsets.cs for the
ExInfo::m_propagateExceptionCallback/Context and the offset was incorrect for 64 bit architectures.

This change fixes it.",54,1076,99,[wasm][coreclr] get further in the runtime initialization (issue_ref)* [wasm][coreclr] get further in the runtime initializationadd corewasmhost binary to test runtime initializationfix linking of the host binary with coreclr and interpreterallow calling interpreter with arguments and handle return valueuse fake precode stubs to pass the precode type and method descmake alternate signal stack calls no-op on wasmimplement calldescrworkerinternal on wasmfix pe image loading without rtr on wasmdo not use unsupported syscalls* fix condition
dotnet/runtime,831523d94fd1f13c56292abfe9173155be84df6e,"Expand set of known header names and values (#117989)

* Collection expressions for known values

* Simplify new()

* Expand set of known header names and values

* Also add text/plain without a space",2025-07-24 11:10:58+00:00,Miha Zupan,0,,,5,169,112,expand set of known header names and values (issue_ref)* collection expressions for known values* simplify new()* expand set of known header names and values* also add text/plain without a space
dotnet/runtime,167d862993217db12098bb498ca34f2fc3620fc6,"Save and restore `Thread.CurrentThread._synchronizationContext` for synchronous runtime async calls (#117725)

This implements the remaining handling: saving and restoring
`Thread.CurrentThread._synchronizationContext` around runtime async calls that
finish synchronously. Lots of trickiness in representing this in the JIT. We
introduce a new ""suspended indicator"" local that is defined by async calls and
that the front end uses when it expands IR that restores the field.

Plenty of optimization opportunities remaining, including a simple jump
threading optimization we should be able to do to make the suspension indicator
variable disappear in common cases (all cases except when resuming with an
exception).",2025-07-24 11:40:56+00:00,Jakob Botsch Nielsen,1,c58b6597c4f7112406b305e41eac99954cebbaa4,JIT: Fix check for cast type for cast on top of address (#118019),22,582,138,"save and restore for synchronous runtime async calls (issue_ref)this implements the remaining handling: saving and restoring around runtime async calls thatfinish synchronously. lots of trickiness in representing this in the jit. weintroduce a new ""suspended indicator"" local that is defined by async calls andthat the front end uses when it expands ir that restores the field.plenty of optimization opportunities remaining, including a simple jumpthreading optimization we should be able to do to make the suspension indicatorvariable disappear in common cases (all cases except when resuming with anexception)."
dotnet/runtime,d7f58ab2ea25c604fdc7a6d8a56896b85fc5f0cc,[browser] Check also corePdb to see if we have any pdb to start debugging (#117978),2025-07-24 14:50:58+00:00,Marek Fišera,0,,,2,7,1,[browser] check also corepdb to see if we have any pdb to start debugging (issue_ref)
dotnet/runtime,92f6decfdf4dac8b7f4d014d8542db828d954929,Update mentionees for apple mobile (#118016),2025-07-24 15:12:28+00:00,Ivan Povazan,0,,,1,0,3,update mentionees for apple mobile (issue_ref)
dotnet/runtime,3cd8c22a2fbf8fc37e842e8f2c29eed16eaee211,"Platform dependency doc changes (#118024)

* Delete ""Submitting Changes"" section",2025-07-24 16:00:25+00:00,Matt Thalman,0,,,2,0,7,"platform dependency doc changes (issue_ref)* delete ""submitting changes"" section"
dotnet/runtime,22a2c4d8a8c7ad09d97427bcdeaa99773eeb61e0,arm64: Add remaining Sve2 Saturating functions (#117934),2025-07-24 16:06:58+00:00,Jonathan Davies,0,,,10,1134,3,arm64: add remaining sve2 saturating functions (issue_ref)
dotnet/runtime,45f7fc45f8cc377bc231fd280bf93b8b44585e26,"Make IsAlive test reliable and re-enable it for crossgen2 (#117987)

* Make IsAlive test reliable and re-enable it for crossgen2
Co-authored-by: Jan Kotas <jkotas@microsoft.com>
Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-07-24 16:35:30+00:00,Katelyn Gadd,0,,,2,17,15,make isalive test reliable and re-enable it for crossgen2 (issue_ref)* make isalive test reliable and re-enable it for crossgen2
dotnet/runtime,e69e2b326901e0c96aff4e6f28941423d402908b,[PERF] Add release/10.0 to trigger branches in perf.yml (#117994),2025-07-24 18:04:22+00:00,Parker Bibus,0,,,1,1,0,[perf] add release/10.0 to trigger branches in perf.yml (issue_ref)
dotnet/runtime,078f8cafd3013a49f9a29fa2413eefa0909b681b,"Adding GetClrNotification cDAC API (#117737)

* Adding GetClrNotification cDAC API",2025-07-24 18:10:24+00:00,Rachel,0,,,3,46,1,adding getclrnotification cdac api (issue_ref)* adding getclrnotification cdac api
dotnet/runtime,c0f4c7dd391a6b89ae91ff9659a692cad285a402,"Support auto-atomicity on {lazy} loops (#117943)

Today we only support conversion of loops to atomic loops for single-character loops (e.g. a* or [abc]*). This PR augments the logic to support arbitrary loops, enabling many more loops to become atomic.",2025-07-24 18:15:53+00:00,Stephen Toub,0,,,4,241,105,"support auto-atomicity on {lazy} loops (issue_ref)today we only support conversion of loops to atomic loops for single-character loops (e.g. a* or [abc]*). this pr augments the logic to support arbitrary loops, enabling many more loops to become atomic."
dotnet/runtime,dd7a848e0fcad055e10ab66dd3787fb8c881b67d,[APX] Enable APX-EVEX.ZU for SETcc instructions (#117258),2025-07-24 18:28:57+00:00,Ruihan-Yin,1,123627ba0f80c268cbde5beb6db42dc5c12d150d,[APX] fix a few emitter bugs. (#117791),10,270,67,[apx] enable apx-evex.zu for setcc instructions (issue_ref)
dotnet/runtime,9e82819bec670c2e7ab5fc15e79794818604c2f0,Unquote primitive string values in JsonNode.ToString() (#117993),2025-07-24 18:57:40+00:00,Pranav Senthilnathan,0,,,3,220,218,unquote primitive string values in jsonnode.tostring() (issue_ref)
dotnet/runtime,2a7789d82afefb649ba26d0d80e7b48c472410fd,"Remove lifetime2 test and remove its crossgen2 test exclusion (#117995)

Remove JIT/directed/lifetime/lifetime2 test because it is unreliable by construction",2025-07-24 19:36:46+00:00,Katelyn Gadd,0,,,3,0,233,remove lifetime2 test and remove its crossgen2 test exclusion (issue_ref)remove jit/directed/lifetime/lifetime2 test because it is unreliable by construction
dotnet/runtime,9da102bd04b3c220e2a2ac4c1d6fcfd6ec2787bb,"Emit IsAotCompatible attribute metadata (#118008)

This could be used for #117712 and is a useful piece of metadata.

I was going back and forth between placing this here or somewhere in the dotnet/sdk repo but since this is related to the analyzer, it feels okay here too.",2025-07-24 20:44:47+00:00,Michal Strehovský,0,,,1,4,0,"emit isaotcompatible attribute metadata (issue_ref)this could be used for issue_ref and is a useful piece of metadata.i was going back and forth between placing this here or somewhere in the dotnet/sdk repo but since this is related to the analyzer, it feels okay here too."
dotnet/runtime,1e860a4bd3915f35d51cc079cff212322a6991e7,Move RuntimeAsync ifdef to env variable (#118011),2025-07-24 22:18:31+00:00,Andy Gocke,0,,,6,24,9,move runtimeasync ifdef to env variable (issue_ref)
dotnet/runtime,27c8534f56dd6648627c5d860004c743a016d362,"Fix GC stress log and analysis (#108655)

* Allow floats to be recorded into the stresslog on 64-bit platforms (as 64-bit floating point values)

* change gc start message and some factoring

* quick fix to allowing gcstart to be a prefix

* StressLogAnalyzer - handle 16 format arguments and avoid buffer overruns

* comment

* get_str_gc_type and remove non-BGC special cases

* fix

* TRACE_GC off

* enable by default

* not always

* LL_INFO1000 for 'Segment mem' message

* fewer messages

* fewer messages

* remove sizeof

* Handle %3s

* comment

* comment

* See if stresslog.h STRESS_LOG_VA is unnecessary

* _DEBUG

* Revert ""See if stresslog.h STRESS_LOG_VA is unnecessary""

This reverts commit 50eb8bdee55d125e514b1c9ed2162518eea345fa.

* redo ifdef

* move a few more dprintfs to 2

* comments

* Fixed missed comments

---------

Co-authored-by: Jeremy Koritzinsky <jekoritz@microsoft.com>
Co-authored-by: Mukund Raghav Sharma <musharm@microsoft.com>",2025-07-24 23:27:59+00:00,Mark Plesko,1,811da242e182f376b4d915ec7abb16c1e852462e,"fixing a regression in regions related to when we make threads that allocate UOH objects wait during a BGC (#118567)

+ don't apply that policy that says ""if the begin UOH size is 2x the last gen2's UOH end size, always wait"" for regions as it doesn't make sense - regions could have released a lot of memory to the UOH free lists in the last gen2 GC so it's not uncommon that the begin UOH size would be a lot larger than last gen2 GC's end size.
+ this kind of perf fixes can always regress someone. Due to the very different perf characteristics of regions wrt this, it's not practical to keep the original behavior for everyone. So I'm adding a config for scenarios that allocate heavily on UOH therefore can be paused during a BGC. If you're willing to accept larger UOH sizes in exchange for fewer pauses, you can use the UOHWaitBGCSizeIncPercent config to increase the wait ratio. Likewise, set it to use a smaller ratio if you observe that UOH grows too large during BGCs. I will be submitting a doc PR for this.
+ refactored various things kept separately for LOH and POH into UOH generations. I had a much more complicated fix before and having to update both generations was tedious so I took the opportunity to refactor. I didn't go with that fix (because it regressed edge cases too much and there wasn't a good way to make it work without way riskier changes. But I kept the refactoring changes as it just makes the code cleaner.
+ fixed how the current UOH size is computed so it's updated correctly (it had a racing condition as `bgc_uoh_alloc_clr` and `adjust_limit_clr` would release the msl).
+ got rid of the unproductive code in `new_allocation_allowed` and `allocate_uoh`.
+ misc - fixed an error in a comment related to how free regions are aged.

note that it's better to add additional diagnostics info (in a separate PR), to indicate how much the UOH size had changed since the start of that BGC and how much UOH allocation was made during the BGC. Right now the `size_before` we set for UOH is larger than it actually is.",8,181,55,"fix gc stress log and analysis (issue_ref)* allow floats to be recorded into the stresslog on 64-bit platforms (as 64-bit floating point values)* change gc start message and some factoring* quick fix to allowing gcstart to be a prefix* stressloganalyzer - handle 16 format arguments and avoid buffer overruns* comment* get_str_gc_type and remove non-bgc special cases* fix* trace_gc off* enable by default* not always* ll_info1000 for 'segment mem' message* fewer messages* fewer messages* remove sizeof* handle %3s* comment* comment* see if stresslog.h stress_log_va is unnecessary* _debug* revert ""see if stresslog.h stress_log_va is unnecessary""this reverts commit 50eb8bdee55d125e514b1c9ed2162518eea345fa.* redo ifdef* move a few more dprintfs to 2* comments* fixed missed comments---------"
dotnet/runtime,b20632e5de57fae796570e06205bfd844c2f5f37,"Adding GetAppDomainData cDAC API (#117827)

* adding GetAppDomainData cDAC API",2025-07-24 23:33:38+00:00,Rachel,0,,,12,228,29,adding getappdomaindata cdac api (issue_ref)* adding getappdomaindata cdac api
dotnet/runtime,a791373ecee502895eaa6b3c5e63d1baf6bd74f9,"[mono][aot] Prevent localloc in a loop during constrained gsharedvt calls (#117679)

* [mono][aot] Prevent localloc in a loop during constrained gsharedvt calls

We create a var that stores the address of some localloc memory. This var is nulled at method entry. In every place where we need to obtain temporary localloc memory, we check if the cache var was initialized, if not we do a localloc, otherwise we use the cached ptr as the temporary memory buffer. This commit adds 2 such caches because the constrained gsharedvt call can require 2 separate temporary buffers.

* Re-enable test

* milos review",2025-07-25 05:53:14+00:00,Vlad Brezae,1,4e7ba241ea36f6cee257bf3639715e14b2a44b9e,"[S390X] Add simd fallback support for unsupported s390x architectures (#118376)

* [S390X] Add simd fallback support for unsupported s390x architectures

Vector facility was introduced in the z13, which majorly
introduces vector int/short/long/double variants of the
vector instructions. with the release of z14 we introduced
vector float variant as part of vector enhancement facility 1.
This patch majorly supports z13 and previous generations.

* Apply suggestions from code review

fix code style

Co-authored-by: kasperk81 <83082615+kasperk81@users.noreply.github.com>

* fix errors
* fix test case failures on arm64
* fix more code style reviews

* address review comments

---------

Co-authored-by: kasperk81 <83082615+kasperk81@users.noreply.github.com>",3,66,11,"[mono][aot] prevent localloc in a loop during constrained gsharedvt calls (issue_ref)* [mono][aot] prevent localloc in a loop during constrained gsharedvt callswe create a var that stores the address of some localloc memory. this var is nulled at method entry. in every place where we need to obtain temporary localloc memory, we check if the cache var was initialized, if not we do a localloc, otherwise we use the cached ptr as the temporary memory buffer. this commit adds 2 such caches because the constrained gsharedvt call can require 2 separate temporary buffers.* re-enable test* milos review"
dotnet/runtime,794a7ee746b4731af718783efb82560d107be34f,Remove active issue comment of a closed issue. (#117808),2025-07-25 07:51:15+00:00,Ilona Tomkowicz,0,,,1,0,1,remove active issue comment of a closed issue. (issue_ref)
dotnet/runtime,b7db8f4b67f09cab3215aab89a1955aa6198907a,"[clr-interp] Include clrinterpreter library in the iOS app bundle (#117277)

* Install clrinterpreter into the sharedFramework to include it in the iOS bundle

* Use static clrinterpreter on iOS

* Fix build errors

* Add functional test

* Fix build errors

* Build smoke tests

* Update executable name placeholder in runtime-coreclr.m

* Set environment variables to interp method

* Set AdditionalXHarnessArguments

* Set xharness env variables in helix

* Add support for interpreter methods in AppleAppBuilder

* Add InterpreterMethods property to AppleBuild.targets

* Update build configuration to Debug and fix condition

* Add environment variables DOTNET_InterpMode and DOTNET_ReadyToRun

* Refactor AppleAppBuilder to support environment variables

* Fix condition

* Update PlatformManifestFileEntry conditions to use RuntimeConfiguration

* Test build without PlatformManifestFileEntry

* Add PlatformManifestFileEntry for clrinterpreter

* Update FEATURE_INTERPRETER logic to use uppercase build type for Debug and Checked configurations

* Update PlatformManifestFileEntry for clrinterpreter

* Support optional installation of clr components

* Move functional test to extra-platforms

* Remove condition and clean up CMakeLists

* Remove condition from iossimulator  job

* Remove redundant JIT static variable from coreclr cmake configuration

* Fix build",2025-07-25 09:44:03+00:00,Milos Kotlar,1,abc4c652eca9e02c4ff5d4dac0ceb58a4a15b8e3,Fix -msbuild build for Clr subset (#118206),14,165,24,[clr-interp] include clrinterpreter library in the ios app bundle (issue_ref)* install clrinterpreter into the sharedframework to include it in the ios bundle* use static clrinterpreter on ios* fix build errors* add functional test* fix build errors* build smoke tests* update executable name placeholder in runtime-coreclr.m* set environment variables to interp method* set additionalxharnessarguments* set xharness env variables in helix* add support for interpreter methods in appleappbuilder* add interpretermethods property to applebuild.targets* update build configuration to debug and fix condition* add environment variables dotnet_interpmode and dotnet_readytorun* refactor appleappbuilder to support environment variables* fix condition* update platformmanifestfileentry conditions to use runtimeconfiguration* test build without platformmanifestfileentry* add platformmanifestfileentry for clrinterpreter* update feature_interpreter logic to use uppercase build type for debug and checked configurations* update platformmanifestfileentry for clrinterpreter* support optional installation of clr components* move functional test to extra-platforms* remove condition and clean up cmakelists* remove condition from iossimulator job* remove redundant jit static variable from coreclr cmake configuration* fix build
dotnet/runtime,e1d64028931c5d9d179d3281436c1fb8cb679105,Allow stack size to be configured (#110455),2025-07-25 09:51:33+00:00,Keegan,1,49f5984113203b5567e522e97053a7b1cb890f48,Fix stack limits condition (#118077),10,61,6,allow stack size to be configured (issue_ref)
dotnet/runtime,67837792faa88beb3f44105dfa7a3a430961ff12,"[Android][CoreCLR] Use relative path instead of just the filename when probing for assembly (#118054)

* Use the relative path to the assembly instead of just its name

* Enable newly fixed tests

* Rename argument name to relative_assembly_path",2025-07-25 12:21:49+00:00,David Nguyen,1,c87888ac273f859e46370aa8fbde25330fb7a3f2,"[Android][CoreCLR] Add runtimeconfig.json support for test host (#117980)

* Add placeholders for setting AppContext keys and values

* For CoreCLR, add runtimeconfig.json parsing and set AppContext keys and values by replacing the template placeholders

* Setting the env variables is now redundant

* Enable newly fixed tests

* Enable the test

* Add a null check instead of using the null-forgiving operator

* Refactoring: rename method and variables and add comments

* Rename variable",2,5,11,[android][coreclr] use relative path instead of just the filename when probing for assembly (issue_ref)* use the relative path to the assembly instead of just its name* enable newly fixed tests* rename argument name to relative_assembly_path
dotnet/runtime,1e7433e183629a797e771191d3b5327103ec6199,Implement GC bridge VM support in NativeAOT (#117738),2025-07-25 15:38:19+00:00,Jeremy Koritzinsky,0,,,17,372,36,implement gc bridge vm support in nativeaot (issue_ref)
dotnet/runtime,e831ce8b6d14669b9a2d0dfbe4d16e649352f94a,"JIT: Rework `*ComplexityExceeds` helpers to take caller-defined complexity computation (#118046)

Allow Compiler::gtComplexityExceeds et al to compute the complexity of a tree as something other than the count of its nodes by relying on a callback function. We don't diverge from this definition of complexity anywhere at the moment, though this means callers can compute additional information, like the total node count for a block or loop, without needing out parameters by simply including such computations in the callback. I was motivated to do this by a want for additional insight into the optimization potential of loop inversion candidates, like whether a loop might also benefit from cloning because it contains bounds checks. Such information can be included in the callback to the complexity check.

In the near future, we might want to diverge from the number of nodes in a code segment as our definition of complexity and employ something more sophisticated. These changes should make that easy to try out.",2025-07-25 17:21:25+00:00,Aman Khalid,1,61126dfbc3b933bcd97b49aec379acca57aa2c12,"JIT: fix issue in conditional escape analysis (#118214)

Conditional escape analysis is triggered by a GDV guarded call to
`GetEnumerator`. On the fast path this call is devirtualized and inlined
and exposes one or more enumerator object allocations. The ""more"" allows
for collections to do special-case optimizations like returning a static
enumerator object for an empty collection.

When there is more than one enumerator object allocation under the GDV guard,
ensure that only the allocation that was analyzed for conditional escape is stack
allocated; the remaining enumerators will end up on the ""slow path"" where enumeration
happens via interface calls, and so must be heap objects.

If we clone an allocation site the allocation block won't be in
the DFS tree. Such sites will not be in an enumerator GDV hammock
so can be exempted from checking.

Fixes #111922.",11,218,197,"jit: rework helpers to take caller-defined complexity computation (issue_ref)allow compiler::gtcomplexityexceeds et al to compute the complexity of a tree as something other than the count of its nodes by relying on a callback function. we don't diverge from this definition of complexity anywhere at the moment, though this means callers can compute additional information, like the total node count for a block or loop, without needing out parameters by simply including such computations in the callback. i was motivated to do this by a want for additional insight into the optimization potential of loop inversion candidates, like whether a loop might also benefit from cloning because it contains bounds checks. such information can be included in the callback to the complexity check.in the near future, we might want to diverge from the number of nodes in a code segment as our definition of complexity and employ something more sophisticated. these changes should make that easy to try out."
dotnet/runtime,09aa370dea075acf0b917b63bd41ebf4b92c1269,"Add `LocalPath` property to `RuntimeFile` and `ResourceAssembly` for writing/reading deps.json (#118034)

- Add `LocalPath` property and constructors taking a local path to `RuntimeFile` and `ResourceAssembly`
- Update JSON serialization/deserialization to handle the new property",2025-07-25 17:43:20+00:00,Elinor Fung,0,,,8,351,210,add property to and for writing/reading deps.json (issue_ref)- add property and constructors taking a local path to and - update json serialization/deserialization to handle the new property
dotnet/runtime,8433b6279f88807a68fe5f2024ec69ad7750ac33,ML-DSA certificate accessors for M.B.C. (#117907),2025-07-25 19:58:05+00:00,Pranav Senthilnathan,0,,,16,1258,859,ml-dsa certificate accessors for m.b.c. (issue_ref)
dotnet/runtime,cf41052d643c1912cefc0d1d7aeb428388bcd220,KeyGen and OSSL support for managed Composite ML-DSA + RSA (#117856),2025-07-25 20:32:52+00:00,Pranav Senthilnathan,0,,,9,415,10,keygen and ossl support for managed composite ml-dsa + rsa (issue_ref)
dotnet/runtime,f27927a399ed1c994343b136ff005183cc6588d1,"Simplify lazy initialization by removing `Volatile.Read` (#117868)

Replaced `Volatile.Read` with plain field reads. The memory barriers provided by `CompareExchange` are
sufficient to ensure thread safety and visibility, making `Volatile.Read`
unnecessary.

Follow-up to https://github.com/dotnet/runtime/pull/117817

Related: https://github.com/dotnet/runtime/pull/100969

cc: @stephentoub

Co-authored-by: Tanner Gooding <tagoo@outlook.com>",2025-07-25 23:25:58+00:00,xtqqczze,0,,,2,2,6,"simplify lazy initialization by removing (issue_ref)replaced with plain field reads. the memory barriers provided by aresufficient to ensure thread safety and visibility, making unnecessary.follow-up to related: cc: @stephentoub"
dotnet/runtime,c3d25761312fb60016aba47257059fe7fdff2f49,"Re-enable Method002 test on crossgen (#118035)

#109202 does not reproduce for me locally on Windows and does not seem to reproduce on CI anymore either.",2025-07-26 00:06:01+00:00,Katelyn Gadd,0,,,1,0,3,re-enable method002 test on crossgen (issue_ref)issue_ref does not reproduce for me locally on windows and does not seem to reproduce on ci anymore either.
dotnet/runtime,d58e9aa10b5bf782a9a1d86c7481100fc52a7483,"Re-enable VarianceSafety tests on crossgen (#118036)

#109201 does not reproduce for me locally on Windows, and does not appear to reproduce on CI anymore.",2025-07-26 00:06:23+00:00,Katelyn Gadd,0,,,1,0,3,"re-enable variancesafety tests on crossgen (issue_ref)issue_ref does not reproduce for me locally on windows, and does not appear to reproduce on ci anymore."
dotnet/runtime,7f96aef45e2312c3c5927346de0b6e105246ea85,"Check source and destination spans overlap in TryNormalize method (#118047)

Co-authored-by: Stephen Toub <stoub@microsoft.com>",2025-07-26 15:23:25+00:00,Tarek Mahmoud Sayed,0,,,2,10,0,check source and destination spans overlap in trynormalize method (issue_ref)
dotnet/runtime,197f38a02be8f55311b56162a1cc0df96e804ac9,"Coalesce adjacent equivalent anchors (#118083)

Sometimes you see patterns where folks have put the same anchor multiple times in a row, e.g. `\b\b`. The subsequent anchors are nops and can just be removed.",2025-07-26 17:37:13+00:00,Stephen Toub,0,,,2,24,0,"coalesce adjacent equivalent anchors (issue_ref)sometimes you see patterns where folks have put the same anchor multiple times in a row, e.g. . the subsequent anchors are nops and can just be removed."
dotnet/runtime,a8c169a07cf5d44b537e1ae518df5032a174d3f4,"Replace nop regex loops with empty (#118079)

When loop bodies end up containing zero-width assertions and the loop has a min bound of 0, the whole loop can be removed, as the zero-width assertion may or may not apply.",2025-07-26 20:20:36+00:00,Stephen Toub,0,,,3,34,4,"replace nop regex loops with empty (issue_ref)when loop bodies end up containing zero-width assertions and the loop has a min bound of 0, the whole loop can be removed, as the zero-width assertion may or may not apply."
dotnet/runtime,82d6d4678a8dc4661d2ab134cc1ff28922ae9f68,"Implement `Unsafe.IsAddressLessThanOrEqualTo` & `Unsafe.IsAddressGreaterThanOrEqualTo` (#117800)

* Implement Unsafe. IsAddressLessThanOrEqualTo & Unsafe.IsAddressGreaterThanOrEqualTo

* Update vectorization-guidelines.md

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-07-27 00:33:19+00:00,Hamish Arblaster,0,,,15,184,60,implement & (issue_ref)* implement unsafe. isaddresslessthanorequalto & unsafe.isaddressgreaterthanorequalto* update vectorization-guidelines.md
dotnet/runtime,c74a167b25d61a79547da23d2936883c41fd9061,"Remove capture groups from negative lookarounds (#118084)

Any captures performed inside of negative lookarounds do not persist to outside of the lookaround. As such, as long as there are no backreferences inside of the lookaround that would read on those captures, we can eliminate the capturing.",2025-07-27 21:31:32+00:00,Stephen Toub,0,,,2,71,0,"remove capture groups from negative lookarounds (issue_ref)any captures performed inside of negative lookarounds do not persist to outside of the lookaround. as such, as long as there are no backreferences inside of the lookaround that would read on those captures, we can eliminate the capturing."
dotnet/runtime,7a6890342caa6360b4e8cb23c598b63046320088,"Remove positive lookarounds that wrap only zero-width assertions (#118091)

A positive lookahead effectively changes its contents to be zero-width. If the contents is already zero-width, the lookaround adds no value.",2025-07-28 00:16:09+00:00,Stephen Toub,0,,,4,41,13,"remove positive lookarounds that wrap only zero-width assertions (issue_ref)a positive lookahead effectively changes its contents to be zero-width. if the contents is already zero-width, the lookaround adds no value."
dotnet/runtime,dc6ac3a2898996f967c49037e8949055ba5a0a9b,"Normalize some well-known negated sets (#118106)

Some folks end up writing sets like `[^\d]` instead of `\D`, `[^\w]` instead of `\W`, or `[^\s]` instead of `\S`. This defeats some special recognition of the common \D, \W, and \S sets. Normalize them.",2025-07-28 03:57:57+00:00,Stephen Toub,0,,,3,20,0,"normalize some well-known negated sets (issue_ref)some folks end up writing sets like instead of , instead of , or instead of . this defeats some special recognition of the common \d, \w, and \s sets. normalize them."
dotnet/runtime,c87888ac273f859e46370aa8fbde25330fb7a3f2,"[Android][CoreCLR] Add runtimeconfig.json support for test host (#117980)

* Add placeholders for setting AppContext keys and values

* For CoreCLR, add runtimeconfig.json parsing and set AppContext keys and values by replacing the template placeholders

* Setting the env variables is now redundant

* Enable newly fixed tests

* Enable the test

* Add a null check instead of using the null-forgiving operator

* Refactoring: rename method and variables and add comments

* Rename variable",2025-07-28 07:41:29+00:00,David Nguyen,1,1d8a341167199226954da0bee0d21f1fdd020e5d,"[Android] Prevent race condition by synchronizing buffer access (#117950)

* Dispose SafeSslHandle and use thread-safe operations on PAL layer

* Refactor SSL stream handling to remove atomic operations and use SafeHandle

* Remove newline

* Improve thread safety during disposal

* Revert changes

* Fix disposal logic in SafeDeleteSslContext to prevent double disposal. Fix race condition on _disposed

* Update SafeDeleteSslContext to manage GC handles using a static ConcurrentDictionary

* Update src/libraries/System.Net.Security/src/System/Net/Security/Pal.Android/SafeDeleteSslContext.cs

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Eliminate GC handle  ConcurrentDictionary

* Add managed context cleanup

* Improve exception handling in WriteToConnection and ReadFromConnection methods

* Replace object lock with class

* Always release native _sslContext

* Improve error handling and refactor WriteToConnection and ReadFromConnection methods to use WeakGCHandle

* Fix formatting

* Update src/libraries/System.Net.Security/src/System/Net/Security/Pal.Android/SafeDeleteSslContext.cs

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Replace handle.Free() with handle.Dispose()

* Refactor SSL stream cleanup

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",5,73,25,"[android][coreclr] add runtimeconfig.json support for test host (issue_ref)* add placeholders for setting appcontext keys and values* for coreclr, add runtimeconfig.json parsing and set appcontext keys and values by replacing the template placeholders* setting the env variables is now redundant* enable newly fixed tests* enable the test* add a null check instead of using the null-forgiving operator* refactoring: rename method and variables and add comments* rename variable"
dotnet/runtime,5922fd30058ab4596920f56dc8f1d7ab549959d2,[browser] fix JSExport in lazy loaded assembly (#117890),2025-07-28 09:07:39+00:00,Pavel Savara,1,20a932e130542c4401dc538cde8a72b2bbdfe30c,"[wasm] Use lightweight marshal for enums (#118991)

* Use lightweight marshal for enums

* Wasm build test

* Fix

* Fix test app build

* Fix test app build

* Fix test asserts

* Fix test case

* Build tests are not JS bundler friendly

* Update src/mono/mono/component/marshal-ilgen-stub.c

Co-authored-by: Larry Ewing <lewing@microsoft.com>

* Update src/mono/wasm/testassets/WasmBasicTestApp/App/ZipArchiveInteropTest.cs

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>

---------

Co-authored-by: Larry Ewing <lewing@microsoft.com>
Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",10,75,23,[browser] fix jsexport in lazy loaded assembly (issue_ref)
dotnet/runtime,ee8f12ccab4ec89ec5db7742b3f99be5a695332b,Update mentionees for the binaryformatter-migration label (#118082),2025-07-28 11:53:52+00:00,Jeff Handley,0,,,1,1,1,update mentionees for the binaryformatter-migration label (issue_ref)
dotnet/runtime,4e8a560e0d29cabfca07b194162b1c64f454af8e,"chore: remove redundant words in comment (#117310)

Signed-off-by: shangchenglumetro <shuang.cui@live.com>",2025-07-28 13:53:42+00:00,shangchenglumetro,1,adf6b14296b9ba17bb7b5c5cf7bc0e0317cc1cee,"Obsolete NamedPipeClientStream constructor with isConnected parameter (SYSLIB0063) (#120328)

✅ **Implementation Complete: Obsolete NamedPipeClientStream constructor
with isConnected parameter (SYSLIB0063)**

## Summary of Changes

This PR implements the approved API proposal to obsolete the
`NamedPipeClientStream` constructor that takes a `bool isConnected`
parameter, and introduces a new constructor without it.

### Changes Made:

- [x] **Added SYSLIB0063 diagnostic** to Obsoletions.cs with appropriate
message
- [x] **Added new constructor** `NamedPipeClientStream(PipeDirection,
bool, SafePipeHandle)` that always sets state to Connected
- [x] **Marked existing constructor** with `[Obsolete]` and
`[EditorBrowsable(EditorBrowsableState.Never)]` attributes
- [x] **Obsolete constructor now calls new constructor** to avoid code
duplication
- [x] **Updated ref assembly** with both constructors and appropriate
attributes
- [x] **Updated documentation** in list-of-diagnostics.md
- [x] **Tests cover new constructor only** to avoid duplication
(obsolete ctor delegates to new one)
- [x] **Added test** to verify Connect and ConnectAsync throw
InvalidOperationException on pipes created from existing handles
- [x] **Build verification**: All libraries build successfully
- [x] **Test verification**: All 1,161 System.IO.Pipes tests pass (0
failures)

### API Changes:

```csharp
namespace System.IO.Pipes;

public sealed partial class NamedPipeClientStream : PipeStream
{
    // Obsoleted constructor (existing) - now delegates to new constructor
    [EditorBrowsable(EditorBrowsableState.Never)]
    [Obsolete(""This constructor has been deprecated and argument bool isConnected does not have any effect. Use NamedPipeClientStream(PipeDirection direction, bool isAsync, SafePipeHandle safePipeHandle) instead."", DiagnosticId = ""SYSLIB0063"", UrlFormat = ""https://aka.ms/dotnet-warnings/{0}"")]
    public NamedPipeClientStream(PipeDirection direction, bool isAsync, bool isConnected, SafePipeHandle safePipeHandle);

    // New recommended constructor
    public NamedPipeClientStream(PipeDirection direction, bool isAsync, SafePipeHandle safePipeHandle);
}
```

### Compatibility:

- The obsolete constructor remains functional but issues a compile-time
warning (SYSLIB0063)
- The `isConnected` parameter is now ignored by delegating to the new
constructor
- New code should use the 3-parameter constructor which always sets the
pipe to Connected state
- This follows .NET obsoletion best practices with EditorBrowsable to
hide from IntelliSense
- Calling Connect/ConnectAsync on a pipe created from an existing handle
now consistently throws InvalidOperationException (regardless of the
isConnected parameter value in the obsolete constructor)

<!-- START COPILOT CODING AGENT SUFFIX -->



<details>

<summary>Original prompt</summary>

> 
> ----
> 
> *This section details on the original issue you should resolve*
> 
> <issue_title>[API Proposal]: Hide NamedPipeClientStream ctor with
isConnected argument</issue_title>
> <issue_description>### Background and motivation
> 
> As described by
https://github.com/dotnet/runtime/issues/32760#issuecomment-2492914703,
the constructor
> ```cs
> public NamedPipeClientStream(System.IO.Pipes.PipeDirection direction,
bool isAsync, bool isConnected,
Microsoft.Win32.SafeHandles.SafePipeHandle safePipeHandle)
> ```
> Using `isConnected: false` is invalid, it will throw an exception when
`Connect` is called because it requires a path to establish the
connection. We should discourage the use of this ctor and instead
suggest using a new ctor that doesn't take bool isConnected.
> 
> To preserve compatibility in the existing ctor, I think we should
ignore isConnected rather than throwing.
> 
> 
> Related:
> https://github.com/dotnet/runtime/issues/32760
> https://github.com/dotnet/runtime/issues/83073
> 
> ### API Proposal
> 
> ```diff
> namespace System.IO.Pipes;
> 
> public sealed partial class NamedPipeClientStream : PipeStream
> {
> +   [EditorBrowsable(EditorBrowsableState.Never)]
> + [Obsolete(""This constructor has been deprecated and argument bool
isConnected does not have any effect. Use
NamedPipeClientStream(PipeDirection direction, bool isAsync,
SafePipeHandle safePipeHandle) instead."")]
> public NamedPipeClientStream(PipeDirection direction, bool isAsync,
bool isConnected, SafePipeHandle safePipeHandle) : base
(default(PipeDirection), default(int)) { }
> 
> + public NamedPipeClientStream(PipeDirection direction, bool isAsync,
SafePipeHandle safePipeHandle) : base(default(PipeDirection),
default(int)) { }
> }
> ```
> 
> ### Alternative Designs
> 
> None that I can think of, but I considered fixing the issue by using
the provided handle to reconnect to the named pipe server. That doesn't
seem feasible, A client Connects by obtaining a handle (via CreateFile
in Windows and via Socket.Connect on Unix). reconnecting would imply
discarding the existing handle.
> 
> ### Risks
> 
> _No response_</issue_description>
> 
> ## Comments on the Issue (you are @copilot in this section)
> 
> <comments>
> <comment_new><author>@bartonjs</author><body>
> [Video](https://www.youtube.com/watch?v=rsjimPqjyDY&t=1h16m47s)
> 
> * Given that we can find very few callers of this constructor, and
`isConnected: false` doesn't seem to make sense, Obsolete+EB-Never makes
sense.
> * Use the next available SYSLIB diagnostic ID.
> 
> ```diff
> namespace System.IO.Pipes;
> 
> public sealed partial class NamedPipeClientStream : PipeStream
> {
> +   [EditorBrowsable(EditorBrowsableState.Never)]
> + [Obsolete(""This constructor has been deprecated and argument bool
isConnected does not have any effect. Use
NamedPipeClientStream(PipeDirection direction, bool isAsync,
SafePipeHandle safePipeHandle) instead."")]
> public NamedPipeClientStream(PipeDirection direction, bool isAsync,
bool isConnected, SafePipeHandle safePipeHandle) : base
(default(PipeDirection), default(int)) { }
> 
> + public NamedPipeClientStream(PipeDirection direction, bool isAsync,
SafePipeHandle safePipeHandle) : base(default(PipeDirection),
default(int)) { }
> }
> ```</body></comment_new>
> </comments>
> 


</details>
Fixes dotnet/runtime#119671

<!-- START COPILOT CODING AGENT TIPS -->
---

💡 You can make Copilot smarter by setting up custom instructions,
customizing its development environment and configuring Model Context
Protocol (MCP) servers. Learn more [Copilot coding agent
tips](https://gh.io/copilot-coding-agent-tips) in the docs.

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: jozkee <16040868+jozkee@users.noreply.github.com>
Co-authored-by: David Cantú <dacantu@microsoft.com>",8,9,9,chore: remove redundant words in comment (issue_ref)
dotnet/runtime,a1667657373d846df5c8df8fc613a6d709f89957,"Support Notones in alternation reductions that merge sets (#118109)

Today, given an alternation like `a|b|[cd]|efg`, that gets reduced to `[abcd]|efg`, supporting One and Set nodes. But it doesn't support Notone nodes. That means the semi-common idiom `.|\n` that folks use to express any character when not using Singleline doesn't get reduced and remains an alternation. This extends the existing reduction pass to also recognize Notones, just by treating them as one or two ranges.",2025-07-28 13:55:53+00:00,Stephen Toub,1,fea22374ea0de0800c2f0959dd34f2b98fe6bd88,"Fix regex source generator documentation for character class subtraction (#119660)

* Initial plan

* Fix regex source generator character class subtraction documentation

Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>

* Make forceBrackets parameter optional in DescribeSet method

Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>",3,32,2,"support notones in alternation reductions that merge sets (issue_ref)today, given an alternation like , that gets reduced to , supporting one and set nodes. but it doesn't support notone nodes. that means the semi-common idiom that folks use to express any character when not using singleline doesn't get reduced and remains an alternation. this extends the existing reduction pass to also recognize notones, just by treating them as one or two ranges."
dotnet/runtime,0fd7ca0c8ead029cc929b23f10ecd0fc211f460e,Add PackedSimd aliases for AddSaturate and SubtractSaturate (#118089),2025-07-28 14:12:32+00:00,Larry Ewing,0,,,2,6,0,add packedsimd aliases for addsaturate and subtractsaturate (issue_ref)
dotnet/runtime,45802538e2e720105654054550866a4d1d1125c1,[wasi] Disable build in .NET 10 (#117936),2025-07-28 14:35:42+00:00,Copilot,0,,,3,12,14,[wasi] disable build in .net 10 (issue_ref)
dotnet/runtime,96b8cdcf45e54cb063675ed4925eca510ec123cb,"arm64: Refactor Helpers.cs (#118125)

* Remove duplicate functions
* Use template functions where possible",2025-07-28 15:07:53+00:00,Jonathan Davies,0,,,2,4713,8591,arm64: refactor helpers.cs (issue_ref)* remove duplicate functions* use template functions where possible
dotnet/runtime,028b30f71994298a1149dc1ab979c558c6147cd7,"Further reduce loops around zero-width assertions (#118111)

* Further reduce loops around zero-width assertions

In addition to replacing the loop with an empty when it contains only a zero-width assertion and has a lower bound of 0, if it doesn't have a lower bound of 0, we can just remove the loop layer, replacing it with its child directly, since any additional iterations beyond one is redundant.",2025-07-28 16:07:41+00:00,Stephen Toub,1,26d4886e813cf1d55d5e373fcdfb5665a143122b,"Fix compilation failure from regex source generator with some lazy loops (#118132)

Because of some possible complicated control flow, the compiler thinks these variables are not deterministically initialized.",3,47,44,"further reduce loops around zero-width assertions (issue_ref)* further reduce loops around zero-width assertionsin addition to replacing the loop with an empty when it contains only a zero-width assertion and has a lower bound of 0, if it doesn't have a lower bound of 0, we can just remove the loop layer, replacing it with its child directly, since any additional iterations beyond one is redundant."
dotnet/runtime,ffe89677636962166e5636108c956116ac32dd3c,"[cDAC] Implement `ISOSDacInterface::GetJumpThunkTarget` (#117781)

* implement GetJumpThunkTarget",2025-07-28 16:16:16+00:00,Max Charlamb,0,,,2,83,1,[cdac] implement (issue_ref)* implement getjumpthunktarget
dotnet/runtime,9df2042d2b2c7f68fa87c3ef1007e9a02cfab8a8,"[cDAC] Rename datadescriptor.h -> datadescriptor.inc (#118067)

* rename datadescriptor.h -> datadescriptor.inc",2025-07-28 16:24:01+00:00,Max Charlamb,0,,,3,15,15,[cdac] rename datadescriptor.h -> datadescriptor.inc (issue_ref)* rename datadescriptor.h -> datadescriptor.inc
dotnet/runtime,5196f3eb2636dbaf81f3c7fa4b616ba635ef41b6,"Avoid extra boundary checks when preceeded/succeeded char set is known (#118105)

* Avoid extra boundary checks when preceeded/succeeded char set is known

If we statically know by construction that what comes before or after a \b is guaranteed to be a word char, then we can avoid half the run-time checks.

This also tweaks the source-generated implementation of IsBoundaryWordChar in order to avoid an extra branch on every check. It's currently delegating to IsWordChar and then if that returns false, checking whether it's one of the other two joiner characters that are considered as part of the boundary set. Instead, this duplicates the IsWordChar implementation (which is just a couple of lines once the helpers are separated out into their own members), such that for ASCII, the additional check isn't necessary. The implementation used by the interpreter and RegexCompiler already do this.

* Address PR feedback",2025-07-28 18:37:33+00:00,Stephen Toub,1,0686df9503c709c105ff3df583dbe1493b6c5d6c,"Fix perf bug in RegexCompiler when handling .*? (#118373)

We have a special-code path that exists to optimize a singleline `.*?`, in which case we can just search for what comes after the loop in the pattern because the loop itself will lazily match everything. Unfortunately, we're passing the wrong node to the EmitIndexOf helper that emits that search. We should be passing the node which represents the subsequent literal, but we're accidentally passing the set loop itself. We're only here if that set loop matches everything, so we're emitting an IndexOfAnyInRange(0, \uFFFF) call. This is functionally ok, but perf tanks because we end up needing to do non-trivial work for every character that matches the loop.",6,282,90,"avoid extra boundary checks when preceeded/succeeded char set is known (issue_ref)* avoid extra boundary checks when preceeded/succeeded char set is knownif we statically know by construction that what comes before or after a \b is guaranteed to be a word char, then we can avoid half the run-time checks.this also tweaks the source-generated implementation of isboundarywordchar in order to avoid an extra branch on every check. it's currently delegating to iswordchar and then if that returns false, checking whether it's one of the other two joiner characters that are considered as part of the boundary set. instead, this duplicates the iswordchar implementation (which is just a couple of lines once the helpers are separated out into their own members), such that for ascii, the additional check isn't necessary. the implementation used by the interpreter and regexcompiler already do this.* address pr feedback"
dotnet/runtime,1aa2fd8bd756333b804c9ed1dc523dfbbf583a00,"Tweak regex source gen for single char repeater (#118137)

This doesn't help with perf, it just makes the generated code a bit cleaner. Instead of e.g.
```C#
if ((uint)slice.Length < 20)
{
    return false; // The input didn't match.
}

if (slice.Slice(0, 20).ContainsAnyExceptInRange('a', 'c'))
{
    return false; // The input didn't match.
}
```
we'll now get:
```C#
if ((uint)slice.Length < 20 || slice.Slice(0, 20).ContainsAnyExceptInRange('a', 'c'))
{
    return false; // The input didn't match.
}
```",2025-07-28 22:57:36+00:00,Stephen Toub,0,,,1,14,8,"tweak regex source gen for single char repeater (issue_ref)this doesn't help with perf, it just makes the generated code a bit cleaner. instead of e.g.we'll now get:"
dotnet/runtime,865d4e69f16bff9fcb5a32c326ae0182d99e164b,Cleanup for cert accessors (#118116),2025-07-28 22:58:49+00:00,Pranav Senthilnathan,0,,,11,155,88,cleanup for cert accessors (issue_ref)
dotnet/runtime,27cc30f08536880f766d7f65f3ff4247c7858e29,"Transform regex `X|` into `X?` and `|X` into `X??` (#118087)

An alternation with two branches where the second is empty is the same as the first branch just being an optional loop; similarly, when the first branch is empty, it's a lazy optional loop of the second branch. Expressing as an optional is better optimized elsewhere in the regex transforms, e.g. with loop coalescing, so we're better off with the optional representation.",2025-07-29 00:37:14+00:00,Stephen Toub,0,,,2,27,0,"transform regex into and into (issue_ref)an alternation with two branches where the second is empty is the same as the first branch just being an optional loop; similarly, when the first branch is empty, it's a lazy optional loop of the second branch. expressing as an optional is better optimized elsewhere in the regex transforms, e.g. with loop coalescing, so we're better off with the optional representation."
dotnet/runtime,2d3bf386a579ff7c98dc89440af588a2f62f69a8,"Adding GetAppDomainName cDAC API (#117837)

* Adding GetAppDomainName cDAC API 

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-07-29 01:39:00+00:00,Rachel,0,,,7,88,7,adding getappdomainname cdac api (issue_ref)* adding getappdomainname cdac api
dotnet/runtime,2db9fdf5b4083c7459fc2150e8589a81ac7ebb39,"Adding GetAssemblyLoadContext cDAC API (#117939)

* adding GetAssemblyLoadContext cDAC API

* simplifying field access

* restructuring etc

* comments",2025-07-29 01:39:50+00:00,Rachel,0,,,13,115,56,adding getassemblyloadcontext cdac api (issue_ref)* adding getassemblyloadcontext cdac api* simplifying field access* restructuring etc* comments
dotnet/runtime,a8fee605084efb04f3c300ecb317f6b0fcdf3f99,"Update DefaultStackSize to Thread_DefaultStackSize (#118076)

https://github.com/dotnet/runtime/pull/110455#issuecomment-3118701638",2025-07-29 05:53:04+00:00,Michal Strehovský,1,556cd525f1dbe916fda1ca4fd8eea1859a81d81f,"Increase file descriptor limit in native AOT executables (#118995)

Fixes #82719",1,1,1,update defaultstacksize to thread_defaultstacksize (issue_ref)#issuecomment-3118701638
dotnet/runtime,2bbb5f1dfd3b5d575deef58d0751fbbf00714c0d,"Enable `Wasm.Build.Tests.WasmTemplateTests.RunWithDifferentAppBundleLocations` (#117985)

* Re-enable.

* Indent.

* Apply suggestion from @Copilot

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>
Co-authored-by: Larry Ewing <lewing@microsoft.com>",2025-07-29 10:29:48+00:00,Ilona Tomkowicz,0,,,1,14,3,enable (issue_ref)* re-enable.* indent.* apply suggestion from @copilot
dotnet/runtime,18ae5dd6c117f3365f7a338b567f5edb9be12051,JIT: Remove `BBF_RUN_RARELY` (#118147),2025-07-29 13:23:56+00:00,Aman Khalid,1,57122023dff6756a36b4ff0d3d395abe3aff8f07,"JIT: allow inliner to use up more of the lva ""budget"" (#118515)

We currently stop inlining once we hit a fixed limit of 512 local vars
(specified via `MAX_LV_NUM_COUNT_FOR_INLINING`). We hit this limit now
more often because of increased inliner aggressiveness, and at any rate
it should be some fraction of `JitMaxLocalsToTrack` instead of a fixed
value.

When the inliner hits this limit it often leaves quite valuable inlines
on the table.

Revise this so the inliner is allowed to consume 90% of the max locals
during inlining (50% would be a no-diff change).

This fixes some regressions reported in #114996 which were then made
worse by #116054.",9,59,192,jit: remove (issue_ref)
dotnet/runtime,55805eea136eb6d14cb0e6ba7bd9c523daa6e122,Don't do an invalid mask conversion optimization for conditional select nodes (#118154),2025-07-29 16:05:13+00:00,Tanner Gooding,0,,,5,52,78,don't do an invalid mask conversion optimization for conditional select nodes (issue_ref)
dotnet/runtime,be3060c536928f6ed71fd92faff201c782cc600e,Update version branding to rc1 (#118002),2025-07-29 16:11:49+00:00,Matt Mitchell,0,,,1,2,2,update version branding to rc1 (issue_ref)
dotnet/runtime,8ea880933b1b8e935c89d63d634682e026aaacf6,"Remove warning for base type with RequiresUnreferencedCode (#117944)

Removes the IL2109 warning about a type without RUC derived from a type with
RUC. This existed for RequiresUnreferencedCode but not RequiresDynamicCode.
The warning on the class should not be necessary because there will be a warning
for the base ctor call.",2025-07-29 16:22:30+00:00,Sven Boemer,1,9b694bf71d2957d811558bcbb730b9f6701eee7c,"Add support for patterns (#118267)

This adds local and property pattern support, but may not cover all
possible ways a pattern can introduce a local variable.

Fixes https://github.com/dotnet/runtime/issues/113922",10,68,68,remove warning for base type with requiresunreferencedcode (issue_ref)removes the il2109 warning about a type without ruc derived from a type withruc. this existed for requiresunreferencedcode but not requiresdynamiccode.the warning on the class should not be necessary because there will be a warningfor the base ctor call.
dotnet/runtime,3abbf997b11d19751456b46ae5c4bd87e2f01368,"JIT: Boost inversion for oversize loops with bounds checks (#118078)

Addresses some of the regressions in #116486. If a loop has bounds checks in it, it might benefit from cloning, so perhaps we ought to tolerate going a bit over the inversion size limit to enable downstream optimizations. I ought to do something for GDV checks; perhaps as a follow-up, I'll move the checks in loop cloning to something I can reuse here. The 1.25x figure isn't all that scientific -- I found it to be the smallest factor necessary to make a dent in the regressions from less cloning I looked at, and despite the size increases, it's a net PerfScore win across collections.",2025-07-29 16:24:24+00:00,Aman Khalid,0,,,3,40,15,"jit: boost inversion for oversize loops with bounds checks (issue_ref)addresses some of the regressions in issue_ref. if a loop has bounds checks in it, it might benefit from cloning, so perhaps we ought to tolerate going a bit over the inversion size limit to enable downstream optimizations. i ought to do something for gdv checks; perhaps as a follow-up, i'll move the checks in loop cloning to something i can reuse here. the 1.25x figure isn't all that scientific -- i found it to be the smallest factor necessary to make a dent in the regressions from less cloning i looked at, and despite the size increases, it's a net perfscore win across collections."
dotnet/runtime,f9fb08132b5efee8edd1846529fcd291f3b5dbd2,"Import illink.targets for ref projects (#118144)

This lets the logic from the ILLink targets add
`AssemblyMetadata(""IsTrimmable"", ""true"")` to ref projects which have
trimming enabled.

Also moves the trimming opt-out into `Directory.Build.props` when it
should be shared between src and corresponding ref projects.

This will be used to enable the Roslyn analyzer to produce a warning
for references to assemblies that aren't marked ""IsTrimmable"".",2025-07-29 17:14:53+00:00,Sven Boemer,0,,,11,7,7,"import illink.targets for ref projects (issue_ref)this lets the logic from the illink targets add to ref projects which havetrimming enabled.also moves the trimming opt-out into when itshould be shared between src and corresponding ref projects.this will be used to enable the roslyn analyzer to produce a warningfor references to assemblies that aren't marked ""istrimmable""."
dotnet/runtime,64ccbadcb5bdfe622da728eee3788fd2a18d0a7b,"Enable lookarounds to influence atomicity (#118153)

* Enable lookarounds to influence atomicity

As part of our auto-atomicity handling, today we give up when the subsequent node is a lookaround. This improves it to support the case when the subsequent node is a positive lookahead.

* Update src/libraries/System.Text.RegularExpressions/tests/UnitTests/RegexReductionTests.cs",2025-07-29 17:33:29+00:00,Stephen Toub,1,1ef4c1a2a67efc11cc63cc29a4949b5853da528c,"Fix RegexParser to ignore vertical tabs with RegexOptions.IgnorePatternWhitespace (#120625)

* Initial plan

* Fix vertical tab handling in RegexOptions.IgnorePatternWhitespace

Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>

* Guard vertical tab test for netfx platform

Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>",3,68,3,"enable lookarounds to influence atomicity (issue_ref)* enable lookarounds to influence atomicityas part of our auto-atomicity handling, today we give up when the subsequent node is a lookaround. this improves it to support the case when the subsequent node is a positive lookahead.* update src/libraries/system.text.regularexpressions/tests/unittests/regexreductiontests.cs"
dotnet/runtime,97d94229eb62859038cd05fb864fd39e9be0a1a0,"Simplify SVE unary test template (#118129)

* Replace DataTable with PinnedVector class
* Add functions for generating random Vectors
* Add functions for converting between Vector and Array types
* Generate an expected Vector for comparison and log to terminal
* Simplify validation functions
* Remove RetVectorType and Op1VectorType template variables",2025-07-29 18:51:46+00:00,snickolls-arm,0,,,4,261,217,simplify sve unary test template (issue_ref)* replace datatable with pinnedvector class* add functions for generating random vectors* add functions for converting between vector and array types* generate an expected vector for comparison and log to terminal* simplify validation functions* remove retvectortype and op1vectortype template variables
dotnet/runtime,b6e34b8c14fc531b6997795024374302447372d7,"[interp] Forcibly enable intrinsics when we encounter a must-expand call (#117727)

* When encountering a must expand intrinsic self-call in an interpreted method, always expand it even if intrinsics are turned off.
* Clean up a minor edge case in the 'is reference or contains references' intrinsic
* Remove an alignment assert that is causing failures in the startup path",2025-07-30 01:27:13+00:00,Katelyn Gadd,0,,,1,27,17,"[interp] forcibly enable intrinsics when we encounter a must-expand call (issue_ref)* when encountering a must expand intrinsic self-call in an interpreted method, always expand it even if intrinsics are turned off.* clean up a minor edge case in the 'is reference or contains references' intrinsic* remove an alignment assert that is causing failures in the startup path"
dotnet/runtime,e9dd250942d329658df303ca4bf9a8e42ac4c9fc,"Don't use vfork on android (#118085)

When we start the child process, we clear all signal handlers. This operations ends up clearing the signal handlers also for the parent process. Revert to just using fork for simplicity.",2025-07-30 10:03:56+00:00,Vlad Brezae,0,,,1,5,1,"don't use vfork on android (issue_ref)when we start the child process, we clear all signal handlers. this operations ends up clearing the signal handlers also for the parent process. revert to just using fork for simplicity."
dotnet/runtime,cfe9056a0b1a61497851c08c15e8bb4fe5568912,"Adjust Test_wait_interrupted_user_apc test timeout to handle deviation due to lowres timers. (#116066)

* Adjust test timeout to handle deviation due to lowres timers.

* Acceept 500 ms deviation on wait time.

* Reenable test.

* Adjust wait time calculation.

* Reduce wait delta to 20ms to account for low vs high res timers.",2025-07-30 10:05:18+00:00,Johan Lorensson,0,,,3,15,20,adjust test_wait_interrupted_user_apc test timeout to handle deviation due to lowres timers. (issue_ref)* adjust test timeout to handle deviation due to lowres timers.* acceept 500 ms deviation on wait time.* reenable test.* adjust wait time calculation.* reduce wait delta to 20ms to account for low vs high res timers.
dotnet/runtime,02596ba8d937bfbda5d2d7d634d7b3688e28bb69,[wasm] Fix fragmentation caused by large objects allocation (#118099),2025-07-30 13:53:57+00:00,Vlad Brezae,1,2cc52c2d2a0c38065b2d1a12e47b14494e48f82c,"[wasm] Fix sharing of wbarrier card between los object and wbarrier roots (#118271)

In the change disabling los section allocator on wasm (via sgen_los_enable_sections_allocator), we aligned these los objects to 512 bytes, which is the memory range mapped by a card byte. This alignment prevented two los objects having memory mapped to the same card. Sharing with other objects is impossible since they are allocated in separate spaces with high alignment (the nursery and major blocks). There was however an oversight, which is the possibility of having wbarrier roots allocated in this space (These roots are just variable sized memory ranges containing refs, that are scanned only if the corresponding card is marked). In this situation, scanning the cards for the los object could end up clearing cards for these roots that will no longer be scanned",1,29,0,[wasm] fix fragmentation caused by large objects allocation (issue_ref)
dotnet/runtime,0cc6b0eb57924dd65a5b591776b5e7a40fee5bc1,Add ETW nostack entries for DebugExceptionProcessing events (#118194),2025-07-30 16:39:46+00:00,Tom McDonald,0,,,1,2,0,add etw nostack entries for debugexceptionprocessing events (issue_ref)
dotnet/runtime,f7ef1503f9827ef8f1daf67d42929850b0338113,"Enable alc stress (#117825)

* try enabling ALCTest in GCStress again.

* make GCStress compatible again",2025-07-30 17:57:05+00:00,Manish Godse,0,,,1,0,2,enable alc stress (issue_ref)* try enabling alctest in gcstress again.* make gcstress compatible again
dotnet/runtime,46ead2636dc4a6aa8ee973b41a96cdaa7e567e1c,[browser] disable UmaReadWriteGenericStringStructArray_ThrowsArgumentException test (#118209),2025-07-30 18:01:16+00:00,Pavel Savara,0,,,1,1,0,[browser] disable umareadwritegenericstringstructarray_throwsargumentexception test (issue_ref)
dotnet/runtime,73d13d94ff6ab6055463408aa5e6ca4edf9b50e1,"Add external mu support to ML-DSA

This adds SignMu and VerifyMu to MLDsa, but does not provide an easy way for someone to obtain the mu value.

Like with OpenSSL version 3.5, that is, as we say, ""an exercise left to the reader.""  Although, a working example is present in the tests.",2025-07-30 20:38:16+00:00,Jeremy Barton,0,,,22,3001,72,"add external mu support to ml-dsathis adds signmu and verifymu to mldsa, but does not provide an easy way for someone to obtain the mu value.like with openssl version 3.5, that is, as we say, ""an exercise left to the reader."" although, a working example is present in the tests."
dotnet/runtime,9713fda616c844dda948bcd8316e9c3ccbf71965," Use IsAotCompatible for libraries (#118149)

Instead of EnableAOTAnalyzer. This is necessary for the
AssemblyMetadata IsAotCompatible=""True"" to make it into our libraries.",2025-07-30 21:44:00+00:00,Sven Boemer,0,,,20,20,21,"use isaotcompatible for libraries (issue_ref)instead of enableaotanalyzer. this is necessary for theassemblymetadata isaotcompatible=""true"" to make it into our libraries."
dotnet/runtime,2907a390a30f3d67c8b89071168ec7b92a4e8b46,ML-DSA SignedCMS (#118088),2025-07-30 21:44:43+00:00,Pranav Senthilnathan,1,211b051366451193d7bd6939587591898adfac7f,Fix parallel merge with new usage of renamed method,15,1047,411,ml-dsa signedcms (issue_ref)
dotnet/runtime,12a954f46d1fe0d5fd063c3d3f39eb0630c8c463,Use UnzipEven for SearchValues<string> Teddy on Arm64 (#118110),2025-07-30 21:53:01+00:00,Miha Zupan,1,6531acff0f08d0a4835c646d8b4654ffb5c6e5c9,Fix documentation for `LoadAndPack*` methods in `TeddyHelper` (#118178),1,3,3,use unzipeven for searchvalues<string> teddy on arm64 (issue_ref)
dotnet/runtime,b5f8e98f63411ea6a6a974884e039d65c37717b2,"Improve boundary handling in atomic tests (#118191)

These were set up to require what comes after the boundary to also be disjoint from its predecessor being tested. But that's not necessary; the boundary itself is sufficient to determine atomicity.",2025-07-30 22:05:12+00:00,Stephen Toub,0,,,2,16,12,improve boundary handling in atomic tests (issue_ref)these were set up to require what comes after the boundary to also be disjoint from its predecessor being tested. but that's not necessary; the boundary itself is sufficient to determine atomicity.
dotnet/runtime,ac764af3e2d77aa582dff3511295ee701b831a7d,"Adding write capabilities and SetOtherNotificationFlags cDAC API (#118141)

* * adding target write capabilities to cDAC
* implementing SetOtherNotificationFlags cDAC API

* adding writebuffer

* Apply suggestions from code review

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>

---------",2025-07-30 23:54:09+00:00,Rachel,0,,,31,306,70,adding write capabilities and setothernotificationflags cdac api (issue_ref)* * adding target write capabilities to cdac* implementing setothernotificationflags cdac api* adding writebuffer* apply suggestions from code review
dotnet/runtime,260d02b6405980ca2f27467fd336ed18451421a2,"Do not look at unboxing bit when looking up constructed generic methods (#118211)

Fixes #118072.

In the bug we were ending up in a situation where we remember generic dictionary for a `MethodDesc` with `UnboxingStub` bit set to true and then try to look up a generic dictionary for a `MethodDesc` with unboxing stub bit set to false (the false is hardcoded in the code I'm updating).

This is all sorts of wrong. The unboxing MethodDescs in the runtime type system were a mistake. We get by without them in the compiler.

This is really difficult to hit because the runtime type system is mutable (this is yet another mistake) and if we still have a cached version of this mutable type system around, this lookup is not used.

The regression test I added is really annoying and takes like 40 seconds to run in checked builds. I hate it, but this is not hittable in any other way. I'm not sure if this one is 100% reliable at triggering the type system flush either.",2025-07-31 10:45:00+00:00,Michal Strehovský,1,48af0f9d9a487b3878bb79b3b16abb0133a6acc5,"Enable fixed DynamicGenerics test (#118199)

We fixed the underlying issue.",3,91,8,"do not look at unboxing bit when looking up constructed generic methods (issue_ref)fixes issue_ref.in the bug we were ending up in a situation where we remember generic dictionary for a with bit set to true and then try to look up a generic dictionary for a with unboxing stub bit set to false (the false is hardcoded in the code i'm updating).this is all sorts of wrong. the unboxing methoddescs in the runtime type system were a mistake. we get by without them in the compiler.this is really difficult to hit because the runtime type system is mutable (this is yet another mistake) and if we still have a cached version of this mutable type system around, this lookup is not used.the regression test i added is really annoying and takes like 40 seconds to run in checked builds. i hate it, but this is not hittable in any other way. i'm not sure if this one is 100% reliable at triggering the type system flush either."
dotnet/runtime,ea076a5f92da0257d44e2ad05aa2e7a721f07d6c,Refactor handle kinds into a table and mark the static base address cell handle non-null (#118183),2025-07-31 13:48:20+00:00,SingleAccretion,0,,,10,143,212,refactor handle kinds into a table and mark the static base address cell handle non-null (issue_ref)
dotnet/runtime,e79ed8249d08822a5b720ff706be6f4ea5e2c3a0,"Partially revert ""Combine cast => negate => compare on ARM64 #112944"" (#118208)",2025-07-31 13:51:22+00:00,Egor Bogatov,0,,,2,1,93,"partially revert ""combine cast => negate => compare on arm64 issue_ref"" (issue_ref)"
dotnet/runtime,97ec3628562b89e88db394ecb6f55eeb6d775e6e,arm64: Missing Sve2 Saturate functions (#118202),2025-07-31 14:41:10+00:00,Jonathan Davies,1,212a57a5714906af704504132289d115a3664ce6,"Fix always true asserts (#120182)

Contributes to #44132",7,120,0,arm64: missing sve2 saturate functions (issue_ref)
dotnet/runtime,c37e685ab9c4eff603b1100b6f2afc1b3a1355a6,Add a packed variant of single-value SearchValues<string> (#118108),2025-07-31 14:43:01+00:00,Miha Zupan,0,,,7,529,35,add a packed variant of single-value searchvalues<string> (issue_ref)
dotnet/runtime,61126dfbc3b933bcd97b49aec379acca57aa2c12,"JIT: fix issue in conditional escape analysis (#118214)

Conditional escape analysis is triggered by a GDV guarded call to
`GetEnumerator`. On the fast path this call is devirtualized and inlined
and exposes one or more enumerator object allocations. The ""more"" allows
for collections to do special-case optimizations like returning a static
enumerator object for an empty collection.

When there is more than one enumerator object allocation under the GDV guard,
ensure that only the allocation that was analyzed for conditional escape is stack
allocated; the remaining enumerators will end up on the ""slow path"" where enumeration
happens via interface calls, and so must be heap objects.

If we clone an allocation site the allocation block won't be in
the DFS tree. Such sites will not be in an enumerator GDV hammock
so can be exempted from checking.

Fixes #111922.",2025-07-31 14:44:15+00:00,Andy Ayers,1,cb001f3428647e3791d28b8643f2b574ae04d7ba,"JIT: fix retyping of some storeinds during object stack allocation (#118251)

This PR fixes an issue that comes up in the LogicArray benchmark where
the JIT misses cloning a key loop. In that benchmark there is a struct local
`Workspace` that contains an array reference, and the JIT is now able to
prove the array does not escape.

In the mainline code the field is retyped to TYP_BYREF but the store
of the array value is typed as TYP_I_IMPL. This mixed typing of this field
hinders physical promotion, which in turn induces morph to create a comma-defined
temp for the array references, which in turn creates an in-loop
assignment that blocks loop cloning.

In general we may sometimes store a non-GC type in a TYP_BYREF field of a
local struct, if say that field can hold both GC refs and stack allocated
object refs, or if (as here) we are in an OSR method where we have to assume
that object allocations might come from the Tier0 code.

If so we should still try and consistently type the store as TYP_BYREF,
so as to not confuse physical promotion. During the escape analysis phase
we built up a store map to track how each store is modeled, so we can
consult this during retyping to figure out which type to use for the store.

Fixes #114999.",4,140,1,"jit: fix issue in conditional escape analysis (issue_ref)conditional escape analysis is triggered by a gdv guarded call to. on the fast path this call is devirtualized and inlinedand exposes one or more enumerator object allocations. the ""more"" allowsfor collections to do special-case optimizations like returning a staticenumerator object for an empty collection.when there is more than one enumerator object allocation under the gdv guard,ensure that only the allocation that was analyzed for conditional escape is stackallocated; the remaining enumerators will end up on the ""slow path"" where enumerationhappens via interface calls, and so must be heap objects.if we clone an allocation site the allocation block won't be inthe dfs tree. such sites will not be in an enumerator gdv hammockso can be exempted from checking.fixes issue_ref."
dotnet/runtime,2b52fb2a468843bc9d4ff5974f464f3b6b3fafc7,"Tweak positive lookahead handling in CanBeMadeAtomic (#118221)

* Tweak positive lookahead handling in CanBeMadeAtomic

I was overthinking things before, and the handling for positive lookaheads can be simplified and expanded. The logic was saying that a loop followed by an positive lookahead could be made atomic if it was disjoint not only from the lookahead's contents but also from what followed the lookahead. However, the latter isn't actually necessary. If the loop is disjoint with the lookahead, then it's also disjoint with the intersection of the lookahead and what follows / overlaps with the lookahead.

* Add a few more tests",2025-07-31 15:22:09+00:00,Stephen Toub,0,,,2,54,7,"tweak positive lookahead handling in canbemadeatomic (issue_ref)* tweak positive lookahead handling in canbemadeatomici was overthinking things before, and the handling for positive lookaheads can be simplified and expanded. the logic was saying that a loop followed by an positive lookahead could be made atomic if it was disjoint not only from the lookahead's contents but also from what followed the lookahead. however, the latter isn't actually necessary. if the loop is disjoint with the lookahead, then it's also disjoint with the intersection of the lookahead and what follows / overlaps with the lookahead.* add a few more tests"
dotnet/runtime,51a412389aecbde55d8183ef94d5e9d09ab4732a,"Default IsAotCompatible for ref projects (#118222)

Defaults IsAotCompatible to true for ref projects, and moves the
opt-out to be shared between src/ref projects.

Needed to flow AssemblyMetadata(""IsAotCompatible"", ""True"") to ref
assemblies.",2025-07-31 16:00:54+00:00,Sven Boemer,0,,,28,31,15,"default isaotcompatible for ref projects (issue_ref)defaults isaotcompatible to true for ref projects, and moves theopt-out to be shared between src/ref projects.needed to flow assemblymetadata(""isaotcompatible"", ""true"") to refassemblies."
dotnet/runtime,2611ca5de58155cc7257255062fa766ad52029b9,Rename SecretKey to PrivateKey for SLH-DSA,2025-07-31 16:47:07+00:00,Jeremy Barton,0,,,24,247,247,rename secretkey to privatekey for slh-dsa
dotnet/runtime,0720de0a82725160e1ddf40f1db4fe0b9ea186c8,"Rename ManagedAssemblyLoadContext to AssemblyLoadContext (#118227)

There is no unmanaged assembly load context, so the ""Managed"" prefix is superfluous.",2025-07-31 18:51:47+00:00,Jan Kotas,1,6271266ad1acda6899c39f2c7e6a645c751ded64,"Fix unloadability issue (#119196)

* Add test, and fix logging of collectible assemblies

* Enhance logging even further, and fix the bug by only running the forced cleanup path for LoaderAllocators without any assemblies associated with them

* Fix unix build failure

* Update src/coreclr/vm/loaderallocator.hpp

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>

* Update src/tests/Regressions/coreclr/GitHub_116953/test116953.cs

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",23,82,82,"rename managedassemblyloadcontext to assemblyloadcontext (issue_ref)there is no unmanaged assembly load context, so the ""managed"" prefix is superfluous."
dotnet/runtime,e1ebddfc09ad85d1fd51fc4b2672becf8d76b15a,"Enable ConsoleMandel test (#116157)

Enable ConsoleMandel test, make it run faster.",2025-07-31 20:00:31+00:00,Kunal Pathak,0,,,1,7,2,"enable consolemandel test (issue_ref)enable consolemandel test, make it run faster."
dotnet/runtime,50855d80e1335e7914c548ac4a29edd04a02ae13,"Disable Test_wait_interrupted_user_apc on NAOT due to no support for alertable waits. (#118231)

Co-authored-by: Michal Strehovský <MichalStrehovsky@users.noreply.github.com>",2025-07-31 20:03:16+00:00,Johan Lorensson,1,fae90a6803c5a20b86d8183bf4bee702a0ee8239,"Implement alertable waits for WaitHandle to support APC handling in NativeAOT (#118256)

The implementation follows the same retry pattern used in CoreCLR's Thread::DoAppropriateWaitWorker, ensuring consistency across runtime implementations.

Fixes #118233.

* Disable RunTestInterruptInfiniteWait for NativeAOT due to unimplemented Thread.Interrupt

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>",1,2,3,disable test_wait_interrupted_user_apc on naot due to no support for alertable waits. (issue_ref)
dotnet/runtime,e58b3453014366d3a9bf36db3c8a8a53faad2026,"Rename NDirect -> PInvoke (#118228)

* Rename NDirect -> PInvoke

* Rename N/Direct -> PInvoke

* NDIRECTSTUB -> PINVOKESTUB

* Manual touch up

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-08-01 00:21:06+00:00,Jan Kotas,1,838491d0baf7922e159c2aafdf0c6b2859a86de2,"Add portable RhpNew allocator (#119591)

* Add portable RhpNew allocator

* Apply suggestions from code review

* Feedback

* Apply suggestions from code review

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Feedback

* Fix build

* Feedback

---------

Co-authored-by: Aaron Robinson <arobins@microsoft.com>
Co-authored-by: Jan Kotas <jkotas@microsoft.com>",101,796,806,rename ndirect -> pinvoke (issue_ref)* rename ndirect -> pinvoke* rename n/direct -> pinvoke* ndirectstub -> pinvokestub* manual touch up
dotnet/runtime,f736e4f4883d6fba7488ddb30e766e6befedccf0,"Disable AdvSimd_ro test on native AOT (#118235)

Native AOT outerloops are broken, we need outerloops green.",2025-08-01 06:14:12+00:00,Michal Strehovský,1,dfb28503dbd46a5004d02bb5b39535ef8d70fe98,"Remove some uses of dynamic from HardwareIntrinsic test code (#118273)

This is preventing the AdvSimd tests from running in NativeAOT contexts.

Fixes #118234",2,4,0,"disable advsimd_ro test on native aot (issue_ref)native aot outerloops are broken, we need outerloops green."
dotnet/runtime,df9a908c1016249865c3e3bcb08ccb963901526e,Check return types in isCompatibleMethodGDV (#118027),2025-08-01 09:27:20+00:00,Egor Bogatov,0,,,1,32,0,check return types in iscompatiblemethodgdv (issue_ref)
dotnet/runtime,cacb702e97b5f7192a42e97e10d63f63e883d605,"Simplify pragma suppressions in generated regex code (#118258)

Every generated regex output contained multiple pragma suppressions for warnings we know to be possible. We can simplify this by just suppressing all warnings in the generated code. If there is a stray warning (e.g. because of a custom analyzer), there's nothing the developer can do about it, and it can break their build if they have warnings-as-errors.",2025-08-01 12:35:54+00:00,Stephen Toub,0,,,1,4,0,"simplify pragma suppressions in generated regex code (issue_ref)every generated regex output contained multiple pragma suppressions for warnings we know to be possible. we can simplify this by just suppressing all warnings in the generated code. if there is a stray warning (e.g. because of a custom analyzer), there's nothing the developer can do about it, and it can break their build if they have warnings-as-errors."
dotnet/runtime,41c675e5adf23ce7bdf5ac18a3ab3f90042e3787,Use BBF_IMPORTER for new blocks in helperexpansion.cpp (#116359),2025-08-01 14:45:01+00:00,Egor Bogatov,0,,,1,31,1,use bbf_importer for new blocks in helperexpansion.cpp (issue_ref)
dotnet/runtime,e11a3d4c0604a2bd1f5b2aee27a32d4a0cbcbac8,"Revert ""Remove custom allocator."" (#117949)

* Revert ""Remove custom allocator.""

This reverts commit c62bc5b2721673b14e702348a8ccf5f976a2b7a3.

* Remove zlib custom allocator for linux.

* Remove cookie check from windows custom zlib allocator

* Remove zeroing of memory in zlib-allocator

* Don't use custom allocator on x86

* Refine allocator condition

* Update src/native/libs/System.IO.Compression.Native/CMakeLists.txt

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-08-01 16:36:00+00:00,Eric StJohn,0,,,4,101,0,"revert ""remove custom allocator."" (issue_ref)* revert ""remove custom allocator.""this reverts commit c62bc5b2721673b14e702348a8ccf5f976a2b7a3.* remove zlib custom allocator for linux.* remove cookie check from windows custom zlib allocator* remove zeroing of memory in zlib-allocator* don't use custom allocator on x86* refine allocator condition* update src/native/libs/system.io.compression.native/cmakelists.txt---------"
dotnet/runtime,1752b9664ecc1d0167bc054e9667242e94fbb91c,"[RuntimeAsync] Tweak some reflection scenarios around async methods. (#118045)

[RuntimeAsync] Tweak some reflection scenarios around async methods. (#118045)",2025-08-01 20:31:13+00:00,Vladimir Sadov,1,71b4db270fd86bb4a25e49434b0ce838b73c879b,"Fix restore of contexts in async task returning thunks (#119818)

The previous IL generated approximately implements the following:
```csharp
ExecutionAndSyncBlockStore store = default;
store.Push();
Continuation cont = null;
T result = default;
try
{
  try
  {
    result = Inner(args);
    cont = StubHelpers.AsyncCallContinuation();
  }
  catch (Exception ex)
  {
    return Task.FromException(ex);
  }
}
finally
{
  store.Pop();
}

if (cont == null)
  return Task.FromResult(result);

return FinalizeTaskReturningThunk(cont);
```

However, since `FinalizeTaskReturningThunk` is where we call
`OnCompleted`, this means that user code gets called after we have
restored contexts.

To fix the issue change the thunks to look approximately like
```csharp
ExecutionAndSyncBlockStore store = default;
store.Push();
try
{
  Continuation cont;
  try
  {
    T result = Inner(args);
    cont = StubHelpers.AsyncCallContinuation();
    if (cont == null)
      return Task.FromResult(result);
  }
  catch (Exception ex)
  {
    return Task.FromException(ex);
  }

  return FinalizeTaskReturningThunk(cont);
}
finally
{
  store.Pop();
}
```
which ensures that the contexts do not get restored until after
`OnCompleted` has been called.",16,272,82,[runtimeasync] tweak some reflection scenarios around async methods. (issue_ref)[runtimeasync] tweak some reflection scenarios around async methods. (issue_ref)
dotnet/runtime,78abe1053d1a1d2134a11254eb8e0216148b528e,"Adding GetThreadFromThinlockID cDAC API (#118187)

* adding GetThreadFromThinlockID cDAC API

* docs",2025-08-01 20:57:30+00:00,Rachel,1,e1fbcdc80ac523893de8b533298c317db69ecfcd,"Do not reset size of TailCallArgBuffer (#118365)

* TailCallArgBuffer:State is 32-bit int. The code incorrectly used native int operation to set. It lead to TailCallArgBuffer::Size to be reset as well and needlessly re-allocating the tail call buffer.

* Switch to preemptive mode around malloc/free in TailCallArgBuffer allocation

Move the fast path of the TailCallArgBuffer allocation helper to C# to avoid perf overload of switching to preemptive mode. Also, aggressively inline it to allow zero initialization to be unrolled by the JIT.

* Skip early GC reporting de-action if there is nothing to report

Fixes #118166",9,131,21,adding getthreadfromthinlockid cdac api (issue_ref)* adding getthreadfromthinlockid cdac api* docs
dotnet/runtime,bb20ad0490660f7ca450122531a7afd9aab08dea,[EventPipe][User_Events] Add Provider name to metadata (#118294),2025-08-02 02:27:19+00:00,Mitchell Hwang,1,0bb2f6ea49467c140c6ab9d1e5b02138d14b55e9,[EventPipe] Fix user_events metadata label scope (#118474),1,18,6,[eventpipe][user_events] add provider name to metadata (issue_ref)
dotnet/runtime,fae90a6803c5a20b86d8183bf4bee702a0ee8239,"Implement alertable waits for WaitHandle to support APC handling in NativeAOT (#118256)

The implementation follows the same retry pattern used in CoreCLR's Thread::DoAppropriateWaitWorker, ensuring consistency across runtime implementations.

Fixes #118233.

* Disable RunTestInterruptInfiniteWait for NativeAOT due to unimplemented Thread.Interrupt

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>",2025-08-02 06:20:19+00:00,Copilot,1,710b45cf71419af91e882474f8c31f62eb9e55a0,"Fix timing threshold in threading test 115178 to address jitstress2 failures (#118601)

Fixes #118598.

Co-authored-by: jkotas <6668460+jkotas@users.noreply.github.com>",3,74,12,"implement alertable waits for waithandle to support apc handling in nativeaot (issue_ref)the implementation follows the same retry pattern used in coreclr's thread::doappropriatewaitworker, ensuring consistency across runtime implementations.fixes issue_ref.* disable runtestinterruptinfinitewait for nativeaot due to unimplemented thread.interrupt"
dotnet/runtime,5ed4079b4d9db02fbf137c898c08b3bc205d9849,[browser][AOT] active issue for AOT stack frames (#118287),2025-08-02 17:40:52+00:00,Pavel Savara,0,,,1,1,0,[browser][aot] active issue for aot stack frames (issue_ref)
dotnet/runtime,215a79a3f37a3afec0ac2c418b6fbeacb26e1585,Standardize netfx test helper for pem encoding (#118259),2025-08-02 19:05:31+00:00,Pranav Senthilnathan,0,,,1,20,2,standardize netfx test helper for pem encoding (issue_ref)
dotnet/runtime,1ae288b13d41b98c614ff5220b4c326ce9a40bf9,"Move a couple of WASM threading files to the shared partition (#118304)

* Move threading files

* Also move the WASI files for consistency",2025-08-02 23:50:31+00:00,SingleAccretion,0,,,7,9,9,move a couple of wasm threading files to the shared partition (issue_ref)* move threading files* also move the wasi files for consistency
dotnet/runtime,3f25a276772b8d0e54452321e7525b7a176aa4a7,"Refactor known folder GUIDs to use static properties (#118165)

* Refactor known folder GUIDs to use static ReadOnlySpan<byte> properties instead of constant strings

* Refactor GetFolderPath methods to eliminate redundant checks

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-08-03 00:00:23+00:00,xtqqczze,0,,,6,182,65,refactor known folder guids to use static properties (issue_ref)* refactor known folder guids to use static readonlyspan<byte> properties instead of constant strings* refactor getfolderpath methods to eliminate redundant checks
dotnet/runtime,9f3074ca71f6d331a354b6838ebcd8efa16f8d16,Remove a few array allocations from enumeration (#118288),2025-08-03 22:00:29+00:00,Stephen Toub,0,,,7,20,24,remove a few array allocations from enumeration (issue_ref)
dotnet/runtime,bebb613605bf9f8e27b69cc138a3332141ffda7b,"Avoid redundant GetRVA calls when fetching IL header (#118318)

Change more places to use MethodDesc::MayHaveILHeader introduced by recent PR",2025-08-04 01:07:02+00:00,Jan Kotas,0,,,4,28,18,avoid redundant getrva calls when fetching il header (issue_ref)change more places to use methoddesc::mayhaveilheader introduced by recent pr
dotnet/runtime,3876cec4d59f24772db0e594e6411e604e06ee60,[browser] improve HTTP abort test (#118274),2025-08-04 08:42:38+00:00,Pavel Savara,0,,,2,12,2,[browser] improve http abort test (issue_ref)
dotnet/runtime,e18042e1e87579dcdc236746e5489273109b594d,"Automated bump of chrome version (#118308)

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>",2025-08-04 10:01:35+00:00,github-actions[bot],0,,,1,4,4,automated bump of chrome version (issue_ref)
dotnet/runtime,cd637921759c21e229b13535ca8003f8089e1be4,"[RISC-V] Optimize switch table (#117048)

* don't temp reg, use sh2add

* don't zero-extend for shXadd",2025-08-04 10:48:25+00:00,Tomasz Sowiński,0,,,3,17,8,"[risc-v] optimize switch table (issue_ref)* don't temp reg, use sh2add* don't zero-extend for shxadd"
dotnet/runtime,35ffd43b350d09b641a61a057996aa7b0ca3b830,"[RISC-V] Use auipc for code addresses in INS_OPTS_C (#117196)

* auipc in EmitOutputCall also non-reloc

* Always record relocation for auipc+jalr like on arm64

* Stop squirelling link register in lowest bit of the call address

* Handle auipc+I-type reloc in superpmi",2025-08-04 11:05:00+00:00,Tomasz Sowiński,0,,,9,176,164,[risc-v] use auipc for code addresses in ins_opts_c (issue_ref)* auipc in emitoutputcall also non-reloc* always record relocation for auipc+jalr like on arm64* stop squirelling link register in lowest bit of the call address* handle auipc+i-type reloc in superpmi
dotnet/runtime,f9ce5dbbf06863b493e824418fd465b33803bf8e,Ignore missing SPMI data when printing string literals (#118303),2025-08-04 11:28:43+00:00,SingleAccretion,1,ea6e07ebb9aaa01b6b9c48180fad8366eac41a6f,"Arm64: re-enable use of predicate variants (#117313)

Fixes #101970

Predicate variants were implemented in #114438 and then turned off in #115566. The code was then removed in #117101 when the AMD64 version was moved to from morph to folding.

This is a simple rework of that code.
Replaces #116854",3,35,13,ignore missing spmi data when printing string literals (issue_ref)
dotnet/runtime,7b8a1b4dc96ba166af39c8427652ba2f25998539,"Updating LSRA to prevent eGPR use as GC tracked regs.  (#117991)

* Prevent eGPRs from being used as GC tracked regs.",2025-08-04 11:42:13+00:00,DeepakRajendrakumaran,1,0787787d5adb4508b9bfe181ff8a31bd6cd8eefc,"Restore registers at the head of chains of contained nodes (#118430)

Fixes #118377",2,36,3,updating lsra to prevent egpr use as gc tracked regs. (issue_ref)* prevent egprs from being used as gc tracked regs.
dotnet/runtime,d34cad0a57e7e4f51e761e4ec66f5ef011076478,"[wasm] Add missing properties to PropertiesThatTriggerRelinking for WASM and WASI (#117983)

* Add missing properties to PropertiesThatTriggerRelinking for WASM and WASI

* Add WasmEnableThreads property to relink triggering tests

* Add documentation for properties that trigger relinking in WASM and WASI builds

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: ilonatommy <32700855+ilonatommy@users.noreply.github.com>",2025-08-04 11:52:30+00:00,Copilot,1,cff2063695fe8977164cc1be3866a64427c80db4, [browser] fix _WasmNativeWorkloadNeeded (#118669),8,76,13,[wasm] add missing properties to propertiesthattriggerrelinking for wasm and wasi (issue_ref)* add missing properties to propertiesthattriggerrelinking for wasm and wasi* add wasmenablethreads property to relink triggering tests* add documentation for properties that trigger relinking in wasm and wasi builds---------
dotnet/runtime,8083ecc30b2ee21c820039688197c75773fc100a,"[browser][WBT] Remove MT signalR tests (#118323)

* Remove MT-only signalR tests",2025-08-04 13:11:16+00:00,Ilona Tomkowicz,0,,,4,0,114,[browser][wbt] remove mt signalr tests (issue_ref)* remove mt-only signalr tests
dotnet/runtime,e7e75c5a05baa71aabf93be5797072f0a61a762e,"[RISC-V] Add pseudo instruction `not` and replace `xori` when immediate is -1 (#117967)

* [RISC-V] Add pseudo instruction not

* [RISC-V] emit not

* [RISC-V] Replace xori with not when immediate is -1",2025-08-04 13:49:07+00:00,Donguk Ju,1,d000ce2b76bd576afc7af77dfbcc04f86bdfb5b5,JIT: Fix RISC-V emitter build (#118407),3,4,3,[risc-v] add pseudo instruction and replace when immediate is -1 (issue_ref)* [risc-v] add pseudo instruction not* [risc-v] emit not* [risc-v] replace xori with not when immediate is -1
dotnet/runtime,9a824e3340de5a551edc52285c6d513f7695455e,Update lead for System.ClientModel (#118326),2025-08-04 14:00:11+00:00,Jeff Handley,0,,,1,1,1,update lead for system.clientmodel (issue_ref)
dotnet/runtime,adeda17ca6bed61d67761ed0539a5ea79f421b09,arm64: Split GenerateHWIntrinsicTests_Arm.cs into smaller files (#118157),2025-08-04 15:52:54+00:00,Jonathan Davies,0,,,7,5670,5617,arm64: split generatehwintrinsictests_arm.cs into smaller files (issue_ref)
dotnet/runtime,cb001f3428647e3791d28b8643f2b574ae04d7ba,"JIT: fix retyping of some storeinds during object stack allocation (#118251)

This PR fixes an issue that comes up in the LogicArray benchmark where
the JIT misses cloning a key loop. In that benchmark there is a struct local
`Workspace` that contains an array reference, and the JIT is now able to
prove the array does not escape.

In the mainline code the field is retyped to TYP_BYREF but the store
of the array value is typed as TYP_I_IMPL. This mixed typing of this field
hinders physical promotion, which in turn induces morph to create a comma-defined
temp for the array references, which in turn creates an in-loop
assignment that blocks loop cloning.

In general we may sometimes store a non-GC type in a TYP_BYREF field of a
local struct, if say that field can hold both GC refs and stack allocated
object refs, or if (as here) we are in an OSR method where we have to assume
that object allocations might come from the Tier0 code.

If so we should still try and consistently type the store as TYP_BYREF,
so as to not confuse physical promotion. During the escape analysis phase
we built up a store map to track how each store is modeled, so we can
consult this during retyping to figure out which type to use for the store.

Fixes #114999.",2025-08-04 15:58:31+00:00,Andy Ayers,1,ac260b49464c71c700c3392fa5be738af6ab688b,"JIT: disable stack allocation for sites in CEA cloned regions (#121771)

Our escape analysis assumes each stack allocation candidate node has a
unique temp that has that allocation as its only assigned value.

Conditional escape analysis may clone these nodes, creating a second
allocation site assigning to the associated temp. This breaks the 1-1
assumption noted above.

If those allocations do not escape then the JIT will stack allocate
them, creating two distinct stack locals. In subsequent IR rewriting the
JIT will then use the address of just one of the locals for all
appearances of the temp, which is incorrect, and leads to the generated
code possibly reading uninitialized stack slots.

To fix this we disallow stack allocation for sites in blocks that were
cloned, or their clones. (We can actually handle this case with better
bookkeeping, but that is more involved).

Fixes #121736.",1,22,3,"jit: fix retyping of some storeinds during object stack allocation (issue_ref)this pr fixes an issue that comes up in the logicarray benchmark wherethe jit misses cloning a key loop. in that benchmark there is a struct local that contains an array reference, and the jit is now able toprove the array does not escape.in the mainline code the field is retyped to typ_byref but the storeof the array value is typed as typ_i_impl. this mixed typing of this fieldhinders physical promotion, which in turn induces morph to create a comma-definedtemp for the array references, which in turn creates an in-loopassignment that blocks loop cloning.in general we may sometimes store a non-gc type in a typ_byref field of alocal struct, if say that field can hold both gc refs and stack allocatedobject refs, or if (as here) we are in an osr method where we have to assumethat object allocations might come from the tier0 code.if so we should still try and consistently type the store as typ_byref,so as to not confuse physical promotion. during the escape analysis phasewe built up a store map to track how each store is modeled, so we canconsult this during retyping to figure out which type to use for the store.fixes issue_ref."
dotnet/runtime,e205daec03f5056e70f8e18d6d0e12e128530331,"Do async validation only from > 2.4, i.e. 2.4.1+ (#118339)",2025-08-04 16:52:06+00:00,Marie Píchová,0,,,1,2,2,"do async validation only from > 2.4, i.e. 2.4.1+ (issue_ref)"
dotnet/runtime,3ef8cf5d99ecd4aaa636af9b35d892205e1738bd,"Rename SecretKey to PrivateKey for ML-DSA

...SecretKey... got renamed to ...PrivateKey... during the API review for ML-DSA.

Similar to the cleanup for SLH-DSA, this does not change anything in the Interop classes or the crypto shim, but should have everything else.

    All remaining usages of ""secret key"" found by VS in System.Security.Cryptography are related to HMAC, AES-GCM, or AES-CCM.
    All remaining usages of ""secretkey"" found by VS in System.Security.Cryptography are for Composite ML-DSA, one place in SLH-DSA that got missed, or the SecretKeySeed/SecretKeyPrf in SLH-DSA tests.
    Comments above do not include src/Common/src/Interop

I did a manual check of the approved shape against the ref.cs, and it matches except for SignMu/VerifyMu (which were added in a followup review).",2025-08-04 17:22:17+00:00,Jeremy Barton,1,a44f532a0422616d6f5718ffd62eded9fe889a3d,"Remove pinned XunitAnalyzersVersion from Versions.props (#118241)

* Remove pinned XunitAnalyzersVersion from Versions.props

Fixes https://github.com/dotnet/runtime/issues/97088

* Fix xUnit1012: Null should not be used for value type parameters

* Fix xUnit1037: There are fewer theory data type arguments than required by the parameters of the test method

* Fix xUnit1041: Fixture arguments to test classes must have fixture sources

* Fix xUnit1048: Avoid using 'async void' for test methods as it is deprecated in xUnit.net v3

* Fix xUnit2021: Async assertions should be awaited

* Fix xUnit2027: Comparison of sets to linear containers have undefined results

* Fix xUnit2029: Do not use Assert.Empty to check if a value does not exist in a collection

* Fix xUnit2031: Do not use Where clause with Assert.Single

* Disable test that started erroring",31,321,327,"rename secretkey to privatekey for ml-dsa...secretkey... got renamed to ...privatekey... during the api review for ml-dsa.similar to the cleanup for slh-dsa, this does not change anything in the interop classes or the crypto shim, but should have everything else. all remaining usages of ""secret key"" found by vs in system.security.cryptography are related to hmac, aes-gcm, or aes-ccm. all remaining usages of ""secretkey"" found by vs in system.security.cryptography are for composite ml-dsa, one place in slh-dsa that got missed, or the secretkeyseed/secretkeyprf in slh-dsa tests. comments above do not include src/common/src/interopi did a manual check of the approved shape against the ref.cs, and it matches except for signmu/verifymu (which were added in a followup review)."
dotnet/runtime,f981bc232e4f1a4dab9af39101b566e07bf4014b,"Augment regex source generator's DescribeSet to better describe common sets (#118340)

This only impacts comments in the emitted code. Now e.g. rather than a comment like:
```csharp
Match a character in the set [\p{Lu}].
```
it'll say
```csharp
Match a Unicode uppercase letter.
```",2025-08-04 17:26:11+00:00,Stephen Toub,1,bed7000efba260f98d4b4ec4e9ecf0bba4355d68,"Simplify/fix loop descriptions in regex source generator (#118341)

- There's no need to say ""greedily and atomically""... ""atomically"" covers it.
- ""lazily and atomically"" doesn't make sense... ""lazily"" covers it.",2,88,7,augment regex source generator's describeset to better describe common sets (issue_ref)this only impacts comments in the emitted code. now e.g. rather than a comment like:it'll say
dotnet/runtime,bed7000efba260f98d4b4ec4e9ecf0bba4355d68,"Simplify/fix loop descriptions in regex source generator (#118341)

- There's no need to say ""greedily and atomically""... ""atomically"" covers it.
- ""lazily and atomically"" doesn't make sense... ""lazily"" covers it.",2025-08-04 17:26:31+00:00,Stephen Toub,1,252034f1e83588bc6b6c20fe7df4b16db896fc44,"Fix escaped pattern display in GeneratedRegex XML documentation (#120098)

* Initial plan

* Fix escaped pattern in GeneratedRegex summary - remove double escaping

Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>

* Update test expectations to match fixed single-escaped pattern behavior

Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>

* Fix XML parsing errors by properly escaping invalid XML characters in pattern documentation

Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>

* Consolidate XML escaping logic into existing EscapeXmlComment method

Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>

* Fix C1 control character escaping to resolve all test failures

Co-authored-by: danmoseley <6385855+danmoseley@users.noreply.github.com>

* Simplify EscapeXmlComment

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>
Co-authored-by: danmoseley <6385855+danmoseley@users.noreply.github.com>
Co-authored-by: Stephen Toub <stoub@microsoft.com>",1,2,3,"simplify/fix loop descriptions in regex source generator (issue_ref)- there's no need to say ""greedily and atomically""... ""atomically"" covers it.- ""lazily and atomically"" doesn't make sense... ""lazily"" covers it."
dotnet/runtime,89e2ee2721578d7f269423e5457b925d206665a0,"Correct typo in framework-design-guidelines-digest.md 

Corrected typo in ""present participle""",2025-08-04 17:39:18+00:00,Mike Austin,0,,,1,1,1,"correct typo in framework-design-guidelines-digest.md corrected typo in ""present participle"""
dotnet/runtime,e911894ae86e750f5748c8e7fdef8a19a1d36f4b,"Add trim/aot analyzer warnings for transitive references (#118180)

Adds new analyzer warnings for references to assemblies not marked as
trim or aot compatible.

The new warnings are opt-in under the following settings:

- `<VerifyReferenceTrimCompatibility>true</VerifyReferenceTrimCompatibility>`
- `<VerifyReferenceAotCompatibility>true</VerifyReferenceAotCompatibility>`

The analyzer uses AssemblyMetadataAttribute in the referenced
assemblies to detect whether they are marked as trim/aot
compatible. To mark a project as trim/aot compatible, it should be
built with the usual recommended property settings:

- `<IsTrimmable>true</IsTrimmable>`
  adds `[assembly: AssemblyMetadata(""IsTrimmable"", ""True"")]`
- `<IsAotCompatible>true</IsAotCompatible>`
  adds `[assembly: AssemblyMetadata(""IsAotCompatible"", ""True"")`",2025-08-04 18:27:24+00:00,Sven Boemer,1,72fc822a32b3c1767012073660aa9c8ad6d891a8,"Fix linker pipeline (#118738)

https://github.com/dotnet/runtime/commit/e911894ae86e750f5748c8e7fdef8a19a1d36f4b
broke the runtime-linker-tests pipeline (the .yml failure didn't surface in github).
Fix this by using a variable, not a template paramater, for archType.",13,305,19,"add trim/aot analyzer warnings for transitive references (issue_ref)adds new analyzer warnings for references to assemblies not marked astrim or aot compatible.the new warnings are opt-in under the following settings:- - the analyzer uses assemblymetadataattribute in the referencedassemblies to detect whether they are marked as trim/aotcompatible. to mark a project as trim/aot compatible, it should bebuilt with the usual recommended property settings:- adds - adds"
dotnet/runtime,d50bb8e9c60aee9395e0a5a6eca50fb62e38e39e,"EC-DSA Composite ML-DSA for net8+ (#118232)

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-08-04 18:48:20+00:00,Pranav Senthilnathan,1,eace168646dbad3f93f5c716c13060694ac715ad,"[main] Source code updates from dotnet/dotnet (#117845)

* Update dependencies from https://github.com/dotnet/dotnet build 275814
Updated Dependencies:
System.CommandLine (Version 2.0.0-beta7.25367.101 -> 2.0.0-beta7.25368.102)
Microsoft.DotNet.Cecil (Version 0.11.5-alpha.25367.101 -> 0.11.5-alpha.25368.102)
Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport, Microsoft.DotNet.ApiCompat.Task (Version 10.0.100-preview.7.25367.101 -> 10.0.100-preview.7.25368.102)
Microsoft.DotNet.Arcade.Sdk, Microsoft.DotNet.XliffTasks, Microsoft.DotNet.Helix.Sdk, Microsoft.DotNet.GenAPI, Microsoft.DotNet.GenFacades, Microsoft.DotNet.XUnitExtensions, Microsoft.DotNet.Build.Tasks.Archives, Microsoft.DotNet.Build.Tasks.Packaging, Microsoft.DotNet.Build.Tasks.Installers, Microsoft.DotNet.Build.Tasks.Templating, Microsoft.DotNet.Build.Tasks.Workloads, Microsoft.DotNet.CodeAnalysis, Microsoft.DotNet.Build.Tasks.TargetFramework, Microsoft.DotNet.RemoteExecutor, Microsoft.DotNet.Build.Tasks.Feed, Microsoft.DotNet.SharedFramework.Sdk, Microsoft.DotNet.PackageTesting (Version 10.0.0-beta.25367.101 -> 10.0.0-beta.25368.102)
Microsoft.DotNet.XUnitAssert, Microsoft.DotNet.XUnitConsoleRunner (Version 2.9.3-beta.25367.101 -> 2.9.3-beta.25368.102)
Microsoft.NETCore.App.Ref, runtime.native.System.IO.Ports, Microsoft.NETCore.ILAsm, Microsoft.NET.Sdk.IL, System.Text.Json, System.Reflection.Metadata, System.Reflection.MetadataLoadContext (Version 10.0.0-preview.7.25367.101 -> 10.0.0-preview.7.25368.102)
Microsoft.Net.Compilers.Toolset, Microsoft.CodeAnalysis, Microsoft.CodeAnalysis.CSharp, Microsoft.CodeAnalysis.Analyzers (Version 5.0.0-2.25367.101 -> 5.0.0-2.25368.102)
Microsoft.CodeAnalysis.NetAnalyzers (Version 10.0.0-preview.25367.101 -> 10.0.0-preview.25368.102)

* Update dependencies from https://github.com/dotnet/dotnet build 275898
Updated Dependencies:
System.CommandLine (Version 2.0.0-beta7.25368.102 -> 2.0.0-beta7.25368.105)
Microsoft.DotNet.Cecil (Version 0.11.5-alpha.25368.102 -> 0.11.5-alpha.25368.105)
Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport, Microsoft.DotNet.ApiCompat.Task (Version 10.0.100-preview.7.25368.102 -> 10.0.100-preview.7.25368.105)
Microsoft.DotNet.Arcade.Sdk, Microsoft.DotNet.XliffTasks, Microsoft.DotNet.Helix.Sdk, Microsoft.DotNet.GenAPI, Microsoft.DotNet.GenFacades, Microsoft.DotNet.XUnitExtensions, Microsoft.DotNet.Build.Tasks.Archives, Microsoft.DotNet.Build.Tasks.Packaging, Microsoft.DotNet.Build.Tasks.Installers, Microsoft.DotNet.Build.Tasks.Templating, Microsoft.DotNet.Build.Tasks.Workloads, Microsoft.DotNet.CodeAnalysis, Microsoft.DotNet.Build.Tasks.TargetFramework, Microsoft.DotNet.RemoteExecutor, Microsoft.DotNet.Build.Tasks.Feed, Microsoft.DotNet.SharedFramework.Sdk, Microsoft.DotNet.PackageTesting (Version 10.0.0-beta.25368.102 -> 10.0.0-beta.25368.105)
Microsoft.DotNet.XUnitAssert, Microsoft.DotNet.XUnitConsoleRunner (Version 2.9.3-beta.25368.102 -> 2.9.3-beta.25368.105)
Microsoft.NETCore.App.Ref, runtime.native.System.IO.Ports, Microsoft.NETCore.ILAsm, Microsoft.NET.Sdk.IL, System.Text.Json, System.Reflection.Metadata, System.Reflection.MetadataLoadContext (Version 10.0.0-preview.7.25368.102 -> 10.0.0-preview.7.25368.105)
Microsoft.Net.Compilers.Toolset, Microsoft.CodeAnalysis, Microsoft.CodeAnalysis.CSharp, Microsoft.CodeAnalysis.Analyzers (Version 5.0.0-2.25368.102 -> 5.0.0-2.25368.105)
Microsoft.CodeAnalysis.NetAnalyzers (Version 10.0.0-preview.25368.102 -> 10.0.0-preview.25368.105)

* Update dependencies from https://github.com/dotnet/dotnet build 276277
Updated Dependencies:
Microsoft.CodeAnalysis, Microsoft.CodeAnalysis.Analyzers, Microsoft.CodeAnalysis.CSharp, Microsoft.Net.Compilers.Toolset (Version 5.0.0-2.25368.105 -> 5.0.0-2.25372.103)
Microsoft.CodeAnalysis.NetAnalyzers (Version 10.0.0-preview.25368.105 -> 10.0.0-preview.25372.103)
Microsoft.DotNet.ApiCompat.Task, Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport (Version 10.0.100-preview.7.25368.105 -> 10.0.100-preview.7.25372.103)
Microsoft.DotNet.Arcade.Sdk, Microsoft.DotNet.Build.Tasks.Archives, Microsoft.DotNet.Build.Tasks.Feed, Microsoft.DotNet.Build.Tasks.Installers, Microsoft.DotNet.Build.Tasks.Packaging, Microsoft.DotNet.Build.Tasks.TargetFramework, Microsoft.DotNet.Build.Tasks.Templating, Microsoft.DotNet.Build.Tasks.Workloads, Microsoft.DotNet.CodeAnalysis, Microsoft.DotNet.GenAPI, Microsoft.DotNet.GenFacades, Microsoft.DotNet.Helix.Sdk, Microsoft.DotNet.PackageTesting, Microsoft.DotNet.RemoteExecutor, Microsoft.DotNet.SharedFramework.Sdk, Microsoft.DotNet.XliffTasks, Microsoft.DotNet.XUnitExtensions (Version 10.0.0-beta.25368.105 -> 10.0.0-beta.25372.103)
Microsoft.DotNet.Cecil (Version 0.11.5-alpha.25368.105 -> 0.11.5-alpha.25372.103)
Microsoft.DotNet.XUnitAssert, Microsoft.DotNet.XUnitConsoleRunner (Version 2.9.3-beta.25368.105 -> 2.9.3-beta.25372.103)
Microsoft.NET.Sdk.IL, Microsoft.NETCore.App.Ref, Microsoft.NETCore.ILAsm, runtime.native.System.IO.Ports, System.Reflection.Metadata, System.Reflection.MetadataLoadContext, System.Text.Json (Version 10.0.0-preview.7.25368.105 -> 10.0.0-preview.7.25372.103)
System.CommandLine (Version 2.0.0-beta7.25368.105 -> 2.0.0-beta7.25372.103)

* Update dependencies from https://github.com/dotnet/dotnet build 276450
Updated Dependencies:
Microsoft.CodeAnalysis, Microsoft.CodeAnalysis.Analyzers, Microsoft.CodeAnalysis.CSharp, Microsoft.Net.Compilers.Toolset (Version 5.0.0-2.25372.103 -> 5.0.0-2.25373.104)
Microsoft.CodeAnalysis.NetAnalyzers (Version 10.0.0-preview.25372.103 -> 10.0.0-preview.25373.104)
Microsoft.DotNet.ApiCompat.Task, Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport (Version 10.0.100-preview.7.25372.103 -> 10.0.100-preview.7.25373.104)
Microsoft.DotNet.Arcade.Sdk, Microsoft.DotNet.Build.Tasks.Archives, Microsoft.DotNet.Build.Tasks.Feed, Microsoft.DotNet.Build.Tasks.Installers, Microsoft.DotNet.Build.Tasks.Packaging, Microsoft.DotNet.Build.Tasks.TargetFramework, Microsoft.DotNet.Build.Tasks.Templating, Microsoft.DotNet.Build.Tasks.Workloads, Microsoft.DotNet.CodeAnalysis, Microsoft.DotNet.GenAPI, Microsoft.DotNet.GenFacades, Microsoft.DotNet.Helix.Sdk, Microsoft.DotNet.PackageTesting, Microsoft.DotNet.RemoteExecutor, Microsoft.DotNet.SharedFramework.Sdk, Microsoft.DotNet.XliffTasks, Microsoft.DotNet.XUnitExtensions (Version 10.0.0-beta.25372.103 -> 10.0.0-beta.25373.104)
Microsoft.DotNet.Cecil (Version 0.11.5-alpha.25372.103 -> 0.11.5-alpha.25373.104)
Microsoft.DotNet.XUnitAssert, Microsoft.DotNet.XUnitConsoleRunner (Version 2.9.3-beta.25372.103 -> 2.9.3-beta.25373.104)
Microsoft.NET.Sdk.IL, Microsoft.NETCore.App.Ref, Microsoft.NETCore.ILAsm, runtime.native.System.IO.Ports, System.Reflection.Metadata, System.Reflection.MetadataLoadContext, System.Text.Json (Version 10.0.0-preview.7.25372.103 -> 10.0.0-preview.7.25373.104)
System.CommandLine (Version 2.0.0-beta7.25372.103 -> 2.0.0-beta7.25373.104)

* Update dependencies from https://github.com/dotnet/dotnet build 276628
Updated Dependencies:
Microsoft.CodeAnalysis, Microsoft.CodeAnalysis.Analyzers, Microsoft.CodeAnalysis.CSharp, Microsoft.Net.Compilers.Toolset (Version 5.0.0-2.25373.104 -> 5.0.0-2.25374.102)
Microsoft.CodeAnalysis.NetAnalyzers (Version 10.0.0-preview.25373.104 -> 10.0.0-preview.25374.102)
Microsoft.DotNet.ApiCompat.Task, Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport (Version 10.0.100-preview.7.25373.104 -> 10.0.100-preview.7.25374.102)
Microsoft.DotNet.Arcade.Sdk, Microsoft.DotNet.Build.Tasks.Archives, Microsoft.DotNet.Build.Tasks.Feed, Microsoft.DotNet.Build.Tasks.Installers, Microsoft.DotNet.Build.Tasks.Packaging, Microsoft.DotNet.Build.Tasks.TargetFramework, Microsoft.DotNet.Build.Tasks.Templating, Microsoft.DotNet.Build.Tasks.Workloads, Microsoft.DotNet.CodeAnalysis, Microsoft.DotNet.GenAPI, Microsoft.DotNet.GenFacades, Microsoft.DotNet.Helix.Sdk, Microsoft.DotNet.PackageTesting, Microsoft.DotNet.RemoteExecutor, Microsoft.DotNet.SharedFramework.Sdk, Microsoft.DotNet.XliffTasks, Microsoft.DotNet.XUnitExtensions (Version 10.0.0-beta.25373.104 -> 10.0.0-beta.25374.102)
Microsoft.DotNet.Cecil (Version 0.11.5-alpha.25373.104 -> 0.11.5-alpha.25374.102)
Microsoft.DotNet.XUnitAssert, Microsoft.DotNet.XUnitConsoleRunner (Version 2.9.3-beta.25373.104 -> 2.9.3-beta.25374.102)
Microsoft.NET.Sdk.IL, Microsoft.NETCore.App.Ref, Microsoft.NETCore.ILAsm, runtime.native.System.IO.Ports, System.Reflection.Metadata, System.Reflection.MetadataLoadContext, System.Text.Json (Version 10.0.0-preview.7.25373.104 -> 10.0.0-preview.7.25374.102)
System.CommandLine (Version 2.0.0-beta7.25373.104 -> 2.0.0-beta7.25374.102)

* Update dependencies from https://github.com/dotnet/dotnet build 276797
Updated Dependencies:
Microsoft.CodeAnalysis, Microsoft.CodeAnalysis.Analyzers, Microsoft.CodeAnalysis.CSharp, Microsoft.Net.Compilers.Toolset (Version 5.0.0-2.25374.102 -> 5.0.0-2.25375.106)
Microsoft.CodeAnalysis.NetAnalyzers (Version 10.0.0-preview.25374.102 -> 10.0.0-preview.25375.106)
Microsoft.DotNet.ApiCompat.Task, Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport (Version 10.0.100-preview.7.25374.102 -> 10.0.100-preview.7.25375.106)
Microsoft.DotNet.Arcade.Sdk, Microsoft.DotNet.Build.Tasks.Archives, Microsoft.DotNet.Build.Tasks.Feed, Microsoft.DotNet.Build.Tasks.Installers, Microsoft.DotNet.Build.Tasks.Packaging, Microsoft.DotNet.Build.Tasks.TargetFramework, Microsoft.DotNet.Build.Tasks.Templating, Microsoft.DotNet.Build.Tasks.Workloads, Microsoft.DotNet.CodeAnalysis, Microsoft.DotNet.GenAPI, Microsoft.DotNet.GenFacades, Microsoft.DotNet.Helix.Sdk, Microsoft.DotNet.PackageTesting, Microsoft.DotNet.RemoteExecutor, Microsoft.DotNet.SharedFramework.Sdk, Microsoft.DotNet.XliffTasks, Microsoft.DotNet.XUnitExtensions (Version 10.0.0-beta.25374.102 -> 10.0.0-beta.25375.106)
Microsoft.DotNet.Cecil (Version 0.11.5-alpha.25374.102 -> 0.11.5-alpha.25375.106)
Microsoft.DotNet.XUnitAssert, Microsoft.DotNet.XUnitConsoleRunner (Version 2.9.3-beta.25374.102 -> 2.9.3-beta.25375.106)
Microsoft.NET.Sdk.IL, Microsoft.NETCore.App.Ref, Microsoft.NETCore.ILAsm, runtime.native.System.IO.Ports, System.Reflection.Metadata, System.Reflection.MetadataLoadContext, System.Text.Json (Version 10.0.0-preview.7.25374.102 -> 10.0.0-preview.7.25375.106)
System.CommandLine (Version 2.0.0-beta7.25374.102 -> 2.0.0-rc.1.25375.106)

* Update dependencies from https://github.com/dotnet/dotnet build 276828
Updated Dependencies:
Microsoft.CodeAnalysis, Microsoft.CodeAnalysis.Analyzers, Microsoft.CodeAnalysis.CSharp, Microsoft.Net.Compilers.Toolset (Version 5.0.0-2.25375.106 -> 5.0.0-2.25375.119)
Microsoft.CodeAnalysis.NetAnalyzers (Version 10.0.0-preview.25375.106 -> 10.0.0-preview.25375.119)
Microsoft.DotNet.ApiCompat.Task, Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport (Version 10.0.100-preview.7.25375.106 -> 10.0.100-preview.7.25375.119)
Microsoft.DotNet.Arcade.Sdk, Microsoft.DotNet.Build.Tasks.Archives, Microsoft.DotNet.Build.Tasks.Feed, Microsoft.DotNet.Build.Tasks.Installers, Microsoft.DotNet.Build.Tasks.Packaging, Microsoft.DotNet.Build.Tasks.TargetFramework, Microsoft.DotNet.Build.Tasks.Templating, Microsoft.DotNet.Build.Tasks.Workloads, Microsoft.DotNet.CodeAnalysis, Microsoft.DotNet.GenAPI, Microsoft.DotNet.GenFacades, Microsoft.DotNet.Helix.Sdk, Microsoft.DotNet.PackageTesting, Microsoft.DotNet.RemoteExecutor, Microsoft.DotNet.SharedFramework.Sdk, Microsoft.DotNet.XliffTasks, Microsoft.DotNet.XUnitExtensions (Version 10.0.0-beta.25375.106 -> 10.0.0-beta.25375.119)
Microsoft.DotNet.Cecil (Version 0.11.5-alpha.25375.106 -> 0.11.5-alpha.25375.119)
Microsoft.DotNet.XUnitAssert, Microsoft.DotNet.XUnitConsoleRunner (Version 2.9.3-beta.25375.106 -> 2.9.3-beta.25375.119)
Microsoft.NET.Sdk.IL, Microsoft.NETCore.App.Ref, Microsoft.NETCore.ILAsm, runtime.native.System.IO.Ports, System.Reflection.Metadata, System.Reflection.MetadataLoadContext, System.Text.Json (Version 10.0.0-preview.7.25375.106 -> 10.0.0-preview.7.25375.119)
System.CommandLine (Version 2.0.0-rc.1.25375.106 -> 2.0.0-rc.1.25375.119)

* Update dependencies from https://github.com/dotnet/dotnet build 276981
Updated Dependencies:
Microsoft.CodeAnalysis, Microsoft.CodeAnalysis.Analyzers, Microsoft.CodeAnalysis.CSharp, Microsoft.Net.Compilers.Toolset (Version 5.0.0-2.25375.119 -> 5.0.0-2.25377.103)
Microsoft.CodeAnalysis.NetAnalyzers (Version 10.0.0-preview.25375.119 -> 10.0.0-preview.25377.103)
Microsoft.DotNet.ApiCompat.Task, Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport (Version 10.0.100-preview.7.25375.119 -> 10.0.100-preview.7.25377.103)
Microsoft.DotNet.Arcade.Sdk, Microsoft.DotNet.Build.Tasks.Archives, Microsoft.DotNet.Build.Tasks.Feed, Microsoft.DotNet.Build.Tasks.Installers, Microsoft.DotNet.Build.Tasks.Packaging, Microsoft.DotNet.Build.Tasks.TargetFramework, Microsoft.DotNet.Build.Tasks.Templating, Microsoft.DotNet.Build.Tasks.Workloads, Microsoft.DotNet.CodeAnalysis, Microsoft.DotNet.GenAPI, Microsoft.DotNet.GenFacades, Microsoft.DotNet.Helix.Sdk, Microsoft.DotNet.PackageTesting, Microsoft.DotNet.RemoteExecutor, Microsoft.DotNet.SharedFramework.Sdk, Microsoft.DotNet.XliffTasks, Microsoft.DotNet.XUnitExtensions (Version 10.0.0-beta.25375.119 -> 10.0.0-beta.25377.103)
Microsoft.DotNet.Cecil (Version 0.11.5-alpha.25375.119 -> 0.11.5-alpha.25377.103)
Microsoft.DotNet.XUnitAssert, Microsoft.DotNet.XUnitConsoleRunner (Version 2.9.3-beta.25375.119 -> 2.9.3-beta.25377.103)
Microsoft.NET.Sdk.IL, Microsoft.NETCore.App.Ref, Microsoft.NETCore.ILAsm, runtime.native.System.IO.Ports, System.Reflection.Metadata, System.Reflection.MetadataLoadContext, System.Text.Json (Version 10.0.0-preview.7.25375.119 -> 10.0.0-preview.7.25377.103)
System.CommandLine (Version 2.0.0-rc.1.25375.119 -> 2.0.0-rc.1.25377.103)

* generate the Version.Details.props file

* Backflow from https://github.com/dotnet/dotnet / 8b29a16 build 277635

[[ commit created by automation ]]

* Update dependencies from https://github.com/dotnet/dotnet build 277635
Updated Dependencies:
Microsoft.CodeAnalysis, Microsoft.CodeAnalysis.Analyzers, Microsoft.CodeAnalysis.CSharp, Microsoft.Net.Compilers.Toolset (Version 5.0.0-2.25377.103 -> 5.0.0-2.25401.103)
Microsoft.CodeAnalysis.NetAnalyzers (Version 10.0.0-preview.25377.103 -> 10.0.0-preview.25401.103)
Microsoft.DotNet.ApiCompat.Task, Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport (Version 10.0.100-preview.7.25377.103 -> 10.0.100-rc.1.25401.103)
Microsoft.DotNet.Arcade.Sdk, Microsoft.DotNet.Build.Tasks.Archives, Microsoft.DotNet.Build.Tasks.Feed, Microsoft.DotNet.Build.Tasks.Installers, Microsoft.DotNet.Build.Tasks.Packaging, Microsoft.DotNet.Build.Tasks.TargetFramework, Microsoft.DotNet.Build.Tasks.Templating, Microsoft.DotNet.Build.Tasks.Workloads, Microsoft.DotNet.CodeAnalysis, Microsoft.DotNet.GenAPI, Microsoft.DotNet.GenFacades, Microsoft.DotNet.Helix.Sdk, Microsoft.DotNet.PackageTesting, Microsoft.DotNet.RemoteExecutor, Microsoft.DotNet.SharedFramework.Sdk, Microsoft.DotNet.XliffTasks, Microsoft.DotNet.XUnitExtensions (Version 10.0.0-beta.25377.103 -> 10.0.0-beta.25401.103)
Microsoft.DotNet.Cecil (Version 0.11.5-alpha.25377.103 -> 0.11.5-alpha.25401.103)
Microsoft.DotNet.XUnitAssert, Microsoft.DotNet.XUnitConsoleRunner (Version 2.9.3-beta.25377.103 -> 2.9.3-beta.25401.103)
Microsoft.NET.Sdk.IL, Microsoft.NETCore.App.Ref, Microsoft.NETCore.ILAsm, runtime.native.System.IO.Ports, System.Reflection.Metadata, System.Reflection.MetadataLoadContext, System.Text.Json (Version 10.0.0-preview.7.25377.103 -> 10.0.0-rc.1.25401.103)
System.CommandLine (Version 2.0.0-rc.1.25377.103 -> 2.0.0-rc.1.25401.103)

* Disable HotReload in WBT until we have latest blazor bits

* Explicitly set RuntimeIdentifier (singular) to force NativeAOT runtime pack download

* Resolve the Version.props and Version.Details.props conflicts

* Update expected syntax to match changed whitespace.

* Disable some tests due to [ActiveIssue(""https://github.com/dotnet/runtime/issues/118475"")]

* Also mark reverse-complement-6 for [ActiveIssue(""https://github.com/dotnet/runtime/issues/118475"")]

* Backflow from https://github.com/dotnet/dotnet / 30bc8f9 build 278224

[[ commit created by automation ]]

* Update dependencies from https://github.com/dotnet/dotnet build 278224
Updated Dependencies:
Microsoft.CodeAnalysis, Microsoft.CodeAnalysis.Analyzers, Microsoft.CodeAnalysis.CSharp, Microsoft.Net.Compilers.Toolset (Version 5.0.0-2.25401.103 -> 5.0.0-2.25406.102)
Microsoft.CodeAnalysis.NetAnalyzers (Version 10.0.0-preview.25401.103 -> 10.0.0-preview.25406.102)
Microsoft.DotNet.ApiCompat.Task, Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport (Version 10.0.100-rc.1.25401.103 -> 10.0.100-rc.1.25406.102)
Microsoft.DotNet.Arcade.Sdk, Microsoft.DotNet.Build.Tasks.Archives, Microsoft.DotNet.Build.Tasks.Feed, Microsoft.DotNet.Build.Tasks.Installers, Microsoft.DotNet.Build.Tasks.Packaging, Microsoft.DotNet.Build.Tasks.TargetFramework, Microsoft.DotNet.Build.Tasks.Templating, Microsoft.DotNet.Build.Tasks.Workloads, Microsoft.DotNet.CodeAnalysis, Microsoft.DotNet.GenAPI, Microsoft.DotNet.GenFacades, Microsoft.DotNet.Helix.Sdk, Microsoft.DotNet.PackageTesting, Microsoft.DotNet.RemoteExecutor, Microsoft.DotNet.SharedFramework.Sdk, Microsoft.DotNet.XliffTasks, Microsoft.DotNet.XUnitExtensions (Version 10.0.0-beta.25401.103 -> 10.0.0-beta.25406.102)
Microsoft.DotNet.Cecil (Version 0.11.5-alpha.25401.103 -> 0.11.5-alpha.25406.102)
Microsoft.DotNet.XUnitAssert, Microsoft.DotNet.XUnitConsoleRunner (Version 2.9.3-beta.25401.103 -> 2.9.3-beta.25406.102)
Microsoft.NET.Sdk.IL, Microsoft.NETCore.App.Ref, Microsoft.NETCore.ILAsm, runtime.native.System.IO.Ports, System.Reflection.Metadata, System.Reflection.MetadataLoadContext, System.Text.Json (Version 10.0.0-rc.1.25401.103 -> 10.0.0-rc.1.25406.102)
Nuget.Frameworks, Nuget.Packaging, Nuget.ProjectModel, Nuget.Versioning (Version 6.2.4 -> 7.0.0-preview.1.102)
System.CommandLine (Version 2.0.0-rc.1.25401.103 -> 2.0.0-rc.1.25406.102)

* Resolve existing merge conflicts

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Djuradj Kurepa <dkurepa@microsoft.com>
Co-authored-by: Tanner Gooding <tagoo@outlook.com>
Co-authored-by: Marek Fišera <mara@neptuo.com>
Co-authored-by: Jeremy Koritzinsky <jekoritz@microsoft.com>",12,1551,894,ec-dsa composite ml-dsa for net8+ (issue_ref)
dotnet/runtime,53aa2bc97c6015fa52ec8fafb917709529588072,Pull latest Composite ML-DSA test vectors (#118325),2025-08-04 19:15:06+00:00,Pranav Senthilnathan,0,,,2,94,94,pull latest composite ml-dsa test vectors (issue_ref)
dotnet/runtime,636f5591595c645a47ca542377675cdb058873fb,"Use (Un)ManagedValuesSource.Length as length condition in marshalling and unmarshalling loops (#118190)

Instead of assuming the Span returned from Get(Un)ManagedValuesSource is the same length as the length parameter, use the length of the span returned from the marshaller methods in the for loop condition. This allows the marshaller to recognize native values that have a different length than expected. In particular, if an array parameter is null, allow the ArrayMarshaller to return empty spans.

Also, updates the Array, Span, ReadOnlySpan, and PointerArray marshallers to check for null unmanaged values when creating unmanaged source/destination spans.

Co-authored-by: Aaron Robinson <arobins@microsoft.com>",2025-08-04 20:46:14+00:00,Jackson Schuster,0,,,9,774,13,"use (un)managedvaluessource.length as length condition in marshalling and unmarshalling loops (issue_ref)instead of assuming the span returned from get(un)managedvaluessource is the same length as the length parameter, use the length of the span returned from the marshaller methods in the for loop condition. this allows the marshaller to recognize native values that have a different length than expected. in particular, if an array parameter is null, allow the arraymarshaller to return empty spans.also, updates the array, span, readonlyspan, and pointerarray marshallers to check for null unmanaged values when creating unmanaged source/destination spans."
dotnet/runtime,a44f532a0422616d6f5718ffd62eded9fe889a3d,"Remove pinned XunitAnalyzersVersion from Versions.props (#118241)

* Remove pinned XunitAnalyzersVersion from Versions.props

Fixes https://github.com/dotnet/runtime/issues/97088

* Fix xUnit1012: Null should not be used for value type parameters

* Fix xUnit1037: There are fewer theory data type arguments than required by the parameters of the test method

* Fix xUnit1041: Fixture arguments to test classes must have fixture sources

* Fix xUnit1048: Avoid using 'async void' for test methods as it is deprecated in xUnit.net v3

* Fix xUnit2021: Async assertions should be awaited

* Fix xUnit2027: Comparison of sets to linear containers have undefined results

* Fix xUnit2029: Do not use Assert.Empty to check if a value does not exist in a collection

* Fix xUnit2031: Do not use Where clause with Assert.Single

* Disable test that started erroring",2025-08-04 21:26:07+00:00,Alexander Köplinger,1,d0bc904454e2b9ad8fc25316dc3dd7f0b920c955,"Add WindowLog property to BrotliCompressionOptions (#121786)

This PR adds a `WindowLog` property to `BrotliCompressionOptions` to
allow developers to configure the Brotli compression window size (valid
range: 10-24, default: 22). The window log controls the maximum distance
for back-references in the LZ77 algorithm, where larger windows can
improve compression for data with long-distance repetitions. Includes
corresponding validation tests following the existing pattern
established for the `Quality` property.

Fixes #116227",377,894,888,remove pinned xunitanalyzersversion from versions.props (issue_ref)* remove pinned xunitanalyzersversion from versions.propsfixes * fix xunit1012: null should not be used for value type parameters* fix xunit1037: there are fewer theory data type arguments than required by the parameters of the test method* fix xunit1041: fixture arguments to test classes must have fixture sources* fix xunit1048: avoid using 'async void' for test methods as it is deprecated in xunit.net v3* fix xunit2021: async assertions should be awaited* fix xunit2027: comparison of sets to linear containers have undefined results* fix xunit2029: do not use assert.empty to check if a value does not exist in a collection* fix xunit2031: do not use where clause with assert.single* disable test that started erroring
dotnet/runtime,bca7bfa91efaf6e7911a6b0ba6071e4aef0ee7b4,"Fix thread abort issue with funceval (#118354)

There is a problem with threadabort in funceval in case there is no
managed frame on the stack between the abortion point and the
`FuncEvalFrame`. That can happen e.g. when invoking a static method via
funceval for a type with static constructor that was not invoked yet and
takes a long time to complete.

The problem is caused by the fact that when EH is called to propagate
the ThreadAbortException, it starts at the first managed frame and so it
skips the try/catch in the funceval native code.

This change fixes it by using `RaiseTheExceptionInternalOnly` to
raise the `ThreadAbortException` in the `Thread::HandleThreadAbort`. The
`Thread::HandleThreadAbort` is always called by native code that has a
native catch or (on Windows) ends up calling the `ProcessCLRException`.

I have originally made the change to call the `DispatchManagedException`
from the `Thread::HandleThreadAbort`, but this issue shows it is
problematic.

I have verified that the repro provided by @eterekhin in the issue
report no longer causes the process to crash with failfast, but
reports the funceval as timed out as expected.

Close #118015",2025-08-04 21:33:48+00:00,Jan Vorlicek,1,b73ba2a1ef36143392049aa5c94282032e3ebadf,"Clear TS_GCSuspendRedirected at the end of thread redirection (#119164)

TS_GCSuspendRedirected is normally cleared in the slow path of pulsing GC mode (RareDisablePreemptiveGC). The problem is that we may not even get to that slow path if the thread gets rescheduled right after we switch to preemptive mode and gets scheduled back only after the GC completes and resumes execution. This change clears it explicitly.

Fixes #119149",1,0,4,"fix thread abort issue with funceval (issue_ref)there is a problem with threadabort in funceval in case there is nomanaged frame on the stack between the abortion point and the. that can happen e.g. when invoking a static method viafunceval for a type with static constructor that was not invoked yet andtakes a long time to complete.the problem is caused by the fact that when eh is called to propagatethe threadabortexception, it starts at the first managed frame and so itskips the try/catch in the funceval native code.this change fixes it by using toraise the in the . the is always called by native code that has anative catch or (on windows) ends up calling the .i have originally made the change to call the from the , but this issue shows it isproblematic.i have verified that the repro provided by @eterekhin in the issuereport no longer causes the process to crash with failfast, butreports the funceval as timed out as expected.close issue_ref"
dotnet/runtime,56b2a2a7a155532fb016b0e625e01a94017e3198,Use `nint` for native-sized integers in `Volatile` (#118360),2025-08-05 02:16:23+00:00,xtqqczze,0,,,2,14,14,use for native-sized integers in (issue_ref)
dotnet/runtime,0549417cbd2fcc2edd26f4a8f9ab07d357f34de2,"Use minipal_hires_ticks() as random seed (#118362)

minipal_hires_ticks is much more likely to guarantee that different threads end up with different seeds",2025-08-05 05:39:58+00:00,Jan Kotas,0,,,1,1,1,use minipal_hires_ticks() as random seed (issue_ref)minipal_hires_ticks is much more likely to guarantee that different threads end up with different seeds
dotnet/runtime,24711171ea259273abdc06f6fa4d076b8c6ba3ec,Update ActiveIssue references for Android in MutexTests (#118343),2025-08-05 07:43:16+00:00,Milos Kotlar,0,,,2,9,10,update activeissue references for android in mutextests (issue_ref)
dotnet/runtime,ab58a813ba0c8300d9d7cdfdd1671f6e6548b53a,"[Apple mobile] Disable iOS.Simulator.LibraryMode.Test on simulator (#118269)

* Test extra platform failures

* Revert changes",2025-08-05 09:20:17+00:00,Milos Kotlar,1,315dbcf5f796fcb5310d167fee11f62dd954fb4d,"Disable canonicalization tests with native AOT (#118676)

These are all incompatible with trimming and break native AOT outerloop runs. E.g.

```
[FAIL] System.Runtime.Serialization.Xml.Canonicalization.Tests.XmlCanonicalizationTest.TestC14NInclusivePrefixes
System.TypeInitializationException : A type initializer threw an exception. To determine which type, inspect the InnerException's StackTrace property.
---- System.InvalidOperationException : There is an error in XML document (0, 0).
-------- System.InvalidOperationException : There was an error reflecting type 'TestCasesConfig'.
------------ System.InvalidOperationException : You must implement a default accessor on System.Collections.Generic.List`1[[TestCase, System.Runtime.Serialization.Xml.Canonicalization.Tests, Version=10.0.0.0, Culture=neutral, PublicKeyToken=cc7b13ffcd2ddd51]] because it inherits from ICollection.
   at System.Runtime.CompilerServices.ClassConstructorRunner.EnsureClassConstructorRun(StaticClassConstructionContext*) + 0x16c
   at System.Runtime.CompilerServices.ClassConstructorRunner.CheckStaticClassConstructionReturnNonGCStaticBase(StaticClassConstructionContext*, IntPtr) + 0x14
   at System.Runtime.Serialization.Xml.Canonicalization.Tests.XmlCanonicalizationTest.TestC14NInclusivePrefixes() + 0x80c
   at System.Runtime.Serialization.Xml.Canonicalization!<BaseAddress>+0x720cdc
   at System.Reflection.DynamicInvokeInfo.Invoke(Object, IntPtr, Object[], BinderBundle, Boolean) + 0x114
----- Inner Stack Trace -----
   at System.Xml.Serialization.XmlSerializer.Deserialize(XmlReader, String, XmlDeserializationEvents) + 0x1f8
   at System.Xml.Serialization.XmlSerializer.Deserialize(Stream) + 0x9c
   at TestConfigHelper.LoadAllTests(String path) + 0x78
   at System.Runtime.CompilerServices.ClassConstructorRunner.EnsureClassConstructorRun(StaticClassConstructionContext*) + 0xbc
----- Inner Stack Trace -----
   at System.Xml.Serialization.XmlReflectionImporter.ImportTypeMapping(TypeModel, String, XmlReflectionImporter.ImportContext, String, XmlAttributes, Boolean, Boolean, RecursionLimiter) + 0x59c
   at System.Xml.Serialization.XmlReflectionImporter.ImportElement(TypeModel, XmlRootAttribute, String, RecursionLimiter) + 0xa0
   at System.Xml.Serialization.XmlReflectionImporter.ImportTypeMapping(Type, XmlRootAttribute, String) + 0x8c
   at System.Xml.Serialization.XmlSerializer.GetMapping() + 0x58
   at System.Xml.Serialization.XmlSerializer.Deserialize(XmlReader, String, XmlDeserializationEvents) + 0x6c
----- Inner Stack Trace -----
   at System.Xml.Serialization.TypeScope.GetDefaultIndexer(Type, String) + 0x284
   at System.Xml.Serialization.TypeScope.ImportTypeDesc(Type, MemberInfo, Boolean) + 0x66c
   at System.Xml.Serialization.TypeScope.GetTypeDesc(Type, MemberInfo, Boolean, Boolean) + 0x100
   at System.Xml.Serialization.StructModel.GetFieldModel(FieldInfo) + 0x78
   at System.Xml.Serialization.StructModel.GetFieldModel(MemberInfo) + 0x68
   at System.Xml.Serialization.XmlReflectionImporter.InitializeStructMembers(StructMapping, StructModel, Boolean, String, RecursionLimiter) + 0x5d4
   at System.Xml.Serialization.XmlReflectionImporter.ImportStructLikeMapping(StructModel, String, Boolean, XmlAttributes, RecursionLimiter) + 0x228
   at System.Xml.Serialization.XmlReflectionImporter.ImportTypeMapping(TypeModel, String, XmlReflectionImporter.ImportContext, String, XmlAttributes, Boolean, Boolean, RecursionLimiter) + 0x218
```",1,1,0,[apple mobile] disable ios.simulator.librarymode.test on simulator (issue_ref)* test extra platform failures* revert changes
dotnet/runtime,e1fbcdc80ac523893de8b533298c317db69ecfcd,"Do not reset size of TailCallArgBuffer (#118365)

* TailCallArgBuffer:State is 32-bit int. The code incorrectly used native int operation to set. It lead to TailCallArgBuffer::Size to be reset as well and needlessly re-allocating the tail call buffer.

* Switch to preemptive mode around malloc/free in TailCallArgBuffer allocation

Move the fast path of the TailCallArgBuffer allocation helper to C# to avoid perf overload of switching to preemptive mode. Also, aggressively inline it to allow zero initialization to be unrolled by the JIT.

* Skip early GC reporting de-action if there is nothing to report

Fixes #118166",2025-08-05 12:23:29+00:00,Jan Kotas,1,54e7818aad7898cea33784237d52ee3fa6a16f39,"Fix unhandled exception reporting corner cases (#118450)

* Fix unhandled exception reporting corner cases

There are several issues with processing exceptions that are not handled
by managed code on Windows:
* Sometimes the AppDomain.UnhandledException event is sent multiple
  times
* Exception flowing to foreign native code is reported as unhandled even
  when it is actually caught by the native code
* In rare cases, the unhandled exception stack trace is doubled

This change fixes them by not reporting the unhandled exception in the
SfiNext on Windows. It just raises the underlying SEH exception there
with the thread marked so that the personality routines for the managed
frames won't run the managed exception handling code. If the exception
is truly unhandled, the `InternalUnhandledExceptionFilter_Worker` will be
called by the unhandled exception filter installed for the process and
report the exception as unhandled.
If that exception ends up being caught by a foreign native code, then
nothing will be reported.

Close #115215

* Ensure AppDomain.CurrentDomain.UnhandledException occurs before finally",10,102,54,"do not reset size of tailcallargbuffer (issue_ref)* tailcallargbuffer:state is 32-bit int. the code incorrectly used native int operation to set. it lead to tailcallargbuffer::size to be reset as well and needlessly re-allocating the tail call buffer.* switch to preemptive mode around malloc/free in tailcallargbuffer allocationmove the fast path of the tailcallargbuffer allocation helper to c# to avoid perf overload of switching to preemptive mode. also, aggressively inline it to allow zero initialization to be unrolled by the jit.* skip early gc reporting de-action if there is nothing to reportfixes issue_ref"
dotnet/runtime,dc3298660fb30d8b69de7e4912f7d194ea692347,Disable timing out test on OSX (#118392),2025-08-05 14:57:58+00:00,Marie Píchová,0,,,1,1,0,disable timing out test on osx (issue_ref)
dotnet/runtime,824fdb181152f74ec5e189921f7105df83bd25d5,JIT: Remove redundant normalizing casts when passing and returning structs (#118345),2025-08-05 15:24:20+00:00,Jakob Botsch Nielsen,0,,,1,21,1,jit: remove redundant normalizing casts when passing and returning structs (issue_ref)
dotnet/runtime,34574d7c1c6a6b274cc67d3367cd986d4eb43894,"Add tests for singlefile bundles with non-ascii characters (#118281)

Adds tests for bundles that contain non-ascii characters to validate all strings in a singlefile bundle are written as UTF-8.",2025-08-05 17:19:19+00:00,Jackson Schuster,0,,,3,76,0,add tests for singlefile bundles with non-ascii characters (issue_ref)adds tests for bundles that contain non-ascii characters to validate all strings in a singlefile bundle are written as utf-8.
dotnet/runtime,63783f556f350c2b2d03216cb4cdd3fad3d23407,"[mono][infra] Increase fullAOT LLVM CI timeout (#118378)

* Increase fullAOT CI timeout to 480 minutes

* remove some test suits not relevant for LLVM AOT",2025-08-05 17:35:15+00:00,Matous Kozak,0,,,1,4,4,[mono][infra] increase fullaot llvm ci timeout (issue_ref)* increase fullaot ci timeout to 480 minutes* remove some test suits not relevant for llvm aot
