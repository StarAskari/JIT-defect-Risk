repo,bug_commit_sha,message,date,author,label,fix_commit_sha,fix_message,files_changed,additions,deletions,clean_message
dotnet/runtime,53956ab5c5c000956259220ce74dd72c395f53b2,"[mono][hotreload] Ignore if we receive an empty update. (#120333)

* If we receive an empty update we should just ignore it.

* Update src/mono/mono/component/hot_reload.c

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-10-03 16:34:19+00:00,Thays Grazia,0,,,1,4,2,[mono][hotreload] ignore if we receive an empty update. (issue_ref)* if we receive an empty update we should just ignore it.* update src/mono/mono/component/hot_reload.c
dotnet/runtime,170fd3d7c91d3626282672dcb3d224e2a7b0a694,Replace Marshal.SizeOf with sizeof operator,2025-10-03 16:38:36+00:00,Kevin Jones,0,,,4,23,34,replace marshal.sizeof with sizeof operator
dotnet/runtime,ae2104904921c9466c35c2422800346f21b8e919,"Remove HybridGlobalization from perf-ios-scenarios-build-jobs.yml (#120338)

Remove HybridGlobalization from perf-ios-scenarios-build-jobs.yml, the last place in the performance repo testing flow that references it from the cleanup.",2025-10-03 16:50:45+00:00,Parker Bibus,0,,,1,2,7,"remove hybridglobalization from perf-ios-scenarios-build-jobs.yml (issue_ref)remove hybridglobalization from perf-ios-scenarios-build-jobs.yml, the last place in the performance repo testing flow that references it from the cleanup."
dotnet/runtime,1c955dd5d34fd34fbe1e111a4b46c87b874432ef,"Avoid sort allocations (#116109)

* Extracted a separate region to prevent accidental modifications

* ArraySortHelperForTComparer

* missing static

* restore special casing

---------

Co-authored-by: Tarek Mahmoud Sayed <10833894+tarekgh@users.noreply.github.com>",2025-10-03 18:45:28+00:00,Package,0,,,2,447,2,avoid sort allocations (issue_ref)* extracted a separate region to prevent accidental modifications* arraysorthelperfortcomparer* missing static* restore special casing---------
dotnet/runtime,51ca4ba6064990852307ca0f8efa3dee885cafec,Detect if RSA-384 is supported on the platform,2025-10-03 19:37:23+00:00,Kevin Jones,0,,,4,89,34,detect if rsa-384 is supported on the platform
dotnet/runtime,caf8cf3ebeaea73ff979978bbabd985d1d9a9475,"Revert ""Use a ReaderWriterLockSlim in RcwCache (#117792)"" (#120370)

This reverts commit a0748134c931391cf310f8eb4b78d4874f378463.",2025-10-03 20:04:40+00:00,Aaron Robinson,0,,,1,4,19,"revert ""use a readerwriterlockslim in rcwcache (issue_ref)"" (issue_ref)this reverts commit a0748134c931391cf310f8eb4b78d4874f378463."
dotnet/runtime,d6adddf448ecbf3128eb762a5ea480a676624775,"Limit the use of a pointer to the lexical scope of the target

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-10-03 21:18:21+00:00,Jeremy Barton,0,,,1,9,9,limit the use of a pointer to the lexical scope of the target
dotnet/runtime,00827336cc507d8c6f934b90e61790f9d24ca42d,"Use switch statement to map socket errors (#120364)

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>
Co-authored-by: Stephen Toub <stoub@microsoft.com>",2025-10-03 23:21:12+00:00,Jan Kotas,0,,,1,92,111,use switch statement to map socket errors (issue_ref)
dotnet/runtime,a12d21630fffc479582fc914f444e2c83d327e3b,Update Microsoft.NETCore.Native.Windows.targets (#120368),2025-10-04 04:12:09+00:00,舰队的偶像-岛风酱!,0,,,1,1,1,update microsoft.netcore.native.windows.targets (issue_ref)
dotnet/runtime,a869b45f1d8e46a0032e303d13bafac468dbae77,[wasm][coreCLR] unify -fwasm-exceptions and -msimd128 (#120365),2025-10-04 07:43:34+00:00,Pavel Savara,0,,,8,40,7,[wasm][coreclr] unify -fwasm-exceptions and -msimd128 (issue_ref)
dotnet/runtime,83c947b3f16e1fed7ca6d31865c1bd65f6915632,Remove redundant guid parsing (#120413),2025-10-05 08:28:20+00:00,Egor Bogatov,0,,,2,3,2,remove redundant guid parsing (issue_ref)
dotnet/runtime,8167e996bf816d375f21b9b045442906e673c7e9,"TimeZones improvement (#119662)

* TimeZones improvement

* Address the feedback

* Address David's feedback

* Feedback addressing

* Adjust one case calculation

* Address more feedback",2025-10-05 17:57:22+00:00,Tarek Mahmoud Sayed,1,b3a8d0d3efb0df687c68f815082cb22180a29a18,"Fix GetSystemTimeZone to return filtered list (#121095)

Fixes https://github.com/dotnet/runtime/issues/117422

We maintain an internal cache, `_systemTimeZones`, that maps time zone
IDs to their corresponding `TimeZoneInfo` objects. Entries are added
when either `TimeZoneInfo.GetSystemTimeZones(...)` or
`TimeZoneInfo.FindSystemTimeZoneById(...)` is called.

On Linux and macOS, `TimeZoneInfo.FindSystemTimeZoneById(...)` attempts
to retrieve the time zone object by reading the appropriate time zone
file (for example, `/usr/share/zoneinfo/America/Los_Angeles` for Pacific
Time). When `TimeZoneInfo.GetSystemTimeZones()` is called, it reads the
list of available time zones from the `/usr/share/zoneinfo/zone.tab`
file. This file provides a filtered list that excludes legacy time zones
and avoids duplicate entries with different IDs.

The issue arises when `TimeZoneInfo.FindSystemTimeZoneById(...)` is
called with a legacy time zone ID that is not listed in `zone.tab`. In
that case, the corresponding time zone object is still created and added
to the `_systemTimeZones` cache. Later, when
`TimeZoneInfo.GetSystemTimeZones(...)` is invoked, the list populated
from `zone.tab` may include a duplicate time zone (same display name but
different ID), such as both `UTC` and `UCT`. This can cause problems for
UI applications that display time zone names, as duplicates appear in
the list.

The fix ensures that `GetSystemTimeZones()` returns only the filtered
list derived from `zone.tab`, excluding any cached entries added from
legacy or non-standard sources. This approach preserves cache
consistency and performance, while preventing duplicates from appearing
in the final list.

Windows systems are not affected by this issue, so the change will have
minimal impact there aside from shared code adjustments.",7,1571,995,timezones improvement (issue_ref)* timezones improvement* address the feedback* address david's feedback* feedback addressing* adjust one case calculation* address more feedback
dotnet/runtime,1d29a7137525f8bfd840021e471df46e7e378cd0,"[main] Source code updates from dotnet/dotnet (#120351)

* Backflow from https://github.com/dotnet/dotnet / fe6b307 build 285582

[[ commit created by automation ]]

* Update dependencies from https://github.com/dotnet/dotnet build 285582
Updated Dependencies:
Microsoft.CodeAnalysis, Microsoft.CodeAnalysis.Analyzers, Microsoft.CodeAnalysis.CSharp, Microsoft.Net.Compilers.Toolset (Version 5.0.0-2.25480.112 -> 5.1.0-1.25502.108)
Microsoft.CodeAnalysis.NetAnalyzers, Microsoft.DotNet.ApiCompat.Task, Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport (Version 10.0.100-rc.2.25480.112 -> 10.0.100-rc.2.25502.108)
Microsoft.DotNet.Arcade.Sdk, Microsoft.DotNet.Build.Tasks.Archives, Microsoft.DotNet.Build.Tasks.Feed, Microsoft.DotNet.Build.Tasks.Installers, Microsoft.DotNet.Build.Tasks.Packaging, Microsoft.DotNet.Build.Tasks.TargetFramework, Microsoft.DotNet.Build.Tasks.Templating, Microsoft.DotNet.Build.Tasks.Workloads, Microsoft.DotNet.CodeAnalysis, Microsoft.DotNet.GenAPI, Microsoft.DotNet.GenFacades, Microsoft.DotNet.Helix.Sdk, Microsoft.DotNet.PackageTesting, Microsoft.DotNet.RemoteExecutor, Microsoft.DotNet.SharedFramework.Sdk, Microsoft.DotNet.XliffTasks, Microsoft.DotNet.XUnitExtensions (Version 11.0.0-beta.25480.112 -> 11.0.0-beta.25502.108)
Microsoft.DotNet.Cecil (Version 0.11.5-alpha.25480.112 -> 0.11.5-alpha.25502.108)
Microsoft.DotNet.XUnitAssert, Microsoft.DotNet.XUnitConsoleRunner (Version 2.9.3-beta.25480.112 -> 2.9.3-beta.25502.108)
Microsoft.NET.Sdk.IL, Microsoft.NETCore.App.Ref, Microsoft.NETCore.ILAsm, runtime.native.System.IO.Ports, System.Reflection.Metadata, System.Reflection.MetadataLoadContext, System.Text.Json (Version 10.0.0-rc.1.25480.112 -> 10.0.0-rc.1.25502.108)
NuGet.Frameworks, NuGet.Packaging, NuGet.ProjectModel, NuGet.Versioning (Version 7.0.0-preview.1.48112 -> 7.0.0-preview.1.308)
System.CommandLine (Version 2.0.0-rc.1.25480.112 -> 2.0.0-rc.1.25502.108)

* Update dependencies from https://github.com/dotnet/dotnet build 285662
Updated Dependencies:
Microsoft.CodeAnalysis, Microsoft.CodeAnalysis.Analyzers, Microsoft.CodeAnalysis.CSharp, Microsoft.Net.Compilers.Toolset (Version 5.1.0-1.25502.108 -> 5.1.0-1.25503.103)
Microsoft.CodeAnalysis.NetAnalyzers, Microsoft.DotNet.ApiCompat.Task, Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport (Version 10.0.100-rc.2.25502.108 -> 10.0.100-rc.2.25503.103)
Microsoft.DotNet.Arcade.Sdk, Microsoft.DotNet.Build.Tasks.Archives, Microsoft.DotNet.Build.Tasks.Feed, Microsoft.DotNet.Build.Tasks.Installers, Microsoft.DotNet.Build.Tasks.Packaging, Microsoft.DotNet.Build.Tasks.TargetFramework, Microsoft.DotNet.Build.Tasks.Templating, Microsoft.DotNet.Build.Tasks.Workloads, Microsoft.DotNet.CodeAnalysis, Microsoft.DotNet.GenAPI, Microsoft.DotNet.GenFacades, Microsoft.DotNet.Helix.Sdk, Microsoft.DotNet.PackageTesting, Microsoft.DotNet.RemoteExecutor, Microsoft.DotNet.SharedFramework.Sdk, Microsoft.DotNet.XliffTasks, Microsoft.DotNet.XUnitExtensions (Version 11.0.0-beta.25502.108 -> 11.0.0-beta.25503.103)
Microsoft.DotNet.Cecil (Version 0.11.5-alpha.25502.108 -> 0.11.5-alpha.25503.103)
Microsoft.DotNet.XUnitAssert, Microsoft.DotNet.XUnitConsoleRunner (Version 2.9.3-beta.25502.108 -> 2.9.3-beta.25503.103)
Microsoft.NET.Sdk.IL, Microsoft.NETCore.App.Ref, Microsoft.NETCore.ILAsm, runtime.native.System.IO.Ports, System.Reflection.Metadata, System.Reflection.MetadataLoadContext, System.Text.Json (Version 10.0.0-rc.1.25502.108 -> 10.0.0-rc.1.25503.103)
NuGet.Frameworks, NuGet.Packaging, NuGet.ProjectModel, NuGet.Versioning (Version 7.0.0-preview.1.308 -> 7.0.0-preview.1.403)
System.CommandLine (Version 2.0.0-rc.1.25502.108 -> 2.0.0-rc.1.25503.103)

* Update dependencies from https://github.com/dotnet/dotnet build 285790
Updated Dependencies:
Microsoft.CodeAnalysis, Microsoft.CodeAnalysis.Analyzers, Microsoft.CodeAnalysis.CSharp, Microsoft.Net.Compilers.Toolset (Version 5.1.0-1.25503.103 -> 5.1.0-1.25504.101)
Microsoft.CodeAnalysis.NetAnalyzers, Microsoft.DotNet.ApiCompat.Task, Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport (Version 10.0.100-rc.2.25503.103 -> 10.0.100-rc.2.25504.101)
Microsoft.DotNet.Arcade.Sdk, Microsoft.DotNet.Build.Tasks.Archives, Microsoft.DotNet.Build.Tasks.Feed, Microsoft.DotNet.Build.Tasks.Installers, Microsoft.DotNet.Build.Tasks.Packaging, Microsoft.DotNet.Build.Tasks.TargetFramework, Microsoft.DotNet.Build.Tasks.Templating, Microsoft.DotNet.Build.Tasks.Workloads, Microsoft.DotNet.CodeAnalysis, Microsoft.DotNet.GenAPI, Microsoft.DotNet.GenFacades, Microsoft.DotNet.Helix.Sdk, Microsoft.DotNet.PackageTesting, Microsoft.DotNet.RemoteExecutor, Microsoft.DotNet.SharedFramework.Sdk, Microsoft.DotNet.XliffTasks, Microsoft.DotNet.XUnitExtensions (Version 11.0.0-beta.25503.103 -> 11.0.0-beta.25504.101)
Microsoft.DotNet.Cecil (Version 0.11.5-alpha.25503.103 -> 0.11.5-alpha.25504.101)
Microsoft.DotNet.XUnitAssert, Microsoft.DotNet.XUnitConsoleRunner (Version 2.9.3-beta.25503.103 -> 2.9.3-beta.25504.101)
Microsoft.NET.Sdk.IL, Microsoft.NETCore.App.Ref, Microsoft.NETCore.ILAsm, runtime.native.System.IO.Ports, System.Reflection.Metadata, System.Reflection.MetadataLoadContext, System.Text.Json (Version 10.0.0-rc.1.25503.103 -> 10.0.0-rc.1.25504.101)
NuGet.Frameworks, NuGet.Packaging, NuGet.ProjectModel, NuGet.Versioning (Version 7.0.0-preview.1.403 -> 7.0.0-preview.1.501)
System.CommandLine (Version 2.0.0-rc.1.25503.103 -> 2.0.0-rc.1.25504.101)

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-10-06 03:05:32+00:00,dotnet-maestro[bot],0,,,4,123,123,"[main] source code updates from dotnet/dotnet (issue_ref)* backflow from / fe6b307 build 285582[[ commit created by automation ]]* update dependencies from build 285582updated dependencies:microsoft.codeanalysis, microsoft.codeanalysis.analyzers, microsoft.codeanalysis.csharp, microsoft.net.compilers.toolset (version 5.0.0-2.25480.112 -> 5.1.0-1.25502.108)microsoft.codeanalysis.netanalyzers, microsoft.dotnet.apicompat.task, microsoft.net.workload.emscripten.current.manifest-10.0.100.transport (version 10.0.100-rc.2.25480.112 -> 10.0.100-rc.2.25502.108)microsoft.dotnet.arcade.sdk, microsoft.dotnet.build.tasks.archives, microsoft.dotnet.build.tasks.feed, microsoft.dotnet.build.tasks.installers, microsoft.dotnet.build.tasks.packaging, microsoft.dotnet.build.tasks.targetframework, microsoft.dotnet.build.tasks.templating, microsoft.dotnet.build.tasks.workloads, microsoft.dotnet.codeanalysis, microsoft.dotnet.genapi, microsoft.dotnet.genfacades, microsoft.dotnet.helix.sdk, microsoft.dotnet.packagetesting, microsoft.dotnet.remoteexecutor, microsoft.dotnet.sharedframework.sdk, microsoft.dotnet.xlifftasks, microsoft.dotnet.xunitextensions (version 11.0.0-beta.25480.112 -> 11.0.0-beta.25502.108)microsoft.dotnet.cecil (version 0.11.5-alpha.25480.112 -> 0.11.5-alpha.25502.108)microsoft.dotnet.xunitassert, microsoft.dotnet.xunitconsolerunner (version 2.9.3-beta.25480.112 -> 2.9.3-beta.25502.108)microsoft.net.sdk.il, microsoft.netcore.app.ref, microsoft.netcore.ilasm, runtime.native.system.io.ports, system.reflection.metadata, system.reflection.metadataloadcontext, system.text.json (version 10.0.0-rc.1.25480.112 -> 10.0.0-rc.1.25502.108)nuget.frameworks, nuget.packaging, nuget.projectmodel, nuget.versioning (version 7.0.0-preview.1.48112 -> 7.0.0-preview.1.308)system.commandline (version 2.0.0-rc.1.25480.112 -> 2.0.0-rc.1.25502.108)* update dependencies from build 285662updated dependencies:microsoft.codeanalysis, microsoft.codeanalysis.analyzers, microsoft.codeanalysis.csharp, microsoft.net.compilers.toolset (version 5.1.0-1.25502.108 -> 5.1.0-1.25503.103)microsoft.codeanalysis.netanalyzers, microsoft.dotnet.apicompat.task, microsoft.net.workload.emscripten.current.manifest-10.0.100.transport (version 10.0.100-rc.2.25502.108 -> 10.0.100-rc.2.25503.103)microsoft.dotnet.arcade.sdk, microsoft.dotnet.build.tasks.archives, microsoft.dotnet.build.tasks.feed, microsoft.dotnet.build.tasks.installers, microsoft.dotnet.build.tasks.packaging, microsoft.dotnet.build.tasks.targetframework, microsoft.dotnet.build.tasks.templating, microsoft.dotnet.build.tasks.workloads, microsoft.dotnet.codeanalysis, microsoft.dotnet.genapi, microsoft.dotnet.genfacades, microsoft.dotnet.helix.sdk, microsoft.dotnet.packagetesting, microsoft.dotnet.remoteexecutor, microsoft.dotnet.sharedframework.sdk, microsoft.dotnet.xlifftasks, microsoft.dotnet.xunitextensions (version 11.0.0-beta.25502.108 -> 11.0.0-beta.25503.103)microsoft.dotnet.cecil (version 0.11.5-alpha.25502.108 -> 0.11.5-alpha.25503.103)microsoft.dotnet.xunitassert, microsoft.dotnet.xunitconsolerunner (version 2.9.3-beta.25502.108 -> 2.9.3-beta.25503.103)microsoft.net.sdk.il, microsoft.netcore.app.ref, microsoft.netcore.ilasm, runtime.native.system.io.ports, system.reflection.metadata, system.reflection.metadataloadcontext, system.text.json (version 10.0.0-rc.1.25502.108 -> 10.0.0-rc.1.25503.103)nuget.frameworks, nuget.packaging, nuget.projectmodel, nuget.versioning (version 7.0.0-preview.1.308 -> 7.0.0-preview.1.403)system.commandline (version 2.0.0-rc.1.25502.108 -> 2.0.0-rc.1.25503.103)* update dependencies from build 285790updated dependencies:microsoft.codeanalysis, microsoft.codeanalysis.analyzers, microsoft.codeanalysis.csharp, microsoft.net.compilers.toolset (version 5.1.0-1.25503.103 -> 5.1.0-1.25504.101)microsoft.codeanalysis.netanalyzers, microsoft.dotnet.apicompat.task, microsoft.net.workload.emscripten.current.manifest-10.0.100.transport (version 10.0.100-rc.2.25503.103 -> 10.0.100-rc.2.25504.101)microsoft.dotnet.arcade.sdk, microsoft.dotnet.build.tasks.archives, microsoft.dotnet.build.tasks.feed, microsoft.dotnet.build.tasks.installers, microsoft.dotnet.build.tasks.packaging, microsoft.dotnet.build.tasks.targetframework, microsoft.dotnet.build.tasks.templating, microsoft.dotnet.build.tasks.workloads, microsoft.dotnet.codeanalysis, microsoft.dotnet.genapi, microsoft.dotnet.genfacades, microsoft.dotnet.helix.sdk, microsoft.dotnet.packagetesting, microsoft.dotnet.remoteexecutor, microsoft.dotnet.sharedframework.sdk, microsoft.dotnet.xlifftasks, microsoft.dotnet.xunitextensions (version 11.0.0-beta.25503.103 -> 11.0.0-beta.25504.101)microsoft.dotnet.cecil (version 0.11.5-alpha.25503.103 -> 0.11.5-alpha.25504.101)microsoft.dotnet.xunitassert, microsoft.dotnet.xunitconsolerunner (version 2.9.3-beta.25503.103 -> 2.9.3-beta.25504.101)microsoft.net.sdk.il, microsoft.netcore.app.ref, microsoft.netcore.ilasm, runtime.native.system.io.ports, system.reflection.metadata, system.reflection.metadataloadcontext, system.text.json (version 10.0.0-rc.1.25503.103 -> 10.0.0-rc.1.25504.101)nuget.frameworks, nuget.packaging, nuget.projectmodel, nuget.versioning (version 7.0.0-preview.1.403 -> 7.0.0-preview.1.501)system.commandline (version 2.0.0-rc.1.25503.103 -> 2.0.0-rc.1.25504.101)---------"
dotnet/runtime,3c9b03ee8c4c0d2117efeaff69bb0561c8237e37,"Fix INTOP_UNBOX_ANY on wasm (#120261)

* Fix INTOP_UNBOX_ANY on wasm

Handle IL unbox helpers

* Feedback

* Feedback

Add unbox.end opcode to finish unboxing after helper call

* Remove unwanted include

* Add another calli signature

* Use intermediary var for result between unbox.any and unbox.end

* Add generic variant

* Apply suggestions from code review

Co-authored-by: Aaron Robinson <arobins@microsoft.com>

* Fix generic version

* Apply suggestions from code review

Co-authored-by: Katelyn Gadd <kg@luminance.org>

---------

Co-authored-by: Aaron Robinson <arobins@microsoft.com>
Co-authored-by: Katelyn Gadd <kg@luminance.org>",2025-10-06 06:11:40+00:00,Radek Doulik,1,5bd2f687b6e9d81ecb85fc896a164f7d1279037d,"[wasm][coreclr] Fix offset calculation (#120613)

Account for this and retbuf arguments at the beginning

Add more call functions hit during EH

Fixes https://github.com/dotnet/runtime/issues/120318",4,86,8,fix intop_unbox_any on wasm (issue_ref)* fix intop_unbox_any on wasmhandle il unbox helpers* feedback* feedbackadd unbox.end opcode to finish unboxing after helper call* remove unwanted include* add another calli signature* use intermediary var for result between unbox.any and unbox.end* add generic variant* apply suggestions from code review
dotnet/runtime,75662173e3918f2176b74e467dc8e41d4f01d4d4,[H/3] Enable few disabled H/3 cookie tests (#120363),2025-10-06 08:46:57+00:00,Marie Píchová,0,,,1,0,18,[h/3] enable few disabled h/3 cookie tests (issue_ref)
dotnet/runtime,b87db0a878449f8ce64e95bffe7da6dd84cc5de3,"Automated bump of chrome version (#120412)

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>",2025-10-06 12:36:37+00:00,github-actions[bot],0,,,1,4,4,automated bump of chrome version (issue_ref)
dotnet/runtime,e85aa94c003f986c53e81944242e4f9564f94d0e,"Update dependencies from https://dev.azure.com/dnceng/internal/_git/dotnet-optimization build 20251002.1 (#120369)

On relative base path root
optimization.linux-arm64.MIBC.Runtime , optimization.linux-x64.MIBC.Runtime , optimization.windows_nt-arm64.MIBC.Runtime , optimization.windows_nt-x64.MIBC.Runtime , optimization.windows_nt-x86.MIBC.Runtime , optimization.PGO.CoreCLR From Version 1.0.0-prerelease.25467.1 -> To Version 1.0.0-prerelease.25502.1

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-10-06 23:48:34+00:00,dotnet-maestro[bot],0,,,2,18,18,"update dependencies from build 20251002.1 (issue_ref)on relative base path rootoptimization.linux-arm64.mibc.runtime , optimization.linux-x64.mibc.runtime , optimization.windows_nt-arm64.mibc.runtime , optimization.windows_nt-x64.mibc.runtime , optimization.windows_nt-x86.mibc.runtime , optimization.pgo.coreclr from version 1.0.0-prerelease.25467.1 -> to version 1.0.0-prerelease.25502.1"
dotnet/runtime,5811908773f68b4b430f1107e6b3dd1a4f691eca,"Fix EH transition on native to interpreted boundary (#120378)

* Fix EH transition on native to interpreted boundary

There is a case where an interpreted code is called by CallDescrWorker
and the code that called the CallDescrWorker was invoked via pinvoke. In
that case, the SfiNextWorker was not detecting that the exception
propagates to CallDescrWorker due to the fact that the final
StackFrameIterator::GetFrameState() was returning SFITER_FRAME_FUNCTION
for the next pinvoke and not reporting any intermediate
SFITER_NATIVE_MARKER_FRAME.

* Fix Unix build break",2025-10-07 00:57:58+00:00,Jan Vorlicek,1,62578463d0b13c7694cf679caa6cbb1458a35c73,"Fix GCFrame allocated by interpreted code handling (#120384)

* Fix GCFrame allocated by interpreted code handling

There are few cases where GCFrame is created by managed code as a
managed local. When that code is interpreted, this local is on the
interpreter stack which is NOT the processor stack. So various debug
checks and also removing these GCFrames from the per-thread chain
doesn't work.

This change adds an ""os stack location"" member to the GCFrame that
is set to ""this"" for GCFrames allocated in native code. For the ones
allocated by the interpreted managed code, it is set to the
InterpMethodContextFrame of the frame that created it. That value is
then used instead of the raw GCFrame pointer to compare locations of
these frames.

* Add missing ifdef

* Fix build break

* Add missing GCFrameRegistration.cs

I've forgotten to add this file

* PR feedback

* Update src/libraries/System.Private.CoreLib/src/System/Runtime/GCFrameRegistration.cs

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",1,11,6,"fix eh transition on native to interpreted boundary (issue_ref)* fix eh transition on native to interpreted boundarythere is a case where an interpreted code is called by calldescrworkerand the code that called the calldescrworker was invoked via pinvoke. inthat case, the sfinextworker was not detecting that the exceptionpropagates to calldescrworker due to the fact that the finalstackframeiterator::getframestate() was returning sfiter_frame_functionfor the next pinvoke and not reporting any intermediatesfiter_native_marker_frame.* fix unix build break"
dotnet/runtime,b38de35330cc30aa0e4dfbc79379c6682687c8d8,Enable building CoreCLR runtime packs for Apple mobile (#120444),2025-10-07 07:58:29+00:00,Milos Kotlar,0,,,1,1,0,enable building coreclr runtime packs for apple mobile (issue_ref)
dotnet/runtime,f981e2a50920c811acaf8da37c081cca60f21484,"JIT: Skip bitcast transformation for promoted locals (#120435)

The bitcast transformation produces `BITCAST(LCL_VAR)`, but for SIMDs
the local can be promoted and this ends up resulting in invalid IR. We
would normally go through the `LCL_FLD` path that DNERs the local, so
make sure we still do that.",2025-10-07 12:54:53+00:00,Jakob Botsch Nielsen,0,,,3,36,1,"jit: skip bitcast transformation for promoted locals (issue_ref)the bitcast transformation produces , but for simdsthe local can be promoted and this ends up resulting in invalid ir. wewould normally go through the path that dners the local, somake sure we still do that."
dotnet/runtime,ff8bbb91c39c0c87ac8cfe0c7ba4e5f88f117bab,Avoid double Dictionary lookups (incl. hashkey generation) by using new Dictionary methods (#120456),2025-10-07 14:19:30+00:00,Henrik,0,,,2,2,7,avoid double dictionary lookups (incl. hashkey generation) by using new dictionary methods (issue_ref)
dotnet/runtime,95c2d6d80d7b36f27314a481f89a51d5afdc8a1b,"[RuntimeAsync] When async method throws OperationCanceledException, its thunk should produce a Canceled task (#120346)

* Enable async feature/tests

* add a test

* Special-case OperationCanceledException in Task-returning thunks to produce canceled task.

* some comments

* comment

* remove an unnecessary and confusing comment

* Separate task finalization helpers for continuation and exception.

* undo unnecessary changes

* Revert ""Enable async feature/tests""

This reverts commit 8cf79ab62f53b948ee99a1d4f621281471303793.",2025-10-07 14:33:05+00:00,Vladimir Sadov,1,adb1091b2de6d2b191f431df1f30dcfb3caf5591,"Make runtime async callable thunks transparent (#120386)

Runtime async callable thunks were using `TaskAwaiter` directly, but
that has the normal await semantics which will either post continuations
to the captured synchronization context or to the thread pool. This
introduces an observable behavior change with async1 where sometimes
even configured awaits will end up posting back to a captured
synchronization context.

For example, consider an example like:
```csharp
private static async Task Foo()
{
    SynchronizationContext.SetSynchronizationContext(new TrackingSynchronizationContext());
    await Task.Delay(1000).ConfigureAwait(false);
}
```csharp

Before this change the runtime async call to `Task.Delay` creates a
runtime async callback thunk that roughly looks like
```csharp
Task DelayThunk(int time)
{
    TaskAwaiter awaiter = Task.Delay(time).GetAwaiter();
    if (!await.IsCompleted)
        AsyncHelpers.UnsafeAwaiterAwaiter(awaiter);
    awaiter.GetResult();
}
```
however, when this thunk is called we end up posting back to
`TrackingSynchronizationContext`, before the continuation for `Foo` then
must move its continuation back to the thread pool.

This PR fixes this and makes the thunks transparent in context behavior.
At the same time it also optimizes the runtime async -> async1 path to
be more efficient in the suspension case: the async1 task now directly
invokes the runtime async infrastructure as its continuion, instead of
going through multiple layers of indirection.

I also fixed a bug where we could end up invoking the wrong variant of
OnCompleted for non-unsafe notifiers if they implemented both
INotifyCompletion and ICriticalNotifyCompletion.

I have also renamed ThunkTask -> RuntimeAsyncTask.",6,147,17,"[runtimeasync] when async method throws operationcanceledexception, its thunk should produce a canceled task (issue_ref)* enable async feature/tests* add a test* special-case operationcanceledexception in task-returning thunks to produce canceled task.* some comments* comment* remove an unnecessary and confusing comment* separate task finalization helpers for continuation and exception.* undo unnecessary changes* revert ""enable async feature/tests""this reverts commit 8cf79ab62f53b948ee99a1d4f621281471303793."
dotnet/runtime,e402d821227061f6498f707e9b1bceaa6c32c814,"[clr-interp] Fail with a BADCODE if the opcode is unknown (#120391)

- Fail with BADCODE instead of asserting, which allows us to complete running some of the test suites, and will actually do the desired thing in actual retail builds.
- Also protect against unsafe memory access by bounds checking in CEEOpName",2025-10-07 17:03:54+00:00,David Wrighton,1,9833f600f9fc6e43240912370d7a16cdfcdbd7c8,"Handle Implicit arguments consistently between interpreter and JIT (#120339)

- The JIT did not match the behavior specified in the ECMA 335 standard. However, since its behavior is long-standing, instead of fixing the JIT, I'm proposing a new section in the ECMA augments document.
- I've written tests for the scenarios where the conversion happens
- And I've fixed the interpreter compiler to match the behavior the JIT has for these scenarios",2,6,3,"[clr-interp] fail with a badcode if the opcode is unknown (issue_ref)- fail with badcode instead of asserting, which allows us to complete running some of the test suites, and will actually do the desired thing in actual retail builds.- also protect against unsafe memory access by bounds checking in ceeopname"
dotnet/runtime,62578463d0b13c7694cf679caa6cbb1458a35c73,"Fix GCFrame allocated by interpreted code handling (#120384)

* Fix GCFrame allocated by interpreted code handling

There are few cases where GCFrame is created by managed code as a
managed local. When that code is interpreted, this local is on the
interpreter stack which is NOT the processor stack. So various debug
checks and also removing these GCFrames from the per-thread chain
doesn't work.

This change adds an ""os stack location"" member to the GCFrame that
is set to ""this"" for GCFrames allocated in native code. For the ones
allocated by the interpreted managed code, it is set to the
InterpMethodContextFrame of the frame that created it. That value is
then used instead of the raw GCFrame pointer to compare locations of
these frames.

* Add missing ifdef

* Fix build break

* Add missing GCFrameRegistration.cs

I've forgotten to add this file

* PR feedback

* Update src/libraries/System.Private.CoreLib/src/System/Runtime/GCFrameRegistration.cs

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-10-07 17:43:18+00:00,Jan Vorlicek,1,c392f56453693bcb920b1de9e0b4bc2e5948f4ef,"Fix ARM64 ThreadAbort issue (#120552)

There is a problem with RtlRestoreContext not restoring context during
ThreadAbort if that abort comes from injected APC callback on ARM64 and
the processor supports SVE. In that case, the context provided by the
APC callback can contain XSTATE and when we start walking stack from
that context, we copy that context into the REGDISPLAY. The problem is
that we copy the ContextFlags without changes, so if they contained
CONTEXT_XSTATE flag, it is kept set even though the REGDISPLAY has only
plain old CONTEXT without any xstate.
When we call RtlRestoreContext in the ResumeAfterCatch, it fails because
the XSTATE is not valid and so it returns. That's unexpected and we end
up crashing with an assert.

The fix clears the CONTEXT_XSTATE in ResumableFrame::UpdateRegDisplay so
that the REGDISPLAY ContextFlags are validly representing the context.

Close #120437",7,66,18,"fix gcframe allocated by interpreted code handling (issue_ref)* fix gcframe allocated by interpreted code handlingthere are few cases where gcframe is created by managed code as amanaged local. when that code is interpreted, this local is on theinterpreter stack which is not the processor stack. so various debugchecks and also removing these gcframes from the per-thread chaindoesn't work.this change adds an ""os stack location"" member to the gcframe thatis set to ""this"" for gcframes allocated in native code. for the onesallocated by the interpreted managed code, it is set to theinterpmethodcontextframe of the frame that created it. that value isthen used instead of the raw gcframe pointer to compare locations ofthese frames.* add missing ifdef* fix build break* add missing gcframeregistration.csi've forgotten to add this file* pr feedback* update src/libraries/system.private.corelib/src/system/runtime/gcframeregistration.cs---------"
dotnet/runtime,51359538882ae085c532442998e30fd1390dbcf6,[tiny][chore] Remove myself (pjanotti) from area System.Diagnostics.Tracing (#120476),2025-10-08 04:29:37+00:00,Paulo Janotti,0,,,1,0,1,[tiny][chore] remove myself (pjanotti) from area system.diagnostics.tracing (issue_ref)
dotnet/runtime,ee4c4d9532d698a77d3cae9211562459b48b2454,"[browser] build more subsets + runtime interp test (#120359)

Co-authored-by: SingleAccretion <62474226+SingleAccretion@users.noreply.github.com>
Co-authored-by: Aaron Robinson <arobins@microsoft.com>",2025-10-08 15:32:30+00:00,Pavel Savara,1,ce717acc70b4f165be5ab4de5053ef604287fd9f,Fix TestReadyToRun to use the in-build crossgen (#120678),18,97,59,[browser] build more subsets + runtime interp test (issue_ref)
dotnet/runtime,6af3c5924e4ecebf68874c64a13962c6cb468256,"[main] Source code updates from dotnet/dotnet (#120460)

* Update dependencies from https://github.com/dotnet/dotnet build 285901
Updated Dependencies:
Microsoft.CodeAnalysis, Microsoft.CodeAnalysis.Analyzers, Microsoft.CodeAnalysis.CSharp, Microsoft.Net.Compilers.Toolset (Version 5.1.0-1.25504.101 -> 5.1.0-1.25506.102)
Microsoft.CodeAnalysis.NetAnalyzers, Microsoft.DotNet.ApiCompat.Task, Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport (Version 10.0.100-rc.2.25504.101 -> 10.0.100-rc.2.25506.102)
Microsoft.DotNet.Arcade.Sdk, Microsoft.DotNet.Build.Tasks.Archives, Microsoft.DotNet.Build.Tasks.Feed, Microsoft.DotNet.Build.Tasks.Installers, Microsoft.DotNet.Build.Tasks.Packaging, Microsoft.DotNet.Build.Tasks.TargetFramework, Microsoft.DotNet.Build.Tasks.Templating, Microsoft.DotNet.Build.Tasks.Workloads, Microsoft.DotNet.CodeAnalysis, Microsoft.DotNet.GenAPI, Microsoft.DotNet.GenFacades, Microsoft.DotNet.Helix.Sdk, Microsoft.DotNet.PackageTesting, Microsoft.DotNet.RemoteExecutor, Microsoft.DotNet.SharedFramework.Sdk, Microsoft.DotNet.XliffTasks, Microsoft.DotNet.XUnitExtensions (Version 11.0.0-beta.25504.101 -> 11.0.0-beta.25506.102)
Microsoft.DotNet.Cecil (Version 0.11.5-alpha.25504.101 -> 0.11.5-alpha.25506.102)
Microsoft.DotNet.XUnitAssert, Microsoft.DotNet.XUnitConsoleRunner (Version 2.9.3-beta.25504.101 -> 2.9.3-beta.25506.102)
Microsoft.NET.Sdk.IL, Microsoft.NETCore.App.Ref, Microsoft.NETCore.ILAsm, runtime.native.System.IO.Ports, System.Reflection.Metadata, System.Reflection.MetadataLoadContext, System.Text.Json (Version 10.0.0-rc.1.25504.101 -> 10.0.0-rc.1.25506.102)
NuGet.Frameworks, NuGet.Packaging, NuGet.ProjectModel, NuGet.Versioning (Version 7.0.0-preview.1.501 -> 7.0.0-preview.1.702)
System.CommandLine (Version 2.0.0-rc.1.25504.101 -> 2.0.0-rc.1.25506.102)

* Update dependencies from https://github.com/dotnet/dotnet build 286004
Updated Dependencies:
Microsoft.CodeAnalysis, Microsoft.CodeAnalysis.Analyzers, Microsoft.CodeAnalysis.CSharp, Microsoft.Net.Compilers.Toolset (Version 5.1.0-1.25506.102 -> 5.1.0-1.25507.102)
Microsoft.CodeAnalysis.NetAnalyzers, Microsoft.DotNet.ApiCompat.Task, Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport (Version 10.0.100-rc.2.25506.102 -> 10.0.100-rc.2.25507.102)
Microsoft.DotNet.Arcade.Sdk, Microsoft.DotNet.Build.Tasks.Archives, Microsoft.DotNet.Build.Tasks.Feed, Microsoft.DotNet.Build.Tasks.Installers, Microsoft.DotNet.Build.Tasks.Packaging, Microsoft.DotNet.Build.Tasks.TargetFramework, Microsoft.DotNet.Build.Tasks.Templating, Microsoft.DotNet.Build.Tasks.Workloads, Microsoft.DotNet.CodeAnalysis, Microsoft.DotNet.GenAPI, Microsoft.DotNet.GenFacades, Microsoft.DotNet.Helix.Sdk, Microsoft.DotNet.PackageTesting, Microsoft.DotNet.RemoteExecutor, Microsoft.DotNet.SharedFramework.Sdk, Microsoft.DotNet.XliffTasks, Microsoft.DotNet.XUnitExtensions (Version 11.0.0-beta.25506.102 -> 11.0.0-beta.25507.102)
Microsoft.DotNet.Cecil (Version 0.11.5-alpha.25506.102 -> 0.11.5-alpha.25507.102)
Microsoft.DotNet.XUnitAssert, Microsoft.DotNet.XUnitConsoleRunner (Version 2.9.3-beta.25506.102 -> 2.9.3-beta.25507.102)
Microsoft.NET.Sdk.IL, Microsoft.NETCore.App.Ref, Microsoft.NETCore.ILAsm, runtime.native.System.IO.Ports, System.Reflection.Metadata, System.Reflection.MetadataLoadContext, System.Text.Json (Version 10.0.0-rc.1.25506.102 -> 10.0.0-rc.1.25507.102)
NuGet.Frameworks, NuGet.Packaging, NuGet.ProjectModel, NuGet.Versioning (Version 7.0.0-preview.1.702 -> 7.0.0-preview.1.802)
System.CommandLine (Version 2.0.0-rc.1.25506.102 -> 2.0.0-rc.1.25507.102)

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-10-08 18:45:06+00:00,dotnet-maestro[bot],0,,,3,122,122,"[main] source code updates from dotnet/dotnet (issue_ref)* update dependencies from build 285901updated dependencies:microsoft.codeanalysis, microsoft.codeanalysis.analyzers, microsoft.codeanalysis.csharp, microsoft.net.compilers.toolset (version 5.1.0-1.25504.101 -> 5.1.0-1.25506.102)microsoft.codeanalysis.netanalyzers, microsoft.dotnet.apicompat.task, microsoft.net.workload.emscripten.current.manifest-10.0.100.transport (version 10.0.100-rc.2.25504.101 -> 10.0.100-rc.2.25506.102)microsoft.dotnet.arcade.sdk, microsoft.dotnet.build.tasks.archives, microsoft.dotnet.build.tasks.feed, microsoft.dotnet.build.tasks.installers, microsoft.dotnet.build.tasks.packaging, microsoft.dotnet.build.tasks.targetframework, microsoft.dotnet.build.tasks.templating, microsoft.dotnet.build.tasks.workloads, microsoft.dotnet.codeanalysis, microsoft.dotnet.genapi, microsoft.dotnet.genfacades, microsoft.dotnet.helix.sdk, microsoft.dotnet.packagetesting, microsoft.dotnet.remoteexecutor, microsoft.dotnet.sharedframework.sdk, microsoft.dotnet.xlifftasks, microsoft.dotnet.xunitextensions (version 11.0.0-beta.25504.101 -> 11.0.0-beta.25506.102)microsoft.dotnet.cecil (version 0.11.5-alpha.25504.101 -> 0.11.5-alpha.25506.102)microsoft.dotnet.xunitassert, microsoft.dotnet.xunitconsolerunner (version 2.9.3-beta.25504.101 -> 2.9.3-beta.25506.102)microsoft.net.sdk.il, microsoft.netcore.app.ref, microsoft.netcore.ilasm, runtime.native.system.io.ports, system.reflection.metadata, system.reflection.metadataloadcontext, system.text.json (version 10.0.0-rc.1.25504.101 -> 10.0.0-rc.1.25506.102)nuget.frameworks, nuget.packaging, nuget.projectmodel, nuget.versioning (version 7.0.0-preview.1.501 -> 7.0.0-preview.1.702)system.commandline (version 2.0.0-rc.1.25504.101 -> 2.0.0-rc.1.25506.102)* update dependencies from build 286004updated dependencies:microsoft.codeanalysis, microsoft.codeanalysis.analyzers, microsoft.codeanalysis.csharp, microsoft.net.compilers.toolset (version 5.1.0-1.25506.102 -> 5.1.0-1.25507.102)microsoft.codeanalysis.netanalyzers, microsoft.dotnet.apicompat.task, microsoft.net.workload.emscripten.current.manifest-10.0.100.transport (version 10.0.100-rc.2.25506.102 -> 10.0.100-rc.2.25507.102)microsoft.dotnet.arcade.sdk, microsoft.dotnet.build.tasks.archives, microsoft.dotnet.build.tasks.feed, microsoft.dotnet.build.tasks.installers, microsoft.dotnet.build.tasks.packaging, microsoft.dotnet.build.tasks.targetframework, microsoft.dotnet.build.tasks.templating, microsoft.dotnet.build.tasks.workloads, microsoft.dotnet.codeanalysis, microsoft.dotnet.genapi, microsoft.dotnet.genfacades, microsoft.dotnet.helix.sdk, microsoft.dotnet.packagetesting, microsoft.dotnet.remoteexecutor, microsoft.dotnet.sharedframework.sdk, microsoft.dotnet.xlifftasks, microsoft.dotnet.xunitextensions (version 11.0.0-beta.25506.102 -> 11.0.0-beta.25507.102)microsoft.dotnet.cecil (version 0.11.5-alpha.25506.102 -> 0.11.5-alpha.25507.102)microsoft.dotnet.xunitassert, microsoft.dotnet.xunitconsolerunner (version 2.9.3-beta.25506.102 -> 2.9.3-beta.25507.102)microsoft.net.sdk.il, microsoft.netcore.app.ref, microsoft.netcore.ilasm, runtime.native.system.io.ports, system.reflection.metadata, system.reflection.metadataloadcontext, system.text.json (version 10.0.0-rc.1.25506.102 -> 10.0.0-rc.1.25507.102)nuget.frameworks, nuget.packaging, nuget.projectmodel, nuget.versioning (version 7.0.0-preview.1.702 -> 7.0.0-preview.1.802)system.commandline (version 2.0.0-rc.1.25506.102 -> 2.0.0-rc.1.25507.102)---------"
dotnet/runtime,a4e1deea5b5446caac8cc4efbd0878998896cbfe,"Revert ""Suppress warnings in JSON source generated code (#120181)"" (#120539)

This reverts commit d82232545a5f1f6f87672f8bb68698274a701e25.",2025-10-08 19:07:13+00:00,Stephen Toub,0,,,3,2,53,"revert ""suppress warnings in json source generated code (issue_ref)"" (issue_ref)this reverts commit d82232545a5f1f6f87672f8bb68698274a701e25."
dotnet/runtime,a7954c6f6be4be936ff11c8f59eae0ea9cc4d248,Include the chain status flags on assertion failure,2025-10-08 19:29:39+00:00,Kevin Jones,0,,,2,8,8,include the chain status flags on assertion failure
dotnet/runtime,9f8141b5678dc4a7ec6164bc5f2c610d76c546ad,[browser] Expect fingerprint on assemblies promoted from build (#120442),2025-10-08 22:54:54+00:00,Marek Fišera,0,,,1,17,4,[browser] expect fingerprint on assemblies promoted from build (issue_ref)
dotnet/runtime,8d3c4013b7e7c6d603b08a1fbf563d51e2c2e00c,Use -warnings-as-errors in Swift compilation,2025-10-09 00:38:48+00:00,Kevin Jones,0,,,1,1,1,use -warnings-as-errors in swift compilation
dotnet/runtime,adb1091b2de6d2b191f431df1f30dcfb3caf5591,"Make runtime async callable thunks transparent (#120386)

Runtime async callable thunks were using `TaskAwaiter` directly, but
that has the normal await semantics which will either post continuations
to the captured synchronization context or to the thread pool. This
introduces an observable behavior change with async1 where sometimes
even configured awaits will end up posting back to a captured
synchronization context.

For example, consider an example like:
```csharp
private static async Task Foo()
{
    SynchronizationContext.SetSynchronizationContext(new TrackingSynchronizationContext());
    await Task.Delay(1000).ConfigureAwait(false);
}
```csharp

Before this change the runtime async call to `Task.Delay` creates a
runtime async callback thunk that roughly looks like
```csharp
Task DelayThunk(int time)
{
    TaskAwaiter awaiter = Task.Delay(time).GetAwaiter();
    if (!await.IsCompleted)
        AsyncHelpers.UnsafeAwaiterAwaiter(awaiter);
    awaiter.GetResult();
}
```
however, when this thunk is called we end up posting back to
`TrackingSynchronizationContext`, before the continuation for `Foo` then
must move its continuation back to the thread pool.

This PR fixes this and makes the thunks transparent in context behavior.
At the same time it also optimizes the runtime async -> async1 path to
be more efficient in the suspension case: the async1 task now directly
invokes the runtime async infrastructure as its continuion, instead of
going through multiple layers of indirection.

I also fixed a bug where we could end up invoking the wrong variant of
OnCompleted for non-unsafe notifiers if they implemented both
INotifyCompletion and ICriticalNotifyCompletion.

I have also renamed ThunkTask -> RuntimeAsyncTask.",2025-10-09 11:02:41+00:00,Jakob Botsch Nielsen,1,e528a6e97670d066459882854371a4f013904fc8,"Document API added in .NET 10.0 (#120670)

* Document API added in .NET 10

* Fix indenting

* Undo implementation changes in MemoryExtensions

* More indenting

* Document return value for Zip async methods

* Apply suggestions from code review

* Address feedback

* Fix some doc comment errors

* Address feedback

* Address feedback",9,294,198,"make runtime async callable thunks transparent (issue_ref)runtime async callable thunks were using directly, butthat has the normal await semantics which will either post continuationsto the captured synchronization context or to the thread pool. thisintroduces an observable behavior change with async1 where sometimeseven configured awaits will end up posting back to a capturedsynchronization context.for example, consider an example like:csharpbefore this change the runtime async call to creates aruntime async callback thunk that roughly looks likehowever, when this thunk is called we end up posting back to, before the continuation for thenmust move its continuation back to the thread pool.this pr fixes this and makes the thunks transparent in context behavior.at the same time it also optimizes the runtime async -> async1 path tobe more efficient in the suspension case: the async1 task now directlyinvokes the runtime async infrastructure as its continuion, instead ofgoing through multiple layers of indirection.i also fixed a bug where we could end up invoking the wrong variant ofoncompleted for non-unsafe notifiers if they implemented bothinotifycompletion and icriticalnotifycompletion.i have also renamed thunktask -> runtimeasynctask."
dotnet/runtime,7dcfa872071341484cb01c0aeb042473ae76edd0,"[wasm] Make finding information for wasm in `docs/` easier (#120096)

* Create WASM documentation index and consolidated debugging reference

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: ilonatommy <32700855+ilonatommy@users.noreply.github.com>
Co-authored-by: AaronRobinsonMSFT <30635565+AaronRobinsonMSFT@users.noreply.github.com>
Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-10-09 14:25:02+00:00,Copilot,0,,,11,392,94,[wasm] make finding information for wasm in easier (issue_ref)* create wasm documentation index and consolidated debugging reference---------
dotnet/runtime,337fea7e187bc7cbb455ec7db9cd913a19f9e61c,"Add MetadataUpdateDeletedAttribute (#119584)

This attribute is intended to be emitted only by Roslyn. Its intent is to be used by reflection
as a filter to ""remove"" types and members that have been deleted during a hot reload session.

Implements https://github.com/dotnet/runtime/issues/118903

* Add ability to filter members in reflection and test

---------

Co-authored-by: Tomas Matousek <tomat@microsoft.com>",2025-10-09 16:24:17+00:00,Steve Pfister,1,4839d27263d038c2283a6744527210935bb19018,Fix assert message with errant text pasted in (#120574),13,352,18,"add metadataupdatedeletedattribute (issue_ref)this attribute is intended to be emitted only by roslyn. its intent is to be used by reflectionas a filter to ""remove"" types and members that have been deleted during a hot reload session.implements * add ability to filter members in reflection and test---------"
dotnet/runtime,af469887d784dd578cbce23be81373da479185b0,Revert conditionally setting SYSTEM PATH in host install (#118092) (#120472),2025-10-09 17:05:21+00:00,Pranav Senthilnathan,0,,,2,7,45,revert conditionally setting system path in host install (issue_ref) (issue_ref)
dotnet/runtime,098683931d2914c1895cac188ac649804ee1e507,"Avoid referencing types of JsonIgnore'd properties. (#120543)

* Avoid referencing types of JsonIgnore'd properties.

* Apply suggestion from @Copilot

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>

* Revert use of Range and Index for down-level support

This reverts commit ed3bcc332336ee3c6a433abd2b0e495814f505fe.

* Address feedback.

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>
Co-authored-by: Jeff Handley <jeffhandley@users.noreply.github.com>",2025-10-09 17:22:12+00:00,Eirik Tsarpalis,1,a1bc3b16219532adedf6441e79ef90b146a1b022,"Fix STJ source generator emitting culture-dependent minus signs for negative JsonPropertyOrder (#121278)

Fix STJ source generator producing non-compilable code on some locales

This PR addresses an issue where the System.Text.Json source generator
produces non-compilable code when using `JsonPropertyOrder` with
negative values on certain locales (e.g., fi_FI.UTF-8).

The issue was in the source generator where numeric values were being
directly interpolated into generated C# code without specifying culture.
On locales like fi_FI, negative numbers use the Unicode minus sign
(U+2212) instead of the ASCII hyphen-minus, making the generated code
invalid.

**Fix:** 
Wrapped the entire source generator execution (both parsing and
emitting) with code that sets `CultureInfo.CurrentCulture` to
`InvariantCulture` and restores it in a finally block.

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>
Co-authored-by: Stephen Toub <stoub@microsoft.com>",6,220,33,avoid referencing types of jsonignore'd properties. (issue_ref)* avoid referencing types of jsonignore'd properties.* apply suggestion from @copilot
dotnet/runtime,404a10934c59d28b0f0a58a1200cad827bffb716,Do not set -warnings-as-errors for Swift unless PRERELEASE,2025-10-09 20:40:47+00:00,Kevin Jones,0,,,1,6,1,do not set -warnings-as-errors for swift unless prerelease
dotnet/runtime,f8796dc1ace25b3715bf86b461568d8d7bd84837,"Use covariant returns in ILCompiler.TypeSystem (#120542)

* Change MetadataType.BaseType to be MetadataType and remove MetadataType.MetadataBaseType and remove EcmaType.EcmaModule

* Use covariant return types to narrow down many methods on the Ecma* types.

* MetadataType can only be nested in a MetadataType

* FieldDesc.OwningType can be MetadataType (and is assumed as such in many locations)

* Fix MetadataType usages in NativeAOT type loader

* Change return field of OwningType to fix failure",2025-10-09 22:20:09+00:00,Jeremy Koritzinsky,1,8498fc79ae67ba1fee99c0dcd510a7626dfb1cb1,"Fix Array.Initialize for value types with default constructors in NativeAOT (#121834)

`Array.Initialize()` silently fails in NativeAOT when the element type's
default constructor lacks reflection metadata. The runtime API returns
`IntPtr.Zero` when the constructor isn't preserved, causing Initialize
to skip all elements.",77,253,282,use covariant returns in ilcompiler.typesystem (issue_ref)* change metadatatype.basetype to be metadatatype and remove metadatatype.metadatabasetype and remove ecmatype.ecmamodule* use covariant return types to narrow down many methods on the ecma* types.* metadatatype can only be nested in a metadatatype* fielddesc.owningtype can be metadatatype (and is assumed as such in many locations)* fix metadatatype usages in nativeaot type loader* change return field of owningtype to fix failure
dotnet/runtime,e572463b5706b0509fe0c524d9d09893e7e252da,"Remove corewasmrun (#120541)

Update corerun to operate like corewasmrun when
manually setting `CORERUN_IN_BROWSER` to `1` in
src\coreclr\hosts\corerun\CMakeLists.txt.

This allows corerun to operate in the same mode as
corewasmrun.",2025-10-09 23:32:35+00:00,Aaron Robinson,1,13566e158fca40d55fb056884b140075f158196c,"Fix docs link to Chrome C/C++ DevTools Support (DWARF) extension (#120749)

The original URL no longer worked, replacing it with the short URL mentioned on https://developer.chrome.com/docs/devtools/wasm",10,82,183,remove corewasmrun (issue_ref)update corerun to operate like corewasmrun whenmanually setting to insrc\coreclr\hosts\corerun\cmakelists.txt.this allows corerun to operate in the same mode ascorewasmrun.
dotnet/runtime,634641c806b129bd6892e071aece3f4916ea519d,"[clr-interp] Access checks and callouts (#120581)

* Add CallSiteCalloutSupport

* Add access check handling for fields and other instructions

* Update src/coreclr/interpreter/compiler.cpp

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>

* Enhance helper methods to reduce code duplication

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-10-10 02:11:07+00:00,David Wrighton,1,5b6403bbc47a801d213219f4b7676fa34ea7e009,"Few interpreter EH fixes (#120684)

* Few interpreter EH fixes

* Correctly normalize objects that are not derived from Exception class
  before throwing them from the interpreter
* Ensure managed exceptions from QCALLs invoked by the interpreter are
  properly handled
* Add null check to INTOP_ZEROBLK_IMM

* PR feedback

* More PR feedback",5,197,0,[clr-interp] access checks and callouts (issue_ref)* add callsitecalloutsupport* add access check handling for fields and other instructions* update src/coreclr/interpreter/compiler.cpp
dotnet/runtime,9fb66db5ab5baae0269a0e5e2a79ee0e6f6b8f81,"Change Brotli CompressionLevel.Fastest to use quality 2 instead of 1 (#120433)

* Initial plan

* Change CompressionLevel.Fastest to use Brotli quality 2 instead of 1

Co-authored-by: rzikm <32671551+rzikm@users.noreply.github.com>

* Add comment explaining why quality 2 is used for CompressionLevel.Fastest

Co-authored-by: rzikm <32671551+rzikm@users.noreply.github.com>

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: rzikm <32671551+rzikm@users.noreply.github.com>",2025-10-10 11:27:19+00:00,Copilot,0,,,1,5,1,change brotli compressionlevel.fastest to use quality 2 instead of 1 (issue_ref)* initial plan* change compressionlevel.fastest to use brotli quality 2 instead of 1
dotnet/runtime,ce130b81fb3abd946f13a4757fe254fbf3efd9d6,Remove swagger definition from Echo test servers (#120594),2025-10-10 12:43:09+00:00,Radek Zikmund,0,,,3,0,306,remove swagger definition from echo test servers (issue_ref)
dotnet/runtime,3720b8f2125b4613de328fcb1f6808e64c77b910,"Update project guidelines with packable projects section (#120588)

* Update project guidelines with packable projects section

Added guidelines for packable projects and package baseline validation.

* Update docs/coding-guidelines/project-guidelines.md

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-10-10 13:54:09+00:00,Viktor Hofer,0,,,1,7,0,update project guidelines with packable projects section (issue_ref)* update project guidelines with packable projects sectionadded guidelines for packable projects and package baseline validation.* update docs/coding-guidelines/project-guidelines.md
dotnet/runtime,a09317dce574ef82af2e6a6aff5ad9689eaacaee,"Polyfill SearchValues and optimize Activity, W3CPropagator (#119673)",2025-10-10 18:33:41+00:00,Miha Zupan,1,9c700f760a7103b081bbffc58b2759251653bccc,"Fix balancing groups incorrectly removed from negative lookarounds (#120856)

## Summary

Fixed a bug where balancing groups were incorrectly being removed from
negative lookarounds during regex tree reduction, causing patterns like
`()(?'-1')(?!(?'-1'))` to incorrectly return 0 matches instead of
matching at every position.

## Root Cause

The issue was introduced by an optimization in the `RemoveCaptures`
method within `ReduceLookaround` in `RegexNode.cs`. This method removes
capture groups from negative lookarounds since captures inside negative
lookarounds are undone after the lookaround completes. However, it was
incorrectly removing ALL capture groups, including balancing groups.

Balancing groups (e.g., `(?'-1')`) have semantic meaning that affects
matching behavior - they require a specific capture group to have been
captured before they can succeed. Removing them changes the match
semantics.

## The Fix

Modified the `RemoveCaptures` method to preserve balancing groups by
checking if `N != -1` (where N stores the uncapture group number). The
code now uses pattern matching for cleaner syntax: `if (node is { Kind:
RegexNodeKind.Capture, N: -1 })`. Updated comments to clarify that
captures that don't rely on or impact persisted state can be removed,
which includes backreferences and balancing groups.

## Changes Made

1. **RegexNode.cs**: Modified `RemoveCaptures` to check `node.N == -1`
before removing captures, using pattern matching
2. **Regex.Match.Tests.cs**: Added test case for balancing groups in
negative lookarounds
3. **Regex.Count.Tests.cs**: Added count test to verify correct match
count

## Test Results

- ✅ All functional tests pass: 29,334 tests
- ✅ All unit tests pass: 1,005 tests  
- ✅ Pattern `()(?'-1')(?!(?'-1'))` now correctly matches at every
position in the input string

<!-- START COPILOT CODING AGENT SUFFIX -->



<details>

<summary>Original prompt</summary>

> 
> ----
> 
> *This section details on the original issue you should resolve*
> 
> <issue_title>Regex `()(?'-1')(?!(?'-1'))` exhibit incorrect matching
behavior in .NET10</issue_title>
> <issue_description>### Description
> 
> Such situation occur in `(?!)` and `(?<!)` under Interpreter、Compiled
and source GeneratedCode.
> 
> ### Reproduction Steps
> 
> ```c#
> using System.Text.RegularExpressions;
> 
> var pattern = @""()(?'-1')(?!(?'-1'))"";
> var input = ""such situation occur in (?!) and (?<!) under
Interpreter、Compiled and source GeneratedCode"";
> Regex regex = new Regex(pattern, RegexOptions.Compiled);
> var mhes = regex.Matches(input);
> Console.WriteLine(Regex.Matches(input, pattern).Count);
> Console.WriteLine(mhes.Count);
> Console.WriteLine(RegexTester.regexGenerate().Matches(input).Count);
> internal partial class RegexTester
> {
> 	[GeneratedRegex(@""()(?'-1')(?!(?'-1'))"")]
> 	internal static partial Regex regexGenerate();
> }
> ```
> 
> **Here is part of source Generated Code:**
> ```c#
> partial class RegexTester
> {
>     /// <remarks>
>     /// Pattern:<br/>
>     /// <code>()(?'-1')(?!(?'-1'))</code><br/>
>     /// Explanation:<br/>
>     /// <code>
>     /// ○ Fail to match.<br/>
>     /// </code>
>     /// </remarks>
>
[global::System.CodeDom.Compiler.GeneratedCodeAttribute(""System.Text.RegularExpressions.Generator"",
""10.0.13.307"")]
> internal static partial global::System.Text.RegularExpressions.Regex
regexGenerate() =>
global::System.Text.RegularExpressions.Generated.regexGenerate_0.Instance;
> }
> 
> private sealed class Runner : RegexRunner
> {
> /// <summary>Scan the <paramref name=""inputSpan""/> starting from
base.runtextstart for the next match.</summary>
> /// <param name=""inputSpan"">The text being scanned by the regular
expression.</param>
>     protected override void Scan(ReadOnlySpan<char> inputSpan)
>     {
>         // The pattern never matches anything.
>     }
> }
> ```
> 
> ### Expected behavior
> 
> ```
> 91
> 91
> 91
> ```
> 
> ### Actual behavior
> 
> ```
> 0
> 0
> 0
> ```
> 
> ### Regression?
> 
> _No response_
> 
> ### Known Workarounds
> 
> _No response_
> 
> ### Configuration
> 
> _No response_
> 
> ### Other information
> 
> _No response_</issue_description>
> 
> <agent_instructions>Please add tests for the problem and fix it. I
expect the problem was introduced in
https://github.com/dotnet/runtime/pull/118084 and that the fix is simply
to ensure that capture groups are only removed from negative lookarounds
if they're not part of a balancing group.</agent_instructions>
> 
> ## Comments on the Issue (you are @copilot in this section)
> 
> <comments>
> <comment_new><author>@stephentoub</author><body>
> Why do you believe the current behavior is incorrect? It's unclear
from your description as the Regression section is empty... is your
""Expected behavior"" from a previous release?</body></comment_new>
> </comments>
> 


</details>

Fixes dotnet/runtime#120849

<!-- START COPILOT CODING AGENT TIPS -->
---

✨ Let Copilot coding agent [set things up for
you](https://github.com/dotnet/runtime/issues/new?title=✨+Set+up+Copilot+instructions&body=Configure%20instructions%20for%20this%20repository%20as%20documented%20in%20%5BBest%20practices%20for%20Copilot%20coding%20agent%20in%20your%20repository%5D%28https://gh.io/copilot-coding-agent-tips%29%2E%0A%0A%3COnboard%20this%20repo%3E&assignees=copilot)
— coding agent works faster and does higher quality work when set up for
your repo.

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>",34,323,342,"polyfill searchvalues and optimize activity, w3cpropagator (issue_ref)"
dotnet/runtime,323911250fa5744f174e376f49cf6aadd7655557,"Make BundledAppWithSubDirs clean up bundled apps after each test case instead of after all tests (#120611)

The `BundledAppWithSubDirs` tests intermittently hit out of space issues in CI. They do clean up the bundled apps they create, but only after all tests in the class have run. This change makes those tests clean up earlier for environments that may not have the space for all the bundled apps at the same time. This also fixes the one case where we were leaving an extracted file (`mockcoreclr`) behind on non-Windows.",2025-10-10 23:32:07+00:00,Elinor Fung,1,1e7ee6f4a315663fa986e86af7a67fe2c5604f2b,"Move hosting tests to XUnit 3 (#120234)

The primary advantage in this change is that test assemblies are now
executables, not libraries. This makes debugging easier, as the
executable can be run directly under the debugger. It also makes
deployment of the tests easier, as we only need to copy the executable
and set DOTNET_ROOT to the pre-built framework.

This is also a kind of trial-balloon. Many other tests (esp. libraries
tests) in this repo would benefit from the execution advantages.
However, they are built in more configurations today and are more
complex. The host tests are an easier lift.

There are a few breaking changes that have been fixed by this PR:

* xunit3 already defines a class called TestContext, so I needed to rename the existing TestContext to HostTestContext to avoid conflicts
* Some command-line switches have changed names
* xunit3 now supports an Assert.Skip for runtime skipping. I've utilized this in a few places (especially class constructors) to replace PlatformSpecific on classes, or simplify the skip handling.",2,13,6,"make bundledappwithsubdirs clean up bundled apps after each test case instead of after all tests (issue_ref)the tests intermittently hit out of space issues in ci. they do clean up the bundled apps they create, but only after all tests in the class have run. this change makes those tests clean up earlier for environments that may not have the space for all the bundled apps at the same time. this also fixes the one case where we were leaving an extracted file () behind on non-windows."
dotnet/runtime,9aa3e11e8001dbab097eff302bed16c01c4c6053,"Adding GetNumLocalVariables and GetNumArguments cDAC APIs (#120064)

* adding GetNumLocalVariables and GetNumArguments cDAC APIs",2025-10-11 01:48:09+00:00,Rachel,0,,,8,169,5,adding getnumlocalvariables and getnumarguments cdac apis (issue_ref)* adding getnumlocalvariables and getnumarguments cdac apis
dotnet/runtime,0022d30832b6f01d45ebb3e5cc8230dc8bfc2201,"Add suppression messages for assembly file path access (#120213)

When calling Assembly.GetFile, you get 2 trim warnings - IL3001 and IL3002.

This was only suppressing one of these warnings. Adding the suppression for the other with the same justification.

IL3002 is an extraneous suppression due to https://github.com/dotnet/runtime/issues/120475.",2025-10-11 03:01:11+00:00,Eric Erhardt,0,,,1,2,0,"add suppression messages for assembly file path access (issue_ref)when calling assembly.getfile, you get 2 trim warnings - il3001 and il3002.this was only suppressing one of these warnings. adding the suppression for the other with the same justification.il3002 is an extraneous suppression due to"
dotnet/runtime,5bd2f687b6e9d81ecb85fc896a164f7d1279037d,"[wasm][coreclr] Fix offset calculation (#120613)

Account for this and retbuf arguments at the beginning

Add more call functions hit during EH

Fixes https://github.com/dotnet/runtime/issues/120318",2025-10-12 08:20:00+00:00,Radek Doulik,1,b2ad42306d6e0455c4e601d4d3e54cea29a5d096,"[wasm][coreclr] Fix GetOffsetOfArgumentRegisters (#120665)

* [wasm][coreclr] Fix GetOffsetOfArgumentRegisters

Fixes remaining issue mentioned in https://github.com/dotnet/runtime/pull/120613

This fixes offset calculation of This and other special cased arguments.

Without that fix, we ended writing the this argument value to a wrong offset.

* Update src/coreclr/vm/callingconvention.h

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2,82,6,[wasm][coreclr] fix offset calculation (issue_ref)account for this and retbuf arguments at the beginningadd more call functions hit during ehfixes
dotnet/runtime,0bac0d56ae3093415074ece2acb5d91728824d26,"Replace Marshal.AllocHGlobal with NativeMemory.Alloc in cross-platform code (#120630)

* Replace Marshal.AllocHGlobal with NativeMemory.Alloc in cross-platform code
* Replace Marshal.AllocHGlobal with NativeMemory.Alloc in JIT interface
* Replace remaining Marshal alloc/free calls with NativeMemory in CorInfoImpl.cs

Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>
Co-authored-by: jkotas <6668460+jkotas@users.noreply.github.com>",2025-10-12 16:18:59+00:00,Copilot,0,,,14,38,38,replace marshal.allochglobal with nativememory.alloc in cross-platform code (issue_ref)* replace marshal.allochglobal with nativememory.alloc in cross-platform code* replace marshal.allochglobal with nativememory.alloc in jit interface* replace remaining marshal alloc/free calls with nativememory in corinfoimpl.cs
dotnet/runtime,3ee77a33ceb99ef75c88a57a876a34d6ab266690,"[main] Source code updates from dotnet/dotnet (#120556)

* Backflow from https://github.com/dotnet/dotnet / 3065a08 build 286257

[[ commit created by automation ]]

* Update dependencies from https://github.com/dotnet/dotnet build 286257
Updated Dependencies:
Microsoft.CodeAnalysis, Microsoft.CodeAnalysis.Analyzers, Microsoft.CodeAnalysis.CSharp, Microsoft.Net.Compilers.Toolset (Version 5.1.0-1.25507.102 -> 5.1.0-1.25508.102)
Microsoft.CodeAnalysis.NetAnalyzers, Microsoft.DotNet.ApiCompat.Task, Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport (Version 10.0.100-rc.2.25507.102 -> 10.0.100-rc.2.25508.102)
Microsoft.DotNet.Arcade.Sdk, Microsoft.DotNet.Build.Tasks.Archives, Microsoft.DotNet.Build.Tasks.Feed, Microsoft.DotNet.Build.Tasks.Installers, Microsoft.DotNet.Build.Tasks.Packaging, Microsoft.DotNet.Build.Tasks.TargetFramework, Microsoft.DotNet.Build.Tasks.Templating, Microsoft.DotNet.Build.Tasks.Workloads, Microsoft.DotNet.CodeAnalysis, Microsoft.DotNet.GenAPI, Microsoft.DotNet.GenFacades, Microsoft.DotNet.Helix.Sdk, Microsoft.DotNet.PackageTesting, Microsoft.DotNet.RemoteExecutor, Microsoft.DotNet.SharedFramework.Sdk, Microsoft.DotNet.XliffTasks, Microsoft.DotNet.XUnitExtensions (Version 11.0.0-beta.25507.102 -> 11.0.0-beta.25508.102)
Microsoft.DotNet.Cecil (Version 0.11.5-alpha.25507.102 -> 0.11.5-alpha.25508.102)
Microsoft.DotNet.XUnitAssert, Microsoft.DotNet.XUnitConsoleRunner (Version 2.9.3-beta.25507.102 -> 2.9.3-beta.25508.102)
Microsoft.NET.Sdk.IL, Microsoft.NETCore.App.Ref, Microsoft.NETCore.ILAsm, runtime.native.System.IO.Ports, System.Reflection.Metadata, System.Reflection.MetadataLoadContext, System.Text.Json (Version 10.0.0-rc.1.25507.102 -> 10.0.0-rc.1.25508.102)
NuGet.Frameworks, NuGet.Packaging, NuGet.ProjectModel, NuGet.Versioning (Version 7.0.0-preview.1.802 -> 7.0.0-preview.1.902)
System.CommandLine (Version 2.0.0-rc.1.25507.102 -> 2.0.0-rc.1.25508.102)

* Update dependencies from https://github.com/dotnet/dotnet build 286279
Updated Dependencies:
Microsoft.CodeAnalysis, Microsoft.CodeAnalysis.Analyzers, Microsoft.CodeAnalysis.CSharp, Microsoft.Net.Compilers.Toolset (Version 5.1.0-1.25508.102 -> 5.3.0-1.25508.109)
Microsoft.CodeAnalysis.NetAnalyzers, Microsoft.DotNet.ApiCompat.Task, Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport (Version 10.0.100-rc.2.25508.102 -> 10.0.100-rc.2.25508.109)
Microsoft.DotNet.Arcade.Sdk, Microsoft.DotNet.Build.Tasks.Archives, Microsoft.DotNet.Build.Tasks.Feed, Microsoft.DotNet.Build.Tasks.Installers, Microsoft.DotNet.Build.Tasks.Packaging, Microsoft.DotNet.Build.Tasks.TargetFramework, Microsoft.DotNet.Build.Tasks.Templating, Microsoft.DotNet.Build.Tasks.Workloads, Microsoft.DotNet.CodeAnalysis, Microsoft.DotNet.GenAPI, Microsoft.DotNet.GenFacades, Microsoft.DotNet.Helix.Sdk, Microsoft.DotNet.PackageTesting, Microsoft.DotNet.RemoteExecutor, Microsoft.DotNet.SharedFramework.Sdk, Microsoft.DotNet.XliffTasks, Microsoft.DotNet.XUnitExtensions (Version 11.0.0-beta.25508.102 -> 11.0.0-beta.25508.109)
Microsoft.DotNet.Cecil (Version 0.11.5-alpha.25508.102 -> 0.11.5-alpha.25508.109)
Microsoft.DotNet.XUnitAssert, Microsoft.DotNet.XUnitConsoleRunner (Version 2.9.3-beta.25508.102 -> 2.9.3-beta.25508.109)
Microsoft.NET.Sdk.IL, Microsoft.NETCore.App.Ref, Microsoft.NETCore.ILAsm, runtime.native.System.IO.Ports, System.Reflection.Metadata, System.Reflection.MetadataLoadContext, System.Text.Json (Version 10.0.0-rc.1.25508.102 -> 10.0.0-rc.1.25508.109)
NuGet.Frameworks, NuGet.Packaging, NuGet.ProjectModel, NuGet.Versioning (Version 7.0.0-preview.1.902 -> 7.0.0-preview.1.909)
System.CommandLine (Version 2.0.0-rc.1.25508.102 -> 2.0.0-rc.1.25508.109)

* Backflow from https://github.com/dotnet/dotnet / d40fabf build 286548

[[ commit created by automation ]]

* Update dependencies from https://github.com/dotnet/dotnet build 286548
Updated Dependencies:
Microsoft.CodeAnalysis, Microsoft.CodeAnalysis.Analyzers, Microsoft.CodeAnalysis.CSharp, Microsoft.Net.Compilers.Toolset (Version 5.3.0-1.25508.109 -> 5.3.0-1.25510.104)
Microsoft.CodeAnalysis.NetAnalyzers, Microsoft.DotNet.ApiCompat.Task, Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport (Version 10.0.100-rc.2.25508.109 -> 10.0.100-rc.2.25510.104)
Microsoft.DotNet.Arcade.Sdk, Microsoft.DotNet.Build.Tasks.Archives, Microsoft.DotNet.Build.Tasks.Feed, Microsoft.DotNet.Build.Tasks.Installers, Microsoft.DotNet.Build.Tasks.Packaging, Microsoft.DotNet.Build.Tasks.TargetFramework, Microsoft.DotNet.Build.Tasks.Templating, Microsoft.DotNet.Build.Tasks.Workloads, Microsoft.DotNet.CodeAnalysis, Microsoft.DotNet.GenAPI, Microsoft.DotNet.GenFacades, Microsoft.DotNet.Helix.Sdk, Microsoft.DotNet.PackageTesting, Microsoft.DotNet.RemoteExecutor, Microsoft.DotNet.SharedFramework.Sdk, Microsoft.DotNet.XliffTasks, Microsoft.DotNet.XUnitExtensions (Version 11.0.0-beta.25508.109 -> 11.0.0-beta.25510.104)
Microsoft.DotNet.Cecil (Version 0.11.5-alpha.25508.109 -> 0.11.5-alpha.25510.104)
Microsoft.DotNet.XUnitAssert, Microsoft.DotNet.XUnitConsoleRunner (Version 2.9.3-beta.25508.109 -> 2.9.3-beta.25510.104)
Microsoft.NET.Sdk.IL, Microsoft.NETCore.App.Ref, Microsoft.NETCore.ILAsm, runtime.native.System.IO.Ports, System.Reflection.Metadata, System.Reflection.MetadataLoadContext, System.Text.Json (Version 10.0.0-rc.1.25508.109 -> 10.0.0-rc.1.25510.104)
NuGet.Frameworks, NuGet.Packaging, NuGet.ProjectModel, NuGet.Versioning (Version 7.0.0-preview.1.909 -> 7.0.0-preview.1.1104)
System.CommandLine (Version 2.0.0-rc.1.25508.109 -> 2.0.0-rc.1.25510.104)

* Update dependencies from https://github.com/dotnet/dotnet build 286642
Updated Dependencies:
Microsoft.CodeAnalysis, Microsoft.CodeAnalysis.Analyzers, Microsoft.CodeAnalysis.CSharp, Microsoft.Net.Compilers.Toolset (Version 5.3.0-1.25510.104 -> 5.3.0-1.25511.101)
Microsoft.CodeAnalysis.NetAnalyzers, Microsoft.DotNet.ApiCompat.Task, Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport (Version 10.0.100-rc.2.25510.104 -> 10.0.100-rc.2.25511.101)
Microsoft.DotNet.Arcade.Sdk, Microsoft.DotNet.Build.Tasks.Archives, Microsoft.DotNet.Build.Tasks.Feed, Microsoft.DotNet.Build.Tasks.Installers, Microsoft.DotNet.Build.Tasks.Packaging, Microsoft.DotNet.Build.Tasks.TargetFramework, Microsoft.DotNet.Build.Tasks.Templating, Microsoft.DotNet.Build.Tasks.Workloads, Microsoft.DotNet.CodeAnalysis, Microsoft.DotNet.GenAPI, Microsoft.DotNet.GenFacades, Microsoft.DotNet.Helix.Sdk, Microsoft.DotNet.PackageTesting, Microsoft.DotNet.RemoteExecutor, Microsoft.DotNet.SharedFramework.Sdk, Microsoft.DotNet.XliffTasks, Microsoft.DotNet.XUnitExtensions (Version 11.0.0-beta.25510.104 -> 11.0.0-beta.25511.101)
Microsoft.DotNet.Cecil (Version 0.11.5-alpha.25510.104 -> 0.11.5-alpha.25511.101)
Microsoft.DotNet.XUnitAssert, Microsoft.DotNet.XUnitConsoleRunner (Version 2.9.3-beta.25510.104 -> 2.9.3-beta.25511.101)
Microsoft.NET.Sdk.IL, Microsoft.NETCore.App.Ref, Microsoft.NETCore.ILAsm, runtime.native.System.IO.Ports, System.Reflection.Metadata, System.Reflection.MetadataLoadContext, System.Text.Json (Version 10.0.0-rc.1.25510.104 -> 10.0.0-rc.1.25511.101)
NuGet.Frameworks, NuGet.Packaging, NuGet.ProjectModel, NuGet.Versioning (Version 7.0.0-preview.1.1104 -> 7.0.0-preview.1.1201)
System.CommandLine (Version 2.0.0-rc.1.25510.104 -> 2.0.0-rc.1.25511.101)

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-10-13 01:17:37+00:00,dotnet-maestro[bot],0,,,10,347,261,"[main] source code updates from dotnet/dotnet (issue_ref)* backflow from / 3065a08 build 286257[[ commit created by automation ]]* update dependencies from build 286257updated dependencies:microsoft.codeanalysis, microsoft.codeanalysis.analyzers, microsoft.codeanalysis.csharp, microsoft.net.compilers.toolset (version 5.1.0-1.25507.102 -> 5.1.0-1.25508.102)microsoft.codeanalysis.netanalyzers, microsoft.dotnet.apicompat.task, microsoft.net.workload.emscripten.current.manifest-10.0.100.transport (version 10.0.100-rc.2.25507.102 -> 10.0.100-rc.2.25508.102)microsoft.dotnet.arcade.sdk, microsoft.dotnet.build.tasks.archives, microsoft.dotnet.build.tasks.feed, microsoft.dotnet.build.tasks.installers, microsoft.dotnet.build.tasks.packaging, microsoft.dotnet.build.tasks.targetframework, microsoft.dotnet.build.tasks.templating, microsoft.dotnet.build.tasks.workloads, microsoft.dotnet.codeanalysis, microsoft.dotnet.genapi, microsoft.dotnet.genfacades, microsoft.dotnet.helix.sdk, microsoft.dotnet.packagetesting, microsoft.dotnet.remoteexecutor, microsoft.dotnet.sharedframework.sdk, microsoft.dotnet.xlifftasks, microsoft.dotnet.xunitextensions (version 11.0.0-beta.25507.102 -> 11.0.0-beta.25508.102)microsoft.dotnet.cecil (version 0.11.5-alpha.25507.102 -> 0.11.5-alpha.25508.102)microsoft.dotnet.xunitassert, microsoft.dotnet.xunitconsolerunner (version 2.9.3-beta.25507.102 -> 2.9.3-beta.25508.102)microsoft.net.sdk.il, microsoft.netcore.app.ref, microsoft.netcore.ilasm, runtime.native.system.io.ports, system.reflection.metadata, system.reflection.metadataloadcontext, system.text.json (version 10.0.0-rc.1.25507.102 -> 10.0.0-rc.1.25508.102)nuget.frameworks, nuget.packaging, nuget.projectmodel, nuget.versioning (version 7.0.0-preview.1.802 -> 7.0.0-preview.1.902)system.commandline (version 2.0.0-rc.1.25507.102 -> 2.0.0-rc.1.25508.102)* update dependencies from build 286279updated dependencies:microsoft.codeanalysis, microsoft.codeanalysis.analyzers, microsoft.codeanalysis.csharp, microsoft.net.compilers.toolset (version 5.1.0-1.25508.102 -> 5.3.0-1.25508.109)microsoft.codeanalysis.netanalyzers, microsoft.dotnet.apicompat.task, microsoft.net.workload.emscripten.current.manifest-10.0.100.transport (version 10.0.100-rc.2.25508.102 -> 10.0.100-rc.2.25508.109)microsoft.dotnet.arcade.sdk, microsoft.dotnet.build.tasks.archives, microsoft.dotnet.build.tasks.feed, microsoft.dotnet.build.tasks.installers, microsoft.dotnet.build.tasks.packaging, microsoft.dotnet.build.tasks.targetframework, microsoft.dotnet.build.tasks.templating, microsoft.dotnet.build.tasks.workloads, microsoft.dotnet.codeanalysis, microsoft.dotnet.genapi, microsoft.dotnet.genfacades, microsoft.dotnet.helix.sdk, microsoft.dotnet.packagetesting, microsoft.dotnet.remoteexecutor, microsoft.dotnet.sharedframework.sdk, microsoft.dotnet.xlifftasks, microsoft.dotnet.xunitextensions (version 11.0.0-beta.25508.102 -> 11.0.0-beta.25508.109)microsoft.dotnet.cecil (version 0.11.5-alpha.25508.102 -> 0.11.5-alpha.25508.109)microsoft.dotnet.xunitassert, microsoft.dotnet.xunitconsolerunner (version 2.9.3-beta.25508.102 -> 2.9.3-beta.25508.109)microsoft.net.sdk.il, microsoft.netcore.app.ref, microsoft.netcore.ilasm, runtime.native.system.io.ports, system.reflection.metadata, system.reflection.metadataloadcontext, system.text.json (version 10.0.0-rc.1.25508.102 -> 10.0.0-rc.1.25508.109)nuget.frameworks, nuget.packaging, nuget.projectmodel, nuget.versioning (version 7.0.0-preview.1.902 -> 7.0.0-preview.1.909)system.commandline (version 2.0.0-rc.1.25508.102 -> 2.0.0-rc.1.25508.109)* backflow from / d40fabf build 286548[[ commit created by automation ]]* update dependencies from build 286548updated dependencies:microsoft.codeanalysis, microsoft.codeanalysis.analyzers, microsoft.codeanalysis.csharp, microsoft.net.compilers.toolset (version 5.3.0-1.25508.109 -> 5.3.0-1.25510.104)microsoft.codeanalysis.netanalyzers, microsoft.dotnet.apicompat.task, microsoft.net.workload.emscripten.current.manifest-10.0.100.transport (version 10.0.100-rc.2.25508.109 -> 10.0.100-rc.2.25510.104)microsoft.dotnet.arcade.sdk, microsoft.dotnet.build.tasks.archives, microsoft.dotnet.build.tasks.feed, microsoft.dotnet.build.tasks.installers, microsoft.dotnet.build.tasks.packaging, microsoft.dotnet.build.tasks.targetframework, microsoft.dotnet.build.tasks.templating, microsoft.dotnet.build.tasks.workloads, microsoft.dotnet.codeanalysis, microsoft.dotnet.genapi, microsoft.dotnet.genfacades, microsoft.dotnet.helix.sdk, microsoft.dotnet.packagetesting, microsoft.dotnet.remoteexecutor, microsoft.dotnet.sharedframework.sdk, microsoft.dotnet.xlifftasks, microsoft.dotnet.xunitextensions (version 11.0.0-beta.25508.109 -> 11.0.0-beta.25510.104)microsoft.dotnet.cecil (version 0.11.5-alpha.25508.109 -> 0.11.5-alpha.25510.104)microsoft.dotnet.xunitassert, microsoft.dotnet.xunitconsolerunner (version 2.9.3-beta.25508.109 -> 2.9.3-beta.25510.104)microsoft.net.sdk.il, microsoft.netcore.app.ref, microsoft.netcore.ilasm, runtime.native.system.io.ports, system.reflection.metadata, system.reflection.metadataloadcontext, system.text.json (version 10.0.0-rc.1.25508.109 -> 10.0.0-rc.1.25510.104)nuget.frameworks, nuget.packaging, nuget.projectmodel, nuget.versioning (version 7.0.0-preview.1.909 -> 7.0.0-preview.1.1104)system.commandline (version 2.0.0-rc.1.25508.109 -> 2.0.0-rc.1.25510.104)* update dependencies from build 286642updated dependencies:microsoft.codeanalysis, microsoft.codeanalysis.analyzers, microsoft.codeanalysis.csharp, microsoft.net.compilers.toolset (version 5.3.0-1.25510.104 -> 5.3.0-1.25511.101)microsoft.codeanalysis.netanalyzers, microsoft.dotnet.apicompat.task, microsoft.net.workload.emscripten.current.manifest-10.0.100.transport (version 10.0.100-rc.2.25510.104 -> 10.0.100-rc.2.25511.101)microsoft.dotnet.arcade.sdk, microsoft.dotnet.build.tasks.archives, microsoft.dotnet.build.tasks.feed, microsoft.dotnet.build.tasks.installers, microsoft.dotnet.build.tasks.packaging, microsoft.dotnet.build.tasks.targetframework, microsoft.dotnet.build.tasks.templating, microsoft.dotnet.build.tasks.workloads, microsoft.dotnet.codeanalysis, microsoft.dotnet.genapi, microsoft.dotnet.genfacades, microsoft.dotnet.helix.sdk, microsoft.dotnet.packagetesting, microsoft.dotnet.remoteexecutor, microsoft.dotnet.sharedframework.sdk, microsoft.dotnet.xlifftasks, microsoft.dotnet.xunitextensions (version 11.0.0-beta.25510.104 -> 11.0.0-beta.25511.101)microsoft.dotnet.cecil (version 0.11.5-alpha.25510.104 -> 0.11.5-alpha.25511.101)microsoft.dotnet.xunitassert, microsoft.dotnet.xunitconsolerunner (version 2.9.3-beta.25510.104 -> 2.9.3-beta.25511.101)microsoft.net.sdk.il, microsoft.netcore.app.ref, microsoft.netcore.ilasm, runtime.native.system.io.ports, system.reflection.metadata, system.reflection.metadataloadcontext, system.text.json (version 10.0.0-rc.1.25510.104 -> 10.0.0-rc.1.25511.101)nuget.frameworks, nuget.packaging, nuget.projectmodel, nuget.versioning (version 7.0.0-preview.1.1104 -> 7.0.0-preview.1.1201)system.commandline (version 2.0.0-rc.1.25510.104 -> 2.0.0-rc.1.25511.101)---------"
dotnet/runtime,f9dc66b9682dca49fad011cd1fac2e4cb9372742,Replace UIntPtr with nuint on managed JIT/EE interface (#120648),2025-10-13 04:46:27+00:00,Jan Kotas,1,7823f5080edfcecae39cc86e4faf566446d77d30,"Fix SPMI assert (#121051)

`repGetCookieForPInvokeCalliSig` was asserting for the wrong map, and so
collection cleaning ended up throwing away a bunch of good method
contexts.

Fix and add the corresponding assert to
`repGetCookieForInterpreterCalliSig`.",17,90,89,replace uintptr with nuint on managed jit/ee interface (issue_ref)
dotnet/runtime,0b9f7349bfcaf96ff66127a0f7a0b6a6711761d0,"Improve error message when seeking to negative position in FileStream (#120626)

Fixes #112112

Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>",2025-10-13 05:06:15+00:00,Copilot,1,8cb57abc62d859b9dce43f2ccb45912a41f85dc1,"Fix ESPIPE error when accessing SafeFileHandle on pseudofiles (#120751)

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: Adam Sitnik <adam.sitnik@gmail.com>",1,2,2,improve error message when seeking to negative position in filestream (issue_ref)fixes issue_ref
dotnet/runtime,64c0dfbe02c7678f7294ffceb5f0f77f18ffa187,"[PERF][iOS] Simplify iOS performance measurement scripts (#120531)

* Refactor runtime iOS performance measurements
- clearer naming of codegen/runtime variants
- remove non strip symbols variants

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-10-13 07:53:50+00:00,Matous Kozak,1,7cb00933bcc88b96fcf02b7ae754b28bcd5416a0,"Update iOS CoreCLR runtime sample to use Release configuration (#121407)

## Description

This PR updates iOS CoreCLR runtime sample to use Release configuration
in performance pipeline and extra-platforms. This should fix the app
build error caused by mismatched build configurations.",3,102,159,[perf][ios] simplify ios performance measurement scripts (issue_ref)* refactor runtime ios performance measurements- clearer naming of codegen/runtime variants- remove non strip symbols variants
dotnet/runtime,3149da88f74c2a014fad0c770618f7102755f8f2,Partial revert of dotnet/runtime/pull/111614 (#120657),2025-10-13 11:58:52+00:00,Matous Kozak,0,,,1,0,18,partial revert of dotnet/runtime/pull/111614 (issue_ref)
dotnet/runtime,c277a32b16fd898a92c62ba382bb7e215baf329d,"Fix thread safety issue in JsonObject.InitializeDictionary causing GetPath failures (#120619)

* Initial plan

* Fix thread safety issue in JsonObject.InitializeDictionary using Interlocked.CompareExchange

Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>

* Remove unnecessary Interlocked.MemoryBarrier since CompareExchange is already a full barrier

Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>

* Update src/libraries/System.Text.Json/src/System/Text/Json/Nodes/JsonObject.IDictionary.cs

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>
Co-authored-by: Stephen Toub <stoub@microsoft.com>",2025-10-13 15:30:39+00:00,Copilot,1,f0db8f9d9668ba03897739152d02623acbd04466,"Improve code coverage for System.Text.Json with targeted unit tests (#120731)

- [x] Mark
DeepEquals_TooDeepJsonDocument_ThrowsInsufficientExecutionStackException
test as [OuterLoop]
- [x] Add 136 tests systematically targeting uncovered code paths
- [x] **Final Coverage: 94.27% line, 90.60% branch, 93.40% method**
(baseline: 93.73%, +0.54% improvement)
- [x] Fix OutOfMemoryException in validation tests
- [x] Convert all JSON string constants to raw string literals (per code
review feedback)
- [x] Replace wasteful JsonSerializerOptions creation with
JsonSerializerOptions.Default (per code review feedback)
- [x] Revert incorrect line in JsonValueTests to use options variable
(per code review feedback)
- [x] Convert additional JSON strings to raw string literals in
DomTests.cs (per code review feedback)
- [x] All 49,787 tests passing

## Summary
Through systematic iterations, this PR improved System.Text.Json
coverage from 93.73% to 94.27% (+0.54%) by adding 136 targeted unit
tests covering previously untested API surfaces including JsonSerializer
methods with JsonTypeInfo/JsonSerializerContext, multi-segment
Utf8JsonReader scenarios, JsonWriter formatting options, JsonNode
operations, JsonNamingPolicy variants, and collection serialization.

Remaining gaps to reach 95% (~215 lines) consist primarily of complex
Utf8JsonReader edge cases requiring specialized buffer setups,
ThrowHelper exception paths, and F# converter infrastructure.

<!-- START COPILOT CODING AGENT TIPS -->
---

💡 You can make Copilot smarter by setting up custom instructions,
customizing its development environment and configuring Model Context
Protocol (MCP) servers. Learn more [Copilot coding agent
tips](https://gh.io/copilot-coding-agent-tips) in the docs.

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>",2,37,6,fix thread safety issue in jsonobject.initializedictionary causing getpath failures (issue_ref)* initial plan* fix thread safety issue in jsonobject.initializedictionary using interlocked.compareexchange
dotnet/runtime,b2ad42306d6e0455c4e601d4d3e54cea29a5d096,"[wasm][coreclr] Fix GetOffsetOfArgumentRegisters (#120665)

* [wasm][coreclr] Fix GetOffsetOfArgumentRegisters

Fixes remaining issue mentioned in https://github.com/dotnet/runtime/pull/120613

This fixes offset calculation of This and other special cased arguments.

Without that fix, we ended writing the this argument value to a wrong offset.

* Update src/coreclr/vm/callingconvention.h

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-10-13 15:52:57+00:00,Radek Doulik,1,74ecc466e73638fa0ea23286100cd4417c654bf0,"[wasm][coreclr] Fix native calls to instance methods with 0 parameters (#121312)

The `nSizeOfArgStack` was calculated wrong, because the size of This
argument was not included. For cases with more than zero parameters it
is included in first arg offset.

It is different on wasm, because we don't use register for This argument
as all the other architectures.

It fixes the problem in
https://github.com/dotnet/runtime/issues/121107 where the
`GetExceptionMessage` call ended without the `OBJECTREF throwable` on
the stack, resulting in random pointer instead.

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",1,21,12,"[wasm][coreclr] fix getoffsetofargumentregisters (issue_ref)* [wasm][coreclr] fix getoffsetofargumentregistersfixes remaining issue mentioned in this fixes offset calculation of this and other special cased arguments.without that fix, we ended writing the this argument value to a wrong offset.* update src/coreclr/vm/callingconvention.h"
dotnet/runtime,457c6b709b54b354efd8d36a9b5c03db53494612,"[wasm][coreclr] Enable working parts of the interpreter test (#120668)

And annotate rest with the active issue comments",2025-10-13 17:41:44+00:00,Radek Doulik,1,878667df31aa5f8fe365d8a8bb4bc655049bcbca,"[wasm][coreclr] Implement RhpNewArrayFastAlign8 (#120690)

* [wasm][coreclr] Implement RhpNewArrayFastAlign8

Resolves https://github.com/dotnet/runtime/issues/120659

* Feedback

* Feedback

* Apply suggestions from code review

Co-authored-by: Aaron Robinson <arobins@microsoft.com>

* Feedback

* Apply suggestions from code review

Co-authored-by: Jan Kotas <jkotas@microsoft.com>

* Feedback

---------

Co-authored-by: Aaron Robinson <arobins@microsoft.com>
Co-authored-by: Jan Kotas <jkotas@microsoft.com>",1,76,47,[wasm][coreclr] enable working parts of the interpreter test (issue_ref)and annotate rest with the active issue comments
dotnet/runtime,b28b882d2cfa23452fab461b88e0e4e87b52f263,"Bring back the reader-writer lock for RcwCache (#120675)

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-10-14 00:09:02+00:00,Jeremy Koritzinsky,0,,,1,49,13,bring back the reader-writer lock for rcwcache (issue_ref)
dotnet/runtime,8aad2ab6331322b510786cee457deb992c19b9ad,"[mono] Disable failing tests on Mono AOT linux-x64 (#120669)

* Disable failing tests

* Disable failing tests

* Add ActiveIssue attribute to TestConvertToInt64NativeSingle for tracking

* Disable failing tests

* Disable failing tests

* Update DisableProjectBuild condition

* Add TestRuntimes.Mono to ActiveIssue attributes

* Add TestRuntimes.Mono to ActiveIssue attributes",2025-10-14 07:14:41+00:00,Milos Kotlar,0,,,5,11,1,[mono] disable failing tests on mono aot linux-x64 (issue_ref)* disable failing tests* disable failing tests* add activeissue attribute to testconverttoint64nativesingle for tracking* disable failing tests* disable failing tests* update disableprojectbuild condition* add testruntimes.mono to activeissue attributes* add testruntimes.mono to activeissue attributes
dotnet/runtime,7f76beaf8ef1ed5442747e81ca717444d89d2cc6,"Add some IL validity checks to interpreter (#120682)

This change adds validity checks that calls BADCODE around some EH stuff
and varargs calls and also replaces assert(0) in the primitive type
conversion operations with BADCODE calls for the cases when invalid type
conversions are requested.",2025-10-14 11:44:22+00:00,Jan Vorlicek,1,4f506962bd5c4d1dbf49e0a08b2a4fd9ba688e4b,"[clr-interp] Fix argument alignment of 16 byte or greater aligned structures in the interpreter (#120723)

- Arguments are up to 16 byte aligned
- Handle this in the call stub generator, and call emission. (We already did this in the argument input processing in the interpreter

We need to align these at 16byte boundaries as the various ABIs tend to have a hard requirement around 16 byte alignment, when they don't have such a requirement around 32 or 64 byte alignment.",1,78,33,add some il validity checks to interpreter (issue_ref)this change adds validity checks that calls badcode around some eh stuffand varargs calls and also replaces assert(0) in the primitive typeconversion operations with badcode calls for the cases when invalid typeconversions are requested.
dotnet/runtime,278754582d9e633686eb19109c2c795b752eee49,"[clr-ios] Update iOS on CoreCLR docs (#120482)

* Update iOS on CoreCLR docs

* Remove simulator creation command as it doesn't work

---------

Co-authored-by: David Nguyen <87228593+davidnguyen-tech@users.noreply.github.com>",2025-10-14 13:15:30+00:00,Milos Kotlar,0,,,1,114,15,[clr-ios] update ios on coreclr docs (issue_ref)* update ios on coreclr docs* remove simulator creation command as it doesn't work---------
dotnet/runtime,5b1583a972aa2526a69f1ce78b2d1362d7641e3d,"Name boolean arguments in `StreamReader` ctors (#119802)

Update `StreamReader` constructors to name boolean arguments for clarity.",2025-10-14 15:20:53+00:00,xtqqczze,0,,,1,8,8,name boolean arguments in ctors (issue_ref)update constructors to name boolean arguments for clarity.
dotnet/runtime,5b6403bbc47a801d213219f4b7676fa34ea7e009,"Few interpreter EH fixes (#120684)

* Few interpreter EH fixes

* Correctly normalize objects that are not derived from Exception class
  before throwing them from the interpreter
* Ensure managed exceptions from QCALLs invoked by the interpreter are
  properly handled
* Add null check to INTOP_ZEROBLK_IMM

* PR feedback

* More PR feedback",2025-10-14 20:35:51+00:00,Jan Vorlicek,1,335820f50af31df2802cfe4d25a49daf9bcf6f08,"Fix interpreter EH when exception escapes filter funclet (#120811)

The EH was crashing with interpreter when there was an unhandled
exception in a filter funclet. It was asserting on x64 windows due to
SSP not being correct, but the actual issue was more involved than just
ensuring the SSP was correct.
The problem happens due to the way the stack walking handles unwinding
from the first interpreted frame. To better explain what was wrong, let
me describe hat mechanism. That transition sets the IP to a special
value InterpreterFrame::DummyCallerIP and SP to the address of the
InterpreterFrame. The frame state is SFITER_NATIVE_MARKER_FRAME. When
the stack frame iterator moves to the next frame, the state is
SFITER_FRAME_FUNCTION, the explicit frame is the InterpreterFrame and
the REGDISPLAY is set to the native context that was in REGDISPLAY
before we switched to iterating over the interpreter frames.

The SfiNext in the EH needs to handle the case when it gets the
SFITER_NATIVE_MARKER_FRAME described above. It can either be
transitioning to a managed caller of the interpreted core or it could
have been a call to a funclet that doesn't have transition frame stored
in the intepreter frame, so it doesn't have any context to move to. This
doesn't cause any problem for catch or finally funclets, as that means a
collided unwind that is detected and the REGDISPLAY is overwritten by
the REGDISPLAY from the stack frame iterator of the exception that we've
collided with.
The only problem is for filter funclet, where we need to return that
frame from the SfiNext and the EH uses its SP in the second pass to know
when the 2nd pass is finished.
The bug was that we have moved the stack frame iterator from the
SFITER_NATIVE_MARKER_FRAME, which got REGDISPLAY with SP that was
actually smaller than the SP of the last reported interpreted frame.
That caused the 2nd pass to terminate prematurely on the very first
frame, thinking it found the target frame. Thus finallys were not called
and also the context was wrong. That lead to the assert in
CallCatchFunclet.

There was also a secondary problem that we were not saving and restoring
SSP when the state moved from the special state with IP set to
InterpreterFrame::DummyCallerIP and the SSP was the SSP in the
InterpExecMethod, instead of the SSP in the DispatchManagedException
that the rest of the context was pointing to.

This change fixes both these issues and unhandled exceptions in filter
funclets are correctly swallowed now.",4,83,61,few interpreter eh fixes (issue_ref)* few interpreter eh fixes* correctly normalize objects that are not derived from exception class before throwing them from the interpreter* ensure managed exceptions from qcalls invoked by the interpreter are properly handled* add null check to intop_zeroblk_imm* pr feedback* more pr feedback
dotnet/runtime,b0c728d8b72b7462605441a6dcf7d6ca0fbbe62d,Remove ExperimentalAttribute from async helpers (#120585),2025-10-14 22:41:11+00:00,Vladimir Sadov,1,2551e93d66df997da5fdb53dfda36ef6e63a8600,"Fix up reflection with runtime async (#121576)

The reflection-simple test passes with this fix (when I remove
`<Optimize>True</Optimize>`). The general reflection just falls out
naturally. The only thing needed fixing was blocking direct invocation
of `AsyncExplicitImpl` methods.

We just block this when generating reflection mapping tables. We could
also block this within the runtime reflection stack so that we can match
the exception type, but given this is only reachable for CoreLib
privates, it's really not worth the extra code.

Cc @dotnet/ilc-contrib",4,0,8,remove experimentalattribute from async helpers (issue_ref)
dotnet/runtime,cda8f8a973aa6a0543b5c5c40b801a5e16366a25,Remove unsafe `bool` casts (#120400),2025-10-14 23:13:09+00:00,xtqqczze,0,,,1,1,1,remove unsafe casts (issue_ref)
dotnet/runtime,8d67e358bcfcaf9cc14944dfade12c14e108261b,Get rid of s_compatOids in favor of a switch,2025-10-15 00:37:15+00:00,Kevin Jones,0,,,1,20,18,get rid of s_compatoids in favor of a switch
dotnet/runtime,f9fce6010ce7ef6f8ab2794d344bbf880aa35ccf,"Remove audit sources from NuGet.config (#120696)

The api.nuget.org source will clash with the CFSClean network isolation policy",2025-10-15 01:10:16+00:00,Alexander Köplinger,0,,,1,0,4,remove audit sources from nuget.config (issue_ref)the api.nuget.org source will clash with the cfsclean network isolation policy
dotnet/runtime,4f506962bd5c4d1dbf49e0a08b2a4fd9ba688e4b,"[clr-interp] Fix argument alignment of 16 byte or greater aligned structures in the interpreter (#120723)

- Arguments are up to 16 byte aligned
- Handle this in the call stub generator, and call emission. (We already did this in the argument input processing in the interpreter

We need to align these at 16byte boundaries as the various ABIs tend to have a hard requirement around 16 byte alignment, when they don't have such a requirement around 32 or 64 byte alignment.",2025-10-15 01:40:49+00:00,David Wrighton,1,6549d43428c0471f13e9fa6d320b22ea8e2750f4,"[clr-interp] Fix additional iteration in Copy_Ref implementation on arm64 (#120879)

After a loop iteration is done, the code is subtracting 16, obtaining
the current remaining counter. If the remaining counter is bigger than 0
then we do another iteration. This is wrong, because we can only do
another 16 byte copy iteration if the remaining counter is bigger or
equal to 16. In order to be correct, the code would have to branch to
the very beginning of the macro. In case of negative result, we would
fallback to 8 byte copy, but, if the result is negative, it means we
already overcopied, so this implementation is wrong.

The fix makes it such that when we subtract 16 after an iteration, we
don't obtain the current remaining counter, rather the potential
remaining counter, in case we did another copy iteration. If this
counter is positive, then it is safe to do another iteration, if it is
negative then we can't copy 16 bytes at a time, fallback to the next
case.

The PR also removes redundant looping for 8 bytes copy scenario, which
can be hit at most once.",9,133,43,"[clr-interp] fix argument alignment of 16 byte or greater aligned structures in the interpreter (issue_ref)- arguments are up to 16 byte aligned- handle this in the call stub generator, and call emission. (we already did this in the argument input processing in the interpreterwe need to align these at 16byte boundaries as the various abis tend to have a hard requirement around 16 byte alignment, when they don't have such a requirement around 32 or 64 byte alignment."
dotnet/runtime,bd8e7df13d5e05df765973a005088ce482a94937,[CodeOwners] Add EventPipe paths (#120714),2025-10-15 02:04:10+00:00,Mitchell Hwang,0,,,1,1,0,[codeowners] add eventpipe paths (issue_ref)
dotnet/runtime,952e1472d1ad3c7e11e4ba1d2f1584b8a7ffd11e,"Remove unused parameters from CanAccess checks (#120571)

In the past these were used as part of much more elaborate transparency and such checks, but we don't do that anymore.",2025-10-15 04:03:10+00:00,David Wrighton,0,,,8,12,72,"remove unused parameters from canaccess checks (issue_ref)in the past these were used as part of much more elaborate transparency and such checks, but we don't do that anymore."
dotnet/runtime,9d4c65ddddb340cdb1479cafc6e320d1918c82eb,"[iOS] Implement IgnoreSymbols for CompreInfo in managed code (#120462)

Implementation of `CompareOptions.IgnoreSymbols` for `IndexOf`, `IsPrefix`, `IsSuffix`, `Compare` on iOS. Because ObjectiveC string APIs (https://developer.apple.com/documentation/foundation/nsstring/compareoptions?language=objc) don't provide a direct alternative to `IgnoreSymbols` option, we filter the symbols from the strings in the managed code and after returning from native, we re-calculate the original index and length.

The implementation works in a following:
1. Preprocess the source and search strings by removing the symbols.
2. Invoke the native API for comparison.
3. Map the range from preprocessed source string back to the original string to get the index and length.

---------

Co-authored-by: Tarek Mahmoud Sayed <tarekms@microsoft.com>
Co-authored-by: Tarek Mahmoud Sayed <10833894+tarekgh@users.noreply.github.com>
Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-10-15 06:09:28+00:00,Matous Kozak,0,,,9,464,103,"[ios] implement ignoresymbols for compreinfo in managed code (issue_ref)implementation of for , , , on ios. because objectivec string apis ( don't provide a direct alternative to option, we filter the symbols from the strings in the managed code and after returning from native, we re-calculate the original index and length.the implementation works in a following:1. preprocess the source and search strings by removing the symbols.2. invoke the native api for comparison.3. map the range from preprocessed source string back to the original string to get the index and length.---------"
dotnet/runtime,18ece9e624ca02dc3141c7298acabb9e62097abc,Set DOTNET_CI environment variable for xharness command (#120695),2025-10-15 10:16:36+00:00,Milos Kotlar,0,,,1,1,1,set dotnet_ci environment variable for xharness command (issue_ref)
dotnet/runtime,98de0279e0aed7353f9c27f218a76152e8b3d89d,"JIT: Model GS cookie check in LSRA (#120192)

Also switch the register used when generating the check if there is a
tailcall in the block on x64. This allows us to enable fast tailcalls
out of methods with GS cookie checks on x64.",2025-10-15 11:04:07+00:00,Jakob Botsch Nielsen,1,e9be0692348b030b381bd99428bd0a02346351e6,"JIT: Switch GS cookie check temp reg to use r10 for tailcalls (#120941)

rax was used before, but rax is used as an argument for the indirection
cell for R2R tailcalls. r10 has a use for some pinvokes, but we do not
tailcall for these.

Fix #120780",19,111,303,jit: model gs cookie check in lsra (issue_ref)also switch the register used when generating the check if there is atailcall in the block on x64. this allows us to enable fast tailcallsout of methods with gs cookie checks on x64.
dotnet/runtime,6d1f810694058960955b72ec78914cd9bac31f9c,"Revert ""Change Brotli CompressionLevel.Fastest to use quality 2 instead of 1 …"" (#120733)

This reverts commit 9fb66db5ab5baae0269a0e5e2a79ee0e6f6b8f81.",2025-10-15 11:16:05+00:00,Radek Zikmund,0,,,1,1,5,"revert ""change brotli compressionlevel.fastest to use quality 2 instead of 1 …"" (issue_ref)this reverts commit 9fb66db5ab5baae0269a0e5e2a79ee0e6f6b8f81."
dotnet/runtime,e67d6e3379fa4b9a7bd0dd4a9474d2b1a1d39a27,Remove merge flow for release/10.0-rc1 (#120740),2025-10-15 11:28:04+00:00,Alexander Köplinger,0,,,1,0,5,remove merge flow for release/10.0-rc1 (issue_ref)
dotnet/runtime,a2ca6fd4add01cdffc63490d38923bc282dc2e74,"Update BitArray.CopyTo to use cross-platform intrinsics (#120627)

* Initial plan

* Update BitArray.CopyTo to use cross-platform intrinsics

Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>

* Update Vector128 paths to use cross-platform intrinsics and consolidate SIMD implementations

Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>",2025-10-15 12:00:48+00:00,Copilot,0,,,1,19,82,update bitarray.copyto to use cross-platform intrinsics (issue_ref)* initial plan* update bitarray.copyto to use cross-platform intrinsics
dotnet/runtime,af3b955e34e3fce611935760a5937552e7009e36,Polyfill span Encoding APIs (#120612),2025-10-15 12:49:16+00:00,Miha Zupan,0,,,30,142,454,polyfill span encoding apis (issue_ref)
dotnet/runtime,6030faaec7d5f9d50ad049283aa3bfd6885c6a7e,call fflush for JitDisasmSummary (#120458),2025-10-15 13:11:59+00:00,Egor Bogatov,0,,,1,1,0,call fflush for jitdisasmsummary (issue_ref)
dotnet/runtime,8d7e2994d17ea0b37542666cc499dff1bd679ad7,"Relax assert on LSeek in SafeFileHandle.Init (#120736)

* Don't assume all S_IFREG files are seekable

* Attempt 2",2025-10-15 13:25:43+00:00,Radek Zikmund,0,,,1,4,1,relax assert on lseek in safefilehandle.init (issue_ref)* don't assume all s_ifreg files are seekable* attempt 2
dotnet/runtime,9d0a8531fc349b783a26b2812932414dcf9202d2,"[RuntimeAsync] make a test compatible with runtime async. (#120701)

* make a test compatible with runtime async.

* use UnsafeAccessor",2025-10-15 15:34:01+00:00,Vladimir Sadov,0,,,1,14,4,[runtimeasync] make a test compatible with runtime async. (issue_ref)* make a test compatible with runtime async.* use unsafeaccessor
dotnet/runtime,61f9df8984867145ea34c13118e7d8bcbead54c4,"Improve performance of reading zip comments (#119457)

* use arraypooling to improve performance

* apply suggestions

* improve speed for getting comments bytes

* add debug assert to prevent future misuse",2025-10-15 15:42:50+00:00,Stefan-Alin Pahontu,0,,,1,11,18,improve performance of reading zip comments (issue_ref)* use arraypooling to improve performance* apply suggestions* improve speed for getting comments bytes* add debug assert to prevent future misuse
dotnet/runtime,bb41b0cf464589d99c4711203fd0c9cb2d006fb5,"Add missing overloads to flow rune proposal (#120314)

* Add missing overloads

* Add refs to added missing overloads

* Fix IndexOf/LastIndexOf char OrdinalIgnoreCase

* Add tests & fixes

* Fix Copilot suggestions

* Rename `right` to `other`

* Make `LastIndexOf` public

* Add commented-out test

* Rename `right` to `other` in refs

* Add doc comments to IndexOf char

* Update docs from `-1` to `a negative value (e.g. -1)`

* Refactor duplicate return statements

* Add foreign cases to char Equals StringComparison test

* Add foreign/empty cases to IndexOf char/Rune

* Fix length bounds

* Add convert to string test case

* Fix \0 edge case?

* Add more convert to string test cases

* Remove most likely incorrect fix

* Add `Length == 0` check to last index of methods

* Simplify `AsSpan` calls

* Fix invalid test arguments

* Add `IsNotAndroid` checks for Turkish ""i"" tests

* Also add `IsNotAndroid` checks for `char` `EqualsTest`

---------

Co-authored-by: Tarek Mahmoud Sayed <10833894+tarekgh@users.noreply.github.com>",2025-10-15 15:45:13+00:00,Joyless,1,7df435d9ec49ff404155024cd19637c7662e2da6,"Add File hard link API and tests (#120041)

Introduce `File.CreateHardLink` and `FileSystemInfo.CreateAsHardLink`
APIs to create hard links, with platform-specific implementations. Add
comprehensive tests for hard link creation, behavior, and error cases
for both File and FileInfo.

Implements and closes #69030

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>
Co-authored-by: David Cantú <dacantu@microsoft.com>
Co-authored-by: Adam Sitnik <adam.sitnik@gmail.com>",6,512,95,"add missing overloads to flow rune proposal (issue_ref)* add missing overloads* add refs to added missing overloads* fix indexof/lastindexof char ordinalignorecase* add tests & fixes* fix copilot suggestions* rename to * make public* add commented-out test* rename to in refs* add doc comments to indexof char* update docs from to * refactor duplicate return statements* add foreign cases to char equals stringcomparison test* add foreign/empty cases to indexof char/rune* fix length bounds* add convert to string test case* fix \0 edge case?* add more convert to string test cases* remove most likely incorrect fix* add check to last index of methods* simplify calls* fix invalid test arguments* add checks for turkish ""i"" tests* also add checks for ---------"
dotnet/runtime,53110aafaa6ee26d4f42623ac5017c61c6f436f5,"Update TypeMap attribute handling (#120477)

- Mark TypeMapAssemblyTargetAttributes when its TypeMapUniverse is marked
- Recurse through TypeMapAssemblyTarget assemblies to find all TypeMapAttributes
- Refactor TypeMapHandler construction and initialization
- Use TypeReferenceEqualityComparer for Dictionaries
- Mark TypeMap attribute origin / assembly when a TypeMap attribute is marked. Otherwise, assemblies with only TypeMapAttributes will not be kept.
- Add more test coverage related to typemap attribute scenarios",2025-10-15 16:46:01+00:00,Jackson Schuster,0,,,8,389,162,"update typemap attribute handling (issue_ref)- mark typemapassemblytargetattributes when its typemapuniverse is marked- recurse through typemapassemblytarget assemblies to find all typemapattributes- refactor typemaphandler construction and initialization- use typereferenceequalitycomparer for dictionaries- mark typemap attribute origin / assembly when a typemap attribute is marked. otherwise, assemblies with only typemapattributes will not be kept.- add more test coverage related to typemap attribute scenarios"
dotnet/runtime,bc12cc3cb2eb3427c571004cd789dd02d231bdbe,"[RuntimeAsync] Use truncating sprintf to make resumption stub names (#120698)

* Use truncating sprintf to make resumption stub names

* make sure the resumption stub's name fits instead of truncating.",2025-10-15 17:14:55+00:00,Vladimir Sadov,0,,,1,13,12,[runtimeasync] use truncating sprintf to make resumption stub names (issue_ref)* use truncating sprintf to make resumption stub names* make sure the resumption stub's name fits instead of truncating.
dotnet/runtime,56627ad49e25251bb4d365fa199c2002828c34b5,Don't trigger ICU loading in string.ToUpperInvariant (#120685),2025-10-15 17:31:28+00:00,Egor Bogatov,0,,,3,75,40,don't trigger icu loading in string.toupperinvariant (issue_ref)
dotnet/runtime,bb1e80a56d97ffc5e513981d4c9ea205bede5aab,"Update dependencies from https://github.com/dotnet/xharness build 20251006.2 (#120654)

On relative base path root
Microsoft.DotNet.XHarness.CLI , Microsoft.DotNet.XHarness.TestRunners.Common , Microsoft.DotNet.XHarness.TestRunners.Xunit From Version 10.0.0-prerelease.25475.1 -> To Version 10.0.0-prerelease.25506.2

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-10-15 17:58:41+00:00,dotnet-maestro[bot],0,,,3,10,10,"update dependencies from build 20251006.2 (issue_ref)on relative base path rootmicrosoft.dotnet.xharness.cli , microsoft.dotnet.xharness.testrunners.common , microsoft.dotnet.xharness.testrunners.xunit from version 10.0.0-prerelease.25475.1 -> to version 10.0.0-prerelease.25506.2"
dotnet/runtime,dd5aa3266872cc25bf00fb50255de73bf32824aa,"Remove old user events support (#120720)

* Revert ""Add user_events support for the native runtime events (#102523)""

This reverts commit 7934e6449229c57f6c2d7ab9ea1688dc82cf95de.

* Revert ""Add user_events to the GC event level caching logic (#104079)""

This reverts commit 06a208ff2fcb6bd0f37638df72194266ee07c120.

* Retain non user_events reverted changes",2025-10-15 18:46:57+00:00,Mitchell Hwang,0,,,128,20,30476,"remove old user events support (issue_ref)* revert ""add user_events support for the native runtime events (issue_ref)""this reverts commit 7934e6449229c57f6c2d7ab9ea1688dc82cf95de.* revert ""add user_events to the gc event level caching logic (issue_ref)""this reverts commit 06a208ff2fcb6bd0f37638df72194266ee07c120.* retain non user_events reverted changes"
dotnet/runtime,0e34ec9c6e102901eb6ae270e175f07777f492ac,"[browser] build browserhost in clr.runtime subset (#120666)

Co-authored-by: Jeremy Koritzinsky <jkoritzinsky@gmail.com>",2025-10-15 19:06:29+00:00,Pavel Savara,0,,,33,345,213,[browser] build browserhost in clr.runtime subset (issue_ref)
dotnet/runtime,a6fc6ad34e460db83f9cae23c75151c9e89ff09b,Add riscv64 managed unwinder for cDAC (#117436),2025-10-15 19:52:56+00:00,Adeel Mujahid,0,,,15,974,21,add riscv64 managed unwinder for cdac (issue_ref)
dotnet/runtime,7f5cd02ffe71e60c4d5cf9f3c0ff92ca821ac8ab,"Remove usage of `Precode::GetPrecodeFromEntryPoint` in WASM. (#120583)

* Remove usage of Precode::GetPrecodeFromEntryPoint in WASM.

* Remove unused declarations in precode_portable.hpp

* Move ReversePInvokeBadTransition

* Forcibly set entry point on PortableEntryPoint scenarios.

* Rename MethodDesc::IsPointingToPrestub to ShouldCallPrestub.
Update ShouldCallPrestub for NULL to return TRUE.
---------
Co-authored-by: Radek Doulik <radek.doulik@gmail.com>",2025-10-15 21:15:41+00:00,Aaron Robinson,1,5ec95d4193b4e84eceb2899d19f1f5c79605b383,[clr-interp] Fix Double to ushort conversion (#120960),42,400,347,remove usage of in wasm. (issue_ref)* remove usage of precode::getprecodefromentrypoint in wasm.* remove unused declarations in precode_portable.hpp* move reversepinvokebadtransition* forcibly set entry point on portableentrypoint scenarios.* rename methoddesc::ispointingtoprestub to shouldcallprestub.update shouldcallprestub for null to return true.---------
dotnet/runtime,d5c1e528c3df875400438e09f03232164ee10e81,"[clr-interp] ret instructions are unconditional branches in control flow (#120757)

ret instructions are similar to unconditional branches in that they do not link to the next block",2025-10-15 23:46:58+00:00,David Wrighton,1,ccf1a58314126e3858120f63f37380b706cdbabe,"Fix interpreter compiler branch elimination (#120768)

The code emission was eliminating branches at the end of a basic block
going to the next basic block. This should only happen in case when both
blocks are on the same overlapping clause depth though. It was breaking
couple of EH tests where it let execution flow from the end of a try
block to an unrelated block.",1,2,0,[clr-interp] ret instructions are unconditional branches in control flow (issue_ref)ret instructions are similar to unconditional branches in that they do not link to the next block
dotnet/runtime,d0158ea4d718aa7166c99e6714e3ca789415f05d,Lookup R2R unwind info via R2R data structures (#120758),2025-10-16 04:32:22+00:00,Jeremy Koritzinsky,0,,,2,12,24,lookup r2r unwind info via r2r data structures (issue_ref)
dotnet/runtime,ccf1a58314126e3858120f63f37380b706cdbabe,"Fix interpreter compiler branch elimination (#120768)

The code emission was eliminating branches at the end of a basic block
going to the next basic block. This should only happen in case when both
blocks are on the same overlapping clause depth though. It was breaking
couple of EH tests where it let execution flow from the end of a try
block to an unrelated block.",2025-10-16 12:00:06+00:00,Jan Vorlicek,1,2b5d3be5181d68c63b6303c4d3c993bd575faed6,"Fix ""same try"" in interpreter compiler (#120803)

The COR_ILEXCEPTION_CLAUSE_SAMETRY was never set in the generated EH
info due to a bug.
I've also fixed a minor debug logging issue - fault clauses were missing
in the dumped EH clauses",1,2,2,fix interpreter compiler branch elimination (issue_ref)the code emission was eliminating branches at the end of a basic blockgoing to the next basic block. this should only happen in case when bothblocks are on the same overlapping clause depth though. it was breakingcouple of eh tests where it let execution flow from the end of a tryblock to an unrelated block.
dotnet/runtime,e6fbfa2be5d9f333474fc9f1d71dc2762b26f0af,[wasm][coreclr] Enable all but pinvoke interpreter tests (#120789),2025-10-16 12:26:49+00:00,Radek Doulik,0,,,1,31,60,[wasm][coreclr] enable all but pinvoke interpreter tests (issue_ref)
dotnet/runtime,2519e7745058099fcbf10da58822dfae0ddbb217,Enable CA1516 Use Cross-Platform Intrinsics (#120784),2025-10-16 17:13:27+00:00,Stephen Toub,0,,,11,45,37,enable ca1516 use cross-platform intrinsics (issue_ref)
dotnet/runtime,c2f55e0eca1c8a7dfe2cd6899c95d24ab235ad1c,"[browser] active issue ExplicitConversion_FromSingle (#120788)

ActiveIssue https://github.com/dotnet/runtime/issues/103347",2025-10-16 17:41:23+00:00,Pavel Savara,0,,,1,1,0,[browser] active issue explicitconversion_fromsingle (issue_ref)activeissue
dotnet/runtime,2a636511d7f4982577dd3dde9134d53b9b2686cc,"Raise profiler ClassLoad events for array method tables (#120796)

See discussion around
https://github.com/dotnet/runtime/pull/120411#discussion_r2434435360.",2025-10-16 18:30:56+00:00,Jakob Botsch Nielsen,0,,,1,2,8,raise profiler classload events for array method tables (issue_ref)see discussion around#discussion_r2434435360.
dotnet/runtime,3be0023cf5a8cc91a117f93afc05eb189e25f1e0,"Mark the special ABI primitive types as having stable layout (#120802)

This resolves #120367 and was tested using the following program:
```csharp
using System.Numerics;
using System.Runtime.Intrinsics;

TestV();
TestV64();
TestV128();
TestV256();
TestV512();

static ushort[] TestV()
{
    Console.WriteLine(Vector<byte>.Count);
    ushort[] numbers = new ushort[32];
    Vector<ushort>.Zero.CopyTo(numbers);
    return numbers;
}

static ushort[] TestV64()
{
    Console.WriteLine(Vector64<byte>.Count);
    ushort[] numbers = new ushort[4];
    Vector64<ushort>.Zero.CopyTo(numbers);
    return numbers;
}

static ushort[] TestV128()
{
    Console.WriteLine(Vector128<byte>.Count);
    ushort[] numbers = new ushort[8];
    Vector128<ushort>.Zero.CopyTo(numbers);
    return numbers;
}

static ushort[] TestV256()
{
    Console.WriteLine(Vector256<byte>.Count);
    ushort[] numbers = new ushort[16];
    Vector256<ushort>.Zero.CopyTo(numbers);
    return numbers;
}

static ushort[] TestV512()
{
    Console.WriteLine(Vector512<byte>.Count);
    ushort[] numbers = new ushort[32];
    Vector512<ushort>.Zero.CopyTo(numbers);
    return numbers;
}
```

## Results

## Before
```
BEFORE
   1: JIT compiled Program:<Main>$(System.String[]) [Tier0, IL size=31, code size=51]
   2: JIT compiled Program:<<Main>$>g__TestV|0_0() [Tier0, IL size=34, code size=92]
   3: JIT compiled System.Threading.Thread:GetThreadStaticsBase() [Tier0, IL size=18, code size=34]
   4: JIT compiled System.Numerics.Vector`1[ushort]:CopyTo(ushort[]) [Tier0, IL size=39, code size=79]
   5: JIT compiled Program:<<Main>$>g__TestV64|0_1() [Tier0, IL size=30, code size=85]
   6: JIT compiled System.Runtime.Intrinsics.Vector64:CopyTo[ushort](System.Runtime.Intrinsics.Vector64`1[ushort],ushort[]) [Tier0, IL size=34, code size=71]
   7: JIT compiled Program:<<Main>$>g__TestV128|0_2() [Tier0, IL size=30, code size=84]
   8: JIT compiled Program:<<Main>$>g__TestV256|0_3() [Tier0, IL size=31, code size=84]
   9: JIT compiled System.Runtime.Intrinsics.Vector256:CopyTo[ushort](System.Runtime.Intrinsics.Vector256`1[ushort],ushort[]) [Tier0, IL size=34, code size=79]
  10: JIT compiled Program:<<Main>$>g__TestV512|0_4() [Tier0, IL size=31, code size=98]
  11: JIT compiled System.Runtime.Intrinsics.Vector512:CopyTo[ushort](System.Runtime.Intrinsics.Vector512`1[ushort],ushort[]) [Tier0, IL size=34, code size=83]
```

## After - .NET 10

### AVX512 Capable Machine
```
1: JIT compiled System.Threading.Thread:GetThreadStaticsBase() [Tier0, IL size=18, code size=34]
   2: JIT compiled System.Numerics.Vector`1[ushort]:CopyTo(ushort[]) [Tier0, IL size=39, code size=79]
   3: JIT compiled System.Runtime.Intrinsics.Vector64:CopyTo[ushort](System.Runtime.Intrinsics.Vector64`1[ushort],ushort[]) [Tier0, IL size=34, code size=71]
   4: JIT compiled System.Runtime.Intrinsics.Vector256:CopyTo[ushort](System.Runtime.Intrinsics.Vector256`1[ushort],ushort[]) [Tier0, IL size=34, code size=79]
   5: JIT compiled Program:<<Main>$>g__TestV512|0_4() [Tier0, IL size=31, code size=98]
   6: JIT compiled System.Runtime.Intrinsics.Vector512:CopyTo[ushort](System.Runtime.Intrinsics.Vector512`1[ushort],ushort[]) [Tier0, IL size=34, code size=83]
```

### AVX512=0
```
   1: JIT compiled System.Threading.Thread:GetThreadStaticsBase() [Tier0, IL size=18, code size=34]
   2: JIT compiled System.Numerics.Vector`1[ushort]:CopyTo(ushort[]) [Tier0, IL size=39, code size=79]
   3: JIT compiled System.Runtime.Intrinsics.Vector64:CopyTo[ushort](System.Runtime.Intrinsics.Vector64`1[ushort],ushort[]) [Tier0, IL size=34, code size=71]
   4: JIT compiled System.Runtime.Intrinsics.Vector256:CopyTo[ushort](System.Runtime.Intrinsics.Vector256`1[ushort],ushort[]) [Tier0, IL size=34, code size=79]
   5: JIT compiled System.Runtime.Intrinsics.Vector512:CopyTo[ushort](System.Runtime.Intrinsics.Vector512`1[ushort],ushort[]) [Tier0, IL size=34, code size=100]
```

### AVX2=0
```
   1: JIT compiled Program:<Main>$(System.String[]) [Tier0, IL size=31, code size=51]
   2: JIT compiled Program:<<Main>$>g__TestV|0_0() [Tier0, IL size=34, code size=87]
   3: JIT compiled System.Threading.Thread:GetThreadStaticsBase() [Tier0, IL size=18, code size=34]
   4: JIT compiled Program:<<Main>$>g__TestV64|0_1() [Tier0, IL size=30, code size=85]
   5: JIT compiled System.Runtime.Intrinsics.Vector64:CopyTo[ushort](System.Runtime.Intrinsics.Vector64`1[ushort],ushort[]) [Tier0, IL size=34, code size=71]
   6: JIT compiled Program:<<Main>$>g__TestV128|0_2() [Tier0, IL size=30, code size=84]
   7: JIT compiled Program:<<Main>$>g__TestV256|0_3() [Tier0, IL size=31, code size=84]
   8: JIT compiled System.Runtime.Intrinsics.Vector256:CopyTo[ushort](System.Runtime.Intrinsics.Vector256`1[ushort],ushort[]) [Tier0, IL size=34, code size=79]
   9: JIT compiled Program:<<Main>$>g__TestV512|0_4() [Tier0, IL size=31, code size=126]
  10: JIT compiled System.Runtime.Intrinsics.Vector512:CopyTo[ushort](System.Runtime.Intrinsics.Vector512`1[ushort],ushort[]) [Tier0, IL size=34, code size=100]
```

### SSE42=0
```
   1: JIT compiled System.SpanHelpers:IndexOfNullCharacter(ptr) [Instrumented Tier0, IL size=1148, code size=926]
   2: JIT compiled System.SpanHelpers:GetCharVector128SpanLength(nint,nint) [Tier0, IL size=14, code size=26]
   3: JIT compiled System.SpanHelpers:NonPackedIndexOfValueType[short,System.SpanHelpers+DontNegate`1[short]](byref,short,int) [Instrumented Tier0, IL size=1204, code size=1761]
   4: JIT compiled System.Text.Unicode.Utf16Utility:GetPointerToFirstInvalidChar(ptr,int,byref,byref) [Instrumented Tier0, IL size=946, code size=1280]
   5: JIT compiled System.Text.Ascii:GetIndexOfFirstNonAsciiChar_Intrinsified(ptr,nuint) [Instrumented Tier0, IL size=473, code size=1390]
   6: JIT compiled System.Text.Ascii:VectorContainsNonAsciiChar(System.Runtime.Intrinsics.Vector128`1[ushort]) [Tier0, IL size=109, code size=63]
   7: JIT compiled System.Text.Unicode.Utf8Utility:TranscodeToUtf8(ptr,int,ptr,int,byref,byref) [Instrumented Tier0, IL size=1494, code size=2856]
   8: JIT compiled System.Text.Ascii:NarrowUtf16ToAscii(ptr,ptr,nuint) [Instrumented Tier0, IL size=380, code size=755]
   9: JIT compiled Program:<Main>$(System.String[]) [Tier0, IL size=31, code size=51]
  10: JIT compiled Program:<<Main>$>g__TestV|0_0() [Tier0, IL size=34, code size=87]
  11: JIT compiled System.Threading.Thread:GetThreadStaticsBase() [Tier0, IL size=18, code size=34]
  12: JIT compiled System.PackedSpanHelpers:IndexOfAnyInRange[System.SpanHelpers+DontNegate`1[short]](byref,short,short,int) [Instrumented Tier0, IL size=861, code size=1316]
  13: JIT compiled Program:<<Main>$>g__TestV64|0_1() [Tier0, IL size=30, code size=85]
  14: JIT compiled System.Runtime.Intrinsics.Vector64:CopyTo[ushort](System.Runtime.Intrinsics.Vector64`1[ushort],ushort[]) [Tier0, IL size=34, code size=71]
  15: JIT compiled Program:<<Main>$>g__TestV128|0_2() [Tier0, IL size=30, code size=82]
  16: JIT compiled Program:<<Main>$>g__TestV256|0_3() [Tier0, IL size=31, code size=104]
  17: JIT compiled System.Runtime.Intrinsics.Vector256:CopyTo[ushort](System.Runtime.Intrinsics.Vector256`1[ushort],ushort[]) [Tier0, IL size=34, code size=93]
  18: JIT compiled Program:<<Main>$>g__TestV512|0_4() [Tier0, IL size=31, code size=135]
  19: JIT compiled System.Runtime.Intrinsics.Vector512:CopyTo[ushort](System.Runtime.Intrinsics.Vector512`1[ushort],ushort[]) [Tier0, IL size=34, code size=109]
```

### HWIntrinsics=0
```
   A LOT - Not actually going to list the several hundred APIs, this is expected since the ""baseline"" ISA is disabled
```

## After - .NET 11

### AVX512 Capable Machine
```
  1: JIT compiled System.Runtime.Intrinsics.Vector64:CopyTo[ushort](System.Runtime.Intrinsics.Vector64`1[ushort],ushort[]) [Tier0, IL size=34, code size=71]
  2: JIT compiled System.Runtime.Intrinsics.Vector256:CopyTo[ushort](System.Runtime.Intrinsics.Vector256`1[ushort],ushort[]) [Tier0, IL size=34, code size=79]
  3: JIT compiled Program:<<Main>$>g__TestV512|0_4() [Tier0, IL size=31, code size=98]
  4: JIT compiled System.Runtime.Intrinsics.Vector512:CopyTo[ushort](System.Runtime.Intrinsics.Vector512`1[ushort],ushort[]) [Tier0, IL size=34, code size=83]
```
  
### AVX512=0
```
  1: JIT compiled System.Runtime.Intrinsics.Vector64:CopyTo[ushort](System.Runtime.Intrinsics.Vector64`1[ushort],ushort[]) [Tier0, IL size=34, code size=71]
  2: JIT compiled System.Runtime.Intrinsics.Vector256:CopyTo[ushort](System.Runtime.Intrinsics.Vector256`1[ushort],ushort[]) [Tier0, IL size=34, code size=79]
  3: JIT compiled System.Runtime.Intrinsics.Vector512:CopyTo[ushort](System.Runtime.Intrinsics.Vector512`1[ushort],ushort[]) [Tier0, IL size=34, code size=100]
```

### AVX2=0
```
  A LOT - This is also expected since we bumped the R2R baseline to AVX2 for .NET 11
```",2025-10-16 20:07:05+00:00,Tanner Gooding,1,9155f26be3517e6baefbae295ffca4c5f56cc45a,"Virtual methods with runtime async (#121443)

This makes virtual methods work with runtime async. Depends on #121438.

Runtime async methods can be virtually called two ways: as
Task-returning, or as runtime-async. We can even end up in situation
where Task-returning non-runtime-async virtual methods get called as
runtime-async.

The easiest way to solve this is to give each Task-returning method two
separate virtual slots. We still track the slot use so unused slots will
not get generated.

The `VirtualMethodAlgorithm` abstraction that we added for universal
shared generics comes in handy because it lets us centralize where all
of this work happens. As a result, we don't need to teach pretty much
any node dealing with virtuals about runtime async, it just falls out.

This doesn't make generic virtual methods yet, those need more fixes.",4,18,19,mark the special abi primitive types as having stable layout (issue_ref)this resolves issue_ref and was tested using the following program:## results## before## after - .net 10### avx512 capable machine### avx512=0### avx2=0### sse42=0### hwintrinsics=0## after - .net 11### avx512 capable machine ### avx512=0### avx2=0
dotnet/runtime,2b5d3be5181d68c63b6303c4d3c993bd575faed6,"Fix ""same try"" in interpreter compiler (#120803)

The COR_ILEXCEPTION_CLAUSE_SAMETRY was never set in the generated EH
info due to a bug.
I've also fixed a minor debug logging issue - fault clauses were missing
in the dumped EH clauses",2025-10-16 20:46:56+00:00,Jan Vorlicek,1,e8d0ad08596064674c07167813799198394ef499,"Fix issue with return / goto from catch inside catch that exits the outer catch (#120821)

When there is a try/catch inside a catch handler and there is a return
in the inner catch or goto going out of the outer catch handler, we were
resuming after the inner catch at the end of the method / goto target,
so we were not returning from the call to the outer catch.
We need to inject a catch leave island that the inner catch returns as
its resume after catch location and that island can then return from the
outer catch.
This mechanism needs to be part of the finally call islands chain so
that
returns from catches / calls to finallys happen correctly and in the
right order.
This change extends the finally call islands chain to implement that.

This change also fixes a problem with ordering of emission of the code
for these islands and the basic blocks linking in the `GenerateCode`
method.
It also fixes a bug in `GetNativeRangeForClause` that was in some edge
cases getting incorrectly shorter range.

To make reviewing a bit easier, I've split this PR into two commits. The
first adds the actual functionality and the second just renames things
to match the fact that the islands are no longer finally call islands
only.",1,8,1,"fix ""same try"" in interpreter compiler (issue_ref)the cor_ilexception_clause_sametry was never set in the generated ehinfo due to a bug.i've also fixed a minor debug logging issue - fault clauses were missingin the dumped eh clauses"
dotnet/runtime,8f0e8abd5c5a315de2fb7e8327f1c61d5b8f3dbd,"Allow using ld_classic if requested (#119408)

* Allow using ld_classic if requested

* Update src/coreclr/nativeaot/BuildIntegration/Microsoft.NETCore.Native.Unix.targets

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>

* Update linker argument condition for Xcode version

* Update linker condition for Xcode version

* typo

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>
Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-10-16 21:47:58+00:00,Andy Gocke,0,,,1,1,1,allow using ld_classic if requested (issue_ref)* allow using ld_classic if requested* update src/coreclr/nativeaot/buildintegration/microsoft.netcore.native.unix.targets
dotnet/runtime,2d808fcfdf6b8ca060ee1e9bfb814d8d1547455b,[browser][mono][perf] partial revert 119307 119800 (#120742),2025-10-17 06:02:57+00:00,Pavel Savara,0,,,3,8,12,[browser][mono][perf] partial revert 119307 119800 (issue_ref)
dotnet/runtime,17e91f8f3035e20ac1656b6e15f2287444921a0e,Use UnsafeAccessor in System.Diagnostics.Debug.Tests (#120732),2025-10-17 06:14:50+00:00,Jeremy Koritzinsky,0,,,6,46,30,use unsafeaccessor in system.diagnostics.debug.tests (issue_ref)
dotnet/runtime,002cb810fd336747a9e21f732de516c0e5ba1a45,Change ownership of area paths (#120825),2025-10-17 06:19:22+00:00,Jared Parsons,0,,,1,4,4,change ownership of area paths (issue_ref)
dotnet/runtime,e8d0ad08596064674c07167813799198394ef499,"Fix issue with return / goto from catch inside catch that exits the outer catch (#120821)

When there is a try/catch inside a catch handler and there is a return
in the inner catch or goto going out of the outer catch handler, we were
resuming after the inner catch at the end of the method / goto target,
so we were not returning from the call to the outer catch.
We need to inject a catch leave island that the inner catch returns as
its resume after catch location and that island can then return from the
outer catch.
This mechanism needs to be part of the finally call islands chain so
that
returns from catches / calls to finallys happen correctly and in the
right order.
This change extends the finally call islands chain to implement that.

This change also fixes a problem with ordering of emission of the code
for these islands and the basic blocks linking in the `GenerateCode`
method.
It also fixes a bug in `GetNativeRangeForClause` that was in some edge
cases getting incorrectly shorter range.

To make reviewing a bit easier, I've split this PR into two commits. The
first adds the actual functionality and the second just renames things
to match the fact that the islands are no longer finally call islands
only.",2025-10-17 08:10:10+00:00,Jan Vorlicek,1,d3c6f06e35653f9e7d61792fab7f8746311b3228,"[clr-interp] Fix switch statement stack slot handling (#120756)

Fix issue where switch instructions did not properly handle dispatch to
blocks which already had defined their incoming stack slots",2,126,83,"fix issue with return / goto from catch inside catch that exits the outer catch (issue_ref)when there is a try/catch inside a catch handler and there is a returnin the inner catch or goto going out of the outer catch handler, we wereresuming after the inner catch at the end of the method / goto target,so we were not returning from the call to the outer catch.we need to inject a catch leave island that the inner catch returns asits resume after catch location and that island can then return from theouter catch.this mechanism needs to be part of the finally call islands chain sothatreturns from catches / calls to finallys happen correctly and in theright order.this change extends the finally call islands chain to implement that.this change also fixes a problem with ordering of emission of the codefor these islands and the basic blocks linking in the method.it also fixes a bug in that was in some edgecases getting incorrectly shorter range.to make reviewing a bit easier, i've split this pr into two commits. thefirst adds the actual functionality and the second just renames thingsto match the fact that the islands are no longer finally call islandsonly."
dotnet/runtime,afd262497d97b88f7f14ef523f8cbe5d91177631,"Optimize Sha1ForNonSecretPurposes (#120674)

- Introduce more efficient one-shot static method and updated callers in
CoreLib to use it
- Optimize bounds checks and allocations

Contributes to #45237",2025-10-17 16:11:11+00:00,Jan Kotas,0,,,3,110,47,optimize sha1fornonsecretpurposes (issue_ref)- introduce more efficient one-shot static method and updated callers incorelib to use it- optimize bounds checks and allocationscontributes to issue_ref
dotnet/runtime,b9969dd65445779a7107511289a91e087bf4c0e4,"Update [GeneratedRegex] analyzer/fixer for partial properties (#120099)



---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>
Co-authored-by: Dan Moseley <danmose@microsoft.com>
Co-authored-by: Stephen Toub <stoub@microsoft.com>",2025-10-17 18:04:42+00:00,Copilot,1,e317e1e1173b5b45606f18de3999213bb1a12e5e,"Fix GeneratedRegex fixer to preserve multiline verbatim string patterns (#120624)

## Fix for GeneratedRegex fixer preserving multiline patterns

This PR addresses the issue where the GeneratedRegex code fixer converts
multiline verbatim string literals into single-line strings with escape
sequences, losing readability.

### Problem
When a regex pattern contains actual newlines (from verbatim string
literals or string concatenation), the fixer converts them to escape
sequences like `\r\n`, making patterns with
`RegexOptions.IgnorePatternWhitespace` unreadable.

### Solution
- [x] Analyze the codebase and understand the issue
- [x] Modify `UpgradeToGeneratedRegexCodeFixer.cs` to detect newlines in
pattern strings
- [x] Update logic to preserve verbatim string format when pattern
contains newlines
- [x] Add comprehensive tests for various scenarios:
  - Verbatim string with actual newlines
  - String concatenation with newlines
- [x] Build and test the changes
- [x] Verify all existing tests still pass
- [x] Verify no build warnings or errors
- [x] Address review feedback: Use IndexOfAny for better performance
- [x] Fix tests to match current property-based syntax

### Changes Made
1. Added `ShouldUseVerbatimString` helper method that checks for
backslashes, newlines (`\n`), or carriage returns (`\r`) using
`IndexOfAny` for optimal performance
2. Updated pattern handling in `GetNode` method to use verbatim string
syntax when any of these characters are present
3. Added two new tests to validate the fix works for both direct
verbatim strings and string concatenation:
   - `MultilineVerbatimStringPreservedByFixer`
   - `MultilineStringConcatenationPreservedByFixer`
4. Updated tests to use property syntax (`{ get; }`) instead of method
syntax to match current codebase

### Test Results
✅ All analyzer tests pass (116 tests)
✅ New tests specifically validate multiline pattern preservation
✅ No build warnings or errors
✅ Works for both direct verbatim strings and string concatenation
scenarios

### Impact
This fix greatly improves readability for regex patterns with
`RegexOptions.IgnorePatternWhitespace`, particularly for complex
patterns in projects like MSBuild that use string fragment composition.
The fix preserves the original formatting intent from the source code.

<!-- START COPILOT CODING AGENT SUFFIX -->



<details>

<summary>Original prompt</summary>


----

*This section details on the original issue you should resolve*

<issue_title>GeneratedRegex fixer forces pattern onto a single
line</issue_title>
<issue_description>
Consider
```c#
   private static Regex r = new Regex(@""a
             b
             c"", RegexOptions.IgnorePatternWhitespace);
```
run the fixer, now I have
```c#
    [GeneratedRegex(""a\r\n             b\r\n             c"", RegexOptions.IgnorePatternWhitespace)]
    private static partial Regex MyRegex();
```
The semantics are the same, but the readability is gone. I would expect
```c#
    [GeneratedRegex(@""a
         b
         c"", RegexOptions.IgnorePatternWhitespace)]
    private static partial Regex MyRegex();
```

I see https://github.com/dotnet/runtime/issues/69616 which implies that
whitespace is preserved but not comments. I don't see whitespace
preserved, or at least not in the original form.</issue_description>

## Comments on the Issue (you are @copilot in this section)

<comments>
<comment_new><author>@</author><body>
Tagging subscribers to this area:
@dotnet/area-system-text-regularexpressions
See info in
[area-owners.md](https://github.com/dotnet/runtime/blob/main/docs/area-owners.md)
if you want to be subscribed.
<details>
<summary>Issue Details</summary>
<hr />


```
Consider
 ```c#
   private static Regex r = new Regex(@""a
             b
             c"", RegexOptions.IgnorePatternWhitespace);
```
run the fixer, now I have
```c#
    [GeneratedRegex(""a\r\n             b\r\n             c"", RegexOptions.IgnorePatternWhitespace)]
    private static partial Regex MyRegex();
```
The semantics are the same, but the readability is gone. I would expect
```c#
    [GeneratedRegex(@""a
         b
         c"", RegexOptions.IgnorePatternWhitespace)]
    private static partial Regex MyRegex();
```

I see https://github.com/dotnet/runtime/issues/69616 which implies that
whitespace is preserved but not comments. I don't see whitespace
preserved, or at least not in the original form.

<table>
  <tr>
    <th align=""left"">Author:</th>
    <td>danmoseley</td>
  </tr>
  <tr>
    <th align=""left"">Assignees:</th>
    <td>-</td>
  </tr>
  <tr>
    <th align=""left"">Labels:</th>
    <td>

`area-System.Text.RegularExpressions`

</td>
  </tr>
  <tr>
    <th align=""left"">Milestone:</th>
    <td>-</td>
  </tr>
</table>
</details></body></comment_new>
<comment_new><author>@danmoseley</author><body>
This comes up eg., in this MSBuild example
```c#
    const string itemMetadataSpecification =
          @""%\(\s*;
                (?<ITEM_SPECIFICATION>(?<TYPE>[A-Za-z_][A-Za-z_0-9\-]*)\s*\.\s*)?
                (?<NAME>[A-Za-z_][A-Za-z_0-9\-]*@
            \s*\)"";
    private Regex s_itemMetadataPattern = new(itemMetadataSpecification, RegexOptions.IgnorePatternWhitespace | RegexOptions.ExplicitCapture);
```
nice and pretty, I run the fixer and it produces this ugly thing
```c#
    [GeneratedRegex(""%\\(\\s*;\r\n                (?<ITEM_SPECIFICATION>(?<TYPE>[A-Za-z_][A-Za-z_0-9\\-]*)\\s*\\.\\s*)?\r\n                (?<NAME>[A-Za-z_][A-Za-z_0-9\\-]*@\r\n            \\s*\\)"", RegexOptions.ExplicitCapture | RegexOptions.IgnorePatternWhitespace)]
    private static partial Regex MyRegex();
```
as an aside, by running the fixer I'm implicitly okaying it inlining the
compound strings, which I think is fine (and
inevitable)</body></comment_new>
<comment_new><author>@danmoseley</author><body>
Built latest bits and found it's already fixed by
dotnet/runtime#78172</body></comment_new>
<comment_new><author>@danmoseley</author><body>
Actually, it's only partially fixed. Consider
```c#
    private const string foo = ""bar"";
    private static Regex r1 = new Regex(@""a        "" + foo + @""
                                            b
                                            c"", RegexOptions.IgnorePatternWhitespace);

    private static Regex r2 = new Regex(@""a        bar
                                            b
                                            c"", RegexOptions.IgnorePatternWhitespace);
```
Both should produce identical results. However, in the first case, I
lose the visible whitespace --
```c#
    [GeneratedRegex(""a        bar\r\n                                            b\r\n                                            c"", RegexOptions.IgnorePatternWhitespace)]
    private static partial Regex MyRegex();
   
   [GeneratedRegex(@""a        bar
                                            b
                                            c"", RegexOptions.IgnorePatternWhitespace)]
    private static partial Regex MyRegex1();
```

Unfortunately many of the dotnet/msbuild regexes are built up by
compounding reused string fragments, which in some cases are compounded
other ones, and use IgnorePatternWhitespace. This means after running
the generator, they need to be fixed by hand.</body></comment_new>
</comments>


</details>

Fixes dotnet/runtime#79891

<!-- START COPILOT CODING AGENT TIPS -->
---

💡 You can make Copilot smarter by setting up custom instructions,
customizing its development environment and configuring Model Context
Protocol (MCP) servers. Learn more [Copilot coding agent
tips](https://gh.io/copilot-coding-agent-tips) in the docs.

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>
Co-authored-by: Tarek Mahmoud Sayed <10833894+tarekgh@users.noreply.github.com>
Co-authored-by: Stephen Toub <stoub@microsoft.com>",4,563,258,update [generatedregex] analyzer/fixer for partial properties (issue_ref)---------
dotnet/runtime,1ef4c1a2a67efc11cc63cc29a4949b5853da528c,"Fix RegexParser to ignore vertical tabs with RegexOptions.IgnorePatternWhitespace (#120625)

* Initial plan

* Fix vertical tab handling in RegexOptions.IgnorePatternWhitespace

Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>

* Guard vertical tab test for netfx platform

Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>",2025-10-17 19:00:39+00:00,Copilot,1,48a162cff4bdfc77d7d7767497b073481febf1d8,"Fix longstanding regex interpreter bug around lazy loops with empty matches (#120872)

This has been an issue in the interpreter forever, as far as I can tell.
We've had multiple issues over the years all flagging problems with
different symptoms that stem from the same core problem.

Fixes https://github.com/dotnet/runtime/issues/43314
Fixes https://github.com/dotnet/runtime/issues/58786
Fixes https://github.com/dotnet/runtime/issues/63385
Fixes https://github.com/dotnet/runtime/issues/111051
Fixes https://github.com/dotnet/runtime/issues/114626

The problem came down to how the regex interpreter handled lazy
quantifiers over expressions that can match the empty string. When the
interpreter reaches one of these lazy loops, it uses an internal
instruction called `Lazybranchmark` to manage entering and potentially
looping the subexpression. To keep track of loop state and capture
boundaries, the interpreter uses two internal stacks, a grouping stack,
that tracks positions relevant to capturing groups (e.g. where a group
started), and a backtracking stack, that tracks states that are needed
if the engine has to go back and try a different match. The bug occurred
in the case when the subpattern inside the lazy loop matches nothing. In
this case, the interpreter unconditionally pushed a placeholder onto the
grouping stack. If the rest of the pattern then succeeded without
backtracking through this loop, that extra placeholder remained on the
grouping stack. This polluted the capture bookkeeping: later parts of
the pattern popped that placeholder, treating it as a real start
position, and shifted captures to the wrong place.

The fix is to stop pushing onto the grouping stack when the loop matches
empty. Instead, the interpreter records two things on the backtracking
stack: the old group boundary and a flag indicating whether the grouping
stack needs to be popped later. If the interpreter ends up backtracking
through this lazy loop, it checks the flag: if a grouping stack entry
was added earlier, it pops it; if not, it leaves the grouping stack
untouched. This keeps the grouping stack and backtracking stack in sync
in both forward and backtracking paths. As a result, empty lazy loops no
longer leave stray entries on the grouping stack. This also prevents the
unbounded stack growth that previously caused overflows or hangs on some
patterns involving nested lazy quantifiers.",2,8,2,fix regexparser to ignore vertical tabs with regexoptions.ignorepatternwhitespace (issue_ref)* initial plan* fix vertical tab handling in regexoptions.ignorepatternwhitespace
dotnet/runtime,c8ca49247d58ffcb638b78b3ff62ab12c6e252df,"Pass async flag to jit in aot tools (#120772)

- Adds CORJIT_FLAG_ASYNC to be passed to the JIT when compiling
runtime-async methods for the aot tools.
- Adds IsRuntimeAsync property to MethodDesc to indicate when a method
has the Async MethodImplAttribute.
- Replace null return for `getAsyncResumptionStub` to fail a compilation
when it is called.

Previously, a crossgen compilation with a runtime-async method would
succeed but fail at runtime. This change at least causes the compilation
to fail.

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-10-17 19:39:21+00:00,Jackson Schuster,0,,,7,46,1,"pass async flag to jit in aot tools (issue_ref)- adds corjit_flag_async to be passed to the jit when compilingruntime-async methods for the aot tools.- adds isruntimeasync property to methoddesc to indicate when a methodhas the async methodimplattribute.- replace null return for to fail a compilationwhen it is called.previously, a crossgen compilation with a runtime-async method wouldsucceed but fail at runtime. this change at least causes the compilationto fail.---------"
dotnet/runtime,bd5dc33df75d4b2923a0565ec78ca5f250a632de,"[wasm][coreclr] Allow memory growth for corerun (#120844)

Also remove table growth option from browserhost, we don't need it as we
don't have jiterpreter",2025-10-17 19:43:47+00:00,Radek Doulik,0,,,2,2,1,"[wasm][coreclr] allow memory growth for corerun (issue_ref)also remove table growth option from browserhost, we don't need it as wedon't have jiterpreter"
dotnet/runtime,de8005b4712b8089f928d40794f9d66227715178,"Port RE2 regex tests to improve test coverage (#120845)

This PR ports functional regex tests from the <a
href=""https://github.com/google/re2/tree/main/re2/testing"">RE2 test
suite</a> to improve .NET's regex test coverage, as requested in
#120756.

## Changes

### Test Suite Additions
- **Added `RegexRe2Tests.cs`**: New test file containing 85 unique test
cases ported from RE2's `re2_test.cc` and `search_test.cc`
- **Test coverage**: The ported tests execute ~340 times across all
available regex engines (Interpreter, Compiled, NonBacktracking,
SourceGenerated)
- **Removed duplicates**: Analyzed overlap with existing PCRE, Rust, and
core regex tests; removed 57 duplicative test cases to avoid redundancy

### Test Categories Covered
The ported tests validate:
- Complex matching patterns and alternations
- Anchors (`^`, `$`) in single-line and multiline modes with non-trivial
cases
- Word boundaries (`\b`, `\B`) with ASCII and special characters
- UTF-8/Unicode character handling
- Escape sequences (octal `\141`, hexadecimal `\x61`, unicode `\u0061`)
- Case-insensitive matching (`(?i)`)
- Non-trivial quantifier combinations (`{n}`, `{n,}`, `{n,m}`)
- Backreferences (excluded for NonBacktracking engine)
- Edge cases and historical bug patterns from RE2

### Compatibility Adjustments
Several RE2-specific patterns were excluded or adapted for .NET
compatibility:
- **Removed `\C` patterns**: RE2's byte-matching construct is not
supported in .NET
- **Removed `\Q...\E` patterns**: Quote meta syntax is not supported in
.NET
- **Converted `\x{...}` escapes**: Changed to .NET-compatible `\x` (2
digits) or `\u` (4 digits) format
- **Excluded backreferences for NonBacktracking**: Uses
`RegexHelpers.IsNonBacktracking()` check
- **Removed Unicode word boundary test**: .NET treats Unicode letters as
word characters (unlike RE2/PCRE which use ASCII-only)
- **Removed duplicative tests**: Excluded basic patterns like ""a"", ""a*"",
""a+"", ""a?"", ""^$"" that are already well-covered in existing test files

### License Attribution
- **Updated `THIRD-PARTY-NOTICES.TXT`**: Added RE2 BSD 3-Clause license
to properly attribute the ported tests
- **Updated `.csproj`**: Added `RegexRe2Tests.cs` to the compilation

## Testing
All 29,621 tests pass successfully, including the newly ported RE2 tests
across all regex engines.

Fixes #120756

<!-- START COPILOT CODING AGENT SUFFIX -->



<details>

<summary>Original prompt</summary>

> 
> ----
> 
> *This section details on the original issue you should resolve*
> 
> <issue_title>Port re2 regex tests</issue_title>
> <issue_description>re2 has lots of regex functional tests we should
port over to improve our coverage:
>
https://github.com/google/re2/blob/d826d9fcb68c62996c1b7c0a45d604e22d814952/re2/testing/</issue_description>
> 
> <agent_instructions>You can see in
https://github.com/dotnet/runtime/tree/main/src/libraries/System.Text.RegularExpressions/tests/FunctionalTests
we have a file of tests ported from PCRE and a file of tests ported from
Rust. Please similarly port the cited RE2 tests (or a newer version if
there is one); any that don't pass but should need to be marked as
[ActiveIssue(...)]... any that don't pass but that's expected should be
removed.</agent_instructions>
> 
> ## Comments on the Issue (you are @copilot in this section)
> 
> <comments>
> <comment_new><author>@</author><body>
> Tagging subscribers to this area: @eerhardt,
@dotnet/area-system-text-regularexpressions
> See info in
[area-owners.md](https://github.com/dotnet/runtime/blob/main/docs/area-owners.md)
if you want to be subscribed.
> <details>
> <summary>Issue Details</summary>
> <hr />
> 
> re2 has lots of regex functional tests we should port over to improve
our coverage:
>
https://github.com/google/re2/blob/d826d9fcb68c62996c1b7c0a45d604e22d814952/re2/testing/
> 
> <table>
>   <tr>
>     <th align=""left"">Author:</th>
>     <td>stephentoub</td>
>   </tr>
>   <tr>
>     <th align=""left"">Assignees:</th>
>     <td>-</td>
>   </tr>
>   <tr>
>     <th align=""left"">Labels:</th>
>     <td>
> 
> `area-System.Text.RegularExpressions`
> 
> </td>
>   </tr>
>   <tr>
>     <th align=""left"">Milestone:</th>
>     <td>.NET 7.0</td>
>   </tr>
> </table>
> </details></body></comment_new>
> <comment_new><author>@joperezr</author><body>
> This will likely miss ZBB but will still make it before 7.0. Adjusting
the milestone just because this is not technically a blocker for
7.0.</body></comment_new>
> </comments>
> 


</details>

Fixes dotnet/runtime#61896

<!-- START COPILOT CODING AGENT TIPS -->
---

💡 You can make Copilot smarter by setting up custom instructions,
customizing its development environment and configuring Model Context
Protocol (MCP) servers. Learn more [Copilot coding agent
tips](https://gh.io/copilot-coding-agent-tips) in the docs.

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>",2025-10-17 20:40:45+00:00,Copilot,1,c973d5574c68213965d90cb38a90164ae589765b,"Port NIM regex tests to improve test coverage (#120846)

Fixes dotnet/runtime#61895

This PR ports regex functional tests from the
[nim-regex](https://github.com/nitely/nim-regex) project to increase
.NET's regex test coverage, following the same pattern used for PCRE and
Rust test suites.

## Changes

- Added `RegexNimTests.cs` with 156 unique test cases focusing on
patterns not already covered by existing tests
- Updated `System.Text.RegularExpressions.Tests.csproj` to include the
new test file
- All tests pass across all regex engines (Interpreter, Compiled,
NonBacktracking, SourceGenerated)

## Test Coverage

The ported tests provide additional coverage for unique patterns
including:

- **Escaped quantifiers**: `\*+`, `\??`, `\++?` - testing literal `*`,
`+`, `?` characters with quantifiers
- **Nested repetitions**: `(a*)*`, `(a*)*b`, `((a)*(a)*)*` - edge case
patterns
- **Complex patterns**: `a(b|c)*d`, `((a(b)*)*(b)*)`, alternations with
grouping
- **Unicode character classes**: `\d` matching `۲`, `\D` matching `⅕`
- **Lookahead/lookbehind**: Positive/negative assertions (filtered for
NonBacktracking engine)
- **Named groups**: `(?<name>...)` syntax
- **Word boundary edge cases**: `\b\b\b` patterns
- **Empty patterns and special cases**

## Deduplication

After analysis, 25 duplicate and trivial test cases were removed that
were already covered by existing tests in `Regex.Match.Tests.cs`,
`Regex.Groups.Tests.cs`, and other test files. The remaining tests focus
on unique patterns and edge cases.

## Compatibility Notes

Some NIM-specific patterns were excluded or adapted for .NET
compatibility:

- **Removed** `\y` escape sequence (not recognized in .NET)
- **Removed** `(?U)` ungreedy flag (not supported in .NET)
- **Removed** Unicode case folding tests (ß ↔ ss) due to different
behavior
- **Converted** named group syntax from `(?P<name>)` to .NET's
`(?<name>)` format
- **Filtered** lookahead/lookbehind tests for NonBacktracking engine
(throws NotSupportedException)

## Test Results

- Total tests: 29,899 (added ~600+ test executions across all engines)
- Failures: 0
- All tests pass successfully

The MIT license for nim-regex was already present in
`THIRD-PARTY-NOTICES.TXT`.

<!-- START COPILOT CODING AGENT SUFFIX -->



<details>

<summary>Original prompt</summary>

> 
> ----
> 
> *This section details on the original issue you should resolve*
> 
> <issue_title>Port nim regex tests</issue_title>
> <issue_description>Nim has lots of regex functional tests we should
port over to improve our coverage:
>
https://github.com/nitely/nim-regex/blob/eeefb4f51264ff3bc3b36caf55672a74f52f5ef5/tests/tests.nim</issue_description>
> 
> <agent_instructions>You can see in
https://github.com/dotnet/runtime/tree/main/src/libraries/System.Text.RegularExpressions/tests/FunctionalTests
we have a file of tests ported from PCRE and a file of tests ported from
Rust. Please similarly port the cited NIM tests (or a newer version if
there is one); any that don't pass but should need to be marked as
[ActiveIssue(...)]... any that don't pass but that's expected should be
removed.</agent_instructions>
> 
> ## Comments on the Issue (you are @copilot in this section)
> 
> <comments>
> <comment_new><author>@</author><body>
> Tagging subscribers to this area: @eerhardt,
@dotnet/area-system-text-regularexpressions
> See info in
[area-owners.md](https://github.com/dotnet/runtime/blob/main/docs/area-owners.md)
if you want to be subscribed.
> <details>
> <summary>Issue Details</summary>
> <hr />
> 
> Nim has lots of regex functional tests we should port over to improve
our coverage:
>
https://github.com/nitely/nim-regex/blob/eeefb4f51264ff3bc3b36caf55672a74f52f5ef5/tests/tests.nim
> 
> <table>
>   <tr>
>     <th align=""left"">Author:</th>
>     <td>stephentoub</td>
>   </tr>
>   <tr>
>     <th align=""left"">Assignees:</th>
>     <td>-</td>
>   </tr>
>   <tr>
>     <th align=""left"">Labels:</th>
>     <td>
> 
> `area-System.Text.RegularExpressions`
> 
> </td>
>   </tr>
>   <tr>
>     <th align=""left"">Milestone:</th>
>     <td>.NET 7.0</td>
>   </tr>
> </table>
> </details></body></comment_new>
> <comment_new><author>@joperezr</author><body>
> This will likely miss ZBB but will still make it before 7.0. Adjusting
the milestone just because this is not technically a blocker for
7.0.</body></comment_new>
> </comments>
> 


</details>

Fixes dotnet/runtime#61895

<!-- START COPILOT CODING AGENT TIPS -->
---

✨ Let Copilot coding agent [set things up for
you](https://github.com/dotnet/runtime/issues/new?title=✨+Set+up+Copilot+instructions&body=Configure%20instructions%20for%20this%20repository%20as%20documented%20in%20%5BBest%20practices%20for%20Copilot%20coding%20agent%20in%20your%20repository%5D%28https://gh.io/copilot-coding-agent-tips%29%2E%0A%0A%3COnboard%20this%20repo%3E&assignees=copilot)
— coding agent works faster and does higher quality work when set up for
your repo.

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>",3,203,0,"port re2 regex tests to improve test coverage (issue_ref)this pr ports functional regex tests from the <ahref="""">re2 testsuite</a> to improve .net's regex test coverage, as requested inissue_ref.## changes### test suite additions- **added **: new test file containing 85 unique testcases ported from re2's and - **test coverage**: the ported tests execute ~340 times across allavailable regex engines (interpreter, compiled, nonbacktracking,sourcegenerated)- **removed duplicates**: analyzed overlap with existing pcre, rust, andcore regex tests; removed 57 duplicative test cases to avoid redundancy### test categories coveredthe ported tests validate:- complex matching patterns and alternations- anchors (, ) in single-line and multiline modes with non-trivialcases- word boundaries (, ) with ascii and special characters- utf-8/unicode character handling- escape sequences (octal , hexadecimal , unicode )- case-insensitive matching ()- non-trivial quantifier combinations (, , )- backreferences (excluded for nonbacktracking engine)- edge cases and historical bug patterns from re2### compatibility adjustmentsseveral re2-specific patterns were excluded or adapted for .netcompatibility:- **removed patterns**: re2's byte-matching construct is notsupported in .net- **removed patterns**: quote meta syntax is not supported in.net- **converted escapes**: changed to .net-compatible (2digits) or (4 digits) format- **excluded backreferences for nonbacktracking**: uses check- **removed unicode word boundary test**: .net treats unicode letters asword characters (unlike re2/pcre which use ascii-only)- **removed duplicative tests**: excluded basic patterns like ""a"", ""a*"",""a+"", ""a?"", ""^$"" that are already well-covered in existing test files### license attribution- **updated **: added re2 bsd 3-clause licenseto properly attribute the ported tests- **updated **: added to the compilation## testingall 29,621 tests pass successfully, including the newly ported re2 testsacross all regex engines.fixes issue_ref<!-- start copilot coding agent suffix --><details><summary>original prompt</summary>> > ----> > *this section details on the original issue you should resolve*> > <issue_title>port re2 regex tests</issue_title>> <issue_description>re2 has lots of regex functional tests we shouldport over to improve our coverage:>> > <agent_instructions>you can see inwe have a file of tests ported from pcre and a file of tests ported fromrust. please similarly port the cited re2 tests (or a newer version ifthere is one); any that don't pass but should need to be marked as[activeissue(...)]... any that don't pass but that's expected should beremoved.</agent_instructions>> > ## comments on the issue (you are @copilot in this section)> > <comments>> > tagging subscribers to this area: @eerhardt,@dotnet/area-system-text-regularexpressions> see info in[area-owners.md](if you want to be subscribed.> <details>> <summary>issue details</summary>> <hr />> > re2 has lots of regex functional tests we should port over to improveour coverage:>> > <table>> <tr>> <th align=""left"">author:</th>> <td>stephentoub</td>> </tr>> <tr>> <th align=""left"">assignees:</th>> <td>-</td>> </tr>> <tr>> <th align=""left"">labels:</th>> <td>> > > > </td>> </tr>> <tr>> <th align=""left"">milestone:</th>> <td>.net 7.0</td>> </tr>> </table>> </details></body></comment_new>> > this will likely miss zbb but will still make it before 7.0. adjustingthe milestone just because this is not technically a blocker for7.0.</body></comment_new>> </comments>> </details>fixes dotnet/runtimeissue_ref<!-- start copilot coding agent tips -->---💡 you can make copilot smarter by setting up custom instructions,customizing its development environment and configuring model contextprotocol (mcp) servers. learn more [copilot coding agenttips]( in the docs.---------"
dotnet/runtime,3ef45638437e36d41a4f1898503515c1a2220d12,Remove dead code (#120852),2025-10-17 21:20:24+00:00,Jeremy Koritzinsky,0,,,7,0,441,remove dead code (issue_ref)
dotnet/runtime,20707255d3228a2619572b7bc4250c022ae24f77,"Support IReadOnlyDictionary as JsonExtensionData (#120636)

Adds support for using `IReadOnlyDictionary<string, object>` and
`IReadOnlyDictionary<string, JsonElement>` as JsonExtensionData
properties, enabling them to work identically to `IDictionary` types.

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>",2025-10-17 21:20:41+00:00,Copilot,0,,,8,252,10,"support ireadonlydictionary as jsonextensiondata (issue_ref)adds support for using and as jsonextensiondataproperties, enabling them to work identically to types.---------"
dotnet/runtime,3db77c1827331b9ffe4585c2dae158bfb0dcc779,"[RuntimeAsync] Fix Await pattern detection for ValueTask in ConfigureAwait cases. (#120810)

Fixes: #119617


Since ValueTask is a struct, we need to see through `stloc; ldloca;`
sequence when matching `ConfigureAwait` call",2025-10-17 21:46:54+00:00,Vladimir Sadov,1,704d4294b1e7ea993f0c6b535a00831a0d369b36,"[RuntimeAsync] Fix for configured ValueTask sources (#120704)

Fixes: #120709

There is a scenario where `ValueTask` decides on whether to run
continuations on the scheduling context or not.

It happens in a case when an `await` calls into a `ValueTask` that wraps
a `ValueTaskSource`.
In such case we may have a nontrivial context provided to the
`ValueTaskSource` at the time of the await, but `ValueTaskSource` may
choose to ignore the context when running callbacks.

A typical test sensitive to this looks like:


https://github.com/dotnet/runtime/blob/ce717acc70b4f165be5ab4de5053ef604287fd9f/src/libraries/System.IO.Pipelines/tests/SchedulerFacts.cs#L48-L89

The part
```cs
                    ReadResult result = await pipe.Reader.ReadAsync();
```

should behave as
```cs
                    ReadResult result = await pipe.Reader.ReadAsync().ConfigureAwait(false);
```

Otherwise we end up posting the `doRead` continuation to the tracking
`CustomSynchronizationContext` which only tracks Posts and does not run
them, thus the test makes no progress.

---------

Co-authored-by: Jakob Botsch Nielsen <Jakob.botsch.nielsen@gmail.com>",2,103,17,[runtimeasync] fix await pattern detection for valuetask in configureawait cases. (issue_ref)
dotnet/runtime,d148b5cac7c933dcb690f721674d3c0790231765,"[clr-interp] Add a scheme for adding peephole optimizations for known sequences of IL opcodes (#120827)

- This is needed to ensure that some of our SIMD tests finish in a
vaguely reasonable timeframe
- The peeps implemented here make that almost possible, although the
behavior in CI hasn't yet been verified
- Peeps implemented
- stloc/ldloc ... This is a minor improvement, but will be needed to
handle a future optimization around allowing the il stack to have
constant values
  - box/unbox.any - Removes unnecessary boxing/unboxing
- typeof(T)==typeof(Y) - This allows us to handle the type testing
specialization behavior that is used heavily in the BCL
  - typeof(T).IsValueType - Used in the Unsafe.BitCast function

Not yet implemented is giving the interpreter stack a concept of
constant values, so that we can optimize brtrue/brfalse and friends into
unconditional branches. With this set of changes the if
(typeof(T)==typeof(int)) { ... } else if (typeof(T)==typeof(float))
pattern is *much* faster than before, but the not taken paths are still
fully generated interpreter code, and there are still many branches.

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-10-17 23:02:02+00:00,David Wrighton,0,,,3,532,4,"[clr-interp] add a scheme for adding peephole optimizations for known sequences of il opcodes (issue_ref)- this is needed to ensure that some of our simd tests finish in avaguely reasonable timeframe- the peeps implemented here make that almost possible, although thebehavior in ci hasn't yet been verified- peeps implemented- stloc/ldloc ... this is a minor improvement, but will be needed tohandle a future optimization around allowing the il stack to haveconstant values - box/unbox.any - removes unnecessary boxing/unboxing- typeof(t)==typeof(y) - this allows us to handle the type testingspecialization behavior that is used heavily in the bcl - typeof(t).isvaluetype - used in the unsafe.bitcast functionnot yet implemented is giving the interpreter stack a concept ofconstant values, so that we can optimize brtrue/brfalse and friends intounconditional branches. with this set of changes the if(typeof(t)==typeof(int)) { ... } else if (typeof(t)==typeof(float))pattern is *much* faster than before, but the not taken paths are stillfully generated interpreter code, and there are still many branches.---------"
dotnet/runtime,9c700f760a7103b081bbffc58b2759251653bccc,"Fix balancing groups incorrectly removed from negative lookarounds (#120856)

## Summary

Fixed a bug where balancing groups were incorrectly being removed from
negative lookarounds during regex tree reduction, causing patterns like
`()(?'-1')(?!(?'-1'))` to incorrectly return 0 matches instead of
matching at every position.

## Root Cause

The issue was introduced by an optimization in the `RemoveCaptures`
method within `ReduceLookaround` in `RegexNode.cs`. This method removes
capture groups from negative lookarounds since captures inside negative
lookarounds are undone after the lookaround completes. However, it was
incorrectly removing ALL capture groups, including balancing groups.

Balancing groups (e.g., `(?'-1')`) have semantic meaning that affects
matching behavior - they require a specific capture group to have been
captured before they can succeed. Removing them changes the match
semantics.

## The Fix

Modified the `RemoveCaptures` method to preserve balancing groups by
checking if `N != -1` (where N stores the uncapture group number). The
code now uses pattern matching for cleaner syntax: `if (node is { Kind:
RegexNodeKind.Capture, N: -1 })`. Updated comments to clarify that
captures that don't rely on or impact persisted state can be removed,
which includes backreferences and balancing groups.

## Changes Made

1. **RegexNode.cs**: Modified `RemoveCaptures` to check `node.N == -1`
before removing captures, using pattern matching
2. **Regex.Match.Tests.cs**: Added test case for balancing groups in
negative lookarounds
3. **Regex.Count.Tests.cs**: Added count test to verify correct match
count

## Test Results

- ✅ All functional tests pass: 29,334 tests
- ✅ All unit tests pass: 1,005 tests  
- ✅ Pattern `()(?'-1')(?!(?'-1'))` now correctly matches at every
position in the input string

<!-- START COPILOT CODING AGENT SUFFIX -->



<details>

<summary>Original prompt</summary>

> 
> ----
> 
> *This section details on the original issue you should resolve*
> 
> <issue_title>Regex `()(?'-1')(?!(?'-1'))` exhibit incorrect matching
behavior in .NET10</issue_title>
> <issue_description>### Description
> 
> Such situation occur in `(?!)` and `(?<!)` under Interpreter、Compiled
and source GeneratedCode.
> 
> ### Reproduction Steps
> 
> ```c#
> using System.Text.RegularExpressions;
> 
> var pattern = @""()(?'-1')(?!(?'-1'))"";
> var input = ""such situation occur in (?!) and (?<!) under
Interpreter、Compiled and source GeneratedCode"";
> Regex regex = new Regex(pattern, RegexOptions.Compiled);
> var mhes = regex.Matches(input);
> Console.WriteLine(Regex.Matches(input, pattern).Count);
> Console.WriteLine(mhes.Count);
> Console.WriteLine(RegexTester.regexGenerate().Matches(input).Count);
> internal partial class RegexTester
> {
> 	[GeneratedRegex(@""()(?'-1')(?!(?'-1'))"")]
> 	internal static partial Regex regexGenerate();
> }
> ```
> 
> **Here is part of source Generated Code:**
> ```c#
> partial class RegexTester
> {
>     /// <remarks>
>     /// Pattern:<br/>
>     /// <code>()(?'-1')(?!(?'-1'))</code><br/>
>     /// Explanation:<br/>
>     /// <code>
>     /// ○ Fail to match.<br/>
>     /// </code>
>     /// </remarks>
>
[global::System.CodeDom.Compiler.GeneratedCodeAttribute(""System.Text.RegularExpressions.Generator"",
""10.0.13.307"")]
> internal static partial global::System.Text.RegularExpressions.Regex
regexGenerate() =>
global::System.Text.RegularExpressions.Generated.regexGenerate_0.Instance;
> }
> 
> private sealed class Runner : RegexRunner
> {
> /// <summary>Scan the <paramref name=""inputSpan""/> starting from
base.runtextstart for the next match.</summary>
> /// <param name=""inputSpan"">The text being scanned by the regular
expression.</param>
>     protected override void Scan(ReadOnlySpan<char> inputSpan)
>     {
>         // The pattern never matches anything.
>     }
> }
> ```
> 
> ### Expected behavior
> 
> ```
> 91
> 91
> 91
> ```
> 
> ### Actual behavior
> 
> ```
> 0
> 0
> 0
> ```
> 
> ### Regression?
> 
> _No response_
> 
> ### Known Workarounds
> 
> _No response_
> 
> ### Configuration
> 
> _No response_
> 
> ### Other information
> 
> _No response_</issue_description>
> 
> <agent_instructions>Please add tests for the problem and fix it. I
expect the problem was introduced in
https://github.com/dotnet/runtime/pull/118084 and that the fix is simply
to ensure that capture groups are only removed from negative lookarounds
if they're not part of a balancing group.</agent_instructions>
> 
> ## Comments on the Issue (you are @copilot in this section)
> 
> <comments>
> <comment_new><author>@stephentoub</author><body>
> Why do you believe the current behavior is incorrect? It's unclear
from your description as the Regression section is empty... is your
""Expected behavior"" from a previous release?</body></comment_new>
> </comments>
> 


</details>

Fixes dotnet/runtime#120849

<!-- START COPILOT CODING AGENT TIPS -->
---

✨ Let Copilot coding agent [set things up for
you](https://github.com/dotnet/runtime/issues/new?title=✨+Set+up+Copilot+instructions&body=Configure%20instructions%20for%20this%20repository%20as%20documented%20in%20%5BBest%20practices%20for%20Copilot%20coding%20agent%20in%20your%20repository%5D%28https://gh.io/copilot-coding-agent-tips%29%2E%0A%0A%3COnboard%20this%20repo%3E&assignees=copilot)
— coding agent works faster and does higher quality work when set up for
your repo.

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>",2025-10-18 02:19:05+00:00,Copilot,1,6445f5b157f1048cd9fa433754caab64c4e58d76,"Fix several new CA1830 diagnostics (#121131)

From updates in https://github.com/dotnet/sdk/pull/51215",3,15,3,"fix balancing groups incorrectly removed from negative lookarounds (issue_ref)## summaryfixed a bug where balancing groups were incorrectly being removed fromnegative lookarounds during regex tree reduction, causing patterns like to incorrectly return 0 matches instead ofmatching at every position.## root causethe issue was introduced by an optimization in the method within in . this method removescapture groups from negative lookarounds since captures inside negativelookarounds are undone after the lookaround completes. however, it wasincorrectly removing all capture groups, including balancing groups.balancing groups (e.g., ) have semantic meaning that affectsmatching behavior - they require a specific capture group to have beencaptured before they can succeed. removing them changes the matchsemantics.## the fixmodified the method to preserve balancing groups bychecking if (where n stores the uncapture group number). thecode now uses pattern matching for cleaner syntax: . updated comments to clarify thatcaptures that don't rely on or impact persisted state can be removed,which includes backreferences and balancing groups.## changes made1. **regexnode.cs**: modified to check before removing captures, using pattern matching2. **regex.match.tests.cs**: added test case for balancing groups innegative lookarounds3. **regex.count.tests.cs**: added count test to verify correct matchcount## test results- ✅ all functional tests pass: 29,334 tests- ✅ all unit tests pass: 1,005 tests - ✅ pattern now correctly matches at everyposition in the input string<!-- start copilot coding agent suffix --><details><summary>original prompt</summary>> > ----> > *this section details on the original issue you should resolve*> > <issue_title>regex exhibit incorrect matchingbehavior in .net10</issue_title>> <issue_description>### description> > such situation occur in and under interpreter、compiledand source generatedcode.> > ### reproduction steps> > > > **here is part of source generated code:**> > > ### expected behavior> > > > ### actual behavior> > > > ### regression?> > _no response_> > ### known workarounds> > _no response_> > ### configuration> > _no response_> > ### other information> > _no response_</issue_description>> > <agent_instructions>please add tests for the problem and fix it. iexpect the problem was introduced in and that the fix is simplyto ensure that capture groups are only removed from negative lookaroundsif they're not part of a balancing group.</agent_instructions>> > ## comments on the issue (you are @copilot in this section)> > <comments>> > why do you believe the current behavior is incorrect? it's unclearfrom your description as the regression section is empty... is your""expected behavior"" from a previous release?</body></comment_new>> </comments>> </details>fixes dotnet/runtimeissue_ref<!-- start copilot coding agent tips -->---✨ let copilot coding agent [set things up foryou](✨+set+up+copilot+instructions&body=configure%20instructions%20for%20this%20repository%20as%20documented%20in%20%5bbest%20practices%20for%20copilot%20coding%20agent%20in%20your%20repository%5d%28— coding agent works faster and does higher quality work when set up foryour repo.---------"
dotnet/runtime,c928a95591bf93a1439b2473646791d38301102c,"Support dynamically creating tailored continuation layouts (#120411)

Add ability for the VM to dynamically create continuation layout types
and for the JIT to request such types to be created.",2025-10-18 14:59:35+00:00,Jakob Botsch Nielsen,1,d108713873694b4a91a3e264f4314b2a7acaab5f,"[RuntimeAsync] Do not hold on to the last used Continuation in the runtime async tasks. (#121460)

Fixes: #121459

The wrapped continuation is expected to be used only once - when the
corresponding async method is resumed. We can and should null-out the
continuation while fetching it in the dispatcher. There is no need to
keep it referenced from the task once fetched as it may cause ""leaks""
observable via WeakReference/Finalization and the like.

The close analog of this behavior in the async1 is the C# state machine
zeroing out pointer-containing fields in the display struct upon
completing or faulting the task.


https://github.com/dotnet/roslyn/blob/f2df0ad6d3ef30ed033a794e7150a5600be50a95/src/Compilers/CSharp/Portable/Lowering/AsyncRewriter/AsyncMethodToStateMachineRewriter.cs#L186


https://github.com/dotnet/roslyn/blob/f2df0ad6d3ef30ed033a794e7150a5600be50a95/src/Compilers/CSharp/Portable/Lowering/AsyncRewriter/AsyncMethodToStateMachineRewriter.cs#L224",44,1413,957,support dynamically creating tailored continuation layouts (issue_ref)add ability for the vm to dynamically create continuation layout typesand for the jit to request such types to be created.
dotnet/runtime,57115ce8e412d2ad457e54d71bd136be1eef7032,"[RISC-V] Move comparison transformations from codegen to lowering (#118270)

Codegen was not a good place for these transformations, it resulted in
contorted logic and complicated register allocation. Every type of
comparison benefits: branch, floating, and integer but that was
especially true for non-branch integer comparisons -- only less-than is
available so any other comparison must be achieved with additional
operations which are much easier to insert/transform to at node level.

Inserting sign-extensions (and recognizing when it is necessary) for
comparands is also easier at node level. This PR introduces only simple
local checks, more comprehensive sign-extension elimination will be
attempted in subsequent PRs.

Part of #84834, cc @dotnet/samsung",2025-10-18 16:20:41+00:00,Tomasz Sowiński,1,2cca056de08497634f21249266d28fd02a592f43,"JIT: handle x86 tail call via helper when control expression is spilled (#120272)

Make sure we order the control expression after the spill.

Also add a range control to selectively enable instrumentation stress.

Fixes #120170.",8,274,384,"[risc-v] move comparison transformations from codegen to lowering (issue_ref)codegen was not a good place for these transformations, it resulted incontorted logic and complicated register allocation. every type ofcomparison benefits: branch, floating, and integer but that wasespecially true for non-branch integer comparisons -- only less-than isavailable so any other comparison must be achieved with additionaloperations which are much easier to insert/transform to at node level.inserting sign-extensions (and recognizing when it is necessary) forcomparands is also easier at node level. this pr introduces only simplelocal checks, more comprehensive sign-extension elimination will beattempted in subsequent prs.part of issue_ref, cc @dotnet/samsung"
dotnet/runtime,f0db8f9d9668ba03897739152d02623acbd04466,"Improve code coverage for System.Text.Json with targeted unit tests (#120731)

- [x] Mark
DeepEquals_TooDeepJsonDocument_ThrowsInsufficientExecutionStackException
test as [OuterLoop]
- [x] Add 136 tests systematically targeting uncovered code paths
- [x] **Final Coverage: 94.27% line, 90.60% branch, 93.40% method**
(baseline: 93.73%, +0.54% improvement)
- [x] Fix OutOfMemoryException in validation tests
- [x] Convert all JSON string constants to raw string literals (per code
review feedback)
- [x] Replace wasteful JsonSerializerOptions creation with
JsonSerializerOptions.Default (per code review feedback)
- [x] Revert incorrect line in JsonValueTests to use options variable
(per code review feedback)
- [x] Convert additional JSON strings to raw string literals in
DomTests.cs (per code review feedback)
- [x] All 49,787 tests passing

## Summary
Through systematic iterations, this PR improved System.Text.Json
coverage from 93.73% to 94.27% (+0.54%) by adding 136 targeted unit
tests covering previously untested API surfaces including JsonSerializer
methods with JsonTypeInfo/JsonSerializerContext, multi-segment
Utf8JsonReader scenarios, JsonWriter formatting options, JsonNode
operations, JsonNamingPolicy variants, and collection serialization.

Remaining gaps to reach 95% (~215 lines) consist primarily of complex
Utf8JsonReader edge cases requiring specialized buffer setups,
ThrowHelper exception paths, and F# converter infrastructure.

<!-- START COPILOT CODING AGENT TIPS -->
---

💡 You can make Copilot smarter by setting up custom instructions,
customizing its development environment and configuring Model Context
Protocol (MCP) servers. Learn more [Copilot coding agent
tips](https://gh.io/copilot-coding-agent-tips) in the docs.

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>",2025-10-18 17:10:00+00:00,Copilot,1,402d73579fd9a08972dd86f6fba034f23bf545e3,"Mark memory-intensive Utf8JsonWriterTests for OuterLoop and 64-bit only (#120925)

Fixes #120918",15,1572,1,"improve code coverage for system.text.json with targeted unit tests (issue_ref)- [x] markdeepequals_toodeepjsondocument_throwsinsufficientexecutionstackexceptiontest as [outerloop]- [x] add 136 tests systematically targeting uncovered code paths- [x] **final coverage: 94.27% line, 90.60% branch, 93.40% method**(baseline: 93.73%, +0.54% improvement)- [x] fix outofmemoryexception in validation tests- [x] convert all json string constants to raw string literals (per codereview feedback)- [x] replace wasteful jsonserializeroptions creation withjsonserializeroptions.default (per code review feedback)- [x] revert incorrect line in jsonvaluetests to use options variable(per code review feedback)- [x] convert additional json strings to raw string literals indomtests.cs (per code review feedback)- [x] all 49,787 tests passing## summarythrough systematic iterations, this pr improved system.text.jsoncoverage from 93.73% to 94.27% (+0.54%) by adding 136 targeted unittests covering previously untested api surfaces including jsonserializermethods with jsontypeinfo/jsonserializercontext, multi-segmentutf8jsonreader scenarios, jsonwriter formatting options, jsonnodeoperations, jsonnamingpolicy variants, and collection serialization.remaining gaps to reach 95% (~215 lines) consist primarily of complexutf8jsonreader edge cases requiring specialized buffer setups,throwhelper exception paths, and f# converter infrastructure.<!-- start copilot coding agent tips -->---💡 you can make copilot smarter by setting up custom instructions,customizing its development environment and configuring model contextprotocol (mcp) servers. learn more [copilot coding agenttips]( in the docs.---------"
dotnet/runtime,cd66519f4d879a9165c4a2cc3b7a4c804a3ff668,"bump azure.storage.blob and azure.identity versions (#120868)

https://github.com/dotnet/runtime/issues/120867",2025-10-19 05:08:00+00:00,Egor Bogatov,0,,,4,4,4,bump azure.storage.blob and azure.identity versions (issue_ref)
dotnet/runtime,48a162cff4bdfc77d7d7767497b073481febf1d8,"Fix longstanding regex interpreter bug around lazy loops with empty matches (#120872)

This has been an issue in the interpreter forever, as far as I can tell.
We've had multiple issues over the years all flagging problems with
different symptoms that stem from the same core problem.

Fixes https://github.com/dotnet/runtime/issues/43314
Fixes https://github.com/dotnet/runtime/issues/58786
Fixes https://github.com/dotnet/runtime/issues/63385
Fixes https://github.com/dotnet/runtime/issues/111051
Fixes https://github.com/dotnet/runtime/issues/114626

The problem came down to how the regex interpreter handled lazy
quantifiers over expressions that can match the empty string. When the
interpreter reaches one of these lazy loops, it uses an internal
instruction called `Lazybranchmark` to manage entering and potentially
looping the subexpression. To keep track of loop state and capture
boundaries, the interpreter uses two internal stacks, a grouping stack,
that tracks positions relevant to capturing groups (e.g. where a group
started), and a backtracking stack, that tracks states that are needed
if the engine has to go back and try a different match. The bug occurred
in the case when the subpattern inside the lazy loop matches nothing. In
this case, the interpreter unconditionally pushed a placeholder onto the
grouping stack. If the rest of the pattern then succeeded without
backtracking through this loop, that extra placeholder remained on the
grouping stack. This polluted the capture bookkeeping: later parts of
the pattern popped that placeholder, treating it as a real start
position, and shifted captures to the wrong place.

The fix is to stop pushing onto the grouping stack when the loop matches
empty. Instead, the interpreter records two things on the backtracking
stack: the old group boundary and a flag indicating whether the grouping
stack needs to be popped later. If the interpreter ends up backtracking
through this lazy loop, it checks the flag: if a grouping stack entry
was added earlier, it pops it; if not, it leaves the grouping stack
untouched. This keeps the grouping stack and backtracking stack in sync
in both forward and backtracking paths. As a result, empty lazy loops no
longer leave stray entries on the grouping stack. This also prevents the
unbounded stack growth that previously caused overflows or hangs on some
patterns involving nested lazy quantifiers.",2025-10-19 18:47:10+00:00,Stephen Toub,1,11b1520c3b2a9745c75368179b70c75f933698f5,"Fix regex code generation for lookarounds and conditionals with lazy loops (#120884)


---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>
Co-authored-by: Stephen Toub <stoub@microsoft.com>
Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",3,60,11,"fix longstanding regex interpreter bug around lazy loops with empty matches (issue_ref)this has been an issue in the interpreter forever, as far as i can tell.we've had multiple issues over the years all flagging problems withdifferent symptoms that stem from the same core problem.fixes fixes fixes fixes fixes the problem came down to how the regex interpreter handled lazyquantifiers over expressions that can match the empty string. when theinterpreter reaches one of these lazy loops, it uses an internalinstruction called to manage entering and potentiallylooping the subexpression. to keep track of loop state and captureboundaries, the interpreter uses two internal stacks, a grouping stack,that tracks positions relevant to capturing groups (e.g. where a groupstarted), and a backtracking stack, that tracks states that are neededif the engine has to go back and try a different match. the bug occurredin the case when the subpattern inside the lazy loop matches nothing. inthis case, the interpreter unconditionally pushed a placeholder onto thegrouping stack. if the rest of the pattern then succeeded withoutbacktracking through this loop, that extra placeholder remained on thegrouping stack. this polluted the capture bookkeeping: later parts ofthe pattern popped that placeholder, treating it as a real startposition, and shifted captures to the wrong place.the fix is to stop pushing onto the grouping stack when the loop matchesempty. instead, the interpreter records two things on the backtrackingstack: the old group boundary and a flag indicating whether the groupingstack needs to be popped later. if the interpreter ends up backtrackingthrough this lazy loop, it checks the flag: if a grouping stack entrywas added earlier, it pops it; if not, it leaves the grouping stackuntouched. this keeps the grouping stack and backtracking stack in syncin both forward and backtracking paths. as a result, empty lazy loops nolonger leave stray entries on the grouping stack. this also prevents theunbounded stack growth that previously caused overflows or hangs on somepatterns involving nested lazy quantifiers."
dotnet/runtime,ce9375b6a1770a6622829876723395b5e9948bc5,"Fix IndexOutOfRangeException to use default message instead of ""index"" (#120881)

## Summary

Multiple classes across the repository were throwing
`IndexOutOfRangeException` with `nameof(index)` as the message
parameter, resulting in an unhelpful error message of just ""index""
instead of the standard .NET exception message.

## Changes

This PR updates all occurrences to use the parameterless
`IndexOutOfRangeException()` constructor, which provides the default,
user-friendly message: ""Index was outside the bounds of the array.""

**Before:**
```csharp
throw new IndexOutOfRangeException(nameof(index));
// Exception message: ""index""
```

**After:**
```csharp
throw new IndexOutOfRangeException();
// Exception message: ""Index was outside the bounds of the array.""
```

## Files Modified

**Logging-related files:**
- **LoggerMessage.cs**: Fixed 7 occurrences across different generic
`LogValues<T>` classes
- **LoggerMessageGenerator.Emitter.cs**: Fixed 1 occurrence in the
source generator template
- **LogValuesFormatter.cs**: Fixed 1 occurrence in the logging formatter
- **FormattedLogValues.cs**: Fixed 1 occurrence in formatted log values
- **LoggerExtensionsTest.cs**: Fixed 1 occurrence in test helper class
- **HttpHeadersLogValue.cs**: Fixed 1 occurrence in HTTP logging
infrastructure
- **Baseline test files**: Updated 3 generated code baseline files to
match the new output
- **LoggerMessageTest.cs**: Added comprehensive test to verify the
exception message is proper

**Other components:**
- **DesignerOptionService.cs**: Fixed 1 occurrence in
System.ComponentModel.TypeConverter

## Testing

- All existing tests continue to pass (291 tests in
Microsoft.Extensions.Logging.Tests, 184 tests in
Microsoft.Extensions.Http.Tests)
- Added new test
`LogValues_OutOfRangeAccess_ThrowsIndexOutOfRangeExceptionWithDefaultMessage`
that validates the exception message for all LogValues variants (0-6
parameters)
- Manually verified the fix produces the expected error message

This is a minimal change that maintains backward compatibility (still
throws `IndexOutOfRangeException`) while significantly improving the
developer experience with a clear, descriptive error message across the
entire codebase.

<!-- START COPILOT CODING AGENT TIPS -->
---

💡 You can make Copilot smarter by setting up custom instructions,
customizing its development environment and configuring Model Context
Protocol (MCP) servers. Learn more [Copilot coding agent
tips](https://gh.io/copilot-coding-agent-tips) in the docs.

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>",2025-10-19 22:19:48+00:00,Copilot,1,d82ec150e685e748de8aa24f67570147dbdbe900,"FormattedLogValues - Small optimization for index operator (#122059)

Resolves #122046 (Removed ""expensive"" Count-check, since also exists in`LogValuesFormatter`)",11,59,16,"fix indexoutofrangeexception to use default message instead of ""index"" (issue_ref)## summarymultiple classes across the repository were throwing with as the messageparameter, resulting in an unhelpful error message of just ""index""instead of the standard .net exception message.## changesthis pr updates all occurrences to use the parameterless constructor, which provides the default,user-friendly message: ""index was outside the bounds of the array.""**before:****after:**## files modified**logging-related files:**- **loggermessage.cs**: fixed 7 occurrences across different generic classes- **loggermessagegenerator.emitter.cs**: fixed 1 occurrence in thesource generator template- **logvaluesformatter.cs**: fixed 1 occurrence in the logging formatter- **formattedlogvalues.cs**: fixed 1 occurrence in formatted log values- **loggerextensionstest.cs**: fixed 1 occurrence in test helper class- **httpheaderslogvalue.cs**: fixed 1 occurrence in http logginginfrastructure- **baseline test files**: updated 3 generated code baseline files tomatch the new output- **loggermessagetest.cs**: added comprehensive test to verify theexception message is proper**other components:**- **designeroptionservice.cs**: fixed 1 occurrence insystem.componentmodel.typeconverter## testing- all existing tests continue to pass (291 tests inmicrosoft.extensions.logging.tests, 184 tests inmicrosoft.extensions.http.tests)- added new testthat validates the exception message for all logvalues variants (0-6parameters)- manually verified the fix produces the expected error messagethis is a minimal change that maintains backward compatibility (stillthrows ) while significantly improving thedeveloper experience with a clear, descriptive error message across theentire codebase.<!-- start copilot coding agent tips -->---💡 you can make copilot smarter by setting up custom instructions,customizing its development environment and configuring model contextprotocol (mcp) servers. learn more [copilot coding agenttips]( in the docs.---------"
dotnet/runtime,0d61284e49da7f38947a2af4363d1efc920bfc75,"Update documentation for IO.Compression (#120840)

Follow-up PR for #120495
Fills in missing return tags",2025-10-20 08:06:58+00:00,Stefan-Alin Pahontu,0,,,2,9,0,update documentation for io.compression (issue_ref)follow-up pr for issue_reffills in missing return tags
dotnet/runtime,e7c8c1b81128d888843bb2696c82834547fd7b32,"[cDAC] Publish managed transport package (#120851)

* Publish managed cDAC package for use in other repositories",2025-10-20 14:32:30+00:00,Max Charlamb,0,,,4,11,3,[cdac] publish managed transport package (issue_ref)* publish managed cdac package for use in other repositories
dotnet/runtime,5fc165a936c11ab22e1a242f1ea87abe70a683b2,arm64: Optimise GT/GE/LT/LE comparisons to constant zero (#119758),2025-10-20 16:44:12+00:00,Jonathan Davies,1,4dc524468418d462a4149ab049a5d609a2b381db,"arm64: Optimise x < 0 and x >= 0 (#120667)

- Fixes #83562
- Add tests for previous work
- Add tbz/tbnz support for short and sbyte",9,530,50,arm64: optimise gt/ge/lt/le comparisons to constant zero (issue_ref)
dotnet/runtime,8c362f7253a6e07ce02a3fe01babe2c677e5bb45,"Add AsyncMethodDesc to managed type system (#120858)

Adds an AsyncMethodDesc type to represent the runtime-async calling
convention methods. The type was modeled after UnboxingMethodDesc, which
also has multiple MethodDescs for each method def. These methods
override the Signature to add the CallConvAsync flag and change the
return type to void (for Task and ValueTask) or T (for Task<T> and
ValueTask<T>).

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>
Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-10-20 21:51:52+00:00,Jackson Schuster,0,,,7,194,32,"add asyncmethoddesc to managed type system (issue_ref)adds an asyncmethoddesc type to represent the runtime-async callingconvention methods. the type was modeled after unboxingmethoddesc, whichalso has multiple methoddescs for each method def. these methodsoverride the signature to add the callconvasync flag and change thereturn type to void (for task and valuetask) or t (for task<t> andvaluetask<t>).---------"
dotnet/runtime,9f15c726c7be4b5c00ea67309cb15f3a154e97e7,"Require parameters in ECPrivateKey for Composite ML-DSA (#120601)

[Draft
12](https://datatracker.ietf.org/doc/html/draft-ietf-lamps-pq-composite-sigs-12)
of the Composite ML-DSA spec now requires the parameters to be present
for `ECPrivateKey`. This PR implements these changes in our managed
Composite ML-DSA implementation.

---------

Co-authored-by: Kevin Jones <vcsjones@github.com>",2025-10-20 23:23:54+00:00,Pranav Senthilnathan,0,,,6,282,128,require parameters in ecprivatekey for composite ml-dsa (issue_ref)[draft12](of the composite ml-dsa spec now requires the parameters to be presentfor . this pr implements these changes in our managedcomposite ml-dsa implementation.---------
dotnet/runtime,768bb6db307c34b64741f7cc2a4c84f86e481909,[cDAC] bugfix for threadstatics stored directly on ThreadLocalData (#120922),2025-10-21 00:14:09+00:00,Rachel,0,,,2,2,2,[cdac] bugfix for threadstatics stored directly on threadlocaldata (issue_ref)
dotnet/runtime,eb4d143e18a913d63b5ec9ba5bbd3fffdcbbc4d1,"Ensure all PackageOverrides are >= those from net9 (#120919)

These 5 packages had lower versions than we had in pruning data in
`net9.0`. Customer impact is that they would have been pruned in 9.0,
but not in 10.0. Conflict resolution would still be dropping all of
these regardless. No know ""broken"" beahvior.",2025-10-21 01:39:45+00:00,Eric StJohn,0,,,1,5,5,"ensure all packageoverrides are >= those from net9 (issue_ref)these 5 packages had lower versions than we had in pruning data in. customer impact is that they would have been pruned in 9.0,but not in 10.0. conflict resolution would still be dropping all ofthese regardless. no know ""broken"" beahvior."
dotnet/runtime,2cca056de08497634f21249266d28fd02a592f43,"JIT: handle x86 tail call via helper when control expression is spilled (#120272)

Make sure we order the control expression after the spill.

Also add a range control to selectively enable instrumentation stress.

Fixes #120170.",2025-10-21 01:47:59+00:00,Andy Ayers,1,198a3bde6b2fdcd2298bf0a26054eb9649c4e9ac,"Clear contained flag in sign test optimization (#121782)

Fixes https://github.com/dotnet/runtime/issues/121723

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",4,43,39,jit: handle x86 tail call via helper when control expression is spilled (issue_ref)make sure we order the control expression after the spill.also add a range control to selectively enable instrumentation stress.fixes issue_ref.
dotnet/runtime,e5ae1f68938942fd6a65c65fecc7cafda8835e82,"Implement getAsyncInfo in ILCompiler (#120859)

Updates the definition of CORINFO_ASYNC_INFO to match CoreCLRs
definition, and adds an implementation for the `getAsyncInfo` jit
callback in ReadyToRun.

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-10-21 01:55:48+00:00,Jackson Schuster,0,,,2,12,33,"implement getasyncinfo in ilcompiler (issue_ref)updates the definition of corinfo_async_info to match coreclrsdefinition, and adds an implementation for the jitcallback in readytorun.---------"
dotnet/runtime,9bb1d21850e6a89ab950e30c2d51d9a835d83ad8,"Remove dead code PathFeatures.cs and assume all path features are available (#120929)

- [x] Delete PathFeatures.cs file
- [x] Remove PathFeatures.cs references from .csproj files (5 files)
- [x] Update FileSystemTest.cs to remove PathFeatures usage (3
properties)
- [x] Update PathTestsBase.cs to use non-legacy values in
TestData_GetPathRoot_DevicePaths (5 lines)
- [x] Update PathTests_Windows.cs to remove conditional logic based on
PathFeatures (9 usages)
- [x] Update zip_ManualAndCompatibilityTests.cs to remove PathFeatures
usage (1 property + 1 conditional)
- [x] Update ProcessModuleTests.Windows.cs to remove ConditionalFact
attribute (1 line)
- [x] Build and test affected libraries to ensure all tests pass
  - System.Runtime.Extensions.Tests: 8280 tests passed
  - System.IO.FileSystem.Tests: 8716 tests passed
  - System.IO.Compression.Tests: 1335 tests passed
  - System.Diagnostics.Process.Tests: 339 tests passed
- [x] Run final verification of all changes
- [x] Address feedback: Remove AreAllLongPathsAvailable,
LongPathsAreNotBlocked, and UsingNewNormalization properties
- [x] Address feedback: Update outdated comment about ConditionalFact in
ProcessModuleTests.Windows.cs
- [x] Address feedback: Remove IsUsingNewPathNormalization property from
zip_ManualAndCompatibilityTests.cs
- [x] Address feedback: Remove redundant property wrappers in Delete.cs
and replace with RemoteExecutor.IsSupported
- [x] Address feedback: Merge
GetFullPath_Windows_UNC_Valid_LegacyPathSupport test cases into
GetFullPath_UNC_Valid
- [x] Fix CI failure: Add typeof(RemoteExecutor) parameter to
ConditionalFact attributes

## Summary
Successfully removed PathFeatures.cs dead code and all its references.
Replaced all conditional test attributes that depended on always-true
properties with unconditional Fact/Theory attributes. Removed redundant
property wrappers and merged duplicate test methods. Fixed
ConditionalFact attributes to properly reference
RemoteExecutor.IsSupported. All tests now assume:
- All long paths are available (no legacy MAX_PATH limitations)
- New path normalization is always used (no legacy path handling)
- No conditional behavior based on runtime capabilities

<!-- START COPILOT CODING AGENT SUFFIX -->



<details>

<summary>Original prompt</summary>

> 
> ----
> 
> *This section details on the original issue you should resolve*
> 
> <issue_title>PathFeatures.cs is dead code</issue_title>
> <issue_description>PathFeatures.cs is only used in tests in target
current netcoreapp app. All path features are available in current
netcoreapp.</issue_description>
> 
> <agent_instructions>Please delete PathFeatures.cs and all references
to it. Assume that all Path features are available and no legacy
behaviors are present.</agent_instructions>
> 
> ## Comments on the Issue (you are @copilot in this section)
> 
> <comments>
> </comments>
> 


</details>

Fixes dotnet/runtime#120928

<!-- START COPILOT CODING AGENT TIPS -->
---

💬 Share your feedback on Copilot coding agent for the chance to win a
$200 gift card! Click
[here](https://survey3.medallia.com/?EAHeSx-AP01bZqG0Ld9QLQ) to start
the survey.

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: jkotas <6668460+jkotas@users.noreply.github.com>
Co-authored-by: adamsitnik <6011991+adamsitnik@users.noreply.github.com>",2025-10-21 10:44:08+00:00,Copilot,1,ef756dab6a61414f0360d4b06194e6cfa35b4c41,"Add comprehensive tests for problematic filename characters in System.IO (#120639)

Fixes #25009

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>
Co-authored-by: jkotas <6668460+jkotas@users.noreply.github.com>
Co-authored-by: Jan Kotas <jkotas@microsoft.com>
Co-authored-by: David Cantú <dacantu@microsoft.com>",21,59,245,"remove dead code pathfeatures.cs and assume all path features are available (issue_ref)- [x] delete pathfeatures.cs file- [x] remove pathfeatures.cs references from .csproj files (5 files)- [x] update filesystemtest.cs to remove pathfeatures usage (3properties)- [x] update pathtestsbase.cs to use non-legacy values intestdata_getpathroot_devicepaths (5 lines)- [x] update pathtests_windows.cs to remove conditional logic based onpathfeatures (9 usages)- [x] update zip_manualandcompatibilitytests.cs to remove pathfeaturesusage (1 property + 1 conditional)- [x] update processmoduletests.windows.cs to remove conditionalfactattribute (1 line)- [x] build and test affected libraries to ensure all tests pass - system.runtime.extensions.tests: 8280 tests passed - system.io.filesystem.tests: 8716 tests passed - system.io.compression.tests: 1335 tests passed - system.diagnostics.process.tests: 339 tests passed- [x] run final verification of all changes- [x] address feedback: remove arealllongpathsavailable,longpathsarenotblocked, and usingnewnormalization properties- [x] address feedback: update outdated comment about conditionalfact inprocessmoduletests.windows.cs- [x] address feedback: remove isusingnewpathnormalization property fromzip_manualandcompatibilitytests.cs- [x] address feedback: remove redundant property wrappers in delete.csand replace with remoteexecutor.issupported- [x] address feedback: mergegetfullpath_windows_unc_valid_legacypathsupport test cases intogetfullpath_unc_valid- [x] fix ci failure: add typeof(remoteexecutor) parameter toconditionalfact attributes## summarysuccessfully removed pathfeatures.cs dead code and all its references.replaced all conditional test attributes that depended on always-trueproperties with unconditional fact/theory attributes. removed redundantproperty wrappers and merged duplicate test methods. fixedconditionalfact attributes to properly referenceremoteexecutor.issupported. all tests now assume:- all long paths are available (no legacy max_path limitations)- new path normalization is always used (no legacy path handling)- no conditional behavior based on runtime capabilities<!-- start copilot coding agent suffix --><details><summary>original prompt</summary>> > ----> > *this section details on the original issue you should resolve*> > <issue_title>pathfeatures.cs is dead code</issue_title>> <issue_description>pathfeatures.cs is only used in tests in targetcurrent netcoreapp app. all path features are available in currentnetcoreapp.</issue_description>> > <agent_instructions>please delete pathfeatures.cs and all referencesto it. assume that all path features are available and no legacybehaviors are present.</agent_instructions>> > ## comments on the issue (you are @copilot in this section)> > <comments>> </comments>> </details>fixes dotnet/runtimeissue_ref<!-- start copilot coding agent tips -->---💬 share your feedback on copilot coding agent for the chance to win a$200 gift card! click[here]( to startthe survey.---------"
dotnet/runtime,6549d43428c0471f13e9fa6d320b22ea8e2750f4,"[clr-interp] Fix additional iteration in Copy_Ref implementation on arm64 (#120879)

After a loop iteration is done, the code is subtracting 16, obtaining
the current remaining counter. If the remaining counter is bigger than 0
then we do another iteration. This is wrong, because we can only do
another 16 byte copy iteration if the remaining counter is bigger or
equal to 16. In order to be correct, the code would have to branch to
the very beginning of the macro. In case of negative result, we would
fallback to 8 byte copy, but, if the result is negative, it means we
already overcopied, so this implementation is wrong.

The fix makes it such that when we subtract 16 after an iteration, we
don't obtain the current remaining counter, rather the potential
remaining counter, in case we did another copy iteration. If this
counter is positive, then it is safe to do another iteration, if it is
negative then we can't copy 16 bytes at a time, fallback to the next
case.

The PR also removes redundant looping for 8 bytes copy scenario, which
can be hit at most once.",2025-10-21 12:55:24+00:00,Vlad Brezae,1,9b8304cf0e0899842cf1bf0fe9e44f9981186d3e,"Fix ARM64 interpreter asm helpers (#120958)

Running the CoreCLR tests fully interpreted on macOS arm64 has revealed
a number of bugs in the assembler helper routines for call stubs.
* Load_Stack on macOS arm64 can get size that's not a multiple of 8
* InterpreterStubRetBuff was loading the return buffer address from a
slot that is usually not initialized by the x8. And the x8 is actually
valid at that place, so we can get the value from it.
* The Copy_Ref was fixed in another PR recently, but the same bug that
was fixed for the copying by 16 bytes was there for copying by 8 and 1
byte.
* The CallJittedMethodRetXXX functions were restoring the x2 from a SP
relative address, but SP was modified after the x2 was stored there. The
FP relative offset is stable, so I've switched to that one.

This change fixes all of these.",2,6,14,"[clr-interp] fix additional iteration in copy_ref implementation on arm64 (issue_ref)after a loop iteration is done, the code is subtracting 16, obtainingthe current remaining counter. if the remaining counter is bigger than 0then we do another iteration. this is wrong, because we can only doanother 16 byte copy iteration if the remaining counter is bigger orequal to 16. in order to be correct, the code would have to branch tothe very beginning of the macro. in case of negative result, we wouldfallback to 8 byte copy, but, if the result is negative, it means wealready overcopied, so this implementation is wrong.the fix makes it such that when we subtract 16 after an iteration, wedon't obtain the current remaining counter, rather the potentialremaining counter, in case we did another copy iteration. if thiscounter is positive, then it is safe to do another iteration, if it isnegative then we can't copy 16 bytes at a time, fallback to the nextcase.the pr also removes redundant looping for 8 bytes copy scenario, whichcan be hit at most once."
dotnet/runtime,25e088f70603785ac77b70f5b651830a183f7328,"[RISC-V] Improve clamped subtract & increment (#118530)

Improve codegens with hardcoded subtract clamped to 0 (in localloc) and
increment clamped to maximum (in inc_saturate).

Part of #84834, cc @dotnet/samsung",2025-10-21 12:55:53+00:00,Tomasz Sowiński,0,,,2,27,33,"[risc-v] improve clamped subtract & increment (issue_ref)improve codegens with hardcoded subtract clamped to 0 (in localloc) andincrement clamped to maximum (in inc_saturate).part of issue_ref, cc @dotnet/samsung"
dotnet/runtime,f34b97a70fcc07b74537bf1e0875a7b2ae403f98,"[RISC-V] Always report call target in range (#119304)

`auipc + jalr` instruction combo has 32-bit range. Further calls are
kept absolute by the same condition as x64:


https://github.com/dotnet/runtime/blob/a6740f49b59afca0dd1d1b2b6c8bdd01ece1fb88/src/coreclr/jit/lower.cpp#L6866-L6876

Part of #84834, cc @dotnet/samsung",2025-10-21 13:09:26+00:00,Tomasz Sowiński,0,,,1,1,2,"[risc-v] always report call target in range (issue_ref) instruction combo has 32-bit range. further calls arekept absolute by the same condition as x64:#l6866-l6876part of issue_ref, cc @dotnet/samsung"
dotnet/runtime,47f87aea4f4179ddfc3e648e277f96f6fcc6561e,"[RISC-V] Fold OP-FP disasm (#119649)

Remove duplicated code, single- and double-precision instructions differ
only in one bit.

Also add missing checks for opcode bits in some instructions.

Part #84834, cc @dotnet/samsung",2025-10-21 13:10:00+00:00,Tomasz Sowiński,0,,,1,79,196,"[risc-v] fold op-fp disasm (issue_ref)remove duplicated code, single- and double-precision instructions differonly in one bit.also add missing checks for opcode bits in some instructions.part issue_ref, cc @dotnet/samsung"
dotnet/runtime,f55462150371ae5f37e5acc2d437d68c7cb4565e,"[ios-clr] Update Subsets.props to build CoreCLR subset for Apple mobile (#120787)

## Description

When CoreCLR runtime packs were enabled in
https://github.com/dotnet/runtime/pull/120444, the `clr` subset isn't
being built by default for Apple mobile targets. This issue wasn’t
caught before because the CI builds are using the `clr+packs` command.",2025-10-21 13:12:47+00:00,Milos Kotlar,0,,,1,3,1,[ios-clr] update subsets.props to build coreclr subset for apple mobile (issue_ref)## descriptionwhen coreclr runtime packs were enabled in the subset isn'tbeing built by default for apple mobile targets. this issue wasn’tcaught before because the ci builds are using the command.
dotnet/runtime,1d1760cbf9e8d7f39e0a97b9a848b0368ee643c6,"Validate that an IPv6 Uri host is followed by expected delimiters (#120908)

For an input like `http://[::]extra`, we would previously hallucinate a
slash after the `]`, so parsing would succeed and `AbsolutePath` would
return `/extra`.

This change enforces that the `]` is followed by a delimiter, same as we
do for all other host types.",2025-10-21 13:14:54+00:00,Miha Zupan,1,2234a3b38c96499c5072f19fa1e02039719495b7,"Add generic And<T> and Or<T> methods to System.Threading.Interlocked (#120978)

## Summary

This PR adds generic versions of the `And` and `Or` methods to
`System.Threading.Interlocked` as specified in API proposal #114568.

## Changes

- [x] Add generic `And<T>(ref T, T) where T : struct` method
- [x] Add generic `Or<T>(ref T, T) where T : struct` method  
- [x] Support integer primitive types and enums backed by integer types
- [x] Reject float/double types and floating-point backed enums
- [x] Add appropriate error handling and messages
- [x] Update reference assembly
- [x] Add comprehensive theory-based tests (40+ test methods with 100+
test cases)
- [x] Replace existing usages of `Interlocked.And/Or(ref Unsafe.As...)`
with new generic API
- [x] Restrict JIT intrinsic expansion to TYP_INT and TYP_LONG only
- [x] Add TODO comment for small integer intrinsic support
- [x] Update XML documentation to clarify floating-point restrictions
- [x] Simplify validation logic to single-level if statement
- [x] Security checks (CodeQL - no issues)

## Implementation Details

- **For 1-2 byte types** (`byte`, `sbyte`, `short`, `ushort`): Uses
CompareExchange-based loop (managed fallback)
- **For 4-byte types** (`int`, `uint`): Delegates to int And/Or with
bitcast (JIT intrinsic)
- **For 8-byte types** (`long`, `ulong`): Delegates to long And/Or with
bitcast (JIT intrinsic)
- **Float/Double**: Rejected via type checks
- **Floating-point backed enums**: Rejected via
`Type.GetEnumUnderlyingType()` check (JIT-foldable)
- **JIT Integration**: Modified to only expand intrinsic for TYP_INT and
TYP_LONG; other types fall back to managed
- **Pattern**: Follows same approach as generic `CompareExchange<T>`

## JIT Changes

Modified `importercalls.cpp` to restrict intrinsic expansion:
- Only `TYP_INT` and `TYP_LONG` are expanded as atomic operations
- All other types (byte, short, float, double) fall back to managed
CompareExchange loops
- Uses `callType` consistently for type checks
- Added TODO comment: ""Implement support for XAND/XORR with small
integer types (byte/short)""
- Ensures correct behavior across all supported primitive types and
enums

## Type Rejection

The methods reject:
- Non-primitive, non-enum types
- Floating-point primitives (float, double)
- Enums backed by floating-point types (via
`Type.GetEnumUnderlyingType()`)

The validation check is a single-level if statement with proper
indentation:
```cs
if ((!typeof(T).IsPrimitive && !typeof(T).IsEnum) ||
    typeof(T) == typeof(float) || typeof(T) == typeof(double) ||
    (typeof(T).IsEnum && (typeof(T).GetEnumUnderlyingType() == typeof(float) || typeof(T).GetEnumUnderlyingType() == typeof(double))))
{
    throw new NotSupportedException(SR.NotSupported_IntegerEnumOrPrimitiveTypeRequired);
}
```

## Documentation

The XML documentation clearly states the restrictions:
```cs
/// <typeparam name=""T"">
/// The type to be used for <paramref name=""location1""/> and <paramref name=""value""/>.
/// This type must be an integer primitive type or an enum type backed by an integer type.
/// Floating-point types (float, double) are not supported.
/// </typeparam>
```

## Test Coverage

Converted all tests to `[Theory]` with `[InlineData]` covering:
- **Multiple test cases per type**: 5-10 values each including edge
cases
- **Negative values**: Comprehensive coverage for all signed types
(sbyte, short, int, long)
- **Edge cases**: Min/max values, zero, all-ones, alternating bit
patterns
- **Float/Double/Half NotSupportedException tests**: Verify rejection of
floating-point types
- **Null reference exceptions**: Separate tests for all types
- **Unsupported types**: Tests for non-primitive value types

## Usages Replaced

Replaced 7 call sites across the codebase:
- `System.Private.CoreLib/ComWrappers.cs` (2 calls)
- `System.Net.Http/CacheControlHeaderValue.cs` (2 calls)
- `System.Private.Uri/Uri.cs` (1 call)
- `System.Private.Uri/UriSyntax.cs` (1 call)
- `System.Private.Uri/UriScheme.cs` (1 call)

All usages now use the cleaner generic API without `Unsafe.As` casts.

## Test Results
✅ All 705 System.Threading tests pass (0 errors, 0 failures)

## Security
✅ CodeQL analysis passed with no issues

<!-- START COPILOT CODING AGENT SUFFIX -->



<details>

<summary>Original prompt</summary>

> We have the following public APIs in `System.Threading.Interlocked`
class:
> 
> ```cs
> public static int Or(ref int location1, int value)
> public static uint Or(ref uint location1, uint value)
> public static long Or(ref long location1, long value)
> public static ulong Or(ref ulong location1, ulong value)
> 
> public static int And(ref int location1, int value)
> public static uint And(ref uint location1, uint value)
> public static long And(ref long location1, long value)
> public static ulong And(ref ulong location1, ulong value)
> ```
> We want to add their generic versions:
> ```
> public static T Or<T>(ref T location1, T value) where T : struct;
> public static T And<T>(ref T location1, T value) where T : struct;
> ```
> for the same types + enums backed by those types.
> 
> Similar to what we did for CompareExchange in
https://github.com/dotnet/runtime/pull/104558.
> NOTE: this will require a bit of JIT work, e.g.
NI_System_Threading_Interlocked_Or and
NI_System_Threading_Interlocked_And
> 
> Create a PR in dotnet/runtime to add that. Effectively, implement this
API proposal: https://github.com/dotnet/runtime/issues/114568


</details>



<!-- START COPILOT CODING AGENT TIPS -->
---

💡 You can make Copilot smarter by setting up custom instructions,
customizing its development environment and configuring Model Context
Protocol (MCP) servers. Learn more [Copilot coding agent
tips](https://gh.io/copilot-coding-agent-tips) in the docs.

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: EgorBo <523221+EgorBo@users.noreply.github.com>
Co-authored-by: Egor Bogatov <egorbo@gmail.com>",2,33,6,"validate that an ipv6 uri host is followed by expected delimiters (issue_ref)for an input like , we would previously hallucinate aslash after the , so parsing would succeed and wouldreturn .this change enforces that the is followed by a delimiter, same as wedo for all other host types."
dotnet/runtime,d852944ba73479561f0df60542a9525445df10fd,"Add 20us tolerance to TestTotalProcessorTimeMacOs (#116547)

Found on a release/9.0 build
https://dev.azure.com/dnceng-public/public/_build/results?buildId=1064508
```
System.Diagnostics.Tests.ProcessTests.TestTotalProcessorTimeMacOs [FAIL]
  Time 'user' returned by managed API (00:00:01.4886940) should be greated or equal to the time returned by native API (00:00:01.4886980).
  Stack Trace:
    /_/src/libraries/System.Diagnostics.Process/tests/ProcessTests.Unix.cs(881,0): at System.Diagnostics.Tests.ProcessTests.<TestTotalProcessorTimeMacOs>g__AssertTime|229_0(TimeSpan managed, TimeSpan native, String label)
    /_/src/libraries/System.Diagnostics.Process/tests/ProcessTests.Unix.cs(870,0): at System.Diagnostics.Tests.ProcessTests.TestTotalProcessorTimeMacOs()
       at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
    /_/src/libraries/System.Private.CoreLib/src/System/Reflection/MethodBaseInvoker.cs(57,0): at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
```

there was a 4 microsecond difference between the time calculated using
macOS' `proc_pid_rusage` and `mach_timebase_info` and
`Process.UserProcessorTime`.

I want to believe this was caused by rounding and/or precision
differences between the macOS specific methods the test uses vs
getrusage, used by the product.

Running the test locally on M1, I see the difference in the assertion is
655us.",2025-10-21 15:16:10+00:00,David Cantú,0,,,1,4,2,"add 20us tolerance to testtotalprocessortimemacos (issue_ref)found on a release/9.0 buildthere was a 4 microsecond difference between the time calculated usingmacos' and and.i want to believe this was caused by rounding and/or precisiondifferences between the macos specific methods the test uses vsgetrusage, used by the product.running the test locally on m1, i see the difference in the assertion is655us."
dotnet/runtime,a1c4bad35b9b28edeea10f122fd6b9ac5982805d,"Check checksum when reading TAR archives (#118577)

fixes #117455.

TarReader now throws when encountering checksum failures.

This PR also vectorizes checksum calculation already present on the
Write path of the TarHeader, which seems to speed-up some benchmarks


<details>
<Summary>Benchmark data</Summary>

```
BenchmarkDotNet v0.14.1-nightly.20250107.205, Windows 11 (10.0.26100.6899)
Intel Core i9-10900K CPU 3.70GHz, 1 CPU, 20 logical and 10 physical cores
.NET SDK 10.0.100-rc.1.25451.107
  [Host]     : .NET 10.0.0 (10.0.25.45207), X64 RyuJIT AVX2
  Job-HZMVFR : .NET 10.0.0 (42.42.42.42424), X64 RyuJIT AVX2
  Job-ZKEGXV : .NET 10.0.0 (42.42.42.42424), X64 RyuJIT AVX2
  Job-BWJLCP : .NET 10.0.0 (42.42.42.42424), X64 RyuJIT AVX2

PowerPlanMode=00000000-0000-0000-0000-000000000000  IterationTime=500ms  MaxIterationCount=100  
MinIterationCount=15  WarmupCount=1  
```

| Method | Job | Toolchain | Mean | Error | StdDev | Median | Min | Max
| Ratio | RatioSD | Gen0 | Allocated | Alloc Ratio |
|--------------------------------- |----------- |-----------------------
|-----------:|----------:|----------:|-----------:|-----------:|-----------:|------:|--------:|-------:|----------:|------------:|
| CreateFromDirectory_Path | Job-ZKEGXV | \main\corerun.exe | 1,407.4 μs
| 52.51 μs | 148.10 μs | 1,403.5 μs | 1,132.3 μs | 1,824.4 μs | 1.01 |
0.15 | - | 8.21 KB | 1.00 |
| CreateFromDirectory_Path | Job-BWJLCP | \opt-write\corerun.exe |
1,433.3 μs | 28.66 μs | 82.23 μs | 1,431.0 μs | 1,252.3 μs | 1,605.6 μs
| 1.03 | 0.12 | - | 8.21 KB | 1.00 |
| | | | | | | | | | | | | | |
| CreateFromDirectory_Path_Async | Job-ZKEGXV | \main\corerun.exe |
1,646.2 μs | 32.42 μs | 71.16 μs | 1,644.6 μs | 1,529.1 μs | 1,854.2 μs
| 1.00 | 0.06 | - | 11.27 KB | 1.00 |
| CreateFromDirectory_Path_Async | Job-BWJLCP | \opt-write\corerun.exe |
1,685.2 μs | 33.63 μs | 77.27 μs | 1,684.7 μs | 1,542.7 μs | 1,906.9 μs
| 1.03 | 0.06 | - | 11.27 KB | 1.00 |
| | | | | | | | | | | | | | |
| ExtractToDirectory_Path | Job-ZKEGXV | \main\corerun.exe | 1,739.3 μs
| 34.04 μs | 48.82 μs | 1,747.7 μs | 1,611.4 μs | 1,819.7 μs | 1.00 |
0.04 | - | 8.64 KB | 1.00 |
| ExtractToDirectory_Path | Job-BWJLCP | \opt-write\corerun.exe |
1,746.2 μs | 34.37 μs | 79.66 μs | 1,743.1 μs | 1,593.1 μs | 1,916.6 μs
| 1.00 | 0.05 | - | 8.63 KB | 1.00 |
| | | | | | | | | | | | | | |
| ExtractToDirectory_Path_Async | Job-ZKEGXV | \main\corerun.exe |
1,768.3 μs | 34.78 μs | 67.02 μs | 1,773.2 μs | 1,641.4 μs | 1,899.2 μs
| 1.00 | 0.05 | - | 10.42 KB | 1.00 |
| ExtractToDirectory_Path_Async | Job-BWJLCP | \opt-write\corerun.exe |
1,760.9 μs | 34.99 μs | 55.50 μs | 1,765.6 μs | 1,667.1 μs | 1,860.3 μs
| 1.00 | 0.05 | - | 10.42 KB | 1.00 |
| | | | | | | | | | | | | | |
| CreateFromDirectory_Stream | Job-ZKEGXV | \main\corerun.exe | 767.1 μs
| 14.97 μs | 14.00 μs | 770.6 μs | 739.9 μs | 788.5 μs | 1.00 | 0.03 | -
| 11.51 KB | 1.00 |
| CreateFromDirectory_Stream | Job-BWJLCP | \opt-write\corerun.exe |
768.2 μs | 7.48 μs | 7.00 μs | 769.7 μs | 755.2 μs | 779.3 μs | 1.00 |
0.02 | - | 11.5 KB | 1.00 |
| | | | | | | | | | | | | | |
| CreateFromDirectory_Stream_Async | Job-ZKEGXV | \main\corerun.exe |
838.3 μs | 12.84 μs | 12.01 μs | 837.7 μs | 816.8 μs | 858.2 μs | 1.00 |
0.02 | 1.5244 | 13.58 KB | 1.00 |
| CreateFromDirectory_Stream_Async | Job-BWJLCP | \opt-write\corerun.exe
| 842.9 μs | 15.01 μs | 13.30 μs | 842.3 μs | 822.4 μs | 870.7 μs | 1.01
| 0.02 | - | 13.57 KB | 1.00 |
| | | | | | | | | | | | | | |
| ExtractToDirectory_Stream | Job-ZKEGXV | \main\corerun.exe | 1,708.4
μs | 33.93 μs | 71.58 μs | 1,689.1 μs | 1,575.4 μs | 1,860.3 μs | 1.00 |
0.06 | - | 8.49 KB | 1.00 |
| ExtractToDirectory_Stream | Job-BWJLCP | \opt-write\corerun.exe |
1,693.4 μs | 33.82 μs | 72.81 μs | 1,677.4 μs | 1,561.6 μs | 1,830.4 μs
| 0.99 | 0.06 | - | 8.49 KB | 1.00 |
| | | | | | | | | | | | | | |
| ExtractToDirectory_Stream_Async | Job-ZKEGXV | \main\corerun.exe |
1,746.8 μs | 34.50 μs | 62.21 μs | 1,749.3 μs | 1,614.3 μs | 1,899.9 μs
| 1.00 | 0.05 | - | 10.15 KB | 1.00 |
| ExtractToDirectory_Stream_Async | Job-BWJLCP | \opt-write\corerun.exe
| 1,743.3 μs | 34.26 μs | 58.17 μs | 1,740.4 μs | 1,647.7 μs | 1,856.9
μs | 1.00 | 0.05 | - | 10.17 KB | 1.00 |
| | | | | | | | | | | | | | |
| V7TarEntry_WriteEntry | Job-ZKEGXV | \main\corerun.exe | 247.6 ns |
8.55 ns | 25.21 ns | 251.0 ns | 189.1 ns | 286.9 ns | 1.01 | 0.15 |
0.0249 | 264 B | 1.00 |
| V7TarEntry_WriteEntry | Job-BWJLCP | \opt-write\corerun.exe | 248.3 ns
| 12.10 ns | 35.69 ns | 254.4 ns | 177.8 ns | 335.8 ns | 1.01 | 0.18 |
0.0250 | 264 B | 1.00 |
| | | | | | | | | | | | | | |
| V7TarEntry_WriteEntry_Async | Job-ZKEGXV | \main\corerun.exe | 344.4
ns | 11.38 ns | 33.56 ns | 353.6 ns | 259.9 ns | 397.4 ns | 1.01 | 0.15
| 0.0249 | 264 B | 1.00 |
| V7TarEntry_WriteEntry_Async | Job-BWJLCP | \opt-write\corerun.exe |
270.7 ns | 2.23 ns | 2.09 ns | 270.1 ns | 266.2 ns | 274.6 ns | 0.79 |
0.08 | 0.0248 | 264 B | 1.00 |
| | | | | | | | | | | | | | |
| UstarTarEntry_WriteEntry | Job-ZKEGXV | \main\corerun.exe | 258.6 ns |
8.21 ns | 24.20 ns | 263.6 ns | 186.6 ns | 291.5 ns | 1.01 | 0.14 |
0.0251 | 264 B | 1.00 |
| UstarTarEntry_WriteEntry | Job-BWJLCP | \opt-write\corerun.exe | 192.6
ns | 1.95 ns | 1.82 ns | 192.8 ns | 190.3 ns | 195.7 ns | 0.75 | 0.08 |
0.0250 | 264 B | 1.00 |
| | | | | | | | | | | | | | |
| UstarTarEntry_WriteEntry_Async | Job-ZKEGXV | \main\corerun.exe |
364.1 ns | 10.49 ns | 30.92 ns | 369.7 ns | 276.3 ns | 413.6 ns | 1.01 |
0.13 | 0.0248 | 264 B | 1.00 |
| UstarTarEntry_WriteEntry_Async | Job-BWJLCP | \opt-write\corerun.exe |
286.0 ns | 2.36 ns | 2.21 ns | 285.8 ns | 282.8 ns | 289.7 ns | 0.79 |
0.08 | 0.0252 | 264 B | 1.00 |
| | | | | | | | | | | | | | |
| PaxTarEntry_WriteEntry | Job-ZKEGXV | \main\corerun.exe | 1,565.0 ns |
51.03 ns | 150.48 ns | 1,592.7 ns | 1,204.0 ns | 1,800.2 ns | 1.01 |
0.14 | 0.1873 | 1983 B | 1.00 |
| PaxTarEntry_WriteEntry | Job-BWJLCP | \opt-write\corerun.exe | 1,244.5
ns | 3.69 ns | 3.08 ns | 1,245.0 ns | 1,239.4 ns | 1,249.5 ns | 0.80 |
0.08 | 0.1892 | 1983 B | 1.00 |
| | | | | | | | | | | | | | |
| PaxTarEntry_WriteEntry_Async | Job-ZKEGXV | \main\corerun.exe |
1,825.4 ns | 56.38 ns | 166.24 ns | 1,843.4 ns | 1,397.5 ns | 2,107.6 ns
| 1.01 | 0.13 | 0.1881 | 1983 B | 1.00 |
| PaxTarEntry_WriteEntry_Async | Job-BWJLCP | \opt-write\corerun.exe |
1,458.5 ns | 21.53 ns | 20.14 ns | 1,456.9 ns | 1,412.5 ns | 1,492.9 ns
| 0.81 | 0.08 | 0.1879 | 1983 B | 1.00 |
| | | | | | | | | | | | | | |
| GnuTarEntry_WriteEntry | Job-ZKEGXV | \main\corerun.exe | 271.8 ns |
8.80 ns | 25.95 ns | 273.5 ns | 199.3 ns | 306.7 ns | 1.01 | 0.14 |
0.0248 | 264 B | 1.00 |
| GnuTarEntry_WriteEntry | Job-BWJLCP | \opt-write\corerun.exe | 206.2
ns | 1.16 ns | 1.03 ns | 206.5 ns | 203.3 ns | 207.4 ns | 0.77 | 0.08 |
0.0250 | 264 B | 1.00 |
| | | | | | | | | | | | | | |
| GnuTarEntry_WriteEntry_Async | Job-ZKEGXV | \main\corerun.exe | 376.9
ns | 12.04 ns | 35.49 ns | 382.4 ns | 287.3 ns | 438.2 ns | 1.01 | 0.14
| 0.0247 | 264 B | 1.00 |
| GnuTarEntry_WriteEntry_Async | Job-BWJLCP | \opt-write\corerun.exe |
305.5 ns | 2.11 ns | 1.97 ns | 305.8 ns | 302.6 ns | 309.1 ns | 0.82 |
0.08 | 0.0252 | 264 B | 1.00 |


</details>

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-10-21 15:38:42+00:00,Radek Zikmund,1,fa6bf38e6ece5890ed22dad8976e7a7942abb0d5,"Add compression magic number detection to System.Formats.Tar with helpful error messages (#119996)

This PR improves error messages when users attempt to read compressed
TAR archives. When TAR header parsing fails due to an invalid checksum
field, the code now checks if the file might be a compressed archive
(GZIP, BZIP2, XZ, ZIP, ZLIB, 7-Zip, or Zstandard) by examining
compression magic numbers. If a compression format is detected, it
throws a clear, localized error message indicating the specific
compression format detected (e.g., ""The file appears to be a GZIP
archive. TAR format expected."").

Fixes #89056

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",9,137,4,"check checksum when reading tar archives (issue_ref)fixes issue_ref.tarreader now throws when encountering checksum failures.this pr also vectorizes checksum calculation already present on thewrite path of the tarheader, which seems to speed-up some benchmarks<details><summary>benchmark data</summary>| method | job | toolchain | mean | error | stddev | median | min | max| ratio | ratiosd | gen0 | allocated | alloc ratio ||--------------------------------- |----------- |-----------------------|-----------:|----------:|----------:|-----------:|-----------:|-----------:|------:|--------:|-------:|----------:|------------:|| createfromdirectory_path | job-zkegxv | \main\corerun.exe | 1,407.4 μs| 52.51 μs | 148.10 μs | 1,403.5 μs | 1,132.3 μs | 1,824.4 μs | 1.01 |0.15 | - | 8.21 kb | 1.00 || createfromdirectory_path | job-bwjlcp | \opt-write\corerun.exe |1,433.3 μs | 28.66 μs | 82.23 μs | 1,431.0 μs | 1,252.3 μs | 1,605.6 μs| 1.03 | 0.12 | - | 8.21 kb | 1.00 || | | | | | | | | | | | | | || createfromdirectory_path_async | job-zkegxv | \main\corerun.exe |1,646.2 μs | 32.42 μs | 71.16 μs | 1,644.6 μs | 1,529.1 μs | 1,854.2 μs| 1.00 | 0.06 | - | 11.27 kb | 1.00 || createfromdirectory_path_async | job-bwjlcp | \opt-write\corerun.exe |1,685.2 μs | 33.63 μs | 77.27 μs | 1,684.7 μs | 1,542.7 μs | 1,906.9 μs| 1.03 | 0.06 | - | 11.27 kb | 1.00 || | | | | | | | | | | | | | || extracttodirectory_path | job-zkegxv | \main\corerun.exe | 1,739.3 μs| 34.04 μs | 48.82 μs | 1,747.7 μs | 1,611.4 μs | 1,819.7 μs | 1.00 |0.04 | - | 8.64 kb | 1.00 || extracttodirectory_path | job-bwjlcp | \opt-write\corerun.exe |1,746.2 μs | 34.37 μs | 79.66 μs | 1,743.1 μs | 1,593.1 μs | 1,916.6 μs| 1.00 | 0.05 | - | 8.63 kb | 1.00 || | | | | | | | | | | | | | || extracttodirectory_path_async | job-zkegxv | \main\corerun.exe |1,768.3 μs | 34.78 μs | 67.02 μs | 1,773.2 μs | 1,641.4 μs | 1,899.2 μs| 1.00 | 0.05 | - | 10.42 kb | 1.00 || extracttodirectory_path_async | job-bwjlcp | \opt-write\corerun.exe |1,760.9 μs | 34.99 μs | 55.50 μs | 1,765.6 μs | 1,667.1 μs | 1,860.3 μs| 1.00 | 0.05 | - | 10.42 kb | 1.00 || | | | | | | | | | | | | | || createfromdirectory_stream | job-zkegxv | \main\corerun.exe | 767.1 μs| 14.97 μs | 14.00 μs | 770.6 μs | 739.9 μs | 788.5 μs | 1.00 | 0.03 | -| 11.51 kb | 1.00 || createfromdirectory_stream | job-bwjlcp | \opt-write\corerun.exe |768.2 μs | 7.48 μs | 7.00 μs | 769.7 μs | 755.2 μs | 779.3 μs | 1.00 |0.02 | - | 11.5 kb | 1.00 || | | | | | | | | | | | | | || createfromdirectory_stream_async | job-zkegxv | \main\corerun.exe |838.3 μs | 12.84 μs | 12.01 μs | 837.7 μs | 816.8 μs | 858.2 μs | 1.00 |0.02 | 1.5244 | 13.58 kb | 1.00 || createfromdirectory_stream_async | job-bwjlcp | \opt-write\corerun.exe| 842.9 μs | 15.01 μs | 13.30 μs | 842.3 μs | 822.4 μs | 870.7 μs | 1.01| 0.02 | - | 13.57 kb | 1.00 || | | | | | | | | | | | | | || extracttodirectory_stream | job-zkegxv | \main\corerun.exe | 1,708.4μs | 33.93 μs | 71.58 μs | 1,689.1 μs | 1,575.4 μs | 1,860.3 μs | 1.00 |0.06 | - | 8.49 kb | 1.00 || extracttodirectory_stream | job-bwjlcp | \opt-write\corerun.exe |1,693.4 μs | 33.82 μs | 72.81 μs | 1,677.4 μs | 1,561.6 μs | 1,830.4 μs| 0.99 | 0.06 | - | 8.49 kb | 1.00 || | | | | | | | | | | | | | || extracttodirectory_stream_async | job-zkegxv | \main\corerun.exe |1,746.8 μs | 34.50 μs | 62.21 μs | 1,749.3 μs | 1,614.3 μs | 1,899.9 μs| 1.00 | 0.05 | - | 10.15 kb | 1.00 || extracttodirectory_stream_async | job-bwjlcp | \opt-write\corerun.exe| 1,743.3 μs | 34.26 μs | 58.17 μs | 1,740.4 μs | 1,647.7 μs | 1,856.9μs | 1.00 | 0.05 | - | 10.17 kb | 1.00 || | | | | | | | | | | | | | || v7tarentry_writeentry | job-zkegxv | \main\corerun.exe | 247.6 ns |8.55 ns | 25.21 ns | 251.0 ns | 189.1 ns | 286.9 ns | 1.01 | 0.15 |0.0249 | 264 b | 1.00 || v7tarentry_writeentry | job-bwjlcp | \opt-write\corerun.exe | 248.3 ns| 12.10 ns | 35.69 ns | 254.4 ns | 177.8 ns | 335.8 ns | 1.01 | 0.18 |0.0250 | 264 b | 1.00 || | | | | | | | | | | | | | || v7tarentry_writeentry_async | job-zkegxv | \main\corerun.exe | 344.4ns | 11.38 ns | 33.56 ns | 353.6 ns | 259.9 ns | 397.4 ns | 1.01 | 0.15| 0.0249 | 264 b | 1.00 || v7tarentry_writeentry_async | job-bwjlcp | \opt-write\corerun.exe |270.7 ns | 2.23 ns | 2.09 ns | 270.1 ns | 266.2 ns | 274.6 ns | 0.79 |0.08 | 0.0248 | 264 b | 1.00 || | | | | | | | | | | | | | || ustartarentry_writeentry | job-zkegxv | \main\corerun.exe | 258.6 ns |8.21 ns | 24.20 ns | 263.6 ns | 186.6 ns | 291.5 ns | 1.01 | 0.14 |0.0251 | 264 b | 1.00 || ustartarentry_writeentry | job-bwjlcp | \opt-write\corerun.exe | 192.6ns | 1.95 ns | 1.82 ns | 192.8 ns | 190.3 ns | 195.7 ns | 0.75 | 0.08 |0.0250 | 264 b | 1.00 || | | | | | | | | | | | | | || ustartarentry_writeentry_async | job-zkegxv | \main\corerun.exe |364.1 ns | 10.49 ns | 30.92 ns | 369.7 ns | 276.3 ns | 413.6 ns | 1.01 |0.13 | 0.0248 | 264 b | 1.00 || ustartarentry_writeentry_async | job-bwjlcp | \opt-write\corerun.exe |286.0 ns | 2.36 ns | 2.21 ns | 285.8 ns | 282.8 ns | 289.7 ns | 0.79 |0.08 | 0.0252 | 264 b | 1.00 || | | | | | | | | | | | | | || paxtarentry_writeentry | job-zkegxv | \main\corerun.exe | 1,565.0 ns |51.03 ns | 150.48 ns | 1,592.7 ns | 1,204.0 ns | 1,800.2 ns | 1.01 |0.14 | 0.1873 | 1983 b | 1.00 || paxtarentry_writeentry | job-bwjlcp | \opt-write\corerun.exe | 1,244.5ns | 3.69 ns | 3.08 ns | 1,245.0 ns | 1,239.4 ns | 1,249.5 ns | 0.80 |0.08 | 0.1892 | 1983 b | 1.00 || | | | | | | | | | | | | | || paxtarentry_writeentry_async | job-zkegxv | \main\corerun.exe |1,825.4 ns | 56.38 ns | 166.24 ns | 1,843.4 ns | 1,397.5 ns | 2,107.6 ns| 1.01 | 0.13 | 0.1881 | 1983 b | 1.00 || paxtarentry_writeentry_async | job-bwjlcp | \opt-write\corerun.exe |1,458.5 ns | 21.53 ns | 20.14 ns | 1,456.9 ns | 1,412.5 ns | 1,492.9 ns| 0.81 | 0.08 | 0.1879 | 1983 b | 1.00 || | | | | | | | | | | | | | || gnutarentry_writeentry | job-zkegxv | \main\corerun.exe | 271.8 ns |8.80 ns | 25.95 ns | 273.5 ns | 199.3 ns | 306.7 ns | 1.01 | 0.14 |0.0248 | 264 b | 1.00 || gnutarentry_writeentry | job-bwjlcp | \opt-write\corerun.exe | 206.2ns | 1.16 ns | 1.03 ns | 206.5 ns | 203.3 ns | 207.4 ns | 0.77 | 0.08 |0.0250 | 264 b | 1.00 || | | | | | | | | | | | | | || gnutarentry_writeentry_async | job-zkegxv | \main\corerun.exe | 376.9ns | 12.04 ns | 35.49 ns | 382.4 ns | 287.3 ns | 438.2 ns | 1.01 | 0.14| 0.0247 | 264 b | 1.00 || gnutarentry_writeentry_async | job-bwjlcp | \opt-write\corerun.exe |305.5 ns | 2.11 ns | 1.97 ns | 305.8 ns | 302.6 ns | 309.1 ns | 0.82 |0.08 | 0.0252 | 264 b | 1.00 |</details>---------"
dotnet/runtime,11b1520c3b2a9745c75368179b70c75f933698f5,"Fix regex code generation for lookarounds and conditionals with lazy loops (#120884)


---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>
Co-authored-by: Stephen Toub <stoub@microsoft.com>
Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-10-21 15:59:08+00:00,Copilot,1,8dc0941a2a6cab41b56d48111b53aca2e9cf2847,"Add regression tests for captures in positive lookbehind assertions (#120983)

Closes #117605

## Summary

This PR adds comprehensive regression tests to verify that captures made
within positive lookbehind assertions are preserved correctly across all
regex engines (Interpreter, Compiled, and SourceGenerated).

## Background

Issue #117605 reported that in Compiled mode, the .NET regex engine was
incorrectly removing captures made by capturing groups within positive
lookbehind assertions, while the Interpreted mode preserved them
correctly. For example:

```csharp
string pattern = ""(?<=(abc)+?123)a"";
string input = ""abcabc123a"";

var compiled = new Regex(pattern, RegexOptions.Compiled);
var interpreted = new Regex(pattern, RegexOptions.None);

var matchCompiled = compiled.Match(input);
var matchInterpreted = interpreted.Match(input);

// Expected: Both should have 1 capture in Group[1]
// Bug: Compiled showed 0 captures, Interpreted showed 1 capture
```

## Changes

Upon investigation, I found that **the issue has already been fixed** in
the current codebase. Both Compiled and Interpreted modes now produce
identical results for all test cases mentioned in the issue.

However, the existing tests in `Match_MemberData_Cases` only verified
match success and matched values, not the actual capture counts and
values. This PR adds comprehensive tests to `Match_Advanced_TestData`
that specifically verify:

- Capture counts match across all engines
- Capture values, indices, and lengths are correct
- Various quantifier patterns work correctly (`+?`, `{2,}?`, etc.)
- Multiple capturing groups in lookbehinds are handled properly

## Tests Added

1. **Main issue case**: `(?<=(abc)+?123)a` - Verifies lazy quantifier in
lookbehind
2. **Multiple captures**: `(?<=(abc){2,}?123)a` - Verifies bounded
quantifier with 2 captures
3. **Simple lookbehind**: `(?<=(abc)+?)a` - Verifies basic lazy
quantifier behavior
4. **Multiple groups**: `(?<=(?'1'abc)+?(?'2')123)a` - Verifies multiple
named groups in lookbehind

All tests properly handle the NonBacktracking engine (which doesn't
support lookbehinds) and run against all other available engines.

## Test Results

All 30,335 regex tests pass successfully with no regressions.

<!-- START COPILOT CODING AGENT SUFFIX -->



<details>

<summary>Original prompt</summary>

> 
> ----
> 
> *This section details on the original issue you should resolve*
> 
> <issue_title>Compiled regex incorrectly removes the captures which
captured in positive lookbehind assertions</issue_title>
> <issue_description>### Description
> 
> I saw u added a test `yield return (@""(?<=(abc)+?123)"", ""abcabc123"",
RegexOptions.None, 0, 9, true, """");` on line 135 in [file
Regex.Match.Tests.cs](https://github.com/dotnet/runtime/pull/117629/files#diff-2bdc6a6839e8ce7675737db0067c7cf288d190e0af1559feed81d5be92c9b216).
> Based on this, I found a new bug:
> In Compiled mode, when leaving positive lookbehind assertions, the
.NET regex engine will remove all the captures which captured by the
last direct group construction(the last direct child node).
> 
> 
> --------------------------------
> By the way, I found that when leaving negative assertions, the .NET
regex engine would not delete captures which captured in the assertion
on .NET8, but this bug fixed on .NET9.
> For example:
> ```c#
> using System;
> using System.Text.RegularExpressions;
> 
> Console.WriteLine(new
Regex(""(?<!x())a"",RegexOptions.Compiled).Match(""a"").Groups[1].Captures.Count);
> Console.WriteLine(new
Regex(""(?!()x)a"",RegexOptions.Compiled).Match(""a"").Groups[1].Captures.Count);
> ```
> Output on .NET8:
> ```
> 1
> 1
> ```
> Maybe they are related?
> 
> ### Reproduction Steps
> 
> ```c#
> using System;
> using System.Text.RegularExpressions;
> 
> string input = ""abcabc123a"";
> string pattern=""(?<=(abc)+?123)a"";
> //pattern=""(?'1')(?<=(?'1'abc)+?(?#<=just delete the left
capture)(?'1'abc)+?123)a"";
> //pattern=""(?'1')(?<=(?'1'abc)+?(?'2')123)a"";//the capture of group#1
was removed, but the capture of group#2 wasn't
> //pattern=""(?<=(abc){2,}?123)a"";//two captures of group#1 which
captured in the positive lookbehind assertions(?<=) are both deleted
> 
> //pattern=""(?<=(abc){2}?123)a"";//not deleted
> //pattern=@""(?<=\1?(abc){2,}?123)a"";//not deleted
> //pattern=""(?<=(?(1))(abc){2,}?123)a"";//not deleted
> //pattern=""(?<=(?'-1')?(abc){2,}?123)a"";//not deleted
> 
> //pattern=""1(?=x(abc)+?)"";input=""1xabc"";//not deleted in positinve
lookahead assertions
> //pattern=""1(?=(abc)+?x)"";input=""1abcx"";//not deleted in positinve
lookahead assertions
> 
> try
> {
> 	Console.WriteLine(""----------Compiled----------"");
> Match matchCompiled = new Regex(pattern,
RegexOptions.Compiled).Match(input);
> 	Console.WriteLine(matchCompiled.Value);
> 	Console.WriteLine(matchCompiled.Groups[1].Captures.Count);
> 	Console.WriteLine(""Groups#1 Captures："");
> 	foreach(Capture c in matchCompiled.Groups[1].Captures)
> 		Console.WriteLine($""{c.Value}，{c.Index}，{c.Length}"");
> 	
> 	Console.WriteLine(""----------Interpreted----------"");
> Match Interpreted= new Regex(pattern, RegexOptions.None).Match(input);
> 	Console.WriteLine(Interpreted.Value);
> 	Console.WriteLine(Interpreted.Groups[1].Captures.Count);
> 	Console.WriteLine(""Groups#1 Captures："");
> 	foreach(Capture c in Interpreted.Groups[1].Captures)
> 		Console.WriteLine($""{c.Value}，{c.Index}，{c.Length}"");
> 	
> 	Console.WriteLine(""----------result comparion----------"");
> Console.WriteLine($""Result
equal：{matchCompiled.Groups[1].Captures.Count ==
Interpreted.Groups[1].Captures.Count}"");
> }
> catch(Exception ex)
> {
> 	Console.WriteLine(ex.Message);
> }
> ```
> 
> ### Expected behavior
> 
> Output:
> ```
> ----------Compiled----------
> a
> 1
> Groups#1 Captures：
> abc，3，3
> ----------Interpreted----------
> a
> 1
> Groups#1 Captures：
> abc，3，3
> ----------result comparion----------
> Result equal：True
> ```
> 
> ### Actual behavior
> 
> Output:
> ```
> ----------Compiled----------
> a
> 0
> Groups#1 Captures：
> ----------Interpreted----------
> a
> 1
> Groups#1 Captures：
> abc，3，3
> ----------result comparion----------
> Result equal：False
> ```
> 
> ### Regression?
> 
> _No response_
> 
> ### Known Workarounds
> 
> _No response_
> 
> ### Configuration
> 
> _No response_
> 
> ### Other information
> 
> _No response_</issue_description>
> 
> <agent_instructions>Please check whether this issue still repros. If
it does, please fix it and add a test. If it doesn't, please just ensure
there's one or more tests covering the cited
issues.</agent_instructions>
> 
> ## Comments on the Issue (you are @copilot in this section)
> 
> <comments>
> <comment_new><author>@stephentoub</author><body>
> > Did it fixed by https://github.com/dotnet/runtime/pull/120856 yet?
> 
> No, that issue is unrelated.
> 
> That label issue still exists in the source generator. It's adding
braces in a way that's preventing the goto from seeing the target label,
which exists, just not in scope. I'd need to debug through to see why
the braces are being added.</body></comment_new>
> </comments>
> 


</details>

Fixes dotnet/runtime#117651

<!-- START COPILOT CODING AGENT TIPS -->
---

💡 You can make Copilot smarter by setting up custom instructions,
customizing its development environment and configuring Model Context
Protocol (MCP) servers. Learn more [Copilot coding agent
tips](https://gh.io/copilot-coding-agent-tips) in the docs.

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>",3,28,60,fix regex code generation for lookarounds and conditionals with lazy loops (issue_ref)---------
dotnet/runtime,9d68bce7910772f2d0876cf794e458f1bf47d9be,"[main] Source code updates from dotnet/dotnet (#120932)

> [!NOTE]
> This is a codeflow update. It may contain both source code changes
from [the VMR](https://github.com/dotnet/dotnet) as well as dependency
updates. Learn more
[here](https://github.com/dotnet/dotnet/tree/main/docs/Codeflow-PRs.md).

This pull request brings the following source code changes

[marker]: <> (Begin:f7901f87-9f24-40d6-9bc1-564863937237)

## From https://github.com/dotnet/dotnet
- **Subscription**:
[f7901f87-9f24-40d6-9bc1-564863937237](https://maestro.dot.net/subscriptions?search=f7901f87-9f24-40d6-9bc1-564863937237)
- **Build**:
[20251020.4](https://dev.azure.com/dnceng/internal/_build/results?buildId=2820260)
([287856](https://maestro.dot.net/channel/8298/github:dotnet:dotnet/build/287856))
- **Date Produced**: October 20, 2025 7:19:17 PM UTC
- **Commit**:
[1bdc5cdcf4cf408e00aa3c60f58520083bf2474f](https://github.com/dotnet/dotnet/commit/1bdc5cdcf4cf408e00aa3c60f58520083bf2474f)
- **Commit Diff**:
[d83adcf...1bdc5cd](https://github.com/dotnet/dotnet/compare/d83adcf8c5e53bf0efddf55db66e2b5a04f3d8de...1bdc5cdcf4cf408e00aa3c60f58520083bf2474f)
- **Branch**: [main](https://github.com/dotnet/dotnet/tree/main)

**Updated Dependencies**
- From [5.3.0-1.25511.101 to 5.3.0-1.25520.104][1]
  - Microsoft.CodeAnalysis
  - Microsoft.CodeAnalysis.Analyzers
  - Microsoft.CodeAnalysis.CSharp
  - Microsoft.Net.Compilers.Toolset
- From [10.0.100-rc.2.25511.101 to 10.0.100-rc.2.25520.104][1]
  - Microsoft.CodeAnalysis.NetAnalyzers
  - Microsoft.DotNet.ApiCompat.Task
- Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport
- From [11.0.0-beta.25511.101 to 11.0.0-beta.25520.104][1]
  - Microsoft.DotNet.Arcade.Sdk
  - Microsoft.DotNet.Build.Tasks.Archives
  - Microsoft.DotNet.Build.Tasks.Feed
  - Microsoft.DotNet.Build.Tasks.Installers
  - Microsoft.DotNet.Build.Tasks.Packaging
  - Microsoft.DotNet.Build.Tasks.TargetFramework
  - Microsoft.DotNet.Build.Tasks.Templating
  - Microsoft.DotNet.Build.Tasks.Workloads
  - Microsoft.DotNet.CodeAnalysis
  - Microsoft.DotNet.GenAPI
  - Microsoft.DotNet.GenFacades
  - Microsoft.DotNet.Helix.Sdk
  - Microsoft.DotNet.PackageTesting
  - Microsoft.DotNet.RemoteExecutor
  - Microsoft.DotNet.SharedFramework.Sdk
  - Microsoft.DotNet.XliffTasks
  - Microsoft.DotNet.XUnitExtensions
- From [0.11.5-alpha.25511.101 to 0.11.5-alpha.25520.104][1]
  - Microsoft.DotNet.Cecil
- From [2.9.3-beta.25511.101 to 2.9.3-beta.25520.104][1]
  - Microsoft.DotNet.XUnitAssert
  - Microsoft.DotNet.XUnitConsoleRunner
- From [10.0.0-rc.1.25511.101 to 10.0.0-rc.1.25520.104][1]
  - Microsoft.NET.Sdk.IL
  - Microsoft.NETCore.App.Ref
  - Microsoft.NETCore.ILAsm
  - runtime.native.System.IO.Ports
  - System.Reflection.Metadata
  - System.Reflection.MetadataLoadContext
  - System.Text.Json
- From [7.0.0-preview.1.1201 to 7.0.0-preview.1.2104][1]
  - NuGet.Frameworks
  - NuGet.Packaging
  - NuGet.ProjectModel
  - NuGet.Versioning
- From [2.0.0-rc.1.25511.101 to 2.0.0-rc.1.25520.104][1]
  - System.CommandLine
- From [10.0.0-prerelease.25475.1 to
10.0.0-prerelease.25506.2](https://github.com/dotnet/dotnet/compare/d9aba438ca...5b5722171c)
  - Microsoft.DotNet.XHarness.CLI
  - Microsoft.DotNet.XHarness.TestRunners.Common
  - Microsoft.DotNet.XHarness.TestRunners.Xunit
- From [19.1.0-alpha.1.25466.1 to
19.1.0-alpha.1.25513.1](https://github.com/dotnet/dotnet/compare/c3ae00e5d7...816523df23)
  - runtime.linux-arm64.Microsoft.NETCore.Runtime.JIT.Tools
  - runtime.linux-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang
  - runtime.linux-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk
  - runtime.linux-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools
  - runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.JIT.Tools
- runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang
  - runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk
  - runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools
  - runtime.linux-musl-x64.Microsoft.NETCore.Runtime.JIT.Tools
  - runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang
  - runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk
  - runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools
  - runtime.linux-x64.Microsoft.NETCore.Runtime.JIT.Tools
  - runtime.linux-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang
  - runtime.linux-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk
  - runtime.linux-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools
  - runtime.osx-arm64.Microsoft.NETCore.Runtime.JIT.Tools
  - runtime.osx-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang
  - runtime.osx-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk
  - runtime.osx-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools
  - runtime.osx-x64.Microsoft.NETCore.Runtime.JIT.Tools
  - runtime.osx-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang
  - runtime.osx-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk
  - runtime.osx-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools
  - runtime.win-arm64.Microsoft.NETCore.Runtime.JIT.Tools
  - runtime.win-x64.Microsoft.NETCore.Runtime.JIT.Tools
  - runtime.win-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang
  - runtime.win-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk
  - runtime.win-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools

[marker]: <> (End:f7901f87-9f24-40d6-9bc1-564863937237)

[1]: https://github.com/dotnet/dotnet/compare/d83adcf8c5...1bdc5cdcf4
[marker]: <> (Start:Footer:CodeFlow PR)

## Associated changes in source repos
-
https://github.com/dotnet/aspnetcore/compare/569fc4cb6a48d6c8a2b9c31cb5bb5cfbe67c8599...cf40577071ca80f7396e702a75212ed0f7ff8f54
-
https://github.com/dotnet/diagnostics/compare/f40e210b5da69e3c7585917137322cac01f0dffc...297a926f29a461b9015f401f7e9b98edfa09b922
-
https://github.com/dotnet/efcore/compare/89b2687e54474b8010a48b47d4e32bb571d358c5...efc6ddc83f6e710c4f516dfb787f23e395d90909
-
https://github.com/dotnet/fsharp/compare/601a68970ab7c076ead06737657dc3a7c68313a3...6a5057737534a1a34ab9a747811df9ea5a45ef0e
-
https://github.com/dotnet/msbuild/compare/e0ef001649e4948f10148dbd1e2d30db401054f1...5e273ccd45ba73d9db9b34fceaf9a110412e64e8
-
https://github.com/dotnet/razor/compare/a6db5baf751cddda4cf43001fa50d967bb910069...c87ceed94c0485806e25e7b31275a3944321f30f
-
https://github.com/dotnet/sdk/compare/34ffffa2441195767d501c761d04ec78dbd12f74...da83df940bb8270e04103f9d5a43ce6d50e6b31d
-
https://github.com/dotnet/source-build-reference-packages/compare/e6ae81a48df0569bea8f2e5d67a37c768904e33f...0eed3a94644603ef1c0095bc3f1bff525fff876e
-
https://github.com/dotnet/symreader/compare/26c6c313a35f020dc9fa8c7270a012bcd75fc81b...ee968d4a1bf717f4bba3a4ffc3f93b5c9870b117
-
https://github.com/dotnet/templating/compare/de3a6beb89b62577a4d61d8c0c056469d4b6202f...3077da622dcaa12b46c9946e53b509ea3b352b47
-
https://github.com/dotnet/windowsdesktop/compare/95ab55fea8097df56df2372de30cf306ba75c0fc...9f2ae28ea4f111e6a336682484e5aa412e114f3c
-
https://github.com/dotnet/winforms/compare/31e9c898c35be45fad6d8a408349a85dd4d40cb1...e53fd3599f4d1e17f3ebc1f3ab9a0dad05805422

[marker]: <> (End:Footer:CodeFlow PR)

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Alexander Köplinger <alex.koeplinger@outlook.com>",2025-10-21 16:19:00+00:00,dotnet-maestro[bot],0,,,61,328,270,"[main] source code updates from dotnet/dotnet (issue_ref)> [!note]> this is a codeflow update. it may contain both source code changesfrom [the vmr]( as well as dependencyupdates. learn more[here](this pull request brings the following source code changes[marker]: <> (begin:f7901f87-9f24-40d6-9bc1-564863937237)## from - **subscription**:[f7901f87-9f24-40d6-9bc1-564863937237](- **build**:[20251020.4](([287856](- **date produced**: october 20, 2025 7:19:17 pm utc- **commit**:[1bdc5cdcf4cf408e00aa3c60f58520083bf2474f](- **commit diff**:[d83adcf...1bdc5cd](- **branch**: [main](**updated dependencies**- from [5.3.0-1.25511.101 to 5.3.0-1.25520.104][1] - microsoft.codeanalysis - microsoft.codeanalysis.analyzers - microsoft.codeanalysis.csharp - microsoft.net.compilers.toolset- from [10.0.100-rc.2.25511.101 to 10.0.100-rc.2.25520.104][1] - microsoft.codeanalysis.netanalyzers - microsoft.dotnet.apicompat.task- microsoft.net.workload.emscripten.current.manifest-10.0.100.transport- from [11.0.0-beta.25511.101 to 11.0.0-beta.25520.104][1] - microsoft.dotnet.arcade.sdk - microsoft.dotnet.build.tasks.archives - microsoft.dotnet.build.tasks.feed - microsoft.dotnet.build.tasks.installers - microsoft.dotnet.build.tasks.packaging - microsoft.dotnet.build.tasks.targetframework - microsoft.dotnet.build.tasks.templating - microsoft.dotnet.build.tasks.workloads - microsoft.dotnet.codeanalysis - microsoft.dotnet.genapi - microsoft.dotnet.genfacades - microsoft.dotnet.helix.sdk - microsoft.dotnet.packagetesting - microsoft.dotnet.remoteexecutor - microsoft.dotnet.sharedframework.sdk - microsoft.dotnet.xlifftasks - microsoft.dotnet.xunitextensions- from [0.11.5-alpha.25511.101 to 0.11.5-alpha.25520.104][1] - microsoft.dotnet.cecil- from [2.9.3-beta.25511.101 to 2.9.3-beta.25520.104][1] - microsoft.dotnet.xunitassert - microsoft.dotnet.xunitconsolerunner- from [10.0.0-rc.1.25511.101 to 10.0.0-rc.1.25520.104][1] - microsoft.net.sdk.il - microsoft.netcore.app.ref - microsoft.netcore.ilasm - runtime.native.system.io.ports - system.reflection.metadata - system.reflection.metadataloadcontext - system.text.json- from [7.0.0-preview.1.1201 to 7.0.0-preview.1.2104][1] - nuget.frameworks - nuget.packaging - nuget.projectmodel - nuget.versioning- from [2.0.0-rc.1.25511.101 to 2.0.0-rc.1.25520.104][1] - system.commandline- from [10.0.0-prerelease.25475.1 to10.0.0-prerelease.25506.2]( - microsoft.dotnet.xharness.cli - microsoft.dotnet.xharness.testrunners.common - microsoft.dotnet.xharness.testrunners.xunit- from [19.1.0-alpha.1.25466.1 to19.1.0-alpha.1.25513.1]( - runtime.linux-arm64.microsoft.netcore.runtime.jit.tools - runtime.linux-arm64.microsoft.netcore.runtime.mono.llvm.libclang - runtime.linux-arm64.microsoft.netcore.runtime.mono.llvm.sdk - runtime.linux-arm64.microsoft.netcore.runtime.mono.llvm.tools - runtime.linux-musl-arm64.microsoft.netcore.runtime.jit.tools- runtime.linux-musl-arm64.microsoft.netcore.runtime.mono.llvm.libclang - runtime.linux-musl-arm64.microsoft.netcore.runtime.mono.llvm.sdk - runtime.linux-musl-arm64.microsoft.netcore.runtime.mono.llvm.tools - runtime.linux-musl-x64.microsoft.netcore.runtime.jit.tools - runtime.linux-musl-x64.microsoft.netcore.runtime.mono.llvm.libclang - runtime.linux-musl-x64.microsoft.netcore.runtime.mono.llvm.sdk - runtime.linux-musl-x64.microsoft.netcore.runtime.mono.llvm.tools - runtime.linux-x64.microsoft.netcore.runtime.jit.tools - runtime.linux-x64.microsoft.netcore.runtime.mono.llvm.libclang - runtime.linux-x64.microsoft.netcore.runtime.mono.llvm.sdk - runtime.linux-x64.microsoft.netcore.runtime.mono.llvm.tools - runtime.osx-arm64.microsoft.netcore.runtime.jit.tools - runtime.osx-arm64.microsoft.netcore.runtime.mono.llvm.libclang - runtime.osx-arm64.microsoft.netcore.runtime.mono.llvm.sdk - runtime.osx-arm64.microsoft.netcore.runtime.mono.llvm.tools - runtime.osx-x64.microsoft.netcore.runtime.jit.tools - runtime.osx-x64.microsoft.netcore.runtime.mono.llvm.libclang - runtime.osx-x64.microsoft.netcore.runtime.mono.llvm.sdk - runtime.osx-x64.microsoft.netcore.runtime.mono.llvm.tools - runtime.win-arm64.microsoft.netcore.runtime.jit.tools - runtime.win-x64.microsoft.netcore.runtime.jit.tools - runtime.win-x64.microsoft.netcore.runtime.mono.llvm.libclang - runtime.win-x64.microsoft.netcore.runtime.mono.llvm.sdk - runtime.win-x64.microsoft.netcore.runtime.mono.llvm.tools[marker]: <> (end:f7901f87-9f24-40d6-9bc1-564863937237)[1]: [marker]: <> (start:footer:codeflow pr)## associated changes in source repos------------[marker]: <> (end:footer:codeflow pr)---------"
dotnet/runtime,2808602c77fa57e155c5dcfd3c77b50b0f82428d,"Make DeflateStream write out headers and footers on empty streams. (#118570)

Fixes #66449.

Ensure that DeflateStream writes necessary headers and footers even for
empty input streams.

To preserve ZipArchive's functionality of storing 0-length bytes as
Stored, we will now instantiate compression streams on the first write
to the ZipArchiveEntry's stream, that way we avoid writing empty Deflate
envelopes.

---------

Co-authored-by: Eric StJohn <ericstj@microsoft.com>",2025-10-21 17:49:10+00:00,Radek Zikmund,1,2d49a3334f1a4365d532b130408a4baa9bed9716,"Make ZipArchiveEntry.CompressionMethod public (#122045)

This PR exposes the compression method of ZIP archive entries through a
new public `ZipCompressionMethod` enum and a public `CompressionMethod`
property on `ZipArchiveEntry`.

- Only supported compression methods are included.
- Enum values (0, 8, 9) correspond to the compression method values
defined in the ZIP File Format Specification (APPNOTE.TXT section
4.4.5).
- Error handling for unsupported compression methods now uses a single
generic message `SR.UnsupportedCompression` instead of method-specific
messages for BZip2/LZMA.

Fixes #95909",7,201,174,"make deflatestream write out headers and footers on empty streams. (issue_ref)fixes issue_ref.ensure that deflatestream writes necessary headers and footers even forempty input streams.to preserve ziparchive's functionality of storing 0-length bytes asstored, we will now instantiate compression streams on the first writeto the ziparchiveentry's stream, that way we avoid writing empty deflateenvelopes.---------"
dotnet/runtime,6f75c76e2626cc8b354c8e025e314bf177c3c1a1,"Support function pointer types in ``System.Reflection.Emit`` (#119935)

This fixes #111003. The current implementation is a **work in progress**, only **managed** function pointers with no modopts are supported.

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-10-21 19:41:56+00:00,Jonas,1,a42a7031cd53fdc636e6f8fc498bf38e2f84225d,"Support references to unmanaged function pointers in Reflection.Emit (#121128)

This fixes #120909.",3,274,0,"support function pointer types in system.reflection.emit (issue_ref)this fixes issue_ref. the current implementation is a **work in progress**, only **managed** function pointers with no modopts are supported.---------"
dotnet/runtime,336b8004f23fbff34bc022a296acfa802ef941ad,"[wasm][coreclr] Extract call helpers to separate source file (#120944)

And use output of work in progress generator to get more thunks.

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>
Co-authored-by: Aaron R Robinson <arobins@microsoft.com>",2025-10-21 21:35:42+00:00,Radek Doulik,0,,,4,761,254,[wasm][coreclr] extract call helpers to separate source file (issue_ref)and use output of work in progress generator to get more thunks.---------
dotnet/runtime,b9072922e454b770ddbc2ce6e86917c8e1c64003,Remove pkgproj projects that can be easily replaced by .NET SDK pack support (#120853),2025-10-21 21:53:10+00:00,Jeremy Koritzinsky,0,,,18,356,345,remove pkgproj projects that can be easily replaced by .net sdk pack support (issue_ref)
dotnet/runtime,74fb0879d7c68f4ba074ff931d3e3d10f0168adb,"Disable CoreCLR tests crashing merged test suites fully interpreted (#120911)

This change disables all coreclr tests that cause the merged coreclr
test suites to crash and so preventing us from getting any test pass /
fail information from those. This is with running the tests with
InterpMode=3 (fully interpreted)

This was put together on Windows x64 checked build, we may need to add
more for other targets in a separate PR.

The disabled tests comment includes basic info on the failure / crash.

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-10-21 23:40:56+00:00,Jan Vorlicek,0,,,84,182,33,"disable coreclr tests crashing merged test suites fully interpreted (issue_ref)this change disables all coreclr tests that cause the merged coreclrtest suites to crash and so preventing us from getting any test pass /fail information from those. this is with running the tests withinterpmode=3 (fully interpreted)this was put together on windows x64 checked build, we may need to addmore for other targets in a separate pr.the disabled tests comment includes basic info on the failure / crash.---------"
dotnet/runtime,5ec95d4193b4e84eceb2899d19f1f5c79605b383,[clr-interp] Fix Double to ushort conversion (#120960),2025-10-22 01:14:59+00:00,David Wrighton,1,f5736f1de0752e3e453137f76ffa433b1ebad060,"[clr-interp] Fix logic around interpreter stub startup where the CallStubHeader may not be generated due to a race (#120952)

- Instead of generating it at the end of DoPrestub, which does not
reliably finish before other threads may attempt to use the
CallStubHeader, do it on demand just when it is needed
- This reduces total memory allocation, and makes the logic correct by
construction
- In addition the GetInterpThreadContextWithPossiblyMissingThread
function did not correctly setup EH handling regions and such to
accomodate for the possibility that it might need to allocate or do a GC
transition, so I've added passing the transition context into it, and
set it up to use a PrestubFrame to protect the argument registers

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",1,1,1,[clr-interp] fix double to ushort conversion (issue_ref)
dotnet/runtime,f5736f1de0752e3e453137f76ffa433b1ebad060,"[clr-interp] Fix logic around interpreter stub startup where the CallStubHeader may not be generated due to a race (#120952)

- Instead of generating it at the end of DoPrestub, which does not
reliably finish before other threads may attempt to use the
CallStubHeader, do it on demand just when it is needed
- This reduces total memory allocation, and makes the logic correct by
construction
- In addition the GetInterpThreadContextWithPossiblyMissingThread
function did not correctly setup EH handling regions and such to
accomodate for the possibility that it might need to allocate or do a GC
transition, so I've added passing the transition context into it, and
set it up to use a PrestubFrame to protect the argument registers

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-10-22 02:21:37+00:00,David Wrighton,1,39d41387dbb5b23a634bca882202677dcbb9045d,"Fix access violation when reporting fatal errors during startup (#121602)

Fixes #121596",13,180,59,"[clr-interp] fix logic around interpreter stub startup where the callstubheader may not be generated due to a race (issue_ref)- instead of generating it at the end of doprestub, which does notreliably finish before other threads may attempt to use thecallstubheader, do it on demand just when it is needed- this reduces total memory allocation, and makes the logic correct byconstruction- in addition the getinterpthreadcontextwithpossiblymissingthreadfunction did not correctly setup eh handling regions and such toaccomodate for the possibility that it might need to allocate or do a gctransition, so i've added passing the transition context into it, andset it up to use a prestubframe to protect the argument registers---------"
dotnet/runtime,b4161e2ba7013599882e98401755833bd7e9e180,"Expose the cDAC data contract for consumption on WASM. (#120921)

This is the first step in consume the cDAC scenario on WASM.

Removes duplication of the `ContractDescriptor` data structure.
Links together the cdac contracts so include directories flow correctly.
Exports a method during WASM builds so the Node.js APIs can acquire the
address of the data contract.

---------

Co-authored-by: Jeremy Koritzinsky <jkoritzinsky@gmail.com>",2025-10-22 02:39:09+00:00,Aaron R Robinson,0,,,9,59,48,expose the cdac data contract for consumption on wasm. (issue_ref)this is the first step in consume the cdac scenario on wasm.removes duplication of the data structure.links together the cdac contracts so include directories flow correctly.exports a method during wasm builds so the node.js apis can acquire theaddress of the data contract.---------
dotnet/runtime,037b90d574f7a14d9e5f03bf97ba296ada2ff0ab,Suppress CS1591 warnings in ComInterfaceGenerator generated code (#120104),2025-10-22 04:57:04+00:00,Copilot,1,e87fb6bf660000973234982b4cee9017177868e2,"Fix NativeMarshalling attribute override for COM interfaces (#121643)

## Issue Summary

When a COM interface has both [GeneratedComInterface] and [NativeMarshalling(typeof(UniqueComInterfaceMarshaller<IFoo>))], the generator should use the custom marshaller specified in NativeMarshallingAttribute. Previously, it always used the default ComInterfaceMarshaller<T>.

The fix ensures that when NativeMarshallingAttribute is present on a COM interface, it takes precedence over the default marshaller by ensuring the parser order checks NativeMarshallingAttributeParser before ComInterfaceMarshallingInfoProvider.

## Changes Made

MarshallingInfoParser.cs & ComInterfaceMarshallingInfoProvider.cs: Improved implementation by the maintainer to iterate through parsers in order (NativeMarshallingAttributeParser before ComInterfaceMarshallingInfoProvider) rather than iterating through attributes, ensuring NativeMarshallingAttribute is always checked first.

Unit Tests: Added compilation tests to verify the generators handle NativeMarshalling correctly

Behavioral Tests:

IUniqueMarshalling.cs: Created test interface with [NativeMarshalling(typeof(UniqueComInterfaceMarshaller<IUniqueMarshalling>))]
UniqueMarshalling.cs: Simplified native export using StrategyBasedComWrappers and GeneratedComClass, with cached pointer to return same COM object
NativeMarshallingAttributeTests.cs (LibraryImportGenerator.Tests): Tests LibraryImport marshalling - calling method twice returns different managed instances for the same COM object
NativeMarshallingAttributeTests.cs (ComInterfaceGenerator.Tests): Tests COM interface method behavior - methods returning interface type return new managed instances",2,80,1,suppress cs1591 warnings in cominterfacegenerator generated code (issue_ref)
dotnet/runtime,4d74c69ff80a659f6e5d6104def10c12b5b7fdd5,"[wasm][coreclr] Add RhpNewFast allocators (#120896)

Co-authored-by: Jan Kotas <jkotas@microsoft.com>
Co-authored-by: Aaron R Robinson <arobins@microsoft.com>",2025-10-22 09:57:32+00:00,Radek Doulik,0,,,1,93,11,[wasm][coreclr] add rhpnewfast allocators (issue_ref)
dotnet/runtime,c0fbb06fb34600c37f030bb41d1ecb976081da72,"Remove general-testing feed from NuGet.config (#120956)

This PR removes the `general-testing` NuGet package source from the root
NuGet.config file. This feed was previously needed for a prototype
Roslyn compiler for the runtime-async effort, but is no longer required.

### Changes
- Removed the `general-testing` package source entry
- Removed the associated comment explaining its purpose

The remaining package sources (dotnet-public, dotnet-tools, dotnet-eng,
dotnet-libraries, dotnet-libraries-transport, dotnet10,
dotnet10-transport, dotnet11, and dotnet11-transport) are still
configured and functional.

### Validation
- Confirmed the XML is well-formed
- Verified no other files in the repository reference the
general-testing feed

<!-- START COPILOT CODING AGENT SUFFIX -->



<details>

<summary>Original prompt</summary>

> Remove the following line from NuGet.config in the root of the
repository:
> 
> <add key=""general-testing""
value=""https://pkgs.dev.azure.com/dnceng/public/_packaging/general-testing/nuget/v3/index.json""
/>
> 
> This will remove the 'general-testing' package source from the package
sources list. No other package sources should be changed. Commit
message: ""Remove general-testing feed from NuGet.config"".


</details>

*This pull request was created as a result of the following prompt from
Copilot chat.*
> Remove the following line from NuGet.config in the root of the
repository:
> 
> <add key=""general-testing""
value=""https://pkgs.dev.azure.com/dnceng/public/_packaging/general-testing/nuget/v3/index.json""
/>
> 
> This will remove the 'general-testing' package source from the package
sources list. No other package sources should be changed. Commit
message: ""Remove general-testing feed from NuGet.config"".

<!-- START COPILOT CODING AGENT TIPS -->
---

💡 You can make Copilot smarter by setting up custom instructions,
customizing its development environment and configuring Model Context
Protocol (MCP) servers. Learn more [Copilot coding agent
tips](https://gh.io/copilot-coding-agent-tips) in the docs.

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: agocke <515774+agocke@users.noreply.github.com>",2025-10-22 15:26:25+00:00,Copilot,0,,,1,0,2,"remove general-testing feed from nuget.config (issue_ref)this pr removes the nuget package source from the rootnuget.config file. this feed was previously needed for a prototyperoslyn compiler for the runtime-async effort, but is no longer required.### changes- removed the package source entry- removed the associated comment explaining its purposethe remaining package sources (dotnet-public, dotnet-tools, dotnet-eng,dotnet-libraries, dotnet-libraries-transport, dotnet10,dotnet10-transport, dotnet11, and dotnet11-transport) are stillconfigured and functional.### validation- confirmed the xml is well-formed- verified no other files in the repository reference thegeneral-testing feed<!-- start copilot coding agent suffix --><details><summary>original prompt</summary>> remove the following line from nuget.config in the root of therepository:> > <add key=""general-testing""value=""""/>> > this will remove the 'general-testing' package source from the packagesources list. no other package sources should be changed. commitmessage: ""remove general-testing feed from nuget.config"".</details>*this pull request was created as a result of the following prompt fromcopilot chat.*> remove the following line from nuget.config in the root of therepository:> > <add key=""general-testing""value=""""/>> > this will remove the 'general-testing' package source from the packagesources list. no other package sources should be changed. commitmessage: ""remove general-testing feed from nuget.config"".<!-- start copilot coding agent tips -->---💡 you can make copilot smarter by setting up custom instructions,customizing its development environment and configuring model contextprotocol (mcp) servers. learn more [copilot coding agenttips]( in the docs.---------"
dotnet/runtime,3dc26a3e705316577b432fb5286c9c4498d8ea22,"[DAC] properly 'dacize' async variant method sigs (#120946)

* Based on existing `StoredSigMethodDesc::GetStoredMethodSig`",2025-10-22 20:42:54+00:00,Max Charlamb,0,,,1,6,1,[dac] properly 'dacize' async variant method sigs (issue_ref)* based on existing
dotnet/runtime,b7a761ce0299813b03681688ad828fa9099d9102,"[clr-interp] Array allocation exception has incorrect exception (#120981)

- The actual helper throws the right exception (which is
OverflowException)
- Don't add an incorrect check",2025-10-22 22:07:27+00:00,David Wrighton,1,60d14f8d3fb74db52237e9d4dc31c332a23aa3f7,"Fix handling exceptions from native code when interpreted (#121212)

There were two issues. One is that the `SfiNextWorker` was incorrectly
advancing the stack frame iterator in case the interpreter was called
from `CallDescrWorkerInternal` in some cases.
The second was that the call to
`MethodDesc::GetMethodDescOfVirtualizedCode` that is made by the
`InterpExecMethod` can end up running managed code and throw managed
exception. So it needs to have PAL_TRY/PAL_EXCEPT around the invocation,
since the main loop of the interpreter can only catch and process C++
exceptions.

This fixes the
`Loader\classloader\regressions\vsw529206\vsw529206ModuleCctor` test.",1,0,4,[clr-interp] array allocation exception has incorrect exception (issue_ref)- the actual helper throws the right exception (which isoverflowexception)- don't add an incorrect check
dotnet/runtime,b835f0c080769fda15bd96262ca267dc7da2aca5,"[clr-interp] Enhance InterpMode and CI testing (#120955)

- Enhance InterpMode flag to autoimply various other flags like
ReadyToRun=0 EnableHWIntrinsic=0 consistently, so that InterpMode can be
used on its own to control interpretation behavior
- The comments around InterpMode are now accurate as to what they imply
- Enhance CI to allow testing of various interpreter scenarios (The
existing model + InterModes 1, 2, and 3)

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-10-22 22:44:52+00:00,David Wrighton,0,,,10,115,16,"[clr-interp] enhance interpmode and ci testing (issue_ref)- enhance interpmode flag to autoimply various other flags likereadytorun=0 enablehwintrinsic=0 consistently, so that interpmode can beused on its own to control interpretation behavior- the comments around interpmode are now accurate as to what they imply- enhance ci to allow testing of various interpreter scenarios (theexisting model + intermodes 1, 2, and 3)---------"
dotnet/runtime,2c0254d7a8bc894d2927c3c8436e1c2225933152,Make the include directory inclusion the same for both paths. (#120991),2025-10-23 00:27:50+00:00,Aaron R Robinson,0,,,1,4,4,make the include directory inclusion the same for both paths. (issue_ref)
dotnet/runtime,8e20ce40d1834d9a6254a360e1a9e39f3f43e39d,"Revert ""Move hosting tests to XUnit 3"" (#120997)

Reverts dotnet/runtime#120234

This change appears to have broken the bootstrapped community builds.",2025-10-23 02:31:32+00:00,Aaron R Robinson,0,,,62,341,381,"revert ""move hosting tests to xunit 3"" (issue_ref)reverts dotnet/runtimeissue_refthis change appears to have broken the bootstrapped community builds."
dotnet/runtime,8dc0941a2a6cab41b56d48111b53aca2e9cf2847,"Add regression tests for captures in positive lookbehind assertions (#120983)

Closes #117605

## Summary

This PR adds comprehensive regression tests to verify that captures made
within positive lookbehind assertions are preserved correctly across all
regex engines (Interpreter, Compiled, and SourceGenerated).

## Background

Issue #117605 reported that in Compiled mode, the .NET regex engine was
incorrectly removing captures made by capturing groups within positive
lookbehind assertions, while the Interpreted mode preserved them
correctly. For example:

```csharp
string pattern = ""(?<=(abc)+?123)a"";
string input = ""abcabc123a"";

var compiled = new Regex(pattern, RegexOptions.Compiled);
var interpreted = new Regex(pattern, RegexOptions.None);

var matchCompiled = compiled.Match(input);
var matchInterpreted = interpreted.Match(input);

// Expected: Both should have 1 capture in Group[1]
// Bug: Compiled showed 0 captures, Interpreted showed 1 capture
```

## Changes

Upon investigation, I found that **the issue has already been fixed** in
the current codebase. Both Compiled and Interpreted modes now produce
identical results for all test cases mentioned in the issue.

However, the existing tests in `Match_MemberData_Cases` only verified
match success and matched values, not the actual capture counts and
values. This PR adds comprehensive tests to `Match_Advanced_TestData`
that specifically verify:

- Capture counts match across all engines
- Capture values, indices, and lengths are correct
- Various quantifier patterns work correctly (`+?`, `{2,}?`, etc.)
- Multiple capturing groups in lookbehinds are handled properly

## Tests Added

1. **Main issue case**: `(?<=(abc)+?123)a` - Verifies lazy quantifier in
lookbehind
2. **Multiple captures**: `(?<=(abc){2,}?123)a` - Verifies bounded
quantifier with 2 captures
3. **Simple lookbehind**: `(?<=(abc)+?)a` - Verifies basic lazy
quantifier behavior
4. **Multiple groups**: `(?<=(?'1'abc)+?(?'2')123)a` - Verifies multiple
named groups in lookbehind

All tests properly handle the NonBacktracking engine (which doesn't
support lookbehinds) and run against all other available engines.

## Test Results

All 30,335 regex tests pass successfully with no regressions.

<!-- START COPILOT CODING AGENT SUFFIX -->



<details>

<summary>Original prompt</summary>

> 
> ----
> 
> *This section details on the original issue you should resolve*
> 
> <issue_title>Compiled regex incorrectly removes the captures which
captured in positive lookbehind assertions</issue_title>
> <issue_description>### Description
> 
> I saw u added a test `yield return (@""(?<=(abc)+?123)"", ""abcabc123"",
RegexOptions.None, 0, 9, true, """");` on line 135 in [file
Regex.Match.Tests.cs](https://github.com/dotnet/runtime/pull/117629/files#diff-2bdc6a6839e8ce7675737db0067c7cf288d190e0af1559feed81d5be92c9b216).
> Based on this, I found a new bug:
> In Compiled mode, when leaving positive lookbehind assertions, the
.NET regex engine will remove all the captures which captured by the
last direct group construction(the last direct child node).
> 
> 
> --------------------------------
> By the way, I found that when leaving negative assertions, the .NET
regex engine would not delete captures which captured in the assertion
on .NET8, but this bug fixed on .NET9.
> For example:
> ```c#
> using System;
> using System.Text.RegularExpressions;
> 
> Console.WriteLine(new
Regex(""(?<!x())a"",RegexOptions.Compiled).Match(""a"").Groups[1].Captures.Count);
> Console.WriteLine(new
Regex(""(?!()x)a"",RegexOptions.Compiled).Match(""a"").Groups[1].Captures.Count);
> ```
> Output on .NET8:
> ```
> 1
> 1
> ```
> Maybe they are related?
> 
> ### Reproduction Steps
> 
> ```c#
> using System;
> using System.Text.RegularExpressions;
> 
> string input = ""abcabc123a"";
> string pattern=""(?<=(abc)+?123)a"";
> //pattern=""(?'1')(?<=(?'1'abc)+?(?#<=just delete the left
capture)(?'1'abc)+?123)a"";
> //pattern=""(?'1')(?<=(?'1'abc)+?(?'2')123)a"";//the capture of group#1
was removed, but the capture of group#2 wasn't
> //pattern=""(?<=(abc){2,}?123)a"";//two captures of group#1 which
captured in the positive lookbehind assertions(?<=) are both deleted
> 
> //pattern=""(?<=(abc){2}?123)a"";//not deleted
> //pattern=@""(?<=\1?(abc){2,}?123)a"";//not deleted
> //pattern=""(?<=(?(1))(abc){2,}?123)a"";//not deleted
> //pattern=""(?<=(?'-1')?(abc){2,}?123)a"";//not deleted
> 
> //pattern=""1(?=x(abc)+?)"";input=""1xabc"";//not deleted in positinve
lookahead assertions
> //pattern=""1(?=(abc)+?x)"";input=""1abcx"";//not deleted in positinve
lookahead assertions
> 
> try
> {
> 	Console.WriteLine(""----------Compiled----------"");
> Match matchCompiled = new Regex(pattern,
RegexOptions.Compiled).Match(input);
> 	Console.WriteLine(matchCompiled.Value);
> 	Console.WriteLine(matchCompiled.Groups[1].Captures.Count);
> 	Console.WriteLine(""Groups#1 Captures："");
> 	foreach(Capture c in matchCompiled.Groups[1].Captures)
> 		Console.WriteLine($""{c.Value}，{c.Index}，{c.Length}"");
> 	
> 	Console.WriteLine(""----------Interpreted----------"");
> Match Interpreted= new Regex(pattern, RegexOptions.None).Match(input);
> 	Console.WriteLine(Interpreted.Value);
> 	Console.WriteLine(Interpreted.Groups[1].Captures.Count);
> 	Console.WriteLine(""Groups#1 Captures："");
> 	foreach(Capture c in Interpreted.Groups[1].Captures)
> 		Console.WriteLine($""{c.Value}，{c.Index}，{c.Length}"");
> 	
> 	Console.WriteLine(""----------result comparion----------"");
> Console.WriteLine($""Result
equal：{matchCompiled.Groups[1].Captures.Count ==
Interpreted.Groups[1].Captures.Count}"");
> }
> catch(Exception ex)
> {
> 	Console.WriteLine(ex.Message);
> }
> ```
> 
> ### Expected behavior
> 
> Output:
> ```
> ----------Compiled----------
> a
> 1
> Groups#1 Captures：
> abc，3，3
> ----------Interpreted----------
> a
> 1
> Groups#1 Captures：
> abc，3，3
> ----------result comparion----------
> Result equal：True
> ```
> 
> ### Actual behavior
> 
> Output:
> ```
> ----------Compiled----------
> a
> 0
> Groups#1 Captures：
> ----------Interpreted----------
> a
> 1
> Groups#1 Captures：
> abc，3，3
> ----------result comparion----------
> Result equal：False
> ```
> 
> ### Regression?
> 
> _No response_
> 
> ### Known Workarounds
> 
> _No response_
> 
> ### Configuration
> 
> _No response_
> 
> ### Other information
> 
> _No response_</issue_description>
> 
> <agent_instructions>Please check whether this issue still repros. If
it does, please fix it and add a test. If it doesn't, please just ensure
there's one or more tests covering the cited
issues.</agent_instructions>
> 
> ## Comments on the Issue (you are @copilot in this section)
> 
> <comments>
> <comment_new><author>@stephentoub</author><body>
> > Did it fixed by https://github.com/dotnet/runtime/pull/120856 yet?
> 
> No, that issue is unrelated.
> 
> That label issue still exists in the source generator. It's adding
braces in a way that's preventing the goto from seeing the target label,
which exists, just not in scope. I'd need to debug through to see why
the braces are being added.</body></comment_new>
> </comments>
> 


</details>

Fixes dotnet/runtime#117651

<!-- START COPILOT CODING AGENT TIPS -->
---

💡 You can make Copilot smarter by setting up custom instructions,
customizing its development environment and configuring Model Context
Protocol (MCP) servers. Learn more [Copilot coding agent
tips](https://gh.io/copilot-coding-agent-tips) in the docs.

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>",2025-10-23 03:16:05+00:00,Copilot,1,f3c990f1644836bbb892cadcb4e0d9230d01c150,"Optimize regex patterns with both beginning and end anchors for early fail-fast (#120916)

- [x] Analyze the issue and understand the optimization needed
- [x] Locate relevant code files (RegexGenerator.Emitter.cs,
RegexFindOptimizations.cs)
- [x] Understand the current implementation
- [x] Implement the optimization in
EmitTryFindNextPossibleStartingPosition
- [x] Add tests to verify the optimization
- [x] Build and test the changes
- [x] Run CodeQL security checks
- [x] Manually verify the optimization works
- [x] Address feedback: Move computation to emitter to avoid interpreter
overhead
- [x] Add optimization to RegexCompiler.cs for consistency
- [x] Simplify condition checks and remove unnecessary IL labels
- [x] Remove unnecessary braces and improve comment accuracy
- [x] Add comprehensive test variations for edge cases

## Issue Summary
Optimize regex patterns with both leading Beginning anchor (^) and
trailing End anchor (\z) with fixed length. Instead of checking if input
is at least N characters, check if input is exactly N characters AND
position is 0.

## Implementation Details (Updated)
Modified three files:
1. **RegexFindOptimizations.cs**: Reverted changes - no longer computes
TrailingAnchor for leading Beginning anchor
2. **RegexGenerator.Emitter.cs**: Compute trailing anchor and max length
lazily when emitting LeadingAnchor_LeftToRight_Beginning case
3. **RegexCompiler.cs**: Added same optimization to compiled regexes
4. **Test files**: Added comprehensive test cases covering various edge
cases

The optimization only applies when:
- LeadingAnchor == RegexNodeKind.Beginning (^ or \A)
- TrailingAnchor == RegexNodeKind.End (\z, not \Z or $)
- Pattern has fixed length (MinRequiredLength == MaxPossibleLength)

## Changes from Previous Versions
- Moved the trailing anchor and max length computation from
RegexFindOptimizations.cs to the emitters (RegexGenerator.Emitter.cs and
RegexCompiler.cs)
- This avoids adding overhead to the interpreter, as the computation now
only happens in compiled and source-generated code
- Added the optimization to RegexCompiler.cs to keep it in sync with the
source generator
- Simplified condition checks to directly compare ComputeMaxLength()
with MinRequiredLength
- Removed unnecessary success label in RegexCompiler IL emission
- Removed unnecessary braces around the optimization checks
- Improved comment accuracy and wording
- Inlined constant values in IL emission
- Added comprehensive test variations covering edge cases (no starting
anchor, Multiline mode, \Z/$ anchors, content before/after anchors)

## Test Results
✅ All unit tests pass (1,005 tests)  
✅ All functional tests pass (30,391 tests - includes 56 new tests for
edge cases)
✅ No security vulnerabilities detected

## Security Summary
No security vulnerabilities were introduced or discovered.

<!-- START COPILOT CODING AGENT SUFFIX -->



<details>

<summary>Original prompt</summary>

> 
> ----
> 
> *This section details on the original issue you should resolve*
> 
> <issue_title>Earlier fail fast for fixed-length regex patterns with
anchors</issue_title>
> <issue_description><!--This is just a template - feel free to delete
any and all of it and replace as appropriate.-->
> 
> ### Description
> 
> <!--
> * Please share a clear and concise description of the performance
problem.
> * Include minimal steps to reproduce the problem if possible. E.g.:
the smallest possible code snippet; or a small repo to clone, with steps
to run it.
>   -->
> 
> When having a regex pattern which contains both leading+trailing
anchors and the pattern is of fixed length, it seems to me that we might
be missing an opportunity to fail fast earlier.
> 
> Take e.g. the regex pattern `^1234$`.
> Currently the emitted `TryFindNextPossibleStartingPosition` checks
that the input has at least 4 characters to continue.
> ```cs
> if (pos <= inputSpan.Length - 4 && pos == 0)
> ```
> 
> When invoking `IsMatch(""12345"")` on the generated regex, the flow will
be:
> * pass `TryFindNextPossibleStartingPosition` as the input is longer
than 4 characters,
> * enter `TryMatchAtCurrentPosition` and call `.StartsWith(""1234"")`,
> * and first then fail on `5 < slice.Length` because the input was too
long.
> 
> If we tightened the check in `TryFindNextPossibleStartingPosition` to
""exactly 4 characters"", we wouldn't have to enter
`TryMatchAtCurrentPosition`.
> 
> If I understand the code correctly, we can detect this situation in
`EmitTryFindNextPossibleStartingPosition` when:
> * `rm.Tree.FindOptimizations.LeadingAnchor is RegexNodeKind.Beginning`
and
> * `rm.Tree.FindOptimizations.FindMode is
FindNextStartingPositionMode.TrailingAnchor_FixedLength_LeftToRight_End
or
FindNextStartingPositionMode.TrailingAnchor_FixedLength_LeftToRight_EndZ`
> 
> Am I missing something?</issue_description>
> 
> <agent_instructions>If the pattern starts with a begin anchor, ends
with a /z (End) anchor, and has a fixed length (its min length equals
its max length), then TryFindNextPossibleStartingPosition can be
optimized to return true if and only if the current position is 0 and
the length of the input matches the guaranteed match
length.</agent_instructions>
> 
> ## Comments on the Issue (you are @copilot in this section)
> 
> <comments>
> <comment_new><author>@stephentoub</author><body>
> Thanks. There are certainly more special-cases we could optimize for;
it's primarily a question of how common they are and whether it's worth
the extra code to maintain. Looking through
https://github.com/dotnet/runtime-assets/blob/main/src/System.Text.RegularExpressions.TestData/Regex_RealWorldPatterns.json,
there are several hundred occurrences of this pattern, so I'd be ok with
a PR to try to optimize it further.
> 
> That said, keep in mind that `$` does not mean ""exactly at the end"".
It actually means ""at the end or just before an ending \n"", so a length
check of exactly 4 would be wrong.
> 
> For this specific construction, I think the right answer would be to
not emit TryFindNextPossibleStartingPosition at all. You can see in the
source generator code there's already special-cases when Scan is emitted
to control whether or not we emit TryFindNextPossibleStartingPosition or
TryMatchAtCurrentPosition. In this case, I think the right answer would
simply be to just emit TryMatchAtCurrentPosition and have Scan just call
it.</body></comment_new>
> <comment_new><author>@stephentoub</author><body>
> Looking at this again, I take back what I said about not emitting
TryFindNextPossibleStartingPosition; it has the length check, which we
still want, as it quickly rules out any candidates that aren't of the
right length. The only difference I think we might want would be for
that length check to be an exact length check rather than a minimum,
i.e. instead of:
> ```
> if (pos <= inputSpan.Length - 4 && pos == 0)
> ```
> it'd be:
> ```
> if (pos == 0 && inputSpan.Length == 4)
> ```
> But this would only be viable with a /z anchor, not /Z or $, which as
previously noted allow for an optional \n at the end, so the usefulness
of this optimization is significantly lessened.</body></comment_new>
> </comments>
> 


</details>

Fixes dotnet/runtime#118489

<!-- START COPILOT CODING AGENT TIPS -->
---

✨ Let Copilot coding agent [set things up for
you](https://github.com/dotnet/runtime/issues/new?title=✨+Set+up+Copilot+instructions&body=Configure%20instructions%20for%20this%20repository%20as%20documented%20in%20%5BBest%20practices%20for%20Copilot%20coding%20agent%20in%20your%20repository%5D%28https://gh.io/copilot-coding-agent-tips%29%2E%0A%0A%3COnboard%20this%20repo%3E&assignees=copilot)
— coding agent works faster and does higher quality work when set up for
your repo.

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>",1,55,0,"add regression tests for captures in positive lookbehind assertions (issue_ref)closes issue_ref## summarythis pr adds comprehensive regression tests to verify that captures madewithin positive lookbehind assertions are preserved correctly across allregex engines (interpreter, compiled, and sourcegenerated).## backgroundissue issue_ref reported that in compiled mode, the .net regex engine wasincorrectly removing captures made by capturing groups within positivelookbehind assertions, while the interpreted mode preserved themcorrectly. for example:## changesupon investigation, i found that **the issue has already been fixed** inthe current codebase. both compiled and interpreted modes now produceidentical results for all test cases mentioned in the issue.however, the existing tests in only verifiedmatch success and matched values, not the actual capture counts andvalues. this pr adds comprehensive tests to that specifically verify:- capture counts match across all engines- capture values, indices, and lengths are correct- various quantifier patterns work correctly (, , etc.)- multiple capturing groups in lookbehinds are handled properly## tests added1. **main issue case**: - verifies lazy quantifier inlookbehind2. **multiple captures**: - verifies boundedquantifier with 2 captures3. **simple lookbehind**: - verifies basic lazyquantifier behavior4. **multiple groups**: - verifies multiplenamed groups in lookbehindall tests properly handle the nonbacktracking engine (which doesn'tsupport lookbehinds) and run against all other available engines.## test resultsall 30,335 regex tests pass successfully with no regressions.<!-- start copilot coding agent suffix --><details><summary>original prompt</summary>> > ----> > *this section details on the original issue you should resolve*> > <issue_title>compiled regex incorrectly removes the captures whichcaptured in positive lookbehind assertions</issue_title>> <issue_description>### description> > i saw u added a test on line 135 in [fileregex.match.tests.cs](#diff-2bdc6a6839e8ce7675737db0067c7cf288d190e0af1559feed81d5be92c9b216).> based on this, i found a new bug:> in compiled mode, when leaving positive lookbehind assertions, the.net regex engine will remove all the captures which captured by thelast direct group construction(the last direct child node).> > > --------------------------------> by the way, i found that when leaving negative assertions, the .netregex engine would not delete captures which captured in the assertionon .net8, but this bug fixed on .net9.> for example:> > output on .net8:> > maybe they are related?> > ### reproduction steps> > > > ### expected behavior> > output:> > > ### actual behavior> > output:> > > ### regression?> > _no response_> > ### known workarounds> > _no response_> > ### configuration> > _no response_> > ### other information> > _no response_</issue_description>> > <agent_instructions>please check whether this issue still repros. ifit does, please fix it and add a test. if it doesn't, please just ensurethere's one or more tests covering the citedissues.</agent_instructions>> > ## comments on the issue (you are @copilot in this section)> > <comments>> > > did it fixed by yet?> > no, that issue is unrelated.> > that label issue still exists in the source generator. it's addingbraces in a way that's preventing the goto from seeing the target label,which exists, just not in scope. i'd need to debug through to see whythe braces are being added.</body></comment_new>> </comments>> </details>fixes dotnet/runtimeissue_ref<!-- start copilot coding agent tips -->---💡 you can make copilot smarter by setting up custom instructions,customizing its development environment and configuring model contextprotocol (mcp) servers. learn more [copilot coding agenttips]( in the docs.---------"
dotnet/runtime,7067ea549e89dd1aaa9ce11b4f544b1b66cfae7b,Add missing project reference (#120994),2025-10-23 03:23:48+00:00,Jeremy Koritzinsky,0,,,1,1,0,add missing project reference (issue_ref)
dotnet/runtime,c5bb20a7904ab6cee5809e9fb3b4c5f4b23e18c0,"[clr-ios] Guard code-versioning paths with `FEATURE_CODE_VERSIONING` (#120812)

## Description

This PR updates code-versioning and debugger/DAC paths with
`FEATURE_CODE_VERSIONING` and provides stubs where needed. Code
versioning was moved under tiered compilation in
https://github.com/dotnet/runtime/pull/120583, which is disabled for
Apple mobile targets that caused build errors.

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>
Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>
Co-authored-by: Aaron Robinson <arobins@microsoft.com>",2025-10-23 03:54:38+00:00,Milos Kotlar,0,,,18,184,71,[clr-ios] guard code-versioning paths with (issue_ref)## descriptionthis pr updates code-versioning and debugger/dac paths with and provides stubs where needed. codeversioning was moved under tiered compilation in which is disabled forapple mobile targets that caused build errors.---------
dotnet/runtime,9bcdd873eb4b93934ae34328845599f63253d32a,"Host changes should trigger bootstrapped platforms (#120999)

Since the bootstrapped pipelines are senstive to hosting changes, we
trigger them for host changes.

Adding additional trigger as mentioned at
https://github.com/dotnet/runtime/pull/120234#issuecomment-3434601039.",2025-10-23 05:43:57+00:00,Aaron R Robinson,0,,,1,1,0,"host changes should trigger bootstrapped platforms (issue_ref)since the bootstrapped pipelines are senstive to hosting changes, wetrigger them for host changes.adding additional trigger as mentioned at#issuecomment-3434601039."
dotnet/runtime,fbe5d82db131a3fe4a1686c3e6f1d046b7094f3a,"Add missing interpreter HFA helpers (#120985)

There are missing helpers for 2, 3 and 4 vector64 and vector128 HFA in
the interpreter call stubs.

This change implements them.",2025-10-23 12:07:18+00:00,Jan Vorlicek,0,,,4,478,2,"add missing interpreter hfa helpers (issue_ref)there are missing helpers for 2, 3 and 4 vector64 and vector128 hfa inthe interpreter call stubs.this change implements them."
dotnet/runtime,415b8aaeec3bd7d60f526ea1e4c41f317ac9403b,"Enable continuing after assert in interpreter on macOS (#121005)

This change changes __builtin_trap() that we use to break into the
debugger on assert to __builtin_debugtrap() on macOS. The former doesn't
allow continuing after the assert while the latter does.",2025-10-23 12:07:34+00:00,Jan Vorlicek,1,c1384bbf21180c83f024aa438f498bbfcbdc47a4,"Fix interpreted synchronized methods (#121020)

The `InterpCompiler::CreateBasicBlocks` was comparing incorrect offset
with `m_ILCodeSizeFromILHeader` when checking when to convert `CEE_RET`
to `CEE_LEAVE`. The `m_currentILOffset` it was using was uninitialized,
so sometimes the comparison passed, sometimes not based on the random
value in the `m_currentILOffset`.",1,4,0,enable continuing after assert in interpreter on macos (issue_ref)this change changes __builtin_trap() that we use to break into thedebugger on assert to __builtin_debugtrap() on macos. the former doesn'tallow continuing after the assert while the latter does.
dotnet/runtime,cd65a7e083303870e2cf58ac87027cd09b2fd74e,"JIT: Switch GS cookie check to use r9 to account for Swift (#120745)

The Swift calling convention can return values in r8 so switch the GS
cookie check to use r9 for its temporary register.",2025-10-23 15:22:38+00:00,Jakob Botsch Nielsen,1,4d8ec943e48a3d2a06d1c3473235b345ab562b44,"JIT: Fix assertion in fgGetFirstILBlock for async methods with internal conditional blocks (#121616)

The `fgGetFirstILBlock()` function was being called unconditionally during
morph to allow edge creation for tail-call-to-loop optimization.
However, this function assumes all `BBF_INTERNAL` blocks before the first
IL block are `BBJ_ALWAYS`, which is not true for async methods with
exception save/restore context where internal blocks can be conditional
(because of introducing and inlining a call to save contexts).

Fix by only calling `fgGetFirstILBlock()` when the method actually has
recursive tail calls that need to be converted to loops.",2,3,3,jit: switch gs cookie check to use r9 to account for swift (issue_ref)the swift calling convention can return values in r8 so switch the gscookie check to use r9 for its temporary register.
dotnet/runtime,f3c990f1644836bbb892cadcb4e0d9230d01c150,"Optimize regex patterns with both beginning and end anchors for early fail-fast (#120916)

- [x] Analyze the issue and understand the optimization needed
- [x] Locate relevant code files (RegexGenerator.Emitter.cs,
RegexFindOptimizations.cs)
- [x] Understand the current implementation
- [x] Implement the optimization in
EmitTryFindNextPossibleStartingPosition
- [x] Add tests to verify the optimization
- [x] Build and test the changes
- [x] Run CodeQL security checks
- [x] Manually verify the optimization works
- [x] Address feedback: Move computation to emitter to avoid interpreter
overhead
- [x] Add optimization to RegexCompiler.cs for consistency
- [x] Simplify condition checks and remove unnecessary IL labels
- [x] Remove unnecessary braces and improve comment accuracy
- [x] Add comprehensive test variations for edge cases

## Issue Summary
Optimize regex patterns with both leading Beginning anchor (^) and
trailing End anchor (\z) with fixed length. Instead of checking if input
is at least N characters, check if input is exactly N characters AND
position is 0.

## Implementation Details (Updated)
Modified three files:
1. **RegexFindOptimizations.cs**: Reverted changes - no longer computes
TrailingAnchor for leading Beginning anchor
2. **RegexGenerator.Emitter.cs**: Compute trailing anchor and max length
lazily when emitting LeadingAnchor_LeftToRight_Beginning case
3. **RegexCompiler.cs**: Added same optimization to compiled regexes
4. **Test files**: Added comprehensive test cases covering various edge
cases

The optimization only applies when:
- LeadingAnchor == RegexNodeKind.Beginning (^ or \A)
- TrailingAnchor == RegexNodeKind.End (\z, not \Z or $)
- Pattern has fixed length (MinRequiredLength == MaxPossibleLength)

## Changes from Previous Versions
- Moved the trailing anchor and max length computation from
RegexFindOptimizations.cs to the emitters (RegexGenerator.Emitter.cs and
RegexCompiler.cs)
- This avoids adding overhead to the interpreter, as the computation now
only happens in compiled and source-generated code
- Added the optimization to RegexCompiler.cs to keep it in sync with the
source generator
- Simplified condition checks to directly compare ComputeMaxLength()
with MinRequiredLength
- Removed unnecessary success label in RegexCompiler IL emission
- Removed unnecessary braces around the optimization checks
- Improved comment accuracy and wording
- Inlined constant values in IL emission
- Added comprehensive test variations covering edge cases (no starting
anchor, Multiline mode, \Z/$ anchors, content before/after anchors)

## Test Results
✅ All unit tests pass (1,005 tests)  
✅ All functional tests pass (30,391 tests - includes 56 new tests for
edge cases)
✅ No security vulnerabilities detected

## Security Summary
No security vulnerabilities were introduced or discovered.

<!-- START COPILOT CODING AGENT SUFFIX -->



<details>

<summary>Original prompt</summary>

> 
> ----
> 
> *This section details on the original issue you should resolve*
> 
> <issue_title>Earlier fail fast for fixed-length regex patterns with
anchors</issue_title>
> <issue_description><!--This is just a template - feel free to delete
any and all of it and replace as appropriate.-->
> 
> ### Description
> 
> <!--
> * Please share a clear and concise description of the performance
problem.
> * Include minimal steps to reproduce the problem if possible. E.g.:
the smallest possible code snippet; or a small repo to clone, with steps
to run it.
>   -->
> 
> When having a regex pattern which contains both leading+trailing
anchors and the pattern is of fixed length, it seems to me that we might
be missing an opportunity to fail fast earlier.
> 
> Take e.g. the regex pattern `^1234$`.
> Currently the emitted `TryFindNextPossibleStartingPosition` checks
that the input has at least 4 characters to continue.
> ```cs
> if (pos <= inputSpan.Length - 4 && pos == 0)
> ```
> 
> When invoking `IsMatch(""12345"")` on the generated regex, the flow will
be:
> * pass `TryFindNextPossibleStartingPosition` as the input is longer
than 4 characters,
> * enter `TryMatchAtCurrentPosition` and call `.StartsWith(""1234"")`,
> * and first then fail on `5 < slice.Length` because the input was too
long.
> 
> If we tightened the check in `TryFindNextPossibleStartingPosition` to
""exactly 4 characters"", we wouldn't have to enter
`TryMatchAtCurrentPosition`.
> 
> If I understand the code correctly, we can detect this situation in
`EmitTryFindNextPossibleStartingPosition` when:
> * `rm.Tree.FindOptimizations.LeadingAnchor is RegexNodeKind.Beginning`
and
> * `rm.Tree.FindOptimizations.FindMode is
FindNextStartingPositionMode.TrailingAnchor_FixedLength_LeftToRight_End
or
FindNextStartingPositionMode.TrailingAnchor_FixedLength_LeftToRight_EndZ`
> 
> Am I missing something?</issue_description>
> 
> <agent_instructions>If the pattern starts with a begin anchor, ends
with a /z (End) anchor, and has a fixed length (its min length equals
its max length), then TryFindNextPossibleStartingPosition can be
optimized to return true if and only if the current position is 0 and
the length of the input matches the guaranteed match
length.</agent_instructions>
> 
> ## Comments on the Issue (you are @copilot in this section)
> 
> <comments>
> <comment_new><author>@stephentoub</author><body>
> Thanks. There are certainly more special-cases we could optimize for;
it's primarily a question of how common they are and whether it's worth
the extra code to maintain. Looking through
https://github.com/dotnet/runtime-assets/blob/main/src/System.Text.RegularExpressions.TestData/Regex_RealWorldPatterns.json,
there are several hundred occurrences of this pattern, so I'd be ok with
a PR to try to optimize it further.
> 
> That said, keep in mind that `$` does not mean ""exactly at the end"".
It actually means ""at the end or just before an ending \n"", so a length
check of exactly 4 would be wrong.
> 
> For this specific construction, I think the right answer would be to
not emit TryFindNextPossibleStartingPosition at all. You can see in the
source generator code there's already special-cases when Scan is emitted
to control whether or not we emit TryFindNextPossibleStartingPosition or
TryMatchAtCurrentPosition. In this case, I think the right answer would
simply be to just emit TryMatchAtCurrentPosition and have Scan just call
it.</body></comment_new>
> <comment_new><author>@stephentoub</author><body>
> Looking at this again, I take back what I said about not emitting
TryFindNextPossibleStartingPosition; it has the length check, which we
still want, as it quickly rules out any candidates that aren't of the
right length. The only difference I think we might want would be for
that length check to be an exact length check rather than a minimum,
i.e. instead of:
> ```
> if (pos <= inputSpan.Length - 4 && pos == 0)
> ```
> it'd be:
> ```
> if (pos == 0 && inputSpan.Length == 4)
> ```
> But this would only be viable with a /z anchor, not /Z or $, which as
previously noted allow for an optional \n at the end, so the usefulness
of this optimization is significantly lessened.</body></comment_new>
> </comments>
> 


</details>

Fixes dotnet/runtime#118489

<!-- START COPILOT CODING AGENT TIPS -->
---

✨ Let Copilot coding agent [set things up for
you](https://github.com/dotnet/runtime/issues/new?title=✨+Set+up+Copilot+instructions&body=Configure%20instructions%20for%20this%20repository%20as%20documented%20in%20%5BBest%20practices%20for%20Copilot%20coding%20agent%20in%20your%20repository%5D%28https://gh.io/copilot-coding-agent-tips%29%2E%0A%0A%3COnboard%20this%20repo%3E&assignees=copilot)
— coding agent works faster and does higher quality work when set up for
your repo.

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>",2025-10-23 17:54:37+00:00,Copilot,1,0c54c06a7b7e9169cd508b4923e2e1b4ca21d059,"Fix balancing group inconsistency between IsMatched and Group.Success (#121021)

In `RegexRunner.TransferCapture`, when a balancing group's captured
content preceded the balanced group's position, the ""innermost interval""
logic produced negative-length captures. `TidyBalancing` treats any
negative array value as a balancing marker, so these captures were
removed, causing the inconsistency.

Added a check in `TransferCapture` to ensure `end >= start` after the
innermost interval calculation, creating zero-length captures instead of
negative-length ones. Zero-length captures with non-negative start
positions correctly survive TidyBalancing.

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>",3,67,0,"optimize regex patterns with both beginning and end anchors for early fail-fast (issue_ref)- [x] analyze the issue and understand the optimization needed- [x] locate relevant code files (regexgenerator.emitter.cs,regexfindoptimizations.cs)- [x] understand the current implementation- [x] implement the optimization inemittryfindnextpossiblestartingposition- [x] add tests to verify the optimization- [x] build and test the changes- [x] run codeql security checks- [x] manually verify the optimization works- [x] address feedback: move computation to emitter to avoid interpreteroverhead- [x] add optimization to regexcompiler.cs for consistency- [x] simplify condition checks and remove unnecessary il labels- [x] remove unnecessary braces and improve comment accuracy- [x] add comprehensive test variations for edge cases## issue summaryoptimize regex patterns with both leading beginning anchor (^) andtrailing end anchor (\z) with fixed length. instead of checking if inputis at least n characters, check if input is exactly n characters andposition is 0.## implementation details (updated)modified three files:1. **regexfindoptimizations.cs**: reverted changes - no longer computestrailinganchor for leading beginning anchor2. **regexgenerator.emitter.cs**: compute trailing anchor and max lengthlazily when emitting leadinganchor_lefttoright_beginning case3. **regexcompiler.cs**: added same optimization to compiled regexes4. **test files**: added comprehensive test cases covering various edgecasesthe optimization only applies when:- leadinganchor == regexnodekind.beginning (^ or \a)- trailinganchor == regexnodekind.end (\z, not \z or $)- pattern has fixed length (minrequiredlength == maxpossiblelength)## changes from previous versions- moved the trailing anchor and max length computation fromregexfindoptimizations.cs to the emitters (regexgenerator.emitter.cs andregexcompiler.cs)- this avoids adding overhead to the interpreter, as the computation nowonly happens in compiled and source-generated code- added the optimization to regexcompiler.cs to keep it in sync with thesource generator- simplified condition checks to directly compare computemaxlength()with minrequiredlength- removed unnecessary success label in regexcompiler il emission- removed unnecessary braces around the optimization checks- improved comment accuracy and wording- inlined constant values in il emission- added comprehensive test variations covering edge cases (no startinganchor, multiline mode, \z/$ anchors, content before/after anchors)## test results✅ all unit tests pass (1,005 tests) ✅ all functional tests pass (30,391 tests - includes 56 new tests foredge cases)✅ no security vulnerabilities detected## security summaryno security vulnerabilities were introduced or discovered.<!-- start copilot coding agent suffix --><details><summary>original prompt</summary>> > ----> > *this section details on the original issue you should resolve*> > <issue_title>earlier fail fast for fixed-length regex patterns withanchors</issue_title>> <issue_description><!--this is just a template - feel free to deleteany and all of it and replace as appropriate.-->> > ### description> > <!--> * please share a clear and concise description of the performanceproblem.> * include minimal steps to reproduce the problem if possible. e.g.:the smallest possible code snippet; or a small repo to clone, with stepsto run it.> -->> > when having a regex pattern which contains both leading+trailinganchors and the pattern is of fixed length, it seems to me that we mightbe missing an opportunity to fail fast earlier.> > take e.g. the regex pattern .> currently the emitted checksthat the input has at least 4 characters to continue.> > > when invoking on the generated regex, the flow willbe:> * pass as the input is longerthan 4 characters,> * enter and call ,> * and first then fail on because the input was toolong.> > if we tightened the check in to""exactly 4 characters"", we wouldn't have to enter.> > if i understand the code correctly, we can detect this situation in when:> * and> * > > am i missing something?</issue_description>> > <agent_instructions>if the pattern starts with a begin anchor, endswith a /z (end) anchor, and has a fixed length (its min length equalsits max length), then tryfindnextpossiblestartingposition can beoptimized to return true if and only if the current position is 0 andthe length of the input matches the guaranteed matchlength.</agent_instructions>> > ## comments on the issue (you are @copilot in this section)> > <comments>> > thanks. there are certainly more special-cases we could optimize for;it's primarily a question of how common they are and whether it's worththe extra code to maintain. looking throughthere are several hundred occurrences of this pattern, so i'd be ok witha pr to try to optimize it further.> > that said, keep in mind that does not mean ""exactly at the end"".it actually means ""at the end or just before an ending \n"", so a lengthcheck of exactly 4 would be wrong.> > for this specific construction, i think the right answer would be tonot emit tryfindnextpossiblestartingposition at all. you can see in thesource generator code there's already special-cases when scan is emittedto control whether or not we emit tryfindnextpossiblestartingposition ortrymatchatcurrentposition. in this case, i think the right answer wouldsimply be to just emit trymatchatcurrentposition and have scan just callit.</body></comment_new>> > looking at this again, i take back what i said about not emittingtryfindnextpossiblestartingposition; it has the length check, which westill want, as it quickly rules out any candidates that aren't of theright length. the only difference i think we might want would be forthat length check to be an exact length check rather than a minimum,i.e. instead of:> > it'd be:> > but this would only be viable with a /z anchor, not /z or $, which aspreviously noted allow for an optional \n at the end, so the usefulnessof this optimization is significantly lessened.</body></comment_new>> </comments>> </details>fixes dotnet/runtimeissue_ref<!-- start copilot coding agent tips -->---✨ let copilot coding agent [set things up foryou](✨+set+up+copilot+instructions&body=configure%20instructions%20for%20this%20repository%20as%20documented%20in%20%5bbest%20practices%20for%20copilot%20coding%20agent%20in%20your%20repository%5d%28— coding agent works faster and does higher quality work when set up foryour repo.---------"
dotnet/runtime,3e7382e50b59676cca4faf8cf91b2877ccb6cb6f,"Avoid some allocations in `BitVector256` (#120427)

Avoid eight unnecessary allocations (the list, plus seven internal
arrays due to resizing).",2025-10-23 19:06:13+00:00,xtqqczze,0,,,1,10,6,"avoid some allocations in (issue_ref)avoid eight unnecessary allocations (the list, plus seven internalarrays due to resizing)."
dotnet/runtime,25cae043b11fa5e4fbda011376a7ad403438bd62,"Improve riscv64 cDAC implementation (#120920)

* Add missing definitions in datadescriptors.
* Match native unwinder code handling.
* Add missing frame handler.",2025-10-23 20:26:25+00:00,Adeel Mujahid,0,,,3,82,140,improve riscv64 cdac implementation (issue_ref)* add missing definitions in datadescriptors.* match native unwinder code handling.* add missing frame handler.
dotnet/runtime,1e09fc169a2c4d0c54c483967b845b03d11215d5,Centralize vararg test exclusions (#119878),2025-10-23 20:46:58+00:00,Jan Kotas,0,,,356,559,1378,centralize vararg test exclusions (issue_ref)
dotnet/runtime,70fd4cf52311a61c3811cad2192c5eb9914b05f9,"Adding IsDiagnosticsILStub() method on MethodDesc and using it to skip over async thunks in a variety of diagnostics-related code in which we would like to hide these from stackwalks, profiler notifications, etc. (#120982)

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-10-24 00:13:32+00:00,Rachel,1,26b8e5d16ff7deaa6568010d9e2f5d8d2accabb9,"Fix CORDBG_E_MODULE_NOT_LOADED error in func-eval (#121057)

Correctly initialize vmModule in FuncEvalComplete in the debugger
Fixes #120848",9,26,18,"adding isdiagnosticsilstub() method on methoddesc and using it to skip over async thunks in a variety of diagnostics-related code in which we would like to hide these from stackwalks, profiler notifications, etc. (issue_ref)"
dotnet/runtime,97669b0781f679d7831f64e879779c8723e2a07d,"Add compiler flags for clang-21. (#120775)

In clang-20 there is a known breaking change to `-fwrapv` that impacted
us. Details can be found at
https://releases.llvm.org/20.1.0/tools/clang/docs/ReleaseNotes.html#potentially-breaking-changes.

Add the `-fno-strict-aliasing` to match our MSVC usage as well.

Contributes to #119706

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-10-24 01:56:33+00:00,Aaron R Robinson,1,e125fc4d0d1d8a6192e6af922fff0cf54f55d3b7,"Add /sdl compiler flag for SDL compliance (#121510)

- Add `/sdl` flag to central MSVC configuration
- Remove redundant `/GS` flag (subsumed by `/sdl`)
- Remove redundant `/we` warning options (subsumed by `/sdl`)

Fixes #121509

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: agocke <515774+agocke@users.noreply.github.com>
Co-authored-by: jkotas <6668460+jkotas@users.noreply.github.com>",6,47,41,add compiler flags for clang-21. (issue_ref)in clang-20 there is a known breaking change to that impactedus. details can be found at#potentially-breaking-changes.add the to match our msvc usage as well.contributes to issue_ref---------
dotnet/runtime,784f8930a6fef49ac1ceee62c981a4a894c63cf8,"Add index to OrderedDictionary debugger display (#120885)

Changed OrderedDictionary debugger display to use a list-style view
where items are shown as KeyValuePairs with implicit indexing from array
position.

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>
Co-authored-by: eiriktsarpalis <2813363+eiriktsarpalis@users.noreply.github.com>
Co-authored-by: Eirik Tsarpalis <eirik.tsarpalis@gmail.com>",2025-10-24 05:34:20+00:00,Copilot,0,,,5,66,1,add index to ordereddictionary debugger display (issue_ref)changed ordereddictionary debugger display to use a list-style viewwhere items are shown as keyvaluepairs with implicit indexing from arrayposition.---------
dotnet/runtime,9983c03409c04e654c898fe726a4ea89c33d375d,"Add support for passing 128 and 32 bit HFA args to call stubs on arm64 (#121037)

The interpreter call stubs were missing support for HFA 128 bit and 32
bit args passing. That was causing a lot of failures in the
HardwareIntrinsics coreclr tests on macOS arm64.

With this change, the results basically match the x64 Windows.",2025-10-24 14:33:50+00:00,Jan Vorlicek,0,,,4,1630,29,"add support for passing 128 and 32 bit hfa args to call stubs on arm64 (issue_ref)the interpreter call stubs were missing support for hfa 128 bit and 32bit args passing. that was causing a lot of failures in thehardwareintrinsics coreclr tests on macos arm64.with this change, the results basically match the x64 windows."
dotnet/runtime,8a293ea44184eae173d460360809b02ef870bb58,"Fix RangeAttribute to catch OverflowException instead of throwing (#121029)

Fix RangeAttribute to handle OverflowException",2025-10-24 15:52:07+00:00,Copilot,1,9215568cdca8359762089eb2c30f97f74f116b33,"Fix Options validation source generator to exclude instance name from error messages (#121030)

Successfully fixed the Options validation source generator to produce
error messages that match standard DataAnnotations behavior. Updated all
baseline files including those in both SourceGenerationTests and
SourceGeneration.Unit.Tests directories.

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>
Co-authored-by: tarekgh <10833894+tarekgh@users.noreply.github.com>",13,23,14,fix rangeattribute to catch overflowexception instead of throwing (issue_ref)fix rangeattribute to handle overflowexception
dotnet/runtime,46a4004b6fcaf53cde9406712eb45e1874d75376,"Optimise bounds check in `Replace.ReplaceComparer` (#119560)

[Diffs](https://github.com/MihuBot/runtime-utils/issues/1556)",2025-10-24 15:59:37+00:00,xtqqczze,0,,,1,4,0,optimise bounds check in (issue_ref)[diffs](
dotnet/runtime,e221fc4f374e95987d08e9ea4c05cd0540c79dcb,"[main] Source code updates from dotnet/dotnet (#121063)

> [!NOTE]
> This is a codeflow update. It may contain both source code changes
from [the VMR](https://github.com/dotnet/dotnet) as well as dependency
updates. Learn more
[here](https://github.com/dotnet/dotnet/tree/main/docs/Codeflow-PRs.md).

This pull request brings the following source code changes

[marker]: <> (Begin:f7901f87-9f24-40d6-9bc1-564863937237)

## From https://github.com/dotnet/dotnet
- **Subscription**:
[f7901f87-9f24-40d6-9bc1-564863937237](https://maestro.dot.net/subscriptions?search=f7901f87-9f24-40d6-9bc1-564863937237)
- **Build**:
[20251023.9](https://dev.azure.com/dnceng/internal/_build/results?buildId=2823078)
([288405](https://maestro.dot.net/channel/8298/github:dotnet:dotnet/build/288405))
- **Date Produced**: October 24, 2025 1:10:04 AM UTC
- **Commit**:
[c636320f4ab16760a81313f0222af1e4f3740aa9](https://github.com/dotnet/dotnet/commit/c636320f4ab16760a81313f0222af1e4f3740aa9)
- **Commit Diff**:
[1bdc5cd...c636320](https://github.com/dotnet/dotnet/compare/1bdc5cdcf4cf408e00aa3c60f58520083bf2474f...c636320f4ab16760a81313f0222af1e4f3740aa9)
- **Branch**: [main](https://github.com/dotnet/dotnet/tree/main)

**Updated Dependencies**
- From [5.3.0-1.25520.104 to 5.3.0-1.25523.109][1]
  - Microsoft.CodeAnalysis
  - Microsoft.CodeAnalysis.Analyzers
  - Microsoft.CodeAnalysis.CSharp
  - Microsoft.Net.Compilers.Toolset
- From [10.0.100-rc.2.25520.104 to 10.0.100-rc.2.25523.109][1]
  - Microsoft.CodeAnalysis.NetAnalyzers
  - Microsoft.DotNet.ApiCompat.Task
- Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport
- From [11.0.0-beta.25520.104 to 11.0.0-beta.25523.109][1]
  - Microsoft.DotNet.Arcade.Sdk
  - Microsoft.DotNet.Build.Tasks.Archives
  - Microsoft.DotNet.Build.Tasks.Feed
  - Microsoft.DotNet.Build.Tasks.Installers
  - Microsoft.DotNet.Build.Tasks.Packaging
  - Microsoft.DotNet.Build.Tasks.TargetFramework
  - Microsoft.DotNet.Build.Tasks.Templating
  - Microsoft.DotNet.Build.Tasks.Workloads
  - Microsoft.DotNet.CodeAnalysis
  - Microsoft.DotNet.GenAPI
  - Microsoft.DotNet.GenFacades
  - Microsoft.DotNet.Helix.Sdk
  - Microsoft.DotNet.PackageTesting
  - Microsoft.DotNet.RemoteExecutor
  - Microsoft.DotNet.SharedFramework.Sdk
  - Microsoft.DotNet.XliffTasks
  - Microsoft.DotNet.XUnitExtensions
- From [0.11.5-alpha.25520.104 to 0.11.5-alpha.25523.109][1]
  - Microsoft.DotNet.Cecil
- From [2.9.3-beta.25520.104 to 2.9.3-beta.25523.109][1]
  - Microsoft.DotNet.XUnitAssert
  - Microsoft.DotNet.XUnitConsoleRunner
- From [10.0.0-rc.1.25520.104 to 10.0.0-rc.1.25523.109][1]
  - Microsoft.NET.Sdk.IL
  - Microsoft.NETCore.App.Ref
  - Microsoft.NETCore.ILAsm
  - runtime.native.System.IO.Ports
  - System.Reflection.Metadata
  - System.Reflection.MetadataLoadContext
  - System.Text.Json
- From [7.0.0-preview.1.2104 to 7.0.0-preview.1.2409][1]
  - NuGet.Frameworks
  - NuGet.Packaging
  - NuGet.ProjectModel
  - NuGet.Versioning
- From [2.0.0-rc.1.25520.104 to 2.0.0-rc.1.25523.109][1]
  - System.CommandLine

[marker]: <> (End:f7901f87-9f24-40d6-9bc1-564863937237)

[1]: https://github.com/dotnet/dotnet/compare/1bdc5cdcf4...c636320f4a
[marker]: <> (Start:Footer:CodeFlow PR)

## Associated changes in source repos
-
https://github.com/dotnet/arcade/compare/488413fe104056170673a048a07906314e101e5d...16f3dcc641eb529fa7324ea2d1d236bf2ca57dd0
-
https://github.com/dotnet/aspnetcore/compare/cf40577071ca80f7396e702a75212ed0f7ff8f54...d4349298d046f24282a6030d8935e81aa2440141
-
https://github.com/dotnet/diagnostics/compare/297a926f29a461b9015f401f7e9b98edfa09b922...fcb028b0c776e72f2cdaa9b4a841dd69e72f6bf0
-
https://github.com/dotnet/efcore/compare/efc6ddc83f6e710c4f516dfb787f23e395d90909...a025407ace99e28b1364d0d3254051dd479c9e63
-
https://github.com/dotnet/fsharp/compare/6a5057737534a1a34ab9a747811df9ea5a45ef0e...36645e1741a9e1ae674c9c35064613f63de17fb6
-
https://github.com/dotnet/msbuild/compare/5e273ccd45ba73d9db9b34fceaf9a110412e64e8...243fb764b25affe8cc5f233001ead3b5742a297e
-
https://github.com/dotnet/razor/compare/c87ceed94c0485806e25e7b31275a3944321f30f...bb9fc372e43cdc6be177b1a3b2153c91203877ed
-
https://github.com/dotnet/runtime/compare/4f506962bd5c4d1dbf49e0a08b2a4fd9ba688e4b...dac11e0f02a96ecfab5fbc2214a484c0a5effed8
-
https://github.com/dotnet/sdk/compare/da83df940bb8270e04103f9d5a43ce6d50e6b31d...ffaba7534225db5528a00d45be71127f3f871843
-
https://github.com/dotnet/templating/compare/3077da622dcaa12b46c9946e53b509ea3b352b47...0cb802c2e5a42e897598ac4ad238f4892bfc7896
-
https://github.com/dotnet/winforms/compare/e53fd3599f4d1e17f3ebc1f3ab9a0dad05805422...e68e2fec260cf78b082f2a23c9fb77e961002650

[marker]: <> (End:Footer:CodeFlow PR)

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-10-24 16:15:12+00:00,dotnet-maestro[bot],0,,,10,386,365,"[main] source code updates from dotnet/dotnet (issue_ref)> [!note]> this is a codeflow update. it may contain both source code changesfrom [the vmr]( as well as dependencyupdates. learn more[here](this pull request brings the following source code changes[marker]: <> (begin:f7901f87-9f24-40d6-9bc1-564863937237)## from - **subscription**:[f7901f87-9f24-40d6-9bc1-564863937237](- **build**:[20251023.9](([288405](- **date produced**: october 24, 2025 1:10:04 am utc- **commit**:[c636320f4ab16760a81313f0222af1e4f3740aa9](- **commit diff**:[1bdc5cd...c636320](- **branch**: [main](**updated dependencies**- from [5.3.0-1.25520.104 to 5.3.0-1.25523.109][1] - microsoft.codeanalysis - microsoft.codeanalysis.analyzers - microsoft.codeanalysis.csharp - microsoft.net.compilers.toolset- from [10.0.100-rc.2.25520.104 to 10.0.100-rc.2.25523.109][1] - microsoft.codeanalysis.netanalyzers - microsoft.dotnet.apicompat.task- microsoft.net.workload.emscripten.current.manifest-10.0.100.transport- from [11.0.0-beta.25520.104 to 11.0.0-beta.25523.109][1] - microsoft.dotnet.arcade.sdk - microsoft.dotnet.build.tasks.archives - microsoft.dotnet.build.tasks.feed - microsoft.dotnet.build.tasks.installers - microsoft.dotnet.build.tasks.packaging - microsoft.dotnet.build.tasks.targetframework - microsoft.dotnet.build.tasks.templating - microsoft.dotnet.build.tasks.workloads - microsoft.dotnet.codeanalysis - microsoft.dotnet.genapi - microsoft.dotnet.genfacades - microsoft.dotnet.helix.sdk - microsoft.dotnet.packagetesting - microsoft.dotnet.remoteexecutor - microsoft.dotnet.sharedframework.sdk - microsoft.dotnet.xlifftasks - microsoft.dotnet.xunitextensions- from [0.11.5-alpha.25520.104 to 0.11.5-alpha.25523.109][1] - microsoft.dotnet.cecil- from [2.9.3-beta.25520.104 to 2.9.3-beta.25523.109][1] - microsoft.dotnet.xunitassert - microsoft.dotnet.xunitconsolerunner- from [10.0.0-rc.1.25520.104 to 10.0.0-rc.1.25523.109][1] - microsoft.net.sdk.il - microsoft.netcore.app.ref - microsoft.netcore.ilasm - runtime.native.system.io.ports - system.reflection.metadata - system.reflection.metadataloadcontext - system.text.json- from [7.0.0-preview.1.2104 to 7.0.0-preview.1.2409][1] - nuget.frameworks - nuget.packaging - nuget.projectmodel - nuget.versioning- from [2.0.0-rc.1.25520.104 to 2.0.0-rc.1.25523.109][1] - system.commandline[marker]: <> (end:f7901f87-9f24-40d6-9bc1-564863937237)[1]: [marker]: <> (start:footer:codeflow pr)## associated changes in source repos-----------[marker]: <> (end:footer:codeflow pr)---------"
dotnet/runtime,4562739fb14cafa4f29f0221ebc92b4d99962367,"Make SHA-3 required with OpenSSL

This makes SHA-3 required for OpenSSL, effectively making our OpenSSL minimum 1.1.1.",2025-10-24 18:09:11+00:00,Kevin Jones,0,,,5,57,165,"make sha-3 required with opensslthis makes sha-3 required for openssl, effectively making our openssl minimum 1.1.1."
dotnet/runtime,0df387025130c1a08f584e3422b234ffe04fedd8,"[cDAC] Multi data-descriptor proposal (#118126)

* Update cDAC docs to account for multi data-descriptor support",2025-10-24 18:28:39+00:00,Max Charlamb,0,,,3,29,4,[cdac] multi data-descriptor proposal (issue_ref)* update cdac docs to account for multi data-descriptor support
dotnet/runtime,eb63c0e4da0dee07cf39ff1273c4d5854289316a,Remove all-arch condition in tryrun (#121071),2025-10-24 19:21:08+00:00,Adeel Mujahid,0,,,1,1,3,remove all-arch condition in tryrun (issue_ref)
dotnet/runtime,67379fd34391d999ccd3d908171d61c80052b804,Don't add the filled in template file to FileWries (#121080),2025-10-24 23:26:19+00:00,Jeremy Koritzinsky,0,,,1,1,3,don't add the filled in template file to filewries (issue_ref)
dotnet/runtime,d4f4139d244c274838846651302a7e19cbd758af,Consolidate some jit64 tests into less assemblies (#120992),2025-10-24 23:41:05+00:00,Jeremy Koritzinsky,0,,,958,6519,8915,consolidate some jit64 tests into less assemblies (issue_ref)
dotnet/runtime,84642c9a000182cf5ce125c1f94c39aaa50164c4,Add some help text to the merged runner. (#121082),2025-10-25 00:40:14+00:00,Jeremy Koritzinsky,0,,,2,52,0,add some help text to the merged runner. (issue_ref)
dotnet/runtime,9be281bddd52c5e22ee9f5f150d203149f34a7a3,Use Dictionary with StringComparer to avoid string allocations in System.Data.Common (#120603),2025-10-25 16:13:50+00:00,Alex Sobolev,0,,,1,2,5,use dictionary with stringcomparer to avoid string allocations in system.data.common (issue_ref)
dotnet/runtime,3fe8518d51bbcaa179bbe275b2597fbe1b88bc5a,"Packing Legacy cDAC apis (#121081)

This PR does some work and refactoring in order to facilitate a private
version of the cDAC.

1. Assuming that we may want to access some of the legacy APIs from the
private cDAC, I have pulled the legacy code into a separate package and
made the COM interop classes public for use.
2. I have added a mechanism to add new contract implementations to a
target upon instantiation of the target. This way the private cDAC can
add its own contracts.
3. Exposing GetContract<TContract>. The private cDAC can in the future
call GetContract with contracts not found in the default contract
registry. This will probably be hidden behind an extension method but we
need GetContract public for implementation.

---------

Co-authored-by: Jeremy Koritzinsky <jkoritzinsky@gmail.com>",2025-10-25 23:07:00+00:00,Rachel,0,,,28,178,144,"packing legacy cdac apis (issue_ref)this pr does some work and refactoring in order to facilitate a privateversion of the cdac.1. assuming that we may want to access some of the legacy apis from theprivate cdac, i have pulled the legacy code into a separate package andmade the com interop classes public for use.2. i have added a mechanism to add new contract implementations to atarget upon instantiation of the target. this way the private cdac canadd its own contracts.3. exposing getcontract<tcontract>. the private cdac can in the futurecall getcontract with contracts not found in the default contractregistry. this will probably be hidden behind an extension method but weneed getcontract public for implementation.---------"
dotnet/runtime,8c6d20cfb07422617d0e6949f42c68cc04ef786f,[browser] build browserhost in host.native subset (#120298),2025-10-26 12:43:56+00:00,Pavel Savara,0,,,10,98,63,[browser] build browserhost in host.native subset (issue_ref)
dotnet/runtime,2eaf6dda08e1af009e5dd3bef8f812f414a1124a,"Add DebuggerDisplay and DebuggerTypeProxy to Activity and related types (#121054)



---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>
Co-authored-by: tarekgh <10833894+tarekgh@users.noreply.github.com>",2025-10-26 23:10:49+00:00,Copilot,0,,,7,104,0,add debuggerdisplay and debuggertypeproxy to activity and related types (issue_ref)---------
dotnet/runtime,0c185bc65473f89bdadabe345d76222f3a0d565f,"[wasm] Bump chrome for testing - linux: 141.0.7390.122, windows: 142.0.7444.52 (#121096)

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>",2025-10-27 07:18:25+00:00,github-actions[bot],0,,,1,4,4,"[wasm] bump chrome for testing - linux: 141.0.7390.122, windows: 142.0.7444.52 (issue_ref)"
dotnet/runtime,2234a3b38c96499c5072f19fa1e02039719495b7,"Add generic And<T> and Or<T> methods to System.Threading.Interlocked (#120978)

## Summary

This PR adds generic versions of the `And` and `Or` methods to
`System.Threading.Interlocked` as specified in API proposal #114568.

## Changes

- [x] Add generic `And<T>(ref T, T) where T : struct` method
- [x] Add generic `Or<T>(ref T, T) where T : struct` method  
- [x] Support integer primitive types and enums backed by integer types
- [x] Reject float/double types and floating-point backed enums
- [x] Add appropriate error handling and messages
- [x] Update reference assembly
- [x] Add comprehensive theory-based tests (40+ test methods with 100+
test cases)
- [x] Replace existing usages of `Interlocked.And/Or(ref Unsafe.As...)`
with new generic API
- [x] Restrict JIT intrinsic expansion to TYP_INT and TYP_LONG only
- [x] Add TODO comment for small integer intrinsic support
- [x] Update XML documentation to clarify floating-point restrictions
- [x] Simplify validation logic to single-level if statement
- [x] Security checks (CodeQL - no issues)

## Implementation Details

- **For 1-2 byte types** (`byte`, `sbyte`, `short`, `ushort`): Uses
CompareExchange-based loop (managed fallback)
- **For 4-byte types** (`int`, `uint`): Delegates to int And/Or with
bitcast (JIT intrinsic)
- **For 8-byte types** (`long`, `ulong`): Delegates to long And/Or with
bitcast (JIT intrinsic)
- **Float/Double**: Rejected via type checks
- **Floating-point backed enums**: Rejected via
`Type.GetEnumUnderlyingType()` check (JIT-foldable)
- **JIT Integration**: Modified to only expand intrinsic for TYP_INT and
TYP_LONG; other types fall back to managed
- **Pattern**: Follows same approach as generic `CompareExchange<T>`

## JIT Changes

Modified `importercalls.cpp` to restrict intrinsic expansion:
- Only `TYP_INT` and `TYP_LONG` are expanded as atomic operations
- All other types (byte, short, float, double) fall back to managed
CompareExchange loops
- Uses `callType` consistently for type checks
- Added TODO comment: ""Implement support for XAND/XORR with small
integer types (byte/short)""
- Ensures correct behavior across all supported primitive types and
enums

## Type Rejection

The methods reject:
- Non-primitive, non-enum types
- Floating-point primitives (float, double)
- Enums backed by floating-point types (via
`Type.GetEnumUnderlyingType()`)

The validation check is a single-level if statement with proper
indentation:
```cs
if ((!typeof(T).IsPrimitive && !typeof(T).IsEnum) ||
    typeof(T) == typeof(float) || typeof(T) == typeof(double) ||
    (typeof(T).IsEnum && (typeof(T).GetEnumUnderlyingType() == typeof(float) || typeof(T).GetEnumUnderlyingType() == typeof(double))))
{
    throw new NotSupportedException(SR.NotSupported_IntegerEnumOrPrimitiveTypeRequired);
}
```

## Documentation

The XML documentation clearly states the restrictions:
```cs
/// <typeparam name=""T"">
/// The type to be used for <paramref name=""location1""/> and <paramref name=""value""/>.
/// This type must be an integer primitive type or an enum type backed by an integer type.
/// Floating-point types (float, double) are not supported.
/// </typeparam>
```

## Test Coverage

Converted all tests to `[Theory]` with `[InlineData]` covering:
- **Multiple test cases per type**: 5-10 values each including edge
cases
- **Negative values**: Comprehensive coverage for all signed types
(sbyte, short, int, long)
- **Edge cases**: Min/max values, zero, all-ones, alternating bit
patterns
- **Float/Double/Half NotSupportedException tests**: Verify rejection of
floating-point types
- **Null reference exceptions**: Separate tests for all types
- **Unsupported types**: Tests for non-primitive value types

## Usages Replaced

Replaced 7 call sites across the codebase:
- `System.Private.CoreLib/ComWrappers.cs` (2 calls)
- `System.Net.Http/CacheControlHeaderValue.cs` (2 calls)
- `System.Private.Uri/Uri.cs` (1 call)
- `System.Private.Uri/UriSyntax.cs` (1 call)
- `System.Private.Uri/UriScheme.cs` (1 call)

All usages now use the cleaner generic API without `Unsafe.As` casts.

## Test Results
✅ All 705 System.Threading tests pass (0 errors, 0 failures)

## Security
✅ CodeQL analysis passed with no issues

<!-- START COPILOT CODING AGENT SUFFIX -->



<details>

<summary>Original prompt</summary>

> We have the following public APIs in `System.Threading.Interlocked`
class:
> 
> ```cs
> public static int Or(ref int location1, int value)
> public static uint Or(ref uint location1, uint value)
> public static long Or(ref long location1, long value)
> public static ulong Or(ref ulong location1, ulong value)
> 
> public static int And(ref int location1, int value)
> public static uint And(ref uint location1, uint value)
> public static long And(ref long location1, long value)
> public static ulong And(ref ulong location1, ulong value)
> ```
> We want to add their generic versions:
> ```
> public static T Or<T>(ref T location1, T value) where T : struct;
> public static T And<T>(ref T location1, T value) where T : struct;
> ```
> for the same types + enums backed by those types.
> 
> Similar to what we did for CompareExchange in
https://github.com/dotnet/runtime/pull/104558.
> NOTE: this will require a bit of JIT work, e.g.
NI_System_Threading_Interlocked_Or and
NI_System_Threading_Interlocked_And
> 
> Create a PR in dotnet/runtime to add that. Effectively, implement this
API proposal: https://github.com/dotnet/runtime/issues/114568


</details>



<!-- START COPILOT CODING AGENT TIPS -->
---

💡 You can make Copilot smarter by setting up custom instructions,
customizing its development environment and configuring Model Context
Protocol (MCP) servers. Learn more [Copilot coding agent
tips](https://gh.io/copilot-coding-agent-tips) in the docs.

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: EgorBo <523221+EgorBo@users.noreply.github.com>
Co-authored-by: Egor Bogatov <egorbo@gmail.com>",2025-10-27 11:54:55+00:00,Copilot,1,3dde0551a1bdaa602b9a380af4c808426bd6c402,"Ensure the `FindReferenceTargetsCallback` static constructor is called. (#121558)

The code path in question is executed during a GC. This code path also
allocates managed memory, which means it is incompatible to run during a
GC. Ensuring the cctor run prior to any GC is the goal of this change.

Fixes https://github.com/dotnet/runtime/issues/121538",10,576,16,"add generic and<t> and or<t> methods to system.threading.interlocked (issue_ref)## summarythis pr adds generic versions of the and methods to as specified in api proposal issue_ref.## changes- [x] add generic method- [x] add generic method - [x] support integer primitive types and enums backed by integer types- [x] reject float/double types and floating-point backed enums- [x] add appropriate error handling and messages- [x] update reference assembly- [x] add comprehensive theory-based tests (40+ test methods with 100+test cases)- [x] replace existing usages of with new generic api- [x] restrict jit intrinsic expansion to typ_int and typ_long only- [x] add todo comment for small integer intrinsic support- [x] update xml documentation to clarify floating-point restrictions- [x] simplify validation logic to single-level if statement- [x] security checks (codeql - no issues)## implementation details- **for 1-2 byte types** (, , , ): usescompareexchange-based loop (managed fallback)- **for 4-byte types** (, ): delegates to int and/or withbitcast (jit intrinsic)- **for 8-byte types** (, ): delegates to long and/or withbitcast (jit intrinsic)- **float/double**: rejected via type checks- **floating-point backed enums**: rejected via check (jit-foldable)- **jit integration**: modified to only expand intrinsic for typ_int andtyp_long; other types fall back to managed- **pattern**: follows same approach as generic ## jit changesmodified to restrict intrinsic expansion:- only and are expanded as atomic operations- all other types (byte, short, float, double) fall back to managedcompareexchange loops- uses consistently for type checks- added todo comment: ""implement support for xand/xorr with smallinteger types (byte/short)""- ensures correct behavior across all supported primitive types andenums## type rejectionthe methods reject:- non-primitive, non-enum types- floating-point primitives (float, double)- enums backed by floating-point types (via)the validation check is a single-level if statement with properindentation:## documentationthe xml documentation clearly states the restrictions:## test coverageconverted all tests to with covering:- **multiple test cases per type**: 5-10 values each including edgecases- **negative values**: comprehensive coverage for all signed types(sbyte, short, int, long)- **edge cases**: min/max values, zero, all-ones, alternating bitpatterns- **float/double/half notsupportedexception tests**: verify rejection offloating-point types- **null reference exceptions**: separate tests for all types- **unsupported types**: tests for non-primitive value types## usages replacedreplaced 7 call sites across the codebase:- (2 calls)- (2 calls)- (1 call)- (1 call)- (1 call)all usages now use the cleaner generic api without casts.## test results✅ all 705 system.threading tests pass (0 errors, 0 failures)## security✅ codeql analysis passed with no issues<!-- start copilot coding agent suffix --><details><summary>original prompt</summary>> we have the following public apis in class:> > > we want to add their generic versions:> > for the same types + enums backed by those types.> > similar to what we did for compareexchange in> note: this will require a bit of jit work, e.g.ni_system_threading_interlocked_or andni_system_threading_interlocked_and> > create a pr in dotnet/runtime to add that. effectively, implement thisapi proposal: </details><!-- start copilot coding agent tips -->---💡 you can make copilot smarter by setting up custom instructions,customizing its development environment and configuring model contextprotocol (mcp) servers. learn more [copilot coding agenttips]( in the docs.---------"
dotnet/runtime,b3a8d0d3efb0df687c68f815082cb22180a29a18,"Fix GetSystemTimeZone to return filtered list (#121095)

Fixes https://github.com/dotnet/runtime/issues/117422

We maintain an internal cache, `_systemTimeZones`, that maps time zone
IDs to their corresponding `TimeZoneInfo` objects. Entries are added
when either `TimeZoneInfo.GetSystemTimeZones(...)` or
`TimeZoneInfo.FindSystemTimeZoneById(...)` is called.

On Linux and macOS, `TimeZoneInfo.FindSystemTimeZoneById(...)` attempts
to retrieve the time zone object by reading the appropriate time zone
file (for example, `/usr/share/zoneinfo/America/Los_Angeles` for Pacific
Time). When `TimeZoneInfo.GetSystemTimeZones()` is called, it reads the
list of available time zones from the `/usr/share/zoneinfo/zone.tab`
file. This file provides a filtered list that excludes legacy time zones
and avoids duplicate entries with different IDs.

The issue arises when `TimeZoneInfo.FindSystemTimeZoneById(...)` is
called with a legacy time zone ID that is not listed in `zone.tab`. In
that case, the corresponding time zone object is still created and added
to the `_systemTimeZones` cache. Later, when
`TimeZoneInfo.GetSystemTimeZones(...)` is invoked, the list populated
from `zone.tab` may include a duplicate time zone (same display name but
different ID), such as both `UTC` and `UCT`. This can cause problems for
UI applications that display time zone names, as duplicates appear in
the list.

The fix ensures that `GetSystemTimeZones()` returns only the filtered
list derived from `zone.tab`, excluding any cached entries added from
legacy or non-standard sources. This approach preserves cache
consistency and performance, while preventing duplicates from appearing
in the final list.

Windows systems are not affected by this issue, so the change will have
minimal impact there aside from shared code adjustments.",2025-10-27 16:01:06+00:00,Tarek Mahmoud Sayed,1,ffa7570dd12487890f1bce77d3af6821bab6936a,"[Android] Add ActiveIssue to TimeZoneInfoTests.TestGetSystemTimeZones (#122015)

The TimeZoneInfoTests.TestGetSystemTimeZones is failing due to a known
issue where on Android we return timezones with duplicate display names
(#90269), now we're just seeing it on a more recent Android API levels.
This is possibly due to an update to the TZ data.

Closes #121963

/cc @tarekgh @davidnguyen-tech",4,118,35,"fix getsystemtimezone to return filtered list (issue_ref)fixes we maintain an internal cache, , that maps time zoneids to their corresponding objects. entries are addedwhen either or is called.on linux and macos, attemptsto retrieve the time zone object by reading the appropriate time zonefile (for example, for pacifictime). when is called, it reads thelist of available time zones from the file. this file provides a filtered list that excludes legacy time zonesand avoids duplicate entries with different ids.the issue arises when iscalled with a legacy time zone id that is not listed in . inthat case, the corresponding time zone object is still created and addedto the cache. later, when is invoked, the list populatedfrom may include a duplicate time zone (same display name butdifferent id), such as both and . this can cause problems forui applications that display time zone names, as duplicates appear inthe list.the fix ensures that returns only the filteredlist derived from , excluding any cached entries added fromlegacy or non-standard sources. this approach preserves cacheconsistency and performance, while preventing duplicates from appearingin the final list.windows systems are not affected by this issue, so the change will haveminimal impact there aside from shared code adjustments."
dotnet/runtime,2daa4bc0e7d322d85466039b95f77cf40b5a85d9,[browser][coreCLR] enable bigint (#121025),2025-10-27 16:01:31+00:00,Pavel Savara,1,e207ac1781d6cf61fb567336a1370b54f74c5b54,"Do not ignore ClassLoader::ResolveTokenToTypeDefThrowing return values (#121864)

ResolveTokenToTypeDefThrowing can return FALSE in some situations when
the token cannot be resolved. The calling code has to deal with the
situation gracefully since the [out] arguments are not initialized in
that case.

Regressions introduced by #114675 (method.cpp) and #118413
(methodtablebuilder.cpp)

Fixes #121791",12,61,58,[browser][coreclr] enable bigint (issue_ref)
dotnet/runtime,e9efcaaafa3fd3c97ab7e72fc28869320d0747b7,"Remove OpenSSL 1.0.2 and 1.1.0 support

This removes all logic from our native shim required to support less than OpenSSL 1.1.1. This makes our OpenSSL floor 1.1.1.

The general changes are:

1. `apibridge.c` is about creating OpenSSL 1.1.x-like functions from the
non-opaque structs. We don't need to shim those anymore, so the file is
gone.
3. `LEGACY_FUNCTION`s went away.
4. `FALLBACK_FUNCTION` and `REQUIRED_FUNCTION_110` are now
`REQUIRED_FUNCTION`s.
5. Any code paths were for older OpenSSLs have been removed.
6. OpenSSL 1.0 initialization has been removed. The portable build will
no longer look for 1.0 versions.",2025-10-27 18:55:29+00:00,Kevin Jones,0,,,14,93,1985,"remove openssl 1.0.2 and 1.1.0 supportthis removes all logic from our native shim required to support less than openssl 1.1.1. this makes our openssl floor 1.1.1.the general changes are:1. is about creating openssl 1.1.x-like functions from thenon-opaque structs. we don't need to shim those anymore, so the file isgone.3. s went away.4. and are nows.5. any code paths were for older openssls have been removed.6. openssl 1.0 initialization has been removed. the portable build willno longer look for 1.0 versions."
dotnet/runtime,d1c4f05a703ffb5e5a78643a7aa14dc60ab24feb,Update build to include CoreCLR interpreter (#121127),2025-10-27 22:49:11+00:00,Drew Scoggins,0,,,1,10,0,update build to include coreclr interpreter (issue_ref)
dotnet/runtime,ab875d1191f8146884a87fcebf8d249f30d62492,"Follow-up clang-21 flags for mono (#121125)

Related changes for mono - see
https://github.com/dotnet/runtime/pull/120775",2025-10-27 22:51:12+00:00,Aaron R Robinson,0,,,1,6,2,follow-up clang-21 flags for mono (issue_ref)related changes for mono - see
dotnet/runtime,a9deee8cfc47fa4485ed6cf46305e91f8f96fa5d,"Report bad code when localloc is in a funclet (#121113)

The interpreter didn't check that localloc is not valid in funclets.
Couple of coreclr tests were failing due to that.

To make this work properly, I've removed marking blocks with BBClauseTry
as it was not used for anything and preventing the check for code being
in funclet working properly.",2025-10-28 00:04:46+00:00,Jan Vorlicek,1,54689bca7baf58322feb9d83811e222b88582aa7,"[clr-interp] Fix more IL_Conformance test issues (#120993)

- Compare operations between I4 and I need to work
- Storing a floating point value in an array may need conversions
- Storing an I4 into an I with stelem is a supported operation

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2,5,11,"report bad code when localloc is in a funclet (issue_ref)the interpreter didn't check that localloc is not valid in funclets.couple of coreclr tests were failing due to that.to make this work properly, i've removed marking blocks with bbclausetryas it was not used for anything and preventing the check for code beingin funclet working properly."
dotnet/runtime,54689bca7baf58322feb9d83811e222b88582aa7,"[clr-interp] Fix more IL_Conformance test issues (#120993)

- Compare operations between I4 and I need to work
- Storing a floating point value in an array may need conversions
- Storing an I4 into an I with stelem is a supported operation

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-10-28 00:10:05+00:00,David Wrighton,1,a9274159bffff8deb7d80c784793139141192676,"[clr-interp] Fix CEE_ISINST to push object reference instead of InterpTypeI (#121207)

## Description

According to ECMA, CEE_ISINST must push an object reference onto stack,
but it currently pushes InterpTypeI, which propagates an invalid IR
stack type.

In the example below, by IL_0022 the stind.ref takes an i8 instead of
object reference, triggering OBJECTREF validation failure.
```
Interpreter compile method Microsoft.Maui.Controls.Platform.GesturePlatformManager:TryGetTapGestureRecognizer(Microsoft.Maui.Controls.IGestureRecognizer,byref)

Create IL Vars:
alloc arg var 0 to offset 0
alloc arg var 1 to offset 8
alloc arg var 2 to offset 16

Create clause Vars:
BB1 (IL_0000):
Chaining BB0 -> BB1
IL_0000 ldarg.2   , sp 0,   
IL_0001 ldarg.1   , sp 1, MP
IL_0002 isinst    , sp 2, O 
IL_0007 dup       , sp 2, I8
IL_0008 brtrue.s  , sp 3, I8
BB3 (IL_000a):
Chaining BB1 -> BB3
IL_000a pop       , sp 2, I8
IL_000b ldarg.1   , sp 1, MP
IL_000c isinst    , sp 2, O 
IL_0011 dup       , sp 2, I8
IL_0012 brtrue.s  , sp 3, I8
BB5 (IL_0014):
Chaining BB3 -> BB5
IL_0014 pop       , sp 2, I8
IL_0015 ldnull    , sp 1, MP
IL_0016 br.s      , sp 2, O 
BB4 (IL_0018):
Chaining BB5 -> BB4
IL_0018 call      , sp 2, I8
BB6 (IL_001d):
Chaining BB4 -> BB6
IL_001d isinst    , sp 2, O 
BB2 (IL_0022):
Chaining BB6 -> BB2
IL_0022 stind.ref , sp 2, I8
IL_0023 ldarg.2   , sp 0,   
IL_0024 ldind.ref , sp 1, MP
IL_0025 ldnull    , sp 1, O 
IL_0026 cgt.un    , sp 2, O 
IL_0028 ret     
 ```",1,51,0,[clr-interp] fix more il_conformance test issues (issue_ref)- compare operations between i4 and i need to work- storing a floating point value in an array may need conversions- storing an i4 into an i with stelem is a supported operation---------
dotnet/runtime,91f3eb9676d5362b1671d01c2fa23a257d57034e,"Remove unsafe from EqualStartingCharacterCount (#121102)

I wasn't able to detect any difference for `Path.GetRelativePath` and
the codegen is fairly close.
if we want extra perf, we can vectorize this routine trivially for
Linux/macOS (where paths are case-sensitives).

Given this API allocates a new string, it probably isn't supposed to be
used on a hot path.

---------

Co-authored-by: xtqqczze <45661989+xtqqczze@users.noreply.github.com>",2025-10-28 13:04:08+00:00,Egor Bogatov,0,,,1,14,18,"remove unsafe from equalstartingcharactercount (issue_ref)i wasn't able to detect any difference for andthe codegen is fairly close.if we want extra perf, we can vectorize this routine trivially forlinux/macos (where paths are case-sensitives).given this api allocates a new string, it probably isn't supposed to beused on a hot path.---------"
dotnet/runtime,da2e3675d75400cb4d4c2996c780702fabd091bc,"Convert pointers to span in System.Net.Primitives (#121016)

Co-authored-by: Stephen Toub <stoub@microsoft.com>",2025-10-28 15:48:57+00:00,Egor Bogatov,0,,,4,18,26,convert pointers to span in system.net.primitives (issue_ref)
dotnet/runtime,addf696b78a6c6e275ab0ae02e7b2feaf60d128c,Use an ObjectWriter-based PE writer for crossgen2 (#120454),2025-10-28 18:17:20+00:00,Jeremy Koritzinsky,0,,,84,2995,3535,use an objectwriter-based pe writer for crossgen2 (issue_ref)
dotnet/runtime,963f8a48e7ce6b6df5c5893568ee10b7589cfb76,"Remove unnecessary PulseAllHelper method (#121132)

Delete the unnecessary It is not needed by any documented behavior. It appears to be a leftover from early Thread or Monitor implementations.

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: jkotas <6668460+jkotas@users.noreply.github.com>",2025-10-28 20:09:05+00:00,Copilot,0,,,1,0,29,remove unnecessary pulseallhelper method (issue_ref)delete the unnecessary it is not needed by any documented behavior. it appears to be a leftover from early thread or monitor implementations.
dotnet/runtime,25800e6537cd47a0a0533fb63bb0fa60d600ec45,"Add regression test for ValueTuple StackOverflow in large Dictionary initializers (#121120)

Fixes #8980 

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>
Co-authored-by: jkotas <6668460+jkotas@users.noreply.github.com>
Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-10-28 22:01:12+00:00,Copilot,1,45918cbfc96af1449948ba93b26930ccc3e00a85,"Fix missing Main method in Runtime_8980 test (#121173)

Fix test build with `BuildAllTestsAsStandalone`, regression after
#121120

Fixed similar to
`src/tests/JIT/Regression/JitBlue/GitHub_10215/GitHub_10215.cs`",2,5047,0,add regression test for valuetuple stackoverflow in large dictionary initializers (issue_ref)fixes issue_ref
dotnet/runtime,d1700abeb98667bc4941ba896a9b671ae445508b,"Improve SVE binary test template (#118730)

* Improves random data coverage for these tests
* Simplifies Vector pinning
* Fixes some errors in some mask-related helpers when inputs have
irregular mask data
* Fixes a saturation error in a shift helper
* Fixes overflow error in FusedAddRoundedHalving helper
* Bias generator to produce zeroes for masks 50% of the time
* Suppress generation of NaN values",2025-10-29 02:50:04+00:00,snickolls-arm,1,2dcdf314ad8820cc178797b48c83c0653ae3b1e3,"arm64: Fix Sve2_ShiftArithmeticRoundedSaturate_sbyte test helper (#121582)

- Fixes #121189

There was an issue in the helper function when shifting a negative value
by a small amount so that it is greater than -128. e.g. `-10 >> 1`
should be `-20` but the helper return `-128`. This only effected 120
cases out of 65535 so it isn't seen very often.",4,216,227,improve sve binary test template (issue_ref)* improves random data coverage for these tests* simplifies vector pinning* fixes some errors in some mask-related helpers when inputs haveirregular mask data* fixes a saturation error in a shift helper* fixes overflow error in fusedaddroundedhalving helper* bias generator to produce zeroes for masks 50% of the time* suppress generation of nan values
dotnet/runtime,dd1fedf06269bb410795b829896540f570696675,"Use JIT assumptions when passing to RhpNewArray* helpers (#121139)

Impleement first item from #116191",2025-10-29 03:10:02+00:00,Andrii Kurdiumov,0,,,5,7,7,use jit assumptions when passing to rhpnewarray* helpers (issue_ref)impleement first item from issue_ref
dotnet/runtime,7201a39b318e4916f704e3a5c2fa96e3d58bc352,"Mark debugger tests as ConditionalFact to skip on NativeAOT (#121152)

Five debugger-related tests added in #121054 fail in NativeAOT outerloop
runs where DebuggerDisplay/DebuggerTypeProxy attributes are unsupported.",2025-10-29 06:01:39+00:00,Copilot,0,,,1,5,5,mark debugger tests as conditionalfact to skip on nativeaot (issue_ref)five debugger-related tests added in issue_ref fail in nativeaot outerloopruns where debuggerdisplay/debuggertypeproxy attributes are unsupported.
dotnet/runtime,b02019ab18b6126bcf2def992fba2ac85069a65b,"Handle clang/gcc defining ""unix"" during compilation (#121097)

The clang and gcc tool chains defines 'unix' during compilation - clang
doesn't on macOS. This means that during the data contract generation
the ""unix"" string was converted to ""1"" and interpreted as ""windows"". See
`./src/mono/browser/emsdk/emscripten/emcc -dM -E - < /dev/null | grep
unix` or `clang -dM -E - < /dev/null | grep unix` on a linux distro.

The first step is to create a specific OS for the browser and then make
all string definitions case sensitive so the ""unix"" define doesn't
convert. We also place some defensive checks in place for the OS names
that aren't all that unique either.",2025-10-29 17:18:35+00:00,Aaron R Robinson,0,,,5,26,12,"handle clang/gcc defining ""unix"" during compilation (issue_ref)the clang and gcc tool chains defines 'unix' during compilation - clangdoesn't on macos. this means that during the data contract generationthe ""unix"" string was converted to ""1"" and interpreted as ""windows"". see or on a linux distro.the first step is to create a specific os for the browser and then makeall string definitions case sensitive so the ""unix"" define doesn'tconvert. we also place some defensive checks in place for the os namesthat aren't all that unique either."
dotnet/runtime,5219f86d5592560b51e4b226e9419089e546b7ab,"[clr-ios] Use IL unboxing stubs when FEATURE_JIT isn't available  (#121115)

This change prevents the runtime from emitting native machine code at
execution time through StubLinkerCPU on platforms where dynamic code
generation is not allowed due to W^X and code-signing restrictions.
Currently, unboxing and generic instantiating stubs still generate arm64
code via CPUSTUBLINKER that works as a lightweight JIT, because
FEATURE_PORTABLE_SHUFFLE_THUNKS is enabled on all non-x86 targets.

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-10-29 20:33:48+00:00,Milos Kotlar,1,c01656e6415a0a6d55d93932cba2f6861a042de5,"Adjust IsDiagnosticsHidden + MethodDesc comments

- Include additional stubs in IsDiagnosticsHidden (conceptually makes sense but no concrete bug was verified fixed by this)
- Added clarifying comments on some MethodDesc APIs related to TransientIL and diagnostics.

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>
Co-authored-by: Jan Kotas <jkotas@microsoft.com>",11,113,176,"[clr-ios] use il unboxing stubs when feature_jit isn't available (issue_ref)this change prevents the runtime from emitting native machine code atexecution time through stublinkercpu on platforms where dynamic codegeneration is not allowed due to w^x and code-signing restrictions.currently, unboxing and generic instantiating stubs still generate arm64code via cpustublinker that works as a lightweight jit, becausefeature_portable_shuffle_thunks is enabled on all non-x86 targets."
dotnet/runtime,d3b36cce4f334dac2e6b5c6a6100025f4d35e8ce,Add missing TestLibrary reference for BuildAllTestsAsStandalone (#121168),2025-10-29 23:26:31+00:00,Tomasz Sowiński,0,,,3,3,0,add missing testlibrary reference for buildalltestsasstandalone (issue_ref)
dotnet/runtime,d3b40055c81de1b5e59f373e2e69046fc4e32c9a,Move JIT/HardwareIntrinsics tests to run in Pri1 (#121145),2025-10-30 03:10:00+00:00,Jeremy Koritzinsky,0,,,3,143,1,move jit/hardwareintrinsics tests to run in pri1 (issue_ref)
dotnet/runtime,d3dffb9eb5f1ae5368d47007223017028e5e1223,"Move the implementation of Monitor to managed in CoreCLR (#118371)

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-10-30 03:18:37+00:00,Jeremy Koritzinsky,1,d05d76efa3d10b432936ec5ed8901e9aedebe448,"Add support for DOTNET prefix on ICorProfiler env vars (#121646)

Add DOTNET_* variations to existing CORECLR_* profiler environment
variables.

Fix #117902
---------

Co-authored-by: Noah Falk <noahfalk@users.noreply.github.com>",77,1330,5237,move the implementation of monitor to managed in coreclr (issue_ref)
dotnet/runtime,6b8fd21134b473fbc5094d61fd31abcadbf25a81,[QUIC] Update Windows version of MsQuic (#121170),2025-10-30 08:48:51+00:00,Marie Píchová,1,9ebda3dbd170c14a640817450d085bd0795314b2,"Add EventPipe EventSource serialization testing (#120887)

We've had EventSource serialization tests for a long time but EventPipe
never got added to it. Unforetunately not testing EventPipe in this way
previously meant that quite a few discrepancies between EventPipe and
ETW went unnoticed. As a first step to documenting and/or resolving the
problems I wanted to get EventPipe running in the same set of tests. I
also did several other small fixes and improvements while doing the
work.

- EventPipeListener added as a new 3rd target for EventSource (in
addition to EventListener and ETW which are there now)
- Modified the Listener test abstraction so that EventPipe could also
work
- Removed assumption that providers can changed after the listener
starts running
- Added capability flags to indicate whether listeners supported certain
kinds of serialization behavior
- Worked around incomplete implementation of IDictionary for payloads in
TraceEvent
- Leveraged xunit theory attribute to avoid needing different top-level
APIs for every listener configuration
- Fixed EventTestHarness assert which had actual and expected values
swapped
- TestsWrite: Fixed mistaken call to Array.Equals with Assert.Equal so
the test actually validates what it was supposed to
- Removed ActiveIssue 88305 attribute which was already closed in the
past.
- Moved some test cases from TestsWriteEvent.Etw.cs to
TestsWriteEvent.cs so that they can run for other listeners when
supported.",1,1,1,[quic] update windows version of msquic (issue_ref)
dotnet/runtime,19ca5df408eb420295aa0246dbfde530a6f528b8,"JIT: Handle x86 gs cookie checks before tailcalls (#121169)

The code path assumed we didn't have tailcalls on x86, but we do see
them for `CEE_JMP` specifically. In that case the GS cookie check may
need a register in AOT scenarios, so give it one.",2025-10-30 14:49:17+00:00,Jakob Botsch Nielsen,0,,,1,10,2,"jit: handle x86 gs cookie checks before tailcalls (issue_ref)the code path assumed we didn't have tailcalls on x86, but we do seethem for specifically. in that case the gs cookie check mayneed a register in aot scenarios, so give it one."
dotnet/runtime,f357c974ee1f7007eba134885e0fd27a24e06f8a,Add loongarch64 managed unwinder for cDAC (#121039),2025-10-30 16:58:21+00:00,Adeel Mujahid,0,,,6,899,2,add loongarch64 managed unwinder for cdac (issue_ref)
dotnet/runtime,9476ccf2a8fc210583d8f0fff97f807f121e8da8,Update our local copy of the Crossgen2 tasks from the SDK to the most recent copy on dotnet/sdk's main (#121187),2025-10-30 17:26:56+00:00,Jeremy Koritzinsky,0,,,14,335,190,update our local copy of the crossgen2 tasks from the sdk to the most recent copy on dotnet/sdk's main (issue_ref)
dotnet/runtime,3683bd5b11632c9e35a81e238b3c5afdf9710f12,"Add initial doc for future R2R platform-native image (Mach-O, composite only) (#120584)

Create a doc with a tentative plan for the platform-native R2R support
we are intending to add (Mach-O, composite only). We can update this as
we go.",2025-10-31 03:02:32+00:00,Elinor Fung,0,,,3,73,4,"add initial doc for future r2r platform-native image (mach-o, composite only) (issue_ref)create a doc with a tentative plan for the platform-native r2r supportwe are intending to add (mach-o, composite only). we can update this aswe go."
dotnet/runtime,ac7666fa98fbd9a4d0a1ce8ed04762501badae52,[browser] Support WasmFilesToIncludeInFileSystem in WasmSdk (#120970),2025-10-31 09:26:36+00:00,Marek Fišera,1,4d4c8fbc0ceed77be02753aa5d30d490a348c15b,"Copy`dotnet.d.ts` to `wwwroot` on build/publish. (#120097)

- WebAssembly builds now expose an opt-in
`WasmEmitTypeScriptDefinitions` MSBuild property (default `false`) so
projects can request the generated `dotnet.d.ts` typings.
- A new `_EnsureDotnetTypeScriptDefinitions` target copies `dotnet.d.ts`
from the runtime pack into the project’s `wwwroot` on build or publish
when that property is enabled.
- Added a test (`TypeScriptDefinitionsCopiedToWwwrootOnBuild`) to cover
Debug/Release and verify the file is produced only when requested.

Fixes https://github.com/dotnet/runtime/issues/77174.",13,146,13,[browser] support wasmfilestoincludeinfilesystem in wasmsdk (issue_ref)
dotnet/runtime,de62bfca5efe8453a66a1855eca240cde6f97e00,"Unify KC/KD normalization behavior on Wasm (#121110)

Fixes https://github.com/dotnet/runtime/issues/117116.

- Call `CheckNormalizationForm` before the ASCII fast path so
Browser/WASI throw `PlatformNotSupportedException` for FormKC/FormKD
regardless of input.
- Add wasm-specific test for checking if PNSE was thrown for both, ASCII
and non-ASCII with KC and KD.",2025-10-31 09:38:24+00:00,Ilona Tomkowicz,1,9ce10f1fa6684312f283a8d49e21b10576ecceaf,"Enable `TelemetryTest` (#121498)

Running in EAT mode, locally with Chrome does not reveal any problems.
The failures were deterministic when disabled. Disabling happened just
after emscripten bump to `3.1.12`. Now we are on `3.1.56`.

Reverts:
- https://github.com/dotnet/runtime/pull/85678
- https://github.com/dotnet/runtime/pull/109179 (added
`IsBrowserAndIsBuiltWithAggressiveTrimming`)

Fixes https://github.com/dotnet/runtime/issues/71877, fixes
https://github.com/dotnet/runtime/issues/109024.",4,40,12,"unify kc/kd normalization behavior on wasm (issue_ref)fixes - call before the ascii fast path sobrowser/wasi throw for formkc/formkdregardless of input.- add wasm-specific test for checking if pnse was thrown for both, asciiand non-ascii with kc and kd."
dotnet/runtime,98f204be6e6ea8b787f209a5b8a1734dc4784127,Delete IA64-specific comment and associated code (#121226),2025-10-31 14:01:57+00:00,Jan Kotas,1,a5275f5225326942b8b4efc17153d361e073d31f,"[wasm][coreclr] Remove [Get|Set]InterpExecMethodSP (#121200)

As they are not used on wasm.

Let `GetCurrentSP` return C runtime stack pointer.

Also fix few asserts.

---------

Co-authored-by: Aaron R Robinson <arobins@microsoft.com>
Co-authored-by: Jan Kotas <jkotas@microsoft.com>",14,31,226,delete ia64-specific comment and associated code (issue_ref)
dotnet/runtime,b22d55ae31de8244a52047eb5d94247130667323,"Add `runtime-report-green` pipeline to Build Analysis (#121230)

This PR adds a pipeline to config file that defines which pipelines are
taken into consideration during Build Analysis.

Contributes to https://github.com/dotnet/runtime/pull/120752.",2025-10-31 14:20:15+00:00,Ilona Tomkowicz,0,,,1,4,0,add pipeline to build analysis (issue_ref)this pr adds a pipeline to config file that defines which pipelines aretaken into consideration during build analysis.contributes to
dotnet/runtime,b2571fae6d7aa76d516b6082ff755fc241a5c31e,Improve the docs for ObjectiveCMarshal.CreateReferenceTrackingHandle slightly. (#121232),2025-10-31 16:35:50+00:00,Rolf Bjarne Kvinge,0,,,2,4,4,improve the docs for objectivecmarshal.createreferencetrackinghandle slightly. (issue_ref)
dotnet/runtime,5ef9ed1334696549100c35f8033cc4df3d6e639b,Delete unused method from runtime async (#121245),2025-10-31 16:44:34+00:00,Michal Strehovský,0,,,1,0,13,delete unused method from runtime async (issue_ref)
dotnet/runtime,d9df086a5d4268cdb89e95d5a767f818ebb65c2d,"Disable part of nopiatest on interpreter (#121147)

Modify nopiatest to not run its varargs component if the test is
targetting a platform which doesn't support varargs",2025-10-31 17:21:50+00:00,David Wrighton,0,,,2,31,20,disable part of nopiatest on interpreter (issue_ref)modify nopiatest to not run its varargs component if the test istargetting a platform which doesn't support varargs
dotnet/runtime,65ee8fb0d479afeacb6e659fea55570cfb047d04,"Implement CEE_JMP for the interpreter (#121130)

This makes around 50 more coreclr tests pass with the interpreter.",2025-10-31 18:08:53+00:00,Jan Vorlicek,1,7459320189f959d1feadcd78d75b14f2abd956db,"Fix build fail in JIT/Directed/jmp/genericjmp test (#121290)

Missing Main method with BuildAllTestsAsStandalone=true.",5,157,1,implement cee_jmp for the interpreter (issue_ref)this makes around 50 more coreclr tests pass with the interpreter.
dotnet/runtime,0ad494ba0eb84ada521d259c7d24dd0892c7a54d,"[RuntimeAsync] Remove no longer needed workarounds for Roslyn NYIs (#120895)

Async methods in structs can compile and work correctly now.

This is a test-only change that removes workarounds.",2025-10-31 20:34:10+00:00,Vladimir Sadov,0,,,1,10,16,[runtimeasync] remove no longer needed workarounds for roslyn nyis (issue_ref)async methods in structs can compile and work correctly now.this is a test-only change that removes workarounds.
dotnet/runtime,82a094823b1d2d454e3a037b06c15fdf669f389e,"[clr-interp] Add various tweaks to allow code patterns around byref usage that are tested by various IL tests (#121144)

- Allow use of the transient pointer concept from ECMA 335 using a ""bashing"" approach where the StackType is adjusted to I as needed. This is done at the same points that the JIT does this bashing. This was originally justified by I.12.3.2.1 in the ECMA spec, but as that has been defined out of the spec, this is only supported in order to enable various tests to pass and match JIT behavior.

- Allow the convert opcode to operate on StackTypeByRef and StackTypeO as if they were of StackTypeI.",2025-11-01 00:43:01+00:00,David Wrighton,0,,,2,274,80,"[clr-interp] add various tweaks to allow code patterns around byref usage that are tested by various il tests (issue_ref)- allow use of the transient pointer concept from ecma 335 using a ""bashing"" approach where the stacktype is adjusted to i as needed. this is done at the same points that the jit does this bashing. this was originally justified by i.12.3.2.1 in the ecma spec, but as that has been defined out of the spec, this is only supported in order to enable various tests to pass and match jit behavior.- allow the convert opcode to operate on stacktypebyref and stacktypeo as if they were of stacktypei."
dotnet/runtime,b71517e1563994d073db8d1795efc841a95f61d9,"Add optimistic for --instruction-set option (#121203)

Allows disabling optimistic instruction set.",2025-11-01 02:10:32+00:00,Mikhail Kurinnoi,0,,,3,16,2,add optimistic for --instruction-set option (issue_ref)allows disabling optimistic instruction set.
dotnet/runtime,e8812e7419db9137f20b990786a53ed71e27e11e,"Capture PDBs in `--make-repro-path` (#121163)

Repro for dotnet/roslyn#80952 was somewhat harder to obtain because we
don't pack PDBs into the repro package (they are not command line
arguments and the compiler looks for them next to the assembly).

This is a simple change to just look for .pdb files next to the files
we're packing.

Cc @dotnet/ilc-contrib",2025-11-01 02:35:52+00:00,Michal Strehovský,0,,,1,13,0,capture pdbs in (issue_ref)repro for dotnet/roslynissue_ref was somewhat harder to obtain because wedon't pack pdbs into the repro package (they are not command linearguments and the compiler looks for them next to the assembly).this is a simple change to just look for .pdb files next to the fileswe're packing.cc @dotnet/ilc-contrib
dotnet/runtime,4c4164755a4cdc633c22d2a2ad5604c7d0879ec5,"[wasm] Bump chrome for testing - linux: 142.0.7444.59, windows: 142.0.7444.60 (#121274)

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>",2025-11-03 07:09:47+00:00,github-actions[bot],0,,,1,4,4,"[wasm] bump chrome for testing - linux: 142.0.7444.59, windows: 142.0.7444.60 (issue_ref)"
dotnet/runtime,8cf1f91aee29031691295909895b8c8e293cb434,"[main] Source code updates from dotnet/dotnet (#121164)

> [!NOTE]
> This is a codeflow update. It may contain both source code changes
from [the VMR](https://github.com/dotnet/dotnet) as well as dependency
updates. Learn more
[here](https://github.com/dotnet/dotnet/tree/main/docs/Codeflow-PRs.md).

This pull request brings the following source code changes

[marker]: <> (Begin:f7901f87-9f24-40d6-9bc1-564863937237)

## From https://github.com/dotnet/dotnet
- **Subscription**:
[f7901f87-9f24-40d6-9bc1-564863937237](https://maestro.dot.net/subscriptions?search=f7901f87-9f24-40d6-9bc1-564863937237)
- **Build**:
[20251028.8](https://dev.azure.com/dnceng/internal/_build/results?buildId=2826783)
([288905](https://maestro.dot.net/channel/8298/github:dotnet:dotnet/build/288905))
- **Date Produced**: October 29, 2025 5:13:09 AM UTC
- **Commit**:
[e545239117919cda700be149a2e9a032374fc284](https://github.com/dotnet/dotnet/commit/e545239117919cda700be149a2e9a032374fc284)
- **Commit Diff**:
[c636320...e545239](https://github.com/dotnet/dotnet/compare/c636320f4ab16760a81313f0222af1e4f3740aa9...e545239117919cda700be149a2e9a032374fc284)
- **Branch**: [main](https://github.com/dotnet/dotnet/tree/main)

**Updated Dependencies**
- From [5.3.0-1.25523.109 to 5.3.0-1.25528.108][1]
  - Microsoft.CodeAnalysis
  - Microsoft.CodeAnalysis.Analyzers
  - Microsoft.CodeAnalysis.CSharp
  - Microsoft.Net.Compilers.Toolset
- From [10.0.100-rc.2.25523.109 to 10.0.100-rc.2.25528.108][1]
  - Microsoft.CodeAnalysis.NetAnalyzers
  - Microsoft.DotNet.ApiCompat.Task
- Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport
- From [11.0.0-beta.25523.109 to 11.0.0-beta.25528.108][1]
  - Microsoft.DotNet.Arcade.Sdk
  - Microsoft.DotNet.Build.Tasks.Archives
  - Microsoft.DotNet.Build.Tasks.Feed
  - Microsoft.DotNet.Build.Tasks.Installers
  - Microsoft.DotNet.Build.Tasks.Packaging
  - Microsoft.DotNet.Build.Tasks.TargetFramework
  - Microsoft.DotNet.Build.Tasks.Templating
  - Microsoft.DotNet.Build.Tasks.Workloads
  - Microsoft.DotNet.CodeAnalysis
  - Microsoft.DotNet.GenAPI
  - Microsoft.DotNet.GenFacades
  - Microsoft.DotNet.Helix.Sdk
  - Microsoft.DotNet.PackageTesting
  - Microsoft.DotNet.RemoteExecutor
  - Microsoft.DotNet.SharedFramework.Sdk
  - Microsoft.DotNet.XliffTasks
  - Microsoft.DotNet.XUnitExtensions
- From [0.11.5-alpha.25523.109 to 0.11.5-alpha.25528.108][1]
  - Microsoft.DotNet.Cecil
- From [2.9.3-beta.25523.109 to 2.9.3-beta.25528.108][1]
  - Microsoft.DotNet.XUnitAssert
  - Microsoft.DotNet.XUnitConsoleRunner
- From [10.0.0-rc.1.25523.109 to 10.0.0-rc.1.25528.108][1]
  - Microsoft.NET.Sdk.IL
  - Microsoft.NETCore.App.Ref
  - Microsoft.NETCore.ILAsm
  - runtime.native.System.IO.Ports
  - System.Reflection.Metadata
  - System.Reflection.MetadataLoadContext
  - System.Text.Json
- From [7.0.0-preview.1.2409 to 7.0.0-preview.1.2908][1]
  - NuGet.Frameworks
  - NuGet.Packaging
  - NuGet.ProjectModel
  - NuGet.Versioning
- From [2.0.0-rc.1.25523.109 to 2.0.0-rc.1.25528.108][1]
  - System.CommandLine

[marker]: <> (End:f7901f87-9f24-40d6-9bc1-564863937237)

[1]: https://github.com/dotnet/dotnet/compare/c636320f4a...e545239117
[marker]: <> (Start:Footer:CodeFlow PR)

## Associated changes in source repos
-
https://github.com/dotnet/arcade/compare/16f3dcc641eb529fa7324ea2d1d236bf2ca57dd0...d48732057be73512b3bac9c01eeacd59398c16d5
-
https://github.com/dotnet/diagnostics/compare/fcb028b0c776e72f2cdaa9b4a841dd69e72f6bf0...73f1fdca8d9fb191297a7e687790b804f4e78ef5
-
https://github.com/dotnet/efcore/compare/a025407ace99e28b1364d0d3254051dd479c9e63...af2d7b886edfc378446d36583fb1d5d6496d8c1d
-
https://github.com/dotnet/fsharp/compare/36645e1741a9e1ae674c9c35064613f63de17fb6...12efe3b5121d8a662d1431763796dfd278af9129
-
https://github.com/dotnet/msbuild/compare/243fb764b25affe8cc5f233001ead3b5742a297e...ad915a4f47346b746998dabaa541a7e3bab1d6cd
-
https://github.com/dotnet/razor/compare/bb9fc372e43cdc6be177b1a3b2153c91203877ed...bb00268d70c75481f4a95747da2f45417ed8b211
-
https://github.com/dotnet/runtime/compare/dac11e0f02a96ecfab5fbc2214a484c0a5effed8...54689bca7baf58322feb9d83811e222b88582aa7
-
https://github.com/dotnet/sdk/compare/ffaba7534225db5528a00d45be71127f3f871843...65384c6536d6c6f6afa9c13dc023b1848f0ef69e
-
https://github.com/dotnet/winforms/compare/e68e2fec260cf78b082f2a23c9fb77e961002650...c43e8c73633ca83a3dd01d54b507af8caef2ffc4

[marker]: <> (End:Footer:CodeFlow PR)

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Alexander Köplinger <alex.koeplinger@outlook.com>",2025-11-03 07:23:08+00:00,dotnet-maestro[bot],0,,,10,136,138,"[main] source code updates from dotnet/dotnet (issue_ref)> [!note]> this is a codeflow update. it may contain both source code changesfrom [the vmr]( as well as dependencyupdates. learn more[here](this pull request brings the following source code changes[marker]: <> (begin:f7901f87-9f24-40d6-9bc1-564863937237)## from - **subscription**:[f7901f87-9f24-40d6-9bc1-564863937237](- **build**:[20251028.8](([288905](- **date produced**: october 29, 2025 5:13:09 am utc- **commit**:[e545239117919cda700be149a2e9a032374fc284](- **commit diff**:[c636320...e545239](- **branch**: [main](**updated dependencies**- from [5.3.0-1.25523.109 to 5.3.0-1.25528.108][1] - microsoft.codeanalysis - microsoft.codeanalysis.analyzers - microsoft.codeanalysis.csharp - microsoft.net.compilers.toolset- from [10.0.100-rc.2.25523.109 to 10.0.100-rc.2.25528.108][1] - microsoft.codeanalysis.netanalyzers - microsoft.dotnet.apicompat.task- microsoft.net.workload.emscripten.current.manifest-10.0.100.transport- from [11.0.0-beta.25523.109 to 11.0.0-beta.25528.108][1] - microsoft.dotnet.arcade.sdk - microsoft.dotnet.build.tasks.archives - microsoft.dotnet.build.tasks.feed - microsoft.dotnet.build.tasks.installers - microsoft.dotnet.build.tasks.packaging - microsoft.dotnet.build.tasks.targetframework - microsoft.dotnet.build.tasks.templating - microsoft.dotnet.build.tasks.workloads - microsoft.dotnet.codeanalysis - microsoft.dotnet.genapi - microsoft.dotnet.genfacades - microsoft.dotnet.helix.sdk - microsoft.dotnet.packagetesting - microsoft.dotnet.remoteexecutor - microsoft.dotnet.sharedframework.sdk - microsoft.dotnet.xlifftasks - microsoft.dotnet.xunitextensions- from [0.11.5-alpha.25523.109 to 0.11.5-alpha.25528.108][1] - microsoft.dotnet.cecil- from [2.9.3-beta.25523.109 to 2.9.3-beta.25528.108][1] - microsoft.dotnet.xunitassert - microsoft.dotnet.xunitconsolerunner- from [10.0.0-rc.1.25523.109 to 10.0.0-rc.1.25528.108][1] - microsoft.net.sdk.il - microsoft.netcore.app.ref - microsoft.netcore.ilasm - runtime.native.system.io.ports - system.reflection.metadata - system.reflection.metadataloadcontext - system.text.json- from [7.0.0-preview.1.2409 to 7.0.0-preview.1.2908][1] - nuget.frameworks - nuget.packaging - nuget.projectmodel - nuget.versioning- from [2.0.0-rc.1.25523.109 to 2.0.0-rc.1.25528.108][1] - system.commandline[marker]: <> (end:f7901f87-9f24-40d6-9bc1-564863937237)[1]: [marker]: <> (start:footer:codeflow pr)## associated changes in source repos---------[marker]: <> (end:footer:codeflow pr)---------"
dotnet/runtime,303f14295a4b1dea0ce95feb51ee8542919f04dd,"[RISC-V] Match integer const select only on different values (#120748)

Protect against degenerate cases when both legs are e.g. `null ref`,
without it some of the shift cases in `MatchIntConstSelectValues` would
match.

Part of #84834, cc @dotnet/samsung",2025-11-03 12:34:08+00:00,Tomasz Sowiński,0,,,1,18,16,"[risc-v] match integer const select only on different values (issue_ref)protect against degenerate cases when both legs are e.g. ,without it some of the shift cases in wouldmatch.part of issue_ref, cc @dotnet/samsung"
dotnet/runtime,60d14f8d3fb74db52237e9d4dc31c332a23aa3f7,"Fix handling exceptions from native code when interpreted (#121212)

There were two issues. One is that the `SfiNextWorker` was incorrectly
advancing the stack frame iterator in case the interpreter was called
from `CallDescrWorkerInternal` in some cases.
The second was that the call to
`MethodDesc::GetMethodDescOfVirtualizedCode` that is made by the
`InterpExecMethod` can end up running managed code and throw managed
exception. So it needs to have PAL_TRY/PAL_EXCEPT around the invocation,
since the main loop of the interpreter can only catch and process C++
exceptions.

This fixes the
`Loader\classloader\regressions\vsw529206\vsw529206ModuleCctor` test.",2025-11-03 12:52:15+00:00,Jan Vorlicek,1,776e86ac5a6662939866db21e17f326ca0f8a77e,"Fix collided unwind detection (#121625)

A recent fix that has moved 2nd pass of the exception handling to native
code has accidentally broken detectin of collided unwind, that means
detection of when exception escapes a catch or exceptionally called
finally
funclets. Unfortunately none of our coreclr and libraries test exercise
the specific case when the problem occurs, which is as follows:
* There is a try / catch inside of an outer catch
* The try block contains try / finally and the non-exceptionally called
  finally throws.
In this case, the stack walk out of the throwing finally funclet was
incorrectly classifed as an exception collision and the catch was
skipped.

The problem was that the last part of the condition to detect the
collided
unwind was wrong. In fact, it was always true, so any unwind out of a
funclet was considered to be a collision even if the funclet was a
finally that was called non-exceptionally.

This change fixes it by identifying the collision by the fact that the
stack walker has moved from a funclet to native code, which is the only
case when the exception is really escaping an exceptionally called
funclet.

I have also added a regression test for the issue.

Close https://github.com/dotnet/runtime/issues/121578

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2,47,12,"fix handling exceptions from native code when interpreted (issue_ref)there were two issues. one is that the was incorrectlyadvancing the stack frame iterator in case the interpreter was calledfrom in some cases.the second was that the call to that is made by the can end up running managed code and throw managedexception. so it needs to have pal_try/pal_except around the invocation,since the main loop of the interpreter can only catch and process c++exceptions.this fixes the test."
dotnet/runtime,128f290296f5ffaac9769789041efe56ded423eb,"Bump container image in jit-format.yml (#121293)

This was missed when the rest of the images was bumped in
https://github.com/dotnet/runtime/commit/97669b0781f679d7831f64e879779c8723e2a07d",2025-11-03 13:31:18+00:00,Alexander Köplinger,1,098f34dfd014d0c6a7a543803482f3458d7cc081,"Bump actions/upload-artifact from 4 to 5 (#121079)

Bumps
[actions/upload-artifact](https://github.com/actions/upload-artifact)
from 4 to 5.
<details>
<summary>Release notes</summary>
<p><em>Sourced from <a
href=""https://github.com/actions/upload-artifact/releases"">actions/upload-artifact's
releases</a>.</em></p>
<blockquote>
<h2>v5.0.0</h2>
<h2>What's Changed</h2>
<p><strong>BREAKING CHANGE:</strong> this update supports Node
<code>v24.x</code>. This is not a breaking change per-se but we're
treating it as such.</p>
<ul>
<li>Update README.md by <a
href=""https://github.com/GhadimiR""><code>@​GhadimiR</code></a> in <a
href=""https://redirect.github.com/actions/upload-artifact/pull/681"">actions/upload-artifact#681</a></li>
<li>Update README.md by <a
href=""https://github.com/nebuk89""><code>@​nebuk89</code></a> in <a
href=""https://redirect.github.com/actions/upload-artifact/pull/712"">actions/upload-artifact#712</a></li>
<li>Readme: spell out the first use of GHES by <a
href=""https://github.com/danwkennedy""><code>@​danwkennedy</code></a> in
<a
href=""https://redirect.github.com/actions/upload-artifact/pull/727"">actions/upload-artifact#727</a></li>
<li>Update GHES guidance to include reference to Node 20 version by <a
href=""https://github.com/patrikpolyak""><code>@​patrikpolyak</code></a>
in <a
href=""https://redirect.github.com/actions/upload-artifact/pull/725"">actions/upload-artifact#725</a></li>
<li>Bump <code>@actions/artifact</code> to <code>v4.0.0</code></li>
<li>Prepare <code>v5.0.0</code> by <a
href=""https://github.com/danwkennedy""><code>@​danwkennedy</code></a> in
<a
href=""https://redirect.github.com/actions/upload-artifact/pull/734"">actions/upload-artifact#734</a></li>
</ul>
<h2>New Contributors</h2>
<ul>
<li><a href=""https://github.com/GhadimiR""><code>@​GhadimiR</code></a>
made their first contribution in <a
href=""https://redirect.github.com/actions/upload-artifact/pull/681"">actions/upload-artifact#681</a></li>
<li><a href=""https://github.com/nebuk89""><code>@​nebuk89</code></a> made
their first contribution in <a
href=""https://redirect.github.com/actions/upload-artifact/pull/712"">actions/upload-artifact#712</a></li>
<li><a
href=""https://github.com/danwkennedy""><code>@​danwkennedy</code></a>
made their first contribution in <a
href=""https://redirect.github.com/actions/upload-artifact/pull/727"">actions/upload-artifact#727</a></li>
<li><a
href=""https://github.com/patrikpolyak""><code>@​patrikpolyak</code></a>
made their first contribution in <a
href=""https://redirect.github.com/actions/upload-artifact/pull/725"">actions/upload-artifact#725</a></li>
</ul>
<p><strong>Full Changelog</strong>: <a
href=""https://github.com/actions/upload-artifact/compare/v4...v5.0.0"">https://github.com/actions/upload-artifact/compare/v4...v5.0.0</a></p>
<h2>v4.6.2</h2>
<h2>What's Changed</h2>
<ul>
<li>Update to use artifact 2.3.2 package &amp; prepare for new
upload-artifact release by <a
href=""https://github.com/salmanmkc""><code>@​salmanmkc</code></a> in <a
href=""https://redirect.github.com/actions/upload-artifact/pull/685"">actions/upload-artifact#685</a></li>
</ul>
<h2>New Contributors</h2>
<ul>
<li><a href=""https://github.com/salmanmkc""><code>@​salmanmkc</code></a>
made their first contribution in <a
href=""https://redirect.github.com/actions/upload-artifact/pull/685"">actions/upload-artifact#685</a></li>
</ul>
<p><strong>Full Changelog</strong>: <a
href=""https://github.com/actions/upload-artifact/compare/v4...v4.6.2"">https://github.com/actions/upload-artifact/compare/v4...v4.6.2</a></p>
<h2>v4.6.1</h2>
<h2>What's Changed</h2>
<ul>
<li>Update to use artifact 2.2.2 package by <a
href=""https://github.com/yacaovsnc""><code>@​yacaovsnc</code></a> in <a
href=""https://redirect.github.com/actions/upload-artifact/pull/673"">actions/upload-artifact#673</a></li>
</ul>
<p><strong>Full Changelog</strong>: <a
href=""https://github.com/actions/upload-artifact/compare/v4...v4.6.1"">https://github.com/actions/upload-artifact/compare/v4...v4.6.1</a></p>
<h2>v4.6.0</h2>
<h2>What's Changed</h2>
<ul>
<li>Expose env vars to control concurrency and timeout by <a
href=""https://github.com/yacaovsnc""><code>@​yacaovsnc</code></a> in <a
href=""https://redirect.github.com/actions/upload-artifact/pull/662"">actions/upload-artifact#662</a></li>
</ul>
<p><strong>Full Changelog</strong>: <a
href=""https://github.com/actions/upload-artifact/compare/v4...v4.6.0"">https://github.com/actions/upload-artifact/compare/v4...v4.6.0</a></p>
<h2>v4.5.0</h2>
<h2>What's Changed</h2>
<ul>
<li>fix: deprecated <code>Node.js</code> version in action by <a
href=""https://github.com/hamirmahal""><code>@​hamirmahal</code></a> in <a
href=""https://redirect.github.com/actions/upload-artifact/pull/578"">actions/upload-artifact#578</a></li>
<li>Add new <code>artifact-digest</code> output by <a
href=""https://github.com/bdehamer""><code>@​bdehamer</code></a> in <a
href=""https://redirect.github.com/actions/upload-artifact/pull/656"">actions/upload-artifact#656</a></li>
</ul>
<h2>New Contributors</h2>
<ul>
<li><a
href=""https://github.com/hamirmahal""><code>@​hamirmahal</code></a> made
their first contribution in <a
href=""https://redirect.github.com/actions/upload-artifact/pull/578"">actions/upload-artifact#578</a></li>
</ul>
<!-- raw HTML omitted -->
</blockquote>
<p>... (truncated)</p>
</details>
<details>
<summary>Commits</summary>
<ul>
<li><a
href=""https://github.com/actions/upload-artifact/commit/330a01c490aca151604b8cf639adc76d48f6c5d4""><code>330a01c</code></a>
Merge pull request <a
href=""https://redirect.github.com/actions/upload-artifact/issues/734"">#734</a>
from actions/danwkennedy/prepare-5.0.0</li>
<li><a
href=""https://github.com/actions/upload-artifact/commit/03f282445299bbefc96171af272a984663b63a26""><code>03f2824</code></a>
Update <code>github.dep.yml</code></li>
<li><a
href=""https://github.com/actions/upload-artifact/commit/905a1ecb5915b264cbc519e4eb415b5d82916018""><code>905a1ec</code></a>
Prepare <code>v5.0.0</code></li>
<li><a
href=""https://github.com/actions/upload-artifact/commit/2d9f9cdfa99fedaddba68e9b5b5c281eca26cc63""><code>2d9f9cd</code></a>
Merge pull request <a
href=""https://redirect.github.com/actions/upload-artifact/issues/725"">#725</a>
from patrikpolyak/patch-1</li>
<li><a
href=""https://github.com/actions/upload-artifact/commit/9687587dec67f2a8bc69104e183d311c42af6d6f""><code>9687587</code></a>
Merge branch 'main' into patch-1</li>
<li><a
href=""https://github.com/actions/upload-artifact/commit/2848b2cda0e5190984587ec6bb1f36730ca78d50""><code>2848b2c</code></a>
Merge pull request <a
href=""https://redirect.github.com/actions/upload-artifact/issues/727"">#727</a>
from danwkennedy/patch-1</li>
<li><a
href=""https://github.com/actions/upload-artifact/commit/9b511775fd9ce8c5710b38eea671f856de0e70a7""><code>9b51177</code></a>
Spell out the first use of GHES</li>
<li><a
href=""https://github.com/actions/upload-artifact/commit/cd231ca1eda77976a84805c4194a1954f56b0727""><code>cd231ca</code></a>
Update GHES guidance to include reference to Node 20 version</li>
<li><a
href=""https://github.com/actions/upload-artifact/commit/de65e23aa2b7e23d713bb51fbfcb6d502f8667d8""><code>de65e23</code></a>
Merge pull request <a
href=""https://redirect.github.com/actions/upload-artifact/issues/712"">#712</a>
from actions/nebuk89-patch-1</li>
<li><a
href=""https://github.com/actions/upload-artifact/commit/8747d8cd7632611ad6060b528f3e0f654c98869c""><code>8747d8c</code></a>
Update README.md</li>
<li>Additional commits viewable in <a
href=""https://github.com/actions/upload-artifact/compare/v4...v5"">compare
view</a></li>
</ul>
</details>
<br />


[![Dependabot compatibility
score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=actions/upload-artifact&package-manager=github_actions&previous-version=4&new-version=5)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)

Dependabot will resolve any conflicts with this PR as long as you don't
alter it yourself. You can also trigger a rebase manually by commenting
`@dependabot rebase`.

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

You can trigger Dependabot actions by commenting on this PR:
- `@dependabot rebase` will rebase this PR
- `@dependabot recreate` will recreate this PR, overwriting any edits
that have been made to it
- `@dependabot merge` will merge this PR after your CI passes on it
- `@dependabot squash and merge` will squash and merge this PR after
your CI passes on it
- `@dependabot cancel merge` will cancel a previously requested merge
and block automerging
- `@dependabot reopen` will reopen this PR if it is closed
- `@dependabot close` will close this PR and stop Dependabot recreating
it. You can achieve the same result by closing it manually
- `@dependabot show <dependency name> ignore conditions` will show all
of the ignore conditions of the specified dependency
- `@dependabot ignore this major version` will close this PR and stop
Dependabot creating any more for this major version (unless you reopen
the PR or upgrade to it yourself)
- `@dependabot ignore this minor version` will close this PR and stop
Dependabot creating any more for this minor version (unless you reopen
the PR or upgrade to it yourself)
- `@dependabot ignore this dependency` will close this PR and stop
Dependabot creating any more for this dependency (unless you reopen the
PR or upgrade to it yourself)


</details>

Signed-off-by: dependabot[bot] <support@github.com>
Co-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>",1,1,1,bump container image in jit-format.yml (issue_ref)this was missed when the rest of the images was bumped in
dotnet/runtime,0cb6f71d4aa0cfa59e7902a95c1acbcfcf06de4a,"Remove more unsafe code from IPAddress parsing (#121225)


Co-authored-by: Miha Zupan <mihazupan.zupan1@gmail.com>",2025-11-03 13:40:47+00:00,Egor Bogatov,0,,,6,82,110,remove more unsafe code from ipaddress parsing (issue_ref)
dotnet/runtime,cef4c32dd4a9243edbe64ae148027773779f8e29,"Add .devcontainer and .github to report-green.yml triggers (#121296)

To make sure Build Analysis runs even when we only touch these folders.",2025-11-03 15:01:27+00:00,Alexander Köplinger,0,,,1,3,1,add .devcontainer and .github to report-green.yml triggers (issue_ref)to make sure build analysis runs even when we only touch these folders.
dotnet/runtime,3a8ed8b2dbefb66690362e51119ce91dc8088ded,"Add System.Text.RegularExpressions.Generator analyzers to .globalconfig (#121149)

- SYSLIB1040: Invalid GeneratedRegexAttribute usage
- SYSLIB1041: Invalid GeneratedRegexAttribute usage
- SYSLIB1042: Invalid GeneratedRegexAttribute usage
- SYSLIB1043: Invalid GeneratedRegexAttribute usage
- SYSLIB1044: Regex generator limitation reached.",2025-11-03 15:18:08+00:00,xtqqczze,0,,,2,30,0,add system.text.regularexpressions.generator analyzers to .globalconfig (issue_ref)- syslib1040: invalid generatedregexattribute usage- syslib1041: invalid generatedregexattribute usage- syslib1042: invalid generatedregexattribute usage- syslib1043: invalid generatedregexattribute usage- syslib1044: regex generator limitation reached.
dotnet/runtime,5f84cb0d0c577bac79b984174bd3df62be003340,"Start to use STL and stdio in superpmi (#116422)

~As discussed in #112419, there should not be blocker for adopting C++
17 in development environment. SuperPMI is I/O intensive and can be
simplified significantly with std::filesystem.~

It's non-starter to introduce C++ 17. Instead, using std::string can
also simplify string manipulation a lot.

The end goal is to eliminate PAL simulation of Windows I/O functions.
This PR acts as a first step to adopt STL in the dll shim entries.

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>
Co-authored-by: Aaron Robinson <arobins@microsoft.com>
Co-authored-by: Julie Lee <63486087+JulieLeeMSFT@users.noreply.github.com>",2025-11-03 16:52:49+00:00,Huo Yaoyuan,0,,,10,240,324,"start to use stl and stdio in superpmi (issue_ref)~as discussed in issue_ref, there should not be blocker for adopting c++17 in development environment. superpmi is i/o intensive and can besimplified significantly with std::filesystem.~it's non-starter to introduce c++ 17. instead, using std::string canalso simplify string manipulation a lot.the end goal is to eliminate pal simulation of windows i/o functions.this pr acts as a first step to adopt stl in the dll shim entries.---------"
dotnet/runtime,ebbfec3d65195e3f81a7ce71cf6dc82b49f1b264,"[Bounds checks] Tighten pRange in MergeEdgeAssertions via X != CNS assertions (#121273)

Closes https://github.com/dotnet/runtime/issues/121259

When we already have, say, `[1..10]` range for `X` and we encounter `X
!= 1` assertion, we can tighten the range to `[2..10]`

Removes bounds checks for the following snippet:
```cs
void Test(ReadOnlySpan<char> name)
{
    if (name is [] or [':'] or [':', not ':', ..])
    {
        Console.WriteLine(""test"");
    }    
}
```


[Diffs](https://dev.azure.com/dnceng-public/public/_build/results?buildId=1191071&view=ms.vss-build-web.run-extensions-tab)",2025-11-03 17:07:18+00:00,Egor Bogatov,0,,,1,22,2,"[bounds checks] tighten prange in mergeedgeassertions via x != cns assertions (issue_ref)closes when we already have, say, range for and we encounter assertion, we can tighten the range to removes bounds checks for the following snippet:[diffs]("
dotnet/runtime,6a8d698283b32bee13d580c261831e8d2d51d6ee,"Disable stackoverflowtester test on Linux-x64 (#121300)

This test (https://github.com/dotnet/runtime/issues/110173) has been
failing for almost a year and it makes our outerloop triage more
difficult (>10 hits per week) - in many cases pipelines are red only
because of it.

Opinions @dotnet/jit-contrib @janvorli?

It looks like this test is already disabled for win-x86, macos and
nativeaot",2025-11-03 17:18:31+00:00,Egor Bogatov,1,527c6ab272094cd20d96da49937d1e46d9eb7883,"Fix GitHub_25020 test failing on Mono AOT with PlatformNotSupportedException (#121497)

Replace [Fact] with [ConditionalFact(typeof(Utilities), nameof(Utilities.IsReflectionEmitSupported))] to skip test on platforms without reflection emit support

Fixes #121485

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: jkotas <6668460+jkotas@users.noreply.github.com>",1,3,0,"disable stackoverflowtester test on linux-x64 (issue_ref)this test ( has beenfailing for almost a year and it makes our outerloop triage moredifficult (>10 hits per week) - in many cases pipelines are red onlybecause of it.opinions @dotnet/jit-contrib @janvorli?it looks like this test is already disabled for win-x86, macos andnativeaot"
dotnet/runtime,3083294aab1e1a797cb6ca36395712716d4e3be1,"Update MSRC Reporting Process (#121303)

MSRC no longer directly accepts e-mail submissions via
secure@microsoft.com. Submissions must be reported via the MSRC portal
or a one-time token for e-mail submission obtained from the MSRC portal.

This proposal updates the README.md and SECURITY.md to reflect these
changes.",2025-11-03 17:21:17+00:00,Hayden Barnes,0,,,2,3,3,update msrc reporting process (issue_ref)msrc no longer directly accepts e-mail submissions via submissions must be reported via the msrc portalor a one-time token for e-mail submission obtained from the msrc portal.this proposal updates the readme.md and security.md to reflect thesechanges.
dotnet/runtime,b80d8acbddad4731002aad503e034f929df3b82e,"[clr-interp] Handle tail-call return conversions, by requiring that the return type be equivalent in stack layout (#121260)

The current behavior was allowing uninitialized data to show up as
return values. This preserves all cases I believe to be important.

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-11-03 18:07:35+00:00,David Wrighton,1,3650ff35cf3d086d42682fb817a998e309dd90e6,"Fix interpreter jmp to pinvoke (#121329)

The interpreter compiler ignores tail call prefix for tail calls (and
jmp) to pinvokes that are not marshalled. But it is not injecting ""ret""
IR opcode after the call returns, which results in BADCODE reported by
the compiler.

There are several coreclr tests in the JIT/jit64/mcc/interop that fail
due to that.

This change adds injecting proper form of ""ret"" IR opcode after such
calls.",1,27,0,"[clr-interp] handle tail-call return conversions, by requiring that the return type be equivalent in stack layout (issue_ref)the current behavior was allowing uninitialized data to show up asreturn values. this preserves all cases i believe to be important.---------"
dotnet/runtime,0e0759a34f84665dca75e9fd563c235ac50b7a64,Remove unsafe code from the Uri.UnescapeString helper (#121261),2025-11-03 18:17:25+00:00,Miha Zupan,0,,,6,236,258,remove unsafe code from the uri.unescapestring helper (issue_ref)
dotnet/runtime,16940c37bf1db988dacc131fdb7bdfe17ae3deb6,"Add URL scheme validation for HTTP redirects in SocketsHttpHandler (#121263)

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: MihaZupan <25307628+MihaZupan@users.noreply.github.com>",2025-11-03 18:24:11+00:00,Copilot,0,,,2,48,0,add url scheme validation for http redirects in socketshttphandler (issue_ref)
dotnet/runtime,bbe9bc7244c163945f0a5130cd865fd585be84a1,Update testBuildArgs for HardwareIntrinsics tests (#121317),2025-11-03 22:28:11+00:00,Jeremy Koritzinsky,0,,,1,2,2,update testbuildargs for hardwareintrinsics tests (issue_ref)
dotnet/runtime,530d14f08aa31dcd9a80f2b4aeda9e989178a285,Clarify documentation workflows for assemblies with UseCompilerGeneratedDocXmlFile (#121271),2025-11-03 22:50:17+00:00,Copilot,0,,,2,19,4,clarify documentation workflows for assemblies with usecompilergenerateddocxmlfile (issue_ref)
dotnet/runtime,38154f0b3c2e0a827004422f32ddcb894ca935f0,"Replace GetPalThreadIdForLogging() with GetOSThreadId() in NativeAOT (#121322)

Fixes #89650

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: agocke <515774+agocke@users.noreply.github.com>
Co-authored-by: jkotas <6668460+jkotas@users.noreply.github.com>",2025-11-04 02:51:02+00:00,Copilot,1,5735338cb1adb84c282588c812fa66d6fea78399,"Fix NativeAOT GC hang on single-core systems by preventing RT signal queue overflow (#121772)

On single-core systems under high CPU load, NativeAOT GC can hang for
hours when suspending threads. The Unix implementation repeatedly sends
RT signals to threads that cannot suspend immediately, causing signal
queue overflow and handler starvation.

### Changes

- Add `IsActivationPending()` check in `PalHijack()` before sending
suspension signals
- Prevents duplicate signals when activation is already pending
- Aligns Unix behavior with existing Windows implementation

```cpp
void PalHijack(Thread* pThreadToHijack)
{
    if (pThreadToHijack->IsActivationPending())
    {
        return;
    }

    pThreadToHijack->SetActivationPending(true);
    // ... send signal
}
```

The flag is set before sending `pthread_kill()` and cleared in the
signal handler after processing, ensuring at most one pending signal per
thread.

Fixes #121623

<!-- START COPILOT CODING AGENT SUFFIX -->



<details>

<summary>Original prompt</summary>


----

*This section details on the original issue you should resolve*

<issue_title>NativeAOT garbage collector hang</issue_title>
<issue_description>### Description

GC hangs for extended periods (several hours) on single core system
running NativeAOT build when CPU load is high.

Noticed with a web application that uses gRpc for internal communication
between the dotnet application and the rest of the linux system.

### Reproduction Steps

Run NativeAOT build on single CPU core, with high CPU load on that same
core.

### Expected behavior

The application runs.

### Actual behavior

The application stops running for long periods, up to several hours.

### Regression?

Not known.

### Known Workarounds

Reduce the CPU load, increase the priority of the dotnet threads, or run
the application on multiple cores .

### Configuration

Tested with .NET 9.0.2, 9.0.10 and 10.0
OS: Custom Preempt-RT Linux based on Yocto Scarthgap (kernel v6.1)
Architecture: ARM64
Dotnet application running in docker (aspnet noble-chiseled)


### Other information

If I understood the GC correctly, it tries to stop all other threads
before running the actual collection. For the UNIX NativeAOT this is
implemented using real-time signals, so that the GC sends the RT signal
to all threads that need to be suspended, and it does this until the
threads report that they have been suspended succesfully.

AFAICT looking at gdb, the problem is triggered if one thread cannot be
suspended immediately, and the thread trying to run the GC keeps on
filling the rt-signal queue. This means that the thread will keep on
running its' signal handler over and over again and never complete the
actual suspend.

Below snippet of the callstack shown by gdb:

Thread 16 (Thread 0xffbebefdf080 (LWP 4657) ""WebHMI""):
dotnet/runtime#0 0x0000ffff8b767558 in ?? () from
target:/lib/aarch64-linux-gnu/libc.so.6
dotnet/runtime#1 0x0000aaaab9a182fc in PalHijack (hThread=<optimized
out>, pThreadToHijack=0xffbeee0af7f0) at
/__w/1/s/src/coreclr/nativeaot/Runtime/unix/PalRedhawkUnix.cpp:1089
dotnet/runtime#2 0x0000aaaab99d7c78 in ThreadStore::SuspendAllThreads
(this=<optimized out>, waitForGCEvent=<optimized out>) at
/__w/1/s/src/coreclr/nativeaot/Runtime/threadstore.cpp:264
dotnet/runtime#3 0x0000aaaab99d27f4 in GCToEEInterface::SuspendEE
(reason=<optimized out>) at
/__w/1/s/src/coreclr/nativeaot/Runtime/gcenv.ee.cpp:50
dotnet/runtime#4 0x0000aaaab99e6f50 in
WKS::GCHeap::GarbageCollectGeneration (this=<optimized out>, gen=0,
reason=reason_alloc_soh) at /__w/1/s/src/coreclr/gc/gc.cpp:51181
dotnet/runtime#5 0x0000aaaab99e8220 in
WKS::gc_heap::trigger_gc_for_alloc (gen_number=0,
gen_number@entry=-1090665120, gr=3204301792,
msl=msl@entry=0xaaaabcbcc5b8 <WKS::gc_heap::more_space_lock_soh>,
loh_p=false, take_state=<optimized out>) at
/__w/1/s/src/coreclr/gc/gc.cpp:18926
dotnet/runtime#6 0x0000aaaab99e8ea4 in
WKS::gc_heap::try_allocate_more_space
(acontext=acontext@entry=0xffbebefdf7f0, size=size@entry=48,
flags=flags@entry=2, gen_number=0, gen_number@entry=-1090665024) at
/__w/1/s/src/coreclr/gc/gc.cpp:19064
dotnet/runtime#7 0x0000aaaab9a0db78 in WKS::gc_heap::allocate_more_space
(acontext=0xffbebefdf7f0, size=48, flags=2, alloc_generation_number=0)
at /__w/1/s/src/coreclr/gc/gc.cpp:19564
dotnet/runtime#8 WKS::gc_heap::allocate (jsize=48,
acontext=0xffbebefdf7f0, flags=2) at
/__w/1/s/src/coreclr/gc/gc.cpp:19595
dotnet/runtime#9 WKS::GCHeap::Alloc (this=<optimized out>,
context=0xffbebefdf7f0, size=48, flags=2) at
/__w/1/s/src/coreclr/gc/gc.cpp:50122
dotnet/runtime#10 0x0000aaaab99d19fc in GcAllocInternal
(pEEType=0xaaaabd4482d8, uFlags=2, numElements=0,
pThread=0xffbebefdf7f0) at
/__w/1/s/src/coreclr/nativeaot/Runtime/GCHelpers.cpp:542
dotnet/runtime#11 0x0000aaaab9a2550c in RhpNewObject () at
/__w/1/s/src/coreclr/nativeaot/Runtime/arm64/AllocFast.S:88
dotnet/runtime#12 0x0000aaaabb0fd00c in ___ctor (this=...) at
/_/src/coreclr/nativeaot/Common/src/System/Collections/Concurrent/ConcurrentUnifier.cs:69
dotnet/runtime#13 0x0000aaaaba258e00 in
S_P_CoreLib_System_Reflection_Runtime_TypeInfos_RuntimeTypeInfo_TypeComponentsCache__CreatePerNameQueryCaches
(type=..., ignoreCase=true) at
/_/src/coreclr/nativeaot/System.Private.CoreLib/src/System/Reflection/Runtime/TypeInfos/RuntimeTypeInfo.TypeComponentsCache.cs:84
dotnet/runtime#14 0x0000aaaaba258d24 in
S_P_CoreLib_System_Reflection_Runtime_TypeInfos_RuntimeTypeInfo_TypeComponentsCache___ctor
(this=..., type=...) at
/_/src/coreclr/nativeaot/System.Private.CoreLib/src/System/Reflection/Runtime/TypeInfos/RuntimeTypeInfo.TypeComponentsCache.cs:37
dotnet/runtime#15 0x0000aaaaba1ff314 in
S_P_CoreLib_System_Reflection_Runtime_TypeInfos_RuntimeTypeInfo__get_Cache
(this=...) at

/_/src/coreclr/nativeaot/System.Private.CoreLib/src/System/Reflection/Runtime/TypeInfos/RuntimeTypeInfo.BindingFlags.cs:188

Thread 14 (Thread 0xffbeee0af080 (LWP 4622) ""WebHMI""):
dotnet/runtime#0 ActivationHandler (code=34, siginfo=0xffbeee0ab3f0,
context=...

</details>

- Fixes dotnet/runtime#121623

<!-- START COPILOT CODING AGENT TIPS -->
---

💡 You can make Copilot smarter by setting up custom instructions,
customizing its development environment and configuring Model Context
Protocol (MCP) servers. Learn more [Copilot coding agent
tips](https://gh.io/copilot-coding-agent-tips) in the docs.

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: VSadov <8218165+VSadov@users.noreply.github.com>",4,6,6,replace getpalthreadidforlogging() with getosthreadid() in nativeaot (issue_ref)fixes issue_ref
dotnet/runtime,9f1cab7b875fe7c04d7b25c67555e8dadab2b600,"Remove obsolete NativeExceptionHolder (#121315)

This holder was used for the old EH on Unix. Now that the old EH has
been removed from the runtime quite some time ago, it is of no use
anymore.

This change removes it.",2025-11-04 02:52:08+00:00,Jan Vorlicek,0,,,5,1,193,"remove obsolete nativeexceptionholder (issue_ref)this holder was used for the old eh on unix. now that the old eh hasbeen removed from the runtime quite some time ago, it is of no useanymore.this change removes it."
dotnet/runtime,4defc8b1f09bed7062c9af7e5bed95966587e571,Include the end symbol's size in the range. (#121324),2025-11-04 04:50:51+00:00,Jeremy Koritzinsky,0,,,1,1,1,include the end symbol's size in the range. (issue_ref)
dotnet/runtime,119baa90421c92affa88c7d0160a68f73f9687be,"Disable failing Apple mobile tests in extra-platforms (#121292)

## Description

This PR adds platform-specific skip for iOS/tvOS in
NamedPipeClientStream test and disables HugeArray1 with tracking issue.",2025-11-04 07:57:11+00:00,Milos Kotlar,0,,,2,3,0,disable failing apple mobile tests in extra-platforms (issue_ref)## descriptionthis pr adds platform-specific skip for ios/tvos innamedpipeclientstream test and disables hugearray1 with tracking issue.
dotnet/runtime,c084ef3bec4dbbf1c864a6896d7d0a72b7f7634e,"[RISC-V] R2RDump: revamp probing quirks (#118980)

Bring back `ProbeRiscV64Quirks` disabled in #117408, see
https://github.com/dotnet/runtime/pull/117408#discussion_r2210028423 for
context.

I reimplemented it to avoid iterating the instruction stream backwards,
which is impossible with compressed instructions without keeping a
backlog of seen instruction sizes.

The new implementation recognizes only canonical `auipc + jalr/ld/addi`
patterns. On one hand it introduces a temporary inconvenience of putting
the cell name next to unnecessary `addi` instead of `ld/jalr` for
patterns like this:
```asm
18ef20: 17 bf 44 01    auipc   t5, 5195
18ef24: 13 0f 8f 45    addi    t5, t5, 1112 // void Interop.ThrowExceptionForIoErrno(Interop+ErrorInfo, string, bool) (METHOD_ENTRY_DEF_TOKEN)
18ef28: 83 36 0f 00    ld      a3, 0(t5)  // <----- addi's immediate should go here instead
18ef2c: e7 80 06 00    jalr    a3
```

On the other hand, it is much simpler (one third of the original code
size) and comments on all handles (e.g. strings), the hitherto
implementation limited itself to only to calls.

Compressed `jalr/ld/addi` are not recognized yet, they will be
implemented as we teach JIT to emit these encodings.

Part of #84834, cc @dotnet/samsung",2025-11-04 11:00:03+00:00,Tomasz Sowiński,0,,,1,48,148,"[risc-v] r2rdump: revamp probing quirks (issue_ref)bring back disabled in issue_ref, see#discussion_r2210028423 forcontext.i reimplemented it to avoid iterating the instruction stream backwards,which is impossible with compressed instructions without keeping abacklog of seen instruction sizes.the new implementation recognizes only canonical patterns. on one hand it introduces a temporary inconvenience of puttingthe cell name next to unnecessary instead of forpatterns like this:on the other hand, it is much simpler (one third of the original codesize) and comments on all handles (e.g. strings), the hithertoimplementation limited itself to only to calls.compressed are not recognized yet, they will beimplemented as we teach jit to emit these encodings.part of issue_ref, cc @dotnet/samsung"
dotnet/runtime,bd6ad6feef5c96b94a6a1377991f5cb2ca142a48,"[RISC-V] Use common jump binding (#120592)

Remove RISC-V-specific jump distance binding. Re-using common code
simplifies the emitter and improves binding accuracy near the limits.

Part of #84834, cc @dotnet/samsung",2025-11-04 11:03:31+00:00,Tomasz Sowiński,1,7bcfee1a82882b0e29f1dce3a9649fa34ca9232a,"JIT: Handle possibility of late optimized out async calls (#121502)

If we optimize an async call away after the suspension/resumption code
has been created then the emit locations used for resumption info and
diagnostic info will not be valid. Handle this rare case by just storing
0. The value should not matter as we will never suspend here.

Suspension blocks can be removed in this case, but resumption blocks
cannot as they are referenced by the resumption switch. Ideally we would
model things so that resumption blocks could too be removed in these
cases, but that's not so simple.

Fixes issue reported in
https://github.com/dotnet/runtime/pull/121298#issuecomment-3499620124",7,211,529,"[risc-v] use common jump binding (issue_ref)remove risc-v-specific jump distance binding. re-using common codesimplifies the emitter and improves binding accuracy near the limits.part of issue_ref, cc @dotnet/samsung"
dotnet/runtime,346dcf784559a8a8c91d132273bbf3495dc2ed1b,"Update Alpine container images from 3.22 to 3.21 with SHA256 pins (#121331)

Updates Alpine container references from version 3.22 to 3.21 with
SHA256 digest pins for reproducible builds across amd64, arm32v7, and
arm64v8 architectures.

### Changes

- **CoreCLR helix queues**
(`eng/pipelines/coreclr/templates/helix-queues-setup.yml`): Updated 6
container references for linux_musl_x64, linux_musl_arm, and
linux_musl_arm64 platforms (public and internal)
- **Installer helix queues**
(`eng/pipelines/installer/helix-queues-setup.yml`): Updated 2 container
references for linux_musl_x64 and linux_musl_arm64 platforms
- **Libraries helix queues**
(`eng/pipelines/libraries/helix-queues-setup.yml`): Updated 2 container
references for linux_musl_x64 and linux_musl_arm64 platforms

**Note**: The `linux_musl_x64_dev_innerloop` container in
`eng/pipelines/common/templates/pipeline-with-resources.yml` remains at
`alpine-3.22-amd64` (excluded from this update).

### Container digests

- amd64:
`@sha256:bb83259554319753846ffd6892452c679446fee7671b61f52f1bca3b4eb23482`
- arm32v7:
`@sha256:9def952ab6aefa9d4641b4db38c2b147f1f33fede8540c4a971f3a071d3a44de`
- arm64v8:
`@sha256:d09ce866cd51a51f8d361b0c696175ec7e948950ad1caa811eb44ba318bc82f3`

<!-- START COPILOT CODING AGENT SUFFIX -->



<details>

<summary>Original prompt</summary>

> The yml files with references to
mcr.microsoft.com/dotnet-buildtools/prereqs:alpine-3.22 containers need
updated for amd64, arm32v7, and arm64v8.
> 
> amd64 entries should be updated to
mcr.microsoft.com/dotnet-buildtools/prereqs:alpine-3.21-helix-amd64@sha256:bb83259554319753846ffd6892452c679446fee7671b61f52f1bca3b4eb23482
> 
> arm32v7 entries should be updated to
mcr.microsoft.com/dotnet-buildtools/prereqs:alpine-3.21-helix-arm32v7@sha256:9def952ab6aefa9d4641b4db38c2b147f1f33fede8540c4a971f3a071d3a44de
> 
> arm64v8 entries should be updated to
mcr.microsoft.com/dotnet-buildtools/prereqs:alpine-3.21-helix-arm64v8@sha256:d09ce866cd51a51f8d361b0c696175ec7e948950ad1caa811eb44ba318bc82f3


</details>



<!-- START COPILOT CODING AGENT TIPS -->
---

💬 We'd love your input! Share your thoughts on Copilot coding agent in
our [2 minute survey](https://gh.io/copilot-coding-agent-survey).

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: steveisok <471438+steveisok@users.noreply.github.com>",2025-11-04 11:44:18+00:00,Copilot,1,23a83bc0954289d21ebd57008343f026379fffd2,"[Helix] ReAdd AzureLinux Arm64 Queues (#121648)

Reattempt moving Helix queues from Ubuntu 2204 VM hosting container
images to AzureLinux arm64 VM hosting container images. The original
attempt https://github.com/dotnet/runtime/pull/117790 was reverted in
https://github.com/dotnet/runtime/pull/117897 because of capacity
issues, which should be fixed now.

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",3,10,10,"update alpine container images from 3.22 to 3.21 with sha256 pins (issue_ref)updates alpine container references from version 3.22 to 3.21 withsha256 digest pins for reproducible builds across amd64, arm32v7, andarm64v8 architectures.### changes- **coreclr helix queues**(): updated 6container references for linux_musl_x64, linux_musl_arm, andlinux_musl_arm64 platforms (public and internal)- **installer helix queues**(): updated 2 containerreferences for linux_musl_x64 and linux_musl_arm64 platforms- **libraries helix queues**(): updated 2 containerreferences for linux_musl_x64 and linux_musl_arm64 platforms**note**: the container in remains at (excluded from this update).### container digests- amd64:- arm32v7:- arm64v8:<!-- start copilot coding agent suffix --><details><summary>original prompt</summary>> the yml files with references tomcr.microsoft.com/dotnet-buildtools/prereqs:alpine-3.22 containers needupdated for amd64, arm32v7, and arm64v8.> > amd64 entries should be updated to> > arm32v7 entries should be updated to> > arm64v8 entries should be updated to</details><!-- start copilot coding agent tips -->---💬 we'd love your input! share your thoughts on copilot coding agent inour [2 minute survey](---------"
dotnet/runtime,a5275f5225326942b8b4efc17153d361e073d31f,"[wasm][coreclr] Remove [Get|Set]InterpExecMethodSP (#121200)

As they are not used on wasm.

Let `GetCurrentSP` return C runtime stack pointer.

Also fix few asserts.

---------

Co-authored-by: Aaron R Robinson <arobins@microsoft.com>
Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-11-04 11:55:07+00:00,Radek Doulik,1,01e9dbf93a46cbd835d9546fda7f2b9bf8250388,"Disable TLS optimization for musl riscv64 (#121662)

On linux-musl-riscv64, when corehost (dotnet) dlopen()s libcoreclr, we
get:

> \# dotnet --version
> Failed to load
/root/.dotnet/shared/Microsoft.NETCore.App/10.0.0-rtm.25564.199/libcoreclr.so,
error: Error relocating
/root/.dotnet/shared/Microsoft.NETCore.App/10.0.0-rtm.25564.199/libcoreclr.so:
Uq???&?J?N?R?V?Z? .????: initial-exec TLS resolves to dynamic definition
in
/root/.dotnet/shared/Microsoft.NETCore.App/10.0.0-rtm.25564.199/libcoreclr.so
Failed to bind to CoreCLR at
'/root/.dotnet/shared/Microsoft.NETCore.App/10.0.0-rtm.25564.199/'
Failed to create CoreCLR, HRESULT: 0x80008088

musl maintainer described the issue on this golang thread:
https://github.com/golang/go/issues/54805#issuecomment-1253972041. When
I tried
`LD_PRELOAD=/root/.dotnet/shared/Microsoft.NETCore.App/10.0.0-rtm.25564.199/libcoreclr.so
dotnet --version`, it started working and SDK started working.

By disabling the optimization as we have done for linux-musl-arm64 and
removing `la.tls.ie` from binary works without the `LD_PRELOAD` hack.

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",26,63,57,[wasm][coreclr] remove [get|set]interpexecmethodsp (issue_ref)as they are not used on wasm.let return c runtime stack pointer.also fix few asserts.---------
dotnet/runtime,5075f7294a2a1ed2045bf4c5c01ae64730ab3854,"Unify asserts in the interpexec.cpp (#121213)

There was a mix of using `assert` and `_ASSERTE` in this file. The
`assert` is a pain for local testing on Windows, as it pops out a dialog
box when the assert fires.
This change unifies all of them to `_ASSERTE`.",2025-11-04 13:44:21+00:00,Jan Vorlicek,0,,,1,12,12,"unify asserts in the interpexec.cpp (issue_ref)there was a mix of using and in this file. the is a pain for local testing on windows, as it pops out a dialogbox when the assert fires.this change unifies all of them to ."
dotnet/runtime,3650ff35cf3d086d42682fb817a998e309dd90e6,"Fix interpreter jmp to pinvoke (#121329)

The interpreter compiler ignores tail call prefix for tail calls (and
jmp) to pinvokes that are not marshalled. But it is not injecting ""ret""
IR opcode after the call returns, which results in BADCODE reported by
the compiler.

There are several coreclr tests in the JIT/jit64/mcc/interop that fail
due to that.

This change adds injecting proper form of ""ret"" IR opcode after such
calls.",2025-11-04 13:45:13+00:00,Jan Vorlicek,1,8c78b43e6c2c47d421a5d9ba138da937158517cc,"Fix generic argument access in filter funclets (#121332)

In funclets of generic methods, access to the generic argument may be
needed. It doesn't work correctly, because the filter funclet has its
own locals and various IR instructions that use that argument cannot
access it.

This change adds copying of that argument from the parent frame to the
funclet frame at the same offset so that the access to it just works.",1,27,0,"fix interpreter jmp to pinvoke (issue_ref)the interpreter compiler ignores tail call prefix for tail calls (andjmp) to pinvokes that are not marshalled. but it is not injecting ""ret""ir opcode after the call returns, which results in badcode reported bythe compiler.there are several coreclr tests in the jit/jit64/mcc/interop that faildue to that.this change adds injecting proper form of ""ret"" ir opcode after suchcalls."
dotnet/runtime,3eb06e521db34e35a3ebf88a98dd89bdcbdf306e,"Disable PerfMap generation for Apple mobile platforms (#121237)

## Description

After https://github.com/dotnet/runtime/pull/121187 Crossgen2 determines
cross-compilation targets by reading
Crossgen2Tool.GetMetadata(MetadataKeys.TargetOS). This code path
triggers PerfMapWriter, which currentl doesn't support iOS targets. This
PR disables PerfMap generation for Apple mobile platforms.",2025-11-04 14:24:39+00:00,Milos Kotlar,1,aec646f0d03eac05379f2656301e246751ed9a94,"Expand test coverage for native AOT on android (#121217)

- Enables building native AOT smoke tests for android with one APK per
test project
- Adds marker files to set expected exit code when running through helix
- Adds a runtime-androidemulator job for native AOT smoke tests
- Expands libraries test coverage to include non-smoke tests
- Sets up appcontext base directory in test host
- Calls managed main through a pinvoke when running Exe project in the
runtime tests

Fixes https://github.com/dotnet/runtime/issues/120715",3,3,2,"disable perfmap generation for apple mobile platforms (issue_ref)## descriptionafter crossgen2 determinescross-compilation targets by readingcrossgen2tool.getmetadata(metadatakeys.targetos). this code pathtriggers perfmapwriter, which currentl doesn't support ios targets. thispr disables perfmap generation for apple mobile platforms."
dotnet/runtime,8dbf91223a294a0fca74987f83937564c9bd8393,"[browser][coreCLR] async main, thread pool, timers (#120976)

Co-authored-by: Aaron R Robinson <arobins@microsoft.com>
Co-authored-by: Stephen Toub <stoub@microsoft.com>
Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-11-04 17:06:55+00:00,Pavel Savara,1,de63866d40b6a9b5a34a219edcf5699975892c46,"Implement bit manipulation API for BFloat16 (#120602)

Closes #119874.

Contains missing API in
https://github.com/dotnet/runtime/issues/119874#issuecomment-3372642202.
Please confirm whether it needs reiterating through API review.",42,477,84,"[browser][coreclr] async main, thread pool, timers (issue_ref)"
dotnet/runtime,9e1a746cb1d075c98668f13eab483db9c50c69fc,"nested FailFast (#121306)

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-11-04 17:09:31+00:00,Pavel Savara,0,,,1,10,1,nested failfast (issue_ref)
dotnet/runtime,79a2a1a9fae41defd2a0d6fbdd6074e5ce120854,Add more tests for IPv6 Uri delimiters (#120942),2025-11-04 17:17:07+00:00,Miha Zupan,0,,,2,56,12,add more tests for ipv6 uri delimiters (issue_ref)
dotnet/runtime,74fba8a10fb66160745af9502a2555f23a1b6c1c,[browser][coreCLR] runtime pack (#121174),2025-11-04 17:27:51+00:00,Pavel Savara,1,b524fc3bef87090209308a3c24eb5d21b5795851,"Add support for JumpStubStubManager when FEATURE_JIT is enabled (#121338)

## Description

This PR fixes the iOS build by wrapping JumpStubStubManager in
FEATURE_JIT. It unblocks https://github.com/dotnet/dotnet/pull/3175 and
adds the iOS CoreCLR functional test to runtime.yml to catch build
failures earlier in PRs.",9,52,10,[browser][coreclr] runtime pack (issue_ref)
dotnet/runtime,fd5d4cfe164b0061276c129666ed852d51de88bd,"[main] Update dependencies from dotnet/hotreload-utils, dotnet/icu, dotnet/runtime-assets (#120395)

This pull request updates the following dependencies

[marker]: <> (Begin:0c5a34f5-504e-413b-9376-08d8d8ff2d75)
## From https://github.com/dotnet/runtime-assets
- **Subscription**:
[0c5a34f5-504e-413b-9376-08d8d8ff2d75](https://maestro.dot.net/subscriptions?search=0c5a34f5-504e-413b-9376-08d8d8ff2d75)
- **Build**:
[20251103.1](https://dev.azure.com/dnceng/internal/_build/results?buildId=2830037)
([289328](https://maestro.dot.net/channel/8297/github:dotnet:runtime-assets/build/289328))
- **Date Produced**: November 3, 2025 10:33:26 AM UTC
- **Commit**:
[b5d67650a6a37772770a9df6ca762eebd0c21617](https://github.com/dotnet/runtime-assets/commit/b5d67650a6a37772770a9df6ca762eebd0c21617)
- **Branch**: [main](https://github.com/dotnet/runtime-assets/tree/main)

[DependencyUpdate]: <> (Begin)

- **Updates**:
  - From [11.0.0-beta.25467.3 to 11.0.0-beta.25553.1][16]
     - Microsoft.DotNet.CilStrip.Sources
     - Microsoft.NET.HostModel.TestData
     - System.ComponentModel.TypeConverter.TestData
     - System.Data.Common.TestData
     - System.Drawing.Common.TestData
     - System.Formats.Tar.TestData
     - System.IO.Compression.TestData
     - System.IO.Packaging.TestData
     - System.Net.TestData
     - System.Private.Runtime.UnicodeData
     - System.Runtime.Numerics.TestData
     - System.Runtime.TimeZoneData
     - System.Security.Cryptography.X509Certificates.TestData
     - System.Text.RegularExpressions.TestData
     - System.Windows.Extensions.TestData

[16]:
https://github.com/dotnet/runtime-assets/compare/3f45384563...b5d67650a6

[DependencyUpdate]: <> (End)


[marker]: <> (End:0c5a34f5-504e-413b-9376-08d8d8ff2d75)







[marker]: <> (Begin:4247a230-8931-4538-5b64-08d8d8feb47e)
## From https://github.com/dotnet/icu
- **Subscription**:
[4247a230-8931-4538-5b64-08d8d8feb47e](https://maestro.dot.net/subscriptions?search=4247a230-8931-4538-5b64-08d8d8feb47e)
- **Build**:
[20251031.1](https://dev.azure.com/dnceng/internal/_build/results?buildId=2828672)
([289180](https://maestro.dot.net/channel/8297/github:dotnet:icu/build/289180))
- **Date Produced**: October 31, 2025 7:00:19 PM UTC
- **Commit**:
[3a2572c6ed55f0ebdcafa4911f8566ab164a9621](https://github.com/dotnet/icu/commit/3a2572c6ed55f0ebdcafa4911f8566ab164a9621)
- **Branch**:
[dotnet/main](https://github.com/dotnet/icu/tree/dotnet/main)

[DependencyUpdate]: <> (Begin)

- **Updates**:
  - From [11.0.0-alpha.1.25466.1 to 11.0.0-alpha.1.25531.1][14]
     - Microsoft.NETCore.Runtime.ICU.Transport

[14]: https://github.com/dotnet/icu/compare/5974b6862e...3a2572c6ed

[DependencyUpdate]: <> (End)


[marker]: <> (End:4247a230-8931-4538-5b64-08d8d8feb47e)








[marker]: <> (Begin:bfe6dacf-8231-4ea1-e2fe-08d962847885)
## From https://github.com/dotnet/hotreload-utils
- **Subscription**:
[bfe6dacf-8231-4ea1-e2fe-08d962847885](https://maestro.dot.net/subscriptions?search=bfe6dacf-8231-4ea1-e2fe-08d962847885)
- **Build**:
[20251028.1](https://dev.azure.com/dnceng/internal/_build/results?buildId=2826439)
([288851](https://maestro.dot.net/channel/8297/github:dotnet:hotreload-utils/build/288851))
- **Date Produced**: October 28, 2025 5:31:55 PM UTC
- **Commit**:
[1c8f1e360f50bc3edeb8969a3a8414333e389bae](https://github.com/dotnet/hotreload-utils/commit/1c8f1e360f50bc3edeb8969a3a8414333e389bae)
- **Branch**:
[main](https://github.com/dotnet/hotreload-utils/tree/main)

[DependencyUpdate]: <> (Begin)

- **Updates**:
  - From [11.0.0-alpha.0.25479.1 to 11.0.0-alpha.0.25528.1][15]
     - Microsoft.DotNet.HotReload.Utils.Generator.BuildTool

[15]:
https://github.com/dotnet/hotreload-utils/compare/acc1d0b77f...1c8f1e360f

[DependencyUpdate]: <> (End)


[marker]: <> (End:bfe6dacf-8231-4ea1-e2fe-08d962847885)

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Alexander Köplinger <alex.koeplinger@outlook.com>
Co-authored-by: Larry Ewing <lewing@microsoft.com>",2025-11-04 18:20:19+00:00,dotnet-maestro[bot],1,59b0175116bd9eac2b8912f72c24292721ea8192,"Upgrade to ICU 72.1.0.4 (#121202)

Connected PRs in ICU: https://github.com/dotnet/icu/pull/686,
https://github.com/dotnet/icu/pull/691.

Minor globalization library changes were required to match the BCP47
format.

Major changes:
- Security: Removes legacy macros, drops never-implemented declarations,
reducing potential macro clashes and dead-code exposure, raises ICU4J’s
minimum to Java 8, enables safe builds with C++20.
- Compliance: Moves to Unicode 15/CLDR 42.
- Data: Improves emojis, measurement unit formatting, extends
number/time-zone formatting APIs,
- Performance: Modernises ICU4C for C++20 compilers.

Upgrade notes summary:
- Norwegian canonicalisation changes and `LocaleMatcher` tweaks can
alter language fallback (https://github.com/dotnet/runtime/issues/79815
might be connected to the former).
- `DateTimePatternGenerator` fix changes date-time joiners (e.g., comma
→ “at”).
- Releases advance tzdata from 2021a to 2022e with pre-1970 truncations,
affecting historical timestamps.

The previous upgrade attempt:
https://github.com/dotnet/runtime/pull/93756.

Fixes https://github.com/dotnet/runtime/issues/120898.",2,48,48,"[main] update dependencies from dotnet/hotreload-utils, dotnet/icu, dotnet/runtime-assets (issue_ref)this pull request updates the following dependencies[marker]: <> (begin:0c5a34f5-504e-413b-9376-08d8d8ff2d75)## from - **subscription**:[0c5a34f5-504e-413b-9376-08d8d8ff2d75](- **build**:[20251103.1](([289328](- **date produced**: november 3, 2025 10:33:26 am utc- **commit**:[b5d67650a6a37772770a9df6ca762eebd0c21617](- **branch**: [main]([dependencyupdate]: <> (begin)- **updates**: - from [11.0.0-beta.25467.3 to 11.0.0-beta.25553.1][16] - microsoft.dotnet.cilstrip.sources - microsoft.net.hostmodel.testdata - system.componentmodel.typeconverter.testdata - system.data.common.testdata - system.drawing.common.testdata - system.formats.tar.testdata - system.io.compression.testdata - system.io.packaging.testdata - system.net.testdata - system.private.runtime.unicodedata - system.runtime.numerics.testdata - system.runtime.timezonedata - system.security.cryptography.x509certificates.testdata - system.text.regularexpressions.testdata - system.windows.extensions.testdata[16]:[dependencyupdate]: <> (end)[marker]: <> (end:0c5a34f5-504e-413b-9376-08d8d8ff2d75)[marker]: <> (begin:4247a230-8931-4538-5b64-08d8d8feb47e)## from - **subscription**:[4247a230-8931-4538-5b64-08d8d8feb47e](- **build**:[20251031.1](([289180](- **date produced**: october 31, 2025 7:00:19 pm utc- **commit**:[3a2572c6ed55f0ebdcafa4911f8566ab164a9621](- **branch**:[dotnet/main]([dependencyupdate]: <> (begin)- **updates**: - from [11.0.0-alpha.1.25466.1 to 11.0.0-alpha.1.25531.1][14] - microsoft.netcore.runtime.icu.transport[14]: [dependencyupdate]: <> (end)[marker]: <> (end:4247a230-8931-4538-5b64-08d8d8feb47e)[marker]: <> (begin:bfe6dacf-8231-4ea1-e2fe-08d962847885)## from - **subscription**:[bfe6dacf-8231-4ea1-e2fe-08d962847885](- **build**:[20251028.1](([288851](- **date produced**: october 28, 2025 5:31:55 pm utc- **commit**:[1c8f1e360f50bc3edeb8969a3a8414333e389bae](- **branch**:[main]([dependencyupdate]: <> (begin)- **updates**: - from [11.0.0-alpha.0.25479.1 to 11.0.0-alpha.0.25528.1][15] - microsoft.dotnet.hotreload.utils.generator.buildtool[15]:[dependencyupdate]: <> (end)[marker]: <> (end:bfe6dacf-8231-4ea1-e2fe-08d962847885)---------"
dotnet/runtime,69d8087eecff2a99b122ac80c5ec2a93adc7293d,Improve HttpEnvironmentProxy uri parsing (#121206),2025-11-04 18:31:21+00:00,Miha Zupan,0,,,2,22,21,improve httpenvironmentproxy uri parsing (issue_ref)
dotnet/runtime,ad47f6304395935e3f902f2c545bc8c227252d9e,"Document Async flag representation in IL (#121281)

@agocke @VSadov for review
FYI @333fred 

This was implemented: https://github.com/dotnet/runtime/pull/115658",2025-11-05 01:33:00+00:00,Julien Couvreur,0,,,1,2,0,document async flag representation in il (issue_ref)@agocke @vsadov for reviewfyi @333fred this was implemented:
dotnet/runtime,d653db4f76125762768c280de63217d12d58feda,"[mono][sgen] Enable configuration of nursery allowance ratio (#120441)

The option was ignored if max-heap-size wasn't set. Also remove unused
gc params option.",2025-11-05 06:13:51+00:00,Vlad Brezae,0,,,4,8,38,[mono][sgen] enable configuration of nursery allowance ratio (issue_ref)the option was ignored if max-heap-size wasn't set. also remove unusedgc params option.
dotnet/runtime,bd2e75ad72dfe143aff09d68a15bbcebccee4164,"Add centralized Helix platform alias definitions file (#120817)

This PR adds a single YAML file (`eng/pipelines/helix-platforms.yml`) to
centralize Helix platform queue name mappings. The file defines stable
variable aliases for both latest and oldest supported OS versions across
macOS, Linux, Windows, Browser/WASM, and Android platforms.",2025-11-05 07:26:25+00:00,Copilot,0,,,1,311,0,"add centralized helix platform alias definitions file (issue_ref)this pr adds a single yaml file () tocentralize helix platform queue name mappings. the file defines stablevariable aliases for both latest and oldest supported os versions acrossmacos, linux, windows, browser/wasm, and android platforms."
dotnet/runtime,67b5e732b085c6c50aba82ecdb38f095e873234e,"Update servicing branch naming convention for .NET 10+ (#121328)

Starting with .NET 10, servicing branches no longer use the `-staging`
suffix. Branches are now simply `release/10.0`, `release/11.0`, etc.,
whereas .NET 8 and 9 use `release/8.0-staging` and
`release/9.0-staging`.

## Changes

**Commit 1: Backport process documentation and config**
- `.github/workflows/backport.yml` - Updated PR template to document
both naming conventions
- `docs/project/library-servicing.md` - Clarified branch naming varies
by version with examples for both patterns

**Commit 2: AzDO pipeline configuration**  
- `eng/pipelines/libraries/stress/http.yml` - Added `release/*.0`
pattern alongside `release/*-staging`
- `eng/pipelines/libraries/stress/ssl.yml` - Added `release/*.0` pattern
alongside `release/*-staging`

All changes maintain backward compatibility with .NET 8 and 9 while
supporting the new .NET 10+ convention.

Example backport commands:
```bash
# .NET 8/9
/backport to release/9.0-staging

# .NET 10+
/backport to release/10.0
```

<!-- START COPILOT CODING AGENT SUFFIX -->



<details>

<summary>Original prompt</summary>

> Update the backport template content to revise the instructions for
servicing branches. With .NET 8 and .NET 9, we used
`release/8.0-staging` and `release/9.0-staging` respectively. With .NET
10+, we no longer use the `-staging` branch name; backports will simply
target `release/10.0` (or `release/X.0` generically).
> 
> The backport.yml probably needs to be updated, and the
`docs/project/library-servicing.md` file probably needs updating. There
might be azdo pipelines or other configs that referencing the staging
branch too--those could be updated as well, but that should be in a
separate commit from the servicing backport process docs and config.


</details>



<!-- START COPILOT CODING AGENT TIPS -->
---

💬 We'd love your input! Share your thoughts on Copilot coding agent in
our [2 minute survey](https://gh.io/copilot-coding-agent-survey).

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: jeffhandley <1031940+jeffhandley@users.noreply.github.com>",2025-11-05 07:27:51+00:00,Copilot,1,ddd250ee5d96671536dbaeab7ecb237f36f01ab9,"Fix md-lint and copilot instructions (#121421)

* Fixes md-lint issue from copilot in
https://github.com/dotnet/runtime/pull/121328
* Updates copilot instructions to not have trailing whitespace in md
files",4,20,7,"update servicing branch naming convention for .net 10+ (issue_ref)starting with .net 10, servicing branches no longer use the suffix. branches are now simply , , etc.,whereas .net 8 and 9 use and.## changes**commit 1: backport process documentation and config**- - updated pr template to documentboth naming conventions- - clarified branch naming variesby version with examples for both patterns**commit 2: azdo pipeline configuration** - - added pattern alongside - - added patternalongside all changes maintain backward compatibility with .net 8 and 9 whilesupporting the new .net 10+ convention.example backport commands:<!-- start copilot coding agent suffix --><details><summary>original prompt</summary>> update the backport template content to revise the instructions forservicing branches. with .net 8 and .net 9, we used and respectively. with .net10+, we no longer use the branch name; backports will simplytarget (or generically).> > the backport.yml probably needs to be updated, and the file probably needs updating. theremight be azdo pipelines or other configs that referencing the stagingbranch too--those could be updated as well, but that should be in aseparate commit from the servicing backport process docs and config.</details><!-- start copilot coding agent tips -->---💬 we'd love your input! share your thoughts on copilot coding agent inour [2 minute survey](---------"
dotnet/runtime,b524fc3bef87090209308a3c24eb5d21b5795851,"Add support for JumpStubStubManager when FEATURE_JIT is enabled (#121338)

## Description

This PR fixes the iOS build by wrapping JumpStubStubManager in
FEATURE_JIT. It unblocks https://github.com/dotnet/dotnet/pull/3175 and
adds the iOS CoreCLR functional test to runtime.yml to catch build
failures earlier in PRs.",2025-11-05 08:37:40+00:00,Milos Kotlar,1,09a4d35c12a0e3b82a5c675512c12ed64bfecc5b,"[clr-ios] Enable Release builds and dynamic linking on Apple mobile (#121117)

## Description

This PR enables the interpreter by default on Apple mobile platforms and
enables dynamic linking in AppleAppBuilder used in the testing pipeline.

Contributes to https://github.com/dotnet/runtime/issues/119006

Fixes https://github.com/dotnet/runtime/issues/121023",5,51,0,add support for jumpstubstubmanager when feature_jit is enabled (issue_ref)## descriptionthis pr fixes the ios build by wrapping jumpstubstubmanager infeature_jit. it unblocks andadds the ios coreclr functional test to runtime.yml to catch buildfailures earlier in prs.
dotnet/runtime,0769ce2b311a0e5e78549eac92b3d8a6ec94405f,"Long-lived AsyncMethodVariant in MethodWithGCInfo/MethodWithToken (#121357)

Incorporates feedback from
https://github.com/dotnet/runtime/pull/121218, creating a long-lived
async MethodDesc. There will be more warts that need to be worked out
once we actually compile these, in particular lots of
`(EcmaMethod)methodDesc.GetMethodDefinition()`, which doesn't work with
`AsyncMethodVariant`.",2025-11-05 08:40:43+00:00,Jackson Schuster,1,b63089a2789257643fda7b79a1f795b51551cf2d,Fix compiling HWIntrinsic fallbacks (#122463),17,196,152,"long-lived asyncmethodvariant in methodwithgcinfo/methodwithtoken (issue_ref)incorporates feedback from creating a long-livedasync methoddesc. there will be more warts that need to be worked outonce we actually compile these, in particular lots of, which doesn't work with."
dotnet/runtime,8c78b43e6c2c47d421a5d9ba138da937158517cc,"Fix generic argument access in filter funclets (#121332)

In funclets of generic methods, access to the generic argument may be
needed. It doesn't work correctly, because the filter funclet has its
own locals and various IR instructions that use that argument cannot
access it.

This change adds copying of that argument from the parent frame to the
funclet frame at the same offset so that the access to it just works.",2025-11-05 09:26:31+00:00,Jan Vorlicek,1,b1cb4c502f1eec66227a31e705934fb67fc091f0,"[clr-interp] Fix more issues implicit conversions (#121319)

- When boxing to a floating point value, ensure that the stack value has
the correct type
- When boxing to a native int or uint, if the stack value is I4 and
we're on a 64bit platform, sign-extend the I4 before boxing
- When stack's merge convert to the target stack type instead of blindly
copying.

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2,18,1,"fix generic argument access in filter funclets (issue_ref)in funclets of generic methods, access to the generic argument may beneeded. it doesn't work correctly, because the filter funclet has itsown locals and various ir instructions that use that argument cannotaccess it.this change adds copying of that argument from the parent frame to thefunclet frame at the same offset so that the access to it just works."
dotnet/runtime,f7e7d27092b02e49dd458a878f55c6744d7f1bae,"Unify SEH wrapping for method calls in the interpexec.cpp (#121311)

This change adds a way to wrap any method call in a SEH exception try /
catch. Until now, we were adding a new function for each case that
needed this wrapping.

I've verified that the generated code in the release build is the same
as before this change.",2025-11-05 09:30:50+00:00,Jan Vorlicek,1,6e1e6b1f34ac821c47364f5b0baf91d18e1fcbe7,"Add support in WASM for calling `UnmanagedCallersOnly` functions (#121359)

Fixes https://github.com/dotnet/runtime/issues/121006

This provides an entry point, similar to P/Invokes thunks, for generated
reverse P/Invoke stubs. A commented out example of the generated code
was provided.",1,49,71,"unify seh wrapping for method calls in the interpexec.cpp (issue_ref)this change adds a way to wrap any method call in a seh exception try /catch. until now, we were adding a new function for each case thatneeded this wrapping.i've verified that the generated code in the release build is the sameas before this change."
dotnet/runtime,3345865f57f59f4a54e1749c06f5a2782d961a16,"[mono][sgen] Add option to disable tarjan gc bridge optimization (#121243)

This option is also currently causing crashes in the gc bridge.",2025-11-05 13:08:43+00:00,Vlad Brezae,1,fe17c2c5fa1e4f441fd658d800a8496896d221c1,"[mono][sgen] Make color visible to client permanent (#121247)

A color (SCC) that isn't containing any bridge objects is made visible
to client if xrefs_in * xrefs_out is greater than 60. Later on in bridge
processing, we need to build the callback to pass for .net android.
During this stage, we reduce from the full set of SCCs to SCCs that
should be visible to client (containing bridge objects or satisfying the
above condition). If an SCC has an xref to a color that is not visible
to client, we need to do a recursive traversal to find all neighbors
that are visible to client. The problem is that this process can end up
making an SCC no longer visible to client, leading to inconsistencies in
the computation. Consider a color(C1) that has a neighbor that is not
visible to client(C2). In this final stage, we compute the neighbors of
C1 by traversing recursively through the neighbors of C2. If C2 ends up
pointing to colors that were already neighbors of C1, then, following
this computation, C1 would end up with fewer xrefs_out, making the color
no longer visible to client. This make future checks incorrect,
resulting in building incorrect graph for client.

This scenario seems rare in practice, we should have gotten way more
reports otherwise. We fix this by pinning the visible_to_client property
for a color once it first satisfies it, so it will no longer matter how
many actual xrefs the color has.

Fixes assertions like:
```
* Assertion at /home/vbrezae/Xamarin/repos/runtime/src/mono/mono/metadata/sgen-tarjan-bridge.c:1151, condition `color_visible_to_client (cd)' not met
```",2,4,2,[mono][sgen] add option to disable tarjan gc bridge optimization (issue_ref)this option is also currently causing crashes in the gc bridge.
dotnet/runtime,09a4d35c12a0e3b82a5c675512c12ed64bfecc5b,"[clr-ios] Enable Release builds and dynamic linking on Apple mobile (#121117)

## Description

This PR enables the interpreter by default on Apple mobile platforms and
enables dynamic linking in AppleAppBuilder used in the testing pipeline.

Contributes to https://github.com/dotnet/runtime/issues/119006

Fixes https://github.com/dotnet/runtime/issues/121023",2025-11-05 14:25:02+00:00,Milos Kotlar,1,b2db39929ab7b85a620cc615f2ebbed719d1b4c8,"Avoid shipping libclrinterpreter in wasm runtime packs (#121405)

## Description

The libclrinterpreter is already linked into the coreclr_static library
for wasm in:

https://github.com/dotnet/runtime/blob/e0837be345978738d0387055e0eb1e2b989dd787/src/coreclr/dlls/mscoree/coreclr/CMakeLists.txt#L201

This PR updates the build to avoid shipping libclrinterpreter in the
wasm runtime packs as separate static librariy, which resolves the
manifest errors:
```
The following files are missing entries in the templated manifest: libclrinterpreter.dylib. 
```

Fixes https://github.com/dotnet/runtime/issues/121399",13,84,70,[clr-ios] enable release builds and dynamic linking on apple mobile (issue_ref)## descriptionthis pr enables the interpreter by default on apple mobile platforms andenables dynamic linking in appleappbuilder used in the testing pipeline.contributes to fixes
dotnet/runtime,b1cb4c502f1eec66227a31e705934fb67fc091f0,"[clr-interp] Fix more issues implicit conversions (#121319)

- When boxing to a floating point value, ensure that the stack value has
the correct type
- When boxing to a native int or uint, if the stack value is I4 and
we're on a 64bit platform, sign-extend the I4 before boxing
- When stack's merge convert to the target stack type instead of blindly
copying.

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-11-05 19:58:56+00:00,David Wrighton,1,48fd2f34188b53f815e2c190bc747e075a759389,"Fix DoesValueTypeContainGCRefs in the interpreter (#121846)

There was a mistake in the implementation that prevented it from working
correctly in some cases. The return value of the getClassSize() is not a
number of slots filled in the array, but a number of GC references in
the array. So if there were e.g. three slots and there was one GC
reference in the second slot, the DoesValueTypeContainGCRefs returned
false.",1,57,2,"[clr-interp] fix more issues implicit conversions (issue_ref)- when boxing to a floating point value, ensure that the stack value hasthe correct type- when boxing to a native int or uint, if the stack value is i4 andwe're on a 64bit platform, sign-extend the i4 before boxing- when stack's merge convert to the target stack type instead of blindlycopying.---------"
dotnet/runtime,96d2c26549dbae5c5a9a438762714f15c67e0cc9,"First part of async support in native AOT (#121295)

Following works with runtime async enabled in Roslyn on native AOT:

```csharp
public class Async2Void
{
    public static void Main()
    {
        var t = AsyncTestEntryPoint(123, 456);
        t.Wait();
        Console.WriteLine(t.Result);
    }

    private static async Task<int> AsyncTestEntryPoint(int x, int y)
    {
        int result = await OtherAsync(x, y);
        return result;
    }

    private static async Task<int> OtherAsync(int x, int y)
    {
        Console.WriteLine(x);
        Console.WriteLine(y);
        return x + y;
    }
}
```

The implementation strategy is as follows:

* In the compiler, whenever someone holds an `EcmaMethod` of an asyncv2
method, it means they're holding the `RuntimeAsync` flavor of the method
in CoreCLR VM parlance. The return value is a `Task`,
`MethodDesc.IsAsync` is true, `MethodSignature.IsAsyncCallConv` is
false. The IL is a thunk to the `AsyncVariantImplMethod` flavor.
* In the compiler, we have a new `MethodDesc` descendant:
`AsyncVariantImplMethod`. This is the actual method with async calling
convention that corresponds to some `EcmaMethod` with `IsAsync`==true.
For this one: the return value is unwrapped from `Task`,
`MethodDesc.IsAsync` is true, `MethodSignature.IsAsyncCallConv` is true.
The IL is the actual IL that corresponds to the wrapped `EcmaMethod` on
disk.

Cc @dotnet/ilc-contrib",2025-11-05 20:51:18+00:00,Michal Strehovský,1,83496bfa0f0aec33525588ff2b8aee115915cebc,"Fixes for generics and shared generics (#121494)

A couple fixes for things I ran into as I work on generic virtual method
support with runtime async.

Cc @dotnet/ilc-contrib",7,140,6,"first part of async support in native aot (issue_ref)following works with runtime async enabled in roslyn on native aot:the implementation strategy is as follows:* in the compiler, whenever someone holds an of an asyncv2method, it means they're holding the flavor of the methodin coreclr vm parlance. the return value is a , is true, isfalse. the il is a thunk to the flavor.* in the compiler, we have a new descendant:. this is the actual method with async callingconvention that corresponds to some with ==true.for this one: the return value is unwrapped from , is true, is true.the il is the actual il that corresponds to the wrapped ondisk.cc @dotnet/ilc-contrib"
dotnet/runtime,e1136d1ba1c1abfbc9605aee0f5dd5516a2bfa46,Extract out minimal concerns from PEImageLayout for R2R images (#120777),2025-11-05 21:30:25+00:00,Jeremy Koritzinsky,1,7c2df42877c868ae76e202395b23d811930bb870,"Fix FrameDataAllocator popping in InterpreterFrame::ExceptionUnwind (#122164)

The InterpreterFrame::ExceptionUnwind_Impl was passing a wrong topmost
frame to the frameDataAllocator.PopInfo - the one read directly from the
m_pTopInterpMethodContextFrame which is not always up to date. The
correct way is to use the call to GetTopInterpMethodContextFrame to get
it.

It was leading to the following assert in some libraries tests:
assert(pCurrent == pFirst && pCurrent->pFramePos ==
pCurrent->pFrameStart)",13,118,36,extract out minimal concerns from peimagelayout for r2r images (issue_ref)
dotnet/runtime,11702c4619a9086bbf50b22af56b6777351bd6b0,"Use ADRP/LDR pairs for ARM64 64-bit indirect address loads in crossgen2 (#121352)

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: jkoritzinsky <1571408+jkoritzinsky@users.noreply.github.com>
Co-authored-by: Jeremy Koritzinsky <jekoritz@microsoft.com>
Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-11-05 22:24:10+00:00,Copilot,0,,,8,87,33,use adrp/ldr pairs for arm64 64-bit indirect address loads in crossgen2 (issue_ref)
dotnet/runtime,d7fba07b136e8431ccef19c7cca2b62d1ed5297f,"Disable several tests incompatible with interpreter (#121401)

These tests use COM interop, native varargs, marshalled pinvoke or
handle exception thrown in pinvoked native code.",2025-11-06 08:55:38+00:00,Jan Vorlicek,1,177eff3c0244026eca16d6e26b1851d64d775668,"Disable more tests for interpreter (#121410)

Disable one part of the aliasing_retbuf that uses pinvoke with
marshalling, fix disabling of calli_excep test that needs to be disabled
on the project level as it is executed as isolated and finally
Test_HndIndex_10_Reordered that has the same issue as previously
disabled Test_HndIndex_10_Plain.",4,14,1,"disable several tests incompatible with interpreter (issue_ref)these tests use com interop, native varargs, marshalled pinvoke orhandle exception thrown in pinvoked native code."
dotnet/runtime,e0837be345978738d0387055e0eb1e2b989dd787,"Add debug information for runtime async methods (#120303)

- Add new JIT-EE API to report back debug information about the generated state
  machine and continuations
- Refactor debug info storage on VM side to be more easily extensible. The new
  format has either a thin or fat header. The fat header is used when we have
  either uninstrumented bounds, patchpoint info, rich debug info or async debug
  info, and stores the blob sizes of all of those components in addition to the
  bounds and vars. It is indicated by the first field (size of bounds) having
  value 0, which is an uncommon value for this field.
- Add new async debug information to the storage on the VM side
- Implement new format in R2R as well, bump R2R major version (might as well do
  this now as we expect to need to store async debug info in R2R during .NET 11
  anyway)
- Remove `Continuation.Resume` in favor of a `Continuation.ResumeInfo` pointer
  that gives both the resumption stub and a `DiagnosticIP`. The `DiagnosticIP`
  can be used for async stackwalking and for keying into the async debug info
- Teach the JIT to emit ""async resumption info tables"" and update the async
  transformation to point `Continuation.ResumeInfo` at this table's entries on
  suspension
- Add a new `ICorDebugInfo::ASYNC` source type; emit mappings with this source
  type for generated suspension and resumption code",2025-11-06 09:39:53+00:00,Jakob Botsch Nielsen,1,b435b40c0cdb431ee1f3c7f282919b13feafa302,"[Wasm RyuJIT] Wasm control flow basics (#121417)

Determine how to emit Wasm control flow from the JIT's control flow
graph.

Relies on loop-aware RPO to determine the block order. Currently only
handles the main method. Assumes irreducible loops have been fixed
upstream (which is not yet guaranteed; bails out if not so).

Doesn't actually do any emission, just prints a textual description in
the JIT dump (along with a dot markup version).

Uses only LOOP and BLOCK. Tries to limit the extent of BLOCK.

Run for now as an optional phase even if not targeting Wasm, to do some
stress testing.

Contributes to #121178",64,1685,698,"add debug information for runtime async methods (issue_ref)- add new jit-ee api to report back debug information about the generated state machine and continuations- refactor debug info storage on vm side to be more easily extensible. the new format has either a thin or fat header. the fat header is used when we have either uninstrumented bounds, patchpoint info, rich debug info or async debug info, and stores the blob sizes of all of those components in addition to the bounds and vars. it is indicated by the first field (size of bounds) having value 0, which is an uncommon value for this field.- add new async debug information to the storage on the vm side- implement new format in r2r as well, bump r2r major version (might as well do this now as we expect to need to store async debug info in r2r during .net 11 anyway)- remove in favor of a pointer that gives both the resumption stub and a . the can be used for async stackwalking and for keying into the async debug info- teach the jit to emit ""async resumption info tables"" and update the async transformation to point at this table's entries on suspension- add a new source type; emit mappings with this source type for generated suspension and resumption code"
dotnet/runtime,2e85cbda5839dc36705686fc4a3d6b50f2cef5a9,Restrict Uri IPv6 scope ID chars and disallow length prefixes (#121392),2025-11-06 14:11:28+00:00,Miha Zupan,1,20901cbc4ab07fe04e05b5c8f08874f95d1e29ec,Fix IPAddress & Uri octal parsing inconsistencies (#121962),5,64,137,restrict uri ipv6 scope id chars and disallow length prefixes (issue_ref)
dotnet/runtime,ae7e004a675d27e87cc48519c652af3844aa5567,[browser] Bump Playwright on WasmBuildTests to 1.55.0 (#121408),2025-11-06 17:46:54+00:00,Pavel Savara,0,,,1,1,1,[browser] bump playwright on wasmbuildtests to 1.55.0 (issue_ref)
dotnet/runtime,4f905a80b28cc0dee618ee87f99e2fa076bf7aee,Merge JIT/Regression tests into merged wrapper assemblies (#121078),2025-11-07 00:47:08+00:00,Jeremy Koritzinsky,1,5e97723bdd8eb9eff95c52b7120cec6bfb5a0a19,"Fix native aot outerloop (#121541)

Test merging in #121078 caused us to start compiling this test again. We
were not compiling it because more than 64k fields hits CodeView
limitations in LF_STRUCTURE/LF_CLASS (can't have more than 65534
_introduced fields_). We assert and crash compilation.

CoreCLR has it's own limitation of 65535 fields, including inherited,
but not counting `object.m_pEEType` (that doesn't exist in CoreCLR
CoreLib).

This changes the test to not have a class with > 65534 introduced
fields. This avoids the CodeView assert. We still don't generate correct
CodeView for bigger classes. Not sure if it's worth adding blocking. We
could block loading such types but 65534 is an odd number and CodeView
is an odd reason.

Cc @dotnet/ilc-contrib",2178,5209,11845,merge jit/regression tests into merged wrapper assemblies (issue_ref)
dotnet/runtime,efe20ba981500a00eb643fa75e9d4a9fc0653ea7,"Move the BSTR trailbyte tracking out of the sync block (#121362)

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-11-07 01:20:45+00:00,Jeremy Koritzinsky,1,5bceb8184fcde55143d2102a65c72bd6233e950b,"Look up the correct `MethodTable` on COM methods. (#121431)

Fixes #121252

Update tests to activate correctly.",15,117,323,move the bstr trailbyte tracking out of the sync block (issue_ref)
dotnet/runtime,704d4294b1e7ea993f0c6b535a00831a0d369b36,"[RuntimeAsync] Fix for configured ValueTask sources (#120704)

Fixes: #120709

There is a scenario where `ValueTask` decides on whether to run
continuations on the scheduling context or not.

It happens in a case when an `await` calls into a `ValueTask` that wraps
a `ValueTaskSource`.
In such case we may have a nontrivial context provided to the
`ValueTaskSource` at the time of the await, but `ValueTaskSource` may
choose to ignore the context when running callbacks.

A typical test sensitive to this looks like:


https://github.com/dotnet/runtime/blob/ce717acc70b4f165be5ab4de5053ef604287fd9f/src/libraries/System.IO.Pipelines/tests/SchedulerFacts.cs#L48-L89

The part
```cs
                    ReadResult result = await pipe.Reader.ReadAsync();
```

should behave as
```cs
                    ReadResult result = await pipe.Reader.ReadAsync().ConfigureAwait(false);
```

Otherwise we end up posting the `doRead` continuation to the tracking
`CustomSynchronizationContext` which only tracks Posts and does not run
them, thus the test makes no progress.

---------

Co-authored-by: Jakob Botsch Nielsen <Jakob.botsch.nielsen@gmail.com>",2025-11-07 03:13:42+00:00,Vladimir Sadov,1,ea694d84df646ef212a74e83c8bfafa053d46606,"Skip nullcheck frozen object in unbox optimization (#121709)

Fixes the build crash in #121697.

Since with TrimMode=partial, we consider all static fields targets of
reflection, we cannot allow inlining their contents. With full trimming
allowed, the optimization is unlocked and we hit an assert when trying
to nullcheck a constant.",7,504,81,[runtimeasync] fix for configured valuetask sources (issue_ref)
dotnet/runtime,621d670c95e8aa1d3623c37b09b2a3ed4fcad41b,"Async continuations for native AOT (#121398)

The same program as in #121295 still works, but we can newly report async helpers as Intrinsic/Async.

This implements things around suspension/resumption. Most of this change is around handling continuation types.

Continuation types are synthetic types (created in the compiler) that derive from `Continuation` in the CoreLib. The JIT requests these based on the shape of locals it needs to preserve. What we get from the JIT in CorInfoImpl is size of the type and a pointer map (1011001 - non-zero means ""GC pointer is here""). What we need to generate is a `MethodTable` for a type that derives from `Continuation` and has the specified GC layout after fields inherited from `Continuation`.

We already have a similar thing in the compiler (""`MethodTable`"" we use for GC statics), so we're reusing the same approach. The `MethodTable` is pretty restricted and not the whole `MethodTable` API surface on it is available at runtime. However, it implements enough that the GC can operate on it.

The two new types are `AsyncContinuationType`. This is a type system `MetadataType` that represents the continuation pointer map. Then we have `AsyncContinuationEETypeNode` which is the thing that gets emitted into the output file - the `MethodTable` itself.

The resumption stub is just a stubbed out TODO for someone else to look into for now.",2025-11-07 06:07:01+00:00,Michal Strehovský,1,8ec531db96d108422e6680fb5f985f12a576921f,"MethodEntrypointOrTentativeMethod should tolerate same entrypoints for different MethodDescs (#121703)

Ran into this as I was trying something with #121456. That PR introduces
a situation where two MethodDescs could map to the same EntryPoint. We
didn't previously have that since MethodEntrypointOrTentativeMethod
doesn't support unboxing thunks (that do a similar trick).

Without this fix we would end up with two `TentativeInstanceMethodNode`
that point to the same EntryPoint and that doesn't lead to anything
good. These need to be 1:1 with entrypoints.

Cc @dotnet/ilc-contrib",16,369,58,"async continuations for native aot (issue_ref)the same program as in issue_ref still works, but we can newly report async helpers as intrinsic/async.this implements things around suspension/resumption. most of this change is around handling continuation types.continuation types are synthetic types (created in the compiler) that derive from in the corelib. the jit requests these based on the shape of locals it needs to preserve. what we get from the jit in corinfoimpl is size of the type and a pointer map (1011001 - non-zero means ""gc pointer is here""). what we need to generate is a for a type that derives from and has the specified gc layout after fields inherited from .we already have a similar thing in the compiler ("""" we use for gc statics), so we're reusing the same approach. the is pretty restricted and not the whole api surface on it is available at runtime. however, it implements enough that the gc can operate on it.the two new types are . this is a type system that represents the continuation pointer map. then we have which is the thing that gets emitted into the output file - the itself.the resumption stub is just a stubbed out todo for someone else to look into for now."
dotnet/runtime,663e792a392cd1a68639787adc6fbb856a82eeb8,Report CALLCONV_ASYNCCALL and FLAG_ASYNC on AsyncExplicitImpl methods (#121403),2025-11-07 06:08:34+00:00,Michal Strehovský,1,4c32268e8462cc762abe8786ef4e939d90f07ea7,"Fix `IsAsyncCall` definition (#121814)

The implementation didn't match the comment.",4,11,14,report callconv_asynccall and flag_async on asyncexplicitimpl methods (issue_ref)
dotnet/runtime,6e1e6b1f34ac821c47364f5b0baf91d18e1fcbe7,"Add support in WASM for calling `UnmanagedCallersOnly` functions (#121359)

Fixes https://github.com/dotnet/runtime/issues/121006

This provides an entry point, similar to P/Invokes thunks, for generated
reverse P/Invoke stubs. A commented out example of the generated code
was provided.",2025-11-07 09:20:23+00:00,Aaron R Robinson,1,f81f82551403fa8e3b9dc79234caa7b915d653c0,"[browser][coreCLR] fix trimming of TimerHandler, BackgroundJobHandler (#122068)",20,330,81,"add support in wasm for calling functions (issue_ref)fixes this provides an entry point, similar to p/invokes thunks, for generatedreverse p/invoke stubs. a commented out example of the generated codewas provided."
dotnet/runtime,e3f6dd91d72ad25fda781c77754c050ff7c596ea,"Make `EnumAllVirtualSlots` return slots for interfaces (#121438)

Calling `EnumAllVirtualSlots` on classes returns all `newslot` methods
that exist in the class hierarchy. Calling this on interfaces produced
an empty enumeration.

For runtime-async, it would be convenient if this returned the logical
slots on interfaces. While interfaces don't have physical slots, they
still have logical slots, so it's not a big stretch.

Doing this now simplifies things in some places, and requires an extra
`if` check in other places. But it will be really convenient for
runtime-async.",2025-11-07 22:22:49+00:00,Michal Strehovský,0,,,6,90,108,"make return slots for interfaces (issue_ref)calling on classes returns all methodsthat exist in the class hierarchy. calling this on interfaces producedan empty enumeration.for runtime-async, it would be convenient if this returned the logicalslots on interfaces. while interfaces don't have physical slots, theystill have logical slots, so it's not a big stretch.doing this now simplifies things in some places, and requires an extra check in other places. but it will be really convenient forruntime-async."
dotnet/runtime,c2e6bff83f7a06c50b67d9bbd7a02434e973d4c9,"JIT: Add more specific range assertion for bitwise `and`/`or` (#120980)

This is an attempt to address #119962 by adding a new range assertion
for `x & y` when a range for `x` and `y` can be determined. As part of the change, this PR also adds a non-negative range assertion for GT_CNS_INT when appropriate. 

---------

Co-authored-by: Adam Perlin <adamperlin@microsoft.com>",2025-11-07 22:43:10+00:00,Adam Perlin,0,,,2,39,4,"jit: add more specific range assertion for bitwise / (issue_ref)this is an attempt to address issue_ref by adding a new range assertionfor when a range for and can be determined. as part of the change, this pr also adds a non-negative range assertion for gt_cns_int when appropriate. ---------"
dotnet/runtime,767be2a5fc0ca26a4059883ae22a5d4522086cc6,"Enable thread abort support in the interpreter (#121446)

This change adds check for thread abort to the INTOP_SAFEPOINT and also
to the code resuming after catch. This makes all the libraries
controlled execution tests pass.",2025-11-07 23:00:29+00:00,Jan Vorlicek,1,5277ab4ec81733875510f050d8d19292411daeb8,"Fix / disable several coreclr tests with interpreter (#121492)

This change contains the following:
* Fix cases when returning smaller than 32 bit int / uint values -
introduce new INTOP_RET variants like Mono
* Fix index out of range check case when native int is used as an index
to an array. To avoid adding an explosion of array element access IR
opcodes, it adds a range check opcode that is used only when the index
is nint.
* put back zeroing to INTOP_NEWOBJ_VT, few tests were failing because it
was missing and we've already fixed the issue we had with the zeroing
before by setting the ""noCallArgs""
* Disable a test that uses pinvoke marshalling with calli",1,18,0,enable thread abort support in the interpreter (issue_ref)this change adds check for thread abort to the intop_safepoint and alsoto the code resuming after catch. this makes all the librariescontrolled execution tests pass.
dotnet/runtime,9155f26be3517e6baefbae295ffca4c5f56cc45a,"Virtual methods with runtime async (#121443)

This makes virtual methods work with runtime async. Depends on #121438.

Runtime async methods can be virtually called two ways: as
Task-returning, or as runtime-async. We can even end up in situation
where Task-returning non-runtime-async virtual methods get called as
runtime-async.

The easiest way to solve this is to give each Task-returning method two
separate virtual slots. We still track the slot use so unused slots will
not get generated.

The `VirtualMethodAlgorithm` abstraction that we added for universal
shared generics comes in handy because it lets us centralize where all
of this work happens. As a result, we don't need to teach pretty much
any node dealing with virtuals about runtime async, it just falls out.

This doesn't make generic virtual methods yet, those need more fixes.",2025-11-08 23:40:29+00:00,Michal Strehovský,1,824a87fb7d57509fffb0dbd83aa17864a988d02a,"Track async variants when generating generic dictionaries (#121573)

In `GenericDictionaryNode` we have a piece of code that ensures whenever
a canonical method body of a method on a type depends on something and
we have a concrete instance of such type, the specialized thing is also
created.

For example, `class Foo<T> { Type GrabType() => typeof(List<T>); }`:
when we compile `Foo<__Canon>.GrabType` we find out we need `List<T>`.
Elsewhere we find out we need `Foo<object>`. The code in
GenericDictionaryNode that I'm modifying ensures we also generate
`List<object>`.

We do this by walking all methods on the type and generating special
`ShadowConcrete` dependencies for any canonical bodies of the methods on
the type. We were missing async variants from this reporting.

The change in EETypeNode is related, but only affects multifile
compilation that we don't care much about. I'm fixing it because it has
the same problem.",7,159,10,"virtual methods with runtime async (issue_ref)this makes virtual methods work with runtime async. depends on issue_ref.runtime async methods can be virtually called two ways: astask-returning, or as runtime-async. we can even end up in situationwhere task-returning non-runtime-async virtual methods get called asruntime-async.the easiest way to solve this is to give each task-returning method twoseparate virtual slots. we still track the slot use so unused slots willnot get generated.the abstraction that we added for universalshared generics comes in handy because it lets us centralize where allof this work happens. as a result, we don't need to teach pretty muchany node dealing with virtuals about runtime async, it just falls out.this doesn't make generic virtual methods yet, those need more fixes."
dotnet/runtime,4459d2006773767e7d23f139a20b27ec26f0be59,"Remove redundant #endif/#if (#121474)

This PR removes are a pair of `#endif` and `#if define` where it just
ends and restarts the same macro.",2025-11-09 19:19:46+00:00,yowl,0,,,1,0,2,remove redundant #endif/#if (issue_ref)this pr removes are a pair of and where it justends and restarts the same macro.
dotnet/runtime,54be8c8a752e8f2414110b02ce703ae8d6f60912,"Move StubHelpers.AsyncCallContinuation to AsyncHelpers. (#121458)

Moves StubHelpers.AsyncCallContinuation to AsyncHelpers so
StubHelpers.cs doesn't need to be added to nativeaot.

Thought it would be good to have separate commits for this and the rest
of https://github.com/dotnet/runtime/pull/121456",2025-11-10 10:14:33+00:00,Jackson Schuster,1,9f1bae3dd791e430b6a0a1e238d485b905a82cae,Fix ValueTask`1.ConfigureAwait intrinsic detection (#121612),9,21,17,move stubhelpers.asynccallcontinuation to asynchelpers. (issue_ref)moves stubhelpers.asynccallcontinuation to asynchelpers sostubhelpers.cs doesn't need to be added to nativeaot.thought it would be good to have separate commits for this and the restof
dotnet/runtime,e689bf8076e8597b6fb10ce7180ff784da2abbb0,"Limit native AOT to `CORINFO_HELP_ALLOC_CONTINUATION` (#121444)

Native AOT doesn't have a `MethodDesc` at runtime. But that's fine, we
don't have a loader to keep alive either.

Cc @dotnet/ilc-contrib",2025-11-10 11:47:58+00:00,Michal Strehovský,1,3baf6d25bdef6e39ee12bebab437bbc51321fca4,"JIT: Move Thread sync and exec context save/restore to happen around runtime async bodies (#121448)

This fixes an issue where there was a behavioral difference between
async1 and async2 for async to sync runtime async calls. Before this PR
the JIT would always save and restore contexts around awaits of
task-returning methods, regardless of whether they were implemented as
runtime async functions or not. That does not match async1: in async1,
the context save and restore happens around the body in each async
method. The former logic was an optimization, but the optimization is
only correct for runtime async to runtime async calls.

We cannot in general know if a callee is implemented by runtime async or
not, so we have to move the context save/restore to happen around the
body of all runtime async methods.

An example test program that saw the behavioral difference before is the
following:
```csharp
using System;
using System.Threading;
using System.Threading.Tasks;

public class Program
{
    static void Main()
    {
        Foo().GetAwaiter().GetResult();
    }

    static async Task Foo()
    {
        SynchronizationContext.SetSynchronizationContext(new MySyncCtx(123));
        Console.WriteLine(((MySyncCtx)SynchronizationContext.Current).Arg);
        await Bar();
        Console.WriteLine(((MySyncCtx)SynchronizationContext.Current).Arg);
    }

    static Task Bar()
    {
        SynchronizationContext.SetSynchronizationContext(new MySyncCtx(124));
        return Task.CompletedTask;
    }

    class MySyncCtx(int arg) : SynchronizationContext
    {
        public int Arg => arg;
    }
}
```

Async1: 123 124
Runtime async before: 123 123
Runtime async after: 123 124",1,16,18,"limit native aot to (issue_ref)native aot doesn't have a at runtime. but that's fine, wedon't have a loader to keep alive either.cc @dotnet/ilc-contrib"
dotnet/runtime,6a393a53b211213dc56a8f25976f6f7eb7546d87,Add some validation to UriBuilder.Host setter (#121083),2025-11-10 14:15:49+00:00,Miha Zupan,0,,,2,74,8,add some validation to uribuilder.host setter (issue_ref)
dotnet/runtime,e155b45eb750ad5ab1a8060ba088493354d4ccb3,Remove some unsafe usage from the float-formatting logic (#121308),2025-11-10 15:42:33+00:00,Tanner Gooding,0,,,4,205,155,remove some unsafe usage from the float-formatting logic (issue_ref)
dotnet/runtime,02bea82dc5c1b46364e6a3f8859a84b3a0337d5a,Use spin lock on SyncBlock Lock upgrade path (#121355),2025-11-10 17:47:52+00:00,Jeremy Koritzinsky,0,,,3,119,114,use spin lock on syncblock lock upgrade path (issue_ref)
dotnet/runtime,61bb961b2615e2da5e084ce2e61c714635a152de,"Port coreclr interpreter to riscv64 (#121276)

Co-authored-by: Tomasz Sowiński <tomeksowi@gmail.com>",2025-11-10 20:45:52+00:00,Adeel Mujahid,1,bf17d45e7223638964621d28f62b4eb995286560,"Fix interpreter Unix x64 call stub generator (#121942)

The call stub generator is missing support for return buffer passing in
RSI, only RDI was supported by mistake.

This change fixes it.

Fixes https://github.com/dotnet/runtime/issues/121631

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>
Co-authored-by: Aaron R Robinson <arobins@microsoft.com>",17,2174,81,port coreclr interpreter to riscv64 (issue_ref)
dotnet/runtime,ad655080b953a83de8b429729f0267cc0e118691,"Add support for host callback to get information for platform-native composite R2R images (#121363)

Add the basic runtime flow for calling into the host to get information
about a platform-native R2R - see docs/design/coreclr/botr/readytorun-platform-native-envelope.md#runtime-consuming-a-platform-native-r2r-image.
- Add `get_native_code_data` callback to `host_runtime_contract`
- If a component R2R assembly has
`READYTORUN_FLAG_PLATFORM_NATIVE_IMAGE`, invoke the callback to get the
R2R header, image size, and image base address
- Currently only implemented and tested on Windows (with local changes
to include the flag)
- Mach-O support will need https://github.com/dotnet/runtime/pull/121186

Contributes to https://github.com/dotnet/runtime/issues/120065.",2025-11-11 02:38:59+00:00,Elinor Fung,0,,,14,462,101,"add support for host callback to get information for platform-native composite r2r images (issue_ref)add the basic runtime flow for calling into the host to get informationabout a platform-native r2r - see docs/design/coreclr/botr/readytorun-platform-native-envelope.md#runtime-consuming-a-platform-native-r2r-image.- add callback to - if a component r2r assembly has, invoke the callback to get ther2r header, image size, and image base address- currently only implemented and tested on windows (with local changesto include the flag)- mach-o support will need contributes to"
dotnet/runtime,0688ab5bc469f85ebee8c47a4a797d260bcd900f,"Consolidate direct paths of NativeLibrary API to managed implementation (#121058)

Taking NativeAOT implementation and adapting coreclr behavior. The
remaining code for P/Invoke resolver isn't changed.

Mono implementation can be update too, but I'm unsure about how the
fallback registered for wasm should be handled.

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>
Co-authored-by: Aaron R Robinson <arobins@microsoft.com>",2025-11-11 03:52:06+00:00,Huo Yaoyuan,1,6eb2b9b37b8b9dda76158b74bc8a823890b776ab,"Add SpanOfCharAsUtf8StringMarshaller and remove ValueUtf8Converter (#121870)

Make sure that the thread-local P/Invoke last error is not getting
corrupted by marshalling post-actions.

Fixes #121868

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: jkotas <6668460+jkotas@users.noreply.github.com>
Co-authored-by: Jan Kotas <jkotas@microsoft.com>",15,50,183,"consolidate direct paths of nativelibrary api to managed implementation (issue_ref)taking nativeaot implementation and adapting coreclr behavior. theremaining code for p/invoke resolver isn't changed.mono implementation can be update too, but i'm unsure about how thefallback registered for wasm should be handled.---------"
dotnet/runtime,e125fc4d0d1d8a6192e6af922fff0cf54f55d3b7,"Add /sdl compiler flag for SDL compliance (#121510)

- Add `/sdl` flag to central MSVC configuration
- Remove redundant `/GS` flag (subsumed by `/sdl`)
- Remove redundant `/we` warning options (subsumed by `/sdl`)

Fixes #121509

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: agocke <515774+agocke@users.noreply.github.com>
Co-authored-by: jkotas <6668460+jkotas@users.noreply.github.com>",2025-11-11 05:58:55+00:00,Copilot,1,b3d1db9e37f904bf53fa3e682b16bb745560f00d,"Update MSVC build flags to meet SDL requirements (#121823)

Re-enables specific MSVC compiler warnings as error so that we continue
to meet SDL requirements. Addresses regression introduced by
https://github.com/dotnet/runtime/pull/121510.",1,1,24,add /sdl compiler flag for sdl compliance (issue_ref)- add flag to central msvc configuration- remove redundant flag (subsumed by )- remove redundant warning options (subsumed by )fixes issue_ref---------
dotnet/runtime,83496bfa0f0aec33525588ff2b8aee115915cebc,"Fixes for generics and shared generics (#121494)

A couple fixes for things I ran into as I work on generic virtual method
support with runtime async.

Cc @dotnet/ilc-contrib",2025-11-11 11:50:43+00:00,Michal Strehovský,1,a2b94d3bddeb442af679503f407a5b17fe47cd28,"Map `CORINFO_HELP_THROWEXACT` to `THROW` (#121579)

This is temporary. It will not do the right thing wrt exception stack at
runtime, but it's better than crashing at compile time (which is what it
does now).

Not filing a bug on this; we either fix this before we start running the
tests or hit it during test async bringup (I assume there's a test) and
then ActiveIssue it as needed.",7,44,19,fixes for generics and shared generics (issue_ref)a couple fixes for things i ran into as i work on generic virtual methodsupport with runtime async.cc @dotnet/ilc-contrib
dotnet/runtime,7bcfee1a82882b0e29f1dce3a9649fa34ca9232a,"JIT: Handle possibility of late optimized out async calls (#121502)

If we optimize an async call away after the suspension/resumption code
has been created then the emit locations used for resumption info and
diagnostic info will not be valid. Handle this rare case by just storing
0. The value should not matter as we will never suspend here.

Suspension blocks can be removed in this case, but resumption blocks
cannot as they are referenced by the resumption switch. Ideally we would
model things so that resumption blocks could too be removed in these
cases, but that's not so simple.

Fixes issue reported in
https://github.com/dotnet/runtime/pull/121298#issuecomment-3499620124",2025-11-11 12:38:12+00:00,Jakob Botsch Nielsen,1,87f60f103673658f3d410cb10e1370d1515a260d,"JIT: Fix another issue when optimizing out async calls late (#121550)

`genAsyncResumeInfoTable` may be null if we optimize out all async
calls, so handle this case too.",2,8,3,"jit: handle possibility of late optimized out async calls (issue_ref)if we optimize an async call away after the suspension/resumption codehas been created then the emit locations used for resumption info anddiagnostic info will not be valid. handle this rare case by just storing0. the value should not matter as we will never suspend here.suspension blocks can be removed in this case, but resumption blockscannot as they are referenced by the resumption switch. ideally we wouldmodel things so that resumption blocks could too be removed in thesecases, but that's not so simple.fixes issue reported in#issuecomment-3499620124"
dotnet/runtime,118ff8e70941176b2b9b182c57047ca2aec301bd,[browser] modularize corerun (#121318),2025-11-11 12:53:54+00:00,Pavel Savara,1,f813007d092219b23d3becc783ec273ecec4f12a,"[browser][mono] Make sure we treat the 4GB ptrs as unsigned (#121221)

Fixes problems with pointers over 2GB mark. This is still `use on your
own risk`

- crypto buffers
- debugger buffers
- WS buffers
- event-pipe buffers
- jiterp traces, dropped support for unused `constantSlots` feature
- JS MemoryView,Span
- various memory JS APIs
- asset loading
- string marshaling

Related https://github.com/dotnet/runtime/pull/109079
Related https://github.com/dotnet/runtime/issues/58382

---------

Co-authored-by: pavelsavara <pavel.savara@gmail.com>
Co-authored-by: Pavel Savara <pavelsavara@microsoft.com>
Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",50,564,188,[browser] modularize corerun (issue_ref)
dotnet/runtime,f48fbe9594b1b6ca9ffd829f65afbb39784b9d12,"Implement SVE2 ConvertToSingleOdd and ConvertToSingleRoundToOdd (#118957)

Contributes to #94018

@dotnet/arm64-contrib @amanasifkhalid @a74nh

Co-authored-by: @jacob-crawley

---------

Co-authored-by: Jacob Crawley <jacob.crawley@arm.com>
Co-authored-by: Tanner Gooding <tagoo@outlook.com>",2025-11-11 18:19:34+00:00,SwapnilGaikwad,1,ef4300552fe09dfb773a753aa5861a6a9f7a8f1d,"Arm64: [SVE] Fix failing NaN comparisons in Sve2.ConvertTo* tests (#121706)

Contribute towards #121659

This PR fixes the NaN comparisons that were incorrectly handled in
ConvertTo* tests as highlighted in the following screenshot.

@dotnet/arm64-contrib @a74nh @EgorBo",7,130,31,implement sve2 converttosingleodd and converttosingleroundtoodd (issue_ref)contributes to issue_ref@dotnet/arm64-contrib @amanasifkhalid @a74nh
dotnet/runtime,a12ecf93aedc8f111ec8cc5a8f6f51c899413d9e,Update ImportThunk for community architectures to use PC-relative addressing (#121453),2025-11-11 22:12:11+00:00,Jeremy Koritzinsky,0,,,7,37,111,update importthunk for community architectures to use pc-relative addressing (issue_ref)
dotnet/runtime,5574021b240fa472c5d37d3618de3733930d3072,"Remove unsafe from DateTimeRawInfo (#121479)

Remove a bit of unsafe code from DateTimeRawInfo + some small perf
tweaks to mitigate performance impact from bounds checks.",2025-11-12 20:42:41+00:00,Egor Bogatov,0,,,1,47,47,remove unsafe from datetimerawinfo (issue_ref)remove a bit of unsafe code from datetimerawinfo + some small perftweaks to mitigate performance impact from bounds checks.
dotnet/runtime,3927844f87d474fcde73304cdba7bd60bfe3e18c,"Support async generic virtual methods (#121524)

* Since generic virtual method dispatch is based on
`RuntimeMethodHandle`, we need a `RuntimeMethodHandle` for async
variants. Emit the bit in the compiler, at runtime (when type loading),
and read it when needed. Reflection stack should never see this
`RuntimeMethodHandle`.
* Add `AsyncVariant` property on `MethodDesc` (since runtime type system
does this for unboxing methods too).
* Add a flag that distinguishes async variants in native layout. This is
not specific to GVMs, it also covers other cases of runtime generic
dictionary building, such as `MakeGenericMethod`.
* Add a flag that distinguishes these in generic method dictionary
hashtables (both static and built at runtime)
* Lots of piping through the extra bool",2025-11-12 21:47:14+00:00,Michal Strehovský,1,512c42589dd3ffe3f22c1fef18679c27e27a1b5e,"Fix scenarios involving GVM on reflection-blocked methods (#122497)

GVM dispatch didn't work when calling an async GVM from a dynamic
context (e.g. we are in a GVM and trying to call another GVM).

""A generic virtual method was called"" is synonymous with ""we need a
`RuntimeMethodHandle` of a GVM"" in the compiler since the GVM dispatch
sequence uses the `RuntimeMethodHandle` to identify the GVM slot.

Whenever we generate a `RuntimeMethodHandle` (either the static one, or
the one in native layout used when runtime type loading) we need to
consider it a GVM call. We were correctly considering it in the static
case
(https://github.com/dotnet/runtime/blob/bed0cadfbf6a7067e24e302549829a45475cd224/src/coreclr/tools/aot/ILCompiler.Compiler/Compiler/DependencyAnalysis/RuntimeMethodHandleNode.cs#L57),
however we missed the dynamic case (native layout information for
`RuntimeMethodHandle` I'm updating here).

We were getting away with this because the line above the one I'm
updating (`factory.MetadataManager.GetDependenciesDueToLdToken`) would
drop a `ReflectedMethodNode` into the graph that also means ""GVM method
is called"". However we will not get a `ReflectedMethodNode` for
something that is reflection-blocked, such as async variants. So we need
to explicitly spell out the dependency so that this works for runtime
async.",23,220,56,"support async generic virtual methods (issue_ref)* since generic virtual method dispatch is based on, we need a for asyncvariants. emit the bit in the compiler, at runtime (when type loading),and read it when needed. reflection stack should never see this.* add property on (since runtime type systemdoes this for unboxing methods too).* add a flag that distinguishes async variants in native layout. this isnot specific to gvms, it also covers other cases of runtime genericdictionary building, such as .* add a flag that distinguishes these in generic method dictionaryhashtables (both static and built at runtime)* lots of piping through the extra bool"
dotnet/runtime,efb3990a9668fbdf22551ee93ffee9332086e052,"Draft 13 of Composite ML-DSA (#120961)

Update to draft 13 of Composite ML-DSA.

Changelog:
https://github.com/lamps-wg/draft-composite-sigs/compare/draft-ietf-lamps-pq-composite-sigs-12...main",2025-11-13 01:14:55+00:00,Pranav Senthilnathan,0,,,4,133,133,draft 13 of composite ml-dsa (issue_ref)update to draft 13 of composite ml-dsa.changelog:
dotnet/runtime,f873b2ffc1ba0f22112d5e4a97a6ce70ea57fc96,"Update EmitTaskReturningThunk in Native AOT (#121435)

Updated EmitTaskReturningThunk in Native AOT to match EmitTaskReturningThunk in CoreCLR.

---------

Co-authored-by: Michal Strehovský <MichalStrehovsky@users.noreply.github.com>",2025-11-13 02:52:06+00:00,Eduardo Velarde,0,,,3,251,21,update emittaskreturningthunk in native aot (issue_ref)updated emittaskreturningthunk in native aot to match emittaskreturningthunk in coreclr.---------
dotnet/runtime,228a12c99c7819b45726a9a0e08f2e79c0091cae,"Report `CORINFO_CALLCONV_GENERIC` to JIT (#121561)

Outerloops are broken.

Apparently we got away without reporting this until the test in #121130
was added. Not reporting the calling convention results in this not
kicking in:


https://github.com/dotnet/runtime/blob/5e97723bdd8eb9eff95c52b7120cec6bfb5a0a19/src/coreclr/jit/importer.cpp#L7291-L7297

and failing the test.

Cc @dotnet/ilc-contrib

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-11-13 04:28:04+00:00,Michal Strehovský,0,,,1,2,0,report to jit (issue_ref)outerloops are broken.apparently we got away without reporting this until the test in issue_refwas added. not reporting the calling convention results in this notkicking in:#l7291-l7297and failing the test.cc @dotnet/ilc-contrib---------
dotnet/runtime,4afc03f72688105344a212c0021edefa24c19b83,Remove unused ExecutionContext type reference (#121570),2025-11-13 10:46:30+00:00,Michal Strehovský,0,,,1,0,1,remove unused executioncontext type reference (issue_ref)
dotnet/runtime,3baf6d25bdef6e39ee12bebab437bbc51321fca4,"JIT: Move Thread sync and exec context save/restore to happen around runtime async bodies (#121448)

This fixes an issue where there was a behavioral difference between
async1 and async2 for async to sync runtime async calls. Before this PR
the JIT would always save and restore contexts around awaits of
task-returning methods, regardless of whether they were implemented as
runtime async functions or not. That does not match async1: in async1,
the context save and restore happens around the body in each async
method. The former logic was an optimization, but the optimization is
only correct for runtime async to runtime async calls.

We cannot in general know if a callee is implemented by runtime async or
not, so we have to move the context save/restore to happen around the
body of all runtime async methods.

An example test program that saw the behavioral difference before is the
following:
```csharp
using System;
using System.Threading;
using System.Threading.Tasks;

public class Program
{
    static void Main()
    {
        Foo().GetAwaiter().GetResult();
    }

    static async Task Foo()
    {
        SynchronizationContext.SetSynchronizationContext(new MySyncCtx(123));
        Console.WriteLine(((MySyncCtx)SynchronizationContext.Current).Arg);
        await Bar();
        Console.WriteLine(((MySyncCtx)SynchronizationContext.Current).Arg);
    }

    static Task Bar()
    {
        SynchronizationContext.SetSynchronizationContext(new MySyncCtx(124));
        return Task.CompletedTask;
    }

    class MySyncCtx(int arg) : SynchronizationContext
    {
        public int Arg => arg;
    }
}
```

Async1: 123 124
Runtime async before: 123 123
Runtime async after: 123 124",2025-11-13 12:34:14+00:00,Jakob Botsch Nielsen,1,3871ff9b61e5278606e21d1624a1419d11384380,"Merge throw blocks in fgHeadTailMerge (#122070)

Should fix the regression in
https://github.com/dotnet/runtime/pull/122065


[Diffs](https://dev.azure.com/dnceng-public/public/_build/results?buildId=1216236&view=ms.vss-build-web.run-extensions-tab)",20,552,631,"jit: move thread sync and exec context save/restore to happen around runtime async bodies (issue_ref)this fixes an issue where there was a behavioral difference betweenasync1 and async2 for async to sync runtime async calls. before this prthe jit would always save and restore contexts around awaits oftask-returning methods, regardless of whether they were implemented asruntime async functions or not. that does not match async1: in async1,the context save and restore happens around the body in each asyncmethod. the former logic was an optimization, but the optimization isonly correct for runtime async to runtime async calls.we cannot in general know if a callee is implemented by runtime async ornot, so we have to move the context save/restore to happen around thebody of all runtime async methods.an example test program that saw the behavioral difference before is thefollowing:async1: 123 124runtime async before: 123 123runtime async after: 123 124"
dotnet/runtime,87f60f103673658f3d410cb10e1370d1515a260d,"JIT: Fix another issue when optimizing out async calls late (#121550)

`genAsyncResumeInfoTable` may be null if we optimize out all async
calls, so handle this case too.",2025-11-13 12:44:55+00:00,Jakob Botsch Nielsen,1,c84d65d02b52a1fa1df1ef4c4a48ebe5d637f0d8,"[RyuJit/WASM] Create a WASM-targeting RyuJit (#121341)

Notable build system changes:
 1) Not included in clr.alljits yet. Build with clr.wasmjit.

Notable factoring choices:
1) Introduce some new target defines for features which WASM won't need,
like fixed size register mask support and GCInfo based on code metadata.
2) For this initial commit, the amount of changes has been intentionally
minimized. In the future, more things will be moved around and ifdefed
out.

Contributes to https://github.com/dotnet/runtime/issues/121208.",1,11,3,"jit: fix another issue when optimizing out async calls late (issue_ref) may be null if we optimize out all asynccalls, so handle this case too."
dotnet/runtime,2e20682733c31aa052a85a57b780511eb8559810,"JIT: Reset last-use flag for live defs in liveness (#121553)

We would leave `GTF_VAR_DEATH` set if it had already been set on the
node from a previous run of liveness.

In the issue that resulted in `TreeLifeUpdater` computing the wrong
liveness set resulting in us not saving a live local around a
suspension.",2025-11-13 12:49:33+00:00,Jakob Botsch Nielsen,0,,,1,2,0,jit: reset last-use flag for live defs in liveness (issue_ref)we would leave set if it had already been set on thenode from a previous run of liveness.in the issue that resulted in computing the wrongliveness set resulting in us not saving a live local around asuspension.
dotnet/runtime,1fb92aa670f21c2104ec1f5ad5301ec583da6ff5,"Add missing `goto` for checking encapsulation invariants.

When we encapsulate something with ML-KEM on OpenSSL, we were checking
that the amount written is what we expected, but a missing `goto` caused
it to be marked as a success.

This isn't really a reliability problem since we already know how much
encapsulation sizes are, we're just making sure OpenSSL and the managed
side agree on it.",2025-11-13 14:22:41+00:00,Kevin Jones,0,,,1,1,0,"add missing for checking encapsulation invariants.when we encapsulate something with ml-kem on openssl, we were checkingthat the amount written is what we expected, but a missing causedit to be marked as a success.this isn't really a reliability problem since we already know how muchencapsulation sizes are, we're just making sure openssl and the managedside agree on it."
dotnet/runtime,d594a04c1a2426ef295448c756f55965dedfc044,"Replace test certificate chain that uses RSA+SHA-1

The certificate chain we were using in unit tests has a root certificate
that is signed with RSA SHA-1. This signature algorithm is disabled on
some linux distributions, and it is starting to get picked up in our CI.

Let's replace the chain with one that does not use RSA+SHA-1 signatures.",2025-11-13 14:26:18+00:00,Kevin Jones,0,,,5,339,210,"replace test certificate chain that uses rsa+sha-1the certificate chain we were using in unit tests has a root certificatethat is signed with rsa sha-1. this signature algorithm is disabled onsome linux distributions, and it is starting to get picked up in our ci.let's replace the chain with one that does not use rsa+sha-1 signatures."
dotnet/runtime,6547b2ec91d2175f8d328ad41919ee6702176c26,"Add corpus support to local DotnetFuzzing runs and fuzz Deflate64 (#121019)

This PR introduces corpus support for the DotnetFuzzing project.
Currently this works for local runs only (OneFuzz requires creating a
special container for corpus, which probably needs to be done manually
-- once per fuzzer, this is left for future work).

Currently, some fuzzers (IMO incorrectly) use dictionaries as a
replacement for lack of corpus support, which makes fuzzing inefficient.
This PR prepares ground for future improvements in this regard.

To validate the concept, this PR converts ZipArchive fuzzing to use
corpus instead of a dictionary, and adds code to fuzz Deflate64 (for
which we have managed implementation internal to reading ZipArchives).",2025-11-13 14:42:46+00:00,Radek Zikmund,0,,,24,141,48,"add corpus support to local dotnetfuzzing runs and fuzz deflate64 (issue_ref)this pr introduces corpus support for the dotnetfuzzing project.currently this works for local runs only (onefuzz requires creating aspecial container for corpus, which probably needs to be done manually-- once per fuzzer, this is left for future work).currently, some fuzzers (imo incorrectly) use dictionaries as areplacement for lack of corpus support, which makes fuzzing inefficient.this pr prepares ground for future improvements in this regard.to validate the concept, this pr converts ziparchive fuzzing to usecorpus instead of a dictionary, and adds code to fuzz deflate64 (forwhich we have managed implementation internal to reading ziparchives)."
dotnet/runtime,2dcdf314ad8820cc178797b48c83c0653ae3b1e3,"arm64: Fix Sve2_ShiftArithmeticRoundedSaturate_sbyte test helper (#121582)

- Fixes #121189

There was an issue in the helper function when shifting a negative value
by a small amount so that it is greater than -128. e.g. `-10 >> 1`
should be `-20` but the helper return `-128`. This only effected 120
cases out of 65535 so it isn't seen very often.",2025-11-13 17:59:19+00:00,Jonathan Davies,1,fb8c80970d7b6e5e73bcb4895d33589bc54b3a6d,"arm64: Fix ArithmeticShift when you shift a value outside of long range (#121735)

* Contributes to #121659

Co-authored-by: Andy Ayers <andya@microsoft.com>",1,4,4,arm64: fix sve2_shiftarithmeticroundedsaturate_sbyte test helper (issue_ref)- fixes issue_refthere was an issue in the helper function when shifting a negative valueby a small amount so that it is greater than -128. e.g. should be but the helper return . this only effected 120cases out of 65535 so it isn't seen very often.
dotnet/runtime,195ad744af9ed0d87960c7441c1dc279f957ed39,"Update ILVerify to honor the ""async"" flag (#121503)

Runtime specification:
https://github.com/dotnet/runtime/blob/main/docs/design/specs/runtime-async.md

Note: ilasm/ildasm were already
[updated](https://github.com/dotnet/runtime/pull/115658) to recognize
the ""async"" keyword",2025-11-13 19:49:47+00:00,Julien Couvreur,0,,,3,218,3,"update ilverify to honor the ""async"" flag (issue_ref)runtime specification:note: ilasm/ildasm were already[updated]( to recognizethe ""async"" keyword"
dotnet/runtime,2551e93d66df997da5fdb53dfda36ef6e63a8600,"Fix up reflection with runtime async (#121576)

The reflection-simple test passes with this fix (when I remove
`<Optimize>True</Optimize>`). The general reflection just falls out
naturally. The only thing needed fixing was blocking direct invocation
of `AsyncExplicitImpl` methods.

We just block this when generating reflection mapping tables. We could
also block this within the runtime reflection stack so that we can match
the exception type, but given this is only reachable for CoreLib
privates, it's really not worth the extra code.

Cc @dotnet/ilc-contrib",2025-11-14 03:05:07+00:00,Michal Strehovský,1,217fd74d4be336801f210f07766ef4c572ca62c6,"Fix check for invocation of async infrastructure methods via reflection (#121609)

MethodInfo.Invoke has multiple implementation strategies. The check for
async infrastructure methods needs to be placed in the code that is
shared by all implementation strategies.

Before this change, this check would not kick in under managed debugger
or when the test is run with
`Switch.System.Reflection.ForceEmitInvoke=true` appcontext switch.

Also, this check should fail with NotSupportedException, without
wrapping it in TargetInvocationException() to match existing behaviors.",3,16,2,"fix up reflection with runtime async (issue_ref)the reflection-simple test passes with this fix (when i remove). the general reflection just falls outnaturally. the only thing needed fixing was blocking direct invocationof methods.we just block this when generating reflection mapping tables. we couldalso block this within the runtime reflection stack so that we can matchthe exception type, but given this is only reachable for corelibprivates, it's really not worth the extra code.cc @dotnet/ilc-contrib"
dotnet/runtime,6b5b847689d33c705d5553fc5e6d5455e5163082,"Emit async method thunks in Native AOT (#121565)

The method matches EmitAsyncMethodThunk in CoreCLR.

---------

Co-authored-by: Michal Strehovský <MichalStrehovsky@users.noreply.github.com>",2025-11-14 03:24:49+00:00,Eduardo Velarde,0,,,2,125,3,emit async method thunks in native aot (issue_ref)the method matches emitasyncmethodthunk in coreclr.---------
dotnet/runtime,04c4fe60b5334abfd917bb8275547021954d5f5a,"Add support for emitting Mach-O R2R images (#121186)

Adds support in crossgen2 for emitting Mach-O objects for composite R2R.

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>
Co-authored-by: Elinor Fung <elfung@microsoft.com>",2025-11-14 04:35:44+00:00,Jeremy Koritzinsky,0,,,38,777,117,add support for emitting mach-o r2r images (issue_ref)adds support in crossgen2 for emitting mach-o objects for composite r2r.---------
dotnet/runtime,217fd74d4be336801f210f07766ef4c572ca62c6,"Fix check for invocation of async infrastructure methods via reflection (#121609)

MethodInfo.Invoke has multiple implementation strategies. The check for
async infrastructure methods needs to be placed in the code that is
shared by all implementation strategies.

Before this change, this check would not kick in under managed debugger
or when the test is run with
`Switch.System.Reflection.ForceEmitInvoke=true` appcontext switch.

Also, this check should fail with NotSupportedException, without
wrapping it in TargetInvocationException() to match existing behaviors.",2025-11-14 13:15:13+00:00,Jan Kotas,1,c78f853a7ddb98762552669cae671ef1d201e8db,"Fix TryEnsureSufficientExecutionStack with interpreter (#122248)

The ReflectionInvocation::TryEnsureSufficientExecutionStack was not
taking into account the fact that with interpreter enabled, the code can
be executed either by the interpreter or it can be AOTed. The
interpreter has its own stack with its own limit.

3 libraries tests suites were failing due to this problem.

As a best effort fix, this change adds check for the interpreter stack
too and the method returns true only if there is enough space on both
real and the interpreter stack, as it is not possible to decide which of
them will be used.",9,36,15,"fix check for invocation of async infrastructure methods via reflection (issue_ref)methodinfo.invoke has multiple implementation strategies. the check forasync infrastructure methods needs to be placed in the code that isshared by all implementation strategies.before this change, this check would not kick in under managed debuggeror when the test is run with appcontext switch.also, this check should fail with notsupportedexception, withoutwrapping it in targetinvocationexception() to match existing behaviors."
dotnet/runtime,355b0df73c8afa00337d6a4c0294552eb872e167,"Report `CORINFO_ASYNC_SAVE_CONTEXTS` when needed (#121613)

This was added in #121448 on the VM side, managed side needs a matching
change (I actually found this because we had a newly failing test, yay).

Cc @dotnet/ilc-contrib @jakobbotsch",2025-11-14 13:17:17+00:00,Michal Strehovský,0,,,2,11,0,"report when needed (issue_ref)this was added in issue_ref on the vm side, managed side needs a matchingchange (i actually found this because we had a newly failing test, yay).cc @dotnet/ilc-contrib @jakobbotsch"
dotnet/runtime,2678e210cfa94eb6f0169c6f0e4a0966ce6f7aef,Rename ValueType-specific identifiers to reflect dual usage for ValueType and Attribute types (#121610),2025-11-14 13:34:24+00:00,Copilot,0,,,7,20,20,rename valuetype-specific identifiers to reflect dual usage for valuetype and attribute types (issue_ref)
dotnet/runtime,9278f3919a27b7657eb49682394edf90e0de36f3,"Add R2RDump support for Mach-O composite R2R images (#121566)

Update `R2RDump` / `ILCompiler.Reflection.ReadyToRun` to handle Mach-O
composite R2R images

- Make `ReadyToRunReady` stop operating on `PEReader` directly
- Add a `IBinaryImageReader` interface to handle reading of different
R2R image types - implementations for PE and MachO
- Move common types and functionality related to Mach-O from
`Microsoft.NET.HostModel` to shared location `src/coreclr/tools/Common`",2025-11-14 19:44:13+00:00,Elinor Fung,0,,,23,666,109,add r2rdump support for mach-o composite r2r images (issue_ref)update / to handle mach-ocomposite r2r images- make stop operating on directly- add a interface to handle reading of differentr2r image types - implementations for pe and macho- move common types and functionality related to mach-o from to shared location
dotnet/runtime,c84d65d02b52a1fa1df1ef4c4a48ebe5d637f0d8,"[RyuJit/WASM] Create a WASM-targeting RyuJit (#121341)

Notable build system changes:
 1) Not included in clr.alljits yet. Build with clr.wasmjit.

Notable factoring choices:
1) Introduce some new target defines for features which WASM won't need,
like fixed size register mask support and GCInfo based on code metadata.
2) For this initial commit, the amount of changes has been intentionally
minimized. In the future, more things will be moved around and ifdefed
out.

Contributes to https://github.com/dotnet/runtime/issues/121208.",2025-11-14 20:57:46+00:00,SingleAccretion,1,96765f3ba23d61211cc76a9c0f9c979fdaabcfee,"JIT: Indicate usage of TYP_LONG for x86 in async transformation (#121746)

Also fix the name for the async continuation parameter; it was showing
up as ""tmp-1"" since a recent change to `compMap2ILvarNum`.

Fix #120341",58,1580,337,"[ryujit/wasm] create a wasm-targeting ryujit (issue_ref)notable build system changes: 1) not included in clr.alljits yet. build with clr.wasmjit.notable factoring choices:1) introduce some new target defines for features which wasm won't need,like fixed size register mask support and gcinfo based on code metadata.2) for this initial commit, the amount of changes has been intentionallyminimized. in the future, more things will be moved around and ifdefedout.contributes to"
dotnet/runtime,b435b40c0cdb431ee1f3c7f282919b13feafa302,"[Wasm RyuJIT] Wasm control flow basics (#121417)

Determine how to emit Wasm control flow from the JIT's control flow
graph.

Relies on loop-aware RPO to determine the block order. Currently only
handles the main method. Assumes irreducible loops have been fixed
upstream (which is not yet guaranteed; bails out if not so).

Doesn't actually do any emission, just prints a textual description in
the JIT dump (along with a dot markup version).

Uses only LOOP and BLOCK. Tries to limit the extent of BLOCK.

Run for now as an optional phase even if not targeting Wasm, to do some
stress testing.

Contributes to #121178",2025-11-14 21:02:11+00:00,Andy Ayers,1,d00f7be79894cfb31b2fced7eb558e16755bcce7,"JIT: Fix edge cases around async call definitions with exceptional flow (#121583)

We had special logic to optimize the case where an async call defines a
local, avoiding capturing the local as part of the live state since its
value would be overridden on resumption anyway.

This does not handle the case where the callee throws an exception and
we continue internally in the function. In that case we may still have
needed to capture the local state. Consider the following example:

```csharp
int x = GetValue();
try
{
    x = await IntThrows();
}
catch
{
}

return x;
```

Here we need to capture the value of `x` in the continuation as we need
it if `IntThrows` throws. The previous logic optimized away this
capture.

For cases where we have liveness for the defined local we can use
liveness for precision when we have exceptional flow. Liveness will tell
us that `x` is live on the `IntThrows` call here, precisely because of
the exceptional flow. If there was no exceptional flow, `x` would not be
live. We can still use the previous optimization for address exposed or
tier0 cases.

Also fix when we update the live set around the async calls we are
transforming. Before this change we were updating it before the
transformation. This handling was imprecise for return buffer
definitions, but it would not usually cause problems beyond
overestimating the live set.

Fix #121564",7,879,0,"[wasm ryujit] wasm control flow basics (issue_ref)determine how to emit wasm control flow from the jit's control flowgraph.relies on loop-aware rpo to determine the block order. currently onlyhandles the main method. assumes irreducible loops have been fixedupstream (which is not yet guaranteed; bails out if not so).doesn't actually do any emission, just prints a textual description inthe jit dump (along with a dot markup version).uses only loop and block. tries to limit the extent of block.run for now as an optional phase even if not targeting wasm, to do somestress testing.contributes to issue_ref"
dotnet/runtime,9eef400765756db282aa984f98cf891fd68d9bfd,"Disable AzDO dependabot (#121634)

Disable AzDO dependabot.",2025-11-14 21:41:01+00:00,Matt Mitchell,0,,,1,5,0,disable azdo dependabot (issue_ref)disable azdo dependabot.
dotnet/runtime,d00f7be79894cfb31b2fced7eb558e16755bcce7,"JIT: Fix edge cases around async call definitions with exceptional flow (#121583)

We had special logic to optimize the case where an async call defines a
local, avoiding capturing the local as part of the live state since its
value would be overridden on resumption anyway.

This does not handle the case where the callee throws an exception and
we continue internally in the function. In that case we may still have
needed to capture the local state. Consider the following example:

```csharp
int x = GetValue();
try
{
    x = await IntThrows();
}
catch
{
}

return x;
```

Here we need to capture the value of `x` in the continuation as we need
it if `IntThrows` throws. The previous logic optimized away this
capture.

For cases where we have liveness for the defined local we can use
liveness for precision when we have exceptional flow. Liveness will tell
us that `x` is live on the `IntThrows` call here, precisely because of
the exceptional flow. If there was no exceptional flow, `x` would not be
live. We can still use the previous optimization for address exposed or
tier0 cases.

Also fix when we update the live set around the async calls we are
transforming. Before this change we were updating it before the
transformation. This handling was imprecise for return buffer
definitions, but it would not usually cause problems beyond
overestimating the live set.

Fix #121564",2025-11-14 22:48:18+00:00,Jakob Botsch Nielsen,1,988296b080776c885ee0725b481db4ae4d4360ed,"JIT: Handle multi-reg async calls stored to promoted locals (#121749)

In some cases the async transformation needs to introduce a new local to
store the result of an async call to. If the previous store was a
multi-reg call stored to an independently promoted local then we would
produce illegal IR. For example, the IR

```
  t79 = ▌  CALL      struct <unknown method> (async) $702
        ┌──▌  t79    struct
        ▌  STORE_LCL_VAR struct<System.ValueTuple`3, 16>(P) V25 tmp9
        ▌    ref    field V25.Item3 (fldOffset=0x0) -> V275 tmp259      d:2
        ▌    int    field V25.Item2 (fldOffset=0x8) -> V276 tmp260      d:1
        ▌    ubyte  field V25.Item1 (fldOffset=0xc) -> V277 tmp261      d:1 $VN.Void
```

would be canonicalized into

```

  t79 = ▌  CALL      struct <unknown method> (async) $702
        ┌──▌  t79    struct
        ▌  STORE_LCL_VAR struct<System.ValueTuple`3, 16> V337 rat6
t5027 =    LCL_VAR   struct<System.ValueTuple`3, 16> V337 rat6
        ┌──▌  t5027  struct
        ▌  STORE_LCL_VAR struct<System.ValueTuple`3, 16>(P) V25 tmp9
        ▌    ref    field V25.Item3 (fldOffset=0x0) -> V275 tmp259      d:2
        ▌    int    field V25.Item2 (fldOffset=0x8) -> V276 tmp260      d:1
        ▌    ubyte  field V25.Item1 (fldOffset=0xc) -> V277 tmp261      d:1 $VN.Void

```
but that store to the promoted local with a LCL_VAR source is not legal.

Fix the problem by decomposing the store when necessary.",6,120,32,"jit: fix edge cases around async call definitions with exceptional flow (issue_ref)we had special logic to optimize the case where an async call defines alocal, avoiding capturing the local as part of the live state since itsvalue would be overridden on resumption anyway.this does not handle the case where the callee throws an exception andwe continue internally in the function. in that case we may still haveneeded to capture the local state. consider the following example:here we need to capture the value of in the continuation as we needit if throws. the previous logic optimized away thiscapture.for cases where we have liveness for the defined local we can useliveness for precision when we have exceptional flow. liveness will tellus that is live on the call here, precisely because ofthe exceptional flow. if there was no exceptional flow, would not belive. we can still use the previous optimization for address exposed ortier0 cases.also fix when we update the live set around the async calls we aretransforming. before this change we were updating it before thetransformation. this handling was imprecise for return bufferdefinitions, but it would not usually cause problems beyondoverestimating the live set.fix issue_ref"
dotnet/runtime,30ed4654a2a16907b7949a36d41678ad697bb569,"Add runtime async support to reflection dataflow analysis (#121628)

This is a port of #120683, with an extra.

The `MethodIL` that we deal with in the compiler does async variant
method signature munging. The dataflow analysis really doesn't like
that. So munge the method signatures back to how they look in metadata
and in Cecil on dataflow analysis boundaries. I don't like having to do
this, but this is a shared codebase and fewer differences is better.",2025-11-15 08:17:42+00:00,Michal Strehovský,1,1a9df9161a4c2eda46613580923c36ba5f660ccc,"Fix dataflow analysis of lambdas in async methods (#122450)

When we enter ILLinker part of the ILC codebase, we need to switch to
the mode where async variants don't exist and async methods have
mismatched bodies. There was a spot where we didn't do the switch here:


https://github.com/dotnet/runtime/blob/d31e5990b896447bfc3dbe98cfe6ec3b169a4896/src/coreclr/tools/aot/ILCompiler.Compiler/Compiler/UsageBasedMetadataManager.cs#L939-L949

The fix is to do the switch early in `FlowAnnotations` so that the
`ILProvider` `FlowAnnotations` use (and other parts take advantage of)
is already ILLinkerified.

Fixes the situation shown in the regression test (we were analyzing the
IL of the async variant of `RuntimeAsyncWithLambda` and missed analyzing
the lambda completely).",8,114,9,"add runtime async support to reflection dataflow analysis (issue_ref)this is a port of issue_ref, with an extra.the that we deal with in the compiler does async variantmethod signature munging. the dataflow analysis really doesn't likethat. so munge the method signatures back to how they look in metadataand in cecil on dataflow analysis boundaries. i don't like having to dothis, but this is a shared codebase and fewer differences is better."
dotnet/runtime,e91f40db5761ddfebd8d0afddd16f472bdea8181,"Remove unused DEFINE_METHOD identifiers, orphaned methods and classes, and unused metasig signatures (#121650)

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: MichalStrehovsky <13110571+MichalStrehovsky@users.noreply.github.com>
Co-authored-by: jkotas <6668460+jkotas@users.noreply.github.com>",2025-11-15 23:28:51+00:00,Copilot,0,,,3,0,65,"remove unused define_method identifiers, orphaned methods and classes, and unused metasig signatures (issue_ref)"
dotnet/runtime,0b9d2ccbd5e2ddbcb95fb8d7126755d160b81f64,"Remove bounds checks for Phi indices (#121640)

Closes https://github.com/dotnet/runtime/issues/121617

In global assertion prop we have an optimization that tries to optimize
bound checks for `arr[cns]` if we already have ArrBnds assertion for the
same array with another constant index that is greater than this one,
e.g.:
```
arr[2] = 0; // creates an assertion that arr is at least 3 elements.
arr[1] = 0; // bound check is optimized away
```
This PR extends this logic by handling Phi indices.

Should remove bounds checks for cases like:
```cs
arr[cond1 ? 10 : 12] = 0; // means arr has at least 11 elements
arr[8] = 0; // redundant bounds check
```
or even:
```cs
arr[cond1 ? 10 : 12] = 0;
arr[cond2 ? 1 : 2] = 0;
```

Some nice
[diffs](https://dev.azure.com/dnceng-public/public/_build/results?buildId=1203834&view=ms.vss-build-web.run-extensions-tab)
(although, mostly because I removed unnecessary TypeOfVN checks)

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>
Co-authored-by: Theodore Tsirpanis <teo@tsirpanis.gr>",2025-11-16 05:08:41+00:00,Egor Bogatov,0,,,1,30,13,"remove bounds checks for phi indices (issue_ref)closes in global assertion prop we have an optimization that tries to optimizebound checks for if we already have arrbnds assertion for thesame array with another constant index that is greater than this one,e.g.:this pr extends this logic by handling phi indices.should remove bounds checks for cases like:or even:some nice[diffs]((although, mostly because i removed unnecessary typeofvn checks)---------"
dotnet/runtime,d3504b6270f0bcefe9e57f9158af37347dbf1086,"Introduce a new internal EventSourceGenerator and use it for all ES implementations (#121180)

Closes https://github.com/dotnet/runtime/issues/28290

1) Remove `[EventSourceAutoGenerate]`, we rely on just [EventSource] +
no explicit ctors
2) Introduce a new global SourceGenerators - EventSourceGenerator (and
move the existing impl from SPC.Generators to this new project)
3) Update slnx files (via the UpdateSolutionFiles task)
4) Migrate all classes with [EventSource] to use the SG. Except for the
ones with `EventSourceSettings.EtwSelfDescribingEventFormat` -- there
are 3 ES impl defining this settings 🤔

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-11-16 14:34:27+00:00,Egor Bogatov,0,,,50,260,216,"introduce a new internal eventsourcegenerator and use it for all es implementations (issue_ref)closes 1) remove , we rely on just [eventsource] +no explicit ctors2) introduce a new global sourcegenerators - eventsourcegenerator (andmove the existing impl from spc.generators to this new project)3) update slnx files (via the updatesolutionfiles task)4) migrate all classes with [eventsource] to use the sg. except for theones with -- thereare 3 es impl defining this settings 🤔---------"
dotnet/runtime,8f1dc6d3d2ed2918f1c68e285a5f3970e0d4cc91,"Remove unused references to SafeHandle methods in corelib.h (#121681)

The uses of these were removed in #100267.",2025-11-16 14:36:33+00:00,Austin Wise,0,,,3,0,12,remove unused references to safehandle methods in corelib.h (issue_ref)the uses of these were removed in issue_ref.
dotnet/runtime,984128fdfc53564744b850f922a75e008d54a527,"Reduce allocation in TextWriter.NewLine (#121508)

It's reasonably common for a codebase to pick a specific newline string
and set it regardless of OS, but currently that ends up allocating on
every OS each call to set_NewLine.

Two changes:
1. When setting TextWriter.NewLine to the existing value, make it a nop
to avoid unnecessarily calling ToCharArray.
2. When setting TextWriter.NewLine to ""\n"" on Windows or to ""\r\n"" on
Unix, use a cached array.",2025-11-17 00:58:44+00:00,Stephen Toub,0,,,1,15,2,"reduce allocation in textwriter.newline (issue_ref)it's reasonably common for a codebase to pick a specific newline stringand set it regardless of os, but currently that ends up allocating onevery os each call to set_newline.two changes:1. when setting textwriter.newline to the existing value, make it a nopto avoid unnecessarily calling tochararray.2. when setting textwriter.newline to ""\n"" on windows or to ""\r\n"" onunix, use a cached array."
dotnet/runtime,f3558e4ad6b3935308fe655b138a290ea23a299a,"[tests] Disable ExtendedLayout test on fullaotllvm (#121630)

https://github.com/dotnet/runtime/issues/121404",2025-11-17 07:06:28+00:00,Vlad Brezae,0,,,2,2,2,[tests] disable extendedlayout test on fullaotllvm (issue_ref)
dotnet/runtime,f74e84a120ee53f3f40fd125a72a8f71b5d5bd53,"JIT: Avoid keeping BYREFs live across async calls when boxing (#121621)

When boxing or storing values that may contain async calls in async methods, the
JIT was creating IR where BYREF addresses (computed as base + offset) were
evaluated before the async call and kept live across await points. This violated
the async transformation's invariant that BYREFs cannot be live across await
points, causing an assert.

Updated impImportAndPushBox() and STSFLD handling to use the
`gtTreeContainsAsyncCall` helper to spill values containing async calls before
computing BYREF destinations, ensuring BYREFs are never kept live across await
points.",2025-11-17 12:08:08+00:00,Jakob Botsch Nielsen,1,8b0e1d66ca2795917e3762278682fe213cdb6a7f,"Fix constrained call local exposure blocking escape analysis (#121918)

Constrained calls on ref types currently emit trees like
```cs
--C-G------                         *  CALLV vt-ind int    System.Object:Equals(System.Object):bool:this
n---G------ this                    +--*  IND       ref
-----------                         |  \--*  LCL_ADDR  long   V06 tmp5         [+0]
----------- arg1                    \--*  LCL_VAR   ref    V04 tmp3
```
which blocks escape analysis due to the LCL_ADDR marking the local as
escaped.
Using the helper to get this here instead:
```cs
--C-G------                         *  CALLV vt-ind int    System.Object:Equals(System.Object):bool:this
----------- this                    +--*  LCL_VAR   ref    V06 tmp5
----------- arg1                    \--*  LCL_VAR   ref    V04 tmp3
```
solves the issue.",2,15,5,"jit: avoid keeping byrefs live across async calls when boxing (issue_ref)when boxing or storing values that may contain async calls in async methods, thejit was creating ir where byref addresses (computed as base + offset) wereevaluated before the async call and kept live across await points. this violatedthe async transformation's invariant that byrefs cannot be live across awaitpoints, causing an assert.updated impimportandpushbox() and stsfld handling to use the helper to spill values containing async calls beforecomputing byref destinations, ensuring byrefs are never kept live across awaitpoints."
dotnet/runtime,1926d8279eaf9cf2787160ed123db9c362397e47,"JIT: Remove dead compVSQuirkStackPaddingNeeded field (#121684)

The `compVSQuirkStackPaddingNeeded` field was always initialized to 0
and never assigned any other value, making its conditional check
perpetually false and the associated code unreachable.

### Changes
- **compiler.h**: Removed field declaration and `VSQUIRK_STACK_PAD`
macro
- **codegencommon.cpp**: Removed initialization assignment
- **lclvars.cpp**: Removed dead conditional block that would never
execute

```cpp
// Before: Dead code that never executed
if (compVSQuirkStackPaddingNeeded > 0)  // Always false
{
    stkOffs -= compVSQuirkStackPaddingNeeded;
    lvaIncrementFrameSize(compVSQuirkStackPaddingNeeded);
}

// After: Removed entirely
```

The field was originally intended as a quirk for VS debug-launch
scenarios but was never actually used.

<!-- START COPILOT CODING AGENT SUFFIX -->



<details>

<summary>Original prompt</summary>

> Remove the `compVSQuirkStackPaddingNeeded` field in JIT source code
under src/coreclr/jit folder


</details>



<!-- START COPILOT CODING AGENT TIPS -->
---

💬 We'd love your input! Share your thoughts on Copilot coding agent in
our [2 minute survey](https://gh.io/copilot-coding-agent-survey).

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: jakobbotsch <7887810+jakobbotsch@users.noreply.github.com>",2025-11-17 12:41:49+00:00,Copilot,0,,,3,0,25,"jit: remove dead compvsquirkstackpaddingneeded field (issue_ref)the field was always initialized to 0and never assigned any other value, making its conditional checkperpetually false and the associated code unreachable.### changes- **compiler.h**: removed field declaration and macro- **codegencommon.cpp**: removed initialization assignment- **lclvars.cpp**: removed dead conditional block that would neverexecutethe field was originally intended as a quirk for vs debug-launchscenarios but was never actually used.<!-- start copilot coding agent suffix --><details><summary>original prompt</summary>> remove the field in jit source codeunder src/coreclr/jit folder</details><!-- start copilot coding agent tips -->---💬 we'd love your input! share your thoughts on copilot coding agent inour [2 minute survey](---------"
dotnet/runtime,4dc524468418d462a4149ab049a5d609a2b381db,"arm64: Optimise x < 0 and x >= 0 (#120667)

- Fixes #83562
- Add tests for previous work
- Add tbz/tbnz support for short and sbyte",2025-11-17 13:05:15+00:00,Jonathan Davies,1,32a02c7039aed473abc499c59916adccc2e1acde,"Fix CompareZero tests for JitStressProcedureSplitting (#122073)

Fixes #122060",3,422,2,arm64: optimise x < 0 and x >= 0 (issue_ref)- fixes issue_ref- add tests for previous work- add tbz/tbnz support for short and sbyte
dotnet/runtime,d23685ab54ac014a4f4bd36c451a00670e50d255,"Disable Socket tests on Apple Platforms which requires Local Network permission (#121496)

Some networking tests on OSX requires Local Network permission after OSX
13. These requirements are practically same for all Apple platforms so
disabling them for now. Until we figure out a clear solution on pipeline
machines.",2025-11-17 14:06:51+00:00,Ahmet Ibrahim Aksoy,0,,,2,18,4,disable socket tests on apple platforms which requires local network permission (issue_ref)some networking tests on osx requires local network permission after osx13. these requirements are practically same for all apple platforms sodisabling them for now. until we figure out a clear solution on pipelinemachines.
dotnet/runtime,81856e74ee5036ecca25f378ab14b436ecfd3328,"Update all *.slnx with EventSourceGenerator.csproj (#121696)

This is the result of `dotnet build /t:UpdateSolutionFile slngen.proj`
command (except for SPC.slnx which is not covered by the script so I
added it there by hands).

It's not build related, just for the people who open slnx for
development, so the newly added SG
(https://github.com/dotnet/runtime/pull/121180) can show up in the
solution tree.

<img width=""1092"" height=""529""
alt=""{3B42DE0C-82BD-4E62-8AEC-11221AE39139}""
src=""https://github.com/user-attachments/assets/a13b4d19-b12b-48ec-8a0b-7b7743b4ac12""
/>",2025-11-17 21:32:00+00:00,Egor Bogatov,0,,,158,1346,1,"update all *.slnx with eventsourcegenerator.csproj (issue_ref)this is the result of command (except for spc.slnx which is not covered by the script so iadded it there by hands).it's not build related, just for the people who open slnx fordevelopment, so the newly added sg( can show up in thesolution tree.<img width=""1092"" height=""529""alt=""{3b42de0c-82bd-4e62-8aec-11221ae39139}""src=""""/>"
dotnet/runtime,17189337194c9e97a26017f6b9b5b3dba7881367,"Replace ReadFile/WriteFile usages with stdio (#116203)

Replaces the majority of ReadFile/WriteFile instances with stdio, and
fstream for some superpmi cases.
Remaining instances are StgIO and superpmi/fileio, which uses the same
file handles for memory map.",2025-11-18 06:31:26+00:00,Huo Yaoyuan,1,128db828cf71f6f650e17d817195054cadd2d555,"Fix perfmap output (#122273)

Fix a recent regression in perfmaps caused by #116203
The fix changes fprintf usage in PerfMap::WriteLine to using",45,606,1617,"replace readfile/writefile usages with stdio (issue_ref)replaces the majority of readfile/writefile instances with stdio, andfstream for some superpmi cases.remaining instances are stgio and superpmi/fileio, which uses the samefile handles for memory map."
dotnet/runtime,17b2266acf44cff9d012c24ed1ed90892fe9276e,"Use SSA-based GetRange for ArrLen in OptimizeRangeCheck (#121683)

Closes https://github.com/dotnet/runtime/issues/121682

Removes the bounds checks in ^


[Diffs](https://dev.azure.com/dnceng-public/public/_build/results?buildId=1204755&view=ms.vss-build-web.run-extensions-tab)",2025-11-18 08:08:16+00:00,Egor Bogatov,0,,,1,9,0,use ssa-based getrange for arrlen in optimizerangecheck (issue_ref)closes removes the bounds checks in ^[diffs](
dotnet/runtime,404a35818402d4194f414c09b9f2cbb1d0b07e63,Remove unsafe code from Uri path dot & slash unescaping (#121680),2025-11-18 12:27:12+00:00,Miha Zupan,1,c7631aef0f5b77624cc84558fdbf4787e65c10c4,Remove unsafe code in CreateUriInfo and fix edge-case IndexOutOfRangeExceptions (#121653),1,21,73,remove unsafe code from uri path dot & slash unescaping (issue_ref)
dotnet/runtime,e01de4efa9e141707d038cd4e2246f7a389b8fdd,"[wasm][coreclr] First part of the call generator, interp to native (#121491)

Port of the generator task to the CoreCLR. 

It can be now used to update wasm callhelpers manually. Example usage:

./dotnet.sh build /t:RunGenerator /p:GeneratorOutputPath=""./""
/p:AssembliesScanPath=""<your-path-to-assemblies>""
src/tasks/WasmAppBuilder/WasmAppBuilder.csproj

The call helper files are split to 2 files, similar as on Mono. The
pinvoke/reverse parts of the generator will be updated in the followup
PR.

Contributes to https://github.com/dotnet/runtime/issues/113692

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>
Co-authored-by: Aaron R Robinson <arobins@microsoft.com>
Co-authored-by: Jan Kotas <jkotas@microsoft.com>
Co-authored-by: Larry Ewing <lewing@microsoft.com>",2025-11-18 12:52:50+00:00,Radek Doulik,0,,,10,682,278,"[wasm][coreclr] first part of the call generator, interp to native (issue_ref)port of the generator task to the coreclr. it can be now used to update wasm callhelpers manually. example usage:./dotnet.sh build /t:rungenerator /p:generatoroutputpath=""./""/p:assembliesscanpath=""<your-path-to-assemblies>""src/tasks/wasmappbuilder/wasmappbuilder.csprojthe call helper files are split to 2 files, similar as on mono. thepinvoke/reverse parts of the generator will be updated in the followuppr.contributes to ---------"
dotnet/runtime,783ffda5a41fd872d64f3934b6e8d88a0ea6e066,"Remove unused RequestRetryType.RetryOnStreamLimitReached (#121639)

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: MihaZupan <25307628+MihaZupan@users.noreply.github.com>",2025-11-18 13:25:51+00:00,Copilot,0,,,2,1,16,remove unused requestretrytype.retryonstreamlimitreached (issue_ref)
dotnet/runtime,5633456503f167e737b4524347d016d0f618a0b2,"Optimise AdvSimd GetIndexOfFirstNonAsciiByte (#121382)

Co-authored-by: Yat Long Poon <yatlong.poon@arm.com>",2025-11-18 16:59:41+00:00,ylpoonlg,0,,,1,12,9,optimise advsimd getindexoffirstnonasciibyte (issue_ref)
dotnet/runtime,3a95842304008b9ca84c14b4bec9ec99ed5802db,"Emit IL for AsyncResumptionStub (#121456)

Emit the expected IL for the async resumption stub in crossgen and ilc. This requires adding a MethodDesc (ExplicitContinuationAsyncMethod) that makes the hidden parameter explicit to allow passing a non-null Continuation. This follows the precedent of generic unboxing stubs in ilc. These MethodDescs are unwrapped when creating a method entrypoint node in the dependency graph.

Co-authored-by: Vladimir Sadov <vsadov@microsoft.com>
Co-authored-by: Jakob Botsch Nielsen <jakob.botsch.nielsen@gmail.com>
Co-authored-by: Michal Strehovský <MichalStrehovsky@users.noreply.github.com>",2025-11-18 18:16:16+00:00,Jackson Schuster,1,e079f83a0b6d2246575288987dd605e0d4046896,"Couple fixes to AsyncResumptionStub (#121759)

* The stub is static
* The fake continuation method can act weird if the continuation owning
method is on a generic type since we'll report the fake continuation
method as homed on the same type. It can hit asserts expecting calling
`GetTypicalMethodDefinition` will uninstantiate owning type. Make it so
that this invariant holds.",5,219,5,emit il for asyncresumptionstub (issue_ref)emit the expected il for the async resumption stub in crossgen and ilc. this requires adding a methoddesc (explicitcontinuationasyncmethod) that makes the hidden parameter explicit to allow passing a non-null continuation. this follows the precedent of generic unboxing stubs in ilc. these methoddescs are unwrapped when creating a method entrypoint node in the dependency graph.
dotnet/runtime,a66cb73c83be9c79ee0a8aab66a6e7f9fe121185,"Remove Unsafe.As from ThreadInt64PersistentCounter by using strongly-typed ThreadLocalNode (#121434)

The goal here is to remove some uses of Unsafe.As in
ThreadInt64PersistentCounter. All of these uses were due to the type of
the ThreadLocalNode being private and the return type being `object`. By
making the type internal we can remove the need for casts entirely.

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: agocke <515774+agocke@users.noreply.github.com>
Co-authored-by: Andy Gocke <angocke@microsoft.com>",2025-11-18 18:25:27+00:00,Copilot,1,f204e02d03afb032f4221eae696800bcb766a778,"Reliability fixes for the Thread Pool (#121887)

When inserting workitems into threadpool queues, we must always
guarantee that for every workitem there will be some worker at some
point in the future that will certainly notice the presence of the
workitem and executes it.

There was an attempt to relax the requirements in #100506. 
Sadly, it leads to occasional deadlocks when items are present in the
work queues and no workers are coming to pick them up.

The same change was made in all 3 threadpools - IO completion, Sockets
and the general purpose ThreadPool. The fix is applied to all three
threadpools.

We have seen reports about deadlocks when running on net9 or later
releases:

- In Windows IO completion: #121608
- In general purpose ThreadPool: #119043
- In Unix Sockets: No known reports so far. Perhaps we have not yet seen
a case where adding more workitems is indirectly conditioned on existing
workitems executed. Without that incoming workitems may ""unwedge"" the
threadpool, and it is just a pause vs. a deadlock, so could be
unnoticed.


The fix will need to be ported to net10 and net9. Thus this PR tries to
restore just the part which changed the enqueuers/workers handshake
algorithm.
More stuff was piled up into threadpool since the change, so doing the
minimal fix without disturbing the rest is somewhat tricky.

Fixes: #121608    (definitely, I have tried with the repro)
Fixes: #119043 (likely, I do not have a repro to try, but symptoms seem
like from the same issue)

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",8,47,69,remove unsafe.as from threadint64persistentcounter by using strongly-typed threadlocalnode (issue_ref)the goal here is to remove some uses of unsafe.as inthreadint64persistentcounter. all of these uses were due to the type ofthe threadlocalnode being private and the return type being . bymaking the type internal we can remove the need for casts entirely.---------
dotnet/runtime,41c9fa2d39a02d98cdead08e72f961e77b7888b0,"[Wasm RyuJIT] Implement Wasm DFS and Loop Finding (#121457)

Loops for Wasm control flow codegen don't involve EH or runtime mediated
control flow transfers.

Implement a custom block successor enumerator for Wasm, and adjust
`fgRunDFS`
to allow using this and also to generalize how the DFS is initiated. Use
this to build a ""Wasm"" DFS. In that DFS handle both the main method and
all funclets (by specifying funclet entries as additional DFS starting
points).

Update the loop finding code to make suitable changes when it is driven
from
a ""Wasm"" DFS instead of the typical all successor / all predecessor DFS.

Remove the restriction in the Wasm control flow codegen that only
handles
the main method; now it works for the main method and all funclets.

Contributes to #121178.

Dependent on #121417.

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-11-18 19:03:01+00:00,Andy Ayers,0,,,8,467,97,"[wasm ryujit] implement wasm dfs and loop finding (issue_ref)loops for wasm control flow codegen don't involve eh or runtime mediatedcontrol flow transfers.implement a custom block successor enumerator for wasm, and adjustto allow using this and also to generalize how the dfs is initiated. usethis to build a ""wasm"" dfs. in that dfs handle both the main method andall funclets (by specifying funclet entries as additional dfs startingpoints).update the loop finding code to make suitable changes when it is drivenfroma ""wasm"" dfs instead of the typical all successor / all predecessor dfs.remove the restriction in the wasm control flow codegen that onlyhandlesthe main method; now it works for the main method and all funclets.contributes to issue_ref.dependent on issue_ref.---------"
dotnet/runtime,ea8d8a0339bdf8b736ef5706900bab48429d1cf6,"Update Ubuntu 25.10 to 26.04 (#121730)

- Ubuntu 25.10 was added while it was in preview, in preparation for
26.04.
- 25.10 is now GA and 26.04 is in preview (been so for a while but the
official container release is new-ish and we are dependent on that)
- We'll validate CI relability in `main` and then move to servicing when
we're comfortable.",2025-11-18 21:55:19+00:00,Rich Lander,0,,,3,7,7,"update ubuntu 25.10 to 26.04 (issue_ref)- ubuntu 25.10 was added while it was in preview, in preparation for26.04.- 25.10 is now ga and 26.04 is in preview (been so for a while but theofficial container release is new-ish and we are dependent on that)- we'll validate ci relability in and then move to servicing whenwe're comfortable."
dotnet/runtime,bf7fe1d87bdb3a8b6ef6486bb03ae2f6928abf4f,"Centralize virtual method invocation dependencies (#121740)

`ReflectionVirtualInvokeMapNode` should be solely responsible for
declaring dependencies necessary to generate the invocation table
entries. Instead we had them partially duplicated between
`ReflectedMethodNode` and
`ReflectionVirtualInvokeMapNode.GetVirtualInvokeMapDependencies`.

This can lead to subtle problems in the unsupported
`IlcTrimMetadata`==`false` mode that needs this work to happen in
`ReflectionVirtualInvokeMapNode` since we don't make
`ReflectedMethodNode` there (because everything is reflected).

Cc @dotnet/ilc-contrib",2025-11-18 22:33:36+00:00,Michal Strehovský,0,,,2,9,30,centralize virtual method invocation dependencies (issue_ref) should be solely responsible fordeclaring dependencies necessary to generate the invocation tableentries. instead we had them partially duplicated between and.this can lead to subtle problems in the unsupported== mode that needs this work to happen in since we don't make there (because everything is reflected).cc @dotnet/ilc-contrib
dotnet/runtime,248b9d881de8a739942f7344c9d48ceeea019453,"Remove SelfContained_R2R_Composite test and infrastructure (#121645)

Remove the disabled `SelfContained_R2R_Composite` test. Trying to emulate all the combinations of how an app can be deployed in the SDK is a bit too complicated to be worth it in the runtime repo. We rely on coverage in the sdk rep

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: elinor-fung <47805090+elinor-fung@users.noreply.github.com>",2025-11-19 03:29:15+00:00,Copilot,0,,,1,0,18,remove selfcontained_r2r_composite test and infrastructure (issue_ref)remove the disabled test. trying to emulate all the combinations of how an app can be deployed in the sdk is a bit too complicated to be worth it in the runtime repo. we rely on coverage in the sdk rep---------
dotnet/runtime,5eedc2afcda25f6e380564380911da3172fec9e2,"Baseline failing async tests (#121761)

* `dynamic` keyword is unsupported with AOT
* So are ALCs
* `GetInterfaceMap` API has known issues (the test actually passes right
now, but will fail with #121697 so just disabling now)",2025-11-19 07:27:52+00:00,Michal Strehovský,0,,,3,17,3,"baseline failing async tests (issue_ref)* keyword is unsupported with aot* so are alcs* api has known issues (the test actually passes rightnow, but will fail with issue_ref so just disabling now)"
dotnet/runtime,96765f3ba23d61211cc76a9c0f9c979fdaabcfee,"JIT: Indicate usage of TYP_LONG for x86 in async transformation (#121746)

Also fix the name for the async continuation parameter; it was showing
up as ""tmp-1"" since a recent change to `compMap2ILvarNum`.

Fix #120341",2025-11-19 12:04:26+00:00,Jakob Botsch Nielsen,1,eec5790c979bca40017e35f85dd695ac4f0762b4,"Fix missing side-effects handling in gtFoldTypeCompare (#121875)

Fixes https://github.com/dotnet/runtime/issues/121874",2,9,4,"jit: indicate usage of typ_long for x86 in async transformation (issue_ref)also fix the name for the async continuation parameter; it was showingup as ""tmp-1"" since a recent change to .fix issue_ref"
dotnet/runtime,01b11cdc86ab15cfc476783f849ff3f208bf51e4,"Revert ""Support Notones in alternation reductions that merge sets (#118109)"" (#121775)

Clean automatic revert of #118109, plus adding a few additional tests.
The logic of the optimization was not complete. You could end up with a
negative set and then attempt to add values to it when merging in
subsequent alternation branches, and those branches would be interpreted
erroneously as negative rather than positive.",2025-11-19 12:06:38+00:00,Stephen Toub,0,,,4,7,32,"revert ""support notones in alternation reductions that merge sets (issue_ref)"" (issue_ref)clean automatic revert of issue_ref, plus adding a few additional tests.the logic of the optimization was not complete. you could end up with anegative set and then attempt to add values to it when merging insubsequent alternation branches, and those branches would be interpretederroneously as negative rather than positive."
dotnet/runtime,4fed3f3e313c9d81e79b57f472880f80d63870b8,"[RyuJit/WASM] Crossgen2 integration and further factoring (#121563)

This allows:
```
int add(int a, int b) => a + b;
```
to run until the NYI in codegen.",2025-11-19 16:13:15+00:00,SingleAccretion,1,284c0ae38e3eac0f6ad5cdaa0156d22fc6fc3915,"[Wasm RyuJit] fix abi info for small arg types (#122232)

The ""register"" is stack sized, but the argument is smaller.",51,495,120,[ryujit/wasm] crossgen2 integration and further factoring (issue_ref)this allows:to run until the nyi in codegen.
dotnet/runtime,3ac60776a40cdb7ab6e1629b9262f1704ef407b8,"Update Fedora references in YML files from 42/40 to 43/42 (#121767)

Updates Fedora version references in CI/CD pipeline configuration files
for Helix testing infrastructure.

## Changes Made

- **Fedora Latest**: Updated from version 42 to 43
- **Fedora Oldest**: Updated from version 40 to 42

These changes update the Docker image references and platform
definitions used by the Helix testing infrastructure to test against
newer Fedora versions.

## Files Modified

- `eng/pipelines/helix-platforms.yml` - Updated both latest and oldest
Fedora version definitions
- `eng/pipelines/libraries/helix-queues-setup.yml` - Updated Fedora
reference used in extra-platforms CoreCLR testing

## Validation

- ✅ YAML syntax validated successfully
- ✅ No security vulnerabilities detected (CodeQL scan)
- ✅ Changes follow established patterns in the configuration files

<!-- START COPILOT CODING AGENT SUFFIX -->



<details>

<summary>Original prompt</summary>

> Update Fedora references in *.yml files. I believe there are only two
relevant ones. They can be found by searching for ""fedora-"".
> 
> Where there is min and max, use 42 and 43, respectively. Where there
is a single choice, use 43.


</details>



<!-- START COPILOT CODING AGENT TIPS -->
---

💬 We'd love your input! Share your thoughts on Copilot coding agent in
our [2 minute survey](https://gh.io/copilot-coding-agent-survey).

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: richlander <2608468+richlander@users.noreply.github.com>",2025-11-19 19:40:47+00:00,Copilot,0,,,2,5,5,"update fedora references in yml files from 42/40 to 43/42 (issue_ref)updates fedora version references in ci/cd pipeline configuration filesfor helix testing infrastructure.## changes made- **fedora latest**: updated from version 42 to 43- **fedora oldest**: updated from version 40 to 42these changes update the docker image references and platformdefinitions used by the helix testing infrastructure to test againstnewer fedora versions.## files modified- - updated both latest and oldestfedora version definitions- - updated fedorareference used in extra-platforms coreclr testing## validation- ✅ yaml syntax validated successfully- ✅ no security vulnerabilities detected (codeql scan)- ✅ changes follow established patterns in the configuration files<!-- start copilot coding agent suffix --><details><summary>original prompt</summary>> update fedora references in *.yml files. i believe there are only tworelevant ones. they can be found by searching for ""fedora-"".> > where there is min and max, use 42 and 43, respectively. where thereis a single choice, use 43.</details><!-- start copilot coding agent tips -->---💬 we'd love your input! share your thoughts on copilot coding agent inour [2 minute survey](---------"
dotnet/runtime,0bba6857e25d5e84a9b25a11c61851825ee41c2b,"Failfast from async inst+unbox thunks (#121812)

and block tests on ActiveIssue.

FailFast is better than memory corruptions.",2025-11-19 21:54:38+00:00,Michal Strehovský,0,,,4,81,0,failfast from async inst+unbox thunks (issue_ref)and block tests on activeissue.failfast is better than memory corruptions.
dotnet/runtime,e38c777d55410798bc4719028728bc4ef650870b,"Allow the other async variant in AsyncMaskingILProvider (#121813)

This codepath is hittable since we still scan compiler generated code
(we do not generate any warnings for it).",2025-11-19 21:56:29+00:00,Michal Strehovský,0,,,1,1,2,allow the other async variant in asyncmaskingilprovider (issue_ref)this codepath is hittable since we still scan compiler generated code(we do not generate any warnings for it).
dotnet/runtime,1395bb65486853b2d26c6d068a0d74227be05060,"Add support for runtime async in the scanner (#121622)

Before we start generating native code using RyuJIT, we do an IL
scanning pass where we build the whole program view. The whole program
view builds a dependency graph that is similar to the one we create
during code generation.

Instead of generating code, we look at method IL and generate whatever
dependency nodes are going to be needed for real codegen
(ConstructedEETypeNode for newobj, more scanned method nodes for calls,
etc.).

This PR adds support for scanning methods that compile into state
machine. It also suppresses some of the whole program optimizations
around the special `Continuation` type.

Cc @dotnet/ilc-contrib (@jakobbotsch for the `impMatchTaskAwaitPattern`
copy)",2025-11-19 22:19:05+00:00,Michal Strehovský,1,2bb5fc63e4d21f3731d9ac0a3867214758bf878f,"Fix runtime async in multifile compilation (#122451)

1. When compiling a library, compile all methods including async
variants.
2. When enumerating methods on types, generate variants for every task
returning method, not just virtuals.

The 2 is a bit surprising but it matches what we now do in
https://github.com/dotnet/runtime/blob/d31e5990b896447bfc3dbe98cfe6ec3b169a4896/src/coreclr/tools/Common/JitInterface/CorInfoImpl.cs#L1849-L1857.
We originally restricted this to methods being runtimeasync but changed
it in
https://github.com/dotnet/runtime/pull/121622/files#diff-132a77bcd3f74cf0e0b04fbccda246c97c91e40562d78cb01fff61cf69403573L1860.

Cc @dotnet/ilc-contrib",4,197,5,"add support for runtime async in the scanner (issue_ref)before we start generating native code using ryujit, we do an ilscanning pass where we build the whole program view. the whole programview builds a dependency graph that is similar to the one we createduring code generation.instead of generating code, we look at method il and generate whateverdependency nodes are going to be needed for real codegen(constructedeetypenode for newobj, more scanned method nodes for calls,etc.).this pr adds support for scanning methods that compile into statemachine. it also suppresses some of the whole program optimizationsaround the special type.cc @dotnet/ilc-contrib for the copy)"
dotnet/runtime,e40a97872339b3608165571d5875db2aba609710,"Move macOS PR helix queues to 26 for arm64 and 15 for amd64 (#121373)

Replace hardcoded macOS queue names with centralized variable aliases
from `eng/pipelines/helix-platforms.yml`, enabling automatic version
updates across PR and CI definitions.

This PR updates the default queues for libraries and coreclr PRs to use
the latest macOS versions.

## Changes Made

**Pipeline Configuration Files:**
- Added helix-platforms.yml import to runtime.yml, coreclr/ci.yml, and
libraries/variables.yml at the pipeline level to avoid Azure Pipelines
size limits

**Helix Platform Definitions (helix-platforms.yml):**
- Updated `helix_macos_x64_latest` from OSX.13.Amd64.Open to
OSX.15.Amd64.Open (Sequoia 15)
- Updated `helix_macos_x64_latest_internal` from OSX.13.Amd64 to
OSX.15.Amd64 (Sequoia 15)
- ARM64 uses OSX.26.Arm64.Open (Sequoia 15 with macOS 26.x kernel)
- x64 uses OSX.15.Amd64.Open (Sequoia 15)
- Changed common aliases to use template substitution `${{ variables.*
}}` for variable definitions

**Queue Setup Files:**
- installer/helix-queues-setup.yml: Replaced hardcoded OSX queue names
with runtime expansion `$(helix_macos_arm64)` and `$(helix_macos_x64)`
- libraries/helix-queues-setup.yml: Replaced hardcoded OSX queue names
with runtime expansion `$(helix_macos_arm64)` and `$(helix_macos_x64)`
- coreclr/templates/helix-queues-setup.yml: Replaced public branch
hardcoded queue names with runtime expansion `$(helix_macos_arm64)` and
`$(helix_macos_x64)` while preserving superpmi-diffs exception
(OSX.14.Arm64.Open) and internal queues

**Test Changes:**
- Temporarily skipped `MatchesCodesignOutput` test due to macOS 26
codesign behavior change (only hashing __TEXT segment instead of entire
file). This test will need to be updated in a follow-up to accommodate
the new codesign behavior.

## Variable Expansion Strategy

- **Variable definitions** in helix-platforms.yml use template
substitution `${{ variables.* }}` for compile-time evaluation
- **Variable references** in helix-queues-setup.yml files use runtime
expansion `$(...)` for runtime evaluation

## Out of Scope

- iOS/tvOS simulator/device queues (unchanged)
- Python scripts (e.g., superpmi_collect_setup.py)
- Older versions remain at their respective macOS versions

## Current Variable Resolutions

- `helix_macos_arm64` → OSX.26.Arm64.Open (Sequoia 15)
- `helix_macos_x64` → OSX.15.Amd64.Open (Sequoia 15)
- `helix_macos_arm64_latest_internal` → OSX.26.Arm64 (Sequoia 15)
- `helix_macos_x64_latest_internal` → OSX.15.Amd64 (Sequoia 15)",2025-11-19 22:25:11+00:00,Copilot,0,,,6,98,103,"move macos pr helix queues to 26 for arm64 and 15 for amd64 (issue_ref)replace hardcoded macos queue names with centralized variable aliasesfrom , enabling automatic versionupdates across pr and ci definitions.this pr updates the default queues for libraries and coreclr prs to usethe latest macos versions.## changes made**pipeline configuration files:**- added helix-platforms.yml import to runtime.yml, coreclr/ci.yml, andlibraries/variables.yml at the pipeline level to avoid azure pipelinessize limits**helix platform definitions (helix-platforms.yml):**- updated from osx.13.amd64.open toosx.15.amd64.open (sequoia 15)- updated from osx.13.amd64 toosx.15.amd64 (sequoia 15)- arm64 uses osx.26.arm64.open (sequoia 15 with macos 26.x kernel)- x64 uses osx.15.amd64.open (sequoia 15)- changed common aliases to use template substitution for variable definitions**queue setup files:**- installer/helix-queues-setup.yml: replaced hardcoded osx queue nameswith runtime expansion and - libraries/helix-queues-setup.yml: replaced hardcoded osx queue nameswith runtime expansion and - coreclr/templates/helix-queues-setup.yml: replaced public branchhardcoded queue names with runtime expansion and while preserving superpmi-diffs exception(osx.14.arm64.open) and internal queues**test changes:**- temporarily skipped test due to macos 26codesign behavior change (only hashing __text segment instead of entirefile). this test will need to be updated in a follow-up to accommodatethe new codesign behavior.## variable expansion strategy- **variable definitions** in helix-platforms.yml use templatesubstitution for compile-time evaluation- **variable references** in helix-queues-setup.yml files use runtimeexpansion for runtime evaluation## out of scope- ios/tvos simulator/device queues (unchanged)- python scripts (e.g., superpmi_collect_setup.py)- older versions remain at their respective macos versions## current variable resolutions- → osx.26.arm64.open (sequoia 15)- → osx.15.amd64.open (sequoia 15)- → osx.26.arm64 (sequoia 15)- → osx.15.amd64 (sequoia 15)"
dotnet/runtime,f62405c4c7e61869012a4954571b64fd3195dbb1,"Add context argument to crash dump functions to preserve register state (#121773)

Add context argument to PalCreateCrashDumpIfEnabled and
PROCCreateCrashDumpIfEnabled methods

This PR addresses the issue where the context pointer is missing in
crash dumps, making diagnosis difficult.

Contributes to #119761

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: jkotas <6668460+jkotas@users.noreply.github.com>",2025-11-19 23:52:23+00:00,Copilot,0,,,6,55,19,"add context argument to crash dump functions to preserve register state (issue_ref)add context argument to palcreatecrashdumpifenabled andproccreatecrashdumpifenabled methodsthis pr addresses the issue where the context pointer is missing incrash dumps, making diagnosis difficult.contributes to issue_ref---------"
dotnet/runtime,5735338cb1adb84c282588c812fa66d6fea78399,"Fix NativeAOT GC hang on single-core systems by preventing RT signal queue overflow (#121772)

On single-core systems under high CPU load, NativeAOT GC can hang for
hours when suspending threads. The Unix implementation repeatedly sends
RT signals to threads that cannot suspend immediately, causing signal
queue overflow and handler starvation.

### Changes

- Add `IsActivationPending()` check in `PalHijack()` before sending
suspension signals
- Prevents duplicate signals when activation is already pending
- Aligns Unix behavior with existing Windows implementation

```cpp
void PalHijack(Thread* pThreadToHijack)
{
    if (pThreadToHijack->IsActivationPending())
    {
        return;
    }

    pThreadToHijack->SetActivationPending(true);
    // ... send signal
}
```

The flag is set before sending `pthread_kill()` and cleared in the
signal handler after processing, ensuring at most one pending signal per
thread.

Fixes #121623

<!-- START COPILOT CODING AGENT SUFFIX -->



<details>

<summary>Original prompt</summary>


----

*This section details on the original issue you should resolve*

<issue_title>NativeAOT garbage collector hang</issue_title>
<issue_description>### Description

GC hangs for extended periods (several hours) on single core system
running NativeAOT build when CPU load is high.

Noticed with a web application that uses gRpc for internal communication
between the dotnet application and the rest of the linux system.

### Reproduction Steps

Run NativeAOT build on single CPU core, with high CPU load on that same
core.

### Expected behavior

The application runs.

### Actual behavior

The application stops running for long periods, up to several hours.

### Regression?

Not known.

### Known Workarounds

Reduce the CPU load, increase the priority of the dotnet threads, or run
the application on multiple cores .

### Configuration

Tested with .NET 9.0.2, 9.0.10 and 10.0
OS: Custom Preempt-RT Linux based on Yocto Scarthgap (kernel v6.1)
Architecture: ARM64
Dotnet application running in docker (aspnet noble-chiseled)


### Other information

If I understood the GC correctly, it tries to stop all other threads
before running the actual collection. For the UNIX NativeAOT this is
implemented using real-time signals, so that the GC sends the RT signal
to all threads that need to be suspended, and it does this until the
threads report that they have been suspended succesfully.

AFAICT looking at gdb, the problem is triggered if one thread cannot be
suspended immediately, and the thread trying to run the GC keeps on
filling the rt-signal queue. This means that the thread will keep on
running its' signal handler over and over again and never complete the
actual suspend.

Below snippet of the callstack shown by gdb:

Thread 16 (Thread 0xffbebefdf080 (LWP 4657) ""WebHMI""):
dotnet/runtime#0 0x0000ffff8b767558 in ?? () from
target:/lib/aarch64-linux-gnu/libc.so.6
dotnet/runtime#1 0x0000aaaab9a182fc in PalHijack (hThread=<optimized
out>, pThreadToHijack=0xffbeee0af7f0) at
/__w/1/s/src/coreclr/nativeaot/Runtime/unix/PalRedhawkUnix.cpp:1089
dotnet/runtime#2 0x0000aaaab99d7c78 in ThreadStore::SuspendAllThreads
(this=<optimized out>, waitForGCEvent=<optimized out>) at
/__w/1/s/src/coreclr/nativeaot/Runtime/threadstore.cpp:264
dotnet/runtime#3 0x0000aaaab99d27f4 in GCToEEInterface::SuspendEE
(reason=<optimized out>) at
/__w/1/s/src/coreclr/nativeaot/Runtime/gcenv.ee.cpp:50
dotnet/runtime#4 0x0000aaaab99e6f50 in
WKS::GCHeap::GarbageCollectGeneration (this=<optimized out>, gen=0,
reason=reason_alloc_soh) at /__w/1/s/src/coreclr/gc/gc.cpp:51181
dotnet/runtime#5 0x0000aaaab99e8220 in
WKS::gc_heap::trigger_gc_for_alloc (gen_number=0,
gen_number@entry=-1090665120, gr=3204301792,
msl=msl@entry=0xaaaabcbcc5b8 <WKS::gc_heap::more_space_lock_soh>,
loh_p=false, take_state=<optimized out>) at
/__w/1/s/src/coreclr/gc/gc.cpp:18926
dotnet/runtime#6 0x0000aaaab99e8ea4 in
WKS::gc_heap::try_allocate_more_space
(acontext=acontext@entry=0xffbebefdf7f0, size=size@entry=48,
flags=flags@entry=2, gen_number=0, gen_number@entry=-1090665024) at
/__w/1/s/src/coreclr/gc/gc.cpp:19064
dotnet/runtime#7 0x0000aaaab9a0db78 in WKS::gc_heap::allocate_more_space
(acontext=0xffbebefdf7f0, size=48, flags=2, alloc_generation_number=0)
at /__w/1/s/src/coreclr/gc/gc.cpp:19564
dotnet/runtime#8 WKS::gc_heap::allocate (jsize=48,
acontext=0xffbebefdf7f0, flags=2) at
/__w/1/s/src/coreclr/gc/gc.cpp:19595
dotnet/runtime#9 WKS::GCHeap::Alloc (this=<optimized out>,
context=0xffbebefdf7f0, size=48, flags=2) at
/__w/1/s/src/coreclr/gc/gc.cpp:50122
dotnet/runtime#10 0x0000aaaab99d19fc in GcAllocInternal
(pEEType=0xaaaabd4482d8, uFlags=2, numElements=0,
pThread=0xffbebefdf7f0) at
/__w/1/s/src/coreclr/nativeaot/Runtime/GCHelpers.cpp:542
dotnet/runtime#11 0x0000aaaab9a2550c in RhpNewObject () at
/__w/1/s/src/coreclr/nativeaot/Runtime/arm64/AllocFast.S:88
dotnet/runtime#12 0x0000aaaabb0fd00c in ___ctor (this=...) at
/_/src/coreclr/nativeaot/Common/src/System/Collections/Concurrent/ConcurrentUnifier.cs:69
dotnet/runtime#13 0x0000aaaaba258e00 in
S_P_CoreLib_System_Reflection_Runtime_TypeInfos_RuntimeTypeInfo_TypeComponentsCache__CreatePerNameQueryCaches
(type=..., ignoreCase=true) at
/_/src/coreclr/nativeaot/System.Private.CoreLib/src/System/Reflection/Runtime/TypeInfos/RuntimeTypeInfo.TypeComponentsCache.cs:84
dotnet/runtime#14 0x0000aaaaba258d24 in
S_P_CoreLib_System_Reflection_Runtime_TypeInfos_RuntimeTypeInfo_TypeComponentsCache___ctor
(this=..., type=...) at
/_/src/coreclr/nativeaot/System.Private.CoreLib/src/System/Reflection/Runtime/TypeInfos/RuntimeTypeInfo.TypeComponentsCache.cs:37
dotnet/runtime#15 0x0000aaaaba1ff314 in
S_P_CoreLib_System_Reflection_Runtime_TypeInfos_RuntimeTypeInfo__get_Cache
(this=...) at

/_/src/coreclr/nativeaot/System.Private.CoreLib/src/System/Reflection/Runtime/TypeInfos/RuntimeTypeInfo.BindingFlags.cs:188

Thread 14 (Thread 0xffbeee0af080 (LWP 4622) ""WebHMI""):
dotnet/runtime#0 ActivationHandler (code=34, siginfo=0xffbeee0ab3f0,
context=...

</details>

- Fixes dotnet/runtime#121623

<!-- START COPILOT CODING AGENT TIPS -->
---

💡 You can make Copilot smarter by setting up custom instructions,
customizing its development environment and configuring Model Context
Protocol (MCP) servers. Learn more [Copilot coding agent
tips](https://gh.io/copilot-coding-agent-tips) in the docs.

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: VSadov <8218165+VSadov@users.noreply.github.com>",2025-11-20 03:12:18+00:00,Copilot,1,ee898ca7cc38e8e5ac924bb9fe733d980269c1a7,"Fix lookup for current Thread in async signal handler (#122048)

The current `CheckActivationSafePoint` uses thread local storage to
get the current Thread instance. But this function is called from
async signal handler (the activation signal handler) and it is not
allowed to access TLS variables there because the access can allocate
and if the interrupted code was running in an allocation code, it
could crash.
There was no problem with this since .NET 1.0, but a change in the
recent glibc version has broken this. We've got reports of crashes
in this code due to the reason mentioned above.

This change introduces an async safe mechanism for accessing the
current Thread instance from async signal handlers. It uses a
segmented array that can grow, but never shrink. Entries for
threads are added when runtime creates a thread / attaches to an
external thread and removed when the thread dies.

The check for safety of the activation injection was further enhanced
to make sure that the ScanReaderLock is not taken. In cases it would 
need to be taken, we just reject the location.

Since NativeAOT is subject to the same issue, the code to maintain the
thread id to thread instance map is placed to the minipal and shared
between coreclr and NativeAOT.

Closes #121581

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2,8,0,"fix nativeaot gc hang on single-core systems by preventing rt signal queue overflow (issue_ref)on single-core systems under high cpu load, nativeaot gc can hang forhours when suspending threads. the unix implementation repeatedly sendsrt signals to threads that cannot suspend immediately, causing signalqueue overflow and handler starvation.### changes- add check in before sendingsuspension signals- prevents duplicate signals when activation is already pending- aligns unix behavior with existing windows implementationthe flag is set before sending and cleared in thesignal handler after processing, ensuring at most one pending signal perthread.fixes issue_ref<!-- start copilot coding agent suffix --><details><summary>original prompt</summary>----*this section details on the original issue you should resolve*<issue_title>nativeaot garbage collector hang</issue_title><issue_description>### descriptiongc hangs for extended periods (several hours) on single core systemrunning nativeaot build when cpu load is high.noticed with a web application that uses grpc for internal communicationbetween the dotnet application and the rest of the linux system.### reproduction stepsrun nativeaot build on single cpu core, with high cpu load on that samecore.### expected behaviorthe application runs.### actual behaviorthe application stops running for long periods, up to several hours.### regression?not known.### known workaroundsreduce the cpu load, increase the priority of the dotnet threads, or runthe application on multiple cores .### configurationtested with .net 9.0.2, 9.0.10 and 10.0os: custom preempt-rt linux based on yocto scarthgap (kernel v6.1)architecture: arm64dotnet application running in docker (aspnet noble-chiseled)### other informationif i understood the gc correctly, it tries to stop all other threadsbefore running the actual collection. for the unix nativeaot this isimplemented using real-time signals, so that the gc sends the rt signalto all threads that need to be suspended, and it does this until thethreads report that they have been suspended succesfully.afaict looking at gdb, the problem is triggered if one thread cannot besuspended immediately, and the thread trying to run the gc keeps onfilling the rt-signal queue. this means that the thread will keep onrunning its' signal handler over and over again and never complete theactual suspend.below snippet of the callstack shown by gdb:thread 16 (thread 0xffbebefdf080 (lwp 4657) ""webhmi""):dotnet/runtimeissue_ref 0x0000ffff8b767558 in ?? () fromtarget:/lib/aarch64-linux-gnu/libc.so.6dotnet/runtimeissue_ref 0x0000aaaab9a182fc in palhijack (hthread=<optimizedout>, pthreadtohijack=0xffbeee0af7f0) at/__w/1/s/src/coreclr/nativeaot/runtime/unix/palredhawkunix.cpp:1089dotnet/runtimeissue_ref 0x0000aaaab99d7c78 in threadstore::suspendallthreads(this=<optimized out>, waitforgcevent=<optimized out>) at/__w/1/s/src/coreclr/nativeaot/runtime/threadstore.cpp:264dotnet/runtimeissue_ref 0x0000aaaab99d27f4 in gctoeeinterface::suspendee(reason=<optimized out>) at/__w/1/s/src/coreclr/nativeaot/runtime/gcenv.ee.cpp:50dotnet/runtimeissue_ref 0x0000aaaab99e6f50 inwks::gcheap::garbagecollectgeneration (this=<optimized out>, gen=0,reason=reason_alloc_soh) at /__w/1/s/src/coreclr/gc/gc.cpp:51181dotnet/runtimeissue_ref 0x0000aaaab99e8220 inwks::gc_heap::trigger_gc_for_alloc (gen_number=0, gr=3204301792, <wks::gc_heap::more_space_lock_soh>,loh_p=false, take_state=<optimized out>) at/__w/1/s/src/coreclr/gc/gc.cpp:18926dotnet/runtimeissue_ref 0x0000aaaab99e8ea4 inwks::gc_heap::try_allocate_more_space gen_number=0, at/__w/1/s/src/coreclr/gc/gc.cpp:19064dotnet/runtimeissue_ref 0x0000aaaab9a0db78 in wks::gc_heap::allocate_more_space(acontext=0xffbebefdf7f0, size=48, flags=2, alloc_generation_number=0)at /__w/1/s/src/coreclr/gc/gc.cpp:19564dotnet/runtimeissue_ref wks::gc_heap::allocate (jsize=48,acontext=0xffbebefdf7f0, flags=2) at/__w/1/s/src/coreclr/gc/gc.cpp:19595dotnet/runtimeissue_ref wks::gcheap::alloc (this=<optimized out>,context=0xffbebefdf7f0, size=48, flags=2) at/__w/1/s/src/coreclr/gc/gc.cpp:50122dotnet/runtimeissue_ref 0x0000aaaab99d19fc in gcallocinternal(peetype=0xaaaabd4482d8, uflags=2, numelements=0,pthread=0xffbebefdf7f0) at/__w/1/s/src/coreclr/nativeaot/runtime/gchelpers.cpp:542dotnet/runtimeissue_ref 0x0000aaaab9a2550c in rhpnewobject () at/__w/1/s/src/coreclr/nativeaot/runtime/arm64/allocfast.s:88dotnet/runtimeissue_ref 0x0000aaaabb0fd00c in ___ctor (this=...) at/_/src/coreclr/nativeaot/common/src/system/collections/concurrent/concurrentunifier.cs:69dotnet/runtimeissue_ref 0x0000aaaaba258e00 ins_p_corelib_system_reflection_runtime_typeinfos_runtimetypeinfo_typecomponentscache__createpernamequerycaches(type=..., ignorecase=true) at/_/src/coreclr/nativeaot/system.private.corelib/src/system/reflection/runtime/typeinfos/runtimetypeinfo.typecomponentscache.cs:84dotnet/runtimeissue_ref 0x0000aaaaba258d24 ins_p_corelib_system_reflection_runtime_typeinfos_runtimetypeinfo_typecomponentscache___ctor(this=..., type=...) at/_/src/coreclr/nativeaot/system.private.corelib/src/system/reflection/runtime/typeinfos/runtimetypeinfo.typecomponentscache.cs:37dotnet/runtimeissue_ref 0x0000aaaaba1ff314 ins_p_corelib_system_reflection_runtime_typeinfos_runtimetypeinfo__get_cache(this=...) at/_/src/coreclr/nativeaot/system.private.corelib/src/system/reflection/runtime/typeinfos/runtimetypeinfo.bindingflags.cs:188thread 14 (thread 0xffbeee0af080 (lwp 4622) ""webhmi""):dotnet/runtimeissue_ref activationhandler (code=34, siginfo=0xffbeee0ab3f0,context=...</details>- fixes dotnet/runtimeissue_ref<!-- start copilot coding agent tips -->---💡 you can make copilot smarter by setting up custom instructions,customizing its development environment and configuring model contextprotocol (mcp) servers. learn more [copilot coding agenttips]( in the docs.---------"
dotnet/runtime,5bdb38b923fcb2b6c204576b86cde58b96c1bcb7,"Remove obsolete .NET 5.0 references from bundle tests (#121821)

.NET 5.0 has been out of support for years. Several test methods in the
bundle tests explicitly targeted version 5.0 and should be removed.

cc @dotnet/appmodel @AaronRobinsonMSFT 

### Changes
- Removed `SelfContained_Targeting50` test method from
`BundledAppWithSubDirs`
- Removed `FrameworkDependent_Targeting50` test method from
`BundledAppWithSubDirs`
- Removed `new Version(5, 0)` parameter from
`SigningTests.OverwritingExistingBundleClearsMacOsSignatureCache` when
rebundling the app

The remaining tests provide equivalent coverage without version-specific
targeting to obsolete versions.

<!-- START COPILOT CODING AGENT SUFFIX -->



<details>

<summary>Original prompt</summary>

> We have some tests in BundledAppWithSubDirs that explicitly target
5.0. This has been out of support for some time now. We should remove
those tests.


</details>



<!-- START COPILOT CODING AGENT TIPS -->
---

💡 You can make Copilot smarter by setting up custom instructions,
customizing its development environment and configuring Model Context
Protocol (MCP) servers. Learn more [Copilot coding agent
tips](https://gh.io/copilot-coding-agent-tips) in the docs.

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: elinor-fung <47805090+elinor-fung@users.noreply.github.com>",2025-11-20 05:20:45+00:00,Copilot,0,,,2,1,41,"remove obsolete .net 5.0 references from bundle tests (issue_ref).net 5.0 has been out of support for years. several test methods in thebundle tests explicitly targeted version 5.0 and should be removed.cc @dotnet/appmodel @aaronrobinsonmsft ### changes- removed test method from- removed test method from- removed parameter from whenrebundling the appthe remaining tests provide equivalent coverage without version-specifictargeting to obsolete versions.<!-- start copilot coding agent suffix --><details><summary>original prompt</summary>> we have some tests in bundledappwithsubdirs that explicitly target5.0. this has been out of support for some time now. we should removethose tests.</details><!-- start copilot coding agent tips -->---💡 you can make copilot smarter by setting up custom instructions,customizing its development environment and configuring model contextprotocol (mcp) servers. learn more [copilot coding agenttips]( in the docs.---------"
dotnet/runtime,bda571bfc728369cc2bbd33f2c161ea73c762b8d,"Allow PublishReadyToRunEmitSymbols to be overridden (#121406)

## Description

This PR updates PublishReadyToRunEmitSymbols to allow it to be
overridden. It aligns the behavior with the SDK mirror.",2025-11-20 09:59:46+00:00,Milos Kotlar,0,,,1,6,6,allow publishreadytorunemitsymbols to be overridden (issue_ref)## descriptionthis pr updates publishreadytorunemitsymbols to allow it to beoverridden. it aligns the behavior with the sdk mirror.
dotnet/runtime,988296b080776c885ee0725b481db4ae4d4360ed,"JIT: Handle multi-reg async calls stored to promoted locals (#121749)

In some cases the async transformation needs to introduce a new local to
store the result of an async call to. If the previous store was a
multi-reg call stored to an independently promoted local then we would
produce illegal IR. For example, the IR

```
  t79 = ▌  CALL      struct <unknown method> (async) $702
        ┌──▌  t79    struct
        ▌  STORE_LCL_VAR struct<System.ValueTuple`3, 16>(P) V25 tmp9
        ▌    ref    field V25.Item3 (fldOffset=0x0) -> V275 tmp259      d:2
        ▌    int    field V25.Item2 (fldOffset=0x8) -> V276 tmp260      d:1
        ▌    ubyte  field V25.Item1 (fldOffset=0xc) -> V277 tmp261      d:1 $VN.Void
```

would be canonicalized into

```

  t79 = ▌  CALL      struct <unknown method> (async) $702
        ┌──▌  t79    struct
        ▌  STORE_LCL_VAR struct<System.ValueTuple`3, 16> V337 rat6
t5027 =    LCL_VAR   struct<System.ValueTuple`3, 16> V337 rat6
        ┌──▌  t5027  struct
        ▌  STORE_LCL_VAR struct<System.ValueTuple`3, 16>(P) V25 tmp9
        ▌    ref    field V25.Item3 (fldOffset=0x0) -> V275 tmp259      d:2
        ▌    int    field V25.Item2 (fldOffset=0x8) -> V276 tmp260      d:1
        ▌    ubyte  field V25.Item1 (fldOffset=0xc) -> V277 tmp261      d:1 $VN.Void

```
but that store to the promoted local with a LCL_VAR source is not legal.

Fix the problem by decomposing the store when necessary.",2025-11-20 12:06:57+00:00,Jakob Botsch Nielsen,1,56cb23a7958888a16fd8863fbc7d8855d4d36777,"JIT: Keep continuation alive until generic context is loaded (#121951)

There is a theoretical problem where JIT reports the continuation as
dead before having restored the generic context local that the EE side
is using to keep a `LoaderAllocator` alive.

Insert an explicit `GT_KEEPALIVE` node after the state restore.

Fix #117265",1,28,1,"jit: handle multi-reg async calls stored to promoted locals (issue_ref)in some cases the async transformation needs to introduce a new local tostore the result of an async call to. if the previous store was amulti-reg call stored to an independently promoted local then we wouldproduce illegal ir. for example, the irwould be canonicalized intobut that store to the promoted local with a lcl_var source is not legal.fix the problem by decomposing the store when necessary."
dotnet/runtime,ac260b49464c71c700c3392fa5be738af6ab688b,"JIT: disable stack allocation for sites in CEA cloned regions (#121771)

Our escape analysis assumes each stack allocation candidate node has a
unique temp that has that allocation as its only assigned value.

Conditional escape analysis may clone these nodes, creating a second
allocation site assigning to the associated temp. This breaks the 1-1
assumption noted above.

If those allocations do not escape then the JIT will stack allocate
them, creating two distinct stack locals. In subsequent IR rewriting the
JIT will then use the address of just one of the locals for all
appearances of the temp, which is incorrect, and leads to the generated
code possibly reading uninitialized stack slots.

To fix this we disallow stack allocation for sites in blocks that were
cloned, or their clones. (We can actually handle this case with better
bookkeeping, but that is more involved).

Fixes #121736.",2025-11-20 15:16:49+00:00,Andy Ayers,1,6a8f931ac63321a90218aead86c6eec75416133c,"Mark Runtime_121736 test as GCStressIncompatible (#122064)

`JIT/opt/ObjectStackAllocation/Runtime_121736` times out under GCStress
due to its 10M iteration loop.

- Added `<GCStressIncompatible>true</GCStressIncompatible>` to exclude
from GCStress runs
- Added `<RequiresProcessIsolation>true</RequiresProcessIsolation>`
(required for GCStressIncompatible)

Fixes #122063

<!-- START COPILOT CODING AGENT SUFFIX -->



<details>

<summary>Original prompt</summary>

> 
> ----
> 
> *This section details on the original issue you should resolve*
> 
>
<issue_title>`JIT/opt/ObjectStackAllocation/Runtime_121736/Runtime_121736`
times out under GCStress</issue_title>
> <issue_description>This test should just be marked as
GCStressIncompatible.</issue_description>
> 
> ## Comments on the Issue (you are @copilot in this section)
> 
> <comments>
> </comments>
> 


</details>

- Fixes dotnet/runtime#122063

<!-- START COPILOT CODING AGENT TIPS -->
---

✨ Let Copilot coding agent [set things up for
you](https://github.com/dotnet/runtime/issues/new?title=✨+Set+up+Copilot+instructions&body=Configure%20instructions%20for%20this%20repository%20as%20documented%20in%20%5BBest%20practices%20for%20Copilot%20coding%20agent%20in%20your%20repository%5D%28https://gh.io/copilot-coding-agent-tips%29%2E%0A%0A%3COnboard%20this%20repo%3E&assignees=copilot)
— coding agent works faster and does higher quality work when set up for
your repo.

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: jakobbotsch <7887810+jakobbotsch@users.noreply.github.com>",4,129,2,"jit: disable stack allocation for sites in cea cloned regions (issue_ref)our escape analysis assumes each stack allocation candidate node has aunique temp that has that allocation as its only assigned value.conditional escape analysis may clone these nodes, creating a secondallocation site assigning to the associated temp. this breaks the 1-1assumption noted above.if those allocations do not escape then the jit will stack allocatethem, creating two distinct stack locals. in subsequent ir rewriting thejit will then use the address of just one of the locals for allappearances of the temp, which is incorrect, and leads to the generatedcode possibly reading uninitialized stack slots.to fix this we disallow stack allocation for sites in blocks that werecloned, or their clones. (we can actually handle this case with betterbookkeeping, but that is more involved).fixes issue_ref."
dotnet/runtime,db5e84aeaf5146a8f798102f4fb2dd6fd443f52c,Trace out errno when writing extracted files fails in single-file (#121820),2025-11-20 18:19:59+00:00,Elinor Fung,0,,,1,8,2,trace out errno when writing extracted files fails in single-file (issue_ref)
dotnet/runtime,cb71b18915e531ead69f60b896b2f540bef3c27b,"Clarify structure within .CodeQL.yml (#121801)

This is a clarification of the structure within the existing YAML file. The cmake suppressions are not related to the ref suppressions and should be in their own independent section.

This is basically a code comment-equivalent change and doesn't impact how the analysis is performed or how suppressions are interpreted.",2025-11-20 22:11:58+00:00,Levi Broderick,0,,,1,1,0,clarify structure within .codeql.yml (issue_ref)this is a clarification of the structure within the existing yaml file. the cmake suppressions are not related to the ref suppressions and should be in their own independent section.this is basically a code comment-equivalent change and doesn't impact how the analysis is performed or how suppressions are interpreted.
dotnet/runtime,195bab1833e1682b949feed12937dda7f7624f01,"Remove ASSETS_DIR from Android test infrastructure (#121720)

Clean up ASSETS_DIR from Android test infrastructure

The ASSETS_DIR environment variable is no longer needed now that we set
up the AppContext.BaseDirectory in the NativeAOT test host (as per
commit aec646f0d).

## Changes Made
- [x] Remove ASSETS_DIR environment variable setup from MonoRunner.java
- [x] Update TestFiles.cs to use AppContext.BaseDirectory directly
instead of falling back to ASSETS_DIR
- [x] Inline TestDataRoot - removed intermediate field and use
AppContext.BaseDirectory directly in TestDataFolder
- [x] Verify no other code depends on ASSETS_DIR
- [x] Build and test the changes - AndroidAppBuilder and
System.Security.Cryptography.Tests both build successfully

<!-- START COPILOT CODING AGENT SUFFIX -->



<details>

<summary>Original prompt</summary>

> Clean up ASSETS_DIR from android test infrastructure. This variable
should no longer be needed now that we set up the appcontext base
directory in the nativeaot test host.


</details>



<!-- START COPILOT CODING AGENT TIPS -->
---

💬 We'd love your input! Share your thoughts on Copilot coding agent in
our [2 minute survey](https://gh.io/copilot-coding-agent-survey).

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: sbomer <787361+sbomer@users.noreply.github.com>",2025-11-20 22:24:52+00:00,Copilot,0,,,2,1,3,remove assets_dir from android test infrastructure (issue_ref)clean up assets_dir from android test infrastructurethe assets_dir environment variable is no longer needed now that we setup the appcontext.basedirectory in the nativeaot test host (as percommit aec646f0d).## changes made- [x] remove assets_dir environment variable setup from monorunner.java- [x] update testfiles.cs to use appcontext.basedirectory directlyinstead of falling back to assets_dir- [x] inline testdataroot - removed intermediate field and useappcontext.basedirectory directly in testdatafolder- [x] verify no other code depends on assets_dir- [x] build and test the changes - androidappbuilder andsystem.security.cryptography.tests both build successfully<!-- start copilot coding agent suffix --><details><summary>original prompt</summary>> clean up assets_dir from android test infrastructure. this variableshould no longer be needed now that we set up the appcontext basedirectory in the nativeaot test host.</details><!-- start copilot coding agent tips -->---💬 we'd love your input! share your thoughts on copilot coding agent inour [2 minute survey](---------
dotnet/runtime,7af1aba0ac66ae5762361d2eaf0a8953615a84b6,"[RyuJit/WASM] Reach the NYI in ""genCodeForTreeNode"" (#121816)

Scaffolding for more code generation.

Has two long-term TODOs (there will be an issue for them):
1) `genPoisonFrame` (relies on `HAS_FIXED_REGISTER_SET` code).
2) Stack alignment.",2025-11-20 23:51:05+00:00,SingleAccretion,1,b1d544317d30a0f842df03f57442dfae923e4dcd,"Wasm irreducible loop transformation (#121728)

If the Wasm DFS detects improper loop headers, then we have irreducible
loops that cannot be expressed in Wasm control flow.

To fix this, run a pass to find the SCCs in the flow graph using
Kosaraju's algorithm. Then invoke this algorithm recursively on the
subgraph formed from the nodes in each SCC, minus the SCC entry nodes
(nodes in the SCC with preds not in the SCC). Repeat until all ""nested""
SCCs are identified. This represents the full set of irreducible loops
we need to transform. Note no SCCs share headers but nested SCCs will
share interior blocks.

Single-entry SCCs are reducible loops and don't require any special
processing as they can be emitted as Wasm lops. But multi-entry SCCs are
irreducible loops and must be transformed.

So we transform each multi-emtry SCC (working inner to outer) by
creating a per-SCC control var and dispatch block. Each SCC header is
assigned an index from 0...N-1, where N is the number of headers in that
SCC. The dispatch block switches to each the headers based on their
index and the control var. Each pre-existing edge to the header is then
logically split and the index var is assigned the index for that header
and retargeted to the dispatch node. As an optimization and to handle
some unsplittable edges, if an SCC header's pred has the header as its
only successor, we put the control var assignment into the pred instead
of splitting the edge.

This transforms each multi-entry SCC into a single-entry reducible loop.
In checked builds we verify by rerunning the DFS and assert that there
are no longer any improper headers.

Note there are other strategies for resolving SCCs into reducible loops
that might offer better performance; we are intentionally picking
something simple.

Defer handling cases where the original DFS found non-funclet blocks
that could only be reached via EH, as we do not yet have a way of
describing how Wasm control can reach such blocks. We will revisit this
once we have the Wasm EH model design in place. Such cases are fairly
rare (eg a try/catch that ends with a goto or return).

We currently run the SCC transform before lower to allow lower the
chance to optimize the switch and because we introduce new IR. There is
a risk that a sufficiently clever later phase (say one that could do
block cloning or jump threading) might undo the dispatch structure and
recreate an irreducible loop, but that doesn't seem to happen. The
subsequent Wasm control flow phase will also assert that its run of Wasm
DFS does not have any improper headers.

Continuation of #120534.

Contributes to #121178.

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",13,238,53,"[ryujit/wasm] reach the nyi in ""gencodefortreenode"" (issue_ref)scaffolding for more code generation.has two long-term todos (there will be an issue for them):1) (relies on code).2) stack alignment."
dotnet/runtime,c8675d92b9d9dccffe6f16fb70116e4b90b7135b,Delete src/coreclr/tools/SOS - unused binplace-only directory (#121780),2025-11-21 03:05:54+00:00,Copilot,0,,,3,0,8,delete src/coreclr/tools/sos - unused binplace-only directory (issue_ref)
dotnet/runtime,73c8ac29eb32b30fbde75a3272a59b0ceab292d0,"Use AllocateUninitializedArray for primitive types except bool in SharedArrayPool (#121851)

ArrayPool now uses a conditional allocation strategy to balance
performance and safety. Primitive types (excluding bool) use
uninitialized arrays for better performance, while bool and
non-primitive types use initialized arrays.

### Changes
- `SharedArrayPool<T>.Rent()`: Changed to use conditional allocation
(lines 110-112):
- **Primitive types (excluding bool)**: Uses
`GC.AllocateUninitializedArray<T>()` for performance
  - **bool and non-primitive types**: Uses `new T[]` for safety
- `ConfigurableArrayPool<T>` already used `new T[]` and is unchanged

This approach optimizes performance for primitive types where any bit
pattern is valid, while ensuring proper initialization for bool (which
has problematic bit patterns) and all reference/value types.

<!-- START COPILOT CODING AGENT SUFFIX -->



<details>

<summary>Original prompt</summary>

> ArrayPool currently uses GetUninitializedArray. This makes some array
allocations faster, but arrays should only be allocated rarely. Please
switch it to just using new T[].


</details>



<!-- START COPILOT CODING AGENT TIPS -->
---

✨ Let Copilot coding agent [set things up for
you](https://github.com/dotnet/runtime/issues/new?title=✨+Set+up+Copilot+instructions&body=Configure%20instructions%20for%20this%20repository%20as%20documented%20in%20%5BBest%20practices%20for%20Copilot%20coding%20agent%20in%20your%20repository%5D%28https://gh.io/copilot-coding-agent-tips%29%2E%0A%0A%3COnboard%20this%20repo%3E&assignees=copilot)
— coding agent works faster and does higher quality work when set up for
your repo.

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>
Co-authored-by: Stephen Toub <stoub@microsoft.com>",2025-11-21 04:33:29+00:00,Copilot,0,,,1,7,1,"use allocateuninitializedarray for primitive types except bool in sharedarraypool (issue_ref)arraypool now uses a conditional allocation strategy to balanceperformance and safety. primitive types (excluding bool) useuninitialized arrays for better performance, while bool andnon-primitive types use initialized arrays.### changes- : changed to use conditional allocation(lines 110-112):- **primitive types (excluding bool)**: uses for performance - **bool and non-primitive types**: uses for safety- already used and is unchangedthis approach optimizes performance for primitive types where any bitpattern is valid, while ensuring proper initialization for bool (whichhas problematic bit patterns) and all reference/value types.<!-- start copilot coding agent suffix --><details><summary>original prompt</summary>> arraypool currently uses getuninitializedarray. this makes some arrayallocations faster, but arrays should only be allocated rarely. pleaseswitch it to just using new t[].</details><!-- start copilot coding agent tips -->---✨ let copilot coding agent [set things up foryou](✨+set+up+copilot+instructions&body=configure%20instructions%20for%20this%20repository%20as%20documented%20in%20%5bbest%20practices%20for%20copilot%20coding%20agent%20in%20your%20repository%5d%28— coding agent works faster and does higher quality work when set up foryour repo.---------"
dotnet/runtime,098f34dfd014d0c6a7a543803482f3458d7cc081,"Bump actions/upload-artifact from 4 to 5 (#121079)

Bumps
[actions/upload-artifact](https://github.com/actions/upload-artifact)
from 4 to 5.
<details>
<summary>Release notes</summary>
<p><em>Sourced from <a
href=""https://github.com/actions/upload-artifact/releases"">actions/upload-artifact's
releases</a>.</em></p>
<blockquote>
<h2>v5.0.0</h2>
<h2>What's Changed</h2>
<p><strong>BREAKING CHANGE:</strong> this update supports Node
<code>v24.x</code>. This is not a breaking change per-se but we're
treating it as such.</p>
<ul>
<li>Update README.md by <a
href=""https://github.com/GhadimiR""><code>@​GhadimiR</code></a> in <a
href=""https://redirect.github.com/actions/upload-artifact/pull/681"">actions/upload-artifact#681</a></li>
<li>Update README.md by <a
href=""https://github.com/nebuk89""><code>@​nebuk89</code></a> in <a
href=""https://redirect.github.com/actions/upload-artifact/pull/712"">actions/upload-artifact#712</a></li>
<li>Readme: spell out the first use of GHES by <a
href=""https://github.com/danwkennedy""><code>@​danwkennedy</code></a> in
<a
href=""https://redirect.github.com/actions/upload-artifact/pull/727"">actions/upload-artifact#727</a></li>
<li>Update GHES guidance to include reference to Node 20 version by <a
href=""https://github.com/patrikpolyak""><code>@​patrikpolyak</code></a>
in <a
href=""https://redirect.github.com/actions/upload-artifact/pull/725"">actions/upload-artifact#725</a></li>
<li>Bump <code>@actions/artifact</code> to <code>v4.0.0</code></li>
<li>Prepare <code>v5.0.0</code> by <a
href=""https://github.com/danwkennedy""><code>@​danwkennedy</code></a> in
<a
href=""https://redirect.github.com/actions/upload-artifact/pull/734"">actions/upload-artifact#734</a></li>
</ul>
<h2>New Contributors</h2>
<ul>
<li><a href=""https://github.com/GhadimiR""><code>@​GhadimiR</code></a>
made their first contribution in <a
href=""https://redirect.github.com/actions/upload-artifact/pull/681"">actions/upload-artifact#681</a></li>
<li><a href=""https://github.com/nebuk89""><code>@​nebuk89</code></a> made
their first contribution in <a
href=""https://redirect.github.com/actions/upload-artifact/pull/712"">actions/upload-artifact#712</a></li>
<li><a
href=""https://github.com/danwkennedy""><code>@​danwkennedy</code></a>
made their first contribution in <a
href=""https://redirect.github.com/actions/upload-artifact/pull/727"">actions/upload-artifact#727</a></li>
<li><a
href=""https://github.com/patrikpolyak""><code>@​patrikpolyak</code></a>
made their first contribution in <a
href=""https://redirect.github.com/actions/upload-artifact/pull/725"">actions/upload-artifact#725</a></li>
</ul>
<p><strong>Full Changelog</strong>: <a
href=""https://github.com/actions/upload-artifact/compare/v4...v5.0.0"">https://github.com/actions/upload-artifact/compare/v4...v5.0.0</a></p>
<h2>v4.6.2</h2>
<h2>What's Changed</h2>
<ul>
<li>Update to use artifact 2.3.2 package &amp; prepare for new
upload-artifact release by <a
href=""https://github.com/salmanmkc""><code>@​salmanmkc</code></a> in <a
href=""https://redirect.github.com/actions/upload-artifact/pull/685"">actions/upload-artifact#685</a></li>
</ul>
<h2>New Contributors</h2>
<ul>
<li><a href=""https://github.com/salmanmkc""><code>@​salmanmkc</code></a>
made their first contribution in <a
href=""https://redirect.github.com/actions/upload-artifact/pull/685"">actions/upload-artifact#685</a></li>
</ul>
<p><strong>Full Changelog</strong>: <a
href=""https://github.com/actions/upload-artifact/compare/v4...v4.6.2"">https://github.com/actions/upload-artifact/compare/v4...v4.6.2</a></p>
<h2>v4.6.1</h2>
<h2>What's Changed</h2>
<ul>
<li>Update to use artifact 2.2.2 package by <a
href=""https://github.com/yacaovsnc""><code>@​yacaovsnc</code></a> in <a
href=""https://redirect.github.com/actions/upload-artifact/pull/673"">actions/upload-artifact#673</a></li>
</ul>
<p><strong>Full Changelog</strong>: <a
href=""https://github.com/actions/upload-artifact/compare/v4...v4.6.1"">https://github.com/actions/upload-artifact/compare/v4...v4.6.1</a></p>
<h2>v4.6.0</h2>
<h2>What's Changed</h2>
<ul>
<li>Expose env vars to control concurrency and timeout by <a
href=""https://github.com/yacaovsnc""><code>@​yacaovsnc</code></a> in <a
href=""https://redirect.github.com/actions/upload-artifact/pull/662"">actions/upload-artifact#662</a></li>
</ul>
<p><strong>Full Changelog</strong>: <a
href=""https://github.com/actions/upload-artifact/compare/v4...v4.6.0"">https://github.com/actions/upload-artifact/compare/v4...v4.6.0</a></p>
<h2>v4.5.0</h2>
<h2>What's Changed</h2>
<ul>
<li>fix: deprecated <code>Node.js</code> version in action by <a
href=""https://github.com/hamirmahal""><code>@​hamirmahal</code></a> in <a
href=""https://redirect.github.com/actions/upload-artifact/pull/578"">actions/upload-artifact#578</a></li>
<li>Add new <code>artifact-digest</code> output by <a
href=""https://github.com/bdehamer""><code>@​bdehamer</code></a> in <a
href=""https://redirect.github.com/actions/upload-artifact/pull/656"">actions/upload-artifact#656</a></li>
</ul>
<h2>New Contributors</h2>
<ul>
<li><a
href=""https://github.com/hamirmahal""><code>@​hamirmahal</code></a> made
their first contribution in <a
href=""https://redirect.github.com/actions/upload-artifact/pull/578"">actions/upload-artifact#578</a></li>
</ul>
<!-- raw HTML omitted -->
</blockquote>
<p>... (truncated)</p>
</details>
<details>
<summary>Commits</summary>
<ul>
<li><a
href=""https://github.com/actions/upload-artifact/commit/330a01c490aca151604b8cf639adc76d48f6c5d4""><code>330a01c</code></a>
Merge pull request <a
href=""https://redirect.github.com/actions/upload-artifact/issues/734"">#734</a>
from actions/danwkennedy/prepare-5.0.0</li>
<li><a
href=""https://github.com/actions/upload-artifact/commit/03f282445299bbefc96171af272a984663b63a26""><code>03f2824</code></a>
Update <code>github.dep.yml</code></li>
<li><a
href=""https://github.com/actions/upload-artifact/commit/905a1ecb5915b264cbc519e4eb415b5d82916018""><code>905a1ec</code></a>
Prepare <code>v5.0.0</code></li>
<li><a
href=""https://github.com/actions/upload-artifact/commit/2d9f9cdfa99fedaddba68e9b5b5c281eca26cc63""><code>2d9f9cd</code></a>
Merge pull request <a
href=""https://redirect.github.com/actions/upload-artifact/issues/725"">#725</a>
from patrikpolyak/patch-1</li>
<li><a
href=""https://github.com/actions/upload-artifact/commit/9687587dec67f2a8bc69104e183d311c42af6d6f""><code>9687587</code></a>
Merge branch 'main' into patch-1</li>
<li><a
href=""https://github.com/actions/upload-artifact/commit/2848b2cda0e5190984587ec6bb1f36730ca78d50""><code>2848b2c</code></a>
Merge pull request <a
href=""https://redirect.github.com/actions/upload-artifact/issues/727"">#727</a>
from danwkennedy/patch-1</li>
<li><a
href=""https://github.com/actions/upload-artifact/commit/9b511775fd9ce8c5710b38eea671f856de0e70a7""><code>9b51177</code></a>
Spell out the first use of GHES</li>
<li><a
href=""https://github.com/actions/upload-artifact/commit/cd231ca1eda77976a84805c4194a1954f56b0727""><code>cd231ca</code></a>
Update GHES guidance to include reference to Node 20 version</li>
<li><a
href=""https://github.com/actions/upload-artifact/commit/de65e23aa2b7e23d713bb51fbfcb6d502f8667d8""><code>de65e23</code></a>
Merge pull request <a
href=""https://redirect.github.com/actions/upload-artifact/issues/712"">#712</a>
from actions/nebuk89-patch-1</li>
<li><a
href=""https://github.com/actions/upload-artifact/commit/8747d8cd7632611ad6060b528f3e0f654c98869c""><code>8747d8c</code></a>
Update README.md</li>
<li>Additional commits viewable in <a
href=""https://github.com/actions/upload-artifact/compare/v4...v5"">compare
view</a></li>
</ul>
</details>
<br />


[![Dependabot compatibility
score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=actions/upload-artifact&package-manager=github_actions&previous-version=4&new-version=5)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)

Dependabot will resolve any conflicts with this PR as long as you don't
alter it yourself. You can also trigger a rebase manually by commenting
`@dependabot rebase`.

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

You can trigger Dependabot actions by commenting on this PR:
- `@dependabot rebase` will rebase this PR
- `@dependabot recreate` will recreate this PR, overwriting any edits
that have been made to it
- `@dependabot merge` will merge this PR after your CI passes on it
- `@dependabot squash and merge` will squash and merge this PR after
your CI passes on it
- `@dependabot cancel merge` will cancel a previously requested merge
and block automerging
- `@dependabot reopen` will reopen this PR if it is closed
- `@dependabot close` will close this PR and stop Dependabot recreating
it. You can achieve the same result by closing it manually
- `@dependabot show <dependency name> ignore conditions` will show all
of the ignore conditions of the specified dependency
- `@dependabot ignore this major version` will close this PR and stop
Dependabot creating any more for this major version (unless you reopen
the PR or upgrade to it yourself)
- `@dependabot ignore this minor version` will close this PR and stop
Dependabot creating any more for this minor version (unless you reopen
the PR or upgrade to it yourself)
- `@dependabot ignore this dependency` will close this PR and stop
Dependabot creating any more for this dependency (unless you reopen the
PR or upgrade to it yourself)


</details>

Signed-off-by: dependabot[bot] <support@github.com>
Co-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>",2025-11-21 12:09:41+00:00,dependabot[bot],1,1c69ad5d0854d0c312f58a86e47e9165726aeb5f,"Bump actions/checkout from 5 to 6 (#121858)

Bumps [actions/checkout](https://github.com/actions/checkout) from 5 to
6.
<details>
<summary>Release notes</summary>
<p><em>Sourced from <a
href=""https://github.com/actions/checkout/releases"">actions/checkout's
releases</a>.</em></p>
<blockquote>
<h2>v6.0.0</h2>
<h2>What's Changed</h2>
<ul>
<li>Update README to include Node.js 24 support details and requirements
by <a href=""https://github.com/salmanmkc""><code>@​salmanmkc</code></a>
in <a
href=""https://redirect.github.com/actions/checkout/pull/2248"">actions/checkout#2248</a></li>
<li>Persist creds to a separate file by <a
href=""https://github.com/ericsciple""><code>@​ericsciple</code></a> in <a
href=""https://redirect.github.com/actions/checkout/pull/2286"">actions/checkout#2286</a></li>
<li>v6-beta by <a
href=""https://github.com/ericsciple""><code>@​ericsciple</code></a> in <a
href=""https://redirect.github.com/actions/checkout/pull/2298"">actions/checkout#2298</a></li>
<li>update readme/changelog for v6 by <a
href=""https://github.com/ericsciple""><code>@​ericsciple</code></a> in <a
href=""https://redirect.github.com/actions/checkout/pull/2311"">actions/checkout#2311</a></li>
</ul>
<p><strong>Full Changelog</strong>: <a
href=""https://github.com/actions/checkout/compare/v5.0.0...v6.0.0"">https://github.com/actions/checkout/compare/v5.0.0...v6.0.0</a></p>
<h2>v6-beta</h2>
<h2>What's Changed</h2>
<p>Updated persist-credentials to store the credentials under
<code>$RUNNER_TEMP</code> instead of directly in the local git
config.</p>
<p>This requires a minimum Actions Runner version of <a
href=""https://github.com/actions/runner/releases/tag/v2.329.0"">v2.329.0</a>
to access the persisted credentials for <a
href=""https://docs.github.com/en/actions/tutorials/use-containerized-services/create-a-docker-container-action"">Docker
container action</a> scenarios.</p>
<h2>v5.0.1</h2>
<h2>What's Changed</h2>
<ul>
<li>Port v6 cleanup to v5 by <a
href=""https://github.com/ericsciple""><code>@​ericsciple</code></a> in <a
href=""https://redirect.github.com/actions/checkout/pull/2301"">actions/checkout#2301</a></li>
</ul>
<p><strong>Full Changelog</strong>: <a
href=""https://github.com/actions/checkout/compare/v5...v5.0.1"">https://github.com/actions/checkout/compare/v5...v5.0.1</a></p>
</blockquote>
</details>
<details>
<summary>Changelog</summary>
<p><em>Sourced from <a
href=""https://github.com/actions/checkout/blob/main/CHANGELOG.md"">actions/checkout's
changelog</a>.</em></p>
<blockquote>
<h1>Changelog</h1>
<h2>V6.0.0</h2>
<ul>
<li>Persist creds to a separate file by <a
href=""https://github.com/ericsciple""><code>@​ericsciple</code></a> in <a
href=""https://redirect.github.com/actions/checkout/pull/2286"">actions/checkout#2286</a></li>
<li>Update README to include Node.js 24 support details and requirements
by <a href=""https://github.com/salmanmkc""><code>@​salmanmkc</code></a>
in <a
href=""https://redirect.github.com/actions/checkout/pull/2248"">actions/checkout#2248</a></li>
</ul>
<h2>V5.0.1</h2>
<ul>
<li>Port v6 cleanup to v5 by <a
href=""https://github.com/ericsciple""><code>@​ericsciple</code></a> in <a
href=""https://redirect.github.com/actions/checkout/pull/2301"">actions/checkout#2301</a></li>
</ul>
<h2>V5.0.0</h2>
<ul>
<li>Update actions checkout to use node 24 by <a
href=""https://github.com/salmanmkc""><code>@​salmanmkc</code></a> in <a
href=""https://redirect.github.com/actions/checkout/pull/2226"">actions/checkout#2226</a></li>
</ul>
<h2>V4.3.1</h2>
<ul>
<li>Port v6 cleanup to v4 by <a
href=""https://github.com/ericsciple""><code>@​ericsciple</code></a> in <a
href=""https://redirect.github.com/actions/checkout/pull/2305"">actions/checkout#2305</a></li>
</ul>
<h2>V4.3.0</h2>
<ul>
<li>docs: update README.md by <a
href=""https://github.com/motss""><code>@​motss</code></a> in <a
href=""https://redirect.github.com/actions/checkout/pull/1971"">actions/checkout#1971</a></li>
<li>Add internal repos for checking out multiple repositories by <a
href=""https://github.com/mouismail""><code>@​mouismail</code></a> in <a
href=""https://redirect.github.com/actions/checkout/pull/1977"">actions/checkout#1977</a></li>
<li>Documentation update - add recommended permissions to Readme by <a
href=""https://github.com/benwells""><code>@​benwells</code></a> in <a
href=""https://redirect.github.com/actions/checkout/pull/2043"">actions/checkout#2043</a></li>
<li>Adjust positioning of user email note and permissions heading by <a
href=""https://github.com/joshmgross""><code>@​joshmgross</code></a> in <a
href=""https://redirect.github.com/actions/checkout/pull/2044"">actions/checkout#2044</a></li>
<li>Update README.md by <a
href=""https://github.com/nebuk89""><code>@​nebuk89</code></a> in <a
href=""https://redirect.github.com/actions/checkout/pull/2194"">actions/checkout#2194</a></li>
<li>Update CODEOWNERS for actions by <a
href=""https://github.com/TingluoHuang""><code>@​TingluoHuang</code></a>
in <a
href=""https://redirect.github.com/actions/checkout/pull/2224"">actions/checkout#2224</a></li>
<li>Update package dependencies by <a
href=""https://github.com/salmanmkc""><code>@​salmanmkc</code></a> in <a
href=""https://redirect.github.com/actions/checkout/pull/2236"">actions/checkout#2236</a></li>
</ul>
<h2>v4.2.2</h2>
<ul>
<li><code>url-helper.ts</code> now leverages well-known environment
variables by <a href=""https://github.com/jww3""><code>@​jww3</code></a>
in <a
href=""https://redirect.github.com/actions/checkout/pull/1941"">actions/checkout#1941</a></li>
<li>Expand unit test coverage for <code>isGhes</code> by <a
href=""https://github.com/jww3""><code>@​jww3</code></a> in <a
href=""https://redirect.github.com/actions/checkout/pull/1946"">actions/checkout#1946</a></li>
</ul>
<h2>v4.2.1</h2>
<ul>
<li>Check out other refs/* by commit if provided, fall back to ref by <a
href=""https://github.com/orhantoy""><code>@​orhantoy</code></a> in <a
href=""https://redirect.github.com/actions/checkout/pull/1924"">actions/checkout#1924</a></li>
</ul>
<h2>v4.2.0</h2>
<ul>
<li>Add Ref and Commit outputs by <a
href=""https://github.com/lucacome""><code>@​lucacome</code></a> in <a
href=""https://redirect.github.com/actions/checkout/pull/1180"">actions/checkout#1180</a></li>
<li>Dependency updates by <a
href=""https://github.com/dependabot""><code>@​dependabot</code></a>- <a
href=""https://redirect.github.com/actions/checkout/pull/1777"">actions/checkout#1777</a>,
<a
href=""https://redirect.github.com/actions/checkout/pull/1872"">actions/checkout#1872</a></li>
</ul>
<h2>v4.1.7</h2>
<ul>
<li>Bump the minor-npm-dependencies group across 1 directory with 4
updates by <a
href=""https://github.com/dependabot""><code>@​dependabot</code></a> in <a
href=""https://redirect.github.com/actions/checkout/pull/1739"">actions/checkout#1739</a></li>
<li>Bump actions/checkout from 3 to 4 by <a
href=""https://github.com/dependabot""><code>@​dependabot</code></a> in <a
href=""https://redirect.github.com/actions/checkout/pull/1697"">actions/checkout#1697</a></li>
<li>Check out other refs/* by commit by <a
href=""https://github.com/orhantoy""><code>@​orhantoy</code></a> in <a
href=""https://redirect.github.com/actions/checkout/pull/1774"">actions/checkout#1774</a></li>
<li>Pin actions/checkout's own workflows to a known, good, stable
version. by <a href=""https://github.com/jww3""><code>@​jww3</code></a> in
<a
href=""https://redirect.github.com/actions/checkout/pull/1776"">actions/checkout#1776</a></li>
</ul>
<h2>v4.1.6</h2>
<ul>
<li>Check platform to set archive extension appropriately by <a
href=""https://github.com/cory-miller""><code>@​cory-miller</code></a> in
<a
href=""https://redirect.github.com/actions/checkout/pull/1732"">actions/checkout#1732</a></li>
</ul>
<h2>v4.1.5</h2>
<ul>
<li>Update NPM dependencies by <a
href=""https://github.com/cory-miller""><code>@​cory-miller</code></a> in
<a
href=""https://redirect.github.com/actions/checkout/pull/1703"">actions/checkout#1703</a></li>
<li>Bump github/codeql-action from 2 to 3 by <a
href=""https://github.com/dependabot""><code>@​dependabot</code></a> in <a
href=""https://redirect.github.com/actions/checkout/pull/1694"">actions/checkout#1694</a></li>
<li>Bump actions/setup-node from 1 to 4 by <a
href=""https://github.com/dependabot""><code>@​dependabot</code></a> in <a
href=""https://redirect.github.com/actions/checkout/pull/1696"">actions/checkout#1696</a></li>
<li>Bump actions/upload-artifact from 2 to 4 by <a
href=""https://github.com/dependabot""><code>@​dependabot</code></a> in <a
href=""https://redirect.github.com/actions/checkout/pull/1695"">actions/checkout#1695</a></li>
</ul>
<!-- raw HTML omitted -->
</blockquote>
<p>... (truncated)</p>
</details>
<details>
<summary>Commits</summary>
<ul>
<li><a
href=""https://github.com/actions/checkout/commit/1af3b93b6815bc44a9784bd300feb67ff0d1eeb3""><code>1af3b93</code></a>
update readme/changelog for v6 (<a
href=""https://redirect.github.com/actions/checkout/issues/2311"">#2311</a>)</li>
<li><a
href=""https://github.com/actions/checkout/commit/71cf2267d89c5cb81562390fa70a37fa40b1305e""><code>71cf226</code></a>
v6-beta (<a
href=""https://redirect.github.com/actions/checkout/issues/2298"">#2298</a>)</li>
<li><a
href=""https://github.com/actions/checkout/commit/069c6959146423d11cd0184e6accf28f9d45f06e""><code>069c695</code></a>
Persist creds to a separate file (<a
href=""https://redirect.github.com/actions/checkout/issues/2286"">#2286</a>)</li>
<li><a
href=""https://github.com/actions/checkout/commit/ff7abcd0c3c05ccf6adc123a8cd1fd4fb30fb493""><code>ff7abcd</code></a>
Update README to include Node.js 24 support details and requirements (<a
href=""https://redirect.github.com/actions/checkout/issues/2248"">#2248</a>)</li>
<li>See full diff in <a
href=""https://github.com/actions/checkout/compare/v5...v6"">compare
view</a></li>
</ul>
</details>
<br />


[![Dependabot compatibility
score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=actions/checkout&package-manager=github_actions&previous-version=5&new-version=6)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)

Dependabot will resolve any conflicts with this PR as long as you don't
alter it yourself. You can also trigger a rebase manually by commenting
`@dependabot rebase`.

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

You can trigger Dependabot actions by commenting on this PR:
- `@dependabot rebase` will rebase this PR
- `@dependabot recreate` will recreate this PR, overwriting any edits
that have been made to it
- `@dependabot merge` will merge this PR after your CI passes on it
- `@dependabot squash and merge` will squash and merge this PR after
your CI passes on it
- `@dependabot cancel merge` will cancel a previously requested merge
and block automerging
- `@dependabot reopen` will reopen this PR if it is closed
- `@dependabot close` will close this PR and stop Dependabot recreating
it. You can achieve the same result by closing it manually
- `@dependabot show <dependency name> ignore conditions` will show all
of the ignore conditions of the specified dependency
- `@dependabot ignore this major version` will close this PR and stop
Dependabot creating any more for this major version (unless you reopen
the PR or upgrade to it yourself)
- `@dependabot ignore this minor version` will close this PR and stop
Dependabot creating any more for this minor version (unless you reopen
the PR or upgrade to it yourself)
- `@dependabot ignore this dependency` will close this PR and stop
Dependabot creating any more for this dependency (unless you reopen the
PR or upgrade to it yourself)


</details>

Signed-off-by: dependabot[bot] <support@github.com>
Co-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>",2,2,2,"bump actions/upload-artifact from 4 to 5 (issue_ref)bumps[actions/upload-artifact](from 4 to 5.<details><summary>release notes</summary><p><em>sourced from <ahref="""">actions/upload-artifact'sreleases</a>.</em></p><blockquote><h2>v5.0.0</h2><h2>what's changed</h2><p><strong>breaking change:</strong> this update supports node<code>v24.x</code>. this is not a breaking change per-se but we'retreating it as such.</p><ul><li>update readme.md by <a in <ahref="""">actions/upload-artifactissue_ref</a></li><li>update readme.md by <a in <ahref="""">actions/upload-artifactissue_ref</a></li><li>readme: spell out the first use of ghes by <a in<ahref="""">actions/upload-artifactissue_ref</a></li><li>update ghes guidance to include reference to node 20 version by <ain <ahref="""">actions/upload-artifactissue_ref</a></li><li>bump to <code>v4.0.0</code></li><li>prepare <code>v5.0.0</code> by <a in<ahref="""">actions/upload-artifactissue_ref</a></li></ul><h2>new contributors</h2><ul><li><a made their first contribution in <ahref="""">actions/upload-artifactissue_ref</a></li><li><a madetheir first contribution in <ahref="""">actions/upload-artifactissue_ref</a></li><li><amade their first contribution in <ahref="""">actions/upload-artifactissue_ref</a></li><li><amade their first contribution in <ahref="""">actions/upload-artifactissue_ref</a></li></ul><p><strong>full changelog</strong>: <ahref=""""><h2>v4.6.2</h2><h2>what's changed</h2><ul><li>update to use artifact 2.3.2 package &amp; prepare for newupload-artifact release by <a in <ahref="""">actions/upload-artifactissue_ref</a></li></ul><h2>new contributors</h2><ul><li><a made their first contribution in <ahref="""">actions/upload-artifactissue_ref</a></li></ul><p><strong>full changelog</strong>: <ahref=""""><h2>v4.6.1</h2><h2>what's changed</h2><ul><li>update to use artifact 2.2.2 package by <a in <ahref="""">actions/upload-artifactissue_ref</a></li></ul><p><strong>full changelog</strong>: <ahref=""""><h2>v4.6.0</h2><h2>what's changed</h2><ul><li>expose env vars to control concurrency and timeout by <a in <ahref="""">actions/upload-artifactissue_ref</a></li></ul><p><strong>full changelog</strong>: <ahref=""""><h2>v4.5.0</h2><h2>what's changed</h2><ul><li>fix: deprecated <code>node.js</code> version in action by <a in <ahref="""">actions/upload-artifactissue_ref</a></li><li>add new <code>artifact-digest</code> output by <a in <ahref="""">actions/upload-artifactissue_ref</a></li></ul><h2>new contributors</h2><ul><li><a madetheir first contribution in <ahref="""">actions/upload-artifactissue_ref</a></li></ul><!-- raw html omitted --></blockquote><p>... (truncated)</p></details><details><summary>commits</summary><ul><li><ahref=""""><code>330a01c</code></a>merge pull request <ahref="""">issue_ref</a>from actions/danwkennedy/prepare-5.0.0</li><li><ahref=""""><code>03f2824</code></a>update <code>github.dep.yml</code></li><li><ahref=""""><code>905a1ec</code></a>prepare <code>v5.0.0</code></li><li><ahref=""""><code>2d9f9cd</code></a>merge pull request <ahref="""">issue_ref</a>from patrikpolyak/patch-1</li><li><ahref=""""><code>9687587</code></a>merge branch 'main' into patch-1</li><li><ahref=""""><code>2848b2c</code></a>merge pull request <ahref="""">issue_ref</a>from danwkennedy/patch-1</li><li><ahref=""""><code>9b51177</code></a>spell out the first use of ghes</li><li><ahref=""""><code>cd231ca</code></a>update ghes guidance to include reference to node 20 version</li><li><ahref=""""><code>de65e23</code></a>merge pull request <ahref="""">issue_ref</a>from actions/nebuk89-patch-1</li><li><ahref=""""><code>8747d8c</code></a>update readme.md</li><li>additional commits viewable in <ahref="""">compareview</a></li></ul></details><br />[![dependabot compatibilityscore](#about-compatibility-scores)dependabot will resolve any conflicts with this pr as long as you don'talter it yourself. you can also trigger a rebase manually by commenting rebase will rebase this pr- recreate will merge this pr after your ci passes on it- squash and merge will cancel a previously requested mergeand block automerging- reopen will close this pr and stop dependabot recreatingit. you can achieve the same result by closing it manually- show <dependency name> ignore conditions will close this pr and stopdependabot creating any more for this major version (unless you reopenthe pr or upgrade to it yourself)- ignore this minor version will close this pr and stopdependabot creating any more for this dependency (unless you reopen thepr or upgrade to it yourself)</details>"
dotnet/runtime,1c69ad5d0854d0c312f58a86e47e9165726aeb5f,"Bump actions/checkout from 5 to 6 (#121858)

Bumps [actions/checkout](https://github.com/actions/checkout) from 5 to
6.
<details>
<summary>Release notes</summary>
<p><em>Sourced from <a
href=""https://github.com/actions/checkout/releases"">actions/checkout's
releases</a>.</em></p>
<blockquote>
<h2>v6.0.0</h2>
<h2>What's Changed</h2>
<ul>
<li>Update README to include Node.js 24 support details and requirements
by <a href=""https://github.com/salmanmkc""><code>@​salmanmkc</code></a>
in <a
href=""https://redirect.github.com/actions/checkout/pull/2248"">actions/checkout#2248</a></li>
<li>Persist creds to a separate file by <a
href=""https://github.com/ericsciple""><code>@​ericsciple</code></a> in <a
href=""https://redirect.github.com/actions/checkout/pull/2286"">actions/checkout#2286</a></li>
<li>v6-beta by <a
href=""https://github.com/ericsciple""><code>@​ericsciple</code></a> in <a
href=""https://redirect.github.com/actions/checkout/pull/2298"">actions/checkout#2298</a></li>
<li>update readme/changelog for v6 by <a
href=""https://github.com/ericsciple""><code>@​ericsciple</code></a> in <a
href=""https://redirect.github.com/actions/checkout/pull/2311"">actions/checkout#2311</a></li>
</ul>
<p><strong>Full Changelog</strong>: <a
href=""https://github.com/actions/checkout/compare/v5.0.0...v6.0.0"">https://github.com/actions/checkout/compare/v5.0.0...v6.0.0</a></p>
<h2>v6-beta</h2>
<h2>What's Changed</h2>
<p>Updated persist-credentials to store the credentials under
<code>$RUNNER_TEMP</code> instead of directly in the local git
config.</p>
<p>This requires a minimum Actions Runner version of <a
href=""https://github.com/actions/runner/releases/tag/v2.329.0"">v2.329.0</a>
to access the persisted credentials for <a
href=""https://docs.github.com/en/actions/tutorials/use-containerized-services/create-a-docker-container-action"">Docker
container action</a> scenarios.</p>
<h2>v5.0.1</h2>
<h2>What's Changed</h2>
<ul>
<li>Port v6 cleanup to v5 by <a
href=""https://github.com/ericsciple""><code>@​ericsciple</code></a> in <a
href=""https://redirect.github.com/actions/checkout/pull/2301"">actions/checkout#2301</a></li>
</ul>
<p><strong>Full Changelog</strong>: <a
href=""https://github.com/actions/checkout/compare/v5...v5.0.1"">https://github.com/actions/checkout/compare/v5...v5.0.1</a></p>
</blockquote>
</details>
<details>
<summary>Changelog</summary>
<p><em>Sourced from <a
href=""https://github.com/actions/checkout/blob/main/CHANGELOG.md"">actions/checkout's
changelog</a>.</em></p>
<blockquote>
<h1>Changelog</h1>
<h2>V6.0.0</h2>
<ul>
<li>Persist creds to a separate file by <a
href=""https://github.com/ericsciple""><code>@​ericsciple</code></a> in <a
href=""https://redirect.github.com/actions/checkout/pull/2286"">actions/checkout#2286</a></li>
<li>Update README to include Node.js 24 support details and requirements
by <a href=""https://github.com/salmanmkc""><code>@​salmanmkc</code></a>
in <a
href=""https://redirect.github.com/actions/checkout/pull/2248"">actions/checkout#2248</a></li>
</ul>
<h2>V5.0.1</h2>
<ul>
<li>Port v6 cleanup to v5 by <a
href=""https://github.com/ericsciple""><code>@​ericsciple</code></a> in <a
href=""https://redirect.github.com/actions/checkout/pull/2301"">actions/checkout#2301</a></li>
</ul>
<h2>V5.0.0</h2>
<ul>
<li>Update actions checkout to use node 24 by <a
href=""https://github.com/salmanmkc""><code>@​salmanmkc</code></a> in <a
href=""https://redirect.github.com/actions/checkout/pull/2226"">actions/checkout#2226</a></li>
</ul>
<h2>V4.3.1</h2>
<ul>
<li>Port v6 cleanup to v4 by <a
href=""https://github.com/ericsciple""><code>@​ericsciple</code></a> in <a
href=""https://redirect.github.com/actions/checkout/pull/2305"">actions/checkout#2305</a></li>
</ul>
<h2>V4.3.0</h2>
<ul>
<li>docs: update README.md by <a
href=""https://github.com/motss""><code>@​motss</code></a> in <a
href=""https://redirect.github.com/actions/checkout/pull/1971"">actions/checkout#1971</a></li>
<li>Add internal repos for checking out multiple repositories by <a
href=""https://github.com/mouismail""><code>@​mouismail</code></a> in <a
href=""https://redirect.github.com/actions/checkout/pull/1977"">actions/checkout#1977</a></li>
<li>Documentation update - add recommended permissions to Readme by <a
href=""https://github.com/benwells""><code>@​benwells</code></a> in <a
href=""https://redirect.github.com/actions/checkout/pull/2043"">actions/checkout#2043</a></li>
<li>Adjust positioning of user email note and permissions heading by <a
href=""https://github.com/joshmgross""><code>@​joshmgross</code></a> in <a
href=""https://redirect.github.com/actions/checkout/pull/2044"">actions/checkout#2044</a></li>
<li>Update README.md by <a
href=""https://github.com/nebuk89""><code>@​nebuk89</code></a> in <a
href=""https://redirect.github.com/actions/checkout/pull/2194"">actions/checkout#2194</a></li>
<li>Update CODEOWNERS for actions by <a
href=""https://github.com/TingluoHuang""><code>@​TingluoHuang</code></a>
in <a
href=""https://redirect.github.com/actions/checkout/pull/2224"">actions/checkout#2224</a></li>
<li>Update package dependencies by <a
href=""https://github.com/salmanmkc""><code>@​salmanmkc</code></a> in <a
href=""https://redirect.github.com/actions/checkout/pull/2236"">actions/checkout#2236</a></li>
</ul>
<h2>v4.2.2</h2>
<ul>
<li><code>url-helper.ts</code> now leverages well-known environment
variables by <a href=""https://github.com/jww3""><code>@​jww3</code></a>
in <a
href=""https://redirect.github.com/actions/checkout/pull/1941"">actions/checkout#1941</a></li>
<li>Expand unit test coverage for <code>isGhes</code> by <a
href=""https://github.com/jww3""><code>@​jww3</code></a> in <a
href=""https://redirect.github.com/actions/checkout/pull/1946"">actions/checkout#1946</a></li>
</ul>
<h2>v4.2.1</h2>
<ul>
<li>Check out other refs/* by commit if provided, fall back to ref by <a
href=""https://github.com/orhantoy""><code>@​orhantoy</code></a> in <a
href=""https://redirect.github.com/actions/checkout/pull/1924"">actions/checkout#1924</a></li>
</ul>
<h2>v4.2.0</h2>
<ul>
<li>Add Ref and Commit outputs by <a
href=""https://github.com/lucacome""><code>@​lucacome</code></a> in <a
href=""https://redirect.github.com/actions/checkout/pull/1180"">actions/checkout#1180</a></li>
<li>Dependency updates by <a
href=""https://github.com/dependabot""><code>@​dependabot</code></a>- <a
href=""https://redirect.github.com/actions/checkout/pull/1777"">actions/checkout#1777</a>,
<a
href=""https://redirect.github.com/actions/checkout/pull/1872"">actions/checkout#1872</a></li>
</ul>
<h2>v4.1.7</h2>
<ul>
<li>Bump the minor-npm-dependencies group across 1 directory with 4
updates by <a
href=""https://github.com/dependabot""><code>@​dependabot</code></a> in <a
href=""https://redirect.github.com/actions/checkout/pull/1739"">actions/checkout#1739</a></li>
<li>Bump actions/checkout from 3 to 4 by <a
href=""https://github.com/dependabot""><code>@​dependabot</code></a> in <a
href=""https://redirect.github.com/actions/checkout/pull/1697"">actions/checkout#1697</a></li>
<li>Check out other refs/* by commit by <a
href=""https://github.com/orhantoy""><code>@​orhantoy</code></a> in <a
href=""https://redirect.github.com/actions/checkout/pull/1774"">actions/checkout#1774</a></li>
<li>Pin actions/checkout's own workflows to a known, good, stable
version. by <a href=""https://github.com/jww3""><code>@​jww3</code></a> in
<a
href=""https://redirect.github.com/actions/checkout/pull/1776"">actions/checkout#1776</a></li>
</ul>
<h2>v4.1.6</h2>
<ul>
<li>Check platform to set archive extension appropriately by <a
href=""https://github.com/cory-miller""><code>@​cory-miller</code></a> in
<a
href=""https://redirect.github.com/actions/checkout/pull/1732"">actions/checkout#1732</a></li>
</ul>
<h2>v4.1.5</h2>
<ul>
<li>Update NPM dependencies by <a
href=""https://github.com/cory-miller""><code>@​cory-miller</code></a> in
<a
href=""https://redirect.github.com/actions/checkout/pull/1703"">actions/checkout#1703</a></li>
<li>Bump github/codeql-action from 2 to 3 by <a
href=""https://github.com/dependabot""><code>@​dependabot</code></a> in <a
href=""https://redirect.github.com/actions/checkout/pull/1694"">actions/checkout#1694</a></li>
<li>Bump actions/setup-node from 1 to 4 by <a
href=""https://github.com/dependabot""><code>@​dependabot</code></a> in <a
href=""https://redirect.github.com/actions/checkout/pull/1696"">actions/checkout#1696</a></li>
<li>Bump actions/upload-artifact from 2 to 4 by <a
href=""https://github.com/dependabot""><code>@​dependabot</code></a> in <a
href=""https://redirect.github.com/actions/checkout/pull/1695"">actions/checkout#1695</a></li>
</ul>
<!-- raw HTML omitted -->
</blockquote>
<p>... (truncated)</p>
</details>
<details>
<summary>Commits</summary>
<ul>
<li><a
href=""https://github.com/actions/checkout/commit/1af3b93b6815bc44a9784bd300feb67ff0d1eeb3""><code>1af3b93</code></a>
update readme/changelog for v6 (<a
href=""https://redirect.github.com/actions/checkout/issues/2311"">#2311</a>)</li>
<li><a
href=""https://github.com/actions/checkout/commit/71cf2267d89c5cb81562390fa70a37fa40b1305e""><code>71cf226</code></a>
v6-beta (<a
href=""https://redirect.github.com/actions/checkout/issues/2298"">#2298</a>)</li>
<li><a
href=""https://github.com/actions/checkout/commit/069c6959146423d11cd0184e6accf28f9d45f06e""><code>069c695</code></a>
Persist creds to a separate file (<a
href=""https://redirect.github.com/actions/checkout/issues/2286"">#2286</a>)</li>
<li><a
href=""https://github.com/actions/checkout/commit/ff7abcd0c3c05ccf6adc123a8cd1fd4fb30fb493""><code>ff7abcd</code></a>
Update README to include Node.js 24 support details and requirements (<a
href=""https://redirect.github.com/actions/checkout/issues/2248"">#2248</a>)</li>
<li>See full diff in <a
href=""https://github.com/actions/checkout/compare/v5...v6"">compare
view</a></li>
</ul>
</details>
<br />


[![Dependabot compatibility
score](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=actions/checkout&package-manager=github_actions&previous-version=5&new-version=6)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)

Dependabot will resolve any conflicts with this PR as long as you don't
alter it yourself. You can also trigger a rebase manually by commenting
`@dependabot rebase`.

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

You can trigger Dependabot actions by commenting on this PR:
- `@dependabot rebase` will rebase this PR
- `@dependabot recreate` will recreate this PR, overwriting any edits
that have been made to it
- `@dependabot merge` will merge this PR after your CI passes on it
- `@dependabot squash and merge` will squash and merge this PR after
your CI passes on it
- `@dependabot cancel merge` will cancel a previously requested merge
and block automerging
- `@dependabot reopen` will reopen this PR if it is closed
- `@dependabot close` will close this PR and stop Dependabot recreating
it. You can achieve the same result by closing it manually
- `@dependabot show <dependency name> ignore conditions` will show all
of the ignore conditions of the specified dependency
- `@dependabot ignore this major version` will close this PR and stop
Dependabot creating any more for this major version (unless you reopen
the PR or upgrade to it yourself)
- `@dependabot ignore this minor version` will close this PR and stop
Dependabot creating any more for this minor version (unless you reopen
the PR or upgrade to it yourself)
- `@dependabot ignore this dependency` will close this PR and stop
Dependabot creating any more for this dependency (unless you reopen the
PR or upgrade to it yourself)


</details>

Signed-off-by: dependabot[bot] <support@github.com>
Co-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>",2025-11-21 12:10:40+00:00,dependabot[bot],1,0b723b3091814bcb89a3989f4cf4d7ae15c9fbca,"Add unlock functionality for reopened issues and PRs in locker workflow (#119003)

This PR enhances the `.github/workflows/locker.yml` workflow to
automatically unlock issues and pull requests when they are reopened,
addressing the need to make previously locked items accessible again
when discussion resumes.

## Changes Made

### New Event Triggers
- Added `issues.reopened` trigger to detect when closed issues are
reopened
- Added `pull_request_target.reopened` trigger to detect when closed PRs
are reopened

### Enhanced Job Logic
- **Lock job** (renamed from `main` for clarity):
- Added condition to prevent execution on reopened events:
`github.event_name != 'issues' && github.event_name !=
'pull_request_target'`
- Preserves existing functionality for scheduled runs and manual
dispatch
  
- **New unlock job**:
- Only executes when issues or PRs are reopened: `github.event.action ==
'reopened'`
  - Uses `actions/github-script@v7` with GitHub REST API to unlock items
- Handles both issues and pull requests with a single step (since GitHub
treats PRs as issues in the API)
- Only unlocks if the item is actually locked:
`github.event.issue.locked == true`

### Workflow Behavior
- **Before**: Issues/PRs remained locked after being reopened,
preventing further discussion
- **After**: Issues/PRs are automatically unlocked when reopened,
allowing immediate participation

## Technical Implementation

The unlock functionality uses the GitHub Issues API (which also handles
PRs) through `actions/github-script@v7`:

```javascript
await github.rest.issues.unlock({
  issue_number: context.issue.number,
  owner: context.repo.owner,
  repo: context.repo.repo,
});
```

This ensures that when maintainers or contributors reopen issues or PRs
for continued discussion, they won't encounter locked conversation
threads that prevent community engagement.

Fixes the workflow gap where reopened items remained inaccessible for
comments despite being active again.

<!-- START COPILOT CODING AGENT TIPS -->
---

✨ Let Copilot coding agent [set things up for
you](https://github.com/dotnet/runtime/issues/new?title=✨+Set+up+Copilot+instructions&body=Configure%20instructions%20for%20this%20repository%20as%20documented%20in%20%5BBest%20practices%20for%20Copilot%20coding%20agent%20in%20your%20repository%5D%28https://gh.io/copilot-coding-agent-tips%29%2E%0A%0A%3COnboard%20this%20repo%3E&assignees=copilot)
— coding agent works faster and does higher quality work when set up for
your repo.

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: akoeplinger <1376924+akoeplinger@users.noreply.github.com>
Co-authored-by: Alexander Köplinger <alex.koeplinger@outlook.com>
Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",6,7,7,"bump actions/checkout from 5 to 6 (issue_ref)bumps [actions/checkout]( from 5 to6.<details><summary>release notes</summary><p><em>sourced from <ahref="""">actions/checkout'sreleases</a>.</em></p><blockquote><h2>v6.0.0</h2><h2>what's changed</h2><ul><li>update readme to include node.js 24 support details and requirementsby <a in <ahref="""">actions/checkoutissue_ref</a></li><li>persist creds to a separate file by <a in <ahref="""">actions/checkoutissue_ref</a></li><li>v6-beta by <a in <ahref="""">actions/checkoutissue_ref</a></li><li>update readme/changelog for v6 by <a in <ahref="""">actions/checkoutissue_ref</a></li></ul><p><strong>full changelog</strong>: <ahref=""""><h2>v6-beta</h2><h2>what's changed</h2><p>updated persist-credentials to store the credentials under<code>$runner_temp</code> instead of directly in the local gitconfig.</p><p>this requires a minimum actions runner version of <ahref="""">v2.329.0</a>to access the persisted credentials for <ahref="""">dockercontainer action</a> scenarios.</p><h2>v5.0.1</h2><h2>what's changed</h2><ul><li>port v6 cleanup to v5 by <a in <ahref="""">actions/checkoutissue_ref</a></li></ul><p><strong>full changelog</strong>: <ahref=""""></blockquote></details><details><summary>changelog</summary><p><em>sourced from <ahref="""">actions/checkout'schangelog</a>.</em></p><blockquote><h1>changelog</h1><h2>v6.0.0</h2><ul><li>persist creds to a separate file by <a in <ahref="""">actions/checkoutissue_ref</a></li><li>update readme to include node.js 24 support details and requirementsby <a in <ahref="""">actions/checkoutissue_ref</a></li></ul><h2>v5.0.1</h2><ul><li>port v6 cleanup to v5 by <a in <ahref="""">actions/checkoutissue_ref</a></li></ul><h2>v5.0.0</h2><ul><li>update actions checkout to use node 24 by <a in <ahref="""">actions/checkoutissue_ref</a></li></ul><h2>v4.3.1</h2><ul><li>port v6 cleanup to v4 by <a in <ahref="""">actions/checkoutissue_ref</a></li></ul><h2>v4.3.0</h2><ul><li>docs: update readme.md by <a in <ahref="""">actions/checkoutissue_ref</a></li><li>add internal repos for checking out multiple repositories by <a in <ahref="""">actions/checkoutissue_ref</a></li><li>documentation update - add recommended permissions to readme by <a in <ahref="""">actions/checkoutissue_ref</a></li><li>adjust positioning of user email note and permissions heading by <a in <ahref="""">actions/checkoutissue_ref</a></li><li>update readme.md by <a in <ahref="""">actions/checkoutissue_ref</a></li><li>update codeowners for actions by <ain <ahref="""">actions/checkoutissue_ref</a></li><li>update package dependencies by <a in <ahref="""">actions/checkoutissue_ref</a></li></ul><h2>v4.2.2</h2><ul><li><code>url-helper.ts</code> now leverages well-known environmentvariables by <a in <ahref="""">actions/checkoutissue_ref</a></li><li>expand unit test coverage for <code>isghes</code> by <a in <ahref="""">actions/checkoutissue_ref</a></li></ul><h2>v4.2.1</h2><ul><li>check out other refs/* by commit if provided, fall back to ref by <a in <ahref="""">actions/checkoutissue_ref</a></li></ul><h2>v4.2.0</h2><ul><li>add ref and commit outputs by <a in <ahref="""">actions/checkoutissue_ref</a></li><li>dependency updates by <a <ahref="""">actions/checkoutissue_ref</a>,<ahref="""">actions/checkoutissue_ref</a></li></ul><h2>v4.1.7</h2><ul><li>bump the minor-npm-dependencies group across 1 directory with 4updates by <a in <ahref="""">actions/checkoutissue_ref</a></li><li>bump actions/checkout from 3 to 4 by <a in <ahref="""">actions/checkoutissue_ref</a></li><li>check out other refs/* by commit by <a in <ahref="""">actions/checkoutissue_ref</a></li><li>pin actions/checkout's own workflows to a known, good, stableversion. by <a in<ahref="""">actions/checkoutissue_ref</a></li></ul><h2>v4.1.6</h2><ul><li>check platform to set archive extension appropriately by <a in<ahref="""">actions/checkoutissue_ref</a></li></ul><h2>v4.1.5</h2><ul><li>update npm dependencies by <a in<ahref="""">actions/checkoutissue_ref</a></li><li>bump github/codeql-action from 2 to 3 by <a in <ahref="""">actions/checkoutissue_ref</a></li><li>bump actions/setup-node from 1 to 4 by <a in <ahref="""">actions/checkoutissue_ref</a></li><li>bump actions/upload-artifact from 2 to 4 by <a in <ahref="""">actions/checkoutissue_ref</a></li></ul><!-- raw html omitted --></blockquote><p>... (truncated)</p></details><details><summary>commits</summary><ul><li><ahref=""""><code>1af3b93</code></a>update readme/changelog for v6 (<ahref="""">issue_ref</a>)</li><li><ahref=""""><code>71cf226</code></a>v6-beta (<ahref="""">issue_ref</a>)</li><li><ahref=""""><code>069c695</code></a>persist creds to a separate file (<ahref="""">issue_ref</a>)</li><li><ahref=""""><code>ff7abcd</code></a>update readme to include node.js 24 support details and requirements (<ahref="""">issue_ref</a>)</li><li>see full diff in <ahref="""">compareview</a></li></ul></details><br />[![dependabot compatibilityscore](#about-compatibility-scores)dependabot will resolve any conflicts with this pr as long as you don'talter it yourself. you can also trigger a rebase manually by commenting rebase will rebase this pr- recreate will merge this pr after your ci passes on it- squash and merge will cancel a previously requested mergeand block automerging- reopen will close this pr and stop dependabot recreatingit. you can achieve the same result by closing it manually- show <dependency name> ignore conditions will close this pr and stopdependabot creating any more for this major version (unless you reopenthe pr or upgrade to it yourself)- ignore this minor version will close this pr and stopdependabot creating any more for this dependency (unless you reopen thepr or upgrade to it yourself)</details>"
dotnet/runtime,dc366eb3bafe05de4388967c02c27744b5ddfe76,"Add XML documentation guidelines in instructions (#120773)

Updated guidelines for adding XML documentation to APIs.

---------

Co-authored-by: Alexander Köplinger <alex.koeplinger@outlook.com>",2025-11-21 12:23:39+00:00,Genevieve Warren,0,,,2,64,0,add xml documentation guidelines in instructions (issue_ref)updated guidelines for adding xml documentation to apis.---------
dotnet/runtime,c582fa2f229c5a7d55b7f75c75ee44ac019a84e1,"Avoid array -> span -> array in COSE ToBeSignedBuilder.

The ToBeSignedBuilder for hash and pure modes had an Append that accepts a ReadOnlySpan. For .NET Framework and .NET Standard, IncrementalHash and MemoryStream cannot operate on a ReadOnlySpan, so they were getting converted to an array again. There were a number of places where we already had an array though.

This change avoids to array to span to array conversation by introducing
a new AppendToBeSigned overload that accepts an array with an offset and
length, which avoids a ToArray().

Co-authored-by: Jeremy Barton <jbarton@microsoft.com>",2025-11-21 13:42:44+00:00,Kevin Jones,0,,,4,14,3,"avoid array -> span -> array in cose tobesignedbuilder.the tobesignedbuilder for hash and pure modes had an append that accepts a readonlyspan. for .net framework and .net standard, incrementalhash and memorystream cannot operate on a readonlyspan, so they were getting converted to an array again. there were a number of places where we already had an array though.this change avoids to array to span to array conversation by introducinga new appendtobesigned overload that accepts an array with an offset andlength, which avoids a toarray()."
dotnet/runtime,5277ab4ec81733875510f050d8d19292411daeb8,"Fix / disable several coreclr tests with interpreter (#121492)

This change contains the following:
* Fix cases when returning smaller than 32 bit int / uint values -
introduce new INTOP_RET variants like Mono
* Fix index out of range check case when native int is used as an index
to an array. To avoid adding an explosion of array element access IR
opcodes, it adds a range check opcode that is used only when the index
is nint.
* put back zeroing to INTOP_NEWOBJ_VT, few tests were failing because it
was missing and we've already fixed the issue we had with the zeroing
before by setting the ""noCallArgs""
* Disable a test that uses pinvoke marshalling with calli",2025-11-21 17:30:47+00:00,Jan Vorlicek,1,7d37868effb590e4fe5eee46e3d63321a63a1cef,"Implement additional CEE_BOX peepholes (#121763)

This change implements CEE_BOX peepholes like JIT does in
Compiler::impBoxPatternMatch, mostly to fix issues with sequences
starting with CEE_BOX applied to ByRefLike types. While it is illegal to
box a ByRefLike types, some sequences can be replaced by constants or
nop.

There is also one extra fix for the destination type of an unbox. It was
incorrectly changed to StackTypeO by a large change in the past from the
correct StackTypeI.

This fixes a relatively large number of failing libraries tests.",7,92,6,"fix / disable several coreclr tests with interpreter (issue_ref)this change contains the following:* fix cases when returning smaller than 32 bit int / uint values -introduce new intop_ret variants like mono* fix index out of range check case when native int is used as an indexto an array. to avoid adding an explosion of array element access iropcodes, it adds a range check opcode that is used only when the indexis nint.* put back zeroing to intop_newobj_vt, few tests were failing because itwas missing and we've already fixed the issue we had with the zeroingbefore by setting the ""nocallargs""* disable a test that uses pinvoke marshalling with calli"
dotnet/runtime,21db9c9a6a2d611f1549d1ccef4d3a793bbd2075,"[clr-interp] Enable building clr-interp on Release, via build flag (#121850)

Interpreter is enabled on targets needing it: wasm/ios.
Interpreter is enabled on debug desktop build.
Interpreter is disabled on release desktop build.

This commit makes it possible to enable it on desktop release build. Ex:
```
./build.sh -subset clr -c Release --clrinterpreter
```",2025-11-21 20:38:12+00:00,Vlad Brezae,1,f8d762ecfbfa6dfce3c726d5f35c61b10a024b3a,"[wasm][coreclr] Fix unhandled exceptions (#121817)

Developed with Jan Vorlicek

Make sure the return address is set in transition block when going
through `ExecuteInterpretedMethodWithArgs`, so that `SfiNextWorker` gets
the address.

Fill missing pieces around context.

Fix few asserts and offsets.

---------

Co-authored-by: Jan Vorlicek <janvorli@microsoft.com>
Co-authored-by: Aaron R Robinson <arobins@microsoft.com>",5,19,0,"[clr-interp] enable building clr-interp on release, via build flag (issue_ref)interpreter is enabled on targets needing it: wasm/ios.interpreter is enabled on debug desktop build.interpreter is disabled on release desktop build.this commit makes it possible to enable it on desktop release build. ex:"
dotnet/runtime,fb8c80970d7b6e5e73bcb4895d33589bc54b3a6d,"arm64: Fix ArithmeticShift when you shift a value outside of long range (#121735)

* Contributes to #121659

Co-authored-by: Andy Ayers <andya@microsoft.com>",2025-11-21 23:26:02+00:00,Jonathan Davies,1,b6f06831c3978ca95a6274b923d17803e6376abc,"arm64: Fix Sve2 ShiftArithmeticRoundedSaturate Helper (#121924)

- Fixes
https://github.com/dotnet/runtime/issues/121659#issuecomment-3568674799",1,5,5,arm64: fix arithmeticshift when you shift a value outside of long range (issue_ref)* contributes to issue_ref
dotnet/runtime,2372a0b9ce66b5964e9b94ef06fd7443a8e9bd2f,"Print out codesign info on failed check for equivalence (#121756)

Make `MatchesCodesignOutput` test print the output of `codesign --display --verbose=6` for the two files when assert for equivalence fails.",2025-11-22 02:50:45+00:00,Elinor Fung,0,,,1,17,2,print out codesign info on failed check for equivalence (issue_ref)make test print the output of for the two files when assert for equivalence fails.
dotnet/runtime,eccb92811b68de151bdbcb9e472df31cf03ed487,Add WebAssembly overview aimed at JIT developers (#120850),2025-11-22 05:51:30+00:00,Katelyn Gadd,0,,,1,163,0,add webassembly overview aimed at jit developers (issue_ref)
dotnet/runtime,f07fa6c4d9494ece9a52c3860b21391e1f247223,"Save/restore contexts for custom notifiers (#121743)

With #121448 we are restoring contexts as we unwind during suspension.
However, since we delay the call to `OnCompleted`, we need to restore
the leaf contexts explicitly now.

Also change suspension so that we do not notify about context restores. This is
different from async1, but it is necessary to keep calling `OnCompleted` in the
right contexts when we get back to `RuntimeAsyncTask`. Also, skipping
notifications for contexts when we know no user code will be executed is one of
the optimizations we want to allow with runtime async.",2025-11-23 11:56:37+00:00,Jakob Botsch Nielsen,1,96acc3c0462e851bc6065db08a6b7b983192a50c,"[RuntimeAsync] Skip over nonuser continuations when searching for awaiter configuration (#121976)

Fixes: #121971

Sometimes we have transparent/infrastructure code between user code and
a ValueTask-returning method that wraps IValueTaskSource. An example is
an unboxing stub.

This is the scenario where we need to figure the configuration of the
await operation by looking at continuation that corresponds to the user
code (only those are configured).
In a case if we see transparent continuations, we should just continue
walking continuation chain.",12,61,9,"save/restore contexts for custom notifiers (issue_ref)with issue_ref we are restoring contexts as we unwind during suspension.however, since we delay the call to , we need to restorethe leaf contexts explicitly now.also change suspension so that we do not notify about context restores. this isdifferent from async1, but it is necessary to keep calling in theright contexts when we get back to . also, skippingnotifications for contexts when we know no user code will be executed is one ofthe optimizations we want to allow with runtime async."
dotnet/runtime,7f1179ac61581ef7bf7265bac69306e3fc66c75e,"[RyuJit/WASM] Reach the NYI in `genFnProlog` (#121863)

Pulling on the thread of NYIs a bit further. We now have this for my
`Problem(int a, int b) => a + b;`:
```cs
Scope info: begin block BB01, IL range [000..004)
Added IP mapping: 0x0000 STACK_EMPTY (G_M56520_IG02,ins#0,ofs#0) label
Generating:                [000004] -----------                            IL_OFFSET void   INLRT @ 0x000[E--]
Generating: N001 (  1,  1) [000000] -----+-----                    t0 =    LCL_VAR   int    V00 arg0         u:1 (last use) $80
Mapped BB01 to G_M56520_IG02
IN0001:             i32.load 1 4
Debug: Closing V00 debug range.
                                                        Live vars after [000000]: {V00 V01} -{V00} => {V01}
Generating: N002 (  1,  1) [000001] -----+-----                    t1 =    LCL_VAR   int    V01 arg1         u:1 (last use) $81
IN0002:             i32.load 1 0
Debug: Closing V01 debug range.
                                                        Live vars after [000001]: {V01} -{V01} => {}
                                                                        /--*  t0     int
                                                                        +--*  t1     int
Generating: N003 (  3,  3) [000002] -----+-----                    t2 = *  ADD       int    $100
IN0003:             i32.add
                                                                        /--*  t2     int
Generating: N004 (  4,  4) [000003] -----+-----                         *  RETURN    int    $VN.Void
```",2025-11-23 15:56:27+00:00,SingleAccretion,1,371d227d15771ea71c01542584c68a5a55501ad9,"JIT: Ensure proper alignment of async resumption data section (#121790)

We did not properly ensure the alignment of the async resumption data
blob, only the overall alignment of the entire data section.

Unify the code that inserts padding and use it for the async resumption
data too.

The alignment was also missing for basic block address sections, but we
did not have a problem here because we do not use absolute basic block
addresses for 64-bit targets. Still, add the code to ensure this would
get aligned correctly.

Fix #121779",16,413,109,[ryujit/wasm] reach the nyi in (issue_ref)pulling on the thread of nyis a bit further. we now have this for my:
dotnet/runtime,6a06e6629ab7e97216ebff3bba840e0d209d93f5,"[wasm] Bump chrome for testing - linux: 142.0.7444.175, windows: 143.0.7499.40 (#121901)

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>",2025-11-24 07:48:02+00:00,github-actions[bot],0,,,1,4,4,"[wasm] bump chrome for testing - linux: 142.0.7444.175, windows: 143.0.7499.40 (issue_ref)"
dotnet/runtime,c7631aef0f5b77624cc84558fdbf4787e65c10c4,Remove unsafe code in CreateUriInfo and fix edge-case IndexOutOfRangeExceptions (#121653),2025-11-24 10:51:17+00:00,Miha Zupan,1,09e0e728f2b2288cd010a15db77018295c352a95,Fix edge-case Uri IPv4 parsing regression (#121947),3,98,113,remove unsafe code in createuriinfo and fix edge-case indexoutofrangeexceptions (issue_ref)
dotnet/runtime,0fe3eb128bc11a78d9685075d2a787dd2740fc2d,Remove more unsafe code from Uri internals (#121270),2025-11-24 10:56:01+00:00,Miha Zupan,0,,,3,239,265,remove more unsafe code from uri internals (issue_ref)
dotnet/runtime,b60a06a1a978bbd414f406670a07cd926284c969,"Remove staging branches from stress test pipelines (#121802)

Since futuer release branches will not use the -staging suffix, remove
them from the stress test yml files. This does not affect runs on
release/9.0-staging etc because the schedule is always checked against
the version on that particular branch.",2025-11-24 13:39:05+00:00,Radek Zikmund,0,,,2,2,4,"remove staging branches from stress test pipelines (issue_ref)since futuer release branches will not use the -staging suffix, removethem from the stress test yml files. this does not affect runs onrelease/9.0-staging etc because the schedule is always checked againstthe version on that particular branch."
dotnet/runtime,cf9869e631b70cdc3b855211aea3e028fb275a05,"Automatically rewind base stream position when decompression finishes (#121111)

Fixes automatic stream positioning issue when using compression streams
with mixed-content data.

When using `DeflateStream`, `GZipStream`, `ZLibStream` or `BrotliStream`
for decompression, the underlying stream position would advance past the
end of compressed data due to internal buffering. This caused issues
when reading additional content after decompression in mixed-format
files.

- Added automatic stream rewinding when decompression completes and the
underlying stream supports seeking
- The stream is now rewound to the exact end of compressed data by
seeking back by the number of unconsumed bytes in the inflater/decoder
buffer
- Added `_decompressionFinished` flag to ensure rewinding happens only
once, even with multiple Read/ReadAsync/CopyTo calls after decompression
completes
- Added new tests to verify stream rewinding behavior and prevention of
multiple rewinds

Fixes #73770

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-11-24 13:47:17+00:00,Irem Yuksel,1,c3d9ccd34e63d7b383735af55c9bd94f55664996,"Reliable clean-up of SafeHandles in Deflater/Inflater (#114826)

Fixes #89445

This reimplements #71991 in `Deflater` and `Inflater`. The PR was
previously reverted in #85001 as a result of issue #84994.

As noted in the reverting PR, `Deflater` simply needed to dispose of the
returned SafeHandle and supress its own finalizer if
`CreateZLibStreamForDeflate` threw an exception. We now do this.

We couldn't do this for `Inflater` at the time - it had to support
concatenated GZip data, and as part of that support it would recreate
its `ZLibStreamHandle`. As a result of #113587, this recreation no
longer happens and we can treat `Inflater` as we would treat `Deflater`.
I've refactored `Inflater.InflateInit` out of existence and made
`_zlibStream` readonly to reflect this.

This also incorporates a change to both class' `DeallocateBufferHandle`
methods (when called by `Dispose`) to prevent them dereferencing a
`ZLibStreamHandle` after it's been disposed of. This is roughly how
#84994 was originally discovered.

---------

Co-authored-by: Radek Zikmund <32671551+rzikm@users.noreply.github.com>",5,338,5,"automatically rewind base stream position when decompression finishes (issue_ref)fixes automatic stream positioning issue when using compression streamswith mixed-content data.when using , , or for decompression, the underlying stream position would advance past theend of compressed data due to internal buffering. this caused issueswhen reading additional content after decompression in mixed-formatfiles.- added automatic stream rewinding when decompression completes and theunderlying stream supports seeking- the stream is now rewound to the exact end of compressed data byseeking back by the number of unconsumed bytes in the inflater/decoderbuffer- added flag to ensure rewinding happens onlyonce, even with multiple read/readasync/copyto calls after decompressioncompletes- added new tests to verify stream rewinding behavior and prevention ofmultiple rewindsfixes issue_ref---------"
dotnet/runtime,928eb5fd02d066bfeada8d58547cac48baebe78a,"Remove unsafe code from Uri PrivateParseMinimal, CheckAuthorityHelper, and related helpers (#121671)",2025-11-24 14:13:14+00:00,Miha Zupan,1,a56f65ee744403ec7bdd93152ccab6d1af029ee2,Fix duplicate Uri ToString for DOS-like custom schemes (#121930),5,306,419,"remove unsafe code from uri privateparseminimal, checkauthorityhelper, and related helpers (issue_ref)"
dotnet/runtime,8b0e1d66ca2795917e3762278682fe213cdb6a7f,"Fix constrained call local exposure blocking escape analysis (#121918)

Constrained calls on ref types currently emit trees like
```cs
--C-G------                         *  CALLV vt-ind int    System.Object:Equals(System.Object):bool:this
n---G------ this                    +--*  IND       ref
-----------                         |  \--*  LCL_ADDR  long   V06 tmp5         [+0]
----------- arg1                    \--*  LCL_VAR   ref    V04 tmp3
```
which blocks escape analysis due to the LCL_ADDR marking the local as
escaped.
Using the helper to get this here instead:
```cs
--C-G------                         *  CALLV vt-ind int    System.Object:Equals(System.Object):bool:this
----------- this                    +--*  LCL_VAR   ref    V06 tmp5
----------- arg1                    \--*  LCL_VAR   ref    V04 tmp3
```
solves the issue.",2025-11-24 14:55:36+00:00,Michał Petryka,1,8734e30a2bedbfb061ec99eba792864ae91edd8c,"Switch to JIT intrinsics for generic context/async continuations (#121799)

NativeAOT and coreclr have various places where they want to have
explicit control over the generic context and async continuation
arguments. Introduce JIT intrinsics that allow them to explicitly set
what value should be used for these arguments in an upcoming call. Model
these arguments as part of the calling convention in the signatures
where they are passed. That fixes #118575 for async, and is also
necessary to compute proper call stubs for the interpreter.

See #121781 for more context.",1,1,1,fix constrained call local exposure blocking escape analysis (issue_ref)constrained calls on ref types currently emit trees likewhich blocks escape analysis due to the lcl_addr marking the local asescaped.using the helper to get this here instead:solves the issue.
dotnet/runtime,3fc131ac73c497fed888852dabf4adddbc819d6a,"Revise security policy details and reporting process (#121313)

Removed second mention of email, updated link titles, edited follow-up
process.

---------

Co-authored-by: Alexander Köplinger <alex.koeplinger@outlook.com>
Co-authored-by: Jeremy Barton <jbarton@microsoft.com>
Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-11-24 15:10:25+00:00,Barry Dorrans,0,,,1,8,5,"revise security policy details and reporting process (issue_ref)removed second mention of email, updated link titles, edited follow-upprocess.---------"
dotnet/runtime,48fd2f34188b53f815e2c190bc747e075a759389,"Fix DoesValueTypeContainGCRefs in the interpreter (#121846)

There was a mistake in the implementation that prevented it from working
correctly in some cases. The return value of the getClassSize() is not a
number of slots filled in the array, but a number of GC references in
the array. So if there were e.g. three slots and there was one GC
reference in the second slot, the DoesValueTypeContainGCRefs returned
false.",2025-11-24 15:14:38+00:00,Jan Vorlicek,1,7baffbaf9f34ef9ed3562a8248dbfc8287b7e078,"Fix interpreter delegate calls with large alignment of first arg (#121936)

There is a problem with delegate calls when the first target arch is
aligned to 16 bytes. One path to call the delegate removes the delegate
obj from the argument list by moving the arguments on the interpreter
stack by the size of the delegate obj slot. But in the problematic case,
the stack slot of the delegate obj is followed by an unused slot that
ensures the alignment of the first target argument that starts after it.
Moving the arguments by the 8 bytes garbles the arguments and makes that
unused slot part of the first target arg. Moreover, it also doesn't move
the last 8 bytes of the last argument due to this.

This change fixes it by ensuring that we move the arguments starting at
the aligned location of the first target argument.

This fixes a large number of the libraries tests.

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",1,2,10,"fix doesvaluetypecontaingcrefs in the interpreter (issue_ref)there was a mistake in the implementation that prevented it from workingcorrectly in some cases. the return value of the getclasssize() is not anumber of slots filled in the array, but a number of gc references inthe array. so if there were e.g. three slots and there was one gcreference in the second slot, the doesvaluetypecontaingcrefs returnedfalse."
dotnet/runtime,371d227d15771ea71c01542584c68a5a55501ad9,"JIT: Ensure proper alignment of async resumption data section (#121790)

We did not properly ensure the alignment of the async resumption data
blob, only the overall alignment of the entire data section.

Unify the code that inserts padding and use it for the async resumption
data too.

The alignment was also missing for basic block address sections, but we
did not have a problem here because we do not use absolute basic block
addresses for 64-bit targets. Still, add the code to ensure this would
get aligned correctly.

Fix #121779",2025-11-24 16:11:43+00:00,Jakob Botsch Nielsen,1,bd364cebb41801524b9e368643b00215c33c3964,"Clean up JIT<->EE relocations (#121920)

Introduce a `CorInfoReloc` enum and use it exclusively to communicate
relocation types between the EE and JIT. Translate it in crossgen2/ILC
to the file-format relocation type when necessary.

Fix #121878",2,56,47,"jit: ensure proper alignment of async resumption data section (issue_ref)we did not properly ensure the alignment of the async resumption datablob, only the overall alignment of the entire data section.unify the code that inserts padding and use it for the async resumptiondata too.the alignment was also missing for basic block address sections, but wedid not have a problem here because we do not use absolute basic blockaddresses for 64-bit targets. still, add the code to ensure this wouldget aligned correctly.fix issue_ref"
dotnet/runtime,7d37868effb590e4fe5eee46e3d63321a63a1cef,"Implement additional CEE_BOX peepholes (#121763)

This change implements CEE_BOX peepholes like JIT does in
Compiler::impBoxPatternMatch, mostly to fix issues with sequences
starting with CEE_BOX applied to ByRefLike types. While it is illegal to
box a ByRefLike types, some sequences can be replaced by constants or
nop.

There is also one extra fix for the destination type of an unbox. It was
incorrectly changed to StackTypeO by a large change in the past from the
correct StackTypeI.

This fixes a relatively large number of failing libraries tests.",2025-11-24 17:58:25+00:00,Jan Vorlicek,1,39ad1124b5539f1068418a4350208c806c3d7cee,"Fix access flags passed to getFieldInfo in interpreter (#122009)

The interpreter compiler incorrectly passes CORINFO_ACCESS_GET to the
getFieldInfo for CEE_STSFLD and CEE_STFLD opcodes. That causes failure
in one of the libraries tests that initializes
BitConverter.IsLittleEndian field.

This change puts in the correct CORINFO_ACCESS_SET flag.",2,356,15,"implement additional cee_box peepholes (issue_ref)this change implements cee_box peepholes like jit does incompiler::impboxpatternmatch, mostly to fix issues with sequencesstarting with cee_box applied to byreflike types. while it is illegal tobox a byreflike types, some sequences can be replaced by constants ornop.there is also one extra fix for the destination type of an unbox. it wasincorrectly changed to stacktypeo by a large change in the past from thecorrect stacktypei.this fixes a relatively large number of failing libraries tests."
dotnet/runtime,8566685e5baad609035d5fd611ee65312de2c765,"Enable PlatformNativeR2R test on macOS (#121752)

- Allow setting `Crossgen2OutputFormat` in tests - passed as `-f
<format>` to crossgen2
- Update generated test scripts to handle Mach-O output format for
crossgen2, linking the produced object into a dynamic library
- Enable `PlatformNativeR2R` test on macOS and set format to `macho`",2025-11-24 18:27:04+00:00,Elinor Fung,1,1da1c8aaadd24db7f8a907b0bfa994cb0ecf28c9,"Fix test script invocation of RunCrossGen2OnFiles (#122313)

Fixes #122295",3,31,11,"enable platformnativer2r test on macos (issue_ref)- allow setting in tests - passed as to crossgen2- update generated test scripts to handle mach-o output format forcrossgen2, linking the produced object into a dynamic library- enable test on macos and set format to"
dotnet/runtime,550c960396d3bba1a83198d0a3ac24109124e82d,"Enable async testing in CI (#121857)

With #121814 merged we should be able to start running these in the CI
for native AOT.",2025-11-24 20:44:00+00:00,Michal Strehovský,1,d23cb6751b8ced826b770ba01ff7d7b148e40b0d,"Run async testing on x86 (#121970)

The fix presumably merged in #121941.

Cc @dotnet/ilc-contrib",4,16,4,enable async testing in ci (issue_ref)with issue_ref merged we should be able to start running these in the cifor native aot.
dotnet/runtime,3ac1925f937ae2c82e139abdba0b2ed58430bc37,"Delete InlineArrays.cs and replace types (#121943)

Helps reduce the total number of types by replacing `ThreeObjects`,
`TwoObjects`, and `EightObjects` with the existing `InlineArrayX<T>`
types.",2025-11-25 03:44:10+00:00,Paperclip,0,,,7,16,66,"delete inlinearrays.cs and replace types (issue_ref)helps reduce the total number of types by replacing ,, and with the existing types."
dotnet/runtime,8734e30a2bedbfb061ec99eba792864ae91edd8c,"Switch to JIT intrinsics for generic context/async continuations (#121799)

NativeAOT and coreclr have various places where they want to have
explicit control over the generic context and async continuation
arguments. Introduce JIT intrinsics that allow them to explicitly set
what value should be used for these arguments in an upcoming call. Model
these arguments as part of the calling convention in the signatures
where they are passed. That fixes #118575 for async, and is also
necessary to compute proper call stubs for the interpreter.

See #121781 for more context.",2025-11-25 08:45:12+00:00,Jakob Botsch Nielsen,1,80d343486d8db539ad204cfb0a2eac55ae4f8d98,"Stop spilling ldvirtftn (#120866)

This PR stops spilling the target for calls implemented via `ldvirtftn` in the
importer, which is the way we implement GVMs. We were previously spilling the
target with `CHECK_SPILL_NONE`, but this is incorrect because it induces a null
check (see #121711). So this PR fixes that issue. Also, avoiding the spill gives
us a simple uncontroversial way to devirtualize in some cases when we can
extract information directly from `gtCallAddr`.

The problem with removing the spill is code size regressions. `gtCallAddr` is
normally evaluated after arguments, and the backend is not good at handling the
ABI constraints of the arguments when `gtCallAddr` contains calls. To counteract
that we introduce a new optimize in lowering. The optimization tries to move the
evaluation of the target to happen before the arguments. It effectively
accomplishes what the previous `CHECK_SPILL_NONE` spill was doing, except with
the right legality checks.


Contributes to #112596

Fixes #121711

---------

Co-authored-by: Jakob Botsch Nielsen <jakob.botsch.nielsen@gmail.com>",14,262,287,"switch to jit intrinsics for generic context/async continuations (issue_ref)nativeaot and coreclr have various places where they want to haveexplicit control over the generic context and async continuationarguments. introduce jit intrinsics that allow them to explicitly setwhat value should be used for these arguments in an upcoming call. modelthese arguments as part of the calling convention in the signatureswhere they are passed. that fixes issue_ref for async, and is alsonecessary to compute proper call stubs for the interpreter.see issue_ref for more context."
dotnet/runtime,bd364cebb41801524b9e368643b00215c33c3964,"Clean up JIT<->EE relocations (#121920)

Introduce a `CorInfoReloc` enum and use it exclusively to communicate
relocation types between the EE and JIT. Translate it in crossgen2/ILC
to the file-format relocation type when necessary.

Fix #121878",2025-11-25 10:39:51+00:00,Jakob Botsch Nielsen,1,e2005d178d14ea5816a3b58fc06aacc2b4a7983b,"JIT: Skip GC info for trivial async calls for x86 (#121941)

For x86 we only report GC pointers live in callee save registers, and we
also avoid reporting any trivial call.
There is compensating code upstream of the GC reporting that returns for
trivial calls, but this code did not account for the GC ref returned for
async continuations. Thus it was possible that we made it into the GC
encoder with a trivial call and then hit an assert.

Fix #121872",35,497,522,clean up jit<->ee relocations (issue_ref)introduce a enum and use it exclusively to communicaterelocation types between the ee and jit. translate it in crossgen2/ilcto the file-format relocation type when necessary.fix issue_ref
dotnet/runtime,805aa9b81285e729e4c45d0f60de4810a7dcee6c,"Add support for iOS sample app to publish and run with R2R on coreclr (#121824)

Runtime:
- Stop disabling R2R by default on Apple mobile
- Update runtime to interpret everything on Apple moblie

iOS sample app:
- Update AppleAppBuilder host template to use `host_runtime_contract`
- Use in-build crossgen2 and in-repo targets when publishing iOS app
- Make AppleAppBuilder sign `*.r2r.dylib`",2025-11-25 17:21:04+00:00,Elinor Fung,1,77d0803a56b4217a04d9985da9ac60a8529fbc5d,"Add missing import for AppleBuild.InTree.targets in iOS project (#122284)

## Description

Targets in AppleBuild.InTree.targets were removed by mistake in
https://github.com/dotnet/runtime/pull/122036. This change restores them
and fixes the performance jobs.

Internal performance job:
https://dev.azure.com/dnceng/internal/_build/results?buildId=2856228&view=results",10,124,16,add support for ios sample app to publish and run with r2r on coreclr (issue_ref)runtime:- stop disabling r2r by default on apple mobile- update runtime to interpret everything on apple moblieios sample app:- update appleappbuilder host template to use - use in-build crossgen2 and in-repo targets when publishing ios app- make appleappbuilder sign
dotnet/runtime,99aa031fec2a5c782488a96fd071b68336456e40,"[wasm][coreclr] Shutdown runtime at the end when running on node (#121949)

This makes the tests return the right exit code again, when running on
Node.js.",2025-11-25 17:53:29+00:00,Radek Doulik,0,,,1,26,5,"[wasm][coreclr] shutdown runtime at the end when running on node (issue_ref)this makes the tests return the right exit code again, when running onnode.js."
dotnet/runtime,470ca866e3512f95513aac635d9c02aba0880dfb,"[RuntimeAsync] Remove async TODOs where issues are not blocking and tracked in some other way (#121766)

Trivial change removing some TODOs. 
All these TODOs are for known NYIs that are not blocking and are all
tracked in some other way.

Ex: 
Multicore JIT: https://github.com/dotnet/runtime/issues/115097
R2R: https://github.com/dotnet/runtime/issues/121559
PGO: https://github.com/dotnet/runtime/issues/121755

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-11-25 17:54:08+00:00,Vladimir Sadov,0,,,3,4,9,[runtimeasync] remove async todos where issues are not blocking and tracked in some other way (issue_ref)trivial change removing some todos. all these todos are for known nyis that are not blocking and are alltracked in some other way.ex: multicore jit: r2r: pgo: ---------
dotnet/runtime,f1e2f8953e4b114c6b569802e51a53f780aa013e,async read/writes to STD IN/OUT/ERR are cancelable on Windows since .NET 8 (#121960),2025-11-25 18:57:29+00:00,Adam Sitnik,0,,,1,0,1,async read/writes to std in/out/err are cancelable on windows since .net 8 (issue_ref)
dotnet/runtime,e2005d178d14ea5816a3b58fc06aacc2b4a7983b,"JIT: Skip GC info for trivial async calls for x86 (#121941)

For x86 we only report GC pointers live in callee save registers, and we
also avoid reporting any trivial call.
There is compensating code upstream of the GC reporting that returns for
trivial calls, but this code did not account for the GC ref returned for
async continuations. Thus it was possible that we made it into the GC
encoder with a trivial call and then hit an assert.

Fix #121872",2025-11-25 19:24:29+00:00,Jakob Botsch Nielsen,1,80af2ef9f5f815701df52a6de800e4bd05fd9299,"JIT: fix build breaks with EMIT_TRACK_STACK_DEPTH=0 (#121997)

And then set it to 0 for Wasm.",1,4,3,"jit: skip gc info for trivial async calls for x86 (issue_ref)for x86 we only report gc pointers live in callee save registers, and wealso avoid reporting any trivial call.there is compensating code upstream of the gc reporting that returns fortrivial calls, but this code did not account for the gc ref returned forasync continuations. thus it was possible that we made it into the gcencoder with a trivial call and then hit an assert.fix issue_ref"
dotnet/runtime,7baffbaf9f34ef9ed3562a8248dbfc8287b7e078,"Fix interpreter delegate calls with large alignment of first arg (#121936)

There is a problem with delegate calls when the first target arch is
aligned to 16 bytes. One path to call the delegate removes the delegate
obj from the argument list by moving the arguments on the interpreter
stack by the size of the delegate obj slot. But in the problematic case,
the stack slot of the delegate obj is followed by an unused slot that
ensures the alignment of the first target argument that starts after it.
Moving the arguments by the 8 bytes garbles the arguments and makes that
unused slot part of the first target arg. Moreover, it also doesn't move
the last 8 bytes of the last argument due to this.

This change fixes it by ensuring that we move the arguments starting at
the aligned location of the first target argument.

This fixes a large number of the libraries tests.

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-11-25 21:48:03+00:00,Jan Vorlicek,1,e1db3bb062cec3b259dc43a11f541c95d5cbd241,"[interp][coreclr] Fix virtual generic calls in interpreter (#122069)

Fix regression introduced in #121799

Force intrinsic expansion for new runtime helpers in the interpreter.

Added the new methods and also
`NI_System_StubHelpers_NextCallReturnAddress`, which has also `//
Unconditionally expanded intrinsic` comment.

This was happening on wasm and possibly on other platforms too,
resulting in unhandled exception. Possibly only on platforms, which use
generic instantiation IL stubs.

```
Unhandled exception. System.Diagnostics.UnreachableException: The program executed an instruction that was thought to be unreachable.
   at System.Runtime.CompilerServices.RuntimeHelpers.SetNextCallGenericContext(Void* value) in /Users/rodo/git/runtime-clean/src/libraries/System.Private.CoreLib/src/System/Runtime/CompilerServices/RuntimeHelpers.cs:line 186
   at InterpreterTest.TestVirtual() in /Users/rodo/git/runtime-clean/src/tests/JIT/interpreter/Interpreter.cs:line 1960
   at InterpreterTest.RunInterpreterTests() in /Users/rodo/git/runtime-clean/src/tests/JIT/interpreter/Interpreter.cs:line 896
   at InterpreterTest.Main(String[] args) in /Users/rodo/git/runtime-clean/src/tests/JIT/interpreter/Interpreter.cs:line 731
Aborted(native code called abort())
```",3,25,3,"fix interpreter delegate calls with large alignment of first arg (issue_ref)there is a problem with delegate calls when the first target arch isaligned to 16 bytes. one path to call the delegate removes the delegateobj from the argument list by moving the arguments on the interpreterstack by the size of the delegate obj slot. but in the problematic case,the stack slot of the delegate obj is followed by an unused slot thatensures the alignment of the first target argument that starts after it.moving the arguments by the 8 bytes garbles the arguments and makes thatunused slot part of the first target arg. moreover, it also doesn't movethe last 8 bytes of the last argument due to this.this change fixes it by ensuring that we move the arguments starting atthe aligned location of the first target argument.this fixes a large number of the libraries tests.---------"
dotnet/runtime,06d89d2e01124f03f313bb1deec08ada75c31783,"Implement InstantiateSignature on AsyncMethodVariant/EcmaMethod (#121948)

We left this as NYI but I hit this. The correct implementation for
anything that represents a definition should be `return this`. Since I
was looking at this, I'm doing the same for `EcmaMethod` too since the
base `MethodDesc.InstantiateSignature` does a lot of work for nothing on
a definition.

Cc @dotnet/ilc-contrib",2025-11-25 22:47:08+00:00,Michal Strehovský,0,,,2,3,1,"implement instantiatesignature on asyncmethodvariant/ecmamethod (issue_ref)we left this as nyi but i hit this. the correct implementation foranything that represents a definition should be . since iwas looking at this, i'm doing the same for too since thebase does a lot of work for nothing ona definition.cc @dotnet/ilc-contrib"
dotnet/runtime,e207ac1781d6cf61fb567336a1370b54f74c5b54,"Do not ignore ClassLoader::ResolveTokenToTypeDefThrowing return values (#121864)

ResolveTokenToTypeDefThrowing can return FALSE in some situations when
the token cannot be resolved. The calling code has to deal with the
situation gracefully since the [out] arguments are not initialized in
that case.

Regressions introduced by #114675 (method.cpp) and #118413
(methodtablebuilder.cpp)

Fixes #121791",2025-11-26 01:22:20+00:00,Jan Kotas,1,8c2b75fdc4f042d8c22264a2e7cb7f6471d2a3a7,"Rename AsyncMethodKind enum values: NotAsync→Ordinary, RuntimeAsync→TaskReturningILAsync (#121649)

## Rename AsyncMethodKind enum values

Based on VSadov's proposal in the issue discussion:

- [x] Verify baseline build (CoreCLR) passes
- [x] Rename `AsyncMethodKind::NotAsync` to `AsyncMethodKind::Ordinary`
- [x] Rename `AsyncMethodKind::RuntimeAsync` to
`AsyncMethodKind::TaskReturningILAsync`
- [x] Convert enum to bitfield flags (`AsyncMethodFlags`)
- [x] Rename all `kind` variables/fields to `flags` for
`AsyncMethodFlags` type
- [x] Rename `hasAsyncKindFlags` to `hasAsyncFlags`
- [x] Update comments to reflect new naming
- [x] Fix typo in comment (representaton → representation)
- [x] Rename parameter `AsyncMethodFlags` → `asyncMethodFlags` (per
@jkotas suggestion)
- [x] Rename field `m_AsyncMethodFlags` → `m_asyncMethodFlags` (per
@jkotas suggestion)
- [x] Build CoreCLR with the changes - **PASSED**

### Latest changes:
- Renamed parameter `AsyncMethodFlags` to `asyncMethodFlags` in
bmtMDMethod constructor
- Renamed field `m_AsyncMethodFlags` to `m_asyncMethodFlags` (camelCase)

<!-- START COPILOT CODING AGENT SUFFIX -->



<details>

<summary>Original prompt</summary>


----

*This section details on the original issue you should resolve*

<issue_title>[Suggestion] Rename
AsyncMethodKind.TaskReturning</issue_title>
<issue_description>I got a bit confused by the naming and comments
[here](https://github.com/dotnet/runtime/blob/80dbb9f0579493dafc685f6cb99f12e58a8b9b0c/src/coreclr/vm/method.hpp#L73)

Hopefully I understand it correctly now, but if not please correct me.
It appears we are using the term ""Task Returning"" to mean different
things in different places:


[AsyncMethodKind.TaskReturning](https://github.com/dotnet/runtime/blob/80dbb9f0579493dafc685f6cb99f12e58a8b9b0c/src/coreclr/vm/method.hpp#L73)
- The MethodDesc variant whose entrypoint returns a task and it
corresponds to a C# method not marked with the MethodImpl::Async
attribute.
[// Task-returning
methods](https://github.com/dotnet/runtime/blob/80dbb9f0579493dafc685f6cb99f12e58a8b9b0c/src/coreclr/vm/method.hpp#L75)
- Any C# method returning a Task regardless if it has the
MethodImpl::Async attribute

I think if you renamed AsyncMethodKind.TaskReturning ->
AsyncMethodKind.CompilerAsync it would remove the naming collision and
it would also contrast nicely: RuntimeAsync vs CompilerAsync.
</issue_description>

<agent_instructions>Rename AsyncMethodKind::NotAsync to
AsyncMethodKind::Ordinary
Rename AsyncMethodKind::RuntimeAsync to
AsyncMethodKind::TaskReturningILAsync
Update corresponding comments</agent_instructions>

## Comments on the Issue (you are @copilot in this section)

<comments>
<comment_new><author>@jakobbotsch</author><body>
> I think if you renamed AsyncMethodKind.TaskReturning ->
AsyncMethodKind.CompilerAsync it would remove the naming collision and
it would also contrast nicely: RuntimeAsync vs CompilerAsync.

Compiler async is quite confusing to me, since in the context of the
runtime/VM the only compiler I see is the JIT/interpreter's compiler.
But IIUC, here it would refer to something that originally produced the
IL that we are seeing? Such a compiler doesn't even need to exist.

Originally these were the names:

https://github.com/dotnet/runtimelab/blame/d95f6eadeeb696071635d9662fbe33f8a0e0d645/src/coreclr/vm/method.hpp#L58-L64

I quite liked those names, but the enum grew and things changed so it
wouldn't really map anymore.</body></comment_new>
<comment_new><author>@VSadov</author><body>
>
[AsyncMethodKind.TaskReturning](https://github.com/dotnet/runtime/blob/80dbb9f0579493dafc685f6cb99f12e58a8b9b0c/src/coreclr/vm/method.hpp#L73)
- The MethodDesc variant whose entrypoint returns a task and it
corresponds to a C# method marked with the MethodImpl::Async attribute.

No. `AsyncMethodKind.TaskReturning` is a method that returns `Task`,
`ValueTask` or generic version of that and the method's definition in
metadata is _NOT_ marked as `MethodImpl::Async`

Basically, these methoddescs represent ordinary Task-returning methods.
The IL may contain a state machine produced by C#/VB/?? or may contain
whatever else code.

The IL for these methods is compiled as-is. To participate in runtime
async such methods get paired with a thunk that has runtime-async
calling convention.

I think `TaskReturning` is appropriate as the part that they return
tasks is what makes them special, while `NotAsync` are not special at
all. </body></comment_new>
<comment_new><author>@VSadov</author><body>
Perhaps it is `NotAsync` that is confusing and should be called
something else. `NotAsync` is for ordinary methods not interesting to
runtime async in any way.
`Ordinary` could probably be a better name, but I think we have other
classifications that use `Ordinary` so it may be confusing that these
are also ordinary but in async sense.</body></comment_new>
<comment_new><author>@noahfalk</author><body>
>No. AsyncMethodKind.TaskReturning is a method that returns Task,
ValueTask or generic version of that and the method's definition in
metadata is NOT marked as MethodImpl::Async

Oops I had the right idea in my head but then still wrote the wrong
text. I stink. I edited it in the original post so hopefully its correct
now.

> I think TaskReturning is appropriate as the part that they return
tasks is what makes them special, while NotAsync are not special at all.

The key thing that I am suggesting we fix is that ""TaskReturning"" should
have only one definition. I discovered [this
function]((https://github.com/dotnet/runtime/blob/51368d6a06ba18b237f7c304a781c51ac78a3c5d/src/coreclr/vm/method.hpp#L1918C1-L1926C6))
which I think really exemplifies it:

```
    inline bool IsTaskReturningMethod() const
    {
        ...
        return asyncKind == AsyncMethodKind::RuntimeAsync ||
            asyncKind == AsyncMethodKind::TaskReturning;
    }
```

The meaning of ""TaskReturning"" in the method name isn't the same as the
meaning of ""TaskReturning"" in the enum value. Right now
AsyncMethodKind::RuntimeAsync is task-returning
(IsTaskReturningMethod()==true) and also isn't task-returning (asyncKind
!= AsyncMethodKind::TaskReturning).

IMO ...

</details>

- Fixes dotnet/runtime#119565

<!-- START COPILOT CODING AGENT TIPS -->
---

💡 You can make Copilot smarter by setting up custom instructions,
customizing its development environment and configuring Model Context
Protocol (MCP) servers. Learn more [Copilot coding agent
tips](https://gh.io/copilot-coding-agent-tips) in the docs.

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: VSadov <8218165+VSadov@users.noreply.github.com>
Co-authored-by: Vladimir Sadov <vsadov@microsoft.com>
Co-authored-by: Jan Kotas <jkotas@microsoft.com>",4,80,8,do not ignore classloader::resolvetokentotypedefthrowing return values (issue_ref)resolvetokentotypedefthrowing can return false in some situations whenthe token cannot be resolved. the calling code has to deal with thesituation gracefully since the [out] arguments are not initialized inthat case.regressions introduced by issue_ref (method.cpp) and issue_ref(methodtablebuilder.cpp)fixes issue_ref
dotnet/runtime,e1a5627c1e77de699dafafb615d9524afb11d3d0,Change boundary condition for Windows PQC presence,2025-11-26 02:03:28+00:00,Jeremy Barton,1,cc42f216b4a37c2a9ee2e4422a31ae14d272b1eb,"Fix Windows PQC version boundary

PQC was backported to 24H2, and CI picked that up in Windows update, so our version boundary test is failing. This adjusts the test to the correct version boundary.",3,4,5,change boundary condition for windows pqc presence
dotnet/runtime,3266d23362c3862c4d44d001534a55367b4153f2,Remove `<Optimize>True</Optimize>` from src/tests/async project files (#121945),2025-11-26 07:24:32+00:00,Copilot,0,,,42,0,102,remove from src/tests/async project files (issue_ref)
dotnet/runtime,d23cb6751b8ced826b770ba01ff7d7b148e40b0d,"Run async testing on x86 (#121970)

The fix presumably merged in #121941.

Cc @dotnet/ilc-contrib",2025-11-26 07:25:53+00:00,Michal Strehovský,1,59a29ee6827ba65477dc8b06132697258ef9c58f,"Update issue number for async testing on arm64 (#122008)

This one is also presumably fixed.

Cc @dotnet/ilc-contrib",1,0,3,run async testing on x86 (issue_ref)the fix presumably merged in issue_ref.cc @dotnet/ilc-contrib
dotnet/runtime,cd847a60819f6d2d6481e3902a9c265535f3a1a8,"Use new JIT helpers for instantiating and continuation thunks (#121952)

Takes advantage of the new functionality added in #121799.",2025-11-26 07:27:54+00:00,Michal Strehovský,1,ffb52e90d9aaf5c1f53807f1d2eda0f07b9f8ca4,"Optimize stackalloc zeroing on arm64 via STORE_BLK (#121986)

Enable X64's optimization where we clear LCLHEAP via STORE_BLK inserted
in Lower on arm64.

```cs
static void Test128() => Consume(stackalloc char[128]);
```
was:
```asm
            stp     xzr, xzr, [sp, #-0x10]!
            stp     xzr, xzr, [sp, #-0xF0]!
            stp     xzr, xzr, [sp, #0x10]
            stp     xzr, xzr, [sp, #0x20]
            stp     xzr, xzr, [sp, #0x30]
            stp     xzr, xzr, [sp, #0x40]
            stp     xzr, xzr, [sp, #0x50]
            stp     xzr, xzr, [sp, #0x60]
            stp     xzr, xzr, [sp, #0x70]
            stp     xzr, xzr, [sp, #0x80]
            stp     xzr, xzr, [sp, #0x90]
            stp     xzr, xzr, [sp, #0xA0]
            stp     xzr, xzr, [sp, #0xB0]
            stp     xzr, xzr, [sp, #0xC0]
            stp     xzr, xzr, [sp, #0xD0]
            stp     xzr, xzr, [sp, #0xE0]
```
now:
```asm
            movi    v16.16b, #0
            stp     q16, q16, [x0]
            stp     q16, q16, [x0, #0x20]
            stp     q16, q16, [x0, #0x40]
            stp     q16, q16, [x0, #0x60]
            stp     q16, q16, [x0, #0x80]
            stp     q16, q16, [x0, #0xA0]
            stp     q16, q16, [x0, #0xC0]
            stp     q16, q16, [x0, #0xE0]
```

Also, for larger sizes the previous logic used to emit a slow loop (e.g.
1024 bytes):
```asm
            mov     w0, #0x400
G_M30953_IG03:
            stp     xzr, xzr, [sp, #-0x10]!
            subs    x0, x0, #16
            bne     G_M30953_IG03
```
Now it will emit a call to `CORINFO_HELP_MEMZERO`


[Benchmarks.](https://github.com/EgorBot/runtime-utils/issues/553)

```cs
using System.Runtime.CompilerServices;
using BenchmarkDotNet.Attributes;

public class Benchmarks
{
    [Benchmark] public void Stackalloc64() => Consume(stackalloc byte[64]);
    [Benchmark] public void Stackalloc128() => Consume(stackalloc byte[128]);
    [Benchmark] public void Stackalloc256() => Consume(stackalloc byte[256]);
    [Benchmark] public void Stackalloc512() => Consume(stackalloc byte[512]);
    [Benchmark] public void Stackalloc1024() => Consume(stackalloc byte[1024]);
    [Benchmark] public void Stackalloc16384() => Consume(stackalloc byte[16384]);

    [MethodImpl(MethodImplOptions.NoInlining)]
    static void Consume(Span<byte> x){}
}
```

| Method | Toolchain | Mean | Error | Ratio |
|---------------- |------------------------
|-----------:|----------:|------:|
| Stackalloc64    | Main |   3.425 ns | 0.0004 ns |  1.00 |
| Stackalloc64    | PR |   2.559 ns | 0.0008 ns |  0.75 |
| | | | | |
| Stackalloc128   | Main |   3.999 ns | 0.0002 ns |  1.00 |
| Stackalloc128   | PR |   2.404 ns | 0.0003 ns |  0.60 |
| | | | | |
| Stackalloc256   | Main |   5.431 ns | 0.0005 ns |  1.00 |
| Stackalloc256   | PR |   2.754 ns | 0.0003 ns |  0.51 |
| | | | | |
| Stackalloc512   | Main |  12.661 ns | 0.2744 ns |  1.00 |
| Stackalloc512   | PR |   7.423 ns | 0.0008 ns |  0.59 |
| | | | | |
| Stackalloc1024  | Main |  24.958 ns | 0.5326 ns |  1.00 |
| Stackalloc1024  | PR |  14.031 ns | 0.0040 ns |  0.56 |
| | | | | |
| Stackalloc16384 | Main | 374.899 ns | 0.0130 ns |  1.00 |
| Stackalloc16384 | PR | 111.029 ns | 1.2123 ns |  0.30 |

---------

Co-authored-by: Jakob Botsch Nielsen <Jakob.botsch.nielsen@gmail.com>",10,33,464,use new jit helpers for instantiating and continuation thunks (issue_ref)takes advantage of the new functionality added in issue_ref.
dotnet/runtime,d345fb2637bdfe996993b4371fe3b56e909c9930,"Move fuzzing corpora to runtime-assets (#121950)

This PR addresses VMR build failres where a task checks for presence of
binary files in the repo. See
https://github.com/dotnet/runtime/pull/121019#issuecomment-3571093097
for more context.",2025-11-26 10:43:35+00:00,Radek Zikmund,0,,,18,7,3,move fuzzing corpora to runtime-assets (issue_ref)this pr addresses vmr build failres where a task checks for presence ofbinary files in the repo. see#issuecomment-3571093097for more context.
dotnet/runtime,80f1fae9886966b949b5f1f0295009b5a50ee13d,[browser][mono] ST build is always sidecar on a worker (#121879),2025-11-26 13:01:55+00:00,Pavel Savara,0,,,1,4,2,[browser][mono] st build is always sidecar on a worker (issue_ref)
dotnet/runtime,eeaef45074f577f35bfd1b6b02a029d4053a9683,"[Android] Remove gRPC client tests (#121953)

This PR reverts changes from
https://github.com/dotnet/runtime/pull/73060

The Android gRPC pipeline has been failing for a while and does not
currently serve any purpose. We need to revisit the need for this test.
For the time being, let's remove this code from the repo.

/cc @tommcdon",2025-11-26 13:53:53+00:00,Šimon Rozsíval,1,91509b18c76703637d88a21405b8033804ec6f86,"Fix native AOT outerloops (#122213)

We're now getting a linker crash.",35,5,2179,"[android] remove grpc client tests (issue_ref)this pr reverts changes fromthe android grpc pipeline has been failing for a while and does notcurrently serve any purpose. we need to revisit the need for this test.for the time being, let's remove this code from the repo./cc @tommcdon"
dotnet/runtime,4b8a655e953d5bc4f205bc74af5b207f6fa49157,"Breaking change doc tool (#120987)

This adds a workflow to run a script when a PR is labeled as
`needs-breaking-change-doc-created`,

The script collects details about the PR, the breaking change issue
template, and sample issues then asks an LLM to generate an issue based
on that.

The issue content is then encoded into a clickable link which is then
added as a comment to the PR.

I'm doing this from a dotnet branch so that I can hopefully create a PR
off of it to demonstrate the workflow in action.",2025-11-26 20:08:25+00:00,Eric StJohn,0,,,4,1508,0,"breaking change doc tool (issue_ref)this adds a workflow to run a script when a pr is labeled as,the script collects details about the pr, the breaking change issuetemplate, and sample issues then asks an llm to generate an issue basedon that.the issue content is then encoded into a clickable link which is thenadded as a comment to the pr.i'm doing this from a dotnet branch so that i can hopefully create a proff of it to demonstrate the workflow in action."
dotnet/runtime,8bfc1051dfcdbb596311ac6178444cbe0cb5882b,"Reenable tests for interpreter (#121978)

This change reenables tests that were formerly causing crashes or hangs
of whole coreclr test suites and now work fine.

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-11-26 21:28:50+00:00,Jan Vorlicek,0,,,36,0,44,reenable tests for interpreter (issue_ref)this change reenables tests that were formerly causing crashes or hangsof whole coreclr test suites and now work fine.---------
dotnet/runtime,3b3270b7ae43b9564064c0c366a6539184b724b1,[RyuJIT Wasm] Implement i64/f32/f64 loads and adds (#121933),2025-11-26 22:06:27+00:00,Katelyn Gadd,1,b54c5d53ca8208e9bb5c95a2fbbd27f30df09b9d,"[Wasm RyuJit] Add binary operation implementations to codegenwasm.cpp (#122119)

- [x] Add overflow checks for integer arithmetic operations (GT_ADD,
GT_SUB, GT_MUL only)
- [x] Remove overflow checks from GT_DIV and GT_MOD
- [x] Separate shift/rotate operations into genCodeForShiftOrRotate
- [x] Add TODO comment for shift/rotate operand extension
- [x] Verify changes compile successfully

## Changes Made

### Latest Update
Added TODO-WASM comment in `genCodeForShiftOrRotate` documenting the
need to zero-extend the 2nd operand for shifts and rotates when the 1st
and 2nd operands have different types. This addresses SingleAccretion's
feedback about the shift operand width requirements.

### Previous Updates
- Created `CodeGen::genCodeForShiftOrRotate` with same structure as
`genCodeForBinary`
- Moved GT_LSH, GT_RSH, GT_RSZ, GT_ROL, GT_ROR cases from
`genCodeForBinary`
- Added `#ifdef TARGET_WASM` declaration in `codegen.h`
- Updated `genCodeForTreeNode` to route shifts to the new function
- Added `treeNode->gtOverflow()` checks for GT_ADD, GT_SUB, and GT_MUL
- Removed overflow checks from GT_DIV and GT_MOD (they have
divide-by-zero semantics instead)

- Fixes dotnet/runtime#122118

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: kg <198130+kg@users.noreply.github.com>",6,108,48,[ryujit wasm] implement i64/f32/f64 loads and adds (issue_ref)
dotnet/runtime,9ec871157bc4a11970203ed52cbeaa7bc1b33c98,"Refactor `DbgTransportTarget` usage to eliminate dynamic allocation. (#122011)

Remove unused interface and header.",2025-11-27 03:10:33+00:00,Aaron R Robinson,0,,,7,8,42,refactor usage to eliminate dynamic allocation. (issue_ref)remove unused interface and header.
dotnet/runtime,8c2b75fdc4f042d8c22264a2e7cb7f6471d2a3a7,"Rename AsyncMethodKind enum values: NotAsync→Ordinary, RuntimeAsync→TaskReturningILAsync (#121649)

## Rename AsyncMethodKind enum values

Based on VSadov's proposal in the issue discussion:

- [x] Verify baseline build (CoreCLR) passes
- [x] Rename `AsyncMethodKind::NotAsync` to `AsyncMethodKind::Ordinary`
- [x] Rename `AsyncMethodKind::RuntimeAsync` to
`AsyncMethodKind::TaskReturningILAsync`
- [x] Convert enum to bitfield flags (`AsyncMethodFlags`)
- [x] Rename all `kind` variables/fields to `flags` for
`AsyncMethodFlags` type
- [x] Rename `hasAsyncKindFlags` to `hasAsyncFlags`
- [x] Update comments to reflect new naming
- [x] Fix typo in comment (representaton → representation)
- [x] Rename parameter `AsyncMethodFlags` → `asyncMethodFlags` (per
@jkotas suggestion)
- [x] Rename field `m_AsyncMethodFlags` → `m_asyncMethodFlags` (per
@jkotas suggestion)
- [x] Build CoreCLR with the changes - **PASSED**

### Latest changes:
- Renamed parameter `AsyncMethodFlags` to `asyncMethodFlags` in
bmtMDMethod constructor
- Renamed field `m_AsyncMethodFlags` to `m_asyncMethodFlags` (camelCase)

<!-- START COPILOT CODING AGENT SUFFIX -->



<details>

<summary>Original prompt</summary>


----

*This section details on the original issue you should resolve*

<issue_title>[Suggestion] Rename
AsyncMethodKind.TaskReturning</issue_title>
<issue_description>I got a bit confused by the naming and comments
[here](https://github.com/dotnet/runtime/blob/80dbb9f0579493dafc685f6cb99f12e58a8b9b0c/src/coreclr/vm/method.hpp#L73)

Hopefully I understand it correctly now, but if not please correct me.
It appears we are using the term ""Task Returning"" to mean different
things in different places:


[AsyncMethodKind.TaskReturning](https://github.com/dotnet/runtime/blob/80dbb9f0579493dafc685f6cb99f12e58a8b9b0c/src/coreclr/vm/method.hpp#L73)
- The MethodDesc variant whose entrypoint returns a task and it
corresponds to a C# method not marked with the MethodImpl::Async
attribute.
[// Task-returning
methods](https://github.com/dotnet/runtime/blob/80dbb9f0579493dafc685f6cb99f12e58a8b9b0c/src/coreclr/vm/method.hpp#L75)
- Any C# method returning a Task regardless if it has the
MethodImpl::Async attribute

I think if you renamed AsyncMethodKind.TaskReturning ->
AsyncMethodKind.CompilerAsync it would remove the naming collision and
it would also contrast nicely: RuntimeAsync vs CompilerAsync.
</issue_description>

<agent_instructions>Rename AsyncMethodKind::NotAsync to
AsyncMethodKind::Ordinary
Rename AsyncMethodKind::RuntimeAsync to
AsyncMethodKind::TaskReturningILAsync
Update corresponding comments</agent_instructions>

## Comments on the Issue (you are @copilot in this section)

<comments>
<comment_new><author>@jakobbotsch</author><body>
> I think if you renamed AsyncMethodKind.TaskReturning ->
AsyncMethodKind.CompilerAsync it would remove the naming collision and
it would also contrast nicely: RuntimeAsync vs CompilerAsync.

Compiler async is quite confusing to me, since in the context of the
runtime/VM the only compiler I see is the JIT/interpreter's compiler.
But IIUC, here it would refer to something that originally produced the
IL that we are seeing? Such a compiler doesn't even need to exist.

Originally these were the names:

https://github.com/dotnet/runtimelab/blame/d95f6eadeeb696071635d9662fbe33f8a0e0d645/src/coreclr/vm/method.hpp#L58-L64

I quite liked those names, but the enum grew and things changed so it
wouldn't really map anymore.</body></comment_new>
<comment_new><author>@VSadov</author><body>
>
[AsyncMethodKind.TaskReturning](https://github.com/dotnet/runtime/blob/80dbb9f0579493dafc685f6cb99f12e58a8b9b0c/src/coreclr/vm/method.hpp#L73)
- The MethodDesc variant whose entrypoint returns a task and it
corresponds to a C# method marked with the MethodImpl::Async attribute.

No. `AsyncMethodKind.TaskReturning` is a method that returns `Task`,
`ValueTask` or generic version of that and the method's definition in
metadata is _NOT_ marked as `MethodImpl::Async`

Basically, these methoddescs represent ordinary Task-returning methods.
The IL may contain a state machine produced by C#/VB/?? or may contain
whatever else code.

The IL for these methods is compiled as-is. To participate in runtime
async such methods get paired with a thunk that has runtime-async
calling convention.

I think `TaskReturning` is appropriate as the part that they return
tasks is what makes them special, while `NotAsync` are not special at
all. </body></comment_new>
<comment_new><author>@VSadov</author><body>
Perhaps it is `NotAsync` that is confusing and should be called
something else. `NotAsync` is for ordinary methods not interesting to
runtime async in any way.
`Ordinary` could probably be a better name, but I think we have other
classifications that use `Ordinary` so it may be confusing that these
are also ordinary but in async sense.</body></comment_new>
<comment_new><author>@noahfalk</author><body>
>No. AsyncMethodKind.TaskReturning is a method that returns Task,
ValueTask or generic version of that and the method's definition in
metadata is NOT marked as MethodImpl::Async

Oops I had the right idea in my head but then still wrote the wrong
text. I stink. I edited it in the original post so hopefully its correct
now.

> I think TaskReturning is appropriate as the part that they return
tasks is what makes them special, while NotAsync are not special at all.

The key thing that I am suggesting we fix is that ""TaskReturning"" should
have only one definition. I discovered [this
function]((https://github.com/dotnet/runtime/blob/51368d6a06ba18b237f7c304a781c51ac78a3c5d/src/coreclr/vm/method.hpp#L1918C1-L1926C6))
which I think really exemplifies it:

```
    inline bool IsTaskReturningMethod() const
    {
        ...
        return asyncKind == AsyncMethodKind::RuntimeAsync ||
            asyncKind == AsyncMethodKind::TaskReturning;
    }
```

The meaning of ""TaskReturning"" in the method name isn't the same as the
meaning of ""TaskReturning"" in the enum value. Right now
AsyncMethodKind::RuntimeAsync is task-returning
(IsTaskReturningMethod()==true) and also isn't task-returning (asyncKind
!= AsyncMethodKind::TaskReturning).

IMO ...

</details>

- Fixes dotnet/runtime#119565

<!-- START COPILOT CODING AGENT TIPS -->
---

💡 You can make Copilot smarter by setting up custom instructions,
customizing its development environment and configuring Model Context
Protocol (MCP) servers. Learn more [Copilot coding agent
tips](https://gh.io/copilot-coding-agent-tips) in the docs.

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: VSadov <8218165+VSadov@users.noreply.github.com>
Co-authored-by: Vladimir Sadov <vsadov@microsoft.com>
Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-11-27 03:13:12+00:00,Copilot,1,487ff1b1c56f5fffd739e70fef603b1dfb62758d,"[wasm][coreclr] Fix methodesc reset for dynamic methods (#122444)

Fix https://github.com/dotnet/runtime/issues/122419

Make sure we don't enter the branch for rental methods in other cases
when using portable entrypoints.

The rental methods are obsolete, so the whole branch is removed.",9,169,132,"rename asyncmethodkind enum values: notasync→ordinary, runtimeasync→taskreturningilasync (issue_ref)## rename asyncmethodkind enum valuesbased on vsadov's proposal in the issue discussion:- [x] verify baseline build (coreclr) passes- [x] rename to - [x] rename to- [x] convert enum to bitfield flags ()- [x] rename all variables/fields to for type- [x] rename to - [x] update comments to reflect new naming- [x] fix typo in comment (representaton → representation)- [x] rename parameter → (per@jkotas suggestion)- [x] rename field → (per@jkotas suggestion)- [x] build coreclr with the changes - **passed**### latest changes:- renamed parameter to inbmtmdmethod constructor- renamed field to (camelcase)<!-- start copilot coding agent suffix --><details><summary>original prompt</summary>----*this section details on the original issue you should resolve*<issue_title>[suggestion] renameasyncmethodkind.taskreturning</issue_title><issue_description>i got a bit confused by the naming and comments[here](#l73)hopefully i understand it correctly now, but if not please correct me.it appears we are using the term ""task returning"" to mean differentthings in different places:[asyncmethodkind.taskreturning](#l73)- the methoddesc variant whose entrypoint returns a task and itcorresponds to a c# method not marked with the methodimpl::asyncattribute.[// task-returningmethods](#l75)- any c# method returning a task regardless if it has themethodimpl::async attributei think if you renamed asyncmethodkind.taskreturning ->asyncmethodkind.compilerasync it would remove the naming collision andit would also contrast nicely: runtimeasync vs compilerasync.</issue_description><agent_instructions>rename asyncmethodkind::notasync toasyncmethodkind::ordinaryrename asyncmethodkind::runtimeasync toasyncmethodkind::taskreturningilasyncupdate corresponding comments</agent_instructions>## comments on the issue (you are @copilot in this section)<comments>> i think if you renamed asyncmethodkind.taskreturning ->asyncmethodkind.compilerasync it would remove the naming collision andit would also contrast nicely: runtimeasync vs compilerasync.compiler async is quite confusing to me, since in the context of theruntime/vm the only compiler i see is the jit/interpreter's compiler.but iiuc, here it would refer to something that originally produced theil that we are seeing? such a compiler doesn't even need to exist.originally these were the names:#l58-l64i quite liked those names, but the enum grew and things changed so itwouldn't really map anymore.</body></comment_new>>[asyncmethodkind.taskreturning](#l73)- the methoddesc variant whose entrypoint returns a task and itcorresponds to a c# method marked with the methodimpl::async attribute.no. is a method that returns , or generic version of that and the method's definition inmetadata is _not_ marked as basically, these methoddescs represent ordinary task-returning methods.the il may contain a state machine produced by c#/vb/?? or may containwhatever else code.the il for these methods is compiled as-is. to participate in runtimeasync such methods get paired with a thunk that has runtime-asynccalling convention.i think is appropriate as the part that they returntasks is what makes them special, while are not special atall. </body></comment_new>perhaps it is that is confusing and should be calledsomething else. is for ordinary methods not interesting toruntime async in any way. could probably be a better name, but i think we have otherclassifications that use so it may be confusing that theseare also ordinary but in async sense.</body></comment_new>>no. asyncmethodkind.taskreturning is a method that returns task,valuetask or generic version of that and the method's definition inmetadata is not marked as methodimpl::asyncoops i had the right idea in my head but then still wrote the wrongtext. i stink. i edited it in the original post so hopefully its correctnow.> i think taskreturning is appropriate as the part that they returntasks is what makes them special, while notasync are not special at all.the key thing that i am suggesting we fix is that ""taskreturning"" shouldhave only one definition. i discovered [thisfunction]((#l1918c1-l1926c6))which i think really exemplifies it:the meaning of ""taskreturning"" in the method name isn't the same as themeaning of ""taskreturning"" in the enum value. right nowasyncmethodkind::runtimeasync is task-returning(istaskreturningmethod()==true) and also isn't task-returning (asynckind!= asyncmethodkind::taskreturning).imo ...</details>- fixes dotnet/runtimeissue_ref<!-- start copilot coding agent tips -->---💡 you can make copilot smarter by setting up custom instructions,customizing its development environment and configuring model contextprotocol (mcp) servers. learn more [copilot coding agenttips]( in the docs.---------"
dotnet/runtime,7da7284e00ad1dfcd5582035a3bf72ce07109578,"Add System.Net.Mime.MediaTypeMap (#121776)

Closes https://github.com/dotnet/runtime/issues/121017",2025-11-27 06:33:09+00:00,Stephen Toub,0,,,5,1068,0,add system.net.mime.mediatypemap (issue_ref)closes
dotnet/runtime,39ad1124b5539f1068418a4350208c806c3d7cee,"Fix access flags passed to getFieldInfo in interpreter (#122009)

The interpreter compiler incorrectly passes CORINFO_ACCESS_GET to the
getFieldInfo for CEE_STSFLD and CEE_STFLD opcodes. That causes failure
in one of the libraries tests that initializes
BitConverter.IsLittleEndian field.

This change puts in the correct CORINFO_ACCESS_SET flag.",2025-11-27 09:26:30+00:00,Jan Vorlicek,1,561639700f5bd5ad497c8d26529d512bb593f753,"Fix interpreter delegate args alignment (#122163)

The recent fix to handle alignment of the first argument of a delegate
call when we were removing the delegate obj from the stack was not
complete. It only handled the case when the first argument required 16
byte alignment. But the same issue exists if any of the args requires
this alignment.

This change fixes it by finding the first argument that requires 16 byte
alignment and then moving the args before that as usual and moving that
arg and all following ones to 16 byte aligned location. This preserves
the alignment for the rest of the stuff too.

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",1,2,2,fix access flags passed to getfieldinfo in interpreter (issue_ref)the interpreter compiler incorrectly passes corinfo_access_get to thegetfieldinfo for cee_stsfld and cee_stfld opcodes. that causes failurein one of the libraries tests that initializesbitconverter.islittleendian field.this change puts in the correct corinfo_access_set flag.
dotnet/runtime,80d343486d8db539ad204cfb0a2eac55ae4f8d98,"Stop spilling ldvirtftn (#120866)

This PR stops spilling the target for calls implemented via `ldvirtftn` in the
importer, which is the way we implement GVMs. We were previously spilling the
target with `CHECK_SPILL_NONE`, but this is incorrect because it induces a null
check (see #121711). So this PR fixes that issue. Also, avoiding the spill gives
us a simple uncontroversial way to devirtualize in some cases when we can
extract information directly from `gtCallAddr`.

The problem with removing the spill is code size regressions. `gtCallAddr` is
normally evaluated after arguments, and the backend is not good at handling the
ABI constraints of the arguments when `gtCallAddr` contains calls. To counteract
that we introduce a new optimize in lowering. The optimization tries to move the
evaluation of the target to happen before the arguments. It effectively
accomplishes what the previous `CHECK_SPILL_NONE` spill was doing, except with
the right legality checks.


Contributes to #112596

Fixes #121711

---------

Co-authored-by: Jakob Botsch Nielsen <jakob.botsch.nielsen@gmail.com>",2025-11-27 11:25:03+00:00,Steve,1,d3711c2edd633986bd9659013dfdd30534ee9d36,"Allow type loading when merging array types (#122121)

If the runtime is merging two array types, the merged type may be one
that is not yet loaded. Allow the runtime to load the type.

Fixes #120903.",6,208,9,"stop spilling ldvirtftn (issue_ref)this pr stops spilling the target for calls implemented via in theimporter, which is the way we implement gvms. we were previously spilling thetarget with , but this is incorrect because it induces a nullcheck (see issue_ref). so this pr fixes that issue. also, avoiding the spill givesus a simple uncontroversial way to devirtualize in some cases when we canextract information directly from .the problem with removing the spill is code size regressions. isnormally evaluated after arguments, and the backend is not good at handling theabi constraints of the arguments when contains calls. to counteractthat we introduce a new optimize in lowering. the optimization tries to move theevaluation of the target to happen before the arguments. it effectivelyaccomplishes what the previous spill was doing, except withthe right legality checks.contributes to issue_reffixes issue_ref---------"
dotnet/runtime,805ac0b1795274fc83473839b7ac23b6047b9a76,"Remove localization support for native resource (#122025)

If we ever want to bring back the localization, we should be depending
on MUI or other solutions.",2025-11-28 06:29:42+00:00,Huo Yaoyuan,0,,,6,25,652,"remove localization support for native resource (issue_ref)if we ever want to bring back the localization, we should be dependingon mui or other solutions."
dotnet/runtime,fbe7c396fcf807c5d41d1c97045ace09b02d9119,[browser] Add DiagnosticPorts to DOTNET_DiagnosticPorts environment variable (#122019),2025-11-28 09:49:55+00:00,Marek Fišera,0,,,2,12,0,[browser] add diagnosticports to dotnet_diagnosticports environment variable (issue_ref)
dotnet/runtime,eaafd7c38c9707a61cf0cf8582aeac9e52b60b31,"Move default build images to macos 15 (and xcode 16) (#120589)

Co-authored-by: Eric StJohn <ericstj@microsoft.com>
Co-authored-by: Matous Kozak <matouskozak@seznam.cz>",2025-11-28 12:01:45+00:00,Andy Gocke,0,,,3,26,13,move default build images to macos 15 (and xcode 16) (issue_ref)
dotnet/runtime,2e0cb6b85630122e4d4c9fdfb78d7a002f7154b3,"Improve exception message when passing directory to ZipFile methods (#121917)

Fixes an issue where passing a directory path to `ZipFile` methods
resulted in an unclear `UnauthorizedAccessException` without explaining
that the problem was passing a directory instead of a file.

Modified `GetFileStreamForOpen()` to catch `UnauthorizedAccessException`
when `FileStream` fails to open a directory, and re-throw with a clearer
error message that explicitly states the path is a directory.

Fixes #100720

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-11-28 14:21:36+00:00,Irem Yuksel,1,2a92fc1a0303b0dc975bcbeba7164f8d1ea90718,"Fix async ZipArchive calling non-async Stream methods (#121938)

Fixes https://github.com/dotnet/runtime/issues/121624
Supersedes https://github.com/dotnet/runtime/pull/121633

Note: this could be classed as a breaking change, as an exception that
was thrown on accessing `.Entries` is now thrown from `CreateAsync`
(although this is the approved API shape
https://github.com/dotnet/runtime/issues/1541#issuecomment-2715269236).
The `ZipArchive_InvalidEntryTable` and `ZipFile_Open.InvalidFilesAsync`
tests have been updated to reflect this.",4,45,1,"improve exception message when passing directory to zipfile methods (issue_ref)fixes an issue where passing a directory path to methodsresulted in an unclear without explainingthat the problem was passing a directory instead of a file.modified to catch when fails to open a directory, and re-throw with a clearererror message that explicitly states the path is a directory.fixes issue_ref---------"
dotnet/runtime,9e9eb9b3ff6efbe0ee5cbdd03a39cb7cef595311,Simplify InitializeUri and remove some unreachable branches (#122001),2025-11-28 15:03:23+00:00,Miha Zupan,0,,,3,118,167,simplify initializeuri and remove some unreachable branches (issue_ref)
dotnet/runtime,7ff108276e94068d5935d4ed273cb3f387a4b550,"Replace DOTNET_SKIP_FIRST_TIME_EXPERIENCE with DOTNET_NOLOGO (#121326)

DOTNET_SKIP_FIRST_TIME_EXPERIENCE was completely removed in .NET Core
3.0 and DOTNET_NOLOGO was reintroduced as its replacement in .NET Core
3.1 to only suppress the First Time Use Experience message.

See
https://learn.microsoft.com/en-us/dotnet/core/tools/dotnet-environment-variables#dotnet_nologo",2025-11-28 21:56:58+00:00,xtqqczze,0,,,8,10,10,replace dotnet_skip_first_time_experience with dotnet_nologo (issue_ref)dotnet_skip_first_time_experience was completely removed in .net core3.0 and dotnet_nologo was reintroduced as its replacement in .net core3.1 to only suppress the first time use experience message.see#dotnet_nologo
dotnet/runtime,bae19aa52706642f806f7641c164e59ddc4700aa,"Fold Span.Slice(X) like bound checks (#122040)

[Diffs](https://dev.azure.com/dnceng-public/public/_build/results?buildId=1215131&view=ms.vss-build-web.run-extensions-tab).

```cs
    static Vector256<int> Test(Span<int> values)
    {
        if (values.Length < 16)
            return default;
        return Vector256.Create(values.Slice(8));
    }
```
Was:
```asm
; Method Program:Test(System.Span`1[int]):System.Runtime.Intrinsics.Vector256`1[int] (FullOpts)
       sub      rsp, 40
       mov      rax, bword ptr [rdx]
       mov      edx, dword ptr [rdx+0x08]
       cmp      edx, 16
       jl       SHORT G_M55981_IG04
       add      rax, 32
       add      edx, -8
       cmp      edx, 8
       jl       SHORT G_M55981_IG07
       vmovups  ymm0, ymmword ptr [rax]
       vmovups  ymmword ptr [rcx], ymm0
       jmp      SHORT G_M55981_IG05
G_M55981_IG04:
       vxorps   ymm0, ymm0, ymm0
       vmovups  ymmword ptr [rcx], ymm0
G_M55981_IG05:
       mov      rax, rcx
       vzeroupper 
       add      rsp, 40
       ret      
G_M55981_IG07:
       mov      ecx, 6
       call     [System.ThrowHelper:ThrowArgumentOutOfRangeException(int)]
       int3     
; Total bytes of code: 68
```
Now:
```asm
; Method Program:Test(System.Span`1[int]):System.Runtime.Intrinsics.Vector256`1[int] (FullOpts)
       mov      rax, bword ptr [rdx]
       mov      edx, dword ptr [rdx+0x08]
       cmp      edx, 16
       jl       SHORT G_M55981_IG04
       add      rax, 32
       vmovups  ymm0, ymmword ptr [rax]
       vmovups  ymmword ptr [rcx], ymm0
       jmp      SHORT G_M55981_IG05
G_M55981_IG04:
       vxorps   ymm0, ymm0, ymm0
       vmovups  ymmword ptr [rcx], ymm0
G_M55981_IG05:
       mov      rax, rcx
       vzeroupper 
       ret      
; Total bytes of code: 40
```",2025-11-29 17:02:28+00:00,Egor Bogatov,0,,,2,78,48,fold span.slice(x) like bound checks (issue_ref)[diffs](was:now:
dotnet/runtime,a3b39f589c1f44b0d46197b79a0966903557d295,"JIT: Improve interference checks for thrown exceptions and enable CSE/hoisting of GVM resolution helpers (#122017)

- Introduce `ExceptionSetFlags::UnknownException`. This special value
marks that an operation may throw an exception that we cannot say
anything about. Consumers of flags must be specially aware about this
exception type.
- Make `GenTree::OperExceptions` callable on all trees by changing
arbitrary user calls to return the new `UnknownException` type.
- Switch `OperMayThrow` to be literally `OperExceptions() != None`
- Enhance precision about exceptions thrown by helper calls. Instead of
just modelling ""may throw"" and ""may not throw"", we model the exact
exceptions a helper may throw via `ExceptionSetFlags`.
- Add helper call properties for `CORINFO_HELP_VIRTUAL_FUNC_PTR`,
`CORINFO_HELP_GVMLOOKUP_FOR_SLOT`,
`CORINFO_HELP_READYTORUN_VIRTUAL_FUNC_PTR`. These do not mutate the heap
and we use the new mechanism above to indicate that the only exception
they can throw is NRE. They are also pure, so add a VN function so VN
can model them. This allows us to CSE and hoist these helpers.
- Update `SideEffectSet` to track and precisely handle interference for
exceptions. We can now reorder two operations if we know they can only
throw the exact same exception.
- Generalize `OptimizeCallIndirectTargetEvaluation`; manual interference
handling is no longer necessary, and we can use it for all calls.

Example:
```csharp
public static void Test(Base b)
{
    b.Foo<string>();
    b.Foo<int>();
    b.Foo<string>();
    b.Foo<int>();

    for (int i = 0; i < 10; i++)
        b.Foo<double>();
}

public abstract class Base
{
    public abstract void Foo<T>();
}

public class Derived : Base
{
    public override void Foo<T>()
    {
    }
}
```

Before:
```asm
G_M7145_IG02:
       mov      rcx, rbx
       mov      rsi, 0xD1FFAB1E      ; Program+Base
       mov      rdx, rsi
       mov      r8, 0xD1FFAB1E      ; token handle
       call     CORINFO_HELP_VIRTUAL_FUNC_PTR
       mov      rcx, rbx
       call     rax
       mov      rcx, rbx
       mov      rdx, rsi
       mov      r8, 0xD1FFAB1E      ; token handle
       call     CORINFO_HELP_VIRTUAL_FUNC_PTR
       mov      rcx, rbx
       call     rax
       mov      rcx, rbx
       mov      rdx, rsi
       mov      r8, 0xD1FFAB1E      ; token handle
       call     CORINFO_HELP_VIRTUAL_FUNC_PTR
       mov      rcx, rbx
       call     rax
       mov      rcx, rbx
       mov      rdx, rsi
       mov      r8, 0xD1FFAB1E      ; token handle
       call     CORINFO_HELP_VIRTUAL_FUNC_PTR
       mov      rcx, rbx
       call     rax
       mov      edi, 10
						;; size=119 bbWeight=1 PerfScore 20.50
G_M7145_IG03:
       mov      rcx, rbx
       mov      rdx, rsi
       mov      r8, 0xD1FFAB1E      ; token handle
       call     CORINFO_HELP_VIRTUAL_FUNC_PTR
       mov      rcx, rbx
       call     rax
       dec      edi
       jne      SHORT G_M7145_IG03
						;; size=30 bbWeight=8 PerfScore 50.00
```

After:
```asm
G_M7145_IG02:
       mov      rcx, rbx
       mov      rsi, 0xD1FFAB1E      ; Program+Base
       mov      rdx, rsi
       mov      r8, 0xD1FFAB1E      ; token handle
       call     CORINFO_HELP_VIRTUAL_FUNC_PTR
       mov      rcx, rbx
       mov      rdi, rax
       call     rdi
       mov      rcx, rbx
       mov      rdx, rsi
       mov      r8, 0xD1FFAB1E      ; token handle
       call     CORINFO_HELP_VIRTUAL_FUNC_PTR
       mov      rcx, rbx
       mov      rbp, rax
       call     rbp
       mov      rcx, rbx
       call     rdi
       mov      rcx, rbx
       call     rbp
       mov      rcx, rbx
       mov      rdx, rsi
       mov      r8, 0xD1FFAB1E      ; token handle
       call     CORINFO_HELP_VIRTUAL_FUNC_PTR
       mov      rsi, rax
       mov      edi, 10
						;; size=107 bbWeight=1 PerfScore 19.50
G_M7145_IG03:
       mov      rcx, rbx
       call     rsi
       dec      edi
       jne      SHORT G_M7145_IG03
						;; size=9 bbWeight=8 PerfScore 36.00
```",2025-11-30 12:57:53+00:00,Jakob Botsch Nielsen,1,3f5df2f9ae4f04f2ce73382bb35a56a23a9f5320,arm64: Fix negs compare to minus int.MinValue (#121380),12,198,168,"jit: improve interference checks for thrown exceptions and enable cse/hoisting of gvm resolution helpers (issue_ref)- introduce . this special valuemarks that an operation may throw an exception that we cannot sayanything about. consumers of flags must be specially aware about thisexception type.- make callable on all trees by changingarbitrary user calls to return the new type.- switch to be literally - enhance precision about exceptions thrown by helper calls. instead ofjust modelling ""may throw"" and ""may not throw"", we model the exactexceptions a helper may throw via .- add helper call properties for ,,. these do not mutate the heapand we use the new mechanism above to indicate that the only exceptionthey can throw is nre. they are also pure, so add a vn function so vncan model them. this allows us to cse and hoist these helpers.- update to track and precisely handle interference forexceptions. we can now reorder two operations if we know they can onlythrow the exact same exception.- generalize ; manual interferencehandling is no longer necessary, and we can use it for all calls.example:before:after:"
dotnet/runtime,3b637728da9d5dc1dc625640bb5d7e436cf0f12a,Simplify Uri's CreateHelper (#122002),2025-11-30 17:51:59+00:00,Miha Zupan,0,,,1,23,30,simplify uri's createhelper (issue_ref)
dotnet/runtime,f84ba39d6ecf337e2c2ef721e38bb88f0ac2a5c0,"[cDAC] Update DebugInfo contract for new format (#121418)

* Add support for DebugInfo 2 contract
* Refactor DebugInfo contract",2025-12-01 14:52:35+00:00,Max Charlamb,0,,,8,277,90,[cdac] update debuginfo contract for new format (issue_ref)* add support for debuginfo 2 contract* refactor debuginfo contract
dotnet/runtime,d25c63d2d29abb04f46b1404c0b5e7fce02632a1,"[main] Update dependencies from dotnet/xharness (#120893)

This pull request updates the following dependencies

[marker]: <> (Begin:be30ac4f-4b72-4287-1eb6-08d8d8fef0ea)
## From https://github.com/dotnet/xharness
- **Subscription**:
[be30ac4f-4b72-4287-1eb6-08d8d8fef0ea](https://maestro.dot.net/subscriptions?search=be30ac4f-4b72-4287-1eb6-08d8d8fef0ea)
- **Build**:
[20251128.2](https://dev.azure.com/dnceng/internal/_build/results?buildId=2849520)
([292629](https://maestro.dot.net/channel/2/github:dotnet:xharness/build/292629))
- **Date Produced**: November 28, 2025 3:03:15 PM UTC
- **Commit**:
[e26a7b2ad453b6739b033b18d9f896ab2f112e36](https://github.com/dotnet/xharness/commit/e26a7b2ad453b6739b033b18d9f896ab2f112e36)
- **Branch**: [main](https://github.com/dotnet/xharness/tree/main)

[DependencyUpdate]: <> (Begin)

- **Dependency Updates**:
  - From [10.0.0-prerelease.25506.2 to 11.0.0-prerelease.25578.2][5]
     - Microsoft.DotNet.XHarness.CLI
     - Microsoft.DotNet.XHarness.TestRunners.Common
     - Microsoft.DotNet.XHarness.TestRunners.Xunit

[5]: https://github.com/dotnet/xharness/compare/5b5722171c...e26a7b2ad4

[DependencyUpdate]: <> (End)


[marker]: <> (End:be30ac4f-4b72-4287-1eb6-08d8d8fef0ea)

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-12-01 15:28:22+00:00,dotnet-maestro[bot],0,,,3,10,10,"[main] update dependencies from dotnet/xharness (issue_ref)this pull request updates the following dependencies[marker]: <> (begin:be30ac4f-4b72-4287-1eb6-08d8d8fef0ea)## from - **subscription**:[be30ac4f-4b72-4287-1eb6-08d8d8fef0ea](- **build**:[20251128.2](([292629](- **date produced**: november 28, 2025 3:03:15 pm utc- **commit**:[e26a7b2ad453b6739b033b18d9f896ab2f112e36](- **branch**: [main]([dependencyupdate]: <> (begin)- **dependency updates**: - from [10.0.0-prerelease.25506.2 to 11.0.0-prerelease.25578.2][5] - microsoft.dotnet.xharness.cli - microsoft.dotnet.xharness.testrunners.common - microsoft.dotnet.xharness.testrunners.xunit[5]: [dependencyupdate]: <> (end)[marker]: <> (end:be30ac4f-4b72-4287-1eb6-08d8d8fef0ea)---------"
dotnet/runtime,e1db3bb062cec3b259dc43a11f541c95d5cbd241,"[interp][coreclr] Fix virtual generic calls in interpreter (#122069)

Fix regression introduced in #121799

Force intrinsic expansion for new runtime helpers in the interpreter.

Added the new methods and also
`NI_System_StubHelpers_NextCallReturnAddress`, which has also `//
Unconditionally expanded intrinsic` comment.

This was happening on wasm and possibly on other platforms too,
resulting in unhandled exception. Possibly only on platforms, which use
generic instantiation IL stubs.

```
Unhandled exception. System.Diagnostics.UnreachableException: The program executed an instruction that was thought to be unreachable.
   at System.Runtime.CompilerServices.RuntimeHelpers.SetNextCallGenericContext(Void* value) in /Users/rodo/git/runtime-clean/src/libraries/System.Private.CoreLib/src/System/Runtime/CompilerServices/RuntimeHelpers.cs:line 186
   at InterpreterTest.TestVirtual() in /Users/rodo/git/runtime-clean/src/tests/JIT/interpreter/Interpreter.cs:line 1960
   at InterpreterTest.RunInterpreterTests() in /Users/rodo/git/runtime-clean/src/tests/JIT/interpreter/Interpreter.cs:line 896
   at InterpreterTest.Main(String[] args) in /Users/rodo/git/runtime-clean/src/tests/JIT/interpreter/Interpreter.cs:line 731
Aborted(native code called abort())
```",2025-12-01 15:55:05+00:00,Radek Doulik,1,8eb90a6dba628a6fbdc470277e64e4b9aa72994f,"[clr-interp] Add support for explicit this calli to a valuetype method (#122196)

- Fixes GitHub_35384
- Only required using the correct helper routines. The rest of the
implementation fell out from there",1,5,1,"[interp][coreclr] fix virtual generic calls in interpreter (issue_ref)fix regression introduced in issue_refforce intrinsic expansion for new runtime helpers in the interpreter.added the new methods and also, which has also comment.this was happening on wasm and possibly on other platforms too,resulting in unhandled exception. possibly only on platforms, which usegeneric instantiation il stubs."
dotnet/runtime,96b4bf98eac9d344cc725114d86af47f125476c8,"Runtime-async continuation object reading with Cordb (#121432)

This PR ensures that we are able to access continuation objects through
APIs such as CordbObjectValue::GetFieldValue. As the dynamically
generated continuation types with the local variable fields do not have
metadata, we use the parent class which does have metadata. We will
therefore not be able to view the locals fields through these APIs, but
with the low likelihood that someone is digging this deep into
implementation details, this should be an acceptable trade-off.",2025-12-01 17:58:21+00:00,Rachel,0,,,4,25,2,"runtime-async continuation object reading with cordb (issue_ref)this pr ensures that we are able to access continuation objects throughapis such as cordbobjectvalue::getfieldvalue. as the dynamicallygenerated continuation types with the local variable fields do not havemetadata, we use the parent class which does have metadata. we willtherefore not be able to view the locals fields through these apis, butwith the low likelihood that someone is digging this deep intoimplementation details, this should be an acceptable trade-off."
dotnet/runtime,28782ade331e95e6fde1d552aa195b499bcdf309,[crossgen2] Update minimum maccatalyst versions to 15.2 (#122010),2025-12-01 22:15:38+00:00,Milos Kotlar,0,,,2,2,2,[crossgen2] update minimum maccatalyst versions to 15.2 (issue_ref)
dotnet/runtime,e4f710ea155e1284744f622ee7bc70825f77ac09,"Refactor `GenTreeJitIntrinsic` to store the base type for SIMD operations as a `var_types`. (#121251)

This PR adjust `GenTreeJitIntrinsic` to save the base type of SIMD
operation as a `var_types` and not `CorInfoType`. This is done to allow
SIMD operations on types that are not part of the CIL.

Some notes on the changes:

1. `simdBaseJitType` has been renamed to `simdBaseType` and most flows
that previous had both a `simdBaseJitType` and `simdBaseType` now only
use the `simdBaseType`.
2. `simdBaseType` should now refer to the type returned via
`JitType2PreciseVarType`.
3. Some instances required the less precise, `JitType2VarType`.
4. `gtAuxiliaryJitType` has been left unchanged. Some new functions have
been introduced called `getCorBaseTypeXX` that keep the original
behavior.

If we decide to also change `gtAuxiliaryJitType` I can make the changes
and refactor things a bit more.

Current opening PR as draft to get a test run.

---------

Co-authored-by: Andy Ayers <andya@microsoft.com>",2025-12-01 22:27:14+00:00,anthonycanino,1,8695b5c884be0e1b62cfa8fc58ce0c156a28787b,"Fix DebugInfo async local var number (#122148)

* Fix problem converting varNums to ILVarNums caused by mutating value being compared",23,2079,1969,"refactor to store the base type for simd operations as a . (issue_ref)this pr adjust to save the base type of simdoperation as a and not . this is done to allowsimd operations on types that are not part of the cil.some notes on the changes:1. has been renamed to and most flowsthat previous had both a and now onlyuse the .2. should now refer to the type returned via.3. some instances required the less precise, .4. has been left unchanged. some new functions havebeen introduced called that keep the originalbehavior.if we decide to also change i can make the changesand refactor things a bit more.current opening pr as draft to get a test run.---------"
dotnet/runtime,f50a572dd5718d56277356a843989dfae57f301f,"[RISC-V] Synthesizing PC-relative pointer constants (#119203)

RISC-V is ill-equipped to synthesize large >32-bit constants like
absolute pointers, it results in a 6-8 instruction sequence. If an
address can be synthesized as PC-relative (2 instructions: `auipc +
ld/addi`), do so. It also simplifies codegen.

Part of #84834, cc @dotnet/samsung",2025-12-01 23:38:47+00:00,Tomasz Sowiński,1,a891243a2404e864586146511300d8afd401ae09,Fix typos (#122174),22,460,393,"[risc-v] synthesizing pc-relative pointer constants (issue_ref)risc-v is ill-equipped to synthesize large >32-bit constants likeabsolute pointers, it results in a 6-8 instruction sequence. if anaddress can be synthesized as pc-relative (2 instructions: ), do so. it also simplifies codegen.part of issue_ref, cc @dotnet/samsung"
dotnet/runtime,5e7ef6be32f3f0da7995f0f88d7838cd4ae06610,"[ios-clr] Add CoreCLR R2R build step for performance measurements (#122039)

## Description

This PR adds CoreCLR R2R build step for performance measurements.

Follow-up: https://github.com/dotnet/performance/pull/5053",2025-12-02 17:06:08+00:00,Milos Kotlar,0,,,1,24,0,[ios-clr] add coreclr r2r build step for performance measurements (issue_ref)## descriptionthis pr adds coreclr r2r build step for performance measurements.follow-up:
dotnet/runtime,a88d470b00351784308a4274f5409b1895b45d38,"[mono][debugger] Protecting against changing the protocol version (#122102)

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-12-02 19:42:23+00:00,Thays Grazia,0,,,1,4,0,[mono][debugger] protecting against changing the protocol version (issue_ref)
dotnet/runtime,5bb1daee84a115562857b88f85ec342ceea0677a,"[Wasm RyuJit] Add various wasm binops to instrswasm (#122081)

Let's add the opcodes first and see if CCA can update the switch statement separately.",2025-12-02 21:20:51+00:00,Katelyn Gadd,0,,,1,109,5,[wasm ryujit] add various wasm binops to instrswasm (issue_ref)let's add the opcodes first and see if cca can update the switch statement separately.
dotnet/runtime,048d3eec31d4aee99b56d1128c21fde5b88379f4,"Do not set ExtendedLayout on BoxedValueType (#122091)

This looks like a copy-paste mistake?",2025-12-02 22:11:07+00:00,Michal Strehovský,0,,,1,1,1,do not set extendedlayout on boxedvaluetype (issue_ref)this looks like a copy-paste mistake?
dotnet/runtime,49099040a627c963241e75ba52847e73ca8c01e8,"Revert ""Revert ""Move hosting tests to XUnit 3"""" (#121072)

Reverts dotnet/runtime#120997",2025-12-03 00:01:02+00:00,Andy Gocke,1,bce6119e41ecfbcf630c369836770669604c22c6,"Increase HostActivation test hang dump timeout to 8 minutes for OSX CI (#122171)

HostActivation tests are hitting the 5-minute hang dump timeout on OSX
CI despite making steady progress. Tests complete in ~2 minutes locally
but CI environments run 2x slower.

**Changes:**
- Increased `--hangdump-timeout` from `5m` to `8m` in
`src/installer/tests/Directory.Build.props`

This provides adequate headroom for slower CI machines while still
catching actual hangs.

<!-- START COPILOT CODING AGENT SUFFIX -->



<details>

<summary>Original prompt</summary>

> 
> ----
> 
> *This section details on the original issue you should resolve*
> 
> <issue_title>Host Activation test failures on OSX</issue_title>
> <issue_description>## Build Information
> Build:
https://dev.azure.com/dnceng-public/cbb18261-c48f-4abb-8651-8cdcb5474649/_build/results?buildId=1219628
> Build error leg or test failing:
HostActivation.Tests.WorkItemExecution
> Pull request: https://github.com/dotnet/runtime/pull/121973
> <!-- Error message template  -->
> ## Error Message
> 
> Fill the error message using [step by step known issues
guidance](https://github.com/dotnet/arcade/blob/main/Documentation/Projects/Build%20Analysis/KnownIssueJsonStepByStep.md).
> 
> <!-- Use ErrorMessage for String.Contains matches. Use ErrorPattern
for regex matches (single line/no backtracking). Set BuildRetry to
`true` to retry builds with this error. Set ExcludeConsoleLog to `true`
to skip helix logs analysis. -->
> 
> ```json
> {
>   ""ErrorMessage"": ""Hang dump timeout of '00:05:00' expired"",
>   ""ErrorPattern"": """",
>   ""BuildRetry"": false,
>   ""ExcludeConsoleLog"": false
> }
> ```
> 
> 
> <!-- Known issue validation start -->
>  ### Known issue validation
> **Build: :mag_right:**
https://dev.azure.com/dnceng-public/public/_build/results?buildId=1219628
> **Error message validated:** `[Hang dump timeout of '00:05:00'
expired`]
> **Result validation:** :white_check_mark: Known issue matched with the
provided build.
> **Validation performed at:** 12/4/2025 3:07:33 AM UTC
> <!-- Known issue validation end -->
> <!--Known issue error report start -->
> 
> ### Report
> 
> |Build|Definition|Test|Pull Request|
> |---|---|---|---|
>
|[1219965](https://dev.azure.com/dnceng-public/public/_build/results?buildId=1219965)|dotnet/runtime|[HostActivation.Tests.WorkItemExecution](https://dev.azure.com/dnceng-public/public/_build/results?buildId=1219965&view=ms.vss-test-web.build-test-results-tab&runId=33790538&resultId=100095)|dotnet/runtime#122136|
>
|[1219914](https://dev.azure.com/dnceng-public/public/_build/results?buildId=1219914)|dotnet/runtime|[HostActivation.Tests.WorkItemExecution](https://dev.azure.com/dnceng-public/public/_build/results?buildId=1219914&view=ms.vss-test-web.build-test-results-tab&runId=33788030&resultId=100095)|dotnet/runtime#117148|
>
|[1219763](https://dev.azure.com/dnceng-public/public/_build/results?buildId=1219763)|dotnet/runtime|[HostActivation.Tests.WorkItemExecution](https://dev.azure.com/dnceng-public/public/_build/results?buildId=1219763&view=ms.vss-test-web.build-test-results-tab&runId=33785738&resultId=100095)|dotnet/runtime#122125|
>
|[1219716](https://dev.azure.com/dnceng-public/public/_build/results?buildId=1219716)|dotnet/runtime|[HostActivation.Tests.WorkItemExecution](https://dev.azure.com/dnceng-public/public/_build/results?buildId=1219716&view=ms.vss-test-web.build-test-results-tab&runId=33780760&resultId=100095)|dotnet/runtime#122168|
>
|[1219709](https://dev.azure.com/dnceng-public/public/_build/results?buildId=1219709)|dotnet/runtime|[HostActivation.Tests.WorkItemExecution](https://dev.azure.com/dnceng-public/public/_build/results?buildId=1219709&view=ms.vss-test-web.build-test-results-tab&runId=33780492&resultId=100095)|dotnet/runtime#122163|
>
|[1219628](https://dev.azure.com/dnceng-public/public/_build/results?buildId=1219628)|dotnet/runtime|[HostActivation.Tests.WorkItemExecution](https://dev.azure.com/dnceng-public/public/_build/results?buildId=1219628&view=ms.vss-test-web.build-test-results-tab&runId=33778378&resultId=100095)|dotnet/runtime#121973|
> #### Summary
> |24-Hour Hit Count|7-Day Hit Count|1-Month Count|
> |---|---|---|
> |6|6|6|
> <!--Known issue error report end --></issue_description>
> 
> ## Comments on the Issue (you are @copilot in this section)
> 
> <comments>
> <comment_new><author>@agocke</author><body>
> My PR almost certainly broke this, but I'm not sure how
yet</body></comment_new>
> <comment_new><author>@agocke</author><body>
> Actually, I'm not sure I ""broke"" this in a real sense -- right now the
hang dump timeout is kicking in at the 5m mark. But the log shows a
steady stream of tests passing all the way up to the 5m mark.
> 
> I wonder if this is just that the tests are taking longer than 5m to
finish and the hang dump timeout is measuring from the start of the test
run.</body></comment_new>
> <comment_new><author>@agocke</author><body>
> Yeah my uncontended M2 Mac takes 2 min to run the tests, I could
easily believe CI is twice as slow. I think we should bump this to ten
minutes.</body></comment_new>
> </comments>
> 


</details>

- Fixes dotnet/runtime#122169

<!-- START COPILOT CODING AGENT TIPS -->
---

💡 You can make Copilot smarter by setting up custom instructions,
customizing its development environment and configuring Model Context
Protocol (MCP) servers. Learn more [Copilot coding agent
tips](https://gh.io/copilot-coding-agent-tips) in the docs.

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: agocke <515774+agocke@users.noreply.github.com>",68,414,362,"revert ""revert ""move hosting tests to xunit 3"""" (issue_ref)reverts dotnet/runtimeissue_ref"
dotnet/runtime,4095103ddce0e469329136dbe9a75976ad3ac170,"Remove Obsolete attribute from CurrencyWrapper and UnmanagedType.Currency (#122114)

`CurrencyWrapper` and `UnmanagedType.Currency` were marked `[Obsolete]`
when .NET Core 1.0 removed COM support. COM was reintroduced in .NET
Core 3.0 and expanded with source-generated COM in .NET 8. These APIs
are now fully supported.

Co-authored-by: AaronRobinsonMSFT <30635565+AaronRobinsonMSFT@users.noreply.github.com>",2025-12-03 03:15:24+00:00,Copilot,1,c4066cf778a3fde110c0ab6691baa941d95a5e0c,"Adding support for aligning AllocateTypeAssociatedMemory (#122094)

This resolves #118897

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",13,0,25,remove obsolete attribute from currencywrapper and unmanagedtype.currency (issue_ref) and were marked when .net core 1.0 removed com support. com was reintroduced in .netcore 3.0 and expanded with source-generated com in .net 8. these apisare now fully supported.
dotnet/runtime,4d1048d0c3c023179a95f583228e83153f207862,Reduce unsafe code usage in HttpHeaders (#122132),2025-12-03 10:31:25+00:00,Levi Broderick,1,95246dbedc3fbed08eb2b0b8a2cf00bf1e84eaf9,"Fix TransferEncodingChunked returning true after being set to false (#122409)


---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>
Co-authored-by: MihaZupan <25307628+MihaZupan@users.noreply.github.com>",1,2,3,reduce unsafe code usage in httpheaders (issue_ref)
dotnet/runtime,d01d30eb279dd963655f08a2f989ad625f08868c,"Build the test tree with TrimMode=full (#121697)

We're likely losing out on test coverage by not testing the recommended
mainstream shipping configuration.

The test changes are all to make sure we don't trim what's needed.

Where I could, I avoided just putting TrimMode=full on the assembly
(because that makes the test case RequiresProcessIsolation and that's
not great). For some I had to give up because there was no clean way to
do it.",2025-12-03 12:34:54+00:00,Michal Strehovský,0,,,28,228,129,"build the test tree with trimmode=full (issue_ref)we're likely losing out on test coverage by not testing the recommendedmainstream shipping configuration.the test changes are all to make sure we don't trim what's needed.where i could, i avoided just putting trimmode=full on the assembly(because that makes the test case requiresprocessisolation and that'snot great). for some i had to give up because there was no clean way todo it."
dotnet/runtime,f7a3ad334b6431d14a31fa0e2773cea56f1638bb,"Switch NameMangler to UTF-8 (#122128)

Removes some unnecessary UTF-8 -> UTF-16 -> UTF-8 conversions.

Before this change, when compiling hello world: 529000 `byte[]`
allocations, 403000 `string` allocations.
After this change: 552000 `byte[]` allocations, 302000 `string`
allocations.",2025-12-03 13:16:45+00:00,Michal Strehovský,0,,,12,279,122,"switch namemangler to utf-8 (issue_ref)removes some unnecessary utf-8 -> utf-16 -> utf-8 conversions.before this change, when compiling hello world: 529000 allocations, 403000 allocations.after this change: 552000 allocations, 302000 allocations."
dotnet/runtime,69310d88a431951addcc65ad093ea59528f80c48,"Enforce Async-only methods in StreamConformanceTests (#121842)

For stream which wrap another stream (SslStream, compression streams,
crypto streams, ....), we can test if async methods are calling only
async methods. This should root out cases where we may be mistakenly
doing blocking IO calls as part of async stack.

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-12-03 13:52:58+00:00,Radek Zikmund,0,,,2,261,101,"enforce async-only methods in streamconformancetests (issue_ref)for stream which wrap another stream (sslstream, compression streams,crypto streams, ....), we can test if async methods are calling onlyasync methods. this should root out cases where we may be mistakenlydoing blocking io calls as part of async stack.---------"
dotnet/runtime,d3711c2edd633986bd9659013dfdd30534ee9d36,"Allow type loading when merging array types (#122121)

If the runtime is merging two array types, the merged type may be one
that is not yet loaded. Allow the runtime to load the type.

Fixes #120903.",2025-12-03 15:39:04+00:00,Andy Ayers,1,5c604c1effbc4fb386fa48af27aee2bf942a75cf,"JIT: Handle `FIELD_LIST` for tailcall arg/parameter interference checks (#122147)

Since tailcalls place the arguments in the incoming parameter area it
corrupts the value of existing parameters to the function. To handle
this there is logic in place to create defensive copies of the
parameters if we detect that we will need those later in the tailcalling
sequence. However, this logic was missing handling when the argument was
a `FIELD_LIST`:

- When an argument was a `FIELD_LIST` we did not take into account that
we needed to look for parameter uses starting from its operands, and not
just from the `FIELD_LIST` itself. Fix this by introducing a
`FirstOperand` function and use it here.

- When the value of a `PUTARG_STK` was a contained `FIELD_LIST` we did
not take into account that its codegen may invalidate the values of its
own operands. Detect this case and introduce temps for it.

Fix #122138",3,32,11,"allow type loading when merging array types (issue_ref)if the runtime is merging two array types, the merged type may be onethat is not yet loaded. allow the runtime to load the type.fixes issue_ref."
dotnet/runtime,2f0cfc828cd997538ecb1b6111cbbb530f406d27,"Ensure we fetch all PR detail data (#122078)

As part of the cleanup in PR
https://github.com/dotnet/runtime/pull/120987/commits/d27e210a908455c9ebf1b930e777a124f1f38789#diff-2ba828c15ad12c13f308f51998a4c9240d7c7325135ff7eaaff120e20dd61166L772

I tried to reduce the number of CLI calls when a PR number was
specified. When doing so I didn't consolidate the JSON fields, nor did I
update the source of the info later in the script.

This addresses both problems. I've validated with local runs - example -
https://github.com/dotnet/runtime/pull/121938#issuecomment-3598438340",2025-12-03 18:25:45+00:00,Eric StJohn,0,,,1,21,21,"ensure we fetch all pr detail data (issue_ref)as part of the cleanup in pr#diff-2ba828c15ad12c13f308f51998a4c9240d7c7325135ff7eaaff120e20dd61166l772i tried to reduce the number of cli calls when a pr number wasspecified. when doing so i didn't consolidate the json fields, nor did iupdate the source of the info later in the script.this addresses both problems. i've validated with local runs - example -#issuecomment-3598438340"
dotnet/runtime,171a9433a1ef0d8e6316fba75a898367f6870ca4,"Add missing helix-platforms.yml import to pipelines using helix variable aliases (#122075)

- [x] Add `helix-platforms.yml` import to coreclr pipelines using
helix-queues-setup or jit-outerloop-pipeline templates
  - [x] ci.yml
  - [x] crossgen2-composite.yml
  - [x] crossgen2-gcstress.yml
  - [x] crossgen2-outerloop.yml
  - [x] crossgen2.yml
  - [x] exploratory.yml
  - [x] gc-longrunning.yml
  - [x] gc-simulator.yml
  - [x] gc-standalone.yml
  - [x] gcstress-extra.yml
  - [x] gcstress0x3-gcstress0xc.yml
  - [x] hardware-intrinsics.yml
  - [x] ilasm.yml
  - [x] interpreter.yml
  - [x] jit-cfg.yml
  - [x] jit-experimental.yml
  - [x] jitstress-isas-arm.yml
  - [x] jitstress-isas-avx512.yml
  - [x] jitstress-isas-x86.yml
  - [x] jitstress-random.yml
  - [x] jitstress.yml
  - [x] jitstress2-jitstressregs.yml
  - [x] jitstressregs-x86.yml
  - [x] jitstressregs.yml
  - [x] libraries-gcstress-extra.yml
  - [x] libraries-gcstress0x3-gcstress0xc.yml
  - [x] libraries-jitstress-random.yml
  - [x] libraries-jitstress.yml
  - [x] libraries-jitstress2-jitstressregs.yml
  - [x] libraries-jitstressregs.yml
  - [x] libraries-pgo.yml
  - [x] pgo.yml
  - [x] pgostress.yml
  - [x] r2r-extra.yml
  - [x] r2r.yml
  - [x] release-tests.yml
  - [x] runincontext.yml
  - [x] superpmi-asmdiffs-checked-release.yml
  - [x] superpmi-diffs.yml
  - [x] tieringtest.yml
- [x] Add `helix-platforms.yml` import to libraries pipelines (directly
to pipeline files, not shared template)
  - [x] outerloop.yml
  - [x] outerloop-mono.yml
- [x] Add `helix-platforms.yml` import to other pipelines
  - [x] runtime-cet.yml
  - [x] runtime-community.yml
  - [x] runtime-extra-platforms.yml
  - [x] runtime-llvm.yml
  - [x] runtime-sanitized.yml
  - [x] runtimelab-official.yml
  - [x] runtimelab.yml
- [x] Run code review (no issues found)
- [x] Run security check (no issues found)

<!-- START COPILOT CODING AGENT TIPS -->
---

✨ Let Copilot coding agent [set things up for
you](https://github.com/dotnet/runtime/issues/new?title=✨+Set+up+Copilot+instructions&body=Configure%20instructions%20for%20this%20repository%20as%20documented%20in%20%5BBest%20practices%20for%20Copilot%20coding%20agent%20in%20your%20repository%5D%28https://gh.io/copilot-coding-agent-tips%29%2E%0A%0A%3COnboard%20this%20repo%3E&assignees=copilot)
— coding agent works faster and does higher quality work when set up for
your repo.

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: agocke <515774+agocke@users.noreply.github.com>",2025-12-03 23:59:04+00:00,Copilot,0,,,49,52,0,"add missing helix-platforms.yml import to pipelines using helix variable aliases (issue_ref)- [x] add import to coreclr pipelines usinghelix-queues-setup or jit-outerloop-pipeline templates - [x] ci.yml - [x] crossgen2-composite.yml - [x] crossgen2-gcstress.yml - [x] crossgen2-outerloop.yml - [x] crossgen2.yml - [x] exploratory.yml - [x] gc-longrunning.yml - [x] gc-simulator.yml - [x] gc-standalone.yml - [x] gcstress-extra.yml - [x] gcstress0x3-gcstress0xc.yml - [x] hardware-intrinsics.yml - [x] ilasm.yml - [x] interpreter.yml - [x] jit-cfg.yml - [x] jit-experimental.yml - [x] jitstress-isas-arm.yml - [x] jitstress-isas-avx512.yml - [x] jitstress-isas-x86.yml - [x] jitstress-random.yml - [x] jitstress.yml - [x] jitstress2-jitstressregs.yml - [x] jitstressregs-x86.yml - [x] jitstressregs.yml - [x] libraries-gcstress-extra.yml - [x] libraries-gcstress0x3-gcstress0xc.yml - [x] libraries-jitstress-random.yml - [x] libraries-jitstress.yml - [x] libraries-jitstress2-jitstressregs.yml - [x] libraries-jitstressregs.yml - [x] libraries-pgo.yml - [x] pgo.yml - [x] pgostress.yml - [x] r2r-extra.yml - [x] r2r.yml - [x] release-tests.yml - [x] runincontext.yml - [x] superpmi-asmdiffs-checked-release.yml - [x] superpmi-diffs.yml - [x] tieringtest.yml- [x] add import to libraries pipelines (directlyto pipeline files, not shared template) - [x] outerloop.yml - [x] outerloop-mono.yml- [x] add import to other pipelines - [x] runtime-cet.yml - [x] runtime-community.yml - [x] runtime-extra-platforms.yml - [x] runtime-llvm.yml - [x] runtime-sanitized.yml - [x] runtimelab-official.yml - [x] runtimelab.yml- [x] run code review (no issues found)- [x] run security check (no issues found)<!-- start copilot coding agent tips -->---✨ let copilot coding agent [set things up foryou](✨+set+up+copilot+instructions&body=configure%20instructions%20for%20this%20repository%20as%20documented%20in%20%5bbest%20practices%20for%20copilot%20coding%20agent%20in%20your%20repository%5d%28— coding agent works faster and does higher quality work when set up foryour repo.---------"
dotnet/runtime,75eb218377b87e67d98fb34c58a8d30003b50c5a,"[Wasm RyuJit] Control flow codegen (#121973)

Emit plausible Wasm control flow for blocks during `genCodeForBBList`.

Also add a bit of support for relop codegen, so blocks ending in
branches have something to use.

Contributes to #121178.",2025-12-04 03:16:34+00:00,Andy Ayers,1,192bdc380b47a01081748c296eb67e5b1ae73bad,"[clr-interp] Runtime async support (#121862)

This PR adds runtime async support to the interpreter

Notable changes:
1. Wrap async method bodies in a try/finally block to capture/restore
the exec and sync contexts, just like synchronized methods.
2. Add a series of instructions for doing a suspend/resume. This set is
currently somewhat longer than ideal, and we could simplify this by
having a set of managed helper functions to reduce the number of
instructions needed.
3. The continuation is filled in with a copy of the data from the stack.
4. The calling convention is non-traditional for the extra return value.
For the continuation argument, instead of representing it on the stack
as part of the return value, we represent it as a field on the
InterpreterFrame, and update and check that frame as needed. This allows
the vast majority of the code in the compiler to ignore the concept of
runtime-async.
5. The call stub generator is also modified to pass the extra parameter,
but more significantly, all of the stubs which call into the interpreter
are setup to now capture the continuation argument and put it into the
special return register.
6. Tests have been updated to do less work when running under the
interpreter. Some of the existing tests were designed specifically to
trigger various rejit thresholds, and while that is a fine thing to test
in the JIT, the interpreter is FAR slower, and needs a different
approach.

TODO before merge
~1. Remove the changes to enable RuntimeAsync by default.~
~2. Add documentation about how the interpreter async abi works~
~3. Add documentation about what a code generator needs to do to make
runtime async work~
~4. I'm pretty sure IL peep handling has a bug handling any of the 2
byte opcodes. This needs to be tested.~

---------

Co-authored-by: Jakob Botsch Nielsen <Jakob.botsch.nielsen@gmail.com>",16,1134,515,"[wasm ryujit] control flow codegen (issue_ref)emit plausible wasm control flow for blocks during .also add a bit of support for relop codegen, so blocks ending inbranches have something to use.contributes to issue_ref."
dotnet/runtime,8c37ae7bc123f8877151067924325a926c14e2a6,"[Wasm RyuJit] Refactor codegenwasm.cpp to separate div/mod ops and align function names (#122157)

## Changes

- **Extract div/mod operations**: Move `GT_DIV`, `GT_MOD`, `GT_UDIV`,
`GT_UMOD` from `genCodeForBinary` to new `genCodeForDivMod` function,
matching ARM64/x64/RISC-V64 architecture
- **Rename shift function**: Change `genCodeForShiftOrRotate` →
`genCodeForShift` to match `codegen.h` declaration and other targets
- **Remove redundant declaration**: Delete `#ifdef TARGET_WASM` wrapped
`genCodeForShiftOrRotate` declaration in `codegen.h`
- **Add validation**: Include `assert(tree->OperIsShiftOrRotate())`
consistent with x64 implementation
Updated dispatch in `genCodeForTreeNode`
Aligns WASM backend structure with established patterns across other
architectures.

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: kg <198130+kg@users.noreply.github.com>",2025-12-04 04:30:07+00:00,Copilot,0,,,2,60,34,"[wasm ryujit] refactor codegenwasm.cpp to separate div/mod ops and align function names (issue_ref)## changes- **extract div/mod operations**: move , , , from to new function,matching arm64/x64/risc-v64 architecture- **rename shift function**: change → to match declaration and other targets- **remove redundant declaration**: delete wrapped declaration in - **add validation**: include consistent with x64 implementationupdated dispatch in aligns wasm backend structure with established patterns across otherarchitectures.---------"
dotnet/runtime,0ef4e1d7cf6cbf2a09fdfb0053459ae0b00869b0,"Use SpanHelpers.SequenceCompareTo for String.CompareOrdinal (#111586)

Helps reusing centralized code under `SpanHelpers`. There shouldn't be
much change for performance, just ensuring no regression.

---------

Co-authored-by: Pranav Senthilnathan <pranas@microsoft.com>
Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-12-04 05:00:38+00:00,Huo Yaoyuan,0,,,1,34,122,"use spanhelpers.sequencecompareto for string.compareordinal (issue_ref)helps reusing centralized code under . there shouldn't bemuch change for performance, just ensuring no regression.---------"
dotnet/runtime,ad43a8af2963dfe10d02ffaf0d948e22468df5ce,[browser][coreclr] ICU download (#121800),2025-12-04 09:02:27+00:00,Daria Tiurina,0,,,16,137,21,[browser][coreclr] icu download (issue_ref)
dotnet/runtime,69664a5bb0ee35a360dccd4d91f4f24590158c77,"[main] Update dependencies from dotnet/xharness (#122072)

This pull request updates the following dependencies

[marker]: <> (Begin:be30ac4f-4b72-4287-1eb6-08d8d8fef0ea)
## From https://github.com/dotnet/xharness
- **Subscription**:
[be30ac4f-4b72-4287-1eb6-08d8d8fef0ea](https://maestro.dot.net/subscriptions?search=be30ac4f-4b72-4287-1eb6-08d8d8fef0ea)
- **Build**:
[20251201.7](https://dev.azure.com/dnceng/internal/_build/results?buildId=2851203)
([292776](https://maestro.dot.net/channel/2/github:dotnet:xharness/build/292776))
- **Date Produced**: December 1, 2025 5:30:04 PM UTC
- **Commit**:
[8c52965b101b84e92f3e088666684be4857e9429](https://github.com/dotnet/xharness/commit/8c52965b101b84e92f3e088666684be4857e9429)
- **Branch**: [main](https://github.com/dotnet/xharness/tree/main)

[DependencyUpdate]: <> (Begin)

- **Dependency Updates**:
  - From [11.0.0-prerelease.25578.2 to 11.0.0-prerelease.25601.7][2]
     - Microsoft.DotNet.XHarness.CLI
     - Microsoft.DotNet.XHarness.TestRunners.Common
     - Microsoft.DotNet.XHarness.TestRunners.Xunit

[2]: https://github.com/dotnet/xharness/compare/e26a7b2ad4...8c52965b10

[DependencyUpdate]: <> (End)


[marker]: <> (End:be30ac4f-4b72-4287-1eb6-08d8d8fef0ea)

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Milos Kotlar <kotlarmilos@gmail.com>",2025-12-04 09:54:40+00:00,dotnet-maestro[bot],0,,,5,16,12,"[main] update dependencies from dotnet/xharness (issue_ref)this pull request updates the following dependencies[marker]: <> (begin:be30ac4f-4b72-4287-1eb6-08d8d8fef0ea)## from - **subscription**:[be30ac4f-4b72-4287-1eb6-08d8d8fef0ea](- **build**:[20251201.7](([292776](- **date produced**: december 1, 2025 5:30:04 pm utc- **commit**:[8c52965b101b84e92f3e088666684be4857e9429](- **branch**: [main]([dependencyupdate]: <> (begin)- **dependency updates**: - from [11.0.0-prerelease.25578.2 to 11.0.0-prerelease.25601.7][2] - microsoft.dotnet.xharness.cli - microsoft.dotnet.xharness.testrunners.common - microsoft.dotnet.xharness.testrunners.xunit[2]: [dependencyupdate]: <> (end)[marker]: <> (end:be30ac4f-4b72-4287-1eb6-08d8d8fef0ea)---------"
dotnet/runtime,916e90defb53dfa1f5a1bac31d367f64b13d20bc,"[RISC-V] Simplify codegen for GT_LEA (#119634)

RISC-V doesn't have indexed loads/stores so replacing the base with a
standard ADD(base, index) node simplifies and improves the code
generation as the tree is closer to architectural reality.

Part of #84834, cc @dotnet/samsung",2025-12-04 11:11:23+00:00,Tomasz Sowiński,1,46de0c9c934a5960b918897da1b611f2b53e8ed3,"[RISC-V] Fix too many arguments build error in emitIns_R_AI (#122555)

Fixes #122553, regression after #119203.

Part of #84834, cc @dotnet/samsung",5,103,317,"[risc-v] simplify codegen for gt_lea (issue_ref)risc-v doesn't have indexed loads/stores so replacing the base with astandard add(base, index) node simplifies and improves the codegeneration as the tree is closer to architectural reality.part of issue_ref, cc @dotnet/samsung"
dotnet/runtime,3f5df2f9ae4f04f2ce73382bb35a56a23a9f5320,arm64: Fix negs compare to minus int.MinValue (#121380),2025-12-04 11:15:13+00:00,Jonathan Davies,1,90725c7780b30863b533423e05c2f03da89e4bcf,"JIT: Disable flag optimization on arm32 again (#122215)

arm32 does not set the right flags for these operations, so it cannot be
enabled.

I enabled this in #121380, and these tests did fail there too, but I
mistakenly thought the failure was preexisting and the same as #121659.

Also do a small refactoring while I'm here, to make use of
`SupportsSettingFlagsAsCompareToZero` from `SupportsSettingZeroFlag`.

Fix #122185",4,65,40,arm64: fix negs compare to minus int.minvalue (issue_ref)
dotnet/runtime,db27e7d7fa376fd9637552b6011bb9f4b3aa0b3b,[browser][WBT] harden devserver upload (#122092),2025-12-04 14:16:03+00:00,Pavel Savara,0,,,5,74,7,[browser][wbt] harden devserver upload (issue_ref)
dotnet/runtime,2333e7c44a8a67f7db66f75ada2aaa23586b886b,"Fix SVE2 API for RotateComplex methods (#122172)

Fixes #121961.

Rename argument names for the following methods:
- `AddSaturateRotateComplex`: `op1, op2, rotation` => `left, right,
rotation`.
- `DotProductRotateComplex`: `op1, op2, op3, rotation` => `addend, left,
right, rotation`.
- `DotProductRotateComplexBySelectedIndex`: `op1, op2, op3, imm_index,
rotation` => `addend, left, right, rightIndex, rotation`.
- `MultiplyAddRoundedDoublingSaturateHighRotateComplex`: `op1, op2, op3,
rotation` => `addend, left, right, rotation`.
- `MultiplyAddRoundedDoublingSaturateHighRotateComplexBySelectedScalar`:
`op1, op2, op3, imm_index, rotation` => `addend, left, right,
rightIndex, rotation`.

@dotnet/arm64-contrib @a74nh",2025-12-04 14:40:47+00:00,ylpoonlg,1,ec8d8b75571cdd956c8d7a71b1a3b4e2087fc0bf,"Fix SVE2 API for Odd/Even methods (#122173)

Fixes https://github.com/dotnet/runtime/issues/121961.

Rename argument names for the following methods:
- `AddCarryWideningEven`/`AddCarryWideningOdd`: `op1, op2, op3` =>
`left, right, carry`.
- `SubtractBorrowWideningEven`/`SubtractBorrowWideningOdd`: `op1, op2,
op3` => `left, right, borrow`.
- `ShiftLeftLogicalWideningEven`/`ShiftLeftLogicalWideningOdd`: `value,
count` => `value, shiftAmount`.
- `AddWideningEvenOdd`: `left, right` => `leftEven, rightOdd`.
- `SubtractWideningEvenOdd`: `left, right` => `leftEven, rightOdd`.
- `SubtractWideningOddEven`: `left, right` => `leftOdd, rightEven`.
- `InterleavingXorEvenOdd`: `odd, left, right` => `odd, leftEven,
rightOdd`.
- `InterleavingXorOddEven`: `even, left, right` => `even, leftOdd,
rightEven`.

@dotnet/arm64-contrib @a74nh",3,42,42,fix sve2 api for rotatecomplex methods (issue_ref)fixes issue_ref.rename argument names for the following methods:- : => .- : => .- : => .- : => .- : => .@dotnet/arm64-contrib @a74nh
dotnet/runtime,3ebb6e2f425e70c81ae45ecf4b67007eb5428de6,"Use ferror for stdio errors (#122136)

https://github.com/dotnet/runtime/pull/121837#discussion_r2580821368",2025-12-04 15:27:13+00:00,Huo Yaoyuan,0,,,5,14,14,use ferror for stdio errors (issue_ref)#discussion_r2580821368
dotnet/runtime,f840009fadde7f3e22b264e7a46681eb737fa09a,"Update Alpine container references to 3.23 (#122168)

Updates all Alpine container references in helix-queues configuration
files from versions 3.20, 3.21, and 3.22 to Alpine 3.23. Alpine ""edge""
references remain unchanged.

### Changed Files

- **helix-queues-setup.yml** (coreclr, installer, libraries): Updated
Alpine container versions and queue names (Alpine.320/322 → Alpine.323)
for x64, arm32, and arm64 musl platforms. Removed version-specific
SHA256 hashes.

- **helix-platforms.yml**: Updated platform variable definitions for
latest/oldest musl configurations across all architectures.

- **pipeline-with-resources.yml**: Updated
`linux_musl_x64_dev_innerloop` container image reference.

All changes are configuration-only with no code modifications required.

<!-- START COPILOT CODING AGENT SUFFIX -->



<details>

<summary>Original prompt</summary>

> Update any Alpine container references in `helix-queues*.yml` files to
Alpine 3.23. Alpine ""edge"" should be left as-is.


</details>



<!-- START COPILOT CODING AGENT TIPS -->
---

💡 You can make Copilot smarter by setting up custom instructions,
customizing its development environment and configuring Model Context
Protocol (MCP) servers. Learn more [Copilot coding agent
tips](https://gh.io/copilot-coding-agent-tips) in the docs.

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: richlander <2608468+richlander@users.noreply.github.com>",2025-12-04 17:46:46+00:00,Copilot,1,614b27bd233bc387d0b07786769c3e03d765d4f7,"Update Docker image from Debian 12 to Debian 13 with GCC15 (#122305)

main PR <!-- Link to PR if any that fixed this in the main branch. -->

# Description

Updates the Debian container image from `debian-12-gcc15-amd64` to
`debian-13-gcc15-amd64` across pipeline configuration and documentation.

**Modified files:**
- `eng/pipelines/common/templates/pipeline-with-resources.yml` -
Container definition and image reference
- `eng/pipelines/common/platform-matrix.yml` - Container name reference
in build matrix
- `docs/workflow/using-docker.md` - Documentation table entry

# Customer Impact

None. Internal build infrastructure update.

# Regression

No. This is not fixing a regression.

# Testing

Configuration change only. Will be validated when pipeline executes with
the new image.

# Risk

Low. Standard image upgrade following established pattern. The Debian 13
image with GCC15 is already available in the container registry.

# Package authoring no longer needed in .NET 9

IMPORTANT: Starting with .NET 9, you no longer need to edit a NuGet
package's csproj to enable building and bump the version.
Keep in mind that we still need package authoring in .NET 8 and older
versions.

<!-- START COPILOT CODING AGENT SUFFIX -->



<!-- START COPILOT ORIGINAL PROMPT -->



<details>

<summary>Original prompt</summary>

> On pipeline-with-resources.yml, Please update this image to the debian
13 variant. New tag: debian-13-gcc15-amd64
> 
>
https://github.com/dotnet/runtime/blob/main/eng/pipelines/common/templates/pipeline-with-resources.yml#L105-L106


</details>



<!-- START COPILOT CODING AGENT TIPS -->
---

💬 We'd love your input! Share your thoughts on Copilot coding agent in
our [2 minute survey](https://gh.io/copilot-coding-agent-survey).

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: richlander <2608468+richlander@users.noreply.github.com>",5,25,25,"update alpine container references to 3.23 (issue_ref)updates all alpine container references in helix-queues configurationfiles from versions 3.20, 3.21, and 3.22 to alpine 3.23. alpine ""edge""references remain unchanged.### changed files- **helix-queues-setup.yml** (coreclr, installer, libraries): updatedalpine container versions and queue names (alpine.320/322 → alpine.323)for x64, arm32, and arm64 musl platforms. removed version-specificsha256 hashes.- **helix-platforms.yml**: updated platform variable definitions forlatest/oldest musl configurations across all architectures.- **pipeline-with-resources.yml**: updated container image reference.all changes are configuration-only with no code modifications required.<!-- start copilot coding agent suffix --><details><summary>original prompt</summary>> update any alpine container references in files toalpine 3.23. alpine ""edge"" should be left as-is.</details><!-- start copilot coding agent tips -->---💡 you can make copilot smarter by setting up custom instructions,customizing its development environment and configuring model contextprotocol (mcp) servers. learn more [copilot coding agenttips]( in the docs.---------"
dotnet/runtime,f6d570ff43637bf76e626f17513cdaf1ff3174f0,"[infra][iOS] Fully build smoke tests on azdo build images (#121927)

Build Mono smoke tests on Azdo build images to work around an issue
where helix machines have lower XCode than Azdo images, causing Mono
linking errors:
https://github.com/dotnet/runtime/pull/120589#issuecomment-3571310821

Changes:
- Correct `Directory.Build.*` imports for functional tests
- Tweak `src/libraries/sendtohelix-mobile.targets` to handle cases where
only `runonly` tests are prepared for sending to helix.
- Rename mobile jobs running only smoke tests",2025-12-04 18:25:26+00:00,Matous Kozak,0,,,9,32,31,"[infra][ios] fully build smoke tests on azdo build images (issue_ref)build mono smoke tests on azdo build images to work around an issuewhere helix machines have lower xcode than azdo images, causing monolinking errors:#issuecomment-3571310821changes:- correct imports for functional tests- tweak to handle cases whereonly tests are prepared for sending to helix.- rename mobile jobs running only smoke tests"
dotnet/runtime,192bdc380b47a01081748c296eb67e5b1ae73bad,"[clr-interp] Runtime async support (#121862)

This PR adds runtime async support to the interpreter

Notable changes:
1. Wrap async method bodies in a try/finally block to capture/restore
the exec and sync contexts, just like synchronized methods.
2. Add a series of instructions for doing a suspend/resume. This set is
currently somewhat longer than ideal, and we could simplify this by
having a set of managed helper functions to reduce the number of
instructions needed.
3. The continuation is filled in with a copy of the data from the stack.
4. The calling convention is non-traditional for the extra return value.
For the continuation argument, instead of representing it on the stack
as part of the return value, we represent it as a field on the
InterpreterFrame, and update and check that frame as needed. This allows
the vast majority of the code in the compiler to ignore the concept of
runtime-async.
5. The call stub generator is also modified to pass the extra parameter,
but more significantly, all of the stubs which call into the interpreter
are setup to now capture the continuation argument and put it into the
special return register.
6. Tests have been updated to do less work when running under the
interpreter. Some of the existing tests were designed specifically to
trigger various rejit thresholds, and while that is a fine thing to test
in the JIT, the interpreter is FAR slower, and needs a different
approach.

TODO before merge
~1. Remove the changes to enable RuntimeAsync by default.~
~2. Add documentation about how the interpreter async abi works~
~3. Add documentation about what a code generator needs to do to make
runtime async work~
~4. I'm pretty sure IL peep handling has a bug handling any of the 2
byte opcodes. This needs to be tested.~

---------

Co-authored-by: Jakob Botsch Nielsen <Jakob.botsch.nielsen@gmail.com>",2025-12-04 18:28:59+00:00,David Wrighton,1,a86e806c41fa2aabc0ec52c5b161ee0947106bcb,"Fix unix x64 interpreter helpers CFI unwind info (#122427)

The InterpreterStubRetXXX helpers on unix x64 had missing CFI annotation
marking RBP as a frame pointer. Since they move RSP by dynamic value,
the libunwind was unable to unwind through those, which was leading to
crashes.",63,2829,407,"[clr-interp] runtime async support (issue_ref)this pr adds runtime async support to the interpreternotable changes:1. wrap async method bodies in a try/finally block to capture/restorethe exec and sync contexts, just like synchronized methods.2. add a series of instructions for doing a suspend/resume. this set iscurrently somewhat longer than ideal, and we could simplify this byhaving a set of managed helper functions to reduce the number ofinstructions needed.3. the continuation is filled in with a copy of the data from the stack.4. the calling convention is non-traditional for the extra return value.for the continuation argument, instead of representing it on the stackas part of the return value, we represent it as a field on theinterpreterframe, and update and check that frame as needed. this allowsthe vast majority of the code in the compiler to ignore the concept ofruntime-async.5. the call stub generator is also modified to pass the extra parameter,but more significantly, all of the stubs which call into the interpreterare setup to now capture the continuation argument and put it into thespecial return register.6. tests have been updated to do less work when running under theinterpreter. some of the existing tests were designed specifically totrigger various rejit thresholds, and while that is a fine thing to testin the jit, the interpreter is far slower, and needs a differentapproach.todo before merge~1. remove the changes to enable runtimeasync by default.~~2. add documentation about how the interpreter async abi works~~3. add documentation about what a code generator needs to do to makeruntime async work~~4. i'm pretty sure il peep handling has a bug handling any of the 2byte opcodes. this needs to be tested.~---------"
dotnet/runtime,561639700f5bd5ad497c8d26529d512bb593f753,"Fix interpreter delegate args alignment (#122163)

The recent fix to handle alignment of the first argument of a delegate
call when we were removing the delegate obj from the stack was not
complete. It only handled the case when the first argument required 16
byte alignment. But the same issue exists if any of the args requires
this alignment.

This change fixes it by finding the first argument that requires 16 byte
alignment and then moving the args before that as usual and moving that
arg and all following ones to 16 byte aligned location. This preserves
the alignment for the rest of the stuff too.

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-12-04 22:39:55+00:00,Jan Vorlicek,1,ba911fb2a3eb957cf8caa9860cc8053b145b889d,"[clr-interp] Fix issue where a delegate directly wraps another delegate (#122205)

In the interpreter we use the CallStub of a delegate invoke method for
both invoking the Invoke method directly as well as for handling the
calling convention details for a fallback call to use the function
pointer embedded in the delegate object.

In the current logic when we construct the call stub for for the
`Invoke` method for the use of just doing signature handling for
delegate invoke, we didn't supply it with a target pointer, we just use
NULL. When actually dispatching, we copy the `CallStubHeader` to the
stack and then fill in the target pointer. It turns out that this is
inadequate when a delegate directly wraps a delegate. Since we share the
CallStubHeader for both purposes, we end up simply dispatching to `NULL`
which will cause an access violation. The fix is to always fill in the
CallStubHeader completely, but still stomp the target pointer when we
are doing the delegate invoke path.

Included in this change is a coreclr test case to avoid the need to have
some code in the xunit testharness which hits this in the libraries
test.",2,30,11,fix interpreter delegate args alignment (issue_ref)the recent fix to handle alignment of the first argument of a delegatecall when we were removing the delegate obj from the stack was notcomplete. it only handled the case when the first argument required 16byte alignment. but the same issue exists if any of the args requiresthis alignment.this change fixes it by finding the first argument that requires 16 bytealignment and then moving the args before that as usual and moving thatarg and all following ones to 16 byte aligned location. this preservesthe alignment for the rest of the stuff too.---------
dotnet/runtime,a0d68590430b83e7b5de292a84e68a20169faf2a,"Document ILC dependency graph EventSource collection (#122086)

This is useful for investigating ILC issues on linux.

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: sbomer <787361+sbomer@users.noreply.github.com>
Co-authored-by: Sven Boemer <sbomer@gmail.com>
Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-12-04 23:15:58+00:00,Copilot,0,,,1,72,0,document ilc dependency graph eventsource collection (issue_ref)this is useful for investigating ilc issues on linux.---------
dotnet/runtime,8eb90a6dba628a6fbdc470277e64e4b9aa72994f,"[clr-interp] Add support for explicit this calli to a valuetype method (#122196)

- Fixes GitHub_35384
- Only required using the correct helper routines. The rest of the
implementation fell out from there",2025-12-05 00:14:51+00:00,David Wrighton,1,5d5720748cfd7207e2f23ada63bfa12cd8a81b60,"[clr-interp] Fix GitHub_9651 by allowing an I4 to be treated as a ByRef (#122189)

- This is part of allowing I4 and I to be interchangeable, since some
forms of ByRef will devolve to be treated as an I
- This isn't a fully general purpose fix, but in cases where it is valid
code it will make it work.",2,8,4,[clr-interp] add support for explicit this calli to a valuetype method (issue_ref)- fixes github_35384- only required using the correct helper routines. the rest of theimplementation fell out from there
dotnet/runtime,c4066cf778a3fde110c0ab6691baa941d95a5e0c,"Adding support for aligning AllocateTypeAssociatedMemory (#122094)

This resolves #118897

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-12-05 04:16:44+00:00,Tanner Gooding,1,831d3cca94a36935a1b2b5af178e01c0af882b5e,"[RuntimeAsync] Remove reflection TODOs. Add tests. (#122517)

Fixes: #121764
Fixes: #121762

Following up on TODOs. Contributes to: #115094

Added scenarios for other ways to get reflection info on methods. 
Checks that we only see the formal definitions, never thunks/stubs.

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",8,183,14,adding support for aligning allocatetypeassociatedmemory (issue_ref)this resolves issue_ref---------
dotnet/runtime,304e5a8e52b80f2c7d466c42f5bac8191ad78f71,"JIT: Recognize both 32->64 bit zero extension patterns for SCEVs (#122184)

The JIT has two ways to represent a 32->64 bit zero extension. For array
indexing, for instance, we produce the following:
```
n---G+-----                            │  └──▌  IND       int    <l:$203, c:$143>
-----+-----                            │     └──▌  ARR_ADDR  byref int[] $81
-----+-N---                            │        └──▌  ADD       byref  $300
-----+-----                            │           ├──▌  LCL_VAR   ref    V01 arg1         u:1 $100
-----+-N---                            │           └──▌  ADD       long   $282
-----+-N---                            │              ├──▌  LSH       long   $281
-----+---U-                            │              │  ├──▌  CAST      long <- uint $280 // zero extension (U flag)
-----+-----                            │              │  │  └──▌  LCL_VAR   int    V03 loc1         u:3 $241
-----+-N---                            │              │  └──▌  CNS_INT   long   2 $2c0
-----+-----                            │              └──▌  CNS_INT   long   16 $2c2
```

For an explicit zero extension, however, such as when indexing a raw
pointer with `ptr[(uint)i]`, we produce the following:
```
---XG+-----                            ├──▌  IND       int    <l:$142, c:$141>
-----+-N---                            │  └──▌  ADD       long   $1c2
-----+-----                            │     ├──▌  LCL_VAR   long   V01 arg1         u:1 $80
-----+-N---                            │     └──▌  LSH       long   $1c1
-----+---U-                            │        ├──▌  CAST      long <- ulong <- uint $1c0 // zero extension (TYP_ULONG and U flag)
-----+-----                            │        │  └──▌  LCL_VAR   int    V04 loc1         u:3 $181
-----+-----                            │        └──▌  CNS_INT   long   2 $200
-----+-----                            └──▌  LCL_VAR   int    V03 loc0         u:3 (last use) $180
```

SCEV analysis did not recognize the latter form as a zero extension.

Example:
```csharp
int TestInt(int* data, int count)
{
    int sum = 0;
    for (int i = 0; i < count; i++)
    {
        sum += data[(uint)i];
    }

    return sum;
}
```

Before:
```asm
G_M29388_IG02:  ;; offset=0x0000
       xor      eax, eax
       xor      ecx, ecx
       test     r8d, r8d
       jle      SHORT G_M29388_IG04
       align    [0 bytes for IG03]
						;; size=9 bbWeight=1 PerfScore 1.75

G_M29388_IG03:  ;; offset=0x0009
       mov      r10d, ecx
       add      eax, dword ptr [rdx+4*r10]
       inc      ecx
       cmp      ecx, r8d
       jl       SHORT G_M29388_IG03
						;; size=14 bbWeight=4 PerfScore 19.00
```

After:
```asm
G_M29388_IG02:  ;; offset=0x0000
       xor      eax, eax
       test     r8d, r8d
       jle      SHORT G_M29388_IG05
						;; size=7 bbWeight=1 PerfScore 1.50

G_M29388_IG03:  ;; offset=0x0007
       align    [0 bytes for IG04]
						;; size=0 bbWeight=0.50 PerfScore 0.00

G_M29388_IG04:  ;; offset=0x0007
       add      eax, dword ptr [rdx]
       add      rdx, 4
       dec      r8d
       jne      SHORT G_M29388_IG04
						;; size=11 bbWeight=4 PerfScore 18.00
```",2025-12-05 07:58:34+00:00,Jakob Botsch Nielsen,0,,,1,1,1,"jit: recognize both 32->64 bit zero extension patterns for scevs (issue_ref)the jit has two ways to represent a 32->64 bit zero extension. for arrayindexing, for instance, we produce the following:for an explicit zero extension, however, such as when indexing a rawpointer with , we produce the following:scev analysis did not recognize the latter form as a zero extension.example:before:after:"
dotnet/runtime,5d5720748cfd7207e2f23ada63bfa12cd8a81b60,"[clr-interp] Fix GitHub_9651 by allowing an I4 to be treated as a ByRef (#122189)

- This is part of allowing I4 and I to be interchangeable, since some
forms of ByRef will devolve to be treated as an I
- This isn't a fully general purpose fix, but in cases where it is valid
code it will make it work.",2025-12-05 09:49:45+00:00,David Wrighton,1,653f60a0e1ea0f2065ab282e09d98a371b63d51f,"[clr-interp] Fix Runtime_74635_1 test (#122194)

This is an interesting test which touches on a poorly design/documented
portion of the ECMA spec. Notably, what can be done with the this
pointer of a structure during its construction. Notably, if the this
pointer is stored somewhere else, and then that pointer is used then
there is a possibility of mutating a value on the IL evaluation stack in
the current interpreter implementation. As that is not considered a
thing which should be possible, RyuJIT has the policy of creating
function local temporaries for the newobj instruction, and then copying
the result to a location on the evaluation stack. This change matches
that behavior which is the current reading of the correct behavior
according to the ECMA standard.",1,1,1,"[clr-interp] fix github_9651 by allowing an i4 to be treated as a byref (issue_ref)- this is part of allowing i4 and i to be interchangeable, since someforms of byref will devolve to be treated as an i- this isn't a fully general purpose fix, but in cases where it is validcode it will make it work."
dotnet/runtime,ba911fb2a3eb957cf8caa9860cc8053b145b889d,"[clr-interp] Fix issue where a delegate directly wraps another delegate (#122205)

In the interpreter we use the CallStub of a delegate invoke method for
both invoking the Invoke method directly as well as for handling the
calling convention details for a fallback call to use the function
pointer embedded in the delegate object.

In the current logic when we construct the call stub for for the
`Invoke` method for the use of just doing signature handling for
delegate invoke, we didn't supply it with a target pointer, we just use
NULL. When actually dispatching, we copy the `CallStubHeader` to the
stack and then fill in the target pointer. It turns out that this is
inadequate when a delegate directly wraps a delegate. Since we share the
CallStubHeader for both purposes, we end up simply dispatching to `NULL`
which will cause an access violation. The fix is to always fill in the
CallStubHeader completely, but still stomp the target pointer when we
are doing the delegate invoke path.

Included in this change is a coreclr test case to avoid the need to have
some code in the xunit testharness which hits this in the libraries
test.",2025-12-05 09:53:02+00:00,David Wrighton,1,b456e71b0b1353593ba4e5d5b6466054eb95f3e3,"Enable interpreter stack overflow handling (#122204)

Stack overflow of the interpreter stack was not being handled yet. The
stack overflow coreclr test was failing due to that.

This change adds checks when a called method frame would not fit the
interpreter stack and fires the stack overflow handling in that case.

I also had to fix the Thread::UnwindToFirstManagedFrame to work for the
interpreter frames. Before that, it would not detect them and it would
unwind through the InterpExecMethod and further native frames.",4,33,2,"[clr-interp] fix issue where a delegate directly wraps another delegate (issue_ref)in the interpreter we use the callstub of a delegate invoke method forboth invoking the invoke method directly as well as for handling thecalling convention details for a fallback call to use the functionpointer embedded in the delegate object.in the current logic when we construct the call stub for for the method for the use of just doing signature handling fordelegate invoke, we didn't supply it with a target pointer, we just usenull. when actually dispatching, we copy the to thestack and then fill in the target pointer. it turns out that this isinadequate when a delegate directly wraps a delegate. since we share thecallstubheader for both purposes, we end up simply dispatching to which will cause an access violation. the fix is to always fill in thecallstubheader completely, but still stomp the target pointer when weare doing the delegate invoke path.included in this change is a coreclr test case to avoid the need to havesome code in the xunit testharness which hits this in the librariestest."
dotnet/runtime,fec33befd9c77433c4e1b3c43591ba3e87354464,"[wasm][coreclr] 2nd part of call helpers generator, reverse calls (#122007)

The 2nd part generates reverse thunks for methods decorated with
`UnmanagedCallersOnlyAttribute`. It also generates entrypoints when
specified by the attribute.

These methods can be called either through the entrypoint or as function
pointers (from IL or native code).

Sample code that will use the generated callhelpers:

```csharp
using System.Runtime.InteropServices;

unsafe {
    var fn = (delegate* unmanaged<void>)&UMCOMethod;

    fn();
}

[UnmanagedCallersOnly]
static void UMCOMethod()
{
    Console.WriteLine(""Hello from UMCOMethod"");
}
```

The calls using function pointers use hashing tables with keys and
fallback keys. The primary key is used when the assembly containing the
UMCO method hasn't changed, and the key is based on assembly FQN and
method token. The fallback key is used when the assembly has changed
(for example during trimming), and is based on assembly name, method
name, namespace, type, and number of parameters.

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>
Co-authored-by: Adeel Mujahid <3840695+am11@users.noreply.github.com>
Co-authored-by: Aaron R Robinson <arobins@microsoft.com>",2025-12-05 10:15:27+00:00,Radek Doulik,0,,,10,1114,51,"[wasm][coreclr] 2nd part of call helpers generator, reverse calls (issue_ref)the 2nd part generates reverse thunks for methods decorated with. it also generates entrypoints whenspecified by the attribute.these methods can be called either through the entrypoint or as functionpointers (from il or native code).sample code that will use the generated callhelpers:the calls using function pointers use hashing tables with keys andfallback keys. the primary key is used when the assembly containing theumco method hasn't changed, and the key is based on assembly fqn andmethod token. the fallback key is used when the assembly has changed(for example during trimming), and is based on assembly name, methodname, namespace, type, and number of parameters.---------"
dotnet/runtime,ccced2eef9f5048e87b1625d22ee1a3a1cf66333,"Initialize variable in mono_utility_thread_send_sync (#121490)

By design `done` variable should be set to false and changed to true,
when thread finished. But for now, `done` is not initialized.

`done` is used in the loop to check finish status and then as the return
value. An uninitialized variable contains a random value. In most cases,
this is interpreted as true and leads to early function termination and
an incorrect return value.

Signed-off-by: Aleksandr Dovydenkov <asd@altlinux.org>.
Found by Linux Verification Center (linuxtesting.org) with SVACE.",2025-12-05 12:10:44+00:00,Dovydenkov Aleksandr,0,,,1,1,1,"initialize variable in mono_utility_thread_send_sync (issue_ref)by design variable should be set to false and changed to true,when thread finished. but for now, is not initialized. is used in the loop to check finish status and then as the returnvalue. an uninitialized variable contains a random value. in most cases,this is interpreted as true and leads to early function termination andan incorrect return value."
dotnet/runtime,0d59ec03c66b1610b01979500d9031add7cf1822,"Fix memory leak in open_aot_data (#121488)

Free filename string, that allocates in open_aot_data function and leaks
on return.

Signed-off-by: Aleksandr Dovydenkov <asd@altlinux.org>.
Found by Linux Verification Center (linuxtesting.org) with SVACE.",2025-12-05 12:23:01+00:00,Dovydenkov Aleksandr,1,ea413ca5c649ee21f6acda54fe1b2ae6daa2ee12,"[Mono][AOT] Add missing unlock in `mono_aot_get_class_from_name` if aot table_size == 0 (#122097)

Fixes https://github.com/dotnet/runtime/issues/122096",1,1,0,"fix memory leak in open_aot_data (issue_ref)free filename string, that allocates in open_aot_data function and leakson return."
dotnet/runtime,726b3dffc2efd466b6cb8526d4a1c96cc0d6a852,"[main] Update dependencies from dotnet/icu (#122214)

This pull request updates the following dependencies

[marker]: <> (Begin:4247a230-8931-4538-5b64-08d8d8feb47e)
## From https://github.com/dotnet/icu
- **Subscription**:
[4247a230-8931-4538-5b64-08d8d8feb47e](https://maestro.dot.net/subscriptions?search=4247a230-8931-4538-5b64-08d8d8feb47e)
- **Build**:
[20251130.1](https://dev.azure.com/dnceng/internal/_build/results?buildId=2850805)
([292720](https://maestro.dot.net/channel/8297/github:dotnet:icu/build/292720))
- **Date Produced**: December 1, 2025 6:18:29 AM UTC
- **Commit**:
[f30459348023443026d006825c234914fd57589a](https://github.com/dotnet/icu/commit/f30459348023443026d006825c234914fd57589a)
- **Branch**:
[dotnet/main](https://github.com/dotnet/icu/tree/dotnet/main)

[DependencyUpdate]: <> (Begin)

- **Dependency Updates**:
  - From [11.0.0-alpha.1.25556.1 to 11.0.0-alpha.1.25580.1][1]
     - Microsoft.NETCore.Runtime.ICU.Transport

[1]: https://github.com/dotnet/icu/compare/405615f119...f304593480

[DependencyUpdate]: <> (End)


[marker]: <> (End:4247a230-8931-4538-5b64-08d8d8feb47e)

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-12-05 12:31:53+00:00,dotnet-maestro[bot],0,,,2,3,3,"[main] update dependencies from dotnet/icu (issue_ref)this pull request updates the following dependencies[marker]: <> (begin:4247a230-8931-4538-5b64-08d8d8feb47e)## from - **subscription**:[4247a230-8931-4538-5b64-08d8d8feb47e](- **build**:[20251130.1](([292720](- **date produced**: december 1, 2025 6:18:29 am utc- **commit**:[f30459348023443026d006825c234914fd57589a](- **branch**:[dotnet/main]([dependencyupdate]: <> (begin)- **dependency updates**: - from [11.0.0-alpha.1.25556.1 to 11.0.0-alpha.1.25580.1][1] - microsoft.netcore.runtime.icu.transport[1]: [dependencyupdate]: <> (end)[marker]: <> (end:4247a230-8931-4538-5b64-08d8d8feb47e)"
dotnet/runtime,89575098fc4246767c8b3cfbe54961870be4046f,"Fold mscorrc.dll into coreclr.dll (#122135)

Simplifies resource loading and get rid of module loading.",2025-12-05 13:02:28+00:00,Huo Yaoyuan,1,ba80e54c3810675d8141fe6601d139dd112b280f,"Improve stack overflow stack trace pretty print (#122243)

The current algorithm used for the stack overflow stactrace pretty
printing isn't able to find repetitions that don't start at the first
frame. That leads to huge stack traces when there are few non-repeated
frames on the top of the stack, e.g. when a recursion in managed method
calls to some common chain of methods and the stack overflow occurs down
that chain and not in the recursive part.

This change fixes that. When no repeated sequence is found at the top of
the stack, it tries to search from the next frame and so on until a
repeated sequence is identified.

Close #118218

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",29,92,679,fold mscorrc.dll into coreclr.dll (issue_ref)simplifies resource loading and get rid of module loading.
dotnet/runtime,591f6f73c07f56908a5e31776b64ec7f1788e848,[browser] Use WebAssembly SDK for runtime tests (#120330),2025-12-05 13:48:56+00:00,Marek Fišera,1,d922f69df90d76d7edb0038c7de582b057d8c54b,"Switch default CI focus to osx-arm64 for CoreCLR PRs (#122085)

Apple Silicon (ARM64) is now the primary macOS architecture. This PR
swaps `osx-x64` and `osx-arm64` in the default CI matrix so that
`osx-arm64` runs libraries debug tests by default, while `osx-x64` falls
back to priority 0 tests only.

### Changes to `eng/pipelines/runtime.yml`

**Build jobs:**
- `CoreCLR_Libraries` with `libs.tests`: `osx_x64` → `osx_arm64`
- `CoreCLR_Libraries` without tests (installer deps): `osx_arm64` →
`osx_x64`
- `Libraries_CheckedCoreCLR` with `libs.tests`: `osx_x64` → `osx_arm64`
- `Libraries_CheckedCoreCLR` without tests: `osx_arm64` → `osx_x64`

**Test execution jobs:**
- CoreCLR runtime tests main job: `osx_x64` → `osx_arm64`
- Libraries debug test execution: `osx_x64` → `osx_arm64`

**Dependency updates:**
- `Installer_Build_And_Test` artifact dependencies swapped to match new
build configurations
- `osx_x64` condition updated from `AppleSilicon` trigger to standard
`coreclr` change detection

The platform matrix comment table updated to reflect `osx-arm64` in the
debug test configuration (using lowercase RID format for consistency).

<!-- START COPILOT CODING AGENT SUFFIX -->



<details>

<summary>Original prompt</summary>

> 
> ----
> 
> *This section details on the original issue you should resolve*
> 
> <issue_title>Switch Default CI Focus to osx-arm64 for CoreCLR
PRs</issue_title>
> <issue_description>In the default CI set that runs automatically when
a change is made to `src/coreclr`, only **priority 0 test legs** are
executed for `osx-arm64`. Meanwhile, for `osx-x64`, the **libraries
debug tests** are run by default alongside the priority 0 tests. Given
that Apple has moved to ARM64 (Apple Silicon) as the primary
architecture, it seems logical to prioritize `osx-arm64` in the default
CI, rather than `osx-x64`.
> 
> Currently, we can manually trigger the `osx-arm64` libraries debug
tests if needed, but they are not part of the automatic/default test
set.
> 
> If expanding the CI set for `osx-arm64` leads to longer test cycles,
it may be worth considering the trade-off between testing time and
coverage, or potentially rebalancing the priority of `osx-x64`
tests.</issue_description>
> 
> ## Comments on the Issue (you are @copilot in this section)
> 
> <comments>
> </comments>
> 


</details>

- Fixes dotnet/runtime#108570

<!-- START COPILOT CODING AGENT TIPS -->
---

💬 We'd love your input! Share your thoughts on Copilot coding agent in
our [2 minute survey](https://gh.io/copilot-coding-agent-survey).

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: agocke <515774+agocke@users.noreply.github.com>
Co-authored-by: Andy Gocke <angocke@microsoft.com>",84,468,1034,[browser] use webassembly sdk for runtime tests (issue_ref)
dotnet/runtime,ce17dcbb7141ee7ab07b32d3692a06904cb4b3db,[wasm] Remove duplicated UseMonoRuntime=true from SDK (#121789),2025-12-05 13:51:58+00:00,Marek Fišera,0,,,2,0,2,[wasm] remove duplicated usemonoruntime=true from sdk (issue_ref)
dotnet/runtime,2fb929bc5034e0b98ea510c5cb489e0a563896ce,"[clr-ios] Add R2R and interpreter functional tests on iOS (#122036)

## Description

This PR adds two smoke functional tests - one for R2R and one for the
interpreter.",2025-12-05 14:10:57+00:00,Milos Kotlar,1,4317fa71537d91322177c42301fb442fb7bdee1c,"Fix condition checks for Crossgen2 in AppleBuild.props (#122296)

## Description

This PR fixes condition checks for Crossgen2 in AppleBuild.props.

```
The imported project ""/__w/1/s/artifacts/bin/Crossgen2Tasks/Checked/net10.0/Microsoft.NET.CrossGen.props"" was not found.
```",9,61,39,[clr-ios] add r2r and interpreter functional tests on ios (issue_ref)## descriptionthis pr adds two smoke functional tests - one for r2r and one for theinterpreter.
dotnet/runtime,653f60a0e1ea0f2065ab282e09d98a371b63d51f,"[clr-interp] Fix Runtime_74635_1 test (#122194)

This is an interesting test which touches on a poorly design/documented
portion of the ECMA spec. Notably, what can be done with the this
pointer of a structure during its construction. Notably, if the this
pointer is stored somewhere else, and then that pointer is used then
there is a possibility of mutating a value on the IL evaluation stack in
the current interpreter implementation. As that is not considered a
thing which should be possible, RyuJIT has the policy of creating
function local temporaries for the newobj instruction, and then copying
the result to a location on the evaluation stack. This change matches
that behavior which is the current reading of the correct behavior
according to the ECMA standard.",2025-12-05 14:20:24+00:00,David Wrighton,1,50a3154c40f01c469537d21efb5b28513d888cb4,"[clr-interp] Fix issue around compliance with the rules about lazy initialized basic block stack details (#122253)

- When we added support for basic blocks with undefined stacks to be
initialized with a stack state via a backwards branch we missed the case
of basic blocks which begin after a ret instruction

This fixes the jit\Methodical\tailcall\test_implicit tests.",1,34,0,"[clr-interp] fix runtime_74635_1 test (issue_ref)this is an interesting test which touches on a poorly design/documentedportion of the ecma spec. notably, what can be done with the thispointer of a structure during its construction. notably, if the thispointer is stored somewhere else, and then that pointer is used thenthere is a possibility of mutating a value on the il evaluation stack inthe current interpreter implementation. as that is not considered athing which should be possible, ryujit has the policy of creatingfunction local temporaries for the newobj instruction, and then copyingthe result to a location on the evaluation stack. this change matchesthat behavior which is the current reading of the correct behavioraccording to the ecma standard."
dotnet/runtime,b456e71b0b1353593ba4e5d5b6466054eb95f3e3,"Enable interpreter stack overflow handling (#122204)

Stack overflow of the interpreter stack was not being handled yet. The
stack overflow coreclr test was failing due to that.

This change adds checks when a called method frame would not fit the
interpreter stack and fires the stack overflow handling in that case.

I also had to fix the Thread::UnwindToFirstManagedFrame to work for the
interpreter frames. Before that, it would not detect them and it would
unwind through the InterpExecMethod and further native frames.",2025-12-05 14:21:45+00:00,Jan Vorlicek,1,880f250f9d640cd2306d49953da2ffce000feb07,"[clr-interp] fix native int input to switch statements (#122364)

Fixes Runtime_68568 test

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2,76,12,"enable interpreter stack overflow handling (issue_ref)stack overflow of the interpreter stack was not being handled yet. thestack overflow coreclr test was failing due to that.this change adds checks when a called method frame would not fit theinterpreter stack and fires the stack overflow handling in that case.i also had to fix the thread::unwindtofirstmanagedframe to work for theinterpreter frames. before that, it would not detect them and it wouldunwind through the interpexecmethod and further native frames."
dotnet/runtime,495fca5e9f048686c70853c0057b9fbb865f1d02,Move ILVerify tests to run like the ILCompiler.TypeSystem managed tests (#122083),2025-12-05 15:40:51+00:00,Jeremy Koritzinsky,0,,,91,300,158,move ilverify tests to run like the ilcompiler.typesystem managed tests (issue_ref)
dotnet/runtime,553946cba68a657fc0edf3fb9f28dd2119453b7a,"[RyuJit/WASM] Clean up some code (#122208)

Remove unused register functions and shrink the instruction format
array.",2025-12-05 17:18:10+00:00,SingleAccretion,1,74cf618d63c3d092eb91a9bb00ba8152cc2dfc76,"[Wasm RyuJit] Add constant emitting support (#122162)

Adds infrastructure for emitting integer and floating-point constants in
the WebAssembly RyuJIT backend. This enables the backend to generate
constant loading instructions (i32.const, i64.const, f32.const,
f64.const) when constant nodes appear in the IR.

- Fixes dotnet/runtime#122161

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: Katelyn Gadd <kg@luminance.org>",6,11,41,[ryujit/wasm] clean up some code (issue_ref)remove unused register functions and shrink the instruction formatarray.
dotnet/runtime,2c911651ab05a78ca58f02777b34302ae3a2e07e,"Invoke members for dispatch interfaces on that interface's corresponding IDispatch pointer, not on the canonical one (#122200)",2025-12-05 17:54:07+00:00,Jeremy Koritzinsky,0,,,4,165,14,"invoke members for dispatch interfaces on that interface's corresponding idispatch pointer, not on the canonical one (issue_ref)"
dotnet/runtime,a7c3f7a475883b4d8b4ae88402842da36b231b27,"[main] Source code updates from dotnet/dotnet (#121614)

> [!NOTE]
> This is a codeflow update. It may contain both source code changes
from
> [the VMR](https://github.com/dotnet/dotnet)
> as well as dependency updates. Learn more
[here](https://github.com/dotnet/dotnet/tree/main/docs/Codeflow-PRs.md).

This pull request brings the following source code changes














[marker]: <> (Begin:f7901f87-9f24-40d6-9bc1-564863937237)

## From https://github.com/dotnet/dotnet
- **Subscription**:
[f7901f87-9f24-40d6-9bc1-564863937237](https://maestro.dot.net/subscriptions?search=f7901f87-9f24-40d6-9bc1-564863937237)
- **Build**:
[20251202.5](https://dev.azure.com/dnceng/internal/_build/results?buildId=2851916)
([293020](https://maestro.dot.net/channel/8298/github:dotnet:dotnet/build/293020))
- **Date Produced**: December 2, 2025 11:00:49 PM UTC
- **Commit**:
[78c39718bb6e8008ba9d2dbd00d550bee6be9f59](https://github.com/dotnet/dotnet/commit/78c39718bb6e8008ba9d2dbd00d550bee6be9f59)
- **Commit Diff**:
[e545239...78c3971](https://github.com/dotnet/dotnet/compare/e545239117919cda700be149a2e9a032374fc284...78c39718bb6e8008ba9d2dbd00d550bee6be9f59)
- **Branch**: [main](https://github.com/dotnet/dotnet/tree/main)

**Updated Dependencies**
- From [5.3.0-1.25528.108 to 5.3.0-1.25602.105][14]
  - Microsoft.CodeAnalysis
  - Microsoft.CodeAnalysis.Analyzers
  - Microsoft.CodeAnalysis.CSharp
  - Microsoft.Net.Compilers.Toolset
- From [10.0.100-rc.2.25528.108 to 10.0.100-rc.3.25602.105][14]
  - Microsoft.CodeAnalysis.NetAnalyzers
  - Microsoft.DotNet.ApiCompat.Task
- Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport
- From [11.0.0-beta.25528.108 to 11.0.0-beta.25602.105][14]
  - Microsoft.DotNet.Arcade.Sdk
  - Microsoft.DotNet.Build.Tasks.Archives
  - Microsoft.DotNet.Build.Tasks.Feed
  - Microsoft.DotNet.Build.Tasks.Installers
  - Microsoft.DotNet.Build.Tasks.Packaging
  - Microsoft.DotNet.Build.Tasks.TargetFramework
  - Microsoft.DotNet.Build.Tasks.Templating
  - Microsoft.DotNet.Build.Tasks.Workloads
  - Microsoft.DotNet.CodeAnalysis
  - Microsoft.DotNet.GenAPI
  - Microsoft.DotNet.GenFacades
  - Microsoft.DotNet.Helix.Sdk
  - Microsoft.DotNet.PackageTesting
  - Microsoft.DotNet.RemoteExecutor
  - Microsoft.DotNet.SharedFramework.Sdk
  - Microsoft.DotNet.XliffTasks
  - Microsoft.DotNet.XUnitExtensions
- From [0.11.5-alpha.25528.108 to 0.11.5-alpha.25602.105][14]
  - Microsoft.DotNet.Cecil
- From [2.9.3-beta.25528.108 to 2.9.3-beta.25602.105][14]
  - Microsoft.DotNet.XUnitAssert
  - Microsoft.DotNet.XUnitConsoleRunner
- From [10.0.0-rc.1.25528.108 to 10.0.0-rc.3.25602.105][14]
  - Microsoft.NET.Sdk.IL
  - Microsoft.NETCore.App.Ref
  - Microsoft.NETCore.ILAsm
  - runtime.native.System.IO.Ports
  - System.Reflection.Metadata
  - System.Reflection.MetadataLoadContext
  - System.Text.Json
- From [7.0.0-preview.1.2908 to 7.0.0-preview.1.10305][14]
  - NuGet.Frameworks
  - NuGet.Packaging
  - NuGet.ProjectModel
  - NuGet.Versioning
- From [2.0.0-rc.1.25528.108 to 3.0.0-alpha.1.25602.105][14]
  - System.CommandLine
- From [19.1.0-alpha.1.25513.1 to
19.1.0-alpha.1.25564.1](https://github.com/dotnet/dotnet/compare/816523df23...df75e5e592)
  - runtime.linux-arm64.Microsoft.NETCore.Runtime.JIT.Tools
  - runtime.linux-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang
  - runtime.linux-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk
  - runtime.linux-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools
  - runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.JIT.Tools
- runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang
  - runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk
  - runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools
  - runtime.linux-musl-x64.Microsoft.NETCore.Runtime.JIT.Tools
  - runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang
  - runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk
  - runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools
  - runtime.linux-x64.Microsoft.NETCore.Runtime.JIT.Tools
  - runtime.linux-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang
  - runtime.linux-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk
  - runtime.linux-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools
  - runtime.osx-arm64.Microsoft.NETCore.Runtime.JIT.Tools
  - runtime.osx-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang
  - runtime.osx-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk
  - runtime.osx-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools
  - runtime.osx-x64.Microsoft.NETCore.Runtime.JIT.Tools
  - runtime.osx-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang
  - runtime.osx-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk
  - runtime.osx-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools
  - runtime.win-arm64.Microsoft.NETCore.Runtime.JIT.Tools
  - runtime.win-x64.Microsoft.NETCore.Runtime.JIT.Tools
  - runtime.win-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang
  - runtime.win-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk
  - runtime.win-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools

[marker]: <> (End:f7901f87-9f24-40d6-9bc1-564863937237)














[1]: https://github.com/dotnet/dotnet/compare/e545239117...679ec82275

[2]: https://github.com/dotnet/dotnet/compare/e545239117...88c87899e7

[3]: https://github.com/dotnet/dotnet/compare/e545239117...feff871cec

[4]: https://github.com/dotnet/dotnet/compare/e545239117...9447c7095a

[5]: https://github.com/dotnet/dotnet/compare/e545239117...ea77dd1498

[6]: https://github.com/dotnet/dotnet/compare/e545239117...e9a2ab63ad

[7]: https://github.com/dotnet/dotnet/compare/e545239117...cc7f6e84d8

[8]: https://github.com/dotnet/dotnet/compare/e545239117...d119b40e8f

[9]: https://github.com/dotnet/dotnet/compare/e545239117...de417a619f

[10]: https://github.com/dotnet/dotnet/compare/e545239117...305623c3cd

[11]: https://github.com/dotnet/dotnet/compare/e545239117...791f8df110

[12]: https://github.com/dotnet/dotnet/compare/e545239117...3b5d49bb10

[13]: https://github.com/dotnet/dotnet/compare/e545239117...5b18350222

[14]: https://github.com/dotnet/dotnet/compare/e545239117...78c39718bb
[marker]: <> (Start:Footer:CodeFlow PR)

## Associated changes in source repos
-
https://github.com/dotnet/arcade/compare/d48732057be73512b3bac9c01eeacd59398c16d5...e29f11a331730bd4f51024ba83fa067d2ab80ca9
-
https://github.com/dotnet/aspnetcore/compare/d4349298d046f24282a6030d8935e81aa2440141...70d851104f739fb906aabcd6a07c0935ce2549c9
-
https://github.com/dotnet/cecil/compare/2a768f2c8a54077cd7d788bb135caeb4d7206a15...82f47fc2ff84b3d94e910147d52f2e6795f6ae21
-
https://github.com/dotnet/command-line-api/compare/0b4618bc860374941e605d8eb1d2bc29c32801db...cf5fd8d696450a48d3cc75a7a1792d34b5303f88
-
https://github.com/dotnet/deployment-tools/compare/c0c52874069a4dc0fe1e880014e6a5f316e9d3b8...84ccc0553245e90355f32ea8ddcf169d9bd8f640
-
https://github.com/dotnet/efcore/compare/af2d7b886edfc378446d36583fb1d5d6496d8c1d...de10f40f8bbe7f19bacb817c48be5e5c07584437
-
https://github.com/dotnet/emsdk/compare/aead567b56fe284ee05b3bb324705b76331d4719...f8b85873c9157f00b4951a78977fa87e3ab7c628
-
https://github.com/dotnet/fsharp/compare/12efe3b5121d8a662d1431763796dfd278af9129...61c1a22068d208a88f757bd48d5c899db5568837
-
https://github.com/dotnet/msbuild/compare/ad915a4f47346b746998dabaa541a7e3bab1d6cd...dd27cf39334b66329ff8eea71db6e8153e0929c6
-
https://github.com/dotnet/razor/compare/bb00268d70c75481f4a95747da2f45417ed8b211...2d8783f051d7f5d31fc1b2014de263ded199eb3f
-
https://github.com/dotnet/runtime/compare/54689bca7baf58322feb9d83811e222b88582aa7...efb3990a9668fbdf22551ee93ffee9332086e052
-
https://github.com/dotnet/scenario-tests/compare/082359066ee0064039b9b1f1f025bdd0507d06de...21ded7efec7463ab807b22a8e119b228d4039a1c
-
https://github.com/dotnet/source-build-reference-packages/compare/0eed3a94644603ef1c0095bc3f1bff525fff876e...feab92a4bbe50a61eae220b7b4aa287ae5322431
-
https://github.com/dotnet/sourcelink/compare/9b949eeb2d5dba635c06ae936b50d2141b0aabe2...c84e22bedd248cae51c24bdef5cf4022409fc671
-
https://github.com/dotnet/symreader/compare/ee968d4a1bf717f4bba3a4ffc3f93b5c9870b117...2255aa6d6c21541848933c33f72e60363041abaf
-
https://github.com/dotnet/templating/compare/0cb802c2e5a42e897598ac4ad238f4892bfc7896...41ef93aacf72633b58372a9841d8940f6d87ae26
-
https://github.com/microsoft/vstest/compare/81d120f85fbdddc7b981e910a127bd6ef913cd42...154e8babf0b97312a403b6ccf84cf1498a32ecea
-
https://github.com/dotnet/windowsdesktop/compare/9f2ae28ea4f111e6a336682484e5aa412e114f3c...132afbade9e2ce626f26e27c136f34af73dde2f1
-
https://github.com/dotnet/winforms/compare/c43e8c73633ca83a3dd01d54b507af8caef2ffc4...1a8c138be340d80c7e288e044e8a80b7f4adeb1b
-
https://github.com/dotnet/wpf/compare/519468037f9b797440548c4d744fc7807573026f...038222ac08b36950e581b4eebad21d901df2d084
-
https://github.com/dotnet/xdt/compare/ec086785dfa9af4a0dc58eca3e5c969e3d0c6003...a37116d1c37e696cc70fc138c01d02dff7542d82

<!--
    To diff the source repo and PR branch contents locally, run:
darc vmr diff --name-only
https://github.com/dotnet/dotnet:78c39718bb6e8008ba9d2dbd00d550bee6be9f59..https://github.com/dotnet/runtime:darc-main-0576f04d-232c-4851-9239-e8bb783a5402
-->
[marker]: <> (End:Footer:CodeFlow PR)

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Alexander Köplinger <alex.koeplinger@outlook.com>
Co-authored-by: Milos Kotlar <kotlarmilos@gmail.com>
Co-authored-by: Larry Ewing <lewing@microsoft.com>",2025-12-06 03:53:03+00:00,dotnet-maestro[bot],0,,,21,324,269,"[main] source code updates from dotnet/dotnet (issue_ref)> [!note]> this is a codeflow update. it may contain both source code changesfrom> [the vmr](> as well as dependency updates. learn more[here](this pull request brings the following source code changes[marker]: <> (begin:f7901f87-9f24-40d6-9bc1-564863937237)## from - **subscription**:[f7901f87-9f24-40d6-9bc1-564863937237](- **build**:[20251202.5](([293020](- **date produced**: december 2, 2025 11:00:49 pm utc- **commit**:[78c39718bb6e8008ba9d2dbd00d550bee6be9f59](- **commit diff**:[e545239...78c3971](- **branch**: [main](**updated dependencies**- from [5.3.0-1.25528.108 to 5.3.0-1.25602.105][14] - microsoft.codeanalysis - microsoft.codeanalysis.analyzers - microsoft.codeanalysis.csharp - microsoft.net.compilers.toolset- from [10.0.100-rc.2.25528.108 to 10.0.100-rc.3.25602.105][14] - microsoft.codeanalysis.netanalyzers - microsoft.dotnet.apicompat.task- microsoft.net.workload.emscripten.current.manifest-10.0.100.transport- from [11.0.0-beta.25528.108 to 11.0.0-beta.25602.105][14] - microsoft.dotnet.arcade.sdk - microsoft.dotnet.build.tasks.archives - microsoft.dotnet.build.tasks.feed - microsoft.dotnet.build.tasks.installers - microsoft.dotnet.build.tasks.packaging - microsoft.dotnet.build.tasks.targetframework - microsoft.dotnet.build.tasks.templating - microsoft.dotnet.build.tasks.workloads - microsoft.dotnet.codeanalysis - microsoft.dotnet.genapi - microsoft.dotnet.genfacades - microsoft.dotnet.helix.sdk - microsoft.dotnet.packagetesting - microsoft.dotnet.remoteexecutor - microsoft.dotnet.sharedframework.sdk - microsoft.dotnet.xlifftasks - microsoft.dotnet.xunitextensions- from [0.11.5-alpha.25528.108 to 0.11.5-alpha.25602.105][14] - microsoft.dotnet.cecil- from [2.9.3-beta.25528.108 to 2.9.3-beta.25602.105][14] - microsoft.dotnet.xunitassert - microsoft.dotnet.xunitconsolerunner- from [10.0.0-rc.1.25528.108 to 10.0.0-rc.3.25602.105][14] - microsoft.net.sdk.il - microsoft.netcore.app.ref - microsoft.netcore.ilasm - runtime.native.system.io.ports - system.reflection.metadata - system.reflection.metadataloadcontext - system.text.json- from [7.0.0-preview.1.2908 to 7.0.0-preview.1.10305][14] - nuget.frameworks - nuget.packaging - nuget.projectmodel - nuget.versioning- from [2.0.0-rc.1.25528.108 to 3.0.0-alpha.1.25602.105][14] - system.commandline- from [19.1.0-alpha.1.25513.1 to19.1.0-alpha.1.25564.1]( - runtime.linux-arm64.microsoft.netcore.runtime.jit.tools - runtime.linux-arm64.microsoft.netcore.runtime.mono.llvm.libclang - runtime.linux-arm64.microsoft.netcore.runtime.mono.llvm.sdk - runtime.linux-arm64.microsoft.netcore.runtime.mono.llvm.tools - runtime.linux-musl-arm64.microsoft.netcore.runtime.jit.tools- runtime.linux-musl-arm64.microsoft.netcore.runtime.mono.llvm.libclang - runtime.linux-musl-arm64.microsoft.netcore.runtime.mono.llvm.sdk - runtime.linux-musl-arm64.microsoft.netcore.runtime.mono.llvm.tools - runtime.linux-musl-x64.microsoft.netcore.runtime.jit.tools - runtime.linux-musl-x64.microsoft.netcore.runtime.mono.llvm.libclang - runtime.linux-musl-x64.microsoft.netcore.runtime.mono.llvm.sdk - runtime.linux-musl-x64.microsoft.netcore.runtime.mono.llvm.tools - runtime.linux-x64.microsoft.netcore.runtime.jit.tools - runtime.linux-x64.microsoft.netcore.runtime.mono.llvm.libclang - runtime.linux-x64.microsoft.netcore.runtime.mono.llvm.sdk - runtime.linux-x64.microsoft.netcore.runtime.mono.llvm.tools - runtime.osx-arm64.microsoft.netcore.runtime.jit.tools - runtime.osx-arm64.microsoft.netcore.runtime.mono.llvm.libclang - runtime.osx-arm64.microsoft.netcore.runtime.mono.llvm.sdk - runtime.osx-arm64.microsoft.netcore.runtime.mono.llvm.tools - runtime.osx-x64.microsoft.netcore.runtime.jit.tools - runtime.osx-x64.microsoft.netcore.runtime.mono.llvm.libclang - runtime.osx-x64.microsoft.netcore.runtime.mono.llvm.sdk - runtime.osx-x64.microsoft.netcore.runtime.mono.llvm.tools - runtime.win-arm64.microsoft.netcore.runtime.jit.tools - runtime.win-x64.microsoft.netcore.runtime.jit.tools - runtime.win-x64.microsoft.netcore.runtime.mono.llvm.libclang - runtime.win-x64.microsoft.netcore.runtime.mono.llvm.sdk - runtime.win-x64.microsoft.netcore.runtime.mono.llvm.tools[marker]: <> (end:f7901f87-9f24-40d6-9bc1-564863937237)[1]: [2]: [3]: [4]: [5]: [6]: [7]: [8]: [9]: [10]: [11]: [12]: [13]: [14]: [marker]: <> (start:footer:codeflow pr)## associated changes in source repos---------------------<!-- to diff the source repo and pr branch contents locally, run:darc vmr diff --name-only-->[marker]: <> (end:footer:codeflow pr)---------"
dotnet/runtime,457d3408baed543ddcc8948a954d77b116f02619,[browser] Set WasmGenerateAppBundle=false for browser-wasm to skip run args override (#122259),2025-12-06 11:49:27+00:00,Marek Fišera,0,,,1,1,0,[browser] set wasmgenerateappbundle=false for browser-wasm to skip run args override (issue_ref)
dotnet/runtime,acfe9812e03d5813745c07d6d140128b6772d1cb,"[main] Source code updates from dotnet/dotnet (#122258)

> [!NOTE]
> This is a codeflow update. It may contain both source code changes
from
> [the VMR](https://github.com/dotnet/dotnet)
> as well as dependency updates. Learn more
[here](https://github.com/dotnet/dotnet/tree/main/docs/Codeflow-PRs.md).

This pull request brings the following source code changes

[marker]: <> (Begin:f7901f87-9f24-40d6-9bc1-564863937237)

## From https://github.com/dotnet/dotnet
- **Subscription**:
[f7901f87-9f24-40d6-9bc1-564863937237](https://maestro.dot.net/subscriptions?search=f7901f87-9f24-40d6-9bc1-564863937237)
- **Build**:
[20251205.10](https://dev.azure.com/dnceng/internal/_build/results?buildId=2854656)
([293565](https://maestro.dot.net/channel/8298/github:dotnet:dotnet/build/293565))
- **Date Produced**: December 5, 2025 9:13:30 PM UTC
- **Commit**: [5a69737e6f6447fe397d552503a3909ea49f6f34][1]
- **Commit Diff**:
[78c3971...5a69737](https://github.com/dotnet/dotnet/compare/78c39718bb6e8008ba9d2dbd00d550bee6be9f59...5a69737e6f6447fe397d552503a3909ea49f6f34)
- **Branch**: [main](https://github.com/dotnet/dotnet/tree/main)

**New Dependencies**
- Added [11.0.100-alpha.1.25605.110][1]
- Microsoft.NET.Workload.Emscripten.Current.Manifest-11.0.100.Transport

**Removed Dependencies**
- Removed 10.0.100-rc.3.25602.105
- Microsoft.NET.Workload.Emscripten.Current.Manifest-10.0.100.Transport

**Updated Dependencies**
- From [5.3.0-1.25602.105 to 5.3.0-1.25605.110][2]
  - Microsoft.CodeAnalysis
  - Microsoft.CodeAnalysis.Analyzers
  - Microsoft.CodeAnalysis.CSharp
  - Microsoft.Net.Compilers.Toolset
- From [10.0.100-rc.3.25602.105 to 11.0.100-alpha.1.25605.110][2]
  - Microsoft.CodeAnalysis.NetAnalyzers
  - Microsoft.DotNet.ApiCompat.Task
- From [11.0.0-beta.25602.105 to 11.0.0-beta.25605.110][2]
  - Microsoft.DotNet.Arcade.Sdk
  - Microsoft.DotNet.Build.Tasks.Archives
  - Microsoft.DotNet.Build.Tasks.Feed
  - Microsoft.DotNet.Build.Tasks.Installers
  - Microsoft.DotNet.Build.Tasks.Packaging
  - Microsoft.DotNet.Build.Tasks.TargetFramework
  - Microsoft.DotNet.Build.Tasks.Templating
  - Microsoft.DotNet.Build.Tasks.Workloads
  - Microsoft.DotNet.CodeAnalysis
  - Microsoft.DotNet.GenAPI
  - Microsoft.DotNet.GenFacades
  - Microsoft.DotNet.Helix.Sdk
  - Microsoft.DotNet.PackageTesting
  - Microsoft.DotNet.RemoteExecutor
  - Microsoft.DotNet.SharedFramework.Sdk
  - Microsoft.DotNet.XliffTasks
  - Microsoft.DotNet.XUnitExtensions
- From [0.11.5-alpha.25602.105 to 0.11.5-alpha.25605.110][2]
  - Microsoft.DotNet.Cecil
- From [2.9.3-beta.25602.105 to 2.9.3-beta.25605.110][2]
  - Microsoft.DotNet.XUnitAssert
  - Microsoft.DotNet.XUnitConsoleRunner
- From [10.0.0-rc.3.25602.105 to 11.0.0-alpha.1.25605.110][2]
  - Microsoft.NET.Sdk.IL
  - Microsoft.NETCore.App.Ref
  - Microsoft.NETCore.ILAsm
  - runtime.native.System.IO.Ports
  - System.Reflection.Metadata
  - System.Reflection.MetadataLoadContext
  - System.Text.Json
- From [10.0.0-alpha.1.25169.1 to
11.0.0-alpha.1.25602.4](https://github.com/dotnet/dotnet/compare/7f33d14aae...a49032ade9)
  - runtime.linux-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport
- runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport
  - runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport
  - runtime.linux-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport
  - runtime.osx-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport
  - runtime.osx-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport
  - runtime.win-arm64.Microsoft.NETCore.Runtime.Wasm.Node.Transport
  - runtime.win-x64.Microsoft.NETCore.Runtime.Wasm.Node.Transport
- From [7.0.0-preview.1.10305 to 7.0.0-preview.1.10610][2]
  - NuGet.Frameworks
  - NuGet.Packaging
  - NuGet.ProjectModel
  - NuGet.Versioning
- From [3.0.0-alpha.1.25602.105 to 3.0.0-alpha.1.25605.110][2]
  - System.CommandLine

[marker]: <> (End:f7901f87-9f24-40d6-9bc1-564863937237)

[1]:
https://github.com/dotnet/dotnet/commit/5a69737e6f6447fe397d552503a3909ea49f6f34
[2]: https://github.com/dotnet/dotnet/compare/78c39718bb...5a69737e6f
[marker]: <> (Start:Footer:CodeFlow PR)

## Associated changes in source repos
-
https://github.com/dotnet/arcade/compare/e29f11a331730bd4f51024ba83fa067d2ab80ca9...1c09acb26525da819530dd2678a0b7f62c35cbfd
-
https://github.com/dotnet/deployment-tools/compare/84ccc0553245e90355f32ea8ddcf169d9bd8f640...56c3d96916e1b2bb065732ffedd6b9e0285a6ed4
-
https://github.com/dotnet/efcore/compare/de10f40f8bbe7f19bacb817c48be5e5c07584437...9a868352299586a7e23b736d945f2931b1e822bf
-
https://github.com/dotnet/fsharp/compare/61c1a22068d208a88f757bd48d5c899db5568837...36868180d30ec3a74659d71fb183897807d60f81
-
https://github.com/dotnet/msbuild/compare/dd27cf39334b66329ff8eea71db6e8153e0929c6...228caa11ad0046ccb599530abd9aba4e1979b5e9
-
https://github.com/dotnet/runtime/compare/efb3990a9668fbdf22551ee93ffee9332086e052...8eb90a6dba628a6fbdc470277e64e4b9aa72994f
-
https://github.com/dotnet/source-build-reference-packages/compare/feab92a4bbe50a61eae220b7b4aa287ae5322431...d6738f130736917696d71ad88a7cadeb0a4f9086
-
https://github.com/dotnet/wpf/compare/038222ac08b36950e581b4eebad21d901df2d084...6e486f4f1e48f2729f707f2b93d915214a7d6f6e

<!--
    To diff the source repo and PR branch contents locally, run:
darc vmr diff --name-only
https://github.com/dotnet/dotnet:5a69737e6f6447fe397d552503a3909ea49f6f34..https://github.com/dotnet/runtime:darc-main-3cf2a5bd-a9a2-41c1-a35c-3985560ad03f
-->
[marker]: <> (End:Footer:CodeFlow PR)

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Larry Ewing <lewing@microsoft.com>
Co-authored-by: Marek Fišera <mara@neptuo.com>",2025-12-06 15:37:46+00:00,dotnet-maestro[bot],0,,,27,171,205,"[main] source code updates from dotnet/dotnet (issue_ref)> [!note]> this is a codeflow update. it may contain both source code changesfrom> [the vmr](> as well as dependency updates. learn more[here](this pull request brings the following source code changes[marker]: <> (begin:f7901f87-9f24-40d6-9bc1-564863937237)## from - **subscription**:[f7901f87-9f24-40d6-9bc1-564863937237](- **build**:[20251205.10](([293565](- **date produced**: december 5, 2025 9:13:30 pm utc- **commit**: [5a69737e6f6447fe397d552503a3909ea49f6f34][1]- **commit diff**:[78c3971...5a69737](- **branch**: [main](**new dependencies**- added [11.0.100-alpha.1.25605.110][1]- microsoft.net.workload.emscripten.current.manifest-11.0.100.transport**removed dependencies**- removed 10.0.100-rc.3.25602.105- microsoft.net.workload.emscripten.current.manifest-10.0.100.transport**updated dependencies**- from [5.3.0-1.25602.105 to 5.3.0-1.25605.110][2] - microsoft.codeanalysis - microsoft.codeanalysis.analyzers - microsoft.codeanalysis.csharp - microsoft.net.compilers.toolset- from [10.0.100-rc.3.25602.105 to 11.0.100-alpha.1.25605.110][2] - microsoft.codeanalysis.netanalyzers - microsoft.dotnet.apicompat.task- from [11.0.0-beta.25602.105 to 11.0.0-beta.25605.110][2] - microsoft.dotnet.arcade.sdk - microsoft.dotnet.build.tasks.archives - microsoft.dotnet.build.tasks.feed - microsoft.dotnet.build.tasks.installers - microsoft.dotnet.build.tasks.packaging - microsoft.dotnet.build.tasks.targetframework - microsoft.dotnet.build.tasks.templating - microsoft.dotnet.build.tasks.workloads - microsoft.dotnet.codeanalysis - microsoft.dotnet.genapi - microsoft.dotnet.genfacades - microsoft.dotnet.helix.sdk - microsoft.dotnet.packagetesting - microsoft.dotnet.remoteexecutor - microsoft.dotnet.sharedframework.sdk - microsoft.dotnet.xlifftasks - microsoft.dotnet.xunitextensions- from [0.11.5-alpha.25602.105 to 0.11.5-alpha.25605.110][2] - microsoft.dotnet.cecil- from [2.9.3-beta.25602.105 to 2.9.3-beta.25605.110][2] - microsoft.dotnet.xunitassert - microsoft.dotnet.xunitconsolerunner- from [10.0.0-rc.3.25602.105 to 11.0.0-alpha.1.25605.110][2] - microsoft.net.sdk.il - microsoft.netcore.app.ref - microsoft.netcore.ilasm - runtime.native.system.io.ports - system.reflection.metadata - system.reflection.metadataloadcontext - system.text.json- from [10.0.0-alpha.1.25169.1 to11.0.0-alpha.1.25602.4]( - runtime.linux-arm64.microsoft.netcore.runtime.wasm.node.transport- runtime.linux-musl-arm64.microsoft.netcore.runtime.wasm.node.transport - runtime.linux-musl-x64.microsoft.netcore.runtime.wasm.node.transport - runtime.linux-x64.microsoft.netcore.runtime.wasm.node.transport - runtime.osx-arm64.microsoft.netcore.runtime.wasm.node.transport - runtime.osx-x64.microsoft.netcore.runtime.wasm.node.transport - runtime.win-arm64.microsoft.netcore.runtime.wasm.node.transport - runtime.win-x64.microsoft.netcore.runtime.wasm.node.transport- from [7.0.0-preview.1.10305 to 7.0.0-preview.1.10610][2] - nuget.frameworks - nuget.packaging - nuget.projectmodel - nuget.versioning- from [3.0.0-alpha.1.25602.105 to 3.0.0-alpha.1.25605.110][2] - system.commandline[marker]: <> (end:f7901f87-9f24-40d6-9bc1-564863937237)[1]:[2]: [marker]: <> (start:footer:codeflow pr)## associated changes in source repos--------<!-- to diff the source repo and pr branch contents locally, run:darc vmr diff --name-only-->[marker]: <> (end:footer:codeflow pr)---------"
dotnet/runtime,2bd10ad43df967950657ae0ade1f899dc1b18a41,"Cleanup `NET6_0_OR_GREATER` symbol (#122202)

Follow-up https://github.com/dotnet/runtime/issues/109254",2025-12-06 18:37:43+00:00,xtqqczze,0,,,1,1,1,cleanup symbol (issue_ref)follow-up
dotnet/runtime,7be0c639bdca118cd0000dacf5c43b119412275b,"[main] Update dependencies from dotnet/runtime-assets (#122256)

This pull request updates the following dependencies

[marker]: <> (Begin:0c5a34f5-504e-413b-9376-08d8d8ff2d75)
## From https://github.com/dotnet/runtime-assets
- **Subscription**:
[0c5a34f5-504e-413b-9376-08d8d8ff2d75](https://maestro.dot.net/subscriptions?search=0c5a34f5-504e-413b-9376-08d8d8ff2d75)
- **Build**:
[20251124.4](https://dev.azure.com/dnceng/internal/_build/results?buildId=2846494)
([292110](https://maestro.dot.net/channel/8297/github:dotnet:runtime-assets/build/292110))
- **Date Produced**: November 24, 2025 5:40:21 PM UTC
- **Commit**:
[37bfb075f3ce49c8cd0abb7190eea8d121359813](https://github.com/dotnet/runtime-assets/commit/37bfb075f3ce49c8cd0abb7190eea8d121359813)
- **Branch**: [main](https://github.com/dotnet/runtime-assets/tree/main)

[DependencyUpdate]: <> (Begin)

- **Dependency Updates**:
  - From [11.0.0-beta.25553.1 to 11.0.0-beta.25574.4][1]
     - Microsoft.DotNet.CilStrip.Sources
     - Microsoft.NET.HostModel.TestData
     - System.ComponentModel.TypeConverter.TestData
     - System.Data.Common.TestData
     - System.Drawing.Common.TestData
     - System.Formats.Tar.TestData
     - System.IO.Compression.TestData
     - System.IO.Packaging.TestData
     - System.Net.TestData
     - System.Private.Runtime.UnicodeData
     - System.Runtime.Numerics.TestData
     - System.Runtime.TimeZoneData
     - System.Security.Cryptography.X509Certificates.TestData
     - System.Text.RegularExpressions.TestData
     - System.Windows.Extensions.TestData
  - From [11.0.0-beta.25553.1 to 11.0.0-beta.25574.4][2]
     - Microsoft.DotnetFuzzing.TestData

[1]:
https://github.com/dotnet/runtime-assets/compare/b5d67650a6...37bfb075f3
[2]: https://github.com/dotnet/runtime-assets/compare/...37bfb075f3

[DependencyUpdate]: <> (End)


[marker]: <> (End:0c5a34f5-504e-413b-9376-08d8d8ff2d75)

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Larry Ewing <lewing@microsoft.com>",2025-12-06 22:18:59+00:00,dotnet-maestro[bot],0,,,2,48,48,"[main] update dependencies from dotnet/runtime-assets (issue_ref)this pull request updates the following dependencies[marker]: <> (begin:0c5a34f5-504e-413b-9376-08d8d8ff2d75)## from - **subscription**:[0c5a34f5-504e-413b-9376-08d8d8ff2d75](- **build**:[20251124.4](([292110](- **date produced**: november 24, 2025 5:40:21 pm utc- **commit**:[37bfb075f3ce49c8cd0abb7190eea8d121359813](- **branch**: [main]([dependencyupdate]: <> (begin)- **dependency updates**: - from [11.0.0-beta.25553.1 to 11.0.0-beta.25574.4][1] - microsoft.dotnet.cilstrip.sources - microsoft.net.hostmodel.testdata - system.componentmodel.typeconverter.testdata - system.data.common.testdata - system.drawing.common.testdata - system.formats.tar.testdata - system.io.compression.testdata - system.io.packaging.testdata - system.net.testdata - system.private.runtime.unicodedata - system.runtime.numerics.testdata - system.runtime.timezonedata - system.security.cryptography.x509certificates.testdata - system.text.regularexpressions.testdata - system.windows.extensions.testdata - from [11.0.0-beta.25553.1 to 11.0.0-beta.25574.4][2] - microsoft.dotnetfuzzing.testdata[1]:[2]: [dependencyupdate]: <> (end)[marker]: <> (end:0c5a34f5-504e-413b-9376-08d8d8ff2d75)"
dotnet/runtime,86dfeb91ce270da17416069463e33363bda3ec55,"Remove lazy initialized string literals (#122076)

It seems it's not worth it to avoid allocations on the frozen heap - the
lazy string helper has a lock inside (Crst in GetStringLiteral) and it
badly impacts performance for `throw Exception(<string literal>)` code
(as was reported internally) especially under contention.

```cs
    static void Foo(bool cond)
    {
        throw new Exception(""Hello"");
    }
```
```diff
; Method Program:Foo(bool) (FullOpts)
       push     rbx
       sub      rsp, 32
       mov      rcx, 0x7FFBD79E2E10      ; System.Exception
       call     CORINFO_HELP_NEWSFAST
       mov      rbx, rax
-      mov      ecx, 1
-      mov      rdx, 0x7FFBD7FE0000
-      call     [CORINFO_HELP_STRCNS]
-      mov      rdx, rax
       mov      rcx, rbx
+      mov      rdx, 0x28922695108      ; 'Hello'
       call     [System.Exception:.ctor(System.String):this]
       mov      rcx, rbx
       call     CORINFO_HELP_THROW
       int3     
-; Total bytes of code: 65
+; Total bytes of code: 51
```",2025-12-06 22:42:36+00:00,Egor Bogatov,1,5dadd0ff8e5265c49233c4eef5997648de0536b9,"Fix access violation in JIT when printing long string literals (#122460)

The JIT crashes with an access violation when dumping debug output for string literals longer than the buffer size. getStringLiteral returns the actual string length but only copies up to bufferSize characters. The code was passing the full length to convertUtf16ToUtf8ForPrinting, causing it to read beyond the buffer.

Fixes #121988

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: jkotas <6668460+jkotas@users.noreply.github.com>
Co-authored-by: Jan Kotas <jkotas@microsoft.com>",31,54,270,remove lazy initialized string literals (issue_ref)it seems it's not worth it to avoid allocations on the frozen heap - thelazy string helper has a lock inside (crst in getstringliteral) and itbadly impacts performance for code(as was reported internally) especially under contention.
dotnet/runtime,04df455c83b43e515785153a7eba6a48f8b2bb20,"Removing unnecessary conditional check (#122271)

Removed preprocessor directive for ArgumentNullException check.",2025-12-07 16:23:56+00:00,Weihan Li,0,,,1,0,4,removing unnecessary conditional check (issue_ref)removed preprocessor directive for argumentnullexception check.
dotnet/runtime,957bb4bcf4ddcfb63784a386ccc264244ebe536e,[browser] rename internal JSImports to camelCase (#122231),2025-12-08 11:51:10+00:00,Pavel Savara,0,,,5,74,74,[browser] rename internal jsimports to camelcase (issue_ref)
dotnet/runtime,8c8bfb2612f53df011181e8edff1429d2ddb7134,"Mostly switch object writer to UTF-8 (#122160)

When compiling hello world:

`byte[]` allocations before: 564000. `string` allocations before: 302000
`byte[]` allocations after: 625000. `string` allocations after: 241000

So this is mostly a wash allocation-wise, however, not allocating string
means we're also avoiding the UTF-8 -> UTF-16 -> UTF-8 conversions and
using ~half the memory.",2025-12-08 12:59:23+00:00,Michal Strehovský,0,,,44,440,327,"mostly switch object writer to utf-8 (issue_ref)when compiling hello world: allocations before: 564000. allocations before: 302000 allocations after: 625000. allocations after: 241000so this is mostly a wash allocation-wise, however, not allocating stringmeans we're also avoiding the utf-8 -> utf-16 -> utf-8 conversions andusing ~half the memory."
dotnet/runtime,50a3154c40f01c469537d21efb5b28513d888cb4,"[clr-interp] Fix issue around compliance with the rules about lazy initialized basic block stack details (#122253)

- When we added support for basic blocks with undefined stacks to be
initialized with a stack state via a backwards branch we missed the case
of basic blocks which begin after a ret instruction

This fixes the jit\Methodical\tailcall\test_implicit tests.",2025-12-08 14:20:42+00:00,David Wrighton,1,3d2c5f931398a8e6229f39bc7b95ae6cbf46247c,"[clr-interp] Fix conversion from unsigned integer to float (#122369)

- There isn't a single instruction for this, but the jit recognizes the
conv.r.un + conv.r4 pattern as meaning convert directly from unsigned
integer to float. Per ECMA it is valid to do processing at a higher
intermediate precision, but RyuJit/interpreter follows tighter rules
which result in less loss of precision.

Fixes Runtime_106338 test.",1,3,0,[clr-interp] fix issue around compliance with the rules about lazy initialized basic block stack details (issue_ref)- when we added support for basic blocks with undefined stacks to beinitialized with a stack state via a backwards branch we missed the caseof basic blocks which begin after a ret instructionthis fixes the jit\methodical\tailcall\test_implicit tests.
dotnet/runtime,c78f853a7ddb98762552669cae671ef1d201e8db,"Fix TryEnsureSufficientExecutionStack with interpreter (#122248)

The ReflectionInvocation::TryEnsureSufficientExecutionStack was not
taking into account the fact that with interpreter enabled, the code can
be executed either by the interpreter or it can be AOTed. The
interpreter has its own stack with its own limit.

3 libraries tests suites were failing due to this problem.

As a best effort fix, this change adds check for the interpreter stack
too and the method returns true only if there is enough space on both
real and the interpreter stack, as it is not possible to decide which of
them will be used.",2025-12-08 14:27:00+00:00,Jan Vorlicek,1,1ebc24242764729e99e23334bcc4ffe0b88187a9,"[browser][coreCLR] fix nArgsSize for RuntimeMethodHandle_InvokeMethod (#122350)

Co-authored-by: Radek Doulik <radek.doulik@gmail.com>",1,19,0,"fix tryensuresufficientexecutionstack with interpreter (issue_ref)the reflectioninvocation::tryensuresufficientexecutionstack was nottaking into account the fact that with interpreter enabled, the code canbe executed either by the interpreter or it can be aoted. theinterpreter has its own stack with its own limit.3 libraries tests suites were failing due to this problem.as a best effort fix, this change adds check for the interpreter stacktoo and the method returns true only if there is enough space on bothreal and the interpreter stack, as it is not possible to decide which ofthem will be used."
dotnet/runtime,1d37f14e78bb847540a3ad38526de7a4bf87997d,"Refactor SQLDateTime constants (#120996)

- Rename constants to use PascalCase instead of prefixed s_ names.
- Use constants instead of static readonly fields
- Use properties instead of static readonly fields for computed values.

[Diffs](https://github.com/MihuBot/runtime-utils/issues/1599)",2025-12-08 21:36:18+00:00,xtqqczze,0,,,1,58,42,refactor sqldatetime constants (issue_ref)- rename constants to use pascalcase instead of prefixed s_ names.- use constants instead of static readonly fields- use properties instead of static readonly fields for computed values.[diffs](
dotnet/runtime,7984c79e019429e82ffb70c7e8b695e4631e8142,Set the right DebugType and Optimize settings for the Methodical merged test runners (#122306),2025-12-08 22:37:50+00:00,Jeremy Koritzinsky,0,,,6,10,2,set the right debugtype and optimize settings for the methodical merged test runners (issue_ref)
dotnet/runtime,2316313a64ce34bd097546282ea47302815e4cf9,"Crossgen Wasm Object Writer V0 (#122111)

This is the first prototype of a Wasm object writer for crossgen that
*only* writes out method bodies. It builds the minimum module structure
which is needed to declare and export the module bodies so that the
resulting module can be loaded and method bodies can be called by an
external loader. I have tested the output with a simple JavaScript
loader that instantiates the module and calls one of the exports.

# What IS handled
Emitting simple method bodies from an assembly that have no relocations
or external dependencies of any kind.

# What is NOT handled
## Relocations and any metadata attached to compiled methods.
## R2R format envelope (the plan is to embed this in the data section in
a future PR)
R2R metadata is currently unused.
## Signature generation to meet ABI requirements
Right now, there is a single `i32 -> i32` signature which is used as a
placeholder for any method. Later work will need to build support for
generating and storing wasm-level type signatures for JIT compiled
methods.
## JIT Integration
Currently, the JIT is not called (I believe it will hit asserts on the
Wasm target until #121973 is in). Instead, a simple `(i32.const 0)
(return)` stub is emitted for any JIT calls.

---------

Co-authored-by: Adeel Mujahid <3840695+am11@users.noreply.github.com>
Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-12-08 23:12:58+00:00,Adam Perlin,0,,,10,493,6,"crossgen wasm object writer v0 (issue_ref)this is the first prototype of a wasm object writer for crossgen that*only* writes out method bodies. it builds the minimum module structurewhich is needed to declare and export the module bodies so that theresulting module can be loaded and method bodies can be called by anexternal loader. i have tested the output with a simple javascriptloader that instantiates the module and calls one of the exports.# what is handledemitting simple method bodies from an assembly that have no relocationsor external dependencies of any kind.# what is not handled## relocations and any metadata attached to compiled methods.## r2r format envelope (the plan is to embed this in the data section ina future pr)r2r metadata is currently unused.## signature generation to meet abi requirementsright now, there is a single signature which is used as aplaceholder for any method. later work will need to build support forgenerating and storing wasm-level type signatures for jit compiledmethods.## jit integrationcurrently, the jit is not called (i believe it will hit asserts on thewasm target until issue_ref is in). instead, a simple stub is emitted for any jit calls.---------"
dotnet/runtime,8be95ba7862285695f45b4b9f555c93dd6d302a1,"Stop checking for and writing out breadcrumbs for Microsoft.NET.DotNetHostPolicy (#122212)

This package hasn't been the way we construct .NET apps since before
3.0. We currently check for it in the deps.json on startup and write it
out as a breadcrumb file for every app - we should be able to stop doing
this and avoid some unnecessary file I/O and allocations.",2025-12-08 23:14:32+00:00,Elinor Fung,0,,,10,8,223,stop checking for and writing out breadcrumbs for microsoft.net.dotnethostpolicy (issue_ref)this package hasn't been the way we construct .net apps since before3.0. we currently check for it in the deps.json on startup and write itout as a breadcrumb file for every app - we should be able to stop doingthis and avoid some unnecessary file i/o and allocations.
dotnet/runtime,48d69156a96ec1ee7c6937ebf86d8dee05025e51,"[main] Update dependencies from dotnet/hotreload-utils (#122277)

This pull request updates the following dependencies

[marker]: <> (Begin:bfe6dacf-8231-4ea1-e2fe-08d962847885)
## From https://github.com/dotnet/hotreload-utils
- **Subscription**:
[bfe6dacf-8231-4ea1-e2fe-08d962847885](https://maestro.dot.net/subscriptions?search=bfe6dacf-8231-4ea1-e2fe-08d962847885)
- **Build**:
[20251124.1](https://dev.azure.com/dnceng/internal/_build/results?buildId=2846435)
([292099](https://maestro.dot.net/channel/8297/github:dotnet:hotreload-utils/build/292099))
- **Date Produced**: November 24, 2025 4:13:07 PM UTC
- **Commit**:
[92b850b157a46e9c4605b7ae76f5ada3e6856eb5](https://github.com/dotnet/hotreload-utils/commit/92b850b157a46e9c4605b7ae76f5ada3e6856eb5)
- **Branch**:
[main](https://github.com/dotnet/hotreload-utils/tree/main)

[DependencyUpdate]: <> (Begin)

- **Dependency Updates**:
  - From [11.0.0-alpha.0.25528.1 to 11.0.0-alpha.0.25574.1][1]
     - Microsoft.DotNet.HotReload.Utils.Generator.BuildTool

[1]:
https://github.com/dotnet/hotreload-utils/compare/1c8f1e360f...92b850b157

[DependencyUpdate]: <> (End)


[marker]: <> (End:bfe6dacf-8231-4ea1-e2fe-08d962847885)

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-12-09 00:06:17+00:00,dotnet-maestro[bot],0,,,2,3,3,"[main] update dependencies from dotnet/hotreload-utils (issue_ref)this pull request updates the following dependencies[marker]: <> (begin:bfe6dacf-8231-4ea1-e2fe-08d962847885)## from - **subscription**:[bfe6dacf-8231-4ea1-e2fe-08d962847885](- **build**:[20251124.1](([292099](- **date produced**: november 24, 2025 4:13:07 pm utc- **commit**:[92b850b157a46e9c4605b7ae76f5ada3e6856eb5](- **branch**:[main]([dependencyupdate]: <> (begin)- **dependency updates**: - from [11.0.0-alpha.0.25528.1 to 11.0.0-alpha.0.25574.1][1] - microsoft.dotnet.hotreload.utils.generator.buildtool[1]:[dependencyupdate]: <> (end)[marker]: <> (end:bfe6dacf-8231-4ea1-e2fe-08d962847885)"
dotnet/runtime,59c16f2076ee20f77e0d06cac4f5d3001a997c57,"[Wasm RyuJit] Slightly smaller code for switches (#122198)

Wasm switches (`br_table`) have a default case, so take advantage of
this and stop peeling off the default case in lower.",2025-12-09 01:06:41+00:00,Andy Ayers,1,bf3f0518e024437ad128a4178a8a18239b70a9f6,"[RyuJIT WASM] Add GT_NO_OP and GT_NOP handlers to genCodeForTreeNode (#122328)

The WASM codegen was missing handlers for `GT_NO_OP` and `GT_NOP` node
types in `CodeGen::genCodeForTreeNode`, causing failures when these
nodes were encountered during code generation.

## Changes

- **GT_NOP**: Added case that breaks immediately (marker-only node,
emits no code)
- **GT_NO_OP**: Added case that emits `INS_nop` instruction
(non-deletable NOP)

Implementation matches existing patterns across x86, ARM, and RISC-V
architectures.

```cpp
case GT_NOP:
    break;

case GT_NO_OP:
    instGen(INS_nop);
    break;
```

<!-- START COPILOT ORIGINAL PROMPT -->



<details>

<summary>Original prompt</summary>

> 
> ----
> 
> *This section details on the original issue you should resolve*
> 
> <issue_title>[RyuJIT Wasm] Missing handler for GT_NO_OP</issue_title>
> <issue_description>`CodeGen::genCodeForTreeNode` needs to be updated
with a case for `GT_NO_OP` that emits an `INS_nop`. It also needs a case
for `GT_NOP` that does nothing.</issue_description>
> 
> ## Comments on the Issue (you are @copilot in this section)
> 
> <comments>
> </comments>
> 


</details>



<!-- START COPILOT CODING AGENT SUFFIX -->

- Fixes dotnet/runtime#122327

<!-- START COPILOT CODING AGENT TIPS -->
---

✨ Let Copilot coding agent [set things up for
you](https://github.com/dotnet/runtime/issues/new?title=✨+Set+up+Copilot+instructions&body=Configure%20instructions%20for%20this%20repository%20as%20documented%20in%20%5BBest%20practices%20for%20Copilot%20coding%20agent%20in%20your%20repository%5D%28https://gh.io/copilot-coding-agent-tips%29%2E%0A%0A%3COnboard%20this%20repo%3E&assignees=copilot)
— coding agent works faster and does higher quality work when set up for
your repo.

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: kg <198130+kg@users.noreply.github.com>",4,16,14,"[wasm ryujit] slightly smaller code for switches (issue_ref)wasm switches () have a default case, so take advantage ofthis and stop peeling off the default case in lower."
dotnet/runtime,007bd9d5dce7c38d35e5a3b1212f77d0f0663d7e,"Make the output of ThunkGenerator more diffable (#122266)

Before this change, the addition of a new method on the JIT<->EE
interface resulted in large diffs in `CorInfoImpl_generated.cs` when
viewed on GitHub.com. For example the changes from #120411 look [like
this](https://github.com/dotnet/runtime/pull/120411/files#diff-ae69eee5bf956bd558299056ff4bde5cfb13b2066741739f8b92d08d29567579):

```diff
callbacks[154] = (delegate* unmanaged<IntPtr, IntPtr*, CORINFO_RESOLVED_TOKEN*, CORINFO_SIG_INFO*, CORINFO_GET_TAILCALL_HELPERS_FLAGS, CORINFO_TAILCALL_HELPERS*, byte>)&_getTailCallHelpers;
-callbacks[155] = (delegate* unmanaged<IntPtr, IntPtr*, CORINFO_METHOD_STRUCT_*>)&_getAsyncResumptionStub;
-callbacks[156] = (delegate* unmanaged<IntPtr, IntPtr*, CORINFO_RESOLVED_TOKEN*, byte, byte>)&_convertPInvokeCalliToCall;
-callbacks[157] = (delegate* unmanaged<IntPtr, IntPtr*, InstructionSet, byte, byte>)&_notifyInstructionSetUsage;
+callbacks[155] = (delegate* unmanaged<IntPtr, IntPtr*, nuint, bool*, nuint, CORINFO_CLASS_STRUCT_*>)&_getContinuationType;
+callbacks[156] = (delegate* unmanaged<IntPtr, IntPtr*, CORINFO_METHOD_STRUCT_*>)&_getAsyncResumptionStub;
+callbacks[157] = (delegate* unmanaged<IntPtr, IntPtr*, CORINFO_RESOLVED_TOKEN*, byte, byte>)&_convertPInvokeCalliToCall;
+callbacks[158] = (delegate* unmanaged<IntPtr, IntPtr*, InstructionSet, byte, byte>)&_notifyInstructionSetUsage;
// ...
```

After this change, the diffs are more readable:

```diff
 s_vtbl.GetTailCallHelpers = &_getTailCallHelpers;
+s_vtbl.GetContinuationType = &_getContinuationType;
 s_vtbl.GetAsyncResumptionStub = &_getAsyncResumptionStub;
 s_vtbl.NotifyInstructionSetUsage = &_notifyInstructionSetUsage;
// ...
```

Because the new pattern is pre-initializable and does not allocate
native memory for each `CorInfoImpl`, it should be a little faster and
use less a little less memory. I doubt that makes an observable
difference though since `CorInfoImpl` instances are reused.

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>",2025-12-09 07:48:19+00:00,Austin Wise,0,,,4,428,230,"make the output of thunkgenerator more diffable (issue_ref)before this change, the addition of a new method on the jit<->eeinterface resulted in large diffs in whenviewed on github.com. for example the changes from issue_ref look [likethis](#diff-ae69eee5bf956bd558299056ff4bde5cfb13b2066741739f8b92d08d29567579):after this change, the diffs are more readable:because the new pattern is pre-initializable and does not allocatenative memory for each , it should be a little faster anduse less a little less memory. i doubt that makes an observabledifference though since instances are reused.---------"
dotnet/runtime,cbabb9aca41669a5755d2f81d23b5fe56c3aaf6c,JIT: Check for `OperConsumesFlags` in new `OptimizeCallIndirectTargetEvaluation` (#122292),2025-12-09 10:53:46+00:00,Jakob Botsch Nielsen,0,,,1,1,1,jit: check for in new (issue_ref)
dotnet/runtime,5f845cd8df8cbc2513bffbf7a49632752bc37c33,"[Wasm] Add .webmanifest MIME type to Wasm.web.config for PWA support on Azure (#121932)

Blazor WebAssembly PWA apps deployed to Azure fail to load manifest.webmanifest with 404 errors, preventing PWA installation. The IIS web.config lacks MIME type mapping for `.webmanifest` files.",2025-12-09 12:35:32+00:00,Copilot,0,,,1,2,0,"[wasm] add .webmanifest mime type to wasm.web.config for pwa support on azure (issue_ref)blazor webassembly pwa apps deployed to azure fail to load manifest.webmanifest with 404 errors, preventing pwa installation. the iis web.config lacks mime type mapping for files."
dotnet/runtime,c946b43038cee24b1da8d141ef539107b9b7ffc6,"Use `VoidTaskResult` for void returns in runtime async (#122285)

Removes some abstraction and unifies behavior with async 1 at the cost
of these rarely created tasks being slightly larger for void methods.",2025-12-09 13:02:04+00:00,Jakob Botsch Nielsen,1,4913280e65461a7ff2ac9256ebb6b6177bbff575,"[RuntimeAsync] Respect IsFlowSuppressed when capturing execution context for suspension. (#122125)

Fixes: #122052

=== async1 counterpart:

Regular/synchronous Capture/Restore of execution context should work
unconditionally.


https://github.com/dotnet/runtime/blob/aa500a46758c21af99cb8970bf16a5e34b7fb9d2/src/libraries/System.Private.CoreLib/src/System/Runtime/CompilerServices/AsyncMethodBuilderCore.cs#L30-L33

But captures on the suspension code path use `ExecutionContext.Capture`,
that does not capture if the current context suppresses the flow.


https://github.com/dotnet/runtime/blob/aa500a46758c21af99cb8970bf16a5e34b7fb9d2/src/libraries/System.Private.CoreLib/src/System/Runtime/CompilerServices/AsyncTaskMethodBuilderT.cs#L158-L167",1,154,275,use for void returns in runtime async (issue_ref)removes some abstraction and unifies behavior with async 1 at the costof these rarely created tasks being slightly larger for void methods.
dotnet/runtime,a033aca7239b51997eb4c5cd5a36311e92e06512,[browser][coreCLR] browserhost improvements (#122233),2025-12-09 15:15:00+00:00,Pavel Savara,0,,,31,209,156,[browser][coreclr] browserhost improvements (issue_ref)
dotnet/runtime,e491efb87b1a2244b64b94c38e56d61d60105511,[infra][iOS] Use OSX.15.Arm64.Open for arm64 iOS simulator and maccatalyst (#122286),2025-12-09 16:04:12+00:00,Matous Kozak,1,f6411e77a471e0136e4ba7930adb61591777ba3b,"[infra][iOS] Use scouting queue for iOS/tvOS devices testing (#122341)

This is a temporary solution until
https://github.com/dotnet/dnceng/issues/6440 is resolved",2,2,2,[infra][ios] use osx.15.arm64.open for arm64 ios simulator and maccatalyst (issue_ref)
dotnet/runtime,61fac3bf280af337390a34c3d54157a96051e831,"Re-Enable JIT calls for Wasm Target in Crossgen (#122334)

This PR reverts the behavior from #122111 which stubs out a method
instead of calling the JIT for the crossgen Wasm target. Now, the JIT
will be invoked as normal so that the output of method codegen can be
placed in a simple object file.

Output code currently won't run (I tried this) because we aren't yet
emitting a correct local count at the beginning of compiled methods.",2025-12-09 16:37:07+00:00,Adam Perlin,0,,,1,2,40,"re-enable jit calls for wasm target in crossgen (issue_ref)this pr reverts the behavior from issue_ref which stubs out a methodinstead of calling the jit for the crossgen wasm target. now, the jitwill be invoked as normal so that the output of method codegen can beplaced in a simple object file.output code currently won't run (i tried this) because we aren't yetemitting a correct local count at the beginning of compiled methods."
dotnet/runtime,6936d807ab02592e582c999fcfa39bff39c632b6,"Target net11.0 / .NET 11 (#121853)

Contributes to https://github.com/dotnet/runtime/issues/118583

For reference, this was last year's PR for net10.0.
https://github.com/dotnet/runtime/pull/106599

---------

Co-authored-by: Eric St. John <ericstj@microsoft.com>
Co-authored-by: Larry Ewing <lewing@microsoft.com>
Co-authored-by: Sven Boemer <sbomer@gmail.com>
Co-authored-by: Steve Pfister <stpfiste@microsoft.com>
Co-authored-by: Adeel Mujahid <3840695+am11@users.noreply.github.com>
Co-authored-by: Pavel Savara <pavelsavara@microsoft.com>
Co-authored-by: Milos Kotlar <kotlarmilos@gmail.com>",2025-12-09 18:50:56+00:00,Viktor Hofer,1,fb36de0700f657a53a1957bea1cb1e98b3337197,"[Tests][UserEvents] Add userevents functional runtime tests (#122134)

With user_events support added in
https://github.com/dotnet/runtime/pull/115265, this PR looks to test a
few end-to-end user_events scenario.

## Alternative testing approaches considered

### **Existing EventPipe runtime tests**
Existing EventPipe tests under `src/tests/tracing/eventpipe` are
incompatible with testing the user_events scenario due to:

1. Starting EventPipeSessions through DiagnosticClient ❌ 
DiagnosticClient does not have the support to send the IPC command to
start a user_events based EventPipe session, because it requires the
user_events_data file descriptor to be sent using SCM_RIGHTS (see
https://github.com/dotnet/diagnostics/blob/main/documentation/design-docs/ipc-protocol.md#passing_file_descriptor).

2. Using an EventPipeEventSource to validate events streamed through
EventPipe ❌
User_events based EventPipe sessions do not stream events. Instead,
events are written to configured TraceFS tracepoints, and currently only
RecordTrace from https://github.com/microsoft/one-collect/ is capable of
generating `.nettrace` traces from tracepoint user_events.

### **Native EventPipe Unit Tests**
There are Mono Native EventPipe tests under
`src/mono/mono/eventpipe/test` that are not hooked up to CI. These unit
tests are built through linking the shared EventPipe interface library
against [Mono's EventPipe runtime
shims](https://github.com/dotnet/runtime/tree/main/src/mono/mono/eventpipe)
and using [Mono's test
runner](https://github.com/dotnet/runtime/tree/main/src/mono/mono/eglib/test).
To update these unit tests into the [standard runtime tests
structure](https://github.com/dotnet/runtime/tree/main/src/tests), a
**larger investment** is needed to either migrate EventPipe from using
runtime shims to a OS Pal source shared by coreclr/nativeaot/mono (see
https://github.com/dotnet/runtime/pull/118874#discussion_r2474264532) or
build an EventPipe shared library specifically for the runtime test
using a runtime-agnostic shim.
As existing mono unit tests don't currently test IPC commands, coupled
with no existing runtime infrastructure to read events from tracepoints,
there would be even more work on top of updating mono native eventpipe
unit tests to even test the user_events scenario.

## End-to-End Testing Added
A low-cost approach to testing .NET Runtime's user_events functionality
leverages RecordTrace from https://github.com/microsoft/one-collect/,
which is already capable of starting user_events based EventPipe
sessions and generating `.nettrace`s. (Note: [dotnet-trace wraps around
RecordTrace](https://github.com/dotnet/diagnostics/pull/5570))
Despite adding an external dependency which allows RecordTrace failures
to fail the end-to-end test, user_events was initially added with the
intent to depend on RecordTrace for the end-to-end scenario, and there
are no other ways to functionally test a user_events based eventpipe
session.

### Approach

Each scenario uses the same pattern:

1. **Scenario invokes the shared test runner**

User events scenarios can differ in their tracee logic, the events
expected in the .nettrace, the record-trace script used to collect those
events, and how long it takes for the tracee to emit them and for
record-trace to resolve symbols and write the .nettrace. To handle this
variance, UserEventsTestRunner lets each scenario pass in its
scenario-specific record-trace script path, the path to its test
assembly (used to spawn the tracee process), a validator that checks for
the expected events from the tracee, and optional timeouts for both the
tracee and record-trace to exit gracefully.

2. **`UserEventsTestRunner` orchestrates tracing and validation**

Using this configuration, UserEventsTestRunner first checks whether user
events are supported. It then starts record-trace with the scenario’s
script and launches the tracee process so it can emit events. After the
run completes, the runner stops both the tracee and record-trace, opens
the resulting .nettrace with EventPipeEventSource, and applies the
scenario’s validator to confirm that the expected events were recorded.
Finally, it returns an exit code indicating whether the scenario passed
or failed.

### Dependencies:
- Environment with a kernel 6.4+, .NET 10, glibc 2.35+
- Microsoft.OneCollect.RecordTrace (transitively resolved through a
dotnet diagnostics public feed)
- Microsoft.Diagnostics.Tracing.TraceEvent 3.1.24+ (to read [NetTrace
V6](https://github.com/microsoft/perfview/blob/main/src/TraceEvent/EventPipe/NetTraceFormat.md))

## Helix Nuances

UserEvents functional runtime tests differ from other runtime tests
because it depends on OneCollect's Record-Trace tool to enable a
userevents-based eventpipe session and to collect events. By design,
Record-Trace requires elevated privileges, so these tests invoke a
record-trace executable with sudo.

When tests run on Helix, test artifacts are stripped of their
permissions, so the test infrastructure was modified to give
record-trace execute permissions (helix-extra-executables.list).
Moreover, to avoid having one copy of record-trace per scenario, which
in turn requires re-adding execute permissions for each, more
modifications were added to copy over a single record-trace executable
that would be used by all scenarios (OutOfProcess marker).

Additionally, in Helix environments, TMPDIR is set to a helix specific
temporary directory like /datadisks/disk1/work/<id>/t, and at this time,
record-trace only scans /tmp/ for the runtime's diagnostic ports. So as
a workaround, the tracee apps are spawned with TMPDIR set to /tmp.

Lastly, the job steps to run tests on AzDO prevents restoring individual
runtime test projects. Because record-trace is currently only resolvable
through the dotnet-diagnostics-tests source, userevents_common.csproj
was added to the group of projects restored at the beginning of copying
native test components to restore Microsoft.OneCollect.RecordTrace.",115,1795,2005,"target net11.0 / .net 11 (issue_ref)contributes to for reference, this was last year's pr for net10.0.---------"
dotnet/runtime,03328a9ba330ed98913921456467b1343eb30497,"[main] Source code updates from dotnet/dotnet (#122331)

> [!NOTE]
> This is a codeflow update. It may contain both source code changes
from
> [the VMR](https://github.com/dotnet/dotnet)
> as well as dependency updates. Learn more
[here](https://github.com/dotnet/dotnet/tree/main/docs/Codeflow-PRs.md).

This pull request brings the following source code changes

[marker]: <> (Begin:f7901f87-9f24-40d6-9bc1-564863937237)

## From https://github.com/dotnet/dotnet
- **Subscription**:
[f7901f87-9f24-40d6-9bc1-564863937237](https://maestro.dot.net/subscriptions?search=f7901f87-9f24-40d6-9bc1-564863937237)
- **Build**:
[20251208.1](https://dev.azure.com/dnceng/internal/_build/results?buildId=2856163)
([293750](https://maestro.dot.net/channel/8298/github:dotnet:dotnet/build/293750))
- **Date Produced**: December 8, 2025 3:56:38 PM UTC
- **Commit**:
[ce3dea8b1d1c12cf4b85999f834052d942d84a6d](https://github.com/dotnet/dotnet/commit/ce3dea8b1d1c12cf4b85999f834052d942d84a6d)
- **Commit Diff**:
[5a69737...ce3dea8](https://github.com/dotnet/dotnet/compare/5a69737e6f6447fe397d552503a3909ea49f6f34...ce3dea8b1d1c12cf4b85999f834052d942d84a6d)
- **Branch**: [main](https://github.com/dotnet/dotnet/tree/main)

**Updated Dependencies**
- From [5.3.0-1.25605.110 to 5.3.0-1.25608.101][1]
  - Microsoft.CodeAnalysis
  - Microsoft.CodeAnalysis.Analyzers
  - Microsoft.CodeAnalysis.CSharp
  - Microsoft.Net.Compilers.Toolset
- From [11.0.100-alpha.1.25605.110 to 11.0.100-alpha.1.25608.101][1]
  - Microsoft.CodeAnalysis.NetAnalyzers
  - Microsoft.DotNet.ApiCompat.Task
- Microsoft.NET.Workload.Emscripten.Current.Manifest-11.0.100.Transport
- From [11.0.0-beta.25605.110 to 11.0.0-beta.25608.101][1]
  - Microsoft.DotNet.Arcade.Sdk
  - Microsoft.DotNet.Build.Tasks.Archives
  - Microsoft.DotNet.Build.Tasks.Feed
  - Microsoft.DotNet.Build.Tasks.Installers
  - Microsoft.DotNet.Build.Tasks.Packaging
  - Microsoft.DotNet.Build.Tasks.TargetFramework
  - Microsoft.DotNet.Build.Tasks.Templating
  - Microsoft.DotNet.Build.Tasks.Workloads
  - Microsoft.DotNet.CodeAnalysis
  - Microsoft.DotNet.GenAPI
  - Microsoft.DotNet.GenFacades
  - Microsoft.DotNet.Helix.Sdk
  - Microsoft.DotNet.PackageTesting
  - Microsoft.DotNet.RemoteExecutor
  - Microsoft.DotNet.SharedFramework.Sdk
  - Microsoft.DotNet.XliffTasks
  - Microsoft.DotNet.XUnitExtensions
- From [0.11.5-alpha.25605.110 to 0.11.5-alpha.25608.101][1]
  - Microsoft.DotNet.Cecil
- From [2.9.3-beta.25605.110 to 2.9.3-beta.25608.101][1]
  - Microsoft.DotNet.XUnitAssert
  - Microsoft.DotNet.XUnitConsoleRunner
- From [11.0.0-alpha.1.25605.110 to 11.0.0-alpha.1.25608.101][1]
  - Microsoft.NET.Sdk.IL
  - Microsoft.NETCore.App.Ref
  - Microsoft.NETCore.ILAsm
  - runtime.native.System.IO.Ports
  - System.Reflection.Metadata
  - System.Reflection.MetadataLoadContext
  - System.Text.Json
- From [7.0.0-preview.1.10610 to 7.0.0-preview.1.10901][1]
  - NuGet.Frameworks
  - NuGet.Packaging
  - NuGet.ProjectModel
  - NuGet.Versioning
- From [3.0.0-alpha.1.25605.110 to 3.0.0-alpha.1.25608.101][1]
  - System.CommandLine

[marker]: <> (End:f7901f87-9f24-40d6-9bc1-564863937237)

[1]: https://github.com/dotnet/dotnet/compare/5a69737e6f...ce3dea8b1d
[marker]: <> (Start:Footer:CodeFlow PR)

## Associated changes in source repos
-
https://github.com/dotnet/arcade/compare/1c09acb26525da819530dd2678a0b7f62c35cbfd...65e09c040143048211dcf6b2bd69336cbf27eec6
-
https://github.com/dotnet/fsharp/compare/36868180d30ec3a74659d71fb183897807d60f81...89d788641914c5d0b87fddfa11f4df0b5cfaa73d
-
https://github.com/dotnet/runtime/compare/8eb90a6dba628a6fbdc470277e64e4b9aa72994f...bce6119e41ecfbcf630c369836770669604c22c6

<!--
    To diff the source repo and PR branch contents locally, run:
darc vmr diff --name-only
https://github.com/dotnet/dotnet:ce3dea8b1d1c12cf4b85999f834052d942d84a6d..https://github.com/dotnet/runtime:darc-main-1b3e8b50-45d4-44ba-b8e9-4aa24fffd581
-->
[marker]: <> (End:Footer:CodeFlow PR)

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-12-09 19:18:27+00:00,dotnet-maestro[bot],0,,,4,124,124,"[main] source code updates from dotnet/dotnet (issue_ref)> [!note]> this is a codeflow update. it may contain both source code changesfrom> [the vmr](> as well as dependency updates. learn more[here](this pull request brings the following source code changes[marker]: <> (begin:f7901f87-9f24-40d6-9bc1-564863937237)## from - **subscription**:[f7901f87-9f24-40d6-9bc1-564863937237](- **build**:[20251208.1](([293750](- **date produced**: december 8, 2025 3:56:38 pm utc- **commit**:[ce3dea8b1d1c12cf4b85999f834052d942d84a6d](- **commit diff**:[5a69737...ce3dea8](- **branch**: [main](**updated dependencies**- from [5.3.0-1.25605.110 to 5.3.0-1.25608.101][1] - microsoft.codeanalysis - microsoft.codeanalysis.analyzers - microsoft.codeanalysis.csharp - microsoft.net.compilers.toolset- from [11.0.100-alpha.1.25605.110 to 11.0.100-alpha.1.25608.101][1] - microsoft.codeanalysis.netanalyzers - microsoft.dotnet.apicompat.task- microsoft.net.workload.emscripten.current.manifest-11.0.100.transport- from [11.0.0-beta.25605.110 to 11.0.0-beta.25608.101][1] - microsoft.dotnet.arcade.sdk - microsoft.dotnet.build.tasks.archives - microsoft.dotnet.build.tasks.feed - microsoft.dotnet.build.tasks.installers - microsoft.dotnet.build.tasks.packaging - microsoft.dotnet.build.tasks.targetframework - microsoft.dotnet.build.tasks.templating - microsoft.dotnet.build.tasks.workloads - microsoft.dotnet.codeanalysis - microsoft.dotnet.genapi - microsoft.dotnet.genfacades - microsoft.dotnet.helix.sdk - microsoft.dotnet.packagetesting - microsoft.dotnet.remoteexecutor - microsoft.dotnet.sharedframework.sdk - microsoft.dotnet.xlifftasks - microsoft.dotnet.xunitextensions- from [0.11.5-alpha.25605.110 to 0.11.5-alpha.25608.101][1] - microsoft.dotnet.cecil- from [2.9.3-beta.25605.110 to 2.9.3-beta.25608.101][1] - microsoft.dotnet.xunitassert - microsoft.dotnet.xunitconsolerunner- from [11.0.0-alpha.1.25605.110 to 11.0.0-alpha.1.25608.101][1] - microsoft.net.sdk.il - microsoft.netcore.app.ref - microsoft.netcore.ilasm - runtime.native.system.io.ports - system.reflection.metadata - system.reflection.metadataloadcontext - system.text.json- from [7.0.0-preview.1.10610 to 7.0.0-preview.1.10901][1] - nuget.frameworks - nuget.packaging - nuget.projectmodel - nuget.versioning- from [3.0.0-alpha.1.25605.110 to 3.0.0-alpha.1.25608.101][1] - system.commandline[marker]: <> (end:f7901f87-9f24-40d6-9bc1-564863937237)[1]: [marker]: <> (start:footer:codeflow pr)## associated changes in source repos---<!-- to diff the source repo and pr branch contents locally, run:darc vmr diff --name-only-->[marker]: <> (end:footer:codeflow pr)"
dotnet/runtime,42d24ad217668fa78a0064071c9fd0b1b642f4f5,"Configure HardwareIntrinsic support for Apple Mobile platforms (#122249)

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-12-09 19:49:18+00:00,Jeremy Koritzinsky,0,,,6,103,10,configure hardwareintrinsic support for apple mobile platforms (issue_ref)
dotnet/runtime,0fb17f7320fbaaa93e91c4c08b3a03175bb5ca15,"Add fetchTags: false to all checkout steps in Azure Pipelines (#122250)

This decreases the checkout step duration for some legs from ~1.5 minutes to ~15s",2025-12-09 23:36:37+00:00,Copilot,0,,,9,11,0,add fetchtags: false to all checkout steps in azure pipelines (issue_ref)this decreases the checkout step duration for some legs from ~1.5 minutes to ~15s
dotnet/runtime,880f250f9d640cd2306d49953da2ffce000feb07,"[clr-interp] fix native int input to switch statements (#122364)

Fixes Runtime_68568 test

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-12-10 02:27:09+00:00,David Wrighton,1,9ab6b9d7a53d64fb636e139ffba8ddd2ab9846a4,"Fix interpreter INTOP_COMPARE_EXCHANGE_U1 and U2 (#122361)

The implementation was setting an incorrect value as the return value,
which caused the
System.Threading.Tasks.Tests.ParallelForEachAsyncTests.AllItemsEnumeratedOnce_For
to fail intermittently.

There was also a wrong check for alignment of address of the U2 version.",3,19,1,[clr-interp] fix native int input to switch statements (issue_ref)fixes runtime_68568 test---------
dotnet/runtime,ed58e5fd2d5bce794c1d5acafa9f268151fefd47,"[Wasm RyuJit] Codegen labels (#122332)

Create emitter labels for places Wasm will branch to, and display the
instr group branch targets as comments when dumping out disassembly.",2025-12-10 05:38:36+00:00,Andy Ayers,0,,,5,73,6,"[wasm ryujit] codegen labels (issue_ref)create emitter labels for places wasm will branch to, and display theinstr group branch targets as comments when dumping out disassembly."
dotnet/runtime,6422ea05080393bab96435d91e3a7daa7b26807c,"[main] Update dependencies from dotnet/xharness (#122276)

This pull request updates the following dependencies

[marker]: <> (Begin:be30ac4f-4b72-4287-1eb6-08d8d8fef0ea)
## From https://github.com/dotnet/xharness
- **Subscription**:
[be30ac4f-4b72-4287-1eb6-08d8d8fef0ea](https://maestro.dot.net/subscriptions?search=be30ac4f-4b72-4287-1eb6-08d8d8fef0ea)
- **Build**:
[20251203.1](https://dev.azure.com/dnceng/internal/_build/results?buildId=2852793)
([293158](https://maestro.dot.net/channel/2/github:dotnet:xharness/build/293158))
- **Date Produced**: December 3, 2025 1:53:47 PM UTC
- **Commit**:
[3df2923500447ee925d59f026c81720c7a9b4e4b](https://github.com/dotnet/xharness/commit/3df2923500447ee925d59f026c81720c7a9b4e4b)
- **Branch**: [main](https://github.com/dotnet/xharness/tree/main)

[DependencyUpdate]: <> (Begin)

- **Dependency Updates**:
  - From [11.0.0-prerelease.25601.7 to 11.0.0-prerelease.25603.1][1]
     - Microsoft.DotNet.XHarness.CLI
     - Microsoft.DotNet.XHarness.TestRunners.Common
     - Microsoft.DotNet.XHarness.TestRunners.Xunit

[1]: https://github.com/dotnet/xharness/compare/8c52965b10...3df2923500

[DependencyUpdate]: <> (End)


[marker]: <> (End:be30ac4f-4b72-4287-1eb6-08d8d8fef0ea)

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-12-10 16:03:24+00:00,dotnet-maestro[bot],0,,,3,10,10,"[main] update dependencies from dotnet/xharness (issue_ref)this pull request updates the following dependencies[marker]: <> (begin:be30ac4f-4b72-4287-1eb6-08d8d8fef0ea)## from - **subscription**:[be30ac4f-4b72-4287-1eb6-08d8d8fef0ea](- **build**:[20251203.1](([293158](- **date produced**: december 3, 2025 1:53:47 pm utc- **commit**:[3df2923500447ee925d59f026c81720c7a9b4e4b](- **branch**: [main]([dependencyupdate]: <> (begin)- **dependency updates**: - from [11.0.0-prerelease.25601.7 to 11.0.0-prerelease.25603.1][1] - microsoft.dotnet.xharness.cli - microsoft.dotnet.xharness.testrunners.common - microsoft.dotnet.xharness.testrunners.xunit[1]: [dependencyupdate]: <> (end)[marker]: <> (end:be30ac4f-4b72-4287-1eb6-08d8d8fef0ea)"
dotnet/runtime,3bb51cad730e0346e684e5815b3d19d99e42a7cb,[browser] Generate boot config with hash field instead of integrity (#122353),2025-12-10 16:04:15+00:00,Marek Fišera,0,,,4,30,6,[browser] generate boot config with hash field instead of integrity (issue_ref)
dotnet/runtime,b8452dff695b3886a7022ad55a2fc04365c1f0d6,"[DiagnosticServer] Impove ipc message parsing resiliency (#122257)

While investigating for a way to check whether arbitrary .NET processes
support emitting userevents, the idea of probing for
`DS_IPC_E_UNKNOWN_COMMAND 0x80131385` with an empty payload uncovered a
problem with truncated payloads. Additionally, there were two other
places to improve the resiliency of IPC protocol parsing.",2025-12-10 16:37:29+00:00,Mitchell Hwang,0,,,2,5,2,"[diagnosticserver] impove ipc message parsing resiliency (issue_ref)while investigating for a way to check whether arbitrary .net processessupport emitting userevents, the idea of probing for with an empty payload uncovered aproblem with truncated payloads. additionally, there were two otherplaces to improve the resiliency of ipc protocol parsing."
dotnet/runtime,ef4b554392a4cf2fed42b6784f9cf36c0c2babfd,"Revert ""[Tests][UserEvents] Add userevents functional runtime tests"" (#122394)

Reverts dotnet/runtime#122134

The official build broke",2025-12-10 17:30:53+00:00,Mitchell Hwang,0,,,24,1,1176,"revert ""[tests][userevents] add userevents functional runtime tests"" (issue_ref)reverts dotnet/runtimeissue_refthe official build broke"
dotnet/runtime,e72e7c7f7007dc639300c4546da78783480f8b78,"Disable bad address writing interop tests with interpreter (#122308)

This change disables all libraries interop tests that try to check that
access to non-null invalid address throws access violation or null
reference exception when executed using the interpreter.

I've introduced a new `PlatformDetection.SupportsDirtyAccessViolations`
for this purpose that is set for coreclr interpreter and for Mono and
WASM too. So I have also removed the pre-existing attribute on these
tests that was disabling them on Mono.",2025-12-10 18:10:37+00:00,Jan Vorlicek,0,,,9,82,46,disable bad address writing interop tests with interpreter (issue_ref)this change disables all libraries interop tests that try to check thataccess to non-null invalid address throws access violation or nullreference exception when executed using the interpreter.i've introduced a new for this purpose that is set for coreclr interpreter and for mono andwasm too. so i have also removed the pre-existing attribute on thesetests that was disabling them on mono.
dotnet/runtime,3d2c5f931398a8e6229f39bc7b95ae6cbf46247c,"[clr-interp] Fix conversion from unsigned integer to float (#122369)

- There isn't a single instruction for this, but the jit recognizes the
conv.r.un + conv.r4 pattern as meaning convert directly from unsigned
integer to float. Per ECMA it is valid to do processing at a higher
intermediate precision, but RyuJit/interpreter follows tighter rules
which result in less loss of precision.

Fixes Runtime_106338 test.",2025-12-10 19:32:06+00:00,David Wrighton,1,faff92061615bbd516e4849e94c6c104f893c9d9,"[clr-interp] Fix implicit promotion of I4 to I (#122319)

Ryujit does implicit promotion using zero-extending promotions for some
opcode and sign extending for others. I don't see a particularly good
rhyme or reason for the current behavior, but it does not match what the
interpreter does.

This PR adds a test for all the opcodes that experience promotion, and
attempts to test all the behaviors correctly. In building it, several
issues were found/fixed.

This is known to fix the GitHub13501 test. in addition to the various
issues found during test development.

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",4,55,7,"[clr-interp] fix conversion from unsigned integer to float (issue_ref)- there isn't a single instruction for this, but the jit recognizes theconv.r.un + conv.r4 pattern as meaning convert directly from unsignedinteger to float. per ecma it is valid to do processing at a higherintermediate precision, but ryujit/interpreter follows tighter ruleswhich result in less loss of precision.fixes runtime_106338 test."
dotnet/runtime,1085cdb236349d751dcf6fbbf5384f92e9e0f6cc,"[main] Source code updates from dotnet/dotnet (#122375)

> [!NOTE]
> This is a codeflow update. It may contain both source code changes
from
> [the VMR](https://github.com/dotnet/dotnet)
> as well as dependency updates. Learn more
[here](https://github.com/dotnet/dotnet/tree/main/docs/Codeflow-PRs.md).

This pull request brings the following source code changes

[marker]: <> (Begin:f7901f87-9f24-40d6-9bc1-564863937237)

## From https://github.com/dotnet/dotnet
- **Subscription**:
[f7901f87-9f24-40d6-9bc1-564863937237](https://maestro.dot.net/subscriptions?search=f7901f87-9f24-40d6-9bc1-564863937237)
- **Build**:
[20251209.8](https://dev.azure.com/dnceng/internal/_build/results?buildId=2857483)
([294068](https://maestro.dot.net/channel/8298/github:dotnet:dotnet/build/294068))
- **Date Produced**: December 9, 2025 11:15:07 PM UTC
- **Commit**:
[d65136bfc1cc606d916ceaa102a4c1925e2b5d59](https://github.com/dotnet/dotnet/commit/d65136bfc1cc606d916ceaa102a4c1925e2b5d59)
- **Commit Diff**:
[ce3dea8...d65136b](https://github.com/dotnet/dotnet/compare/ce3dea8b1d1c12cf4b85999f834052d942d84a6d...d65136bfc1cc606d916ceaa102a4c1925e2b5d59)
- **Branch**: [main](https://github.com/dotnet/dotnet/tree/main)

**Updated Dependencies**
- From [5.3.0-1.25608.101 to 5.3.0-1.25609.108][1]
  - Microsoft.CodeAnalysis
  - Microsoft.CodeAnalysis.Analyzers
  - Microsoft.CodeAnalysis.CSharp
  - Microsoft.Net.Compilers.Toolset
- From [11.0.100-alpha.1.25608.101 to 11.0.100-alpha.1.25609.108][1]
  - Microsoft.CodeAnalysis.NetAnalyzers
  - Microsoft.DotNet.ApiCompat.Task
- Microsoft.NET.Workload.Emscripten.Current.Manifest-11.0.100.Transport
- From [11.0.0-beta.25608.101 to 11.0.0-beta.25609.108][1]
  - Microsoft.DotNet.Arcade.Sdk
  - Microsoft.DotNet.Build.Tasks.Archives
  - Microsoft.DotNet.Build.Tasks.Feed
  - Microsoft.DotNet.Build.Tasks.Installers
  - Microsoft.DotNet.Build.Tasks.Packaging
  - Microsoft.DotNet.Build.Tasks.TargetFramework
  - Microsoft.DotNet.Build.Tasks.Templating
  - Microsoft.DotNet.Build.Tasks.Workloads
  - Microsoft.DotNet.CodeAnalysis
  - Microsoft.DotNet.GenAPI
  - Microsoft.DotNet.GenFacades
  - Microsoft.DotNet.Helix.Sdk
  - Microsoft.DotNet.PackageTesting
  - Microsoft.DotNet.RemoteExecutor
  - Microsoft.DotNet.SharedFramework.Sdk
  - Microsoft.DotNet.XliffTasks
  - Microsoft.DotNet.XUnitExtensions
- From [0.11.5-alpha.25608.101 to 0.11.5-alpha.25609.108][1]
  - Microsoft.DotNet.Cecil
- From [2.9.3-beta.25608.101 to 2.9.3-beta.25609.108][1]
  - Microsoft.DotNet.XUnitAssert
  - Microsoft.DotNet.XUnitConsoleRunner
- From [11.0.0-alpha.1.25608.101 to 11.0.0-alpha.1.25609.108][1]
  - Microsoft.NET.Sdk.IL
  - Microsoft.NETCore.App.Ref
  - Microsoft.NETCore.ILAsm
  - runtime.native.System.IO.Ports
  - System.Reflection.Metadata
  - System.Reflection.MetadataLoadContext
  - System.Text.Json
- From [7.0.0-preview.1.10901 to 7.0.0-preview.1.11008][1]
  - NuGet.Frameworks
  - NuGet.Packaging
  - NuGet.ProjectModel
  - NuGet.Versioning
- From [3.0.0-alpha.1.25608.101 to 3.0.0-alpha.1.25609.108][1]
  - System.CommandLine
- From [19.1.0-alpha.1.25564.1 to
19.1.0-alpha.1.25574.1](https://github.com/dotnet/dotnet/compare/df75e5e592...a504aeb8ef)
  - runtime.linux-arm64.Microsoft.NETCore.Runtime.JIT.Tools
  - runtime.linux-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang
  - runtime.linux-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk
  - runtime.linux-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools
  - runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.JIT.Tools
- runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang
  - runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk
  - runtime.linux-musl-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools
  - runtime.linux-musl-x64.Microsoft.NETCore.Runtime.JIT.Tools
  - runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang
  - runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk
  - runtime.linux-musl-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools
  - runtime.linux-x64.Microsoft.NETCore.Runtime.JIT.Tools
  - runtime.linux-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang
  - runtime.linux-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk
  - runtime.linux-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools
  - runtime.osx-arm64.Microsoft.NETCore.Runtime.JIT.Tools
  - runtime.osx-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang
  - runtime.osx-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk
  - runtime.osx-arm64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools
  - runtime.osx-x64.Microsoft.NETCore.Runtime.JIT.Tools
  - runtime.osx-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang
  - runtime.osx-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk
  - runtime.osx-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools
  - runtime.win-arm64.Microsoft.NETCore.Runtime.JIT.Tools
  - runtime.win-x64.Microsoft.NETCore.Runtime.JIT.Tools
  - runtime.win-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Libclang
  - runtime.win-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Sdk
  - runtime.win-x64.Microsoft.NETCore.Runtime.Mono.LLVM.Tools

[marker]: <> (End:f7901f87-9f24-40d6-9bc1-564863937237)

[1]: https://github.com/dotnet/dotnet/compare/ce3dea8b1d...d65136bfc1
[marker]: <> (Start:Footer:CodeFlow PR)

## Associated changes in source repos
-
https://github.com/dotnet/arcade/compare/65e09c040143048211dcf6b2bd69336cbf27eec6...17c915fe8e3094d636fb256f2c2860f38ea7b121
-
https://github.com/dotnet/aspnetcore/compare/70d851104f739fb906aabcd6a07c0935ce2549c9...344dc33bb839a72e781a5e57beeb67659297c6df
-
https://github.com/dotnet/efcore/compare/9a868352299586a7e23b736d945f2931b1e822bf...a6111ceed1629b89554664074b9214054a54c552
-
https://github.com/dotnet/sdk/compare/65384c6536d6c6f6afa9c13dc023b1848f0ef69e...6a6992f5fc42dbd06cd24f3a7db40013035d3965
-
https://github.com/dotnet/source-build-reference-packages/compare/d6738f130736917696d71ad88a7cadeb0a4f9086...1c0ba39805434d3be12679eb7fe5deb9a221e32c
-
https://github.com/dotnet/sourcelink/compare/c84e22bedd248cae51c24bdef5cf4022409fc671...d656e7bc73c28d039e6baf6d591c905ea8b76ee1

<details>
<summary>Diff the source with this PR branch</summary>

```bash
darc vmr diff --name-only https://github.com/dotnet/dotnet:d65136bfc1cc606d916ceaa102a4c1925e2b5d59..https://github.com/dotnet/runtime:darc-main-4a243a17-8293-4aac-8417-aa625023bc21
```
</details>

[marker]: <> (End:Footer:CodeFlow PR)

---------

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-12-10 19:39:32+00:00,dotnet-maestro[bot],0,,,7,217,217,"[main] source code updates from dotnet/dotnet (issue_ref)> [!note]> this is a codeflow update. it may contain both source code changesfrom> [the vmr](> as well as dependency updates. learn more[here](this pull request brings the following source code changes[marker]: <> (begin:f7901f87-9f24-40d6-9bc1-564863937237)## from - **subscription**:[f7901f87-9f24-40d6-9bc1-564863937237](- **build**:[20251209.8](([294068](- **date produced**: december 9, 2025 11:15:07 pm utc- **commit**:[d65136bfc1cc606d916ceaa102a4c1925e2b5d59](- **commit diff**:[ce3dea8...d65136b](- **branch**: [main](**updated dependencies**- from [5.3.0-1.25608.101 to 5.3.0-1.25609.108][1] - microsoft.codeanalysis - microsoft.codeanalysis.analyzers - microsoft.codeanalysis.csharp - microsoft.net.compilers.toolset- from [11.0.100-alpha.1.25608.101 to 11.0.100-alpha.1.25609.108][1] - microsoft.codeanalysis.netanalyzers - microsoft.dotnet.apicompat.task- microsoft.net.workload.emscripten.current.manifest-11.0.100.transport- from [11.0.0-beta.25608.101 to 11.0.0-beta.25609.108][1] - microsoft.dotnet.arcade.sdk - microsoft.dotnet.build.tasks.archives - microsoft.dotnet.build.tasks.feed - microsoft.dotnet.build.tasks.installers - microsoft.dotnet.build.tasks.packaging - microsoft.dotnet.build.tasks.targetframework - microsoft.dotnet.build.tasks.templating - microsoft.dotnet.build.tasks.workloads - microsoft.dotnet.codeanalysis - microsoft.dotnet.genapi - microsoft.dotnet.genfacades - microsoft.dotnet.helix.sdk - microsoft.dotnet.packagetesting - microsoft.dotnet.remoteexecutor - microsoft.dotnet.sharedframework.sdk - microsoft.dotnet.xlifftasks - microsoft.dotnet.xunitextensions- from [0.11.5-alpha.25608.101 to 0.11.5-alpha.25609.108][1] - microsoft.dotnet.cecil- from [2.9.3-beta.25608.101 to 2.9.3-beta.25609.108][1] - microsoft.dotnet.xunitassert - microsoft.dotnet.xunitconsolerunner- from [11.0.0-alpha.1.25608.101 to 11.0.0-alpha.1.25609.108][1] - microsoft.net.sdk.il - microsoft.netcore.app.ref - microsoft.netcore.ilasm - runtime.native.system.io.ports - system.reflection.metadata - system.reflection.metadataloadcontext - system.text.json- from [7.0.0-preview.1.10901 to 7.0.0-preview.1.11008][1] - nuget.frameworks - nuget.packaging - nuget.projectmodel - nuget.versioning- from [3.0.0-alpha.1.25608.101 to 3.0.0-alpha.1.25609.108][1] - system.commandline- from [19.1.0-alpha.1.25564.1 to19.1.0-alpha.1.25574.1]( - runtime.linux-arm64.microsoft.netcore.runtime.jit.tools - runtime.linux-arm64.microsoft.netcore.runtime.mono.llvm.libclang - runtime.linux-arm64.microsoft.netcore.runtime.mono.llvm.sdk - runtime.linux-arm64.microsoft.netcore.runtime.mono.llvm.tools - runtime.linux-musl-arm64.microsoft.netcore.runtime.jit.tools- runtime.linux-musl-arm64.microsoft.netcore.runtime.mono.llvm.libclang - runtime.linux-musl-arm64.microsoft.netcore.runtime.mono.llvm.sdk - runtime.linux-musl-arm64.microsoft.netcore.runtime.mono.llvm.tools - runtime.linux-musl-x64.microsoft.netcore.runtime.jit.tools - runtime.linux-musl-x64.microsoft.netcore.runtime.mono.llvm.libclang - runtime.linux-musl-x64.microsoft.netcore.runtime.mono.llvm.sdk - runtime.linux-musl-x64.microsoft.netcore.runtime.mono.llvm.tools - runtime.linux-x64.microsoft.netcore.runtime.jit.tools - runtime.linux-x64.microsoft.netcore.runtime.mono.llvm.libclang - runtime.linux-x64.microsoft.netcore.runtime.mono.llvm.sdk - runtime.linux-x64.microsoft.netcore.runtime.mono.llvm.tools - runtime.osx-arm64.microsoft.netcore.runtime.jit.tools - runtime.osx-arm64.microsoft.netcore.runtime.mono.llvm.libclang - runtime.osx-arm64.microsoft.netcore.runtime.mono.llvm.sdk - runtime.osx-arm64.microsoft.netcore.runtime.mono.llvm.tools - runtime.osx-x64.microsoft.netcore.runtime.jit.tools - runtime.osx-x64.microsoft.netcore.runtime.mono.llvm.libclang - runtime.osx-x64.microsoft.netcore.runtime.mono.llvm.sdk - runtime.osx-x64.microsoft.netcore.runtime.mono.llvm.tools - runtime.win-arm64.microsoft.netcore.runtime.jit.tools - runtime.win-x64.microsoft.netcore.runtime.jit.tools - runtime.win-x64.microsoft.netcore.runtime.mono.llvm.libclang - runtime.win-x64.microsoft.netcore.runtime.mono.llvm.sdk - runtime.win-x64.microsoft.netcore.runtime.mono.llvm.tools[marker]: <> (end:f7901f87-9f24-40d6-9bc1-564863937237)[1]: [marker]: <> (start:footer:codeflow pr)## associated changes in source repos------<details><summary>diff the source with this pr branch</summary></details>[marker]: <> (end:footer:codeflow pr)---------"
dotnet/runtime,a69f8856860a94cf59cccc5e0ed52c6f5135941d,"[clr-interp] ckfinite throws wrong exception. (#122365)

It turns out that RyuJit throws OverflowException here, not
ArithmeticException. This isn't against the ECMA spec since
OverflowException derives from ArithmeticException, so lets just follow
Ryujit's lead.",2025-12-10 20:49:40+00:00,David Wrighton,1,14df2b3b20e32beefd7a9e5970df063d3d8f5c76,"[clr-interp] Fix dispatch on open virtual delegate with null this (#122429)

This is supposed to throw NullReferenceException. Make it so.

Fixes the GitHub_35000 test.",1,2,2,"[clr-interp] ckfinite throws wrong exception. (issue_ref)it turns out that ryujit throws overflowexception here, notarithmeticexception. this isn't against the ecma spec sinceoverflowexception derives from arithmeticexception, so lets just followryujit's lead."
dotnet/runtime,faff92061615bbd516e4849e94c6c104f893c9d9,"[clr-interp] Fix implicit promotion of I4 to I (#122319)

Ryujit does implicit promotion using zero-extending promotions for some
opcode and sign extending for others. I don't see a particularly good
rhyme or reason for the current behavior, but it does not match what the
interpreter does.

This PR adds a test for all the opcodes that experience promotion, and
attempts to test all the behaviors correctly. In building it, several
issues were found/fixed.

This is known to fix the GitHub13501 test. in addition to the various
issues found during test development.

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-12-10 21:01:29+00:00,David Wrighton,1,d4f6b5643231dfbaf3828c28b9a332256d6bcf85,"[clr-interp] Load/Store peeps deleted expected sequence points from debug data stream (#122400)

- Add some logic to have a minor difference between debug and non-debug
codegen

Fixes JIT/Directed/debugging/debuginfo/tester",8,1106,4,"[clr-interp] fix implicit promotion of i4 to i (issue_ref)ryujit does implicit promotion using zero-extending promotions for someopcode and sign extending for others. i don't see a particularly goodrhyme or reason for the current behavior, but it does not match what theinterpreter does.this pr adds a test for all the opcodes that experience promotion, andattempts to test all the behaviors correctly. in building it, severalissues were found/fixed.this is known to fix the github13501 test. in addition to the variousissues found during test development.---------"
dotnet/runtime,55728d4db73366d1f1b276f8e60eb5581163751b,Exclude runtime-async methods from built-in COM vtables and GUID calculations (#122195),2025-12-10 21:46:47+00:00,Jeremy Koritzinsky,1,68cccaef019a660179f4c542c940f3cdd3419f97,"[RuntimeAsync] Removing TODO in methodtablebuilder.cpp. More robust insertion of methods. (#122377)

Fixes: #121760

To make the insertion of methods more robust we:
* double the capacity of the MT builder up to the absolute limit
required by the implementation of `MethodDesc`.
* check if we still fit in the budget when adding methods.

Note: it may result in some programs that used to run to start throwing
`TypeLoadException`.

These would be extreme cases though. The capacity for simple methods is
implementation-specific. In CoreCLR a type cannot contain more than
65524 methods due to internal limitations.
(More complex cases involving inheritance/virtual methods may have
additional limits.)

With runtime async, methods that return `Task`/`ValueTask` may consume 2
methods instead of 1 from this 65524 budget.
In a worst case where all methods return `Task`, the limit becomes 32762
methods in a single type, which still seems a very high limit for
reasonably real programs that are not generated testcases.

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: Jan Kotas <jkotas@microsoft.com>",19,473,60,exclude runtime-async methods from built-in com vtables and guid calculations (issue_ref)
dotnet/runtime,d4f6b5643231dfbaf3828c28b9a332256d6bcf85,"[clr-interp] Load/Store peeps deleted expected sequence points from debug data stream (#122400)

- Add some logic to have a minor difference between debug and non-debug
codegen

Fixes JIT/Directed/debugging/debuginfo/tester",2025-12-10 22:39:58+00:00,David Wrighton,1,3458dfc66c7620b4ee19f653402ebe2c4b90f67c,"Fix Double/Single.ConvertToIntegerNative for non-primitive types in interpreter (#122342)

The current interpreter logic handles the
System.Double/Single.ConvertToIntegerNative always as must expand and
fails with NO_WAY if the integer type is not primitive. However, that
makes it incorrectly fail e.g. when the integer type is Int128.

This change fixes it by using the compiled version of the function for
non-primitive types.
It fixes the following libraries tests:
*  System.Tests.DoubleTests_GenericMath.ConvertToIntegerNativeTest
*  System.Tests.SingleTests_GenericMath.ConvertToIntegerNativeTest",1,9,0,[clr-interp] load/store peeps deleted expected sequence points from debug data stream (issue_ref)- add some logic to have a minor difference between debug and non-debugcodegenfixes jit/directed/debugging/debuginfo/tester
dotnet/runtime,3458dfc66c7620b4ee19f653402ebe2c4b90f67c,"Fix Double/Single.ConvertToIntegerNative for non-primitive types in interpreter (#122342)

The current interpreter logic handles the
System.Double/Single.ConvertToIntegerNative always as must expand and
fails with NO_WAY if the integer type is not primitive. However, that
makes it incorrectly fail e.g. when the integer type is Int128.

This change fixes it by using the compiled version of the function for
non-primitive types.
It fixes the following libraries tests:
*  System.Tests.DoubleTests_GenericMath.ConvertToIntegerNativeTest
*  System.Tests.SingleTests_GenericMath.ConvertToIntegerNativeTest",2025-12-10 23:13:50+00:00,Jan Vorlicek,1,08ee4f1679be2464251062a6dc268be4205220da,"[clr-interp] Fix a grab bag of issues, mostly around the profiler (#122421)

- Add support for tracking transitions via the profiler/debugger
internal apis
- Notably this involves calls to
ProfilerManagedToUnmanagedTransitionMD/ProfilerUnmanagedToManagedTransitionMD
for the profiler
  - And DebuggerTraceCall for the debugger on reverse p/invoke
- Disabling the enter/leave hooks in the ICorProfiler api
- We now detect attempts to generate these in the interpreter compiler,
and will fail the compile
- Adding a PlatformDetection flag for disabling the tests which depend
on this
  - And adjust several tests to use this flag
- Adjusting profiler test testing the ability of the profiler to control
inlining by disabling that portion of that profiler test as the
interpreter can't do that
- Finally disabling the R2RDumpTests test when the interpreter is
enabled. It works, but its really slow, so lets not wait for it to
finish in any of our test passes

This should fix JIT/profiler/elt/slowpatheltenter,
JIT/profiler/elt/slowpatheltleave, JIT/profiler/unittest/inlining,
JIT/profiler/transitions/transitions,
profiler/dynamicoptimization/DynamicOptimization and
readytorun/r2rdump/FrameworkTests/R2RDumpTests.",1,3,1,"fix double/single.converttointegernative for non-primitive types in interpreter (issue_ref)the current interpreter logic handles thesystem.double/single.converttointegernative always as must expand andfails with no_way if the integer type is not primitive. however, thatmakes it incorrectly fail e.g. when the integer type is int128.this change fixes it by using the compiled version of the function fornon-primitive types.it fixes the following libraries tests:* system.tests.doubletests_genericmath.converttointegernativetest* system.tests.singletests_genericmath.converttointegernativetest"
dotnet/runtime,b720354d7ea50014746756cdcb15edaedd565855,"[Wasm Ryujit] codegen for NOT and NEG (#122376)

Wasm has a few wrinkles here to sort through. There is no NOT or NEG for
integer types in Wasm.

Also, support returning TYP_LONG directly.

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-12-10 23:57:29+00:00,Andy Ayers,0,,,11,102,13,"[wasm ryujit] codegen for not and neg (issue_ref)wasm has a few wrinkles here to sort through. there is no not or neg forinteger types in wasm.also, support returning typ_long directly.---------"
dotnet/runtime,89a493d40853c1cea491e2abbf96452fb66a3608,"[clr-interp] Disable superpmicollect test on interpreter (#122370)

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-12-11 02:09:41+00:00,David Wrighton,0,,,1,3,0,[clr-interp] disable superpmicollect test on interpreter (issue_ref)
dotnet/runtime,08ee4f1679be2464251062a6dc268be4205220da,"[clr-interp] Fix a grab bag of issues, mostly around the profiler (#122421)

- Add support for tracking transitions via the profiler/debugger
internal apis
- Notably this involves calls to
ProfilerManagedToUnmanagedTransitionMD/ProfilerUnmanagedToManagedTransitionMD
for the profiler
  - And DebuggerTraceCall for the debugger on reverse p/invoke
- Disabling the enter/leave hooks in the ICorProfiler api
- We now detect attempts to generate these in the interpreter compiler,
and will fail the compile
- Adding a PlatformDetection flag for disabling the tests which depend
on this
  - And adjust several tests to use this flag
- Adjusting profiler test testing the ability of the profiler to control
inlining by disabling that portion of that profiler test as the
interpreter can't do that
- Finally disabling the R2RDumpTests test when the interpreter is
enabled. It works, but its really slow, so lets not wait for it to
finish in any of our test passes

This should fix JIT/profiler/elt/slowpatheltenter,
JIT/profiler/elt/slowpatheltleave, JIT/profiler/unittest/inlining,
JIT/profiler/transitions/transitions,
profiler/dynamicoptimization/DynamicOptimization and
readytorun/r2rdump/FrameworkTests/R2RDumpTests.",2025-12-11 05:19:28+00:00,David Wrighton,1,b500d448aa3ae6302bdcb8d08d3fc59cadaacc24,"[clr-interp] Fix data loss issue at IL merge points (#122247)

Since the interpreter uses either 32bit or 64 bit floats for values on
the stack it is possible to be in a situation where we lose precision in
a floating point value at an IL merge point. The architecture of the
compiler doesn't have a scheme which would allow the compiler to avoid
hitting this problem, so instead, I've built a scheme to record the
problematic details, and retry the entire compilation of the method
while providing a way to carry the data that certain stack slots need to
be more precise than previously expected.

This fixes jit\jit64\opt\regress\vswhidbey\481244\foo2_d which tests for
this exact scenario

In addition, on 64bit platforms we also have some situations where we
can silently upgrade to a 64 bit int, this covers that situation too, as
well as the case where we merge a native integer and a ByRef so we
should treat the result as a ByRef to avoid any cases where we lose
track of a GC pointer.",14,150,48,"[clr-interp] fix a grab bag of issues, mostly around the profiler (issue_ref)- add support for tracking transitions via the profiler/debuggerinternal apis- notably this involves calls toprofilermanagedtounmanagedtransitionmd/profilerunmanagedtomanagedtransitionmdfor the profiler - and debuggertracecall for the debugger on reverse p/invoke- disabling the enter/leave hooks in the icorprofiler api- we now detect attempts to generate these in the interpreter compiler,and will fail the compile- adding a platformdetection flag for disabling the tests which dependon this - and adjust several tests to use this flag- adjusting profiler test testing the ability of the profiler to controlinlining by disabling that portion of that profiler test as theinterpreter can't do that- finally disabling the r2rdumptests test when the interpreter isenabled. it works, but its really slow, so lets not wait for it tofinish in any of our test passesthis should fix jit/profiler/elt/slowpatheltenter,jit/profiler/elt/slowpatheltleave, jit/profiler/unittest/inlining,jit/profiler/transitions/transitions,profiler/dynamicoptimization/dynamicoptimization andreadytorun/r2rdump/frameworktests/r2rdumptests."
dotnet/runtime,b901eb25566c7c0539288e747c77df145465cb4d,"[RyuJit/WASM] Add jitinterface as wasmjit dependency (#122399)

This automatically rebuilds jitinterface with `./build clr.wasmjit` if
needed, like with the other jit subsets.",2025-12-11 06:21:59+00:00,SingleAccretion,0,,,1,1,0,"[ryujit/wasm] add jitinterface as wasmjit dependency (issue_ref)this automatically rebuilds jitinterface with ifneeded, like with the other jit subsets."
dotnet/runtime,cc7e416b271bf1cb7006f752b457bcca1f22c921,sort mscorrc.cpp when building on windows host (#122405),2025-12-11 09:34:03+00:00,Pavel Savara,0,,,1,3,3,sort mscorrc.cpp when building on windows host (issue_ref)
dotnet/runtime,67e6e17064be797df278fb1373a995db305de384,"[wasm] Bump chrome for testing - linux: 143.0.7499.40, windows: 143.0.7499.41 (#122269)

Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>
Co-authored-by: Larry Ewing <lewing@microsoft.com>",2025-12-11 09:42:32+00:00,github-actions[bot],0,,,1,4,4,"[wasm] bump chrome for testing - linux: 143.0.7499.40, windows: 143.0.7499.41 (issue_ref)"
dotnet/runtime,421445ed64461414dc1e99c6716e81e0b1c51b44,Move CoreCLR over to the managed wait subsystem (#117788),2025-12-11 12:06:46+00:00,Jeremy Koritzinsky,0,,,127,901,17539,move coreclr over to the managed wait subsystem (issue_ref)
dotnet/runtime,14df2b3b20e32beefd7a9e5970df063d3d8f5c76,"[clr-interp] Fix dispatch on open virtual delegate with null this (#122429)

This is supposed to throw NullReferenceException. Make it so.

Fixes the GitHub_35000 test.",2025-12-11 12:41:46+00:00,David Wrighton,1,f0b10411dd25032c4fec0e442b7db0d218ddbeb6,"[clr-interp] Add User Breakpoint Support for Interpreter Debugging (#121911)

This PR implements support for setting and handling user breakpoints
(`System.Diagnostics.Debugger.Break()`) in interpreted code. Regular
breakpoints, stepping, etc. are not covered by these changes.

## Key Changes

**Execution Control Abstraction** (`executioncontrol.h/cpp`)
- Introduced `IExecutionControl` interface to abstract breakpoint
operations across different execution strategies. Currently just for
interpreter but will be extended to other codegens.
- Implemented `InterpreterExecutionControl` class for
interpreter-specific bytecode patching
- `ApplyPatch()`: Replaces bytecode instruction with `INTOP_BREAKPOINT`
opcode
- `UnapplyPatch()`: Restores original bytecode instruction

**Patch Mechanism:**
- Interpreter breakpoints work by patching bytecode directly with
`INTOP_BREAKPOINT` instruction
- Original opcode is saved in the patch structure for restoration

**Breakpoint Flow:**
1. Interpreter hits `INTOP_BREAKPOINT` opcode
2. Interpreter context is prepared and is called
`FirstChanceNativeException()`
3. Debugger controller dispatches to appropriate breakpoint handler
4. Original opcode is restored during patch skip activation

## Notes
- JITComplete notification handling needs revisiting for interpreter
code. I've disabled it for now as it wasn't needed for user breakpoints
and when left enabled it would break the execution, likely due to
patches being applied to interpreter execution loop code.

---------

Co-authored-by: Milos Kotlar <kotlarmilos@gmail.com>",1,4,2,[clr-interp] fix dispatch on open virtual delegate with null this (issue_ref)this is supposed to throw nullreferenceexception. make it so.fixes the github_35000 test.
dotnet/runtime,d31e5990b896447bfc3dbe98cfe6ec3b169a4896,"Add CancellationToken overloads for TextWriter.WriteAsync and WriteLineAsync (#122127)

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>",2025-12-11 13:03:34+00:00,Copilot,0,,,3,114,0,add cancellationtoken overloads for textwriter.writeasync and writelineasync (issue_ref)
dotnet/runtime,f0b10411dd25032c4fec0e442b7db0d218ddbeb6,"[clr-interp] Add User Breakpoint Support for Interpreter Debugging (#121911)

This PR implements support for setting and handling user breakpoints
(`System.Diagnostics.Debugger.Break()`) in interpreted code. Regular
breakpoints, stepping, etc. are not covered by these changes.

## Key Changes

**Execution Control Abstraction** (`executioncontrol.h/cpp`)
- Introduced `IExecutionControl` interface to abstract breakpoint
operations across different execution strategies. Currently just for
interpreter but will be extended to other codegens.
- Implemented `InterpreterExecutionControl` class for
interpreter-specific bytecode patching
- `ApplyPatch()`: Replaces bytecode instruction with `INTOP_BREAKPOINT`
opcode
- `UnapplyPatch()`: Restores original bytecode instruction

**Patch Mechanism:**
- Interpreter breakpoints work by patching bytecode directly with
`INTOP_BREAKPOINT` instruction
- Original opcode is saved in the patch structure for restoration

**Breakpoint Flow:**
1. Interpreter hits `INTOP_BREAKPOINT` opcode
2. Interpreter context is prepared and is called
`FirstChanceNativeException()`
3. Debugger controller dispatches to appropriate breakpoint handler
4. Original opcode is restored during patch skip activation

## Notes
- JITComplete notification handling needs revisiting for interpreter
code. I've disabled it for now as it wasn't needed for user breakpoints
and when left enabled it would break the execution, likely due to
patches being applied to interpreter execution loop code.

---------

Co-authored-by: Milos Kotlar <kotlarmilos@gmail.com>",2025-12-11 13:35:29+00:00,Matous Kozak,1,ef183e9b0b686c1a29eb0bb73083272cdd2419f8,"Revert ""Fix lookup for current Thread in async signal handler"" (#122415)

Just want to run native AOT outerloop on this.

Reverts dotnet/runtime#122048",13,262,9,"[clr-interp] add user breakpoint support for interpreter debugging (issue_ref)this pr implements support for setting and handling user breakpoints() in interpreted code. regularbreakpoints, stepping, etc. are not covered by these changes.## key changes**execution control abstraction** ()- introduced interface to abstract breakpointoperations across different execution strategies. currently just forinterpreter but will be extended to other codegens.- implemented class forinterpreter-specific bytecode patching- : replaces bytecode instruction with opcode- : restores original bytecode instruction**patch mechanism:**- interpreter breakpoints work by patching bytecode directly with instruction- original opcode is saved in the patch structure for restoration**breakpoint flow:**1. interpreter hits opcode2. interpreter context is prepared and is called3. debugger controller dispatches to appropriate breakpoint handler4. original opcode is restored during patch skip activation## notes- jitcomplete notification handling needs revisiting for interpretercode. i've disabled it for now as it wasn't needed for user breakpointsand when left enabled it would break the execution, likely due topatches being applied to interpreter execution loop code.---------"
dotnet/runtime,ab57beac6fc64e25e39aa1a3768d33da741a9437,"[infra][tvOS] Use arm64 tvOS simulator instead of x64 (#122387)

Use arm64 tvOS simulator instead of x64. We still keep coverage over x64 iOS simulators.",2025-12-11 13:38:53+00:00,Matous Kozak,0,,,4,6,6,[infra][tvos] use arm64 tvos simulator instead of x64 (issue_ref)use arm64 tvos simulator instead of x64. we still keep coverage over x64 ios simulators.
dotnet/runtime,f1a20abb0cba23fdebb15062cb0a14dd59347cd2,"Always pass -UseBasicParsing for Invoke-WebRequest calls in powershell (#122439)

https://github.com/dotnet/runtime/issues/122393",2025-12-11 19:00:40+00:00,Alexander Köplinger,0,,,5,5,5,always pass -usebasicparsing for invoke-webrequest calls in powershell (issue_ref)
dotnet/runtime,8f9bb5bd5b12a865b9bf80c757980d1d6a35e448,"[infa][iOS] Disable jobs to improve availability of iOS and tvOS device queues (#122453)

Due to ongoing update of iOS and tvOS device queue, we have limited
testing capacity. Disabling tvOS jobs from `runtime` pipeline and iOS
jobs from `runtime-extra-platforms` pipeline. This should reduce the
strain on the queues, reduce the run time of `runtime` pipeline which
runs on every PR, while still providing full coverage over
rolling-builds of `runtime-extra-platforms` (together with `runtime`
pipeline). Work tracked in
https://github.com/dotnet/runtime/issues/122452.

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-12-11 19:30:36+00:00,Matous Kozak,0,,,2,5,5,"[infa][ios] disable jobs to improve availability of ios and tvos device queues (issue_ref)due to ongoing update of ios and tvos device queue, we have limitedtesting capacity. disabling tvos jobs from pipeline and iosjobs from pipeline. this should reduce thestrain on the queues, reduce the run time of pipeline whichruns on every pr, while still providing full coverage overrolling-builds of (together with pipeline). work tracked in---------"
dotnet/runtime,1981b5fd411c1670fe457c26296febce91477a0f,"[Wasm RyuJit] local stores (#122390)

Partial support for storing to locals.

Storing to ""stack"" locals is stubbed out as it needs upstream work in RA. We just drop the stored value for now to at least model the behavior on the Wasm stack.",2025-12-11 19:48:32+00:00,Andy Ayers,1,9c03d9cbbe9a50e2ed343938db925b80b382c574,"[Wasm RyuJit] Fixes for some issues in codegen bringup tests (#122483)

The strategy for marking blocks that need labels was wrong. We need to
mark block ends when we encounter block starts. To do this efficiently
we need to map from interval end index to block, so expose the map we
built during interval building for use in codegen.

We likely don't need Just My Code debug support for Wasm, so ignore any
request from the runtime to insert the checks.

Wasm structured control flow doesn't allow us to keep blocks in
increasing IL offset order (in general). So disable some of the scope
tracking mechanisms that expect to see this.

Fix another instance where we assumed a 32 bit target would decompose
longs.",3,62,0,"[wasm ryujit] local stores (issue_ref)partial support for storing to locals.storing to ""stack"" locals is stubbed out as it needs upstream work in ra. we just drop the stored value for now to at least model the behavior on the wasm stack."
dotnet/runtime,fd9400527d4dfc36289dd7e4f70e9d2a7416d863,Bump js-yaml from 4.1.0 to 4.1.1 in /src/mono/browser/runtime (#122401),2025-12-11 19:53:55+00:00,dependabot[bot],0,,,1,10,4,bump js-yaml from 4.1.0 to 4.1.1 in /src/mono/browser/runtime (issue_ref)
dotnet/runtime,8b60f006de39bd1d1b35ef9fc46c59cc3c283607,"Accept any 2xx status code for CONNECT responses per RFC 9110/9112 (#122408)

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>",2025-12-11 20:43:35+00:00,Copilot,0,,,5,67,11,accept any 2xx status code for connect responses per rfc 9110/9112 (issue_ref)
dotnet/runtime,3e795e86675350a537182de07c55cb80d07de20f,"Add [OverloadResolutionPriority(1)] to MemoryMarshal.AsRef(Span<byte>) (#122330)

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>",2025-12-11 22:00:26+00:00,Copilot,0,,,3,25,0,add [overloadresolutionpriority(1)] to memorymarshal.asref(span<byte>) (issue_ref)
dotnet/runtime,ef183e9b0b686c1a29eb0bb73083272cdd2419f8,"Revert ""Fix lookup for current Thread in async signal handler"" (#122415)

Just want to run native AOT outerloop on this.

Reverts dotnet/runtime#122048",2025-12-11 23:18:17+00:00,Michal Strehovský,1,8d796d8e60a5236cbd5f113ead1d3831064cdba1,"Redo fix lookup for current Thread in async signal handler (#122513)

This is a new version of the fix. The code in HijackCallback was using
the fact whether the
pThreadToHijack is NULL or not as an indicator of whether it should
suspend inline or redirect the thread. So passing in the pThreadToHijack
without other changes caused it to never suspend inline on Unix and it
was causing hangs in System.Collections.Concurrent tests.

The current CheckActivationSafePoint uses thread local storage to
get the current Thread instance. But this function is called from
async signal handler (the activation signal handler) and it is not
allowed to access TLS variables there because the access can allocate
and if the interrupted code was running in an allocation code, it
could crash.
There was no problem with this since .NET 1.0, but a change in the
recent glibc version has broken this. We've got reports of crashes
in this code due to the reason mentioned above.

This change introduces an async safe mechanism for accessing the
current Thread instance from async signal handlers. It uses a
segmented array that can grow, but never shrink. Entries for
threads are added when runtime creates a thread / attaches to an
external thread and removed when the thread dies.

The check for safety of the activation injection was further enhanced
to make sure that the ScanReaderLock is not taken. In cases it would
need to be taken, we just reject the location.

Since NativeAOT is subject to the same issue, the code to maintain the
thread id to thread instance map is placed to the minipal and shared
between coreclr and NativeAOT.

Closes https://github.com/dotnet/runtime/issues/121581

---------

Co-authored-by: Jan Kotas <jkotas@microsoft.com>
Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",14,55,328,"revert ""fix lookup for current thread in async signal handler"" (issue_ref)just want to run native aot outerloop on this.reverts dotnet/runtimeissue_ref"
dotnet/runtime,30a5c7c0fad7e9cc431f68cf0784cf766370cec0,"Disable GC/Scenarios/THDChaos/thdchaos test on Arm32 (#122461)

Disables the `GC/Scenarios/THDChaos/thdchaos` test on Arm32 platforms due to OutOfMemory test failures 

---------

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: JulieLeeMSFT <63486087+JulieLeeMSFT@users.noreply.github.com>
Co-authored-by: Jan Kotas <jkotas@microsoft.com>
Co-authored-by: jkotas <6668460+jkotas@users.noreply.github.com>",2025-12-11 23:25:13+00:00,Copilot,0,,,1,3,0,disable gc/scenarios/thdchaos/thdchaos test on arm32 (issue_ref)disables the test on arm32 platforms due to outofmemory test failures ---------
dotnet/runtime,9dcf95ac736a5f4446e7440102cefd9ac4053e6f,Remove support for running illink on runtime tests while testing (#122315),2025-12-11 23:46:29+00:00,Jeremy Koritzinsky,0,,,33,11,338,remove support for running illink on runtime tests while testing (issue_ref)
dotnet/runtime,13ee79029b0979b8916a85a3235c582ea218f525,"Skip failing COM test (#122474)

Skips the test causing https://github.com/dotnet/runtime/issues/122447",2025-12-12 05:05:27+00:00,Jackson Schuster,1,87d5dc37be173b0217fe6122889b7291377235f2,"Add AddRef to callee that caches interface ptr (#122509)

Callee was missing an AddRef when returning the cached interface
pointer. Tests no longer fail on Linux with this change locally.

Fixes https://github.com/dotnet/runtime/issues/122447",1,1,1,skip failing com test (issue_ref)skips the test causing
dotnet/runtime,0138cb7048ab33e904380b8c93aa46473901cc1f,"[coreclr] Make sure native string resource array(s) are sorted (#122441)

So that binary search works properly.

This updates bash script with similar change as
https://github.com/dotnet/runtime/issues/122403 did for powershell
script.",2025-12-12 09:41:07+00:00,Radek Doulik,0,,,1,1,1,[coreclr] make sure native string resource array(s) are sorted (issue_ref)so that binary search works properly.this updates bash script with similar change as did for powershellscript.
dotnet/runtime,bed0cadfbf6a7067e24e302549829a45475cd224,"[browser] Add cache setting to asset definition, use ""force-cache"" for fingerprinted assets (#122101)",2025-12-12 11:44:37+00:00,Ondřej Roztočil,0,,,28,483,21,"[browser] add cache setting to asset definition, use ""force-cache"" for fingerprinted assets (issue_ref)"
dotnet/runtime,b475f17a8a72fd185f3d4e397676cc6f61b1bbb9,"Remove optimization from valuetask-source-stub project (#122484)

This was added around the same time as I was making a pass to remove
Optimize=true.

Cc @vsadov @jakobbotsch",2025-12-12 12:32:37+00:00,Michal Strehovský,0,,,1,0,3,remove optimization from valuetask-source-stub project (issue_ref)this was added around the same time as i was making a pass to removeoptimize=true.cc @vsadov @jakobbotsch
dotnet/runtime,0b3f3ab1ecf4de06459e5f0e2b7cb3baf70ef981,"Split Copilot instructions into agent-specific files (#122413)

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>
Co-authored-by: Stephen Toub <stoub@microsoft.com>",2025-12-12 14:15:22+00:00,Copilot,0,,,2,136,0,split copilot instructions into agent-specific files (issue_ref)
dotnet/runtime,3828390900a58b3b96acb26f31c1c9664734b92f,"Add cancellation token check to BlockingCollection.TakeFromAny fast path (#122410)

Co-authored-by: copilot-swe-agent[bot] <198982749+Copilot@users.noreply.github.com>
Co-authored-by: stephentoub <2642209+stephentoub@users.noreply.github.com>",2025-12-12 14:28:56+00:00,Copilot,0,,,2,24,0,add cancellation token check to blockingcollection.takefromany fast path (issue_ref)
dotnet/runtime,283e2162d084c607f622832553f3e6b5de59a432,"Arm64 SVE: Allow SVE nodes to be treated as generic ops (#119352)

Enables all standard arithmetic operations.
Does not include compare operations.

---------

Co-authored-by: Egor Bogatov <egorbo@gmail.com>
Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-12-12 16:22:09+00:00,Alan Hayward,0,,,7,126,6,arm64 sve: allow sve nodes to be treated as generic ops (issue_ref)enables all standard arithmetic operations.does not include compare operations.---------
dotnet/runtime,1e1d58c2991bdddb2c6c7feae6e8ccdf2b659d04,"[cDAC] save datadescriptors in minidumps (#121360)

* Saves cDAC datadescriptor blobs in minidumps / heapdumps
* Increases heap/mini dump sizes by around 10-15kB.",2025-12-12 19:28:55+00:00,Max Charlamb,0,,,4,87,0,[cdac] save datadescriptors in minidumps (issue_ref)* saves cdac datadescriptor blobs in minidumps / heapdumps* increases heap/mini dump sizes by around 10-15kb.
dotnet/runtime,7a7baaa0342f6b6d196ae19f255903b569f4ca18,"Delete ShadowConcreteUnboxingThunkNode (#122469)

This was dead code, since `CanonicalEntrypoint` was only called with a single argument.",2025-12-12 19:35:16+00:00,Sven Boemer,0,,,3,7,100,"delete shadowconcreteunboxingthunknode (issue_ref)this was dead code, since was only called with a single argument."
dotnet/runtime,a0f3feaadf409aed6af06285a9833752a30c570d,"Update build script to append `.slnx` for some uses of the `-vs` flag (#122312)

When running `.\build.cmd -vs coreclr.slnx` for example, the solution
would not be found as a hardcoded `.sln` was still being used. This also
changes the logic to use a regex instead for the hardcoded cases which
we recognized in the `-vs` argument.",2025-12-13 00:24:46+00:00,Adam Perlin,0,,,1,18,8,"update build script to append for some uses of the flag (issue_ref)when running for example, the solutionwould not be found as a hardcoded was still being used. this alsochanges the logic to use a regex instead for the hardcoded cases whichwe recognized in the argument."
dotnet/runtime,3da1389b964ff9a46ab3dc7083a536750e31e10c,"Rework bootstrap layout usage for AOT publish of cdac project (#122471)

The cdac was setting a slew of properties that had cascading effects on
the bootstrap targetting pack logic. Simplify this to only kick in when
using AOT publishing in-build.

---------

Co-authored-by: Jeremy Koritzinsky <Jeremy.Koritzinsky@microsoft.com>",2025-12-13 02:46:10+00:00,Juan Hoyos,0,,,5,15,9,rework bootstrap layout usage for aot publish of cdac project (issue_ref)the cdac was setting a slew of properties that had cascading effects onthe bootstrap targetting pack logic. simplify this to only kick in whenusing aot publishing in-build.---------
dotnet/runtime,e741300cd3189711d0a12a346f67f9325a6786ab,"Bump minimum iOS/tvOS version from 12.2 to 13.0 and MacCatalyst from 15.0 to 15.2 (#122436)

Co-authored-by: Alexander Köplinger <alex.koeplinger@outlook.com>",2025-12-13 08:50:01+00:00,Copilot,1,891c183b22d023eea7bc4aa57dbc219d54852036,"Use TaskHostFactory to resolve file lock issues and simplify tasks build (#122525)

Fixes https://github.com/dotnet/dotnet/issues/3875

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",13,34,32,bump minimum ios/tvos version from 12.2 to 13.0 and maccatalyst from 15.0 to 15.2 (issue_ref)
dotnet/runtime,37dd34d56c36201d7bdaf8e2c568b901263a5f06,"Don't runtime-await Delegate.Invoke methods (#122491)

This is doubly inefficient because:

* The method pointed to by the delegate is guaranteed not runtime-async
(so we'd go through up to two thunks), and
* the variant of `Invoke` method is no longer _the_ `Delegate.Invoke`
method that can be reported as `CORINFO_FLG_DELEGATE_INVOKE` to RyuJIT
(needs to be invoked as a regular method instead of the efficient
delegate invoke sequence).

CoreCLR does this in methodtablebuilder.cs where we consider all methods
on delegates as `MethodReturnKind::NormalMethod`.

Also adding a test because it looks like we don't have one.",2025-12-13 10:36:58+00:00,Michal Strehovský,0,,,4,43,1,"don't runtime-await delegate.invoke methods (issue_ref)this is doubly inefficient because:* the method pointed to by the delegate is guaranteed not runtime-async(so we'd go through up to two thunks), and* the variant of method is no longer _the_ method that can be reported as to ryujit(needs to be invoked as a regular method instead of the efficientdelegate invoke sequence).coreclr does this in methodtablebuilder.cs where we consider all methodson delegates as .also adding a test because it looks like we don't have one."
dotnet/runtime,05b94f1164e871918515054b9de854fcf68485aa,"[ilasm] Treat errors in -ERR mode as warnings (#122270)

The undocumented -ERR mode is meant to ignore errors and allow produce
invalid binaries for test purposes. Print the errors as warnings in this
mode so that they do not fail the build.",2025-12-14 03:43:40+00:00,Jan Kotas,0,,,1,1,1,[ilasm] treat errors in -err mode as warnings (issue_ref)the undocumented -err mode is meant to ignore errors and allow produceinvalid binaries for test purposes. print the errors as warnings in thismode so that they do not fail the build.
dotnet/runtime,fa770b5e08ff96add134e9655fe0c14649c862b1,"Cleanup src/tasks (#122551)

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-12-15 13:52:56+00:00,Viktor Hofer,0,,,20,101,128,cleanup src/tasks (issue_ref)
dotnet/runtime,90267e5573d055e2da7d8c21837fde3eb5379b9f,"Introduce TYP_SIMD to the JIT for Vector<T> (#121548)

The type is experimental and will only be materialized on ARM64, when
`DOTNET_JitUseScalableVectorT=1`. This change covers initial properties
of the type and pattern matching the type during import.",2025-12-15 14:40:16+00:00,snickolls-arm,0,,,6,27,2,"introduce typ_simd to the jit for vector<t> (issue_ref)the type is experimental and will only be materialized on arm64, when. this change covers initial propertiesof the type and pattern matching the type during import."
dotnet/runtime,9ae340a37d0fbaa2c418a8bc263269761c2b76b4,"[main] Update dependencies from dotnet/icu (#122540)

This pull request updates the following dependencies

[marker]: <> (Begin:4247a230-8931-4538-5b64-08d8d8feb47e)
## From https://github.com/dotnet/icu
- **Subscription**:
[4247a230-8931-4538-5b64-08d8d8feb47e](https://maestro.dot.net/subscriptions?search=4247a230-8931-4538-5b64-08d8d8feb47e)
- **Build**:
[20251213.1](https://dev.azure.com/dnceng/internal/_build/results?buildId=2860676)
([294614](https://maestro.dot.net/channel/8297/github:dotnet:icu/build/294614))
- **Date Produced**: December 14, 2025 6:17:30 AM UTC
- **Commit**:
[ec1104bf9cef1d5a7ba113d3fc5418e4df01c8f5](https://github.com/dotnet/icu/commit/ec1104bf9cef1d5a7ba113d3fc5418e4df01c8f5)
- **Branch**:
[dotnet/main](https://github.com/dotnet/icu/tree/dotnet/main)

[DependencyUpdate]: <> (Begin)

- **Dependency Updates**:
  - From [11.0.0-alpha.1.25580.1 to 11.0.0-alpha.1.25613.1][1]
     - Microsoft.NETCore.Runtime.ICU.Transport

[1]: https://github.com/dotnet/icu/compare/f304593480...ec1104bf9c

[DependencyUpdate]: <> (End)


[marker]: <> (End:4247a230-8931-4538-5b64-08d8d8feb47e)

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>",2025-12-15 16:30:24+00:00,dotnet-maestro[bot],0,,,2,3,3,"[main] update dependencies from dotnet/icu (issue_ref)this pull request updates the following dependencies[marker]: <> (begin:4247a230-8931-4538-5b64-08d8d8feb47e)## from - **subscription**:[4247a230-8931-4538-5b64-08d8d8feb47e](- **build**:[20251213.1](([294614](- **date produced**: december 14, 2025 6:17:30 am utc- **commit**:[ec1104bf9cef1d5a7ba113d3fc5418e4df01c8f5](- **branch**:[dotnet/main]([dependencyupdate]: <> (begin)- **dependency updates**: - from [11.0.0-alpha.1.25580.1 to 11.0.0-alpha.1.25613.1][1] - microsoft.netcore.runtime.icu.transport[1]: [dependencyupdate]: <> (end)[marker]: <> (end:4247a230-8931-4538-5b64-08d8d8feb47e)"
dotnet/runtime,a146c0f25fba08e4b8d67f76d9f222f1934cfa8f,"[main] Source code updates from dotnet/dotnet (#122478)

> [!NOTE]
> This is a codeflow update. It may contain both source code changes
from
> [the VMR](https://github.com/dotnet/dotnet)
> as well as dependency updates. Learn more
[here](https://github.com/dotnet/dotnet/tree/main/docs/Codeflow-PRs.md).

This pull request brings the following source code changes

[marker]: <> (Begin:f7901f87-9f24-40d6-9bc1-564863937237)

## From https://github.com/dotnet/dotnet
- **Subscription**:
[f7901f87-9f24-40d6-9bc1-564863937237](https://maestro.dot.net/subscriptions?search=f7901f87-9f24-40d6-9bc1-564863937237)
- **Build**:
[20251211.3](https://dev.azure.com/dnceng/internal/_build/results?buildId=2858874)
([294309](https://maestro.dot.net/channel/8298/github:dotnet:dotnet/build/294309))
- **Date Produced**: December 11, 2025 1:58:58 PM UTC
- **Commit**:
[a137035987f8faebec182016349982241a2eebd1](https://github.com/dotnet/dotnet/commit/a137035987f8faebec182016349982241a2eebd1)
- **Commit Diff**:
[d65136b...a137035](https://github.com/dotnet/dotnet/compare/d65136bfc1cc606d916ceaa102a4c1925e2b5d59...a137035987f8faebec182016349982241a2eebd1)
- **Branch**: [main](https://github.com/dotnet/dotnet/tree/main)

**Updated Dependencies**
- From [5.3.0-1.25609.108 to 5.3.0-1.25611.103][1]
  - Microsoft.CodeAnalysis
  - Microsoft.CodeAnalysis.Analyzers
  - Microsoft.CodeAnalysis.CSharp
  - Microsoft.Net.Compilers.Toolset
- From [11.0.100-alpha.1.25609.108 to 11.0.100-alpha.1.25611.103][1]
  - Microsoft.CodeAnalysis.NetAnalyzers
  - Microsoft.DotNet.ApiCompat.Task
- Microsoft.NET.Workload.Emscripten.Current.Manifest-11.0.100.Transport
- From [11.0.0-beta.25609.108 to 11.0.0-beta.25611.103][1]
  - Microsoft.DotNet.Arcade.Sdk
  - Microsoft.DotNet.Build.Tasks.Archives
  - Microsoft.DotNet.Build.Tasks.Feed
  - Microsoft.DotNet.Build.Tasks.Installers
  - Microsoft.DotNet.Build.Tasks.Packaging
  - Microsoft.DotNet.Build.Tasks.TargetFramework
  - Microsoft.DotNet.Build.Tasks.Templating
  - Microsoft.DotNet.Build.Tasks.Workloads
  - Microsoft.DotNet.CodeAnalysis
  - Microsoft.DotNet.GenAPI
  - Microsoft.DotNet.GenFacades
  - Microsoft.DotNet.Helix.Sdk
  - Microsoft.DotNet.PackageTesting
  - Microsoft.DotNet.RemoteExecutor
  - Microsoft.DotNet.SharedFramework.Sdk
  - Microsoft.DotNet.XliffTasks
  - Microsoft.DotNet.XUnitExtensions
- From [0.11.5-alpha.25609.108 to 0.11.5-alpha.25611.103][1]
  - Microsoft.DotNet.Cecil
- From [2.9.3-beta.25609.108 to 2.9.3-beta.25611.103][1]
  - Microsoft.DotNet.XUnitAssert
  - Microsoft.DotNet.XUnitConsoleRunner
- From [11.0.0-alpha.1.25609.108 to 11.0.0-alpha.1.25611.103][1]
  - Microsoft.NET.Sdk.IL
  - Microsoft.NETCore.App.Ref
  - Microsoft.NETCore.ILAsm
  - runtime.native.System.IO.Ports
  - System.Reflection.Metadata
  - System.Reflection.MetadataLoadContext
  - System.Text.Json
- From [7.0.0-preview.1.11008 to 7.0.0-preview.1.11203][1]
  - NuGet.Frameworks
  - NuGet.Packaging
  - NuGet.ProjectModel
  - NuGet.Versioning
- From [3.0.0-alpha.1.25609.108 to 3.0.0-alpha.1.25611.103][1]
  - System.CommandLine

[marker]: <> (End:f7901f87-9f24-40d6-9bc1-564863937237)

[1]: https://github.com/dotnet/dotnet/compare/d65136bfc1...a137035987
[marker]: <> (Start:Footer:CodeFlow PR)

## Associated changes in source repos
-
https://github.com/dotnet/aspnetcore/compare/344dc33bb839a72e781a5e57beeb67659297c6df...c9d0750396e1d319301255ba61842721ab72ab10
-
https://github.com/dotnet/efcore/compare/a6111ceed1629b89554664074b9214054a54c552...bdeac5b76b25f4e027e8043a39e0c637a9914d8a
-
https://github.com/dotnet/msbuild/compare/228caa11ad0046ccb599530abd9aba4e1979b5e9...60df124f65e3ad02433097bd7067f9c030fa1af1
-
https://github.com/microsoft/vstest/compare/154e8babf0b97312a403b6ccf84cf1498a32ecea...bbee830b0ef18eb5b4aa5daee65ae35a34f8c132
-
https://github.com/dotnet/winforms/compare/1a8c138be340d80c7e288e044e8a80b7f4adeb1b...6b55842360e78bd1d7b15977694524fc092b7cc7
-
https://github.com/dotnet/wpf/compare/6e486f4f1e48f2729f707f2b93d915214a7d6f6e...37b9597bebaf48196a05f6d6212ec1e9bc24352f

<details>
<summary>Diff the source with this PR branch</summary>

```bash
darc vmr diff --name-only https://github.com/dotnet/dotnet:a137035987f8faebec182016349982241a2eebd1..https://github.com/dotnet/runtime:darc-main-22ae4fdf-ab5a-4b14-ac5b-b6152a42620e
```
</details>

[marker]: <> (End:Footer:CodeFlow PR)

Co-authored-by: dotnet-maestro[bot] <dotnet-maestro[bot]@users.noreply.github.com>
Co-authored-by: Larry Ewing <lewing@microsoft.com>",2025-12-15 17:57:59+00:00,dotnet-maestro[bot],0,,,6,137,130,"[main] source code updates from dotnet/dotnet (issue_ref)> [!note]> this is a codeflow update. it may contain both source code changesfrom> [the vmr](> as well as dependency updates. learn more[here](this pull request brings the following source code changes[marker]: <> (begin:f7901f87-9f24-40d6-9bc1-564863937237)## from - **subscription**:[f7901f87-9f24-40d6-9bc1-564863937237](- **build**:[20251211.3](([294309](- **date produced**: december 11, 2025 1:58:58 pm utc- **commit**:[a137035987f8faebec182016349982241a2eebd1](- **commit diff**:[d65136b...a137035](- **branch**: [main](**updated dependencies**- from [5.3.0-1.25609.108 to 5.3.0-1.25611.103][1] - microsoft.codeanalysis - microsoft.codeanalysis.analyzers - microsoft.codeanalysis.csharp - microsoft.net.compilers.toolset- from [11.0.100-alpha.1.25609.108 to 11.0.100-alpha.1.25611.103][1] - microsoft.codeanalysis.netanalyzers - microsoft.dotnet.apicompat.task- microsoft.net.workload.emscripten.current.manifest-11.0.100.transport- from [11.0.0-beta.25609.108 to 11.0.0-beta.25611.103][1] - microsoft.dotnet.arcade.sdk - microsoft.dotnet.build.tasks.archives - microsoft.dotnet.build.tasks.feed - microsoft.dotnet.build.tasks.installers - microsoft.dotnet.build.tasks.packaging - microsoft.dotnet.build.tasks.targetframework - microsoft.dotnet.build.tasks.templating - microsoft.dotnet.build.tasks.workloads - microsoft.dotnet.codeanalysis - microsoft.dotnet.genapi - microsoft.dotnet.genfacades - microsoft.dotnet.helix.sdk - microsoft.dotnet.packagetesting - microsoft.dotnet.remoteexecutor - microsoft.dotnet.sharedframework.sdk - microsoft.dotnet.xlifftasks - microsoft.dotnet.xunitextensions- from [0.11.5-alpha.25609.108 to 0.11.5-alpha.25611.103][1] - microsoft.dotnet.cecil- from [2.9.3-beta.25609.108 to 2.9.3-beta.25611.103][1] - microsoft.dotnet.xunitassert - microsoft.dotnet.xunitconsolerunner- from [11.0.0-alpha.1.25609.108 to 11.0.0-alpha.1.25611.103][1] - microsoft.net.sdk.il - microsoft.netcore.app.ref - microsoft.netcore.ilasm - runtime.native.system.io.ports - system.reflection.metadata - system.reflection.metadataloadcontext - system.text.json- from [7.0.0-preview.1.11008 to 7.0.0-preview.1.11203][1] - nuget.frameworks - nuget.packaging - nuget.projectmodel - nuget.versioning- from [3.0.0-alpha.1.25609.108 to 3.0.0-alpha.1.25611.103][1] - system.commandline[marker]: <> (end:f7901f87-9f24-40d6-9bc1-564863937237)[1]: [marker]: <> (start:footer:codeflow pr)## associated changes in source repos------<details><summary>diff the source with this pr branch</summary></details>[marker]: <> (end:footer:codeflow pr)"
dotnet/runtime,6ab804eac3e82a02f34cbf57603d7f9a61146340,"Switch Apple's digest functionality to CryptoKit (#120953)

This changes our implementation of hashing to be based on CryptoKit
instead of CommonCrypto. This will set us up on a path for success to
eventually add handling for SHA-3.

A couple of notes on implementation:

1. HMAC will be a follow up.
2. The goal of this was to make the Swift function interface be a drop
in replacement for the C one, calling convention aside. Any changes to
the p/invoke shape can / should be a follow up.
3. This will drop support for iOS / tvOS 12. Per discussion on
https://github.com/dotnet/runtime/issues/120457, this is ""fine"" but we
should not merge this until it's been explicitly agreed upon that we are
actually okay taking a change that will not work on iOS 12.2.

---------

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>
Co-authored-by: Alexander Köplinger <alex.koeplinger@outlook.com>",2025-12-15 19:29:20+00:00,Kevin Jones,0,,,6,221,310,"switch apple's digest functionality to cryptokit (issue_ref)this changes our implementation of hashing to be based on cryptokitinstead of commoncrypto. this will set us up on a path for success toeventually add handling for sha-3.a couple of notes on implementation:1. hmac will be a follow up.2. the goal of this was to make the swift function interface be a dropin replacement for the c one, calling convention aside. any changes tothe p/invoke shape can / should be a follow up.3. this will drop support for ios / tvos 12. per discussion on this is ""fine"" but weshould not merge this until it's been explicitly agreed upon that we areactually okay taking a change that will not work on ios 12.2.---------"
dotnet/runtime,09716ec2fc08f527ec61c65b9f7dda8bedec8cc2,"Initial scaffolding and partial implementation of ilasm in C# (#122112)

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-12-15 19:45:43+00:00,Jeremy Koritzinsky,0,,,29,8081,0,initial scaffolding and partial implementation of ilasm in c# (issue_ref)
dotnet/runtime,d162bbac3b5739b19e90515ed747f5e045b4450c,"Enable setting the TypeMap entrypoint assembly via a RuntimeHostConfigurationOption (#121513)

Implements the alternative to
https://github.com/dotnet/runtime/issues/121138 mentioned in
https://github.com/dotnet/runtime/issues/121138#issuecomment-3459953860

Enables the TypeMap to be used in Library output types. Projects can set
the following RuntimeHostConfigurationOption to enable this behavior at runtime.
They also must set the TypeMapEntryAssembly property for the trimming tools. If
the option exists, this option takes priority over the entrypoint assembly.

```
<ItemGroup>
    <RuntimeHostConfigurationOption Include=""System.Runtime.InteropServices.TypeMappingEntryAssembly""
        Value=""$(TypeMapEntryAssembly)""
        Condition=""$(TypeMapEntryAssembly) != ''"" />
</ItemGroup>
```",2025-12-15 21:57:28+00:00,Jackson Schuster,0,,,21,283,35,"enable setting the typemap entrypoint assembly via a runtimehostconfigurationoption (issue_ref)implements the alternative to mentioned in#issuecomment-3459953860enables the typemap to be used in library output types. projects can setthe following runtimehostconfigurationoption to enable this behavior at runtime.they also must set the typemapentryassembly property for the trimming tools. ifthe option exists, this option takes priority over the entrypoint assembly."
dotnet/runtime,f669bcbe79cc5af0169b1da8290a4876508e7bc3,"[cleanup] improve comment alignment in gtlist.h (#121784)

This change improves the readability of comments in `gtlist.h`.

Previously, the comment columns were visually aligned by placing commas
in the
same positions as the actual argument separators. While this kept the
columns
technically aligned, the presence of ""floating commas"" in the comments
made the
structure harder to parse at a glance.

The updated version replaces those comma placeholders with clearer
alignment
cues, making the layout easier to understand.

No behavioral changes.

Part of https://github.com/dotnet/runtime/issues/84834, cc
@dotnet/samsung
@SkyShield @namu-lee",2025-12-15 22:59:53+00:00,Donguk Ju,0,,,1,4,5,"[cleanup] improve comment alignment in gtlist.h (issue_ref)this change improves the readability of comments in .previously, the comment columns were visually aligned by placing commasin thesame positions as the actual argument separators. while this kept thecolumnstechnically aligned, the presence of ""floating commas"" in the commentsmade thestructure harder to parse at a glance.the updated version replaces those comma placeholders with cleareralignmentcues, making the layout easier to understand.no behavioral changes.part of cc@dotnet/samsung@skyshield @namu-lee"
dotnet/runtime,14a10b647a28aeae938e167d29f463eadefa4963,"Ensure consistency between ThreadState.Stopped APIs that check if a thread is dead (#122568)

Co-authored-by: Copilot <175728472+Copilot@users.noreply.github.com>",2025-12-15 23:14:50+00:00,Jeremy Koritzinsky,0,,,4,16,39,ensure consistency between threadstate.stopped apis that check if a thread is dead (issue_ref)
dotnet/runtime,20805161391d45095f4bcf27d0483f600e608b10,"Haiku: Mark unsupported advanced network functions (#121882)

Add the `UnsupportedOSPlatformAttribute` for Haiku to managed network
functions in `System.Net.NetworkInformation` to provide a consistent API
on Haiku.

Part of #55803.

---------

Co-authored-by: Miha Zupan <mihazupan.zupan1@gmail.com>",2025-12-15 23:44:14+00:00,Trung Nguyen,0,,,15,49,4,haiku: mark unsupported advanced network functions (issue_ref)add the for haiku to managed networkfunctions in to provide a consistent apion haiku.part of issue_ref.---------
dotnet/runtime,cce23eef7f53ee914777425b7fd01228e548926c,"[mono][interp] Add max limit to the imported IL when inlining (#121580)

While we have some simple heuristics on whether we should inline a
method or not, we have no limit on how many methods we can inline. So,
if a method has 1000 callsites to methods that are inlineable, we will
inline each one of them, significantly bloating the code. This is made
worse by more advanced SSA optimizations, because the compilation time
becomes very slow and uses a lot of memory.

The limit is set as a simple upper limit on the total amount of IL code
being imported as part of method compilation. This is set to a generous
initial value of 1MB, since local testing showed that it is still
handled decently well. The largest value obtained from running
System.Runtime libtests suite is 100K. A customer provided sample was
hitting 8MB of imported code, which was causing GBs of mem usage and
several seconds to compile the method. In the end, all this code was
discarded anyway, since it was exceeding interpreter offset limits, and
we had to retry compilation with inlining disabled.",2025-12-16 12:13:37+00:00,Vlad Brezae,0,,,2,11,0,"[mono][interp] add max limit to the imported il when inlining (issue_ref)while we have some simple heuristics on whether we should inline amethod or not, we have no limit on how many methods we can inline. so,if a method has 1000 callsites to methods that are inlineable, we willinline each one of them, significantly bloating the code. this is madeworse by more advanced ssa optimizations, because the compilation timebecomes very slow and uses a lot of memory.the limit is set as a simple upper limit on the total amount of il codebeing imported as part of method compilation. this is set to a generousinitial value of 1mb, since local testing showed that it is stillhandled decently well. the largest value obtained from runningsystem.runtime libtests suite is 100k. a customer provided sample washitting 8mb of imported code, which was causing gbs of mem usage andseveral seconds to compile the method. in the end, all this code wasdiscarded anyway, since it was exceeding interpreter offset limits, andwe had to retry compilation with inlining disabled."
